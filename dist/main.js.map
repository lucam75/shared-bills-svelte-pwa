{"version":3,"file":"main.js","sources":["../node_modules/svelte/internal/index.mjs","../node_modules/svelte/store/index.mjs","../node_modules/svelte-persistent-store/dist/chunk.7TSZKFFQ.mjs","../node_modules/svelte-persistent-store/dist/chunk.FDWZTHUB.mjs","../src/jsforce/jsforce.js","../src/store/store.js","../src/components/Login.svelte","../node_modules/svelte-spa-router/Router.svelte","../node_modules/regexparam/dist/regexparam.mjs","../src/components/Token.svelte","../src/components/Home.svelte","../src/components/CreateSharedBill.svelte","../src/App.svelte","../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', `display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ` +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = `data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>`;\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error(`Cannot have duplicate keys in a keyed each`);\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += \" \" + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += \" \" + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.24.1' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error(`Infinite loop detected`);\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import {\n  generator\n} from \"./chunk.FDWZTHUB.mjs\";\n\n// src/session.ts\nconst g = generator(window.sessionStorage);\nconst readable = g.readable;\nconst writable = g.writable;\nconst derived = g.derived;\nconst get = g.get;\n\nexport {\n  readable,\n  writable,\n  derived,\n  get\n};\n","// src/generator.ts\nimport {writable as ogWritable, get as ogGet} from \"svelte/store\";\nimport {run_all, noop, is_function} from \"svelte/internal\";\nfunction isSimpleDeriver(deriver) {\n  return deriver.length < 2;\n}\nfunction generator(storage) {\n  function readable(key, value, start) {\n    return {\n      subscribe: writable(key, value, start).subscribe\n    };\n  }\n  function writable(key, value, start = noop) {\n    function wrap_start(ogSet) {\n      return start(function wrap_set(new_value) {\n        if (storage) {\n          storage.setItem(key, JSON.stringify(new_value));\n        }\n        return ogSet(new_value);\n      });\n    }\n    if (storage) {\n      if (storage.getItem(key)) {\n        value = JSON.parse(storage.getItem(key));\n      }\n      storage.setItem(key, JSON.stringify(value));\n    }\n    const ogStore = ogWritable(value, start ? wrap_start : void 0);\n    function set(new_value) {\n      if (storage) {\n        storage.setItem(key, JSON.stringify(new_value));\n      }\n      ogStore.set(new_value);\n    }\n    function update(fn) {\n      set(fn(ogGet(ogStore)));\n    }\n    function subscribe(run, invalidate = noop) {\n      return ogStore.subscribe(run, invalidate);\n    }\n    return {set, update, subscribe};\n  }\n  function derived(key, stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single ? [stores] : stores;\n    if (storage && storage.getItem(key)) {\n      initial_value = JSON.parse(storage.getItem(key));\n    }\n    return readable(key, initial_value, (set) => {\n      let inited = false;\n      const values = [];\n      let pending = 0;\n      let cleanup = noop;\n      const sync = () => {\n        if (pending) {\n          return;\n        }\n        cleanup();\n        const input = single ? values[0] : values;\n        if (isSimpleDeriver(fn)) {\n          set(fn(input));\n        } else {\n          const result = fn(input, set);\n          cleanup = is_function(result) ? result : noop;\n        }\n      };\n      const unsubscribers = stores_array.map((store2, i) => store2.subscribe((value) => {\n        values[i] = value;\n        pending &= ~(1 << i);\n        if (inited) {\n          sync();\n        }\n      }, () => {\n        pending |= 1 << i;\n      }));\n      inited = true;\n      sync();\n      return function stop() {\n        run_all(unsubscribers);\n        cleanup();\n      };\n    });\n  }\n  return {\n    readable,\n    writable,\n    derived,\n    get: ogGet\n  };\n}\n\nexport {\n  generator\n};\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.jsforce = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar jsforce = require('../core');\r\njsforce.browser = require('./client');\r\nrequire('../api');\r\nmodule.exports = jsforce;\r\n\r\n},{\"../api\":8,\"../core\":20,\"./client\":15}],2:[function(require,module,exports){\r\n'use strict';\r\nmodule.exports = '1.9.1';\r\n\r\n},{}],3:[function(require,module,exports){\r\n// This file content is dynamically created in build script\r\n\"use strict\";\r\nmodule.exports = {\r\n  'inherits': require('inherits'),\r\n  'util': require('util'),\r\n  'events': require('events'),\r\n  'lodash/core': require('lodash/core'),\r\n  'readable-stream': require('readable-stream'),\r\n  'multistream': require('multistream'),\r\n  './VERSION': require('./VERSION'),\r\n  './cache': require('./cache'),\r\n  './connection': require('./connection'),\r\n  './core': require('./core'),\r\n  './csv': require('./csv'),\r\n  './date': require('./date'),\r\n  './http-api': require('./http-api'),\r\n  './logger': require('./logger'),\r\n  './oauth2': require('./oauth2'),\r\n  './process': require('./process'),\r\n  './promise': require('./promise'),\r\n  './query': require('./query'),\r\n  './quick-action': require('./quick-action'),\r\n  './record-stream': require('./record-stream'),\r\n  './record': require('./record'),\r\n  './soap': require('./soap'),\r\n  './sobject': require('./sobject'),\r\n  './soql-builder': require('./soql-builder'),\r\n  './transport': require('./transport')\r\n};\r\n},{\"./VERSION\":2,\"./cache\":18,\"./connection\":19,\"./core\":20,\"./csv\":21,\"./date\":22,\"./http-api\":23,\"./logger\":24,\"./oauth2\":25,\"./process\":26,\"./promise\":27,\"./query\":28,\"./quick-action\":29,\"./record\":31,\"./record-stream\":30,\"./soap\":33,\"./sobject\":34,\"./soql-builder\":35,\"./transport\":36,\"events\":47,\"inherits\":84,\"lodash/core\":88,\"multistream\":89,\"readable-stream\":107,\"util\":117}],4:[function(require,module,exports){\r\n/**\r\n * @file Manages Salesforce Analytics API\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar _ = require('lodash/core'),\r\n    jsforce = require('../core'),\r\n    Promise  = require('../promise');\r\n\r\n/**\r\n * Report instance to retrieving asynchronously executed result\r\n *\r\n * @protected\r\n * @class Analytics~ReportInstance\r\n * @param {Analytics~Report} report - Report\r\n * @param {String} id - Report instance id\r\n */\r\nvar ReportInstance = function(report, id) {\r\n  this._report = report;\r\n  this._conn = report._conn;\r\n  this.id = id;\r\n};\r\n\r\n/**\r\n * Retrieve report result asynchronously executed\r\n *\r\n * @method Analytics~ReportInstance#retrieve\r\n * @param {Callback.<Analytics~ReportResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~ReportResult>}\r\n */\r\nReportInstance.prototype.retrieve = function(callback) {\r\n  var conn = this._conn,\r\n      report = this._report;\r\n  var url = [ conn._baseUrl(), \"analytics\", \"reports\", report.id, \"instances\", this.id ].join('/');\r\n  return conn.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Report object in Analytics API\r\n *\r\n * @protected\r\n * @class Analytics~Report\r\n * @param {Connection} conn Connection\r\n */\r\nvar Report = function(conn, id) {\r\n  this._conn = conn;\r\n  this.id = id;\r\n};\r\n\r\n/**\r\n * Describe report metadata\r\n *\r\n * @method Analytics~Report#describe\r\n * @param {Callback.<Analytics~ReportMetadata>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~ReportMetadata>}\r\n */\r\nReport.prototype.describe = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"reports\", this.id, \"describe\" ].join('/');\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Synonym of Analytics~Report#destroy()\r\n *\r\n * @method Analytics~Report#delete\r\n * @param {Callback.<Analytics~ReportResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~ReportResult>}\r\n */\r\n/**\r\n * Synonym of Analytics~Report#destroy()\r\n *\r\n * @method Analytics~Report#del\r\n * @param {Callback.<Analytics~ReportResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~ReportResult>}\r\n */\r\n/**\r\n * Destroy a report\r\n *\r\n * @method Analytics~Report#destroy\r\n * @param {Callback.<Analytics~ReportResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~ReportResult>}\r\n */\r\nReport.prototype[\"delete\"] =\r\nReport.prototype.del =\r\nReport.prototype.destroy = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"reports\", this.id ].join('/');\r\n  return this._conn.request({method: 'DELETE', url: url}).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Clones a given report\r\n *\r\n * @method Analytics~Report#clone\r\n * @param {String} name - The name of the new report\r\n * @param {Callback.<Analytics~ReportResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~ReportResult>}\r\n */\r\nReport.prototype.clone = function(name, callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"reports\" ].join('/');\r\n  url += \"?cloneId=\" + this.id;\r\n  var data = { reportMetadata: { name: name } };\r\n  var params = { method : 'POST', url: url, headers: { \"Content-Type\" : \"application/json\" }, body: JSON.stringify(data)};\r\n\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Explain plan for executing report\r\n *\r\n * @method Analytics~Report#explain\r\n * @param {Callback.<ExplainInfo>} [callback] - Callback function\r\n * @returns {Promise.<ExplainInfo>}\r\n */\r\nReport.prototype.explain = function(callback) {\r\n  var url = \"/query/?explain=\" + this.id;\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * Run report synchronously\r\n *\r\n * @method Analytics~Report#execute\r\n * @param {Object} [options] - Options\r\n * @param {Boolean} options.details - Flag if include detail in result\r\n * @param {Analytics~ReportMetadata} options.metadata - Overriding report metadata\r\n * @param {Callback.<Analytics~ReportResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~ReportResult>}\r\n */\r\nReport.prototype.run =\r\nReport.prototype.exec =\r\nReport.prototype.execute = function(options, callback) {\r\n  options = options || {};\r\n  if (_.isFunction(options)) {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"reports\", this.id ].join('/');\r\n  url += \"?includeDetails=\" + (options.details ? \"true\" : \"false\");\r\n  var params = { method : options.metadata ? 'POST' : 'GET', url : url };\r\n  if (options.metadata) {\r\n    params.headers = { \"Content-Type\" : \"application/json\" };\r\n    params.body = JSON.stringify(options.metadata);\r\n  }\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * Run report asynchronously\r\n *\r\n * @method Analytics~Report#executeAsync\r\n * @param {Object} [options] - Options\r\n * @param {Boolean} options.details - Flag if include detail in result\r\n * @param {Analytics~ReportMetadata} options.metadata - Overriding report metadata\r\n * @param {Callback.<Analytics~ReportInstanceAttrs>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~ReportInstanceAttrs>}\r\n */\r\nReport.prototype.executeAsync = function(options, callback) {\r\n  options = options || {};\r\n  if (_.isFunction(options)) {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"reports\", this.id, \"instances\" ].join('/');\r\n  if (options.details) {\r\n    url += \"?includeDetails=true\";\r\n  }\r\n  var params = { method : 'POST', url : url, body: \"\" };\r\n  if (options.metadata) {\r\n    params.headers = { \"Content-Type\" : \"application/json\" };\r\n    params.body = JSON.stringify(options.metadata);\r\n  }\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Get report instance for specified instance ID\r\n *\r\n * @method Analytics~Report#instance\r\n * @param {String} id - Report instance ID\r\n * @returns {Analytics~ReportInstance}\r\n */\r\nReport.prototype.instance = function(id) {\r\n  return new ReportInstance(this, id);\r\n};\r\n\r\n/**\r\n * List report instances which had been executed asynchronously\r\n *\r\n * @method Analytics~Report#instances\r\n * @param {Callback.<Array.<Analytics~ReportInstanceAttrs>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<Analytics~ReportInstanceAttrs>>}\r\n */\r\nReport.prototype.instances = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"reports\", this.id, \"instances\" ].join('/');\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Dashboard object in the Analytics API\r\n *\r\n * @protected\r\n * @class Analytics-Dashboard\r\n * @param {Connection} conn Connection\r\n * @param {String} id - The Id\r\n */\r\n\r\nvar Dashboard = function(conn, id) {\r\n  this._conn = conn;\r\n  this.id = id;\r\n};\r\n\r\n/**\r\n * Describe dashboard metadata\r\n *\r\n * @method Analytics~Dashboard#describe\r\n * @param {Callback.<Analytics-DashboardMetadata>} [callback] - Callback function\r\n * @returns {Promise.<Analytics-DashboardMetadata>}\r\n */\r\nDashboard.prototype.describe = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"dashboards\", this.id, \"describe\" ].join('/');\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Get details about dashboard components\r\n *\r\n * @method Analytics~Dashboard#components\r\n * @param {Callback.<Analytics-DashboardComponentMetadata>} [callback] - Callback function\r\n * @returns {Promise.<Analytics-DashboardComponentMetadata>}\r\n */\r\nDashboard.prototype.components = function(componentIds, callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"dashboards\", this.id].join('/');\r\n  var data = {};\r\n  if (_.isFunction(componentIds)) {\r\n    callback = componentIds;\r\n  } else if (_.isArray(componentIds)) {\r\n    data.componentIds = componentIds;\r\n  } else if (_.isString(componentIds)) {\r\n    data.componentIds = [ componentIds ];\r\n  }\r\n  var params = { method : 'POST', url : url, headers : { \"Content-Type\" : \"application/json\" }, body : JSON.stringify(data)};\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Get dashboard status\r\n *\r\n * @method Analytics~Dashboard#status\r\n * @param {Callback.<Analytics-DashboardStatusMetadata>} [callback] - Callback function\r\n * @returns {Promise.<Analytics-DashboardStatusMetadata>}\r\n */\r\nDashboard.prototype.status = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"dashboards\", this.id, \"status\" ].join('/');\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Refresh a dashboard\r\n *\r\n * @method Analytics~Dashboard#refresh\r\n * @param {Callback.<Analytics-DashboardStatusUrl>} [callback] - Callback function\r\n * @returns {Promise.<Analytics-DashboardStatusUrl>}\r\n */\r\nDashboard.prototype.refresh = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"dashboards\", this.id ].join('/');\r\n  var params = { method : 'PUT', url : url, body: '' };\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Clone a dashboard\r\n *\r\n * @method Analytics~Dashboard#clone\r\n * @param {Callback.<Analytics-DashboardMetadata>} [callback] - Callback function\r\n * @returns {Promise.<Analytics-DashboardMetadata>}\r\n */\r\nDashboard.prototype.clone = function(name, folderid, callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"dashboards\" ].join('/');\r\n  url += \"?cloneId=\" + this.id;\r\n  var data = {};\r\n\r\n  if (_.isObject(name)) {\r\n    data = name;\r\n    callback = folderid;\r\n  } else {\r\n    data.name = name;\r\n    data.folderId = folderid;\r\n  }\r\n  var params = { method : 'POST', url : url, headers : { \"Content-Type\" : \"application/json\" }, body : JSON.stringify(data)};\r\n\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Synonym of Analytics~Dashboard#destroy()\r\n *\r\n * @method Analytics~Dashboard#delete\r\n * @param {Callback.<Analytics~DashboardResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~DashboardResult>}\r\n */\r\n/**\r\n * Synonym of Analytics~Dashboard#destroy()\r\n *\r\n * @method Analytics~Dashboard#del\r\n * @param {Callback.<Analytics~DashboardResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~DashboardResult>}\r\n */\r\n/**\r\n * Destroy a dashboard\r\n *\r\n * @method Analytics~Dashboard#destroy\r\n * @param {Callback.<Analytics~DashboardResult>} [callback] - Callback function\r\n * @returns {Promise.<Analytics~DashboardResult>}\r\n */\r\nDashboard.prototype[\"delete\"] =\r\nDashboard.prototype.del =\r\nDashboard.prototype.destroy = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"dashboards\", this.id ].join('/');\r\n  return this._conn.request({method: 'DELETE', url: url}).thenCall(callback);\r\n};\r\n\r\n/**\r\n * API class for Analytics API\r\n *\r\n * @class\r\n * @param {Connection} conn Connection\r\n */\r\nvar Analytics = function(conn) {\r\n  this._conn = conn;\r\n};\r\n\r\n/**\r\n * Get report object of Analytics API\r\n *\r\n * @param {String} id - Report Id\r\n * @returns {Analytics~Report}\r\n */\r\nAnalytics.prototype.report = function(id) {\r\n  return new Report(this._conn, id);\r\n};\r\n\r\n/**\r\n * Get recent report list\r\n *\r\n * @param {Callback.<Array.<Analytics~ReportInfo>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<Analytics~ReportInfo>>}\r\n */\r\nAnalytics.prototype.reports = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"reports\" ].join('/');\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Get dashboard object of Analytics API\r\n *\r\n * @param {String} id - Dashboard Id\r\n * @returns {Analytics~Dashboard}\r\n */\r\nAnalytics.prototype.dashboard = function(id) {\r\n  return new Dashboard(this._conn, id);\r\n};\r\n\r\n/**\r\n * Get recent dashboard list\r\n *\r\n * @param {Callback.<Array.<Analytics~DashboardInfo>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<Analytics~DashboardInfo>>}\r\n */\r\nAnalytics.prototype.dashboards = function(callback) {\r\n  var url = [ this._conn._baseUrl(), \"analytics\", \"dashboards\" ].join('/');\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n/*--------------------------------------------*/\r\n/*\r\n * Register hook in connection instantiation for dynamically adding this API module features\r\n */\r\njsforce.on('connection:new', function(conn) {\r\n  conn.analytics = new Analytics(conn);\r\n});\r\n\r\n\r\nmodule.exports = Analytics;\r\n\r\n},{\"../core\":20,\"../promise\":27,\"lodash/core\":88}],5:[function(require,module,exports){\r\n/**\r\n * @file Manages Salesforce Apex REST endpoint calls\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar jsforce = require('../core');\r\n\r\n/**\r\n * API class for Apex REST endpoint call\r\n *\r\n * @class\r\n * @param {Connection} conn Connection\r\n */\r\nvar Apex = function(conn) {\r\n  this._conn = conn;\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nApex.prototype._baseUrl = function() {\r\n  return this._conn.instanceUrl + \"/services/apexrest\";\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nApex.prototype._createRequestParams = function(method, path, body, options) {\r\n  var params = {\r\n    method: method,\r\n    url: this._baseUrl() + path\r\n  },\r\n  _headers = {};\r\n  if(options && 'object' === typeof options['headers']){\r\n    _headers = options['headers'];\r\n  }\r\n  if (!/^(GET|DELETE)$/i.test(method)) {\r\n    _headers[\"Content-Type\"] = \"application/json\";\r\n  }\r\n  params.headers = _headers;\r\n  if (body) {\r\n    params.body = JSON.stringify(body);\r\n  }\r\n  return params;\r\n};\r\n\r\n/**\r\n * Call Apex REST service in GET request\r\n *\r\n * @param {String} path - URL path to Apex REST service\r\n * @param {Object} options - Holds headers and other meta data for the request.\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nApex.prototype.get = function(path, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = undefined;\r\n  }\r\n  return this._conn.request(this._createRequestParams('GET', path, undefined, options)).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Call Apex REST service in POST request\r\n *\r\n * @param {String} path - URL path to Apex REST service\r\n * @param {Object} [body] - Request body\r\n * @param {Object} options - Holds headers and other meta data for the request.\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nApex.prototype.post = function(path, body, options, callback) {\r\n  if (typeof body === 'function') {\r\n    callback = body;\r\n    body = undefined;\r\n    options = undefined;\r\n  }\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = undefined;\r\n  }\r\n  var params = this._createRequestParams('POST', path, body, options);\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Call Apex REST service in PUT request\r\n *\r\n * @param {String} path - URL path to Apex REST service\r\n * @param {Object} [body] - Request body\r\n * @param {Object} [options] - Holds headers and other meta data for the request.\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nApex.prototype.put = function(path, body, options, callback) {\r\n  if (typeof body === 'function') {\r\n    callback = body;\r\n    body = undefined;\r\n    options = undefined;\r\n  }\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = undefined;\r\n  }\r\n  var params = this._createRequestParams('PUT', path, body, options);\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Call Apex REST service in PATCH request\r\n *\r\n * @param {String} path - URL path to Apex REST service\r\n * @param {Object} [body] - Request body\r\n * @param {Object} [options] - Holds headers and other meta data for the request.\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nApex.prototype.patch = function(path, body, options, callback) {\r\n  if (typeof body === 'function') {\r\n    callback = body;\r\n    body = undefined;\r\n    options = undefined;\r\n  }\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = undefined;\r\n  }\r\n  var params = this._createRequestParams('PATCH', path, body, options);\r\n  return this._conn.request(params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Synonym of Apex#delete()\r\n *\r\n * @method Apex#del\r\n *\r\n * @param {String} path - URL path to Apex REST service\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\n/**\r\n * Call Apex REST service in DELETE request\r\n *\r\n * @method Apex#delete\r\n *\r\n * @param {String} path - URL path to Apex REST service\r\n * @param {Object} [options] - Holds headers and other meta data for the request.\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nApex.prototype.del =\r\n  Apex.prototype[\"delete\"] = function(path, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = undefined;\r\n  }\r\n  return this._conn.request(this._createRequestParams('DELETE', path, undefined, options)).thenCall(callback);\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n/*\r\n * Register hook in connection instantiation for dynamically adding this API module features\r\n */\r\njsforce.on('connection:new', function(conn) {\r\n  conn.apex = new Apex(conn);\r\n});\r\n\r\n\r\nmodule.exports = Apex;\r\n\r\n},{\"../core\":20}],6:[function(require,module,exports){\r\n(function (process){\r\n/*global process*/\r\n/**\r\n * @file Manages Salesforce Bulk API related operations\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar inherits     = require('inherits'),\r\n    stream       = require('readable-stream'),\r\n    Duplex       = stream.Duplex,\r\n    events       = require('events'),\r\n    _            = require('lodash/core'),\r\n    joinStreams  = require('multistream'),\r\n    jsforce      = require('../core'),\r\n    RecordStream = require('../record-stream'),\r\n    Promise      = require('../promise'),\r\n    HttpApi      = require('../http-api');\r\n\r\n/*--------------------------------------------*/\r\n\r\n/**\r\n * Class for Bulk API Job\r\n *\r\n * @protected\r\n * @class Bulk~Job\r\n * @extends events.EventEmitter\r\n *\r\n * @param {Bulk} bulk - Bulk API object\r\n * @param {String} [type] - SObject type\r\n * @param {String} [operation] - Bulk load operation ('insert', 'update', 'upsert', 'delete', or 'hardDelete')\r\n * @param {Object} [options] - Options for bulk loading operation\r\n * @param {String} [options.extIdField] - External ID field name (used when upsert operation).\r\n * @param {String} [options.concurrencyMode] - 'Serial' or 'Parallel'. Defaults to Parallel.\r\n * @param {String} [jobId] - Job ID (if already available)\r\n */\r\nvar Job = function(bulk, type, operation, options, jobId) {\r\n  this._bulk = bulk;\r\n  this.type = type;\r\n  this.operation = operation;\r\n  this.options = options || {};\r\n  this.id = jobId;\r\n  this.state = this.id ? 'Open' : 'Unknown';\r\n  this._batches = {};\r\n};\r\n\r\ninherits(Job, events.EventEmitter);\r\n\r\n/**\r\n * @typedef {Object} Bulk~JobInfo\r\n * @prop {String} id - Job ID\r\n * @prop {String} object - Object type name\r\n * @prop {String} operation - Operation type of the job\r\n * @prop {String} state - Job status\r\n */\r\n\r\n/**\r\n * Return latest jobInfo from cache\r\n *\r\n * @method Bulk~Job#info\r\n * @param {Callback.<Bulk~JobInfo>} [callback] - Callback function\r\n * @returns {Promise.<Bulk~JobInfo>}\r\n */\r\nJob.prototype.info = function(callback) {\r\n  var self = this;\r\n  // if cache is not available, check the latest\r\n  if (!this._jobInfo) {\r\n    this._jobInfo = this.check();\r\n  }\r\n  return this._jobInfo.thenCall(callback);\r\n};\r\n\r\n/**\r\n * Open new job and get jobinfo\r\n *\r\n * @method Bulk~Job#open\r\n * @param {Callback.<Bulk~JobInfo>} [callback] - Callback function\r\n * @returns {Promise.<Bulk~JobInfo>}\r\n */\r\nJob.prototype.open = function(callback) {\r\n  var self = this;\r\n  var bulk = this._bulk;\r\n  var logger = bulk._logger;\r\n\r\n  // if not requested opening job\r\n  if (!this._jobInfo) {\r\n    var operation = this.operation.toLowerCase();\r\n    if (operation === 'harddelete') { operation = 'hardDelete'; }\r\n    var body = [\r\n      '<?xml version=\"1.0\" encoding=\"UTF-8\"?>',\r\n      '<jobInfo  xmlns=\"http://www.force.com/2009/06/asyncapi/dataload\">',\r\n        '<operation>' + operation + '</operation>',\r\n        '<object>' + this.type + '</object>',\r\n        (this.options.extIdField ?\r\n         '<externalIdFieldName>'+this.options.extIdField+'</externalIdFieldName>' :\r\n         ''),\r\n        (this.options.concurrencyMode ?\r\n         '<concurrencyMode>'+this.options.concurrencyMode+'</concurrencyMode>' :\r\n         ''),\r\n        (this.options.assignmentRuleId ?\r\n          '<assignmentRuleId>' + this.options.assignmentRuleId + '</assignmentRuleId>' :\r\n          ''),\r\n        '<contentType>CSV</contentType>',\r\n      '</jobInfo>'\r\n    ].join('');\r\n\r\n    this._jobInfo = bulk._request({\r\n      method : 'POST',\r\n      path : \"/job\",\r\n      body : body,\r\n      headers : {\r\n        \"Content-Type\" : \"application/xml; charset=utf-8\"\r\n      },\r\n      responseType: \"application/xml\"\r\n    }).then(function(res) {\r\n      self.emit(\"open\", res.jobInfo);\r\n      self.id = res.jobInfo.id;\r\n      self.state = res.jobInfo.state;\r\n      return res.jobInfo;\r\n    }, function(err) {\r\n      self.emit(\"error\", err);\r\n      throw err;\r\n    });\r\n  }\r\n  return this._jobInfo.thenCall(callback);\r\n};\r\n\r\n/**\r\n * Create a new batch instance in the job\r\n *\r\n * @method Bulk~Job#createBatch\r\n * @returns {Bulk~Batch}\r\n */\r\nJob.prototype.createBatch = function() {\r\n  var batch = new Batch(this);\r\n  var self = this;\r\n  batch.on('queue', function() {\r\n    self._batches[batch.id] = batch;\r\n  });\r\n  return batch;\r\n};\r\n\r\n/**\r\n * Get a batch instance specified by given batch ID\r\n *\r\n * @method Bulk~Job#batch\r\n * @param {String} batchId - Batch ID\r\n * @returns {Bulk~Batch}\r\n */\r\nJob.prototype.batch = function(batchId) {\r\n  var batch = this._batches[batchId];\r\n  if (!batch) {\r\n    batch = new Batch(this, batchId);\r\n    this._batches[batchId] = batch;\r\n  }\r\n  return batch;\r\n};\r\n\r\n/**\r\n * Check the latest job status from server\r\n *\r\n * @method Bulk~Job#check\r\n * @param {Callback.<Bulk~JobInfo>} [callback] - Callback function\r\n * @returns {Promise.<Bulk~JobInfo>}\r\n */\r\nJob.prototype.check = function(callback) {\r\n  var self = this;\r\n  var bulk = this._bulk;\r\n  var logger = bulk._logger;\r\n\r\n  this._jobInfo = this._waitAssign().then(function() {\r\n    return bulk._request({\r\n      method : 'GET',\r\n      path : \"/job/\" + self.id,\r\n      responseType: \"application/xml\"\r\n    });\r\n  }).then(function(res) {\r\n    logger.debug(res.jobInfo);\r\n    self.id = res.jobInfo.id;\r\n    self.type = res.jobInfo.object;\r\n    self.operation = res.jobInfo.operation;\r\n    self.state = res.jobInfo.state;\r\n    return res.jobInfo;\r\n  });\r\n  return this._jobInfo.thenCall(callback);\r\n};\r\n\r\n/**\r\n * Wait till the job is assigned to server\r\n *\r\n * @method Bulk~Job#info\r\n * @param {Callback.<Bulk~JobInfo>} [callback] - Callback function\r\n * @returns {Promise.<Bulk~JobInfo>}\r\n */\r\nJob.prototype._waitAssign = function(callback) {\r\n  return (this.id ? Promise.resolve({ id: this.id }) : this.open()).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * List all registered batch info in job\r\n *\r\n * @method Bulk~Job#list\r\n * @param {Callback.<Array.<Bulk~BatchInfo>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<Bulk~BatchInfo>>}\r\n */\r\nJob.prototype.list = function(callback) {\r\n  var self = this;\r\n  var bulk = this._bulk;\r\n  var logger = bulk._logger;\r\n\r\n  return this._waitAssign().then(function() {\r\n    return bulk._request({\r\n      method : 'GET',\r\n      path : \"/job/\" + self.id + \"/batch\",\r\n      responseType: \"application/xml\"\r\n    });\r\n  }).then(function(res) {\r\n    logger.debug(res.batchInfoList.batchInfo);\r\n    var batchInfoList = res.batchInfoList;\r\n    batchInfoList = _.isArray(batchInfoList.batchInfo) ? batchInfoList.batchInfo : [ batchInfoList.batchInfo ];\r\n    return batchInfoList;\r\n  }).thenCall(callback);\r\n\r\n};\r\n\r\n/**\r\n * Close opened job\r\n *\r\n * @method Bulk~Job#close\r\n * @param {Callback.<Bulk~JobInfo>} [callback] - Callback function\r\n * @returns {Promise.<Bulk~JobInfo>}\r\n */\r\nJob.prototype.close = function() {\r\n  var self = this;\r\n  return this._changeState(\"Closed\").then(function(jobInfo) {\r\n    self.id = null;\r\n    self.emit(\"close\", jobInfo);\r\n    return jobInfo;\r\n  }, function(err) {\r\n    self.emit(\"error\", err);\r\n    throw err;\r\n  });\r\n};\r\n\r\n/**\r\n * Set the status to abort\r\n *\r\n * @method Bulk~Job#abort\r\n * @param {Callback.<Bulk~JobInfo>} [callback] - Callback function\r\n * @returns {Promise.<Bulk~JobInfo>}\r\n */\r\nJob.prototype.abort = function() {\r\n  var self = this;\r\n  return this._changeState(\"Aborted\").then(function(jobInfo) {\r\n    self.id = null;\r\n    self.emit(\"abort\", jobInfo);\r\n    return jobInfo;\r\n  }, function(err) {\r\n    self.emit(\"error\", err);\r\n    throw err;\r\n  });\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nJob.prototype._changeState = function(state, callback) {\r\n  var self = this;\r\n  var bulk = this._bulk;\r\n  var logger = bulk._logger;\r\n\r\n  this._jobInfo = this._waitAssign().then(function() {\r\n    var body = [\r\n      '<?xml version=\"1.0\" encoding=\"UTF-8\"?>',\r\n      '<jobInfo xmlns=\"http://www.force.com/2009/06/asyncapi/dataload\">',\r\n        '<state>' + state + '</state>',\r\n      '</jobInfo>'\r\n    ].join('');\r\n    return bulk._request({\r\n      method : 'POST',\r\n      path : \"/job/\" + self.id,\r\n      body : body,\r\n      headers : {\r\n        \"Content-Type\" : \"application/xml; charset=utf-8\"\r\n      },\r\n      responseType: \"application/xml\"\r\n    });\r\n  }).then(function(res) {\r\n    logger.debug(res.jobInfo);\r\n    self.state = res.jobInfo.state;\r\n    return res.jobInfo;\r\n  });\r\n  return this._jobInfo.thenCall(callback);\r\n\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n\r\n/**\r\n * Batch (extends RecordStream)\r\n *\r\n * @protected\r\n * @class Bulk~Batch\r\n * @extends {stream.Writable}\r\n * @implements {Promise.<Array.<RecordResult>>}\r\n * @param {Bulk~Job} job - Bulk job object\r\n * @param {String} [batchId] - Batch ID (if already available)\r\n */\r\nvar Batch = function(job, batchId) {\r\n  Batch.super_.call(this, { objectMode: true });\r\n  this.job = job;\r\n  this.id = batchId;\r\n  this._bulk = job._bulk;\r\n  this._deferred = Promise.defer();\r\n  this._setupDataStreams();\r\n};\r\n\r\ninherits(Batch, stream.Writable);\r\n\r\n\r\n/**\r\n * @private\r\n */\r\nBatch.prototype._setupDataStreams = function() {\r\n  var batch = this;\r\n  var converterOptions = { nullValue : '#N/A' };\r\n  this._uploadStream = new RecordStream.Serializable();\r\n  this._uploadDataStream = this._uploadStream.stream('csv', converterOptions);\r\n  this._downloadStream = new RecordStream.Parsable();\r\n  this._downloadDataStream = this._downloadStream.stream('csv', converterOptions);\r\n\r\n  this.on('finish', function() {\r\n    batch._uploadStream.end();\r\n  });\r\n  this._uploadDataStream.once('readable', function() {\r\n    batch.job.open().then(function() {\r\n      // pipe upload data to batch API request stream\r\n      batch._uploadDataStream.pipe(batch._createRequestStream());\r\n    });\r\n  });\r\n\r\n  // duplex data stream, opened access to API programmers by Batch#stream()\r\n  var dataStream = this._dataStream = new Duplex();\r\n  dataStream._write = function(data, enc, cb) {\r\n    batch._uploadDataStream.write(data, enc, cb);\r\n  };\r\n  dataStream.on('finish', function() {\r\n    batch._uploadDataStream.end();\r\n  });\r\n\r\n  this._downloadDataStream.on('readable', function() {\r\n    dataStream.read(0);\r\n  });\r\n  this._downloadDataStream.on('end', function() {\r\n    dataStream.push(null);\r\n  });\r\n  dataStream._read = function(size) {\r\n    var chunk;\r\n    while ((chunk = batch._downloadDataStream.read()) !== null) {\r\n      dataStream.push(chunk);\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Connect batch API and create stream instance of request/response\r\n *\r\n * @private\r\n * @returns {stream.Duplex}\r\n */\r\nBatch.prototype._createRequestStream = function() {\r\n  var batch = this;\r\n  var bulk = batch._bulk;\r\n  var logger = bulk._logger;\r\n\r\n  return bulk._request({\r\n    method : 'POST',\r\n    path : \"/job/\" + batch.job.id + \"/batch\",\r\n    headers: {\r\n      \"Content-Type\": \"text/csv\"\r\n    },\r\n    responseType: \"application/xml\"\r\n  }, function(err, res) {\r\n    if (err) {\r\n      batch.emit('error', err);\r\n    } else {\r\n      logger.debug(res.batchInfo);\r\n      batch.id = res.batchInfo.id;\r\n      batch.emit('queue', res.batchInfo);\r\n    }\r\n  }).stream();\r\n};\r\n\r\n/**\r\n * Implementation of Writable\r\n *\r\n * @override\r\n * @private\r\n */\r\nBatch.prototype._write = function(record, enc, cb) {\r\n  record = _.clone(record);\r\n  if (this.job.operation === \"insert\") {\r\n    delete record.Id;\r\n  } else if (this.job.operation === \"delete\") {\r\n    record = { Id: record.Id };\r\n  }\r\n  delete record.type;\r\n  delete record.attributes;\r\n  this._uploadStream.write(record, enc, cb);\r\n};\r\n\r\n/**\r\n * Returns duplex stream which accepts CSV data input and batch result output\r\n *\r\n * @returns {stream.Duplex}\r\n */\r\nBatch.prototype.stream = function() {\r\n  return this._dataStream;\r\n};\r\n\r\n/**\r\n * Execute batch operation\r\n *\r\n * @method Bulk~Batch#execute\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for batch operation. Accepts array of records, CSV string, and CSV data input stream in insert/update/upsert/delete/hardDelete operation, SOQL string in query operation.\r\n * @param {Callback.<Array.<RecordResult>|Array.<BatchResultInfo>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\nBatch.prototype.run =\r\nBatch.prototype.exec =\r\nBatch.prototype.execute = function(input, callback) {\r\n  var self = this;\r\n\r\n  if (typeof input === 'function') { // if input argument is omitted\r\n    callback = input;\r\n    input = null;\r\n  }\r\n\r\n  // if batch is already executed\r\n  if (this._result) {\r\n    throw new Error(\"Batch already executed.\");\r\n  }\r\n\r\n  var rdeferred = Promise.defer();\r\n  this._result = rdeferred.promise;\r\n  this._result.then(function(res) {\r\n    self._deferred.resolve(res);\r\n  }, function(err) {\r\n    self._deferred.reject(err);\r\n  });\r\n  this.once('response', function(res) {\r\n    rdeferred.resolve(res);\r\n  });\r\n  this.once('error', function(err) {\r\n    rdeferred.reject(err);\r\n  });\r\n\r\n  if (_.isObject(input) && _.isFunction(input.pipe)) { // if input has stream.Readable interface\r\n    input.pipe(this._dataStream);\r\n  } else {\r\n    var data;\r\n    if (_.isArray(input)) {\r\n      _.forEach(input, function(record) {\r\n        Object.keys(record).forEach(function(key) {\r\n          if (typeof record[key] === 'boolean') {\r\n            record[key] = String(record[key])\r\n          }\r\n        })\r\n        self.write(record);\r\n      });\r\n      self.end();\r\n    } else if (_.isString(input)){\r\n      data = input;\r\n      this._dataStream.write(data, 'utf8');\r\n      this._dataStream.end();\r\n    }\r\n  }\r\n\r\n  // return Batch instance for chaining\r\n  return this.thenCall(callback);\r\n};\r\n\r\n/**\r\n * Promise/A+ interface\r\n * http://promises-aplus.github.io/promises-spec/\r\n *\r\n * Delegate to deferred promise, return promise instance for batch result\r\n *\r\n * @method Bulk~Batch#then\r\n */\r\nBatch.prototype.then = function(onResolved, onReject, onProgress) {\r\n  return this._deferred.promise.then(onResolved, onReject, onProgress);\r\n};\r\n\r\n/**\r\n * Promise/A+ extension\r\n * Call \"then\" using given node-style callback function\r\n *\r\n * @method Bulk~Batch#thenCall\r\n */\r\nBatch.prototype.thenCall = function(callback) {\r\n  if (_.isFunction(callback)) {\r\n    this.then(function(res) {\r\n      process.nextTick(function() {\r\n        callback(null, res);\r\n      });\r\n    }, function(err) {\r\n      process.nextTick(function() {\r\n        callback(err);\r\n      });\r\n    });\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * @typedef {Object} Bulk~BatchInfo\r\n * @prop {String} id - Batch ID\r\n * @prop {String} jobId - Job ID\r\n * @prop {String} state - Batch state\r\n * @prop {String} stateMessage - Batch state message\r\n */\r\n\r\n/**\r\n * Check the latest batch status in server\r\n *\r\n * @method Bulk~Batch#check\r\n * @param {Callback.<Bulk~BatchInfo>} [callback] - Callback function\r\n * @returns {Promise.<Bulk~BatchInfo>}\r\n */\r\nBatch.prototype.check = function(callback) {\r\n  var self = this;\r\n  var bulk = this._bulk;\r\n  var logger = bulk._logger;\r\n  var jobId = this.job.id;\r\n  var batchId = this.id;\r\n\r\n  if (!jobId || !batchId) {\r\n    throw new Error(\"Batch not started.\");\r\n  }\r\n  return bulk._request({\r\n    method : 'GET',\r\n    path : \"/job/\" + jobId + \"/batch/\" + batchId,\r\n    responseType: \"application/xml\"\r\n  }).then(function(res) {\r\n    logger.debug(res.batchInfo);\r\n    return res.batchInfo;\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * Polling the batch result and retrieve\r\n *\r\n * @method Bulk~Batch#poll\r\n * @param {Number} interval - Polling interval in milliseconds\r\n * @param {Number} timeout - Polling timeout in milliseconds\r\n */\r\nBatch.prototype.poll = function(interval, timeout) {\r\n  var self = this;\r\n  var jobId = this.job.id;\r\n  var batchId = this.id;\r\n\r\n  if (!jobId || !batchId) {\r\n    throw new Error(\"Batch not started.\");\r\n  }\r\n  var startTime = new Date().getTime();\r\n  var poll = function() {\r\n    var now = new Date().getTime();\r\n    if (startTime + timeout < now) {\r\n      var err = new Error(\"Polling time out. Job Id = \" + jobId + \" , batch Id = \" + batchId);\r\n      err.name = 'PollingTimeout';\r\n      err.jobId = jobId;\r\n      err.batchId = batchId;\r\n      self.emit('error', err);\r\n      return;\r\n    }\r\n    self.check(function(err, res) {\r\n      if (err) {\r\n        self.emit('error', err);\r\n      } else {\r\n        if (res.state === \"Failed\") {\r\n          if (parseInt(res.numberRecordsProcessed, 10) > 0) {\r\n            self.retrieve();\r\n          } else {\r\n            self.emit('error', new Error(res.stateMessage));\r\n          }\r\n        } else if (res.state === \"Completed\") {\r\n          self.retrieve();\r\n        } else {\r\n          self.emit('progress', res);\r\n          setTimeout(poll, interval);\r\n        }\r\n      }\r\n    });\r\n  };\r\n  setTimeout(poll, interval);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Bulk~BatchResultInfo\r\n * @prop {String} id - Batch result ID\r\n * @prop {String} batchId - Batch ID which includes this batch result.\r\n * @prop {String} jobId - Job ID which includes this batch result.\r\n */\r\n\r\n/**\r\n * Retrieve batch result\r\n *\r\n * @method Bulk~Batch#retrieve\r\n * @param {Callback.<Array.<RecordResult>|Array.<Bulk~BatchResultInfo>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<RecordResult>|Array.<Bulk~BatchResultInfo>>}\r\n */\r\nBatch.prototype.retrieve = function(callback) {\r\n  var self = this;\r\n  var bulk = this._bulk;\r\n  var jobId = this.job.id;\r\n  var job = this.job;\r\n  var batchId = this.id;\r\n\r\n  if (!jobId || !batchId) {\r\n    throw new Error(\"Batch not started.\");\r\n  }\r\n\r\n  return job.info().then(function(jobInfo) {\r\n    return bulk._request({\r\n      method : 'GET',\r\n      path : \"/job/\" + jobId + \"/batch/\" + batchId + \"/result\"\r\n    });\r\n  }).then(function(res) {\r\n    var results;\r\n    if (job.operation === 'query') {\r\n      var conn = bulk._conn;\r\n      var resultIds = res['result-list'].result;\r\n      results = res['result-list'].result;\r\n      results = _.map(_.isArray(results) ? results : [ results ], function(id) {\r\n        return {\r\n          id: id,\r\n          batchId: batchId,\r\n          jobId: jobId\r\n        };\r\n      });\r\n    } else {\r\n      results = _.map(res, function(ret) {\r\n        return {\r\n          id: ret.Id || null,\r\n          success: ret.Success === \"true\",\r\n          errors: ret.Error ? [ ret.Error ] : []\r\n        };\r\n      });\r\n    }\r\n    self.emit('response', results);\r\n    return results;\r\n  }).fail(function(err) {\r\n    self.emit('error', err);\r\n    throw err;\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Fetch query result as a record stream\r\n * @param {String} resultId - Result id\r\n * @returns {RecordStream} - Record stream, convertible to CSV data stream\r\n */\r\nBatch.prototype.result = function(resultId) {\r\n  var jobId = this.job.id;\r\n  var batchId = this.id;\r\n  if (!jobId || !batchId) {\r\n    throw new Error(\"Batch not started.\");\r\n  }\r\n  var resultStream = new RecordStream.Parsable();\r\n  var resultDataStream = resultStream.stream('csv');\r\n  var reqStream = this._bulk._request({\r\n    method : 'GET',\r\n    path : \"/job/\" + jobId + \"/batch/\" + batchId + \"/result/\" + resultId,\r\n    responseType: \"application/octet-stream\"\r\n  }).stream().pipe(resultDataStream);\r\n  return resultStream;\r\n};\r\n\r\n/*--------------------------------------------*/\r\n/**\r\n * @private\r\n */\r\nvar BulkApi = function() {\r\n  BulkApi.super_.apply(this, arguments);\r\n};\r\n\r\ninherits(BulkApi, HttpApi);\r\n\r\nBulkApi.prototype.beforeSend = function(request) {\r\n  request.headers = request.headers || {};\r\n  request.headers[\"X-SFDC-SESSION\"] = this._conn.accessToken;\r\n};\r\n\r\nBulkApi.prototype.isSessionExpired = function(response) {\r\n  return response.statusCode === 400 &&\r\n    /<exceptionCode>InvalidSessionId<\\/exceptionCode>/.test(response.body);\r\n};\r\n\r\nBulkApi.prototype.hasErrorInResponseBody = function(body) {\r\n  return !!body.error;\r\n};\r\n\r\nBulkApi.prototype.parseError = function(body) {\r\n  return {\r\n    errorCode: body.error.exceptionCode,\r\n    message: body.error.exceptionMessage\r\n  };\r\n};\r\n\r\n/*--------------------------------------------*/\r\n\r\n/**\r\n * Class for Bulk API\r\n *\r\n * @class\r\n * @param {Connection} conn - Connection object\r\n */\r\nvar Bulk = function(conn) {\r\n  this._conn = conn;\r\n  this._logger = conn._logger;\r\n};\r\n\r\n/**\r\n * Polling interval in milliseconds\r\n * @type {Number}\r\n */\r\nBulk.prototype.pollInterval = 1000;\r\n\r\n/**\r\n * Polling timeout in milliseconds\r\n * @type {Number}\r\n */\r\nBulk.prototype.pollTimeout = 10000;\r\n\r\n/** @private **/\r\nBulk.prototype._request = function(request, callback) {\r\n  var conn = this._conn;\r\n  request = _.clone(request);\r\n  var baseUrl = [ conn.instanceUrl, \"services/async\", conn.version ].join('/');\r\n  request.url = baseUrl + request.path;\r\n  var options = { responseType: request.responseType };\r\n  delete request.path;\r\n  delete request.responseType;\r\n  return new BulkApi(this._conn, options).request(request).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Create and start bulkload job and batch\r\n *\r\n * @param {String} type - SObject type\r\n * @param {String} operation - Bulk load operation ('insert', 'update', 'upsert', 'delete', or 'hardDelete')\r\n * @param {Object} [options] - Options for bulk loading operation\r\n * @param {String} [options.extIdField] - External ID field name (used when upsert operation).\r\n * @param {String} [options.concurrencyMode] - 'Serial' or 'Parallel'. Defaults to Parallel.\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulkload. Accepts array of records, CSV string, and CSV data input stream in insert/update/upsert/delete/hardDelete operation, SOQL string in query operation.\r\n * @param {Callback.<Array.<RecordResult>|Array.<Bulk~BatchResultInfo>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\nBulk.prototype.load = function(type, operation, options, input, callback) {\r\n  var self = this;\r\n  if (!type || !operation) {\r\n    throw new Error(\"Insufficient arguments. At least, 'type' and 'operation' are required.\");\r\n  }\r\n  if (!_.isObject(options) || options.constructor !== Object) { // when options is not plain hash object, it is omitted\r\n    callback = input;\r\n    input = options;\r\n    options = null;\r\n  }\r\n  var job = this.createJob(type, operation, options);\r\n  job.once('error', function (error) {\r\n    if (batch) {\r\n      batch.emit('error', error); // pass job error to batch\r\n    }\r\n  });\r\n  var batch = job.createBatch();\r\n  var cleanup = function() {\r\n    batch = null;\r\n    job.close();\r\n  };\r\n  var cleanupOnError = function(err) {\r\n    if (err.name !== 'PollingTimeout') {\r\n      cleanup();\r\n    }\r\n  };\r\n  batch.on('response', cleanup);\r\n  batch.on('error', cleanupOnError);\r\n  batch.on('queue', function() { batch.poll(self.pollInterval, self.pollTimeout); });\r\n  return batch.execute(input, callback);\r\n};\r\n\r\n/**\r\n * Execute bulk query and get record stream\r\n *\r\n * @param {String} soql - SOQL to execute in bulk job\r\n * @returns {RecordStream.Parsable} - Record stream, convertible to CSV data stream\r\n */\r\nBulk.prototype.query = function(soql) {\r\n  var m = soql.replace(/\\([\\s\\S]+\\)/g, '').match(/FROM\\s+(\\w+)/i);\r\n  if (!m) {\r\n    throw new Error(\"No sobject type found in query, maybe caused by invalid SOQL.\");\r\n  }\r\n  var type = m[1];\r\n  var self = this;\r\n  var recordStream = new RecordStream.Parsable();\r\n  var dataStream = recordStream.stream('csv');\r\n  this.load(type, \"query\", soql).then(function(results) {\r\n    var streams = results.map(function(result) {\r\n      return self\r\n        .job(result.jobId)\r\n        .batch(result.batchId)\r\n        .result(result.id)\r\n        .stream();\r\n    });\r\n\r\n    joinStreams(streams).pipe(dataStream);\r\n  }).fail(function(err) {\r\n    recordStream.emit('error', err);\r\n  });\r\n  return recordStream;\r\n};\r\n\r\n\r\n/**\r\n * Create a new job instance\r\n *\r\n * @param {String} type - SObject type\r\n * @param {String} operation - Bulk load operation ('insert', 'update', 'upsert', 'delete', 'hardDelete', or 'query')\r\n * @param {Object} [options] - Options for bulk loading operation\r\n * @returns {Bulk~Job}\r\n */\r\nBulk.prototype.createJob = function(type, operation, options) {\r\n  return new Job(this, type, operation, options);\r\n};\r\n\r\n/**\r\n * Get a job instance specified by given job ID\r\n *\r\n * @param {String} jobId - Job ID\r\n * @returns {Bulk~Job}\r\n */\r\nBulk.prototype.job = function(jobId) {\r\n  return new Job(this, null, null, null, jobId);\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n/*\r\n * Register hook in connection instantiation for dynamically adding this API module features\r\n */\r\njsforce.on('connection:new', function(conn) {\r\n  conn.bulk = new Bulk(conn);\r\n});\r\n\r\n\r\nmodule.exports = Bulk;\r\n\r\n}).call(this,require('_process'))\r\n\r\n},{\"../core\":20,\"../http-api\":23,\"../promise\":27,\"../record-stream\":30,\"_process\":91,\"events\":47,\"inherits\":84,\"lodash/core\":88,\"multistream\":89,\"readable-stream\":107}],7:[function(require,module,exports){\r\n/**\r\n * @file Manages Salesforce Chatter REST API calls\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar inherits = require('inherits'),\r\n    _       = require('lodash/core'),\r\n    jsforce = require('../core'),\r\n    Promise = require('../promise');\r\n\r\n/**\r\n * API class for Chatter REST API call\r\n *\r\n * @class\r\n * @param {Connection} conn Connection\r\n */\r\nvar Chatter = module.exports = function(conn) {\r\n  this._conn = conn;\r\n};\r\n\r\n/**\r\n * Sending request to API endpoint\r\n * @private\r\n */\r\nChatter.prototype._request = function(params, callback) {\r\n  if (/^(put|post|patch)$/i.test(params.method)) {\r\n    if (_.isObject(params.body)) {\r\n      params.headers = {\r\n        \"Content-Type\": \"application/json\"\r\n      };\r\n      params.body = JSON.stringify(params.body);\r\n    }\r\n  }\r\n  params.url = this._normalizeUrl(params.url);\r\n  return this._conn.request(params, callback);\r\n};\r\n\r\n/**\r\n * Convert path to site root relative url\r\n * @private\r\n */\r\nChatter.prototype._normalizeUrl = function(url) {\r\n  if (url.indexOf('/chatter/') === 0 || url.indexOf('/connect/') === 0) {\r\n    return '/services/data/v' + this._conn.version + url;\r\n  } else if (/^\\/v[\\d]+\\.[\\d]+\\//.test(url)) {\r\n    return '/services/data' + url;\r\n  } else if (url.indexOf('/services/') !== 0 && url[0] === '/') {\r\n    return '/services/data/v' + this._conn.version + '/chatter' + url;\r\n  } else {\r\n    return url;\r\n  }\r\n};\r\n\r\n/**\r\n * @typedef {Object} Chatter~RequestParams\r\n * @prop {String} method - HTTP method\r\n * @prop {String} url - Resource URL\r\n * @prop {String} [body] - HTTP body (in POST/PUT/PATCH methods)\r\n */\r\n\r\n/**\r\n * @typedef {Object} Chatter~RequestResult\r\n */\r\n\r\n/**\r\n * Make a request for chatter API resource\r\n *\r\n * @param {Chatter~RequestParams} params - Paramters representing HTTP request\r\n * @param {Callback.<Chatter~RequestResult>} [callback] - Callback func\r\n * @returns {Chatter~Request}\r\n */\r\nChatter.prototype.request = function(params, callback) {\r\n  return new Request(this, params).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Make a resource request to chatter API\r\n *\r\n * @param {String} url - Resource URL\r\n * @param {Object} [queryParams] - Query parameters (in hash object)\r\n * @returns {Chatter~Resource}\r\n */\r\nChatter.prototype.resource = function(url, queryParams) {\r\n  return new Resource(this, url, queryParams);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Chatter~BatchRequestResult\r\n * @prop {Boolean} hasError - Flag if the batch has one or more errors\r\n * @prop {Array.<Object>} results - Batch request results in array\r\n * @prop {Number} results.statusCode - HTTP response status code\r\n * @prop {Chatter~RequestResult} results.result - Parsed HTTP response body\r\n */\r\n\r\n/**\r\n * Make a batch request to chatter API\r\n *\r\n * @params {Array.<Chatter~Request>} requests - Chatter API requests\r\n * @param {Callback.<Chatter~BatchRequestResult>} [callback] - Callback func\r\n * @returns {Promise.<Chatter~BatchRequestResult>}\r\n */\r\nChatter.prototype.batch = function(requests, callback) {\r\n  var self = this;\r\n  var batchRequests = [], batchDeferreds = [];\r\n  _.forEach(requests, function(request) {\r\n    var deferred = Promise.defer();\r\n    request._promise = deferred.promise;\r\n    batchRequests.push(request.batchParams());\r\n    batchDeferreds.push(deferred);\r\n  });\r\n  var params = {\r\n    method: 'POST',\r\n    url: this._normalizeUrl('/connect/batch'),\r\n    body: {\r\n      batchRequests: batchRequests\r\n    }\r\n  };\r\n  return this.request(params).then(function(res) {\r\n    _.forEach(res.results, function(result, i) {\r\n      var deferred = batchDeferreds[i];\r\n      if (result.statusCode >= 400) {\r\n        deferred.reject(result.result);\r\n      } else {\r\n        deferred.resolve(result.result);\r\n      }\r\n    });\r\n    return res;\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n/**\r\n * A class representing chatter API request\r\n *\r\n * @protected\r\n * @class Chatter~Request\r\n * @implements {Promise.<Chatter~RequestResult>}\r\n * @param {Chatter} chatter - Chatter API object\r\n * @param {Chatter~RequestParams} params - Paramters representing HTTP request\r\n */\r\nvar Request = function(chatter, params) {\r\n  this._chatter = chatter;\r\n  this._params = params;\r\n  this._promise = null;\r\n};\r\n\r\n/**\r\n * @typedef {Object} Chatter~BatchRequestParams\r\n * @prop {String} method - HTTP method\r\n * @prop {String} url - Resource URL\r\n * @prop {String} [richInput] - HTTP body (in POST/PUT/PATCH methods)\r\n */\r\n\r\n/**\r\n * Retrieve parameters in batch request form\r\n *\r\n * @method Chatter~Request#batchParams\r\n * @returns {Chatter~BatchRequestParams}\r\n */\r\nRequest.prototype.batchParams = function() {\r\n  var params = this._params;\r\n  var batchParams = {\r\n    method: params.method,\r\n    url: this._chatter._normalizeUrl(params.url)\r\n  };\r\n  if (this._params.body) {\r\n    batchParams.richInput = this._params.body;\r\n  }\r\n  return batchParams;\r\n};\r\n\r\n/**\r\n * Retrieve parameters in batch request form\r\n *\r\n * @method Chatter~Request#promise\r\n * @returns {Promise.<Chatter~RequestResult>}\r\n */\r\nRequest.prototype.promise = function() {\r\n  return this._promise || this._chatter._request(this._params);\r\n};\r\n\r\n/**\r\n * Returns Node.js Stream object for request\r\n *\r\n * @method Chatter~Request#stream\r\n * @returns {stream.Stream}\r\n */\r\nRequest.prototype.stream = function() {\r\n  return this._chatter._request(this._params).stream();\r\n};\r\n\r\n/**\r\n * Promise/A+ interface\r\n * http://promises-aplus.github.io/promises-spec/\r\n *\r\n * Delegate to deferred promise, return promise instance for batch result\r\n *\r\n * @method Chatter~Request#then\r\n */\r\nRequest.prototype.then = function(onResolve, onReject) {\r\n  return this.promise().then(onResolve, onReject);\r\n};\r\n\r\n/**\r\n * Promise/A+ extension\r\n * Call \"then\" using given node-style callback function\r\n *\r\n * @method Chatter~Request#thenCall\r\n */\r\nRequest.prototype.thenCall = function(callback) {\r\n  return _.isFunction(callback) ? this.promise().thenCall(callback) : this;\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n/**\r\n * A class representing chatter API resource\r\n *\r\n * @protected\r\n * @class Chatter~Resource\r\n * @extends Chatter~Request\r\n * @param {Chatter} chatter - Chatter API object\r\n * @param {String} url - Resource URL\r\n * @param {Object} [queryParams] - Query parameters (in hash object)\r\n */\r\nvar Resource = function(chatter, url, queryParams) {\r\n  if (queryParams) {\r\n    var qstring = _.map(_.keys(queryParams), function(name) {\r\n      return name + \"=\" + encodeURIComponent(queryParams[name]);\r\n    }).join('&');\r\n    url += (url.indexOf('?') > 0 ? '&' : '?') + qstring;\r\n  }\r\n  Resource.super_.call(this, chatter, { method: 'GET', url: url });\r\n  this._url = url;\r\n};\r\n\r\ninherits(Resource, Request);\r\n\r\n/**\r\n * Create a new resource\r\n *\r\n * @method Chatter~Resource#create\r\n * @param {Object} data - Data to newly post\r\n * @param {Callback.<Chatter~RequestResult>} [callback] - Callback function\r\n * @returns {Chatter~Request}\r\n */\r\nResource.prototype.create = function(data, callback) {\r\n  return this._chatter.request({\r\n    method: 'POST',\r\n    url: this._url,\r\n    body: data\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Retrieve resource content\r\n *\r\n * @method Chatter~Resource#retrieve\r\n * @param {Callback.<Chatter~RequestResult>} [callback] - Callback function\r\n * @returns {Chatter~Request}\r\n */\r\nResource.prototype.retrieve = function(callback) {\r\n  return this.thenCall(callback);\r\n};\r\n\r\n/**\r\n * Update specified resource\r\n *\r\n * @method Chatter~Resource#update\r\n * @param {Obejct} data - Data to update\r\n * @param {Callback.<Chatter~RequestResult>} [callback] - Callback function\r\n * @returns {Chatter~Request}\r\n */\r\nResource.prototype.update = function(data, callback) {\r\n  return this._chatter.request({\r\n    method: 'POST',\r\n    url: this._url,\r\n    body: data\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Synonym of Resource#delete()\r\n *\r\n * @method Chatter~Resource#del\r\n * @param {Callback.<Chatter~RequestResult>} [callback] - Callback function\r\n * @returns {Chatter~Request}\r\n */\r\n/**\r\n * Delete specified resource\r\n *\r\n * @method Chatter~Resource#delete\r\n * @param {Callback.<Chatter~RequestResult>} [callback] - Callback function\r\n * @returns {Chatter~Request}\r\n */\r\nResource.prototype.del =\r\nResource.prototype[\"delete\"] = function(callback) {\r\n  return this._chatter.request({\r\n    method: 'DELETE',\r\n    url: this._url\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n/*\r\n * Register hook in connection instantiation for dynamically adding this API module features\r\n */\r\njsforce.on('connection:new', function(conn) {\r\n  conn.chatter = new Chatter(conn);\r\n});\r\n\r\n},{\"../core\":20,\"../promise\":27,\"inherits\":84,\"lodash/core\":88}],8:[function(require,module,exports){\r\nrequire('./analytics');\r\nrequire('./apex');\r\nrequire('./bulk');\r\nrequire('./chatter');\r\nrequire('./metadata');\r\nrequire('./soap');\r\nrequire('./streaming');\r\nrequire('./tooling');\r\n\r\n},{\"./analytics\":4,\"./apex\":5,\"./bulk\":6,\"./chatter\":7,\"./metadata\":9,\"./soap\":10,\"./streaming\":12,\"./tooling\":13}],9:[function(require,module,exports){\r\n(function (process,Buffer){\r\n/*global process, Buffer */\r\n/**\r\n * @file Manages Salesforce Metadata API\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar inherits = require('inherits'),\r\n    events  = require('events'),\r\n    stream  = require('readable-stream'),\r\n    _       = require('lodash/core'),\r\n    jsforce = require('../core'),\r\n    Promise = require('../promise'),\r\n    SOAP    = require('../soap');\r\n\r\n/*--------------------------------------------*/\r\n/**\r\n * Class for Salesforce Metadata API\r\n *\r\n * @class\r\n * @param {Connection} conn - Connection object\r\n */\r\nvar Metadata = module.exports = function(conn) {\r\n  this._conn = conn;\r\n};\r\n\r\n\r\n/**\r\n * Polling interval in milliseconds\r\n * @type {Number}\r\n */\r\nMetadata.prototype.pollInterval = 1000;\r\n\r\n/**\r\n * Polling timeout in milliseconds\r\n * @type {Number}\r\n */\r\nMetadata.prototype.pollTimeout = 10000;\r\n\r\n\r\n/**\r\n * Call Metadata API SOAP endpoint\r\n *\r\n * @private\r\n */\r\nMetadata.prototype._invoke = function(method, message, callback) {\r\n  var soapEndpoint = new SOAP(this._conn, {\r\n    xmlns: \"http://soap.sforce.com/2006/04/metadata\",\r\n    endpointUrl: this._conn.instanceUrl + \"/services/Soap/m/\" + this._conn.version\r\n  });\r\n  return soapEndpoint.invoke(method, message).then(function(res) {\r\n    return res.result;\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * @typedef {Object} Metadata~MetadataInfo\r\n * @prop {String} fullName - The name of the component\r\n */\r\n\r\n/**\r\n * Asynchronously adds one or more new metadata components to the organization.\r\n *\r\n * @param {String} type - The type of metadata to create\r\n * @param {Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>} metadata - Metadata to create\r\n * @param {Callback.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>} [callback] - Callback function\r\n * @returns {Metadata~AsyncResultLocator}\r\n */\r\nMetadata.prototype.createAsync = function(type, metadata, callback) {\r\n  if (Number(this._conn.version) > 30) {\r\n    throw new Error(\"Async metadata CRUD calls are not supported on ver 31.0 or later.\");\r\n  }\r\n  var convert = function(md) {\r\n    md[\"@xsi:type\"] = type;\r\n    return md;\r\n  };\r\n  var isArray = _.isArray(metadata);\r\n  metadata = isArray ? _.map(metadata, convert) : convert(metadata);\r\n  var res = this._invoke(\"create\", { metadata: metadata });\r\n  return new AsyncResultLocator(this, res, isArray).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Metadata~SaveResult\r\n * @prop {Boolean} success - True if metadata is successfully saved\r\n * @prop {String} fullName - Full name of metadata object\r\n */\r\n\r\n/**\r\n * @private\r\n */\r\nfunction convertToSaveResult(result) {\r\n  var saveResult = _.clone(result);\r\n  saveResult.success = saveResult.success === 'true';\r\n  return saveResult;\r\n}\r\n\r\n/**\r\n * @typedef {Object} Metadata~UpsertResult\r\n * @prop {Boolean} success - True if metadata is successfully saved\r\n * @prop {String} fullName - Full name of metadata object\r\n * @prop {Boolean} created - True if metadata is newly created\r\n */\r\n\r\n/**\r\n * @private\r\n */\r\nfunction convertToUpsertResult(result) {\r\n  var upsertResult = convertToSaveResult(result);\r\n  upsertResult.created = upsertResult.created === 'true';\r\n  return upsertResult;\r\n}\r\n\r\n/**\r\n * Synonym of Metadata#create().\r\n *\r\n * @method Metadata#createSync\r\n * @param {String} type - The type of metadata to create\r\n * @param {Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>} metadata - Metadata to create\r\n * @param {Callback.<Metadata~SaveResult|Array.<Metadata~SaveResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~SaveResult|Array.<Metadata~SaveResult>>}\r\n */\r\n/**\r\n * Synchronously adds one or more new metadata components to the organization.\r\n *\r\n * @method Metadata#create\r\n * @param {String} type - The type of metadata to create\r\n * @param {Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>} metadata - Metadata to create\r\n * @param {Callback.<Metadata~SaveResult|Array.<Metadata~SaveResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~SaveResult|Array.<Metadata~SaveResult>>}\r\n */\r\nMetadata.prototype.createSync =\r\nMetadata.prototype.create = function(type, metadata, callback) {\r\n  var convert = function(md) {\r\n    md[\"@xsi:type\"] = type;\r\n    return md;\r\n  };\r\n  var isArray = _.isArray(metadata);\r\n  metadata = isArray ? _.map(metadata, convert) : convert(metadata);\r\n  return this._invoke(\"createMetadata\", { metadata: metadata }).then(function(results) {\r\n    return _.isArray(results) ? _.map(results, convertToSaveResult) : convertToSaveResult(results);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nfunction convertToMetadataInfo(rec) {\r\n  var metadataInfo = _.clone(rec);\r\n  delete metadataInfo.$;\r\n  return metadataInfo;\r\n}\r\n\r\n/**\r\n * Synonym of Metadata#read()\r\n *\r\n * @method Metadata#readSync\r\n * @param {String} type - The type of metadata to read\r\n * @param {String|Array.<String>} fullNames - full name(s) of metadata objects to read\r\n * @param {Callback.<Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>>>}\r\n */\r\n/**\r\n * Synchronously read specified metadata components in the organization.\r\n *\r\n * @method Metadata#read\r\n * @param {String} type - The type of metadata to read\r\n * @param {String|Array.<String>} fullNames - full name(s) of metadata objects to read\r\n * @param {Callback.<Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>>>}\r\n */\r\nMetadata.prototype.readSync =\r\nMetadata.prototype.read = function(type, fullNames, callback) {\r\n  return this._invoke(\"readMetadata\", { type: type, fullNames: fullNames }).then(function(res) {\r\n    return _.isArray(res.records) ? _.map(res.records, convertToMetadataInfo) : convertToMetadataInfo(res.records);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Metadata~UpdateMetadataInfo\r\n * @prop {String} currentName - The API name of the component or field before the update\r\n * @prop {Metadata~MetadataInfo} metadata - Full specification of the component or field you wish to update\r\n */\r\n\r\n/**\r\n * Asynchronously updates one or more metadata components in the organization.\r\n *\r\n * @param {String} type - The type of metadata to update\r\n * @param {Metadata~UpdateMetadataInfo|Array.<Metadata~UpdateMetadataInfo>} updateMetadata - Updating metadata\r\n * @param {Callback.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>} [callback] - Callback function\r\n * @returns {Metadata~AsyncResultLocator}\r\n */\r\nMetadata.prototype.updateAsync = function(type, updateMetadata, callback) {\r\n  if (Number(this._conn.version) > 30) {\r\n    throw new Error(\"Async metadata CRUD calls are not supported on ver 31.0 or later.\");\r\n  }\r\n  var convert = function(umd) {\r\n    umd.metadata[\"@xsi:type\"] = type;\r\n    return umd;\r\n  };\r\n  var isArray = _.isArray(updateMetadata);\r\n  updateMetadata = isArray ? _.map(updateMetadata, convert) : convert(updateMetadata);\r\n  var res = this._invoke(\"update\", { updateMetadata: updateMetadata });\r\n  return new AsyncResultLocator(this, res, isArray).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Synonym of Metadata#update().\r\n *\r\n * @method Metadata#updateSync\r\n * @param {String} type - The type of metadata to update\r\n * @param {Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>} updateMetadata - Updating metadata\r\n * @param {Callback.<Metadata~SaveResult|Array.<Metadata~SaveResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~SaveResult|Array.<Metadata~SaveResult>>}\r\n */\r\n/**\r\n * Synchronously updates one or more metadata components in the organization.\r\n *\r\n * @method Metadata#update\r\n * @param {String} type - The type of metadata to update\r\n * @param {Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>} updateMetadata - Updating metadata\r\n * @param {Callback.<Metadata~SaveResult|Array.<Metadata~SaveResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~SaveResult|Array.<Metadata~SaveResult>>}\r\n */\r\nMetadata.prototype.updateSync =\r\nMetadata.prototype.update = function(type, metadata, callback) {\r\n  var convert = function(md) {\r\n    md[\"@xsi:type\"] = type;\r\n    return md;\r\n  };\r\n  var isArray = _.isArray(metadata);\r\n  metadata = isArray ? _.map(metadata, convert) : convert(metadata);\r\n  return this._invoke(\"updateMetadata\", { metadata: metadata }).then(function(results) {\r\n    return _.isArray(results) ? _.map(results, convertToSaveResult) : convertToSaveResult(results);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Synonym of Metadata#upsert().\r\n *\r\n * @method Metadata#upsertSync\r\n * @param {String} type - The type of metadata to upsert\r\n * @param {Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>} metadata - Upserting metadata\r\n * @param {Callback.<Metadata~UpsertResult|Array.<Metadata~UpsertResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~UpsertResult|Array.<Metadata~UpsertResult>>}\r\n */\r\n/**\r\n * Upserts one or more components in your organization's data.\r\n *\r\n * @method Metadata#upsert\r\n * @param {String} type - The type of metadata to upsert\r\n * @param {Metadata~MetadataInfo|Array.<Metadata~MetadataInfo>} metadata - Upserting metadata\r\n * @param {Callback.<Metadata~UpsertResult|Array.<Metadata~UpsertResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~UpsertResult|Array.<Metadata~UpsertResult>>}\r\n */\r\nMetadata.prototype.upsertSync =\r\nMetadata.prototype.upsert = function(type, metadata, callback) {\r\n  var convert = function(md) {\r\n    md[\"@xsi:type\"] = type;\r\n    return md;\r\n  };\r\n  var isArray = _.isArray(metadata);\r\n  metadata = isArray ? _.map(metadata, convert) : convert(metadata);\r\n  return this._invoke(\"upsertMetadata\", { metadata: metadata }).then(function(results) {\r\n    return _.isArray(results) ? _.map(results, convertToUpsertResult) : convertToUpsertResult(results);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Asynchronously deletes specified metadata components in the organization.\r\n *\r\n * @param {String} type - The type of metadata to delete\r\n * @param {String|Metadata~MetadataInfo|Array.<String>|Array.<Metadata~MetadataInfo>} metadata - The fullName of metadata or metadata info to delete. If it is passed in fullName, the type parameter should not be empty.\r\n * @param {Callback.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>} [callback] - Callback function\r\n * @returns {Metadata~AsyncResultLocator}\r\n */\r\nMetadata.prototype.deleteAsync = function(type, metadata, callback) {\r\n  if (Number(this._conn.version) > 30) {\r\n    throw new Error(\"Async metadata CRUD calls are not supported on ver 31.0 or later.\");\r\n  }\r\n  var convert = function(md) {\r\n    if (_.isString(md)) {\r\n      md = { fullName : md };\r\n    }\r\n    md[\"@xsi:type\"] = type;\r\n    return md;\r\n  };\r\n  var isArray = _.isArray(metadata);\r\n  metadata = isArray ? _.map(metadata, convert) : convert(metadata);\r\n  var res = this._invoke(\"delete\", { metadata: metadata });\r\n  return new AsyncResultLocator(this, res, isArray).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Synonym of Metadata#delete().\r\n *\r\n * @deprecated\r\n * @method Metadata#del\r\n * @param {String} [type] - The type of metadata to delete\r\n * @param {String|Metadata~MetadataInfo|Array.<String>|Array.<Metadata~MetadataInfo>} metadata - The fullName of metadata or metadata info to delete. If it is passed in fullName, the type parameter should not be empty.\r\n * @param {Callback.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>} [callback] - Callback function\r\n * @returns {Metadata~AsyncResultLocator}\r\n */\r\n/**\r\n * Synonym of Metadata#delete().\r\n *\r\n * @method Metadata#deleteSync\r\n * @param {String} type - The type of metadata to delete\r\n * @param {String|Array.<String>} fullNames - The fullName of metadata to delete.\r\n * @param {Callback.<Metadata~SaveResult|Array.<Metadata~SaveResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~SaveResult|Array.<Metadata~SaveResult>>}\r\n */\r\n\r\n/**\r\n * Synchronously deletes specified metadata components in the organization.\r\n *\r\n * @method Metadata#delete\r\n * @param {String} type - The type of metadata to delete\r\n * @param {String|Array.<String>} fullNames - The fullName of metadata to delete.\r\n * @param {Callback.<Metadata~SaveResult|Array.<Metadata~SaveResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~SaveResult|Array.<Metadata~SaveResult>>}\r\n */\r\nMetadata.prototype.del =\r\nMetadata.prototype.deleteSync =\r\nMetadata.prototype[\"delete\"] = function(type, fullNames, callback) {\r\n  return this._invoke(\"deleteMetadata\", { type: type, fullNames: fullNames }).then(function(results) {\r\n    return _.isArray(results) ? _.map(results, convertToSaveResult) : convertToSaveResult(results);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Rename fullname of a metadata component in the organization\r\n *\r\n * @param {String} type - The type of metadata to delete\r\n * @param {String} oldFullName - The original fullName of metadata\r\n * @param {String} newFullName - The new fullName of metadata\r\n * @param {Callback.<Metadata~SaveResult>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~SaveResult>}\r\n */\r\nMetadata.prototype.rename = function(type, oldFullName, newFullName, callback) {\r\n  return this._invoke(\"renameMetadata\", { type: type, oldFullName: oldFullName, newFullName: newFullName }).then(function(result) {\r\n    return convertToSaveResult(result);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Checks the status of asynchronous metadata calls\r\n *\r\n * @param {String|Array.<String>} ids - The asynchronous process ID(s)\r\n * @param {Callback.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>} [callback] - Callback function\r\n * @returns {Metadata~AsyncResultLocator}\r\n */\r\nMetadata.prototype.checkStatus = function(ids, callback) {\r\n  var isArray = _.isArray(ids);\r\n  var res = this._invoke(\"checkStatus\", { asyncProcessId: ids });\r\n  return new AsyncResultLocator(this, res, isArray).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Metadata~DescribeMetadataResult\r\n * @prop {Array.<Object>} metadataObjects - One or more metadata components and their attributes\r\n * @prop {Array.<String>} metadataObjects.childXmlNames - List of child sub-components for this component\r\n * @prop {String} metadataObjects.directoryName - The name of the directory in the .zip file that contains this component\r\n * @prop {Boolean} metadataObjects.inFolder - Indicates whether the component is in a folder or not\r\n * @prop {Boolean} metadataObjects.metaFile - Indicates whether the component requires an accompanying metadata file\r\n * @prop {String} metadataObjects.suffix - The file suffix for this component\r\n * @prop {String} metadataObjects.xmlName - The name of the root element in the metadata file for this component\r\n * @prop {String} organizationNamespace - The namespace of the organization\r\n * @prop {Boolean} partialSaveAllowed - Indicates whether rollbackOnError is allowed or not\r\n * @prop {Boolean} testRequired - Indicates whether tests are required or not\r\n */\r\n\r\n/**\r\n * Retrieves the metadata which describes your organization, including Apex classes and triggers,\r\n * custom objects, custom fields on standard objects, tab sets that define an app,\r\n * and many other components.\r\n *\r\n * @param {String} [version] - The API version for which you want metadata; for example, 29.0\r\n * @param {Callback.<Metadata~DescribeMetadataResult>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~DescribeMetadataResult>}\r\n */\r\nMetadata.prototype.describe = function(version, callback) {\r\n  if (!_.isString(version)) {\r\n    callback = version;\r\n    version = this._conn.version;\r\n  }\r\n  return this._invoke(\"describeMetadata\", { asOfVersion: version }).then(function(res) {\r\n    res.metadataObjects = _.isArray(res.metadataObjects) ? res.metadataObjects : [ res.metadataObjects ];\r\n    res.metadataObjects = _.map(res.metadataObjects, function(mo) {\r\n      if (mo.childXmlNames) {\r\n        mo.childXmlNames = _.isArray(mo.childXmlNames) ? mo.childXmlNames: [ mo.childXmlNames ];\r\n      }\r\n      mo.inFolder = mo.inFolder === 'true';\r\n      mo.metaFile = mo.metaFile === 'true';\r\n      return mo;\r\n    });\r\n    res.partialSaveAllowed = res.partialSaveAllowed === 'true';\r\n    res.testRequired = res.testRequired === 'true';\r\n    return res;\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Metadata~ListMetadataQuery\r\n * @prop {String} type - The metadata type, such as CustomObject, CustomField, or ApexClass\r\n * @prop {String} [folder] - The folder associated with the component.\r\n */\r\n\r\n/**\r\n * @typedef {Object} Metadata~FileProperties\r\n * @prop {String} type - The metadata type, such as CustomObject, CustomField, or ApexClass\r\n * @prop {String} createdById - ID of the user who created the file\r\n * @prop {String} createdByName - Name of the user who created the file\r\n * @prop {String} createdDate - Date and time when the file was created\r\n * @prop {String} fileName - Name of the file\r\n * @prop {String} fullName - The file developer name used as a unique identifier for API access\r\n * @prop {String} id - ID of the file\r\n * @prop {String} lastModifiedById - ID of the user who last modified the file\r\n * @prop {String} lastModifiedByName - Name of the user who last modified the file\r\n * @prop {String} lastModifiedDate - Date and time that the file was last modified\r\n * @prop {String} [manageableState] - Indicates the manageable state of the specified component if it is contained in a package\r\n * @prop {String} [namespacePrefix] - The namespace prefix of the component\r\n */\r\n\r\n/**\r\n * Retrieves property information about metadata components in your organization\r\n *\r\n * @param {Metadata~ListMetadataQuery|Array.<Metadata~ListMetadataQuery>} queries - The criteria object(s) specifing metadata to list\r\n * @param {String} [version] - The API version for which you want metadata; for example, 29.0\r\n * @param {Callback.<Array.<Metadata~FileProperties>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<Metadata~FileProperties>>}\r\n */\r\nMetadata.prototype.list = function(queries, version, callback) {\r\n  if (!_.isString(version)) {\r\n    callback = version;\r\n    version = this._conn.version;\r\n  }\r\n  if (!_.isArray(queries)) {\r\n    queries = [ queries ];\r\n  }\r\n  return this._invoke(\"listMetadata\", { queries: queries, asOfVersion: version }, callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Metadata~RetrieveRequest\r\n */\r\n\r\n/**\r\n * Retrieves XML file representations of components in an organization\r\n *\r\n * @param {Metadata~RetrieveRequest} request - Options for determining which packages or files are retrieved\r\n * @param {Callback.<Metadata~AsyncResult>} [callback] - Callback function\r\n * @returns {Metadata~RetrieveResultLocator}\r\n */\r\nMetadata.prototype.retrieve = function(request, callback) {\r\n  var res = this._invoke(\"retrieve\", { request: request });\r\n  return new RetrieveResultLocator(this, res).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Checks the status of declarative metadata call retrieve() and returns the zip file contents\r\n *\r\n * @param {String} id - Async process id returned from previous retrieve request\r\n * @param {Callback.<Metadata~RetrieveResult>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~RetrieveResult>}\r\n */\r\nMetadata.prototype.checkRetrieveStatus = function(id, callback) {\r\n  return this._invoke(\"checkRetrieveStatus\", { asyncProcessId: id }, callback);\r\n};\r\n\r\n/**\r\n * Deploy components into an organization using zipped file representations\r\n *\r\n * @param {stream.Stream|Buffer|String} zipInput - Zipped file input source in readable stream, binary buffer or Base64-encoded string\r\n * @param {Object} [options] - Options used in deployment\r\n * @param {Boolean} [options.allowMissingFiles] - Specifies whether a deploy succeeds even if files that are specified in package.xml but are not in the .zip file or not.\r\n * @param {Boolean} [options.autoUpdatePackage] - If a file is in the .zip file but not specified in package.xml, specifies whether the file should be automatically added to the package or not.\r\n * @param {Boolean} [options.checkOnly] - Indicates whether Apex classes and triggers are saved to the organization as part of the deployment (false) or not (true).\r\n * @param {Boolean} [options.ignoreWarnings] - Indicates whether a warning should allow a deployment to complete successfully (true) or not (false). Defaults to false.\r\n * @param {Boolean} [options.performRetrieve] - Indicates whether a retrieve() call is performed immediately after the deployment (true) or not (false).\r\n * @param {Boolean} [options.purgeOnDelete] - If true, the deleted components in the destructiveChanges.xml manifest file aren't stored in the Recycle Bin.\r\n * @param {Boolean} [options.rollbackOnError] - Indicates whether any failure causes a complete rollback (true) or not (false).\r\n * @param {Boolean} [options.runAllTests] - If true, all Apex tests defined in the organization are run.\r\n * @param {Array.<String>} [options.runTests] - A list of Apex tests to be run during deployment.\r\n * @param {Boolean} [options.singlePackage] - Indicates whether the specified .zip file points to a directory structure with a single package (true) or a set of packages (false).\r\n * @param {Callback.<Metadata~AsyncResult>} [callback] - Callback function\r\n * @returns {Metadata~DeployResultLocator}\r\n */\r\nMetadata.prototype.deploy = function(zipInput, options, callback) {\r\n  if (!options || _.isFunction(options)) {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  var deferred = Promise.defer();\r\n  if (_.isObject(zipInput) && _.isFunction(zipInput.pipe)) {\r\n    var bufs = [];\r\n    zipInput.on('data', function(d) {\r\n      bufs.push(d);\r\n    });\r\n    zipInput.on('end', function() {\r\n      deferred.resolve(Buffer.concat(bufs).toString('base64'));\r\n    });\r\n    // zipInput.resume();\r\n  } else if (zipInput instanceof Buffer) {\r\n    deferred.resolve(zipInput.toString('base64'));\r\n  } else if (zipInput instanceof String || typeof zipInput === 'string') {\r\n    deferred.resolve(zipInput);\r\n  } else {\r\n    throw \"Unexpected zipInput type\";\r\n  }\r\n\r\n  var self = this;\r\n  var res = deferred.promise.then(function(zipContentB64) {\r\n    return self._invoke(\"deploy\", {\r\n      ZipFile: zipContentB64,\r\n      DeployOptions: options\r\n    }, callback);\r\n  });\r\n  return new DeployResultLocator(this, res).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Checks the status of declarative metadata call deploy()\r\n *\r\n * @param {String} id - Async process id returned from previous deploy request\r\n * @param {Boolean} [includeDetails] - Sets the DeployResult object to include details information (default: false)\r\n * @param {Callback.<Metadata~DeployResult>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~DeployResult>}\r\n */\r\nMetadata.prototype.checkDeployStatus = function(id, includeDetails, callback) {\r\n  if (_.isObject(includeDetails) || _.isBoolean(includeDetails)) {\r\n    includeDetails = !!includeDetails;\r\n  } else {\r\n    callback = includeDetails;\r\n    includeDetails = false;\r\n  }\r\n  return this._invoke(\"checkDeployStatus\", {\r\n    asyncProcessId: id,\r\n    includeDetails : includeDetails\r\n  }).then(function(res) {\r\n    res.done = res.done === 'true';\r\n    res.success = res.success === 'true';\r\n    res.checkOnly = res.checkOnly === 'true';\r\n    if (res.ignoreWarnings) {\r\n      res.ignoreWarnings = res.ignoreWarnings === 'true';\r\n    }\r\n    if (res.rollbackOnError) {\r\n      res.rollbackOnError = res.rollbackOnError === 'true';\r\n    }\r\n    res.numberComponentErrors = Number(res.numberComponentErrors);\r\n    res.numberComponentsDeployed = Number(res.numberComponentsDeployed);\r\n    res.numberComponentsTotal = Number(res.numberComponentsTotal);\r\n    res.numberTestErrors = Number(res.numberTestErrors);\r\n    res.numberTestsCompleted = Number(res.numberTestsCompleted);\r\n    res.numberTestsTotal = Number(res.numberTestsTotal);\r\n\r\n    return res;\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n\r\n/**\r\n * @typedef {Object} Metadata~AsyncResult\r\n * @prop {Boolean} done - Indicates whether the call has completed or not\r\n * @prop {String} id - ID of the component being created, updated, deleted, deployed, or retrieved\r\n * @prop {String} state - The state four possible values: Queued, InProgress, Completed, and Error.\r\n * @prop {String} [statusCode] - If an error occurred during the create(), update(), or delete() call, a status code is returned\r\n * @prop {String} [message] - Message corresponding to the statusCode field returned\r\n */\r\n\r\n/**\r\n * The locator class for Metadata API asynchronous call result\r\n *\r\n * @protected\r\n * @class Metadata~AsyncResultLocator\r\n * @extends events.EventEmitter\r\n * @implements Promise.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>\r\n * @param {Metadata} meta - Metadata API object\r\n * @param {Promise.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>} results - Promise object for async result info\r\n * @param {Boolean} [isArray] - Indicates whether the async request is given in array or single object\r\n */\r\nvar AsyncResultLocator = function(meta, results, isArray) {\r\n  this._meta = meta;\r\n  this._results = results;\r\n  this._isArray = isArray;\r\n};\r\n\r\ninherits(AsyncResultLocator, events.EventEmitter);\r\n\r\n/**\r\n * Promise/A+ interface\r\n * http://promises-aplus.github.io/promises-spec/\r\n *\r\n * Delegate to deferred promise, return promise instance for batch result\r\n *\r\n * @method Metadata~AsyncResultLocator#then\r\n */\r\nAsyncResultLocator.prototype.then = function(onResolve, onReject) {\r\n  var self = this;\r\n  return this._results.then(function(results) {\r\n    var convertType = function(res) {\r\n      if (res.$ && res.$[\"xsi:nil\"] === 'true') {\r\n        return null;\r\n      }\r\n      res.done = res.done === 'true';\r\n      return res;\r\n    };\r\n    results = _.isArray(results) ? _.map(results, convertType) : convertType(results);\r\n    if (self._isArray && !_.isArray(results)) {\r\n      results = [ results ];\r\n    }\r\n    return onResolve(results);\r\n  }, onReject);\r\n};\r\n\r\n/**\r\n * Promise/A+ extension\r\n * Call \"then\" using given node-style callback function\r\n *\r\n * @method Metadata~AsyncResultLocator#thenCall\r\n */\r\nAsyncResultLocator.prototype.thenCall = function(callback) {\r\n  return _.isFunction(callback) ? this.then(function(res) {\r\n    process.nextTick(function() {\r\n      callback(null, res);\r\n    });\r\n  }, function(err) {\r\n    process.nextTick(function() {\r\n      callback(err);\r\n    });\r\n  }) : this;\r\n};\r\n\r\n/**\r\n * Check the status of async request\r\n *\r\n * @method Metadata~AsyncResultLocator#check\r\n * @param {Callback.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>}\r\n */\r\nAsyncResultLocator.prototype.check = function(callback) {\r\n  var self = this;\r\n  var meta = this._meta;\r\n  return this.then(function(results) {\r\n    var ids = _.isArray(results) ? _.map(results, function(res){ return res.id; }) : results.id;\r\n    self._ids = ids;\r\n    return meta.checkStatus(ids);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Polling until async call status becomes complete or error\r\n *\r\n * @method Metadata~AsyncResultLocator#poll\r\n * @param {Number} interval - Polling interval in milliseconds\r\n * @param {Number} timeout - Polling timeout in milliseconds\r\n */\r\nAsyncResultLocator.prototype.poll = function(interval, timeout) {\r\n  var self = this;\r\n  var startTime = new Date().getTime();\r\n  var poll = function() {\r\n    var now = new Date().getTime();\r\n    if (startTime + timeout < now) {\r\n      var errMsg = \"Polling time out.\";\r\n      if (self._ids) {\r\n        errMsg += \" Process Id = \" + self._ids;\r\n      }\r\n      self.emit('error', new Error(errMsg));\r\n      return;\r\n    }\r\n    self.check().then(function(results) {\r\n      var done = true;\r\n      var resultArr = _.isArray(results) ? results : [ results ];\r\n      for (var i=0, len=resultArr.length; i<len; i++) {\r\n        var result = resultArr[i];\r\n        if (result && !result.done) {\r\n          self.emit('progress', result);\r\n          done = false;\r\n        }\r\n      }\r\n      if (done) {\r\n        self.emit('complete', results);\r\n      } else {\r\n        setTimeout(poll, interval);\r\n      }\r\n    }, function(err) {\r\n      self.emit('error', err);\r\n    });\r\n  };\r\n  setTimeout(poll, interval);\r\n};\r\n\r\n/**\r\n * Check and wait until the async requests become in completed status\r\n *\r\n * @method Metadata~AsyncResultLocator#complete\r\n * @param {Callback.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~AsyncResult|Array.<Metadata~AsyncResult>>}\r\n */\r\nAsyncResultLocator.prototype.complete = function(callback) {\r\n  var deferred = Promise.defer();\r\n  this.on('complete', function(results) {\r\n    deferred.resolve(results);\r\n  });\r\n  this.on('error', function(err) {\r\n    deferred.reject(err);\r\n  });\r\n  var meta = this._meta;\r\n  this.poll(meta.pollInterval, meta.pollTimeout);\r\n  return deferred.promise.thenCall(callback);\r\n};\r\n\r\n/*--------------------------------------------*/\r\n/**\r\n * The locator class to track retreive() Metadata API call result\r\n *\r\n * @protected\r\n * @class Metadata~RetrieveResultLocator\r\n * @extends Metadata~AsyncResultLocator\r\n * @param {Metadata} meta - Metadata API object\r\n * @param {Promise.<Metadata~AsyncResult>} result - Promise object for async result of retrieve call()\r\n */\r\nvar RetrieveResultLocator = function(meta, result) {\r\n  RetrieveResultLocator.super_.call(this, meta, result);\r\n};\r\n\r\ninherits(RetrieveResultLocator, AsyncResultLocator);\r\n\r\n/**\r\n * @typedef {Object} Metadata~RetrieveResult\r\n * @prop {Array.<Metadata~FileProperties>} fileProperties - Contains information about the properties of each component in the .zip file, and the manifest file package.xml\r\n * @prop {String} id - ID of the component being retrieved\r\n * @prop {Array.<Object>} messages - Contains information about the success or failure of the retrieve() call\r\n * @prop {String} zipFile - The zip file returned by the retrieve request. Base 64-encoded binary data\r\n */\r\n\r\n/**\r\n * Check and wait until the async request becomes in completed status,\r\n * and retrieve the result data.\r\n *\r\n * @memthod Metadata~RetrieveResultLocator#complete\r\n * @param {Callback.<Metadata~RetrieveResult>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~RetrieveResult>}\r\n */\r\nRetrieveResultLocator.prototype.complete = function(callback) {\r\n  var meta = this._meta;\r\n  return RetrieveResultLocator.super_.prototype.complete.call(this).then(function(result) {\r\n    return meta.checkRetrieveStatus(result.id);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Change the retrieved result to Node.js readable stream\r\n *\r\n * @method Metadata~RetrieveResultLocator#stream\r\n * @returns {stream.Readable}\r\n */\r\nRetrieveResultLocator.prototype.stream = function() {\r\n  var self = this;\r\n  var resultStream = new stream.Readable();\r\n  var reading = false;\r\n  resultStream._read = function() {\r\n    if (reading) { return; }\r\n    reading = true;\r\n    self.complete(function(err, result) {\r\n      if (err) {\r\n        resultStream.emit('error', err);\r\n      } else {\r\n        resultStream.push(new Buffer(result.zipFile, 'base64'));\r\n        resultStream.push(null);\r\n      }\r\n    });\r\n  };\r\n  return resultStream;\r\n};\r\n\r\n/*--------------------------------------------*/\r\n/**\r\n * The locator class to track deploy() Metadata API call result\r\n *\r\n * @protected\r\n * @class Metadata~DeployResultLocator\r\n * @extends Metadata~AsyncResultLocator\r\n * @param {Metadata} meta - Metadata API object\r\n * @param {Promise.<Metadata~AsyncResult>} result - Promise object for async result of deploy() call\r\n */\r\nvar DeployResultLocator = function(meta, result) {\r\n  DeployResultLocator.super_.call(this, meta, result);\r\n};\r\n\r\ninherits(DeployResultLocator, AsyncResultLocator);\r\n\r\n/**\r\n * @typedef {Object} Metadata~DeployResult\r\n * @prop {String} id - ID of the component being deployed\r\n * @prop {Boolean} checkOnly - Indicates whether this deployment is being used to check the validity of the deployed files without making any changes in the organization or not\r\n * @prop {String} completedDate - Timestamp for when the deployment process ended\r\n * @prop {String} createdDate - Timestamp for when the deploy() call was received\r\n * @prop {Array.<Object>} [details] - Provides the details of a deployment that is in-progress or ended, if includeDetails is set to true in checkDeployStatus() call\r\n * @prop {Boolean} done - Indicates whether the server finished processing the deploy() call for the specified id\r\n * @prop {String} [errorMessage] - Message corresponding to the values in the errorStatusCode field\r\n * @prop {String} [errorStatusCode] - If an error occurred during the deploy() call, a status code is returned, and the message corresponding to the status code is returned in the errorMessagefield\r\n * @prop {Boolean} [ignoreWarnings] - Specifies whether a deployment should continue even if the deployment generates warnings\r\n * @prop {String} lastModifiedDate - Timestamp of the last update for the deployment process\r\n * @prop {Number} numberComponentErrors - The number of components that generated errors during this deployment\r\n * @prop {Number} numberComponentsDeployed - The number of components deployed in the deployment process\r\n * @prop {Number} numberComponentsTotal - The total number of components in the deployment\r\n * @prop {Number} numberTestErrors - The number of Apex tests that have generated errors during this deployment\r\n * @prop {Number} numberTestsCompleted - The number of completedApex tests for this deployment\r\n * @prop {Number} numberTestsTotal - The total number of Apex tests for this deployment\r\n * @prop {Boolean} [rollbackOnError] - Indicates whether any failure causes a complete rollback or not. Default is true.\r\n * @prop {String} startDate - Timestamp for when the deployment process began\r\n * @prop {String} status - Indicates the current state of the deployment\r\n * @prop {Boolean} success - Indicates whether the deployment was successful or not\r\n */\r\n\r\n/**\r\n * Check and wait until the async request becomes in completed status,\r\n * and retrieve the result data.\r\n *\r\n * @method Metadata~DeployResultLocator#complete\r\n * @param {Callback.<Metadata~DeployResult>} [callback] - Callback function\r\n * @returns {Promise.<Metadata~DeployResult>}\r\n */\r\nDeployResultLocator.prototype.complete = function(includeDetails, callback) {\r\n  if (_.isFunction(includeDetails)) {\r\n    callback = includeDetails;\r\n    includeDetails = false;\r\n  }\r\n  var meta = this._meta;\r\n  return DeployResultLocator.super_.prototype.complete.call(this).then(function(result) {\r\n    return meta.checkDeployStatus(result.id, includeDetails);\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n/*\r\n * Register hook in connection instantiation for dynamically adding this API module features\r\n */\r\njsforce.on('connection:new', function(conn) {\r\n  conn.metadata = new Metadata(conn);\r\n});\r\n\r\n}).call(this,require('_process'),require(\"buffer\").Buffer)\r\n\r\n},{\"../core\":20,\"../promise\":27,\"../soap\":33,\"_process\":91,\"buffer\":41,\"events\":47,\"inherits\":84,\"lodash/core\":88,\"readable-stream\":107}],10:[function(require,module,exports){\r\n/**\r\n * @file Salesforce SOAP API\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar _ = require('lodash/core');\r\nvar jsforce = require('../core');\r\nvar SOAP = require('../soap');\r\n\r\n/**\r\n * API class for Partner SOAP call\r\n *\r\n * @class\r\n * @param {Connection} conn - Connection\r\n */\r\nvar SoapApi = module.exports = function(conn) {\r\n  this._conn = conn;\r\n};\r\n\r\n/**\r\n * Call SOAP Api (Partner) endpoint\r\n * @private\r\n */\r\nSoapApi.prototype._invoke = function(method, message, schema, callback) {\r\n  var soapEndpoint = new SOAP(this._conn, {\r\n    xmlns: \"urn:partner.soap.sforce.com\",\r\n    endpointUrl: this._conn.instanceUrl + \"/services/Soap/u/\" + this._conn.version\r\n  });\r\n  return soapEndpoint.invoke(method, message, { result: schema }).then(function(res) {\r\n    return res.result;\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/* */\r\nvar Schemas = {};\r\n\r\n/**\r\n * @typedef SoapApi~LeadConvert\r\n * @prop {String} convertedStatus - Status of converted lead\r\n * @prop {String} leadId - Lead record Id to convert\r\n * @prop {String} [accountId] - Account record Id to assign the converted record\r\n * @prop {String} [contactId] - Contact record Id to assign the converted record\r\n * @prop {Boolean} [doNotCreateOpportunity] - True if you don't want to create a new opportunity\r\n * @prop {String} [opportunityName] - Name of opportunity to create\r\n * @prop {Boolean} [overwriteLeadSource] - True if overwriting lead source\r\n * @prop {String} [ownerId] - Owner Id\r\n * @prop {Boolean} [sendNotificationEmail] - True if send notification email\r\n */\r\n/**\r\n * @typedef SoapApi~LeadConvertResult\r\n * @prop {String} leadId - Lead record Id to convert\r\n * @prop {String} [accountId] - Account record Id of converted lead\r\n * @prop {String} [contactId] - Contact record Id of converted lead\r\n * @prop {String} [opportunityId] - Opportunity record Id created in conversion\r\n * @prop {Boolean} success - True if successfully converted\r\n * @prop {Array.<Object>} errors - Error\r\n */\r\n/**\r\n * Converts a Lead into an Account, Contact, or (optionally) an Opportunity.\r\n *\r\n * @param {SoapApi~LeadConvert|Array.<SoapApi~LeadConvert>} leadConverts\r\n * @param {Callback.<SoapApi~LeadConvertResult|Array.<SoapApi~LeadConvertResult>>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~LeadConvertResult|Array.<SoapApi~LeadConvertResult>>}\r\n */\r\nSoapApi.prototype.convertLead = function(leadConverts, callback) {\r\n  var schema = _.isArray(leadConverts) ? [ Schemas.LeadConvertResult ] : Schemas.LeadConvertResult;\r\n  return this._invoke(\"convertLead\", { leadConverts: leadConverts }, schema, callback);\r\n};\r\nSchemas.LeadConvertResult = {\r\n  success: 'boolean',\r\n  errors: [],\r\n  leadId: 'string',\r\n  accountId: 'string',\r\n  contactId: 'string',\r\n  opportunityId: 'string'\r\n};\r\n\r\n/**\r\n * @typedef SoapApi~MergeRequest\r\n * @prop {Object} masterRecord - The merge destination record\r\n * @prop {Array.<String>} recordToMergeIds - Ids of records to merge\r\n */\r\n/**\r\n * @typedef SoapApi~MergeResult\r\n * @prop {Boolean} success - True if successfully merged\r\n * @prop {Array.<Object>} errors - Error\r\n * @prop {String} id - ID of the master record\r\n * @prop {Array.<String>} mergedRecordIds - ID of the records that were merged into the master record\r\n * @prop {Array.<String>} updatedRelatedIds - ID of all related records that were moved (re-parented) as a result of the merge\r\n */\r\n\r\n/**\r\n * Merge up to three records into one\r\n *\r\n * @param {SoapApi~MergeRequest|Array.<SoapApi~MergeRequest>} mergeRequests\r\n * @param {Callback.<SoapApi~MergeResult|Array.<SoapApi~MergeResult>>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~MergeResult|Array.<SoapApi~MergeResult>>}\r\n */\r\nSoapApi.prototype.merge = function(mergeRequests, callback) {\r\n  var schema = _.isArray(mergeRequests) ? [ Schemas.MergeResult ] : Schemas.MergeResult;\r\n  return this._invoke(\"merge\", { mergeRequests: mergeRequests }, schema, callback);\r\n};\r\nSchemas.MergeResult = {\r\n  success: 'boolean',\r\n  errors: [],\r\n  id: 'string',\r\n  mergedRecordIds: ['string'],\r\n  updatedRelatedIds: ['string']\r\n};\r\n\r\n\r\n/**\r\n * @typedef SoapApi~EmptyRecycleBinResult\r\n * @prop {String} id - ID of an sObject that you attempted to delete from the Recycle Bin\r\n * @prop {Boolean} success - Whether the call succeeded (true) or not (false) for this record\r\n * @prop {Array.<Object>} errors - Errors\r\n */\r\n/**\r\n * Delete records from the recycle bin immediately\r\n *\r\n * @param {Array.<String>} ids - Record ids to empty from recycle bin\r\n * @param {Callback.<Array.<SoapApi~EmptyRecycleBinResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<SoapApi~EmptyRecycleBinResult>>}\r\n */\r\nSoapApi.prototype.emptyRecycleBin = function(ids, callback) {\r\n  return this._invoke(\"emptyRecycleBin\", { ids: ids }, [ Schemas.EmptyRecycleBinResult ], callback);\r\n};\r\nSchemas.EmptyRecycleBinResult = {\r\n  id: 'string',\r\n  success: 'boolean',\r\n  errors: []\r\n};\r\n\r\n\r\n/**\r\n * @typedef SoapApi~DescribeTabSetResult\r\n * @prop {String} label - The display label for this standard or custom app\r\n * @prop {String} logoUrl - A fully qualified URL to the logo image associated with the standard or custom app\r\n * @prop {String} namespace - Namespace of application package\r\n * @prop {Boolean} selected - If true, then this standard or custom app is the user’s currently selected app\r\n * @prop {Array.<SoapApi~DescribeTab>} tabs - An array of tabs that are displayed for the specified standard app or custom app\r\n */\r\n/**\r\n * @typedef SoapApi~DescribeTab\r\n * @prop {Array.<Object>} colors - Array of color information used for a tab\r\n * @prop {Boolean} custom - true if this is a custom tab\r\n * @prop {String} iconUrl - The URL for the main 32 x 32 pixel icon for a tab\r\n * @prop {Array.<Object>} icons - Array of icon information used for a tab\r\n * @prop {String} label - The display label for this tab\r\n * @prop {String} miniIconUrl - The URL for the 16 x 16 pixel icon that represents a tab\r\n * @prop {String} name - The API name of the tab\r\n * @prop {String} sobjectName - The name of the sObject that is primarily displayed on this tab\r\n * @prop {String} url - A fully qualified URL for viewing this tab\r\n */\r\n/**\r\n * Returns information about the standard and custom apps available to the logged-in user\r\n *\r\n * @param {Callback.<Array.<SoapApi~DescribeTabSetResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<SoapApi~DescribeTabSetResult>>}\r\n */\r\nSoapApi.prototype.describeTabs = function(callback) {\r\n  return this._invoke(\"describeTabs\", {}, [ Schemas.DescribeTabSetResult ], callback);\r\n};\r\nSchemas.DescribeTabSetResult = {\r\n  label: 'string',\r\n  logoUrl: 'string',\r\n  namespace: 'string',\r\n  selected: 'boolean',\r\n  tabs: [{\r\n    colors: [{\r\n      theme: 'string',\r\n      color: 'string',\r\n      context: 'string'\r\n    }],\r\n    iconUrl: 'string',\r\n    icons: [{\r\n      theme: 'string',\r\n      height: 'number',\r\n      width: 'number',\r\n      url: 'string',\r\n      contentType: 'string'\r\n    }],\r\n    label: 'string',\r\n    custom: 'boolean',\r\n    miniIconUrl: 'string',\r\n    name: 'string',\r\n    sobjectName: 'string',\r\n    url: 'string'\r\n  }]\r\n};\r\n\r\n/**\r\n * Retrieves the current system timestamp (Coordinated Universal Time (UTC) time zone) from the API\r\n *\r\n * @typedef SoapApi~ServerTimestampResult\r\n * @prop {String} timestamp - Timestamp\r\n */\r\n/**\r\n * @param {Callback.<SoapApi~ServerTimestampResult>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~ServerTimestampResult>}\r\n */\r\nSoapApi.prototype.getServerTimestamp = function(callback) {\r\n  return this._invoke(\"getServerTimestamp\", {}, Schemas.GetServerTimestampResult, callback);\r\n};\r\nSchemas.GetServerTimestampResult = {\r\n  timestamp: 'string'\r\n};\r\n\r\n/**\r\n * @typedef SoapApi~UserInfoResult\r\n * @prop {Boolean} accessibilityMode\r\n * @prop {String} currencySymbol\r\n * @prop {Number} orgAttachmentFileSizeLimit\r\n * @prop {String} orgDefaultCurrencyIsoCode\r\n * @prop {String} orgDisallowHtmlAttachments\r\n * @prop {Boolean} orgHasPersonAccounts\r\n * @prop {String} organizationId\r\n * @prop {Boolean} organizationMultiCurrency\r\n * @prop {String} organizationName\r\n * @prop {String} profileId\r\n * @prop {String} roleId\r\n * @prop {Number} sessionSecondsValid\r\n * @prop {String} userDefaultCurrencyIsoCode\r\n * @prop {String} userEmail\r\n * @prop {String} userFullName\r\n * @prop {String} userId\r\n * @prop {String} userLanguage\r\n * @prop {String} userLocale\r\n * @prop {String} userName\r\n * @prop {String} userTimeZone\r\n * @prop {String} userType\r\n * @prop {String} userUiSkin\r\n */\r\n/**\r\n * Retrieves personal information for the user associated with the current session\r\n *\r\n * @param {Callback.<SoapApi~UserInfoResult>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~UserInfoResult>}\r\n */\r\nSoapApi.prototype.getUserInfo = function(callback) {\r\n  return this._invoke(\"getUserInfo\", {}, Schemas.GetUserInfoResult, callback);\r\n};\r\nSchemas.GetUserInfoResult = {\r\n  accessibilityMode: 'boolean',\r\n  currencySymbol: 'string',\r\n  orgAttachmentFileSizeLimit: 'number',\r\n  orgDefaultCurrencyIsoCode: 'string',\r\n  orgDisallowHtmlAttachments: 'boolean',\r\n  orgHasPersonAccounts: 'boolean',\r\n  organizationId: 'string',\r\n  organizationMultiCurrency: 'boolean',\r\n  organizationName: 'string',\r\n  profileId: 'string',\r\n  roleId: 'string',\r\n  sessionSecondsValid: 'number',\r\n  userDefaultCurrencyIsoCode: 'string',\r\n  userEmail: 'string',\r\n  userFullName: 'string',\r\n  userId: 'string',\r\n  userLanguage: 'string',\r\n  userLocale: 'string',\r\n  userName: 'string',\r\n  userTimeZone: 'string',\r\n  userType: 'string',\r\n  userUiSkin: 'string'\r\n};\r\n\r\n/**\r\n * Sets the specified user’s password to the specified value\r\n *\r\n * @param {String} userId - User Id to set password\r\n * @param {String} password - New password\r\n * @param {Callback.<String>} [callback] - Callback function\r\n * @returns {Promise.<String>}\r\n */\r\nSoapApi.prototype.setPassword = function(userId, password, callback) {\r\n  return this._invoke(\"setPassword\", { userId: userId, password: password }, callback);\r\n};\r\n\r\n/**\r\n * @typedef SoapApi~ResetPasswordResult\r\n * @prop {String} password\r\n */\r\n/**\r\n * Resets the specified user’s password\r\n *\r\n * @param {String} userId - User Id to set password\r\n * @param {String} password - New password\r\n * @param {Callback.<SoapApi~ResetPasswordResult>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~ResetPasswordResult>}\r\n */\r\nSoapApi.prototype.resetPassword = function(userId, callback) {\r\n  return this._invoke(\"resetPassword\", { userId: userId }, callback);\r\n};\r\n\r\n/**\r\n * Adds one or more new records to your organization’s data\r\n *\r\n * @param {Array.<Object>} sObjects - Records to insert\r\n * @param {Callback.<SoapApi~SaveResult>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~SaveResult>}\r\n */\r\nSoapApi.prototype.create = function(sObjects, callback) {\r\n  var schema = _.isArray(sObjects) ? [ Schemas.SaveResult ] : Schemas.SaveResult;\r\n  var args = {\r\n    '@xmlns' : 'urn:partner.soap.sforce.com',\r\n    '@xmlns:ns1' : 'sobject.partner.soap.sforce.com',\r\n    'ns1:sObjects' : sObjects\r\n  };\r\n  return this._invoke(\"create\", args, schema, callback);\r\n};\r\n\r\n/**\r\n * Updates one or more existing records in your organization’s data.\r\n *\r\n * @param {Array.<Object>} sObjects - Records to update\r\n * @param {Callback.<SoapApi~SaveResult>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~SaveResult>}\r\n */\r\nSoapApi.prototype.update = function(sObjects, callback) {\r\n  var schema = _.isArray(sObjects) ? [ Schemas.SaveResult ] : Schemas.SaveResult;\r\n  var args = {\r\n    '@xmlns' : 'urn:partner.soap.sforce.com',\r\n    '@xmlns:ns1' : 'sobject.partner.soap.sforce.com',\r\n    'ns1:sObjects' : sObjects\r\n  };\r\n  return this._invoke(\"update\", args, schema, callback);\r\n};\r\n\r\nSchemas.SaveResult = {\r\n  success: 'boolean',\r\n  errors: [],\r\n  id: 'string'\r\n};\r\n\r\n/**\r\n * Creates new records and updates existing records in your organization’s data.\r\n *\r\n * @param {Array.<Object>} sObjects - Records to upsert\r\n * @param {Callback.<SoapApi~UpsertResult>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~UpsertResult>}\r\n */\r\nSoapApi.prototype.upsert = function(externalIdFieldName, sObjects, callback) {\r\n  var schema = _.isArray(sObjects) ? [ Schemas.UpsertResult ] : Schemas.UpsertResult;\r\n  var args = {\r\n    '@xmlns' : 'urn:partner.soap.sforce.com',\r\n    '@xmlns:ns1' : 'sobject.partner.soap.sforce.com',\r\n    'ns1:externalIDFieldName' : externalIdFieldName,\r\n    'ns1:sObjects' : sObjects\r\n  };\r\n  return this._invoke(\"upsert\", args, schema, callback);\r\n};\r\n\r\nSchemas.UpsertResult = {\r\n  created: 'boolean',\r\n  success: 'boolean',\r\n  errors: [],\r\n  id: 'string'\r\n};\r\n\r\n/**\r\n * Deletes one or more records from your organization’s data\r\n *\r\n * @param {Array.<Object>} ids - Id of records to delete\r\n * @param {Callback.<SoapApi~DeleteResult>} [callback] - Callback function\r\n * @returns {Promise.<SoapApi~DeleteResult>}\r\n */\r\nSoapApi.prototype.delete = function(ids, callback) {\r\n  var schema = _.isArray(ids) ? [ Schemas.DeleteResult ] : Schemas.DeleteResult;\r\n  var args = {\r\n    '@xmlns' : 'urn:partner.soap.sforce.com',\r\n    '@xmlns:ns1' : 'sobject.partner.soap.sforce.com',\r\n    'ns1:ids' : ids\r\n  };\r\n  return this._invoke(\"delete\", args, schema, callback);\r\n};\r\n\r\nSchemas.DeleteResult = {\r\n  success: 'boolean',\r\n  errors: [],\r\n  id: 'string'\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n/*\r\n * Register hook in connection instantiation for dynamically adding this API module features\r\n */\r\njsforce.on('connection:new', function(conn) {\r\n  conn.soap = new SoapApi(conn);\r\n});\r\n\r\n\r\nmodule.exports = SoapApi;\r\n\r\n},{\"../core\":20,\"../soap\":33,\"lodash/core\":88}],11:[function(require,module,exports){\r\n/**\r\n * Faye Client extensions: https://faye.jcoglan.com/browser/extensions.html\r\n *\r\n * For use with Streaming.prototype.createClient()\r\n**/\r\nvar StreamingExtension = {};\r\n\r\n/**\r\n * Constructor for an auth failure detector extension\r\n *\r\n * Based on new feature released with Salesforce Spring '18:\r\n * https://releasenotes.docs.salesforce.com/en-us/spring18/release-notes/rn_messaging_cometd_auth_validation.htm?edition=&impact=\r\n *\r\n * Example triggering error message:\r\n *\r\n * ```\r\n * {\r\n *   \"ext\":{\r\n *     \"sfdc\":{\"failureReason\":\"401::Authentication invalid\"},\r\n *     \"replay\":true},\r\n *   \"advice\":{\"reconnect\":\"none\"},\r\n *   \"channel\":\"/meta/handshake\",\r\n *   \"error\":\"403::Handshake denied\",\r\n *   \"successful\":false\r\n * }\r\n * ```\r\n *\r\n * Example usage:\r\n *\r\n * ```javascript\r\n * const conn = new jsforce.Connection({ … });\r\n * \r\n * const channel = \"/event/My_Event__e\";\r\n * \r\n * // Exit the Node process when auth fails\r\n * const exitCallback = () => process.exit(1);\r\n * const authFailureExt = new jsforce.StreamingExtension.AuthFailure(exitCallback);\r\n * \r\n * const fayeClient = conn.streaming.createClient([ authFailureExt ]);\r\n * \r\n * const subscription = fayeClient.subscribe(channel, data => {\r\n *   console.log('topic received data', data);\r\n * });\r\n * \r\n * subscription.cancel();\r\n * ```\r\n *\r\n * @param {Function} failureCallback - Invoked when authentication becomes invalid\r\n */\r\nStreamingExtension.AuthFailure = function(failureCallback) {\r\n  this.incoming = function(message, callback) {\r\n    if (\r\n      (message.channel === '/meta/connect' ||\r\n        message.channel === '/meta/handshake')\r\n      && message.advice\r\n      && message.advice.reconnect == 'none'\r\n    ) {\r\n      failureCallback(message);\r\n    } else {\r\n      callback(message);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Constructor for a durable streaming replay extension\r\n *\r\n * Modified from original Salesforce demo source code:\r\n * https://github.com/developerforce/SalesforceDurableStreamingDemo/blob/3d4a56eac956f744ad6c22e6a8141b6feb57abb9/staticresources/cometdReplayExtension.resource\r\n * \r\n * Example usage:\r\n *\r\n * ```javascript\r\n * const conn = new jsforce.Connection({ … });\r\n * \r\n * const channel = \"/event/My_Event__e\";\r\n * const replayId = -2; // -2 is all retained events\r\n * \r\n * const replayExt = new jsforce.StreamingExtension.Replay(channel, replayId);\r\n * \r\n * const fayeClient = conn.streaming.createClient([ replayExt ]);\r\n * \r\n * const subscription = fayeClient.subscribe(channel, data => {\r\n *   console.log('topic received data', data);\r\n * });\r\n * \r\n * subscription.cancel();\r\n * ```\r\n */\r\nStreamingExtension.Replay = function(channel, replayId) {\r\n  var REPLAY_FROM_KEY = \"replay\";\r\n  \r\n  var _extensionEnabled = replayId != null ? true : false;\r\n  var _replay = replayId;\r\n  var _channel = channel;\r\n\r\n  this.setExtensionEnabled = function(extensionEnabled) {\r\n    _extensionEnabled = extensionEnabled;\r\n  }\r\n\r\n  this.setReplay = function (replay) {\r\n    _replay = parseInt(replay, 10);\r\n  }\r\n\r\n  this.setChannel = function(channel) {\r\n    _channel = channel;\r\n  }\r\n\r\n  this.incoming = function(message, callback) {\r\n    if (message.channel === '/meta/handshake') {\r\n      if (message.ext && message.ext[REPLAY_FROM_KEY] == true) {\r\n        _extensionEnabled = true;\r\n      }\r\n    } else if (message.channel === _channel && message.data && message.data.event && message.data.event.replayId) {\r\n      _replay = message.data.event.replayId;\r\n    }\r\n    callback(message);\r\n  }\r\n  \r\n  this.outgoing = function(message, callback) {\r\n    if (message.channel === '/meta/subscribe') {\r\n      if (_extensionEnabled) {\r\n        if (!message.ext) { message.ext = {}; }\r\n\r\n        var replayFromMap = {};\r\n        replayFromMap[_channel] = _replay;\r\n\r\n        // add \"ext : { \"replay\" : { CHANNEL : REPLAY_VALUE }}\" to subscribe message\r\n        message.ext[REPLAY_FROM_KEY] = replayFromMap;\r\n      }\r\n    }\r\n    callback(message);\r\n  };\r\n};\r\n\r\nmodule.exports = StreamingExtension;\r\n\r\n},{}],12:[function(require,module,exports){\r\n/**\r\n * @file Manages Streaming APIs\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar events = require('events'),\r\n    inherits = require('inherits'),\r\n    _ = require('lodash/core'),\r\n    Faye   = require('faye'),\r\n    StreamingExtension = require('./streaming-extension'),\r\n    jsforce = require('../core');\r\n\r\n/**\r\n * Streaming API topic class\r\n *\r\n * @class Streaming~Topic\r\n * @param {Streaming} steaming - Streaming API object\r\n * @param {String} name - Topic name\r\n */\r\nvar Topic = function(streaming, name) {\r\n  this._streaming = streaming;\r\n  this.name = name;\r\n};\r\n\r\n/**\r\n * @typedef {Object} Streaming~StreamingMessage\r\n * @prop {Object} event\r\n * @prop {Object} event.type - Event type\r\n * @prop {Record} sobject - Record information\r\n */\r\n/**\r\n * Subscribe listener to topic\r\n *\r\n * @method Streaming~Topic#subscribe\r\n * @param {Callback.<Streaming~StreamingMesasge>} listener - Streaming message listener\r\n * @returns {Subscription} - Faye subscription object\r\n */\r\nTopic.prototype.subscribe = function(listener) {\r\n  return this._streaming.subscribe(this.name, listener);\r\n};\r\n\r\n/**\r\n * Unsubscribe listener from topic\r\n *\r\n * @method Streaming~Topic#unsubscribe\r\n * @param {Callback.<Streaming~StreamingMesasge>} listener - Streaming message listener\r\n * @returns {Streaming~Topic}\r\n */\r\nTopic.prototype.unsubscribe = function(listener) {\r\n  this._streaming.unsubscribe(this.name, listener);\r\n  return this;\r\n};\r\n\r\n/*--------------------------------------------*/\r\n\r\n/**\r\n * Streaming API Generic Streaming Channel\r\n *\r\n * @class Streaming~Channel\r\n * @param {Streaming} steaming - Streaming API object\r\n * @param {String} name - Channel name (starts with \"/u/\")\r\n */\r\nvar Channel = function(streaming, name) {\r\n  this._streaming = streaming;\r\n  this._name = name;\r\n};\r\n\r\n/**\r\n * Subscribe to channel\r\n *\r\n * @param {Callback.<Streaming~StreamingMessage>} listener - Streaming message listener\r\n * @returns {Subscription} - Faye subscription object\r\n */\r\nChannel.prototype.subscribe = function(listener) {\r\n  return this._streaming.subscribe(this._name, listener);\r\n};\r\n\r\nChannel.prototype.unsubscribe = function(listener) {\r\n  this._streaming.unsubscribe(this._name, listener);\r\n  return this;\r\n};\r\n\r\nChannel.prototype.push = function(events, callback) {\r\n  var isArray = _.isArray(events);\r\n  events = isArray ? events : [ events ];\r\n  var conn = this._streaming._conn;\r\n  if (!this._id) {\r\n    this._id = conn.sobject('StreamingChannel').findOne({ Name: this._name }, 'Id')\r\n      .then(function(rec) { return rec.Id });\r\n  }\r\n  return this._id.then(function(id) {\r\n    var channelUrl = '/sobjects/StreamingChannel/' + id + '/push';\r\n    return conn.requestPost(channelUrl, { pushEvents: events });\r\n  }).then(function(rets) {\r\n    return isArray ? rets : rets[0];\r\n  }).thenCall(callback);\r\n};\r\n\r\n/*--------------------------------------------*/\r\n\r\n/**\r\n * Streaming API class\r\n *\r\n * @class\r\n * @extends events.EventEmitter\r\n * @param {Connection} conn - Connection object\r\n */\r\nvar Streaming = function(conn) {\r\n  this._conn = conn;\r\n};\r\n\r\ninherits(Streaming, events.EventEmitter);\r\n\r\n/** @private **/\r\nStreaming.prototype._createClient = function(forChannelName, extensions) {\r\n  // forChannelName is advisory, for an API workaround. It does not restrict or select the channel.\r\n  var needsReplayFix = typeof forChannelName === 'string' && forChannelName.indexOf('/u/') === 0;\r\n  var endpointUrl = [\r\n    this._conn.instanceUrl,\r\n    // special endpoint \"/cometd/replay/xx.x\" is only available in 36.0.\r\n    // See https://releasenotes.docs.salesforce.com/en-us/summer16/release-notes/rn_api_streaming_classic_replay.htm\r\n    \"cometd\" + (needsReplayFix === true && this._conn.version === \"36.0\" ? \"/replay\" : \"\"),\r\n    this._conn.version\r\n  ].join('/');\r\n  var fayeClient = new Faye.Client(endpointUrl, {});\r\n  fayeClient.setHeader('Authorization', 'OAuth '+this._conn.accessToken);\r\n  if (extensions instanceof Array) {\r\n    extensions.forEach(function(extension) {\r\n      fayeClient.addExtension(extension);\r\n    });\r\n  }\r\n  if (fayeClient._dispatcher.getConnectionTypes().indexOf('callback-polling') === -1) {\r\n    // prevent streaming API server error\r\n    fayeClient._dispatcher.selectTransport('long-polling');\r\n    fayeClient._dispatcher._transport.batching = false;\r\n  }\r\n  return fayeClient;\r\n};\r\n\r\n/** @private **/\r\nStreaming.prototype._getFayeClient = function(channelName) {\r\n  var isGeneric = channelName.indexOf('/u/') === 0;\r\n  var clientType = isGeneric ? 'generic' : 'pushTopic';\r\n  if (!this._fayeClients || !this._fayeClients[clientType]) {\r\n    this._fayeClients = this._fayeClients || {};\r\n    this._fayeClients[clientType] = this._createClient(channelName);\r\n  }\r\n  return this._fayeClients[clientType];\r\n};\r\n\r\n\r\n/**\r\n * Get named topic\r\n *\r\n * @param {String} name - Topic name\r\n * @returns {Streaming~Topic}\r\n */\r\nStreaming.prototype.topic = function(name) {\r\n  this._topics = this._topics || {};\r\n  var topic = this._topics[name] =\r\n    this._topics[name] || new Topic(this, name);\r\n  return topic;\r\n};\r\n\r\n/**\r\n * Get Channel for Id\r\n * @param {String} channelId - Id of StreamingChannel object\r\n * @returns {Streaming~Channel}\r\n */\r\nStreaming.prototype.channel = function(channelId) {\r\n  return new Channel(this, channelId);\r\n};\r\n\r\n/**\r\n * Subscribe topic/channel\r\n *\r\n * @param {String} name - Topic name\r\n * @param {Callback.<Streaming~StreamingMessage>} listener - Streaming message listener\r\n * @returns {Subscription} - Faye subscription object\r\n */\r\nStreaming.prototype.subscribe = function(name, listener) {\r\n  var channelName = name.indexOf('/') === 0 ? name : '/topic/' + name;\r\n  var fayeClient = this._getFayeClient(channelName);\r\n  return fayeClient.subscribe(channelName, listener);\r\n};\r\n\r\n/**\r\n * Unsubscribe topic\r\n *\r\n * @param {String} name - Topic name\r\n * @param {Callback.<Streaming~StreamingMessage>} listener - Streaming message listener\r\n * @returns {Streaming}\r\n */\r\nStreaming.prototype.unsubscribe = function(name, listener) {\r\n  var channelName = name.indexOf('/') === 0 ? name : '/topic/' + name;\r\n  var fayeClient = this._getFayeClient(channelName);\r\n  fayeClient.unsubscribe(channelName, listener);\r\n  return this;\r\n};\r\n\r\n\r\n/**\r\n * Create a Streaming client, optionally with extensions\r\n *\r\n * See Faye docs for implementation details: https://faye.jcoglan.com/browser/extensions.html\r\n *\r\n * Example usage:\r\n * \r\n * ```javascript\r\n * // Establish a Salesforce connection. (Details elided)\r\n * const conn = new jsforce.Connection({ … });\r\n * \r\n * const fayeClient = conn.streaming.createClient();\r\n * \r\n * const subscription = fayeClient.subscribe(channel, data => {\r\n *   console.log('topic received data', data);\r\n * });\r\n * \r\n * subscription.cancel();\r\n * ```\r\n * \r\n * Example with extensions, using Replay & Auth Failure extensions in a server-side Node.js app:\r\n * \r\n * ```javascript\r\n * // Establish a Salesforce connection. (Details elided)\r\n * const conn = new jsforce.Connection({ … });\r\n * \r\n * const channel = \"/event/My_Event__e\";\r\n * const replayId = -2; // -2 is all retained events\r\n * \r\n * const exitCallback = () => process.exit(1);\r\n * const authFailureExt = new jsforce.StreamingExtension.AuthFailure(exitCallback);\r\n * \r\n * const replayExt = new jsforce.StreamingExtension.Replay(channel, replayId);\r\n * \r\n * const fayeClient = conn.streaming.createClient([\r\n *   authFailureExt,\r\n *   replayExt\r\n * ]);\r\n * \r\n * const subscription = fayeClient.subscribe(channel, data => {\r\n *   console.log('topic received data', data);\r\n * });\r\n * \r\n * subscription.cancel();\r\n * ```\r\n * \r\n * @param {Array} Extensions - Optional, extensions to apply to the Faye client\r\n * @returns {FayeClient} - Faye client object\r\n */\r\nStreaming.prototype.createClient = function(extensions) {\r\n  return this._createClient(null, extensions);\r\n};\r\n\r\n/*--------------------------------------------*/\r\n/*\r\n * Register hook in connection instantiation for dynamically adding this API module features\r\n */\r\njsforce.on('connection:new', function(conn) {\r\n  conn.streaming = new Streaming(conn);\r\n});\r\n\r\n/*\r\n * \r\n */\r\njsforce.StreamingExtension = StreamingExtension;\r\n\r\nmodule.exports = Streaming;\r\n\r\n},{\"../core\":20,\"./streaming-extension\":11,\"events\":47,\"faye\":48,\"inherits\":84,\"lodash/core\":88}],13:[function(require,module,exports){\r\n/**\r\n * @file Manages Tooling APIs\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar jsforce = require('../core'),\r\n    _     = require('lodash/core'),\r\n    Cache = require('../cache');\r\n\r\n/**\r\n * API class for Tooling API call\r\n *\r\n * @class\r\n * @param {Connection} conn - Connection\r\n */\r\nvar Tooling = function(conn) {\r\n  this._conn = conn;\r\n  this._logger = conn._logger;\r\n  var delegates = [\r\n    \"query\",\r\n    \"queryMore\",\r\n    \"create\",\r\n    \"insert\",\r\n    \"retrieve\",\r\n    \"update\",\r\n    \"upsert\",\r\n    \"del\",\r\n    \"delete\",\r\n    \"destroy\",\r\n    \"describe\",\r\n    \"describeGlobal\",\r\n    \"sobject\"\r\n  ];\r\n  delegates.forEach(function(method) {\r\n    this[method] = conn.constructor.prototype[method];\r\n  }, this);\r\n\r\n  this.cache = new Cache();\r\n\r\n  var cacheOptions = {\r\n    key: function(type) { return type ? \"describe.\" + type : \"describe\"; }\r\n  };\r\n  this.describe$ = this.cache.makeCacheable(this.describe, this, cacheOptions);\r\n  this.describe = this.cache.makeResponseCacheable(this.describe, this, cacheOptions);\r\n  this.describeSObject$ = this.describe$;\r\n  this.describeSObject = this.describe;\r\n\r\n  cacheOptions = { key: 'describeGlobal' };\r\n  this.describeGlobal$ = this.cache.makeCacheable(this.describeGlobal, this, cacheOptions);\r\n  this.describeGlobal = this.cache.makeResponseCacheable(this.describeGlobal, this, cacheOptions);\r\n\r\n  this.initialize();\r\n};\r\n\r\n/**\r\n * Initialize tooling API\r\n * @protected\r\n */\r\nTooling.prototype.initialize = function() {\r\n  this.sobjects = {};\r\n  this.cache.clear();\r\n  this.cache.get('describeGlobal').removeAllListeners('value');\r\n  this.cache.get('describeGlobal').on('value', _.bind(function(res) {\r\n    if (res.result) {\r\n      var types = _.map(res.result.sobjects, function(so) { return so.name; });\r\n      types.forEach(this.sobject, this);\r\n    }\r\n  }, this));\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nTooling.prototype._baseUrl = function() {\r\n  return this._conn._baseUrl() + \"/tooling\";\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nTooling.prototype.request = function() {\r\n  return this._conn.request.apply(this._conn, arguments);\r\n};\r\n\r\n/**\r\n * Execute query by using SOQL\r\n *\r\n * @param {String} soql - SOQL string\r\n * @param {Callback.<QueryResult>} [callback] - Callback function\r\n * @returns {Query.<QueryResult>}\r\n */\r\n/**\r\n * Query next record set by using query locator\r\n *\r\n * @method Tooling#query\r\n * @param {String} locator - Next record set locator\r\n * @param {Callback.<QueryResult>} [callback] - Callback function\r\n * @returns {Query.<QueryResult>}\r\n */\r\n/**\r\n * Retrieve specified records\r\n *\r\n * @method Tooling#queryMore\r\n * @param {String} type - SObject Type\r\n * @param {String|Array.<String>} ids - A record ID or array of record IDs\r\n * @param {Callback.<Record|Array.<Record>>} [callback] - Callback function\r\n * @returns {Promise.<Record|Array.<Record>>}\r\n */\r\n\r\n/**\r\n * Synonym of Tooling#create()\r\n *\r\n * @method Tooling#insert\r\n * @param {String} type - SObject Type\r\n * @param {Object|Array.<Object>} records - A record or array of records to create\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Create records\r\n *\r\n * @method Tooling#create\r\n * @param {String} type - SObject Type\r\n * @param {Record|Array.<Record>} records - A record or array of records to create\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n\r\n/**\r\n * Update records\r\n *\r\n * @method Tooling#update\r\n * @param {String} type - SObject Type\r\n * @param {Record|Array.<Record>} records - A record or array of records to update\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n\r\n/**\r\n * Upsert records\r\n *\r\n * @method Tooling#upsert\r\n * @param {String} type - SObject Type\r\n * @param {Record|Array.<Record>} records - Record or array of records to upsert\r\n * @param {String} extIdField - External ID field name\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n\r\n/**\r\n * Synonym of Tooling#destroy()\r\n *\r\n * @method Tooling#delete\r\n * @param {String} type - SObject Type\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Synonym of Tooling#destroy()\r\n *\r\n * @method Tooling#del\r\n * @param {String} type - SObject Type\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Delete records\r\n *\r\n * @method Tooling#destroy\r\n * @param {String} type - SObject Type\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n\r\n/**\r\n * Synonym of Tooling#describe()\r\n *\r\n * @method Tooling#describeSObject\r\n * @param {String} type - SObject Type\r\n * @param {Callback.<DescribeSObjectResult>} [callback] - Callback function\r\n * @returns {Promise.<DescribeSObjectResult>}\r\n */\r\n/**\r\n * Describe SObject metadata\r\n *\r\n * @method Tooling#describe\r\n * @param {String} type - SObject Type\r\n * @param {Callback.<DescribeSObjectResult>} [callback] - Callback function\r\n * @returns {Promise.<DescribeSObjectResult>}\r\n */\r\n\r\n/**\r\n * Describe global SObjects\r\n *\r\n * @method Tooling#describeGlobal\r\n * @param {Callback.<DescribeGlobalResult>} [callback] - Callback function\r\n * @returns {Promise.<DescribeGlobalResult>}\r\n */\r\n\r\n/**\r\n * Get SObject instance\r\n *\r\n * @method Tooling#sobject\r\n * @param {String} type - SObject Type\r\n * @returns {SObject}\r\n */\r\n\r\n/**\r\n * @typedef {Object} Tooling~ExecuteAnonymousResult\r\n * @prop {Boolean} compiled - Flag if the query is compiled successfully\r\n * @prop {String} compileProblem - Error reason in compilation\r\n * @prop {Boolean} success - Flag if the code is executed successfully\r\n * @prop {Number} line - Line number for the error\r\n * @prop {Number} column - Column number for the error\r\n * @prop {String} exceptionMessage - Exception message\r\n * @prop {String} exceptionStackTrace - Exception stack trace\r\n */\r\n/**\r\n * Executes Apex code anonymously\r\n *\r\n * @param {String} body - Anonymous Apex code\r\n * @param {Callback.<Tooling~ExecuteAnonymousResult>} [callback] - Callback function\r\n * @returns {Promise.<Tooling~ExecuteAnonymousResult>}\r\n */\r\nTooling.prototype.executeAnonymous = function(body, callback) {\r\n  var url = this._baseUrl() + \"/executeAnonymous?anonymousBody=\" + encodeURIComponent(body);\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Executes Apex tests asynchronously\r\n *\r\n * @param {Array.<String>} classids - Comma separated list of class IDs\r\n * @param {Callback.<Tooling~ExecuteAnonymousResult>} [callback] - Callback function\r\n * @returns {Promise.<Tooling~ExecuteAnonymousResult>}\r\n */\r\nTooling.prototype.runTestsAsynchronous = function(classids, callback) {\r\n  var url = this._baseUrl() + \"/runTestsAsynchronous/\";\r\n  return this._conn.requestPost(url, {classids : classids.join(',')}, undefined, callback);\r\n};\r\n\r\n/**\r\n * Executes Apex tests synchronously\r\n *\r\n * @param {Array.<String>} classnames - Comma separated list of class Names\r\n * @param {Callback.<Tooling~ExecuteAnonymousResult>} [callback] - Callback function\r\n * @returns {Promise.<Tooling~ExecuteAnonymousResult>}\r\n */\r\nTooling.prototype.runTestsSynchronous = function(classnames, callback) {\r\n  var url = this._baseUrl() + \"/runTestsSynchronous/\";\r\n  return this._conn.requestPost(url, {classnames : classnames.join(',')}, undefined, callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Tooling~CompletionsResult\r\n * @prop {Object} publicDeclarations\r\n */\r\n/**\r\n * Retrieves available code completions of the referenced type\r\n *\r\n * @param {String} [type] - completion type (default 'apex')\r\n * @param {Callback.<Tooling~CompletionsResult>} [callback] - Callback function\r\n * @returns {Promise.<Tooling~CompletionsResult>}\r\n */\r\nTooling.prototype.completions = function(type, callback) {\r\n  if (!_.isString(type)) {\r\n    callback = type;\r\n    type = 'apex';\r\n  }\r\n  var url = this._baseUrl() + \"/completions?type=\" + encodeURIComponent(type);\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n\r\n/*--------------------------------------------*/\r\n/*\r\n * Register hook in connection instantiation for dynamically adding this API module features\r\n */\r\njsforce.on('connection:new', function(conn) {\r\n  conn.tooling = new Tooling(conn);\r\n});\r\n\r\n\r\nmodule.exports = Tooling;\r\n\r\n},{\"../cache\":18,\"../core\":20,\"lodash/core\":88}],14:[function(require,module,exports){\r\n/*global Sfdc */\r\n'use strict';\r\n\r\nvar Duplex = require('readable-stream').Duplex,\r\n    _ = require('lodash/core');\r\n\r\nfunction parseHeaders(hs) {\r\n  var headers = {};\r\n  hs.split(/\\n/).forEach(function(line) {\r\n    var pair = line.split(/\\s*:\\s*/);\r\n    var name = pair[0].toLowerCase();\r\n    var value = pair[1];\r\n    headers[name] = value;\r\n  });\r\n  return headers;\r\n}\r\n\r\nmodule.exports = {\r\n\r\n  supported: typeof Sfdc === 'object' && typeof Sfdc.canvas !== 'undefined',\r\n\r\n  createRequest: function(signedRequest) {\r\n    return function(params, callback) {\r\n      var response;\r\n      var str = new Duplex();\r\n      str._read = function(size) {\r\n        if (response) {\r\n          str.push(response.body);\r\n        }\r\n      };\r\n      var bufs = [];\r\n      var sent = false;\r\n      str._write = function(chunk, encoding, callback) {\r\n        bufs.push(chunk.toString(encoding));\r\n        callback();\r\n      };\r\n      str.on('finish', function() {\r\n        if (!sent) {\r\n          send(bufs.join(''));\r\n          sent = true;\r\n        }\r\n      });\r\n      if (params.body || params.body === \"\" || !/^(put|post|patch)$/i.test(params.method)) {\r\n        send(params.body);\r\n        sent = true;\r\n      }\r\n\r\n      function send(body) {\r\n        var settings = {\r\n          client: signedRequest.client,\r\n          method: params.method,\r\n          data: body\r\n        };\r\n        if (params.headers) {\r\n          settings.headers = {};\r\n          for (var name in params.headers) {\r\n            if (name.toLowerCase() === 'content-type') {\r\n              settings.contentType = params.headers[name];\r\n            } else {\r\n              settings.headers[name] = params.headers[name];\r\n            }\r\n          }\r\n        }\r\n        settings.success = function(data) {\r\n          var headers = parseHeaders(data.responseHeaders);\r\n          var body = data.payload;\r\n          if (!_.isString(body)) {\r\n            body = JSON.stringify(body);\r\n          }\r\n          response = {\r\n            statusCode : data.status,\r\n            headers: headers,\r\n            body: body\r\n          };\r\n          if (callback) {\r\n            callback(null, response, response.body);\r\n          }\r\n          str.end();\r\n        };\r\n        settings.failure = function(err) {\r\n          if (callback) {\r\n            callback(err);\r\n          }\r\n        };\r\n        Sfdc.canvas.client.ajax(params.url, settings);\r\n      }\r\n      return str;\r\n    };\r\n  }\r\n};\r\n\r\n},{\"lodash/core\":88,\"readable-stream\":107}],15:[function(require,module,exports){\r\n/**\r\n * @file Browser client connection management class\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar events = require('events'),\r\n    inherits = require('inherits'),\r\n    qs = require('querystring'),\r\n    _ = require('lodash/core'),\r\n    Connection = require('../connection'),\r\n    OAuth2 = require('../oauth2');\r\n\r\n/**\r\n * @private\r\n */\r\nfunction popupWin(url, w, h) {\r\n  var left = (screen.width/2)-(w/2);\r\n  var top = (screen.height/2)-(h/2);\r\n  return window.open(url, null, 'location=yes,toolbar=no,status=no,menubar=no,width='+w+',height='+h+',top='+top+',left='+left);\r\n}\r\n\r\nfunction handleCallbackResponse() {\r\n  var res = checkCallbackResponse();\r\n  var state = localStorage.getItem('jsforce_state');\r\n  if (res && state && res.body.state === state) {\r\n    localStorage.removeItem('jsforce_state');\r\n    var states = state.split('.');\r\n    var prefix = states[0], promptType = states[1];\r\n    var cli = new Client(prefix);\r\n    if (res.success) {\r\n      cli._storeTokens(res.body);\r\n      location.hash = '';\r\n    } else {\r\n      cli._storeError(res.body);\r\n    }\r\n    if (promptType === 'popup') { window.close(); }\r\n    return true;\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nfunction checkCallbackResponse() {\r\n  var params;\r\n  if (window.location.hash) {\r\n    params = qs.parse(window.location.hash.substring(1));\r\n    if (params.access_token) {\r\n      return { success: true, body: params };\r\n    }\r\n  } else if (window.location.search) {\r\n    params = qs.parse(window.location.search.substring(1));\r\n    if (params.error) {\r\n      return { success: false, body: params };\r\n    }\r\n  }\r\n}\r\n\r\n/** @private **/\r\nvar clientIdx = 0;\r\n\r\n\r\n/**\r\n * @class\r\n * @todo add document\r\n */\r\nvar Client = function(prefix) {\r\n  this._prefix = prefix || 'jsforce' + clientIdx++;\r\n  this.connection = null;\r\n};\r\n\r\ninherits(Client, events.EventEmitter);\r\n\r\n/**\r\n *\r\n */\r\nClient.prototype.init = function(config) {\r\n  if (handleCallbackResponse()) { return; }\r\n  this.config = config;\r\n  this.connection = new Connection(config);\r\n  var tokens = this._getTokens();\r\n  if (tokens) {\r\n    this.connection.initialize(tokens);\r\n    var self = this;\r\n    setTimeout(function() {\r\n      self.emit('connect', self.connection);\r\n    }, 10);\r\n  }\r\n};\r\n\r\n/**\r\n *\r\n */\r\nClient.prototype.login = function(options, callback) {\r\n  if (_.isFunction(options)) {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  callback = callback || function(){ };\r\n  _.extend(options, this.config);\r\n  var self = this;\r\n  this._prompt(options, callback);\r\n};\r\n\r\n\r\nClient.prototype._prompt = function(options, callback) {\r\n  var self = this;\r\n  var oauth2 = new OAuth2(options);\r\n  var rand = Math.random().toString(36).substring(2);\r\n  var state = [ this._prefix, \"popup\", rand ].join('.');\r\n  localStorage.setItem(\"jsforce_state\", state);\r\n  var authzUrl = oauth2.getAuthorizationUrl({\r\n    response_type: 'token',\r\n    scope : options.scope,\r\n    state: state\r\n  });\r\n  var size = options.size || {};\r\n  var pw = popupWin(authzUrl, size.width || 912, size.height || 513);\r\n  if (!pw) {\r\n    state = [ this._prefix, \"redirect\", rand ].join('.');\r\n    localStorage.setItem(\"jsforce_state\", state);\r\n    authzUrl = oauth2.getAuthorizationUrl({\r\n      response_type: 'token',\r\n      scope : options.scope,\r\n      state: state\r\n    });\r\n    location.href = authzUrl;\r\n    return;\r\n  }\r\n  self._removeTokens();\r\n  var pid = setInterval(function() {\r\n    try {\r\n      if (!pw || pw.closed) {\r\n        clearInterval(pid);\r\n        var tokens = self._getTokens();\r\n        if (tokens) {\r\n          self.connection.initialize(tokens);\r\n          self.emit('connect', self.connection);\r\n          callback(null, { status: 'connect' });\r\n        } else {\r\n          var err = self._getError();\r\n          if (err) {\r\n            callback(new Error(err.error + \": \" + err.error_description));\r\n          } else {\r\n            callback(null, { status: 'cancel' });\r\n          }\r\n        }\r\n      }\r\n    } catch(e) {}\r\n  }, 1000);\r\n};\r\n\r\n/**\r\n *\r\n */\r\nClient.prototype.isLoggedIn = function() {\r\n  return !!(this.connection && this.connection.accessToken);\r\n};\r\n\r\n/**\r\n *\r\n */\r\nClient.prototype.logout = function() {\r\n  this.connection.logout();\r\n  this._removeTokens();\r\n  this.emit('disconnect');\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nClient.prototype._getTokens = function() {\r\n  var regexp = new RegExp(\"(^|;\\\\s*)\"+this._prefix+\"_loggedin=true(;|$)\");\r\n  if (document.cookie.match(regexp)) {\r\n    var issuedAt = Number(localStorage.getItem(this._prefix+'_issued_at'));\r\n    if (Date.now() < issuedAt + 2 * 60 * 60 * 1000) { // 2 hours\r\n      var userInfo;\r\n      var idUrl = localStorage.getItem(this._prefix + '_id');\r\n      if (idUrl) {\r\n        var ids = idUrl.split('/');\r\n        userInfo = { id: ids.pop(), organizationId: ids.pop(), url: idUrl };\r\n      }\r\n      return {\r\n        accessToken: localStorage.getItem(this._prefix + '_access_token'),\r\n        instanceUrl: localStorage.getItem(this._prefix + '_instance_url'),\r\n        userInfo: userInfo\r\n      };\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nClient.prototype._storeTokens = function(params) {\r\n  localStorage.setItem(this._prefix + '_access_token', params.access_token);\r\n  localStorage.setItem(this._prefix + '_instance_url', params.instance_url);\r\n  localStorage.setItem(this._prefix + '_issued_at', params.issued_at);\r\n  localStorage.setItem(this._prefix + '_id', params.id);\r\n  document.cookie = this._prefix + '_loggedin=true;';\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nClient.prototype._removeTokens = function() {\r\n  localStorage.removeItem(this._prefix + '_access_token');\r\n  localStorage.removeItem(this._prefix + '_instance_url');\r\n  localStorage.removeItem(this._prefix + '_issued_at');\r\n  localStorage.removeItem(this._prefix + '_id');\r\n  document.cookie = this._prefix + '_loggedin=';\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nClient.prototype._getError = function() {\r\n  try {\r\n    var err = JSON.parse(localStorage.getItem(this._prefix + '_error'));\r\n    localStorage.removeItem(this._prefix + '_error');\r\n    return err;\r\n  } catch(e) {}\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nClient.prototype._storeError = function(err) {\r\n  localStorage.setItem(this._prefix + '_error', JSON.stringify(err));\r\n};\r\n\r\n/**\r\n *\r\n */\r\nmodule.exports = new Client();\r\n\r\nmodule.exports.Client = Client;\r\n\r\n},{\"../connection\":19,\"../oauth2\":25,\"events\":47,\"inherits\":84,\"lodash/core\":88,\"querystring\":96}],16:[function(require,module,exports){\r\n/*global window, document */\r\n'use strict';\r\n\r\nvar _index = 0;\r\n\r\nmodule.exports = {\r\n\r\n  supported: typeof window !== 'undefined' && typeof document !== 'undefined',\r\n\r\n  createRequest: function(jsonpParam, timeout) {\r\n    jsonpParam = jsonpParam || 'callback';\r\n    timeout = timeout || 10000;\r\n\r\n    return function(params, callback) {\r\n      if (params.method.toUpperCase() !== 'GET') {\r\n        return callback(new Error('JSONP only supports GET request.'));\r\n      }\r\n      var cbFuncName = '_jsforce_jsonpCallback_' + (++_index);\r\n      var callbacks = window;\r\n      var url = params.url;\r\n      url += url.indexOf('?')>0 ? '&' : '?';\r\n      url += jsonpParam + '=' + cbFuncName;\r\n\r\n      var script = document.createElement('script');\r\n      script.type = 'text/javascript';\r\n      script.src = url;\r\n      document.documentElement.appendChild(script);\r\n\r\n      var pid = setTimeout(function() {\r\n        cleanup();\r\n        callback(new Error(\"JSONP call time out.\"));\r\n      }, timeout);\r\n\r\n      callbacks[cbFuncName] = function(res) {\r\n        cleanup();\r\n        callback(null, {\r\n          statusCode: 200,\r\n          headers: { \"content-type\": \"application/json\" },\r\n          body: JSON.stringify(res)\r\n        });\r\n      };\r\n\r\n      var cleanup = function() {\r\n        clearTimeout(pid);\r\n        document.documentElement.removeChild(script);\r\n        delete callbacks[cbFuncName];\r\n      };\r\n    };\r\n\r\n  }\r\n\r\n};\r\n},{}],17:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar Duplex = require('readable-stream').Duplex;\r\nvar _ = require('lodash/core');\r\n\r\nmodule.exports = function(params, callback) {\r\n  var xhr = new XMLHttpRequest();\r\n  xhr.open(params.method, params.url);\r\n  if (params.headers) {\r\n    for (var header in params.headers) {\r\n      xhr.setRequestHeader(header, params.headers[header]);\r\n    }\r\n  }\r\n  xhr.setRequestHeader(\"Accept\", \"*/*\");\r\n  var response;\r\n  var str = new Duplex();\r\n  str._read = function(size) {\r\n    if (response) {\r\n      str.push(response.body);\r\n    }\r\n  };\r\n  var bufs = [];\r\n  var sent = false;\r\n  str._write = function(chunk, encoding, callback) {\r\n    bufs.push(chunk.toString(encoding === \"buffer\" ? \"binary\" : encoding));\r\n    callback();\r\n  };\r\n  str.on('finish', function() {\r\n    if (!sent) {\r\n      xhr.send(bufs.join(''));\r\n      sent = true;\r\n    }\r\n  });\r\n  if (params.body || params.body === \"\" || !/^(put|post|patch)$/i.test(params.method)) {\r\n    xhr.send(params.body);\r\n    sent = true;\r\n  }\r\n  xhr.onreadystatechange = function() {\r\n    if (xhr.readyState === 4) {\r\n      var headerNames = getResponseHeaderNames(xhr);\r\n      var headers = {};\r\n      _.forEach(headerNames, function(headerName) {\r\n        if (headerName) {\r\n          headers[headerName] = xhr.getResponseHeader(headerName);\r\n        }\r\n      });\r\n      response = {\r\n        statusCode: xhr.status,\r\n        headers: headers,\r\n        body: xhr.response\r\n      };\r\n      if (!response.statusCode) {\r\n        response.statusCode = 400;\r\n        response.body = \"Access Declined\";\r\n      }\r\n      if (callback) {\r\n        callback(null, response, response.body);\r\n      }\r\n      str.end();\r\n    }\r\n  };\r\n  return str;\r\n};\r\n\r\nfunction getResponseHeaderNames(xhr) {\r\n  var headerLines = (xhr.getAllResponseHeaders() || \"\").split(/[\\r\\n]+/);\r\n  return _.map(headerLines, function(headerLine) {\r\n    return headerLine.split(/\\s*:/)[0].toLowerCase();\r\n  });\r\n}\r\n\r\n},{\"lodash/core\":88,\"readable-stream\":107}],18:[function(require,module,exports){\r\n/**\r\n * @file Manages asynchronous method response cache\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar events = require('events'),\r\n    inherits = require('inherits'),\r\n    _      = require('lodash/core');\r\n\r\n/**\r\n * Class for managing cache entry\r\n *\r\n * @private\r\n * @class\r\n * @constructor\r\n * @template T\r\n */\r\nvar CacheEntry = function() {\r\n  this.fetching = false;\r\n};\r\n\r\ninherits(CacheEntry, events.EventEmitter);\r\n\r\n/**\r\n * Get value in the cache entry\r\n *\r\n * @param {Callback.<T>} [callback] - Callback function callbacked the cache entry updated\r\n * @returns {T|undefined}\r\n */\r\nCacheEntry.prototype.get = function(callback) {\r\n  if (!callback) {\r\n    return this._value;\r\n  } else {\r\n    this.once('value', callback);\r\n    if (!_.isUndefined(this._value)) {\r\n      this.emit('value', this._value);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Set value in the cache entry\r\n *\r\n * @param {T} [value] - A value for caching\r\n */\r\nCacheEntry.prototype.set = function(value) {\r\n  this._value = value;\r\n  this.emit('value', this._value);\r\n};\r\n\r\n/**\r\n * Clear cached value\r\n */\r\nCacheEntry.prototype.clear = function() {\r\n  this.fetching = false;\r\n  delete this._value;\r\n};\r\n\r\n\r\n/**\r\n * Caching manager for async methods\r\n *\r\n * @class\r\n * @constructor\r\n */\r\nvar Cache = function() {\r\n  this._entries = {};\r\n};\r\n\r\n/**\r\n * retrive cache entry, or create if not exists.\r\n *\r\n * @param {String} [key] - Key of cache entry\r\n * @returns {CacheEntry}\r\n */\r\nCache.prototype.get = function(key) {\r\n  if (key && this._entries[key]) {\r\n    return this._entries[key];\r\n  } else {\r\n    var entry = new CacheEntry();\r\n    this._entries[key] = entry;\r\n    return entry;\r\n  }\r\n};\r\n\r\n/**\r\n * clear cache entries prefix matching given key\r\n * @param {String} [key] - Key prefix of cache entry to clear\r\n */\r\nCache.prototype.clear = function(key) {\r\n  for (var k in this._entries) {\r\n    if (!key || k.indexOf(key) === 0) {\r\n      this._entries[k].clear();\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * create and return cache key from namespace and serialized arguments.\r\n * @private\r\n */\r\nfunction createCacheKey(namespace, args) {\r\n  args = Array.prototype.slice.apply(args);\r\n  return namespace + '(' + _.map(args, function(a){ return JSON.stringify(a); }).join(',') + ')';\r\n}\r\n\r\n/**\r\n * Enable caching for async call fn to intercept the response and store it to cache.\r\n * The original async calll fn is always invoked.\r\n *\r\n * @protected\r\n * @param {Function} fn - Function to covert cacheable\r\n * @param {Object} [scope] - Scope of function call\r\n * @param {Object} [options] - Options\r\n * @return {Function} - Cached version of function\r\n */\r\nCache.prototype.makeResponseCacheable = function(fn, scope, options) {\r\n  var cache = this;\r\n  options = options || {};\r\n  return function() {\r\n    var args = Array.prototype.slice.apply(arguments);\r\n    var callback = args.pop();\r\n    if (!_.isFunction(callback)) {\r\n      args.push(callback);\r\n      callback = null;\r\n    }\r\n    var key = _.isString(options.key) ? options.key :\r\n              _.isFunction(options.key) ? options.key.apply(scope, args) :\r\n              createCacheKey(options.namespace, args);\r\n    var entry = cache.get(key);\r\n    entry.fetching = true;\r\n    if (callback) {\r\n      args.push(function(err, result) {\r\n        entry.set({ error: err, result: result });\r\n        callback(err, result);\r\n      });\r\n    }\r\n    var ret, error;\r\n    try {\r\n      ret = fn.apply(scope || this, args);\r\n    } catch(e) {\r\n      error = e;\r\n    }\r\n    if (ret && _.isFunction(ret.then)) { // if the returned value is promise\r\n      if (!callback) {\r\n        return ret.then(function(result) {\r\n          entry.set({ error: undefined, result: result });\r\n          return result;\r\n        }, function(err) {\r\n          entry.set({ error: err, result: undefined });\r\n          throw err;\r\n        });\r\n      } else {\r\n        return ret;\r\n      }\r\n    } else {\r\n      entry.set({ error: error, result: ret });\r\n      if (error) { throw error; }\r\n      return ret;\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Enable caching for async call fn to lookup the response cache first, then invoke original if no cached value.\r\n *\r\n * @protected\r\n * @param {Function} fn - Function to covert cacheable\r\n * @param {Object} [scope] - Scope of function call\r\n * @param {Object} [options] - Options\r\n * @return {Function} - Cached version of function\r\n */\r\nCache.prototype.makeCacheable = function(fn, scope, options) {\r\n  var cache = this;\r\n  options = options || {};\r\n  var $fn = function() {\r\n    var args = Array.prototype.slice.apply(arguments);\r\n    var callback = args.pop();\r\n    if (!_.isFunction(callback)) {\r\n      args.push(callback);\r\n    }\r\n    var key = _.isString(options.key) ? options.key :\r\n              _.isFunction(options.key) ? options.key.apply(scope, args) :\r\n              createCacheKey(options.namespace, args);\r\n    var entry = cache.get(key);\r\n    if (!_.isFunction(callback)) { // if callback is not given in last arg, return cached result (immediate).\r\n      var value = entry.get();\r\n      if (!value) { throw new Error('Function call result is not cached yet.'); }\r\n      if (value.error) { throw value.error; }\r\n      return value.result;\r\n    }\r\n    entry.get(function(value) {\r\n      callback(value.error, value.result);\r\n    });\r\n    if (!entry.fetching) { // only when no other client is calling function\r\n      entry.fetching = true;\r\n      args.push(function(err, result) {\r\n        entry.set({ error: err, result: result });\r\n      });\r\n      fn.apply(scope || this, args);\r\n    }\r\n  };\r\n  $fn.clear = function() {\r\n    var key = _.isString(options.key) ? options.key :\r\n              _.isFunction(options.key) ? options.key.apply(scope, arguments) :\r\n              createCacheKey(options.namespace, arguments);\r\n    cache.clear(key);\r\n  };\r\n  return $fn;\r\n};\r\n\r\n\r\nmodule.exports = Cache;\r\n\r\n},{\"events\":47,\"inherits\":84,\"lodash/core\":88}],19:[function(require,module,exports){\r\n(function (Buffer){\r\n/*global Buffer */\r\n/**\r\n * @file Connection class to keep the API session information and manage requests\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar events  = require('events'),\r\n    inherits = require('inherits'),\r\n    _       = require('lodash/core'),\r\n    Promise = require('./promise'),\r\n    Logger  = require('./logger'),\r\n    OAuth2  = require('./oauth2'),\r\n    Query   = require('./query'),\r\n    SObject = require('./sobject'),\r\n    QuickAction = require('./quick-action'),\r\n    HttpApi = require('./http-api'),\r\n    Transport = require('./transport'),\r\n    Process = require('./process'),\r\n    Cache   = require('./cache');\r\n\r\nvar defaults = {\r\n  loginUrl: \"https://login.salesforce.com\",\r\n  instanceUrl: \"\",\r\n  version: \"42.0\"\r\n};\r\n\r\n/*\r\n * Constant of maximum records num in DML operation (update/delete)\r\n */\r\nvar MAX_DML_COUNT = 200;\r\n\r\n\r\n/**\r\n * Connection class to keep the API session information and manage requests\r\n *\r\n * @constructor\r\n * @extends events.EventEmitter\r\n * @param {Object} [options] - Connection options\r\n * @param {OAuth2|Object} [options.oauth2] - OAuth2 instance or options to be passed to OAuth2 constructor\r\n * @param {String} [options.logLevel] - Output logging level (DEBUG|INFO|WARN|ERROR|FATAL)\r\n * @param {String} [options.version] - Salesforce API Version (without \"v\" prefix)\r\n * @param {Number} [options.maxRequest] - Max number of requests allowed in parallel call\r\n * @param {String} [options.loginUrl] - Salesforce Login Server URL (e.g. https://login.salesforce.com/)\r\n * @param {String} [options.instanceUrl] - Salesforce Instance URL (e.g. https://na1.salesforce.com/)\r\n * @param {String} [options.serverUrl] - Salesforce SOAP service endpoint URL (e.g. https://na1.salesforce.com/services/Soap/u/28.0)\r\n * @param {String} [options.accessToken] - Salesforce OAuth2 access token\r\n * @param {String} [options.sessionId] - Salesforce session ID\r\n * @param {String} [options.refreshToken] - Salesforce OAuth2 refresh token\r\n * @param {String|Object} [options.signedRequest] - Salesforce Canvas signed request (Raw Base64 string, JSON string, or deserialized JSON)\r\n * @param {String} [options.proxyUrl] - Cross-domain proxy server URL, used in browser client, non Visualforce app.\r\n * @param {String} [options.httpProxy] - URL of HTTP proxy server, used in server client.\r\n * @param {Object} [options.callOptions] - Call options used in each SOAP/REST API request. See manual.\r\n */\r\nvar Connection = module.exports = function(options) {\r\n  options = options || {};\r\n\r\n  this._logger = new Logger(options.logLevel);\r\n\r\n  var oauth2 = options.oauth2 || {\r\n    loginUrl : options.loginUrl,\r\n    clientId : options.clientId,\r\n    clientSecret : options.clientSecret,\r\n    redirectUri : options.redirectUri,\r\n    proxyUrl: options.proxyUrl,\r\n    httpProxy: options.httpProxy\r\n  };\r\n\r\n  /**\r\n   * OAuth2 object\r\n   * @member {OAuth2} Connection#oauth2\r\n   */\r\n  this.oauth2 = oauth2 = oauth2 instanceof OAuth2 ? oauth2 : new OAuth2(oauth2);\r\n\r\n  this.loginUrl = options.loginUrl || oauth2.loginUrl || defaults.loginUrl;\r\n  this.version = options.version || defaults.version;\r\n  this.maxRequest = options.maxRequest || this.maxRequest || 10;\r\n\r\n  /** @private */\r\n  if (options.proxyUrl) {\r\n    this._transport = new Transport.ProxyTransport(options.proxyUrl);\r\n  } else if (options.httpProxy) {\r\n    this._transport = new Transport.HttpProxyTransport(options.httpProxy);\r\n  } else {\r\n    this._transport = new Transport();\r\n  }\r\n\r\n  this.callOptions = options.callOptions;\r\n\r\n  /*\r\n   * Fire connection:new event to notify jsforce plugin modules\r\n   */\r\n  var jsforce = require('./core');\r\n  jsforce.emit('connection:new', this);\r\n\r\n  /**\r\n   * Streaming API object\r\n   * @member {Streaming} Connection#streaming\r\n   */\r\n  // this.streaming = new Streaming(this);\r\n  /**\r\n   * Bulk API object\r\n   * @member {Bulk} Connection#bulk\r\n   */\r\n  // this.bulk = new Bulk(this);\r\n  /**\r\n   * Tooling API object\r\n   * @member {Tooling} Connection#tooling\r\n   */\r\n  // this.tooling = new Tooling(this);\r\n  /**\r\n   * Analytics API object\r\n   * @member {Analytics} Connection#analytics\r\n   */\r\n  // this.analytics = new Analytics(this);\r\n  /**\r\n   * Chatter API object\r\n   * @member {Chatter} Connection#chatter\r\n   */\r\n  // this.chatter = new Chatter(this);\r\n  /**\r\n   * Metadata API object\r\n   * @member {Metadata} Connection#metadata\r\n   */\r\n  // this.metadata = new Metadata(this);\r\n\r\n  /**\r\n   * SOAP API object\r\n   * @member {SoapApi} Connection#soap\r\n   */\r\n  // this.soap = new SoapApi(this);\r\n\r\n  /**\r\n   * Apex REST API object\r\n   * @member {Apex} Connection#apex\r\n   */\r\n  // this.apex = new Apex(this);\r\n\r\n  /**\r\n   * @member {Process} Connection#process\r\n   */\r\n  this.process = new Process(this);\r\n\r\n  /**\r\n   * Cache object for result\r\n   * @member {Cache} Connection#cache\r\n   */\r\n  this.cache = new Cache();\r\n\r\n  // Allow to delegate connection refresh to outer function\r\n  var self = this;\r\n  var refreshFn = options.refreshFn;\r\n  if (!refreshFn && this.oauth2.clientId) {\r\n    refreshFn = oauthRefreshFn;\r\n  }\r\n  if (refreshFn) {\r\n    this._refreshDelegate = new HttpApi.SessionRefreshDelegate(this, refreshFn);\r\n  }\r\n\r\n  var cacheOptions = {\r\n    key: function(type) { return type ? \"describe.\" + type : \"describe\"; }\r\n  };\r\n  this.describe$ = this.cache.makeCacheable(this.describe, this, cacheOptions);\r\n  this.describe = this.cache.makeResponseCacheable(this.describe, this, cacheOptions);\r\n  this.describeSObject$ = this.describe$;\r\n  this.describeSObject = this.describe;\r\n\r\n  cacheOptions = { key: 'describeGlobal' };\r\n  this.describeGlobal$ = this.cache.makeCacheable(this.describeGlobal, this, cacheOptions);\r\n  this.describeGlobal = this.cache.makeResponseCacheable(this.describeGlobal, this, cacheOptions);\r\n\r\n  this.initialize(options);\r\n};\r\n\r\ninherits(Connection, events.EventEmitter);\r\n\r\n/**\r\n * Initialize connection.\r\n *\r\n * @protected\r\n * @param {Object} options - Initialization options\r\n * @param {String} [options.instanceUrl] - Salesforce Instance URL (e.g. https://na1.salesforce.com/)\r\n * @param {String} [options.serverUrl] - Salesforce SOAP service endpoint URL (e.g. https://na1.salesforce.com/services/Soap/u/28.0)\r\n * @param {String} [options.accessToken] - Salesforce OAuth2 access token\r\n * @param {String} [options.sessionId] - Salesforce session ID\r\n * @param {String} [options.refreshToken] - Salesforce OAuth2 refresh token\r\n * @param {String|Object} [options.signedRequest] - Salesforce Canvas signed request (Raw Base64 string, JSON string, or deserialized JSON)\r\n * @param {UserInfo} [options.userInfo] - Logged in user information\r\n */\r\nConnection.prototype.initialize = function(options) {\r\n  if (!options.instanceUrl && options.serverUrl) {\r\n    options.instanceUrl = options.serverUrl.split('/').slice(0, 3).join('/');\r\n  }\r\n  this.instanceUrl = options.instanceUrl || options.serverUrl || this.instanceUrl || defaults.instanceUrl;\r\n\r\n  this.accessToken = options.sessionId || options.accessToken || this.accessToken;\r\n  this.refreshToken = options.refreshToken || this.refreshToken;\r\n  if (this.refreshToken && !this._refreshDelegate) {\r\n    throw new Error(\"Refresh token is specified without oauth2 client information or refresh function\");\r\n  }\r\n\r\n  this.signedRequest = options.signedRequest && parseSignedRequest(options.signedRequest);\r\n  if (this.signedRequest) {\r\n    this.accessToken = this.signedRequest.client.oauthToken;\r\n    if (Transport.CanvasTransport.supported) {\r\n      this._transport = new Transport.CanvasTransport(this.signedRequest);\r\n    }\r\n  }\r\n\r\n  if (options.userInfo) {\r\n    this.userInfo = options.userInfo;\r\n  }\r\n\r\n  this.limitInfo = {};\r\n\r\n  this.sobjects = {};\r\n  this.cache.clear();\r\n  this.cache.get('describeGlobal').removeAllListeners('value');\r\n  this.cache.get('describeGlobal').on('value', _.bind(function(res) {\r\n    if (res.result) {\r\n      var types = _.map(res.result.sobjects, function(so) { return so.name; });\r\n      types.forEach(this.sobject, this);\r\n    }\r\n  }, this));\r\n\r\n  if (this.tooling) {\r\n    this.tooling.initialize();\r\n  }\r\n\r\n  this._sessionType = options.sessionId ? \"soap\" : \"oauth2\";\r\n\r\n};\r\n\r\n/** @private **/\r\nfunction oauthRefreshFn(conn, callback) {\r\n  conn.oauth2.refreshToken(conn.refreshToken, function(err, res) {\r\n    if (err) { return callback(err); }\r\n    var userInfo = parseIdUrl(res.id);\r\n    conn.initialize({\r\n      instanceUrl : res.instance_url,\r\n      accessToken : res.access_token,\r\n      userInfo : userInfo\r\n    });\r\n    callback(null, res.access_token, res);\r\n  });\r\n}\r\n\r\n/** @private **/\r\nfunction parseSignedRequest(sr) {\r\n  if (_.isString(sr)) {\r\n    if (sr[0] === '{') { // might be JSON\r\n      return JSON.parse(sr);\r\n    } else { // might be original base64-encoded signed request\r\n      var msg = sr.split('.').pop(); // retrieve latter part\r\n      var json = Buffer.from(msg, 'base64').toString('utf-8');\r\n      return JSON.parse(json);\r\n    }\r\n    return null;\r\n  }\r\n  return sr;\r\n}\r\n\r\n\r\n/** @private **/\r\nConnection.prototype._baseUrl = function() {\r\n  return [ this.instanceUrl, \"services/data\", \"v\" + this.version ].join('/');\r\n};\r\n\r\n/**\r\n * Convert path to absolute url\r\n * @private\r\n */\r\nConnection.prototype._normalizeUrl = function(url) {\r\n  if (url[0] === '/') {\r\n    if (url.indexOf('/services/') === 0) {\r\n      return this.instanceUrl + url;\r\n    } else {\r\n      return this._baseUrl() + url;\r\n    }\r\n  } else {\r\n    return url;\r\n  }\r\n};\r\n\r\n/**\r\n * Send REST API request with given HTTP request info, with connected session information.\r\n *\r\n * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')\r\n * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')\r\n * , or relative path from version root ('/sobjects/Account/describe').\r\n *\r\n * @param {String|Object} request - HTTP request object or URL to GET request\r\n * @param {String} request.method - HTTP method URL to send HTTP request\r\n * @param {String} request.url - URL to send HTTP request\r\n * @param {Object} [request.headers] - HTTP request headers in hash object (key-value)\r\n * @param {Object} [options] - HTTP API request options\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nConnection.prototype.request = function(request, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = null;\r\n  }\r\n  options = options || {};\r\n  var self = this;\r\n\r\n  // if request is simple string, regard it as url in GET method\r\n  if (_.isString(request)) {\r\n    request = { method: 'GET', url: request };\r\n  }\r\n  // if url is given in relative path, prepend base url or instance url before.\r\n  request.url = this._normalizeUrl(request.url);\r\n\r\n  var httpApi = new HttpApi(this, options);\r\n\r\n  // log api usage and its quota\r\n  httpApi.on('response', function(response) {\r\n    if (response.headers && response.headers[\"sforce-limit-info\"]) {\r\n      var apiUsage = response.headers[\"sforce-limit-info\"].match(/api\\-usage=(\\d+)\\/(\\d+)/);\r\n      if (apiUsage) {\r\n        self.limitInfo = {\r\n          apiUsage: {\r\n            used: parseInt(apiUsage[1], 10),\r\n            limit: parseInt(apiUsage[2], 10)\r\n          }\r\n        };\r\n      }\r\n    }\r\n  });\r\n  return httpApi.request(request).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Send HTTP GET request\r\n *\r\n * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')\r\n * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')\r\n * , or relative path from version root ('/sobjects/Account/describe').\r\n *\r\n * @param {String} url - Endpoint URL to request HTTP GET\r\n * @param {Object} [options] - HTTP API request options\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nConnection.prototype.requestGet = function(url, options, callback) {\r\n  var request = {\r\n    method: \"GET\",\r\n    url: url\r\n  };\r\n  return this.request(request, options, callback);\r\n};\r\n\r\n\r\n/**\r\n * Send HTTP POST request with JSON body, with connected session information\r\n *\r\n * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')\r\n * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')\r\n * , or relative path from version root ('/sobjects/Account/describe').\r\n *\r\n * @param {String} url - Endpoint URL to request HTTP POST\r\n * @param {Object} body - Any JS object which can be serialized to JSON\r\n * @param {Object} [options] - HTTP API request options\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nConnection.prototype.requestPost = function(url, body, options, callback) {\r\n  var request = {\r\n    method: \"POST\",\r\n    url: url,\r\n    body: JSON.stringify(body),\r\n    headers: { \"content-type\": \"application/json\" }\r\n  };\r\n  return this.request(request, options, callback);\r\n};\r\n\r\n/**\r\n * Send HTTP PUT request with JSON body, with connected session information\r\n *\r\n * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')\r\n * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')\r\n * , or relative path from version root ('/sobjects/Account/describe').\r\n *\r\n * @param {String} url - Endpoint URL to request HTTP PUT\r\n * @param {Object} body - Any JS object which can be serialized to JSON\r\n * @param {Object} [options] - HTTP API request options\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nConnection.prototype.requestPut = function(url, body, options, callback) {\r\n  var request = {\r\n    method: \"PUT\",\r\n    url: url,\r\n    body: JSON.stringify(body),\r\n    headers: { \"content-type\": \"application/json\" }\r\n  };\r\n  return this.request(request, options, callback);\r\n};\r\n\r\n/**\r\n * Send HTTP PATCH request with JSON body\r\n *\r\n * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')\r\n * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')\r\n * , or relative path from version root ('/sobjects/Account/describe').\r\n *\r\n * @param {String} url - Endpoint URL to request HTTP PATCH\r\n * @param {Object} body - Any JS object which can be serialized to JSON\r\n * @param {Object} [options] - HTTP API request options\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nConnection.prototype.requestPatch = function(url, body, options, callback) {\r\n  var request = {\r\n    method: \"PATCH\",\r\n    url: url,\r\n    body: JSON.stringify(body),\r\n    headers: { \"content-type\": \"application/json\" }\r\n  };\r\n  return this.request(request, options, callback);\r\n};\r\n\r\n/**\r\n * Send HTTP DELETE request\r\n *\r\n * Endpoint URL can be absolute URL ('https://na1.salesforce.com/services/data/v32.0/sobjects/Account/describe')\r\n * , relative path from root ('/services/data/v32.0/sobjects/Account/describe')\r\n * , or relative path from version root ('/sobjects/Account/describe').\r\n *\r\n * @param {String} url - Endpoint URL to request HTTP DELETE\r\n * @param {Object} [options] - HTTP API request options\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nConnection.prototype.requestDelete = function(url, options, callback) {\r\n  var request = {\r\n    method: \"DELETE\",\r\n    url: url\r\n  };\r\n  return this.request(request, options, callback);\r\n};\r\n\r\n\r\n/** @private */\r\nfunction formatDate(date) {\r\n  function pad(number) {\r\n    if (number < 10) {\r\n      return '0' + number;\r\n    }\r\n    return number;\r\n  }\r\n\r\n  return date.getUTCFullYear() +\r\n    '-' + pad(date.getUTCMonth() + 1) +\r\n    '-' + pad(date.getUTCDate()) +\r\n    'T' + pad(date.getUTCHours()) +\r\n    ':' + pad(date.getUTCMinutes()) +\r\n    ':' + pad(date.getUTCSeconds()) +\r\n    '+00:00';\r\n}\r\n\r\n\r\n/** @private **/\r\nfunction parseIdUrl(idUrl) {\r\n  var idUrls = idUrl.split(\"/\");\r\n  var userId = idUrls.pop(), orgId = idUrls.pop();\r\n  return {\r\n    id: userId,\r\n    organizationId: orgId,\r\n    url: idUrl\r\n  };\r\n}\r\n\r\n/**\r\n * @callback Callback\r\n * @type {Function}\r\n * @param {Error} err - Callback error\r\n * @param {T} response - Callback response\r\n * @template T\r\n */\r\n\r\n/**\r\n * @typedef {Object} QueryResult\r\n * @prop {Boolean} done - Flag if the query is fetched all records or not\r\n * @prop {String} [nextRecordsUrl] - URL locator for next record set, (available when done = false)\r\n * @prop {Number} totalSize - Total size for query\r\n * @prop {Array.<Record>} [records] - Array of records fetched\r\n */\r\n\r\n/**\r\n * Execute query by using SOQL\r\n *\r\n * @param {String} soql - SOQL string\r\n * @param {Object} [options] - Query options\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in query request\r\n * @param {Callback.<QueryResult>} [callback] - Callback function\r\n * @returns {Query.<QueryResult>}\r\n */\r\nConnection.prototype.query = function(soql, options, callback) {\r\n  console.log('flag1');\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = undefined;\r\n  }\r\n  var query = new Query(this, soql, options);\r\n  if (callback) {\r\n    query.run(callback);\r\n  }\r\n  return query;\r\n};\r\n\r\n/**\r\n * Execute query by using SOQL, including deleted records\r\n *\r\n * @param {String} soql - SOQL string\r\n * @param {Object} [options] - Query options\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in query request\r\n * @param {Callback.<QueryResult>} [callback] - Callback function\r\n * @returns {Query.<QueryResult>}\r\n */\r\nConnection.prototype.queryAll = function(soql, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = undefined;\r\n  }\r\n  var query = new Query(this, soql, options);\r\n  query.scanAll(true);\r\n  if (callback) {\r\n    query.run(callback);\r\n  }\r\n  return query;\r\n};\r\n\r\n/**\r\n * Query next record set by using query locator\r\n *\r\n * @param {String} locator - Next record set locator\r\n * @param {Object} [options] - Query options\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in query request\r\n * @param {Callback.<QueryResult>} [callback] - Callback function\r\n * @returns {Query.<QueryResult>}\r\n */\r\nConnection.prototype.queryMore = function(locator, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = undefined;\r\n  }\r\n  var query = new Query(this, { locator: locator }, options);\r\n  if (callback) {\r\n    query.run(callback);\r\n  }\r\n  return query;\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._ensureVersion = function(majorVersion) {\r\n  var versions = this.version.split('.');\r\n  return parseInt(versions[0], 10) >= majorVersion;\r\n}\r\n\r\n/**\r\n * Retrieve specified records\r\n *\r\n * @param {String} type - SObject Type\r\n * @param {String|Array.<String>} ids - A record ID or array of record IDs\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Array.<String>} [options.fields] - Fetching field names in retrieving record\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in retrieve request\r\n * @param {Callback.<Record|Array.<Record>>} [callback] - Callback function\r\n * @returns {Promise.<Record|Array.<Record>>}\r\n */\r\nConnection.prototype.retrieve = function(type, ids, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  return (\r\n    _.isArray(ids) ?\r\n      (this._ensureVersion(42) ? // check the version whether SObject collection API is supported (42.0)\r\n        this._retrieveMany(type, ids, options) :\r\n        this._retrieveParallel(type, ids, options)) :\r\n      this._retrieveSingle(type, ids, options)\r\n  ).thenCall(callback);\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._retrieveSingle = function(type, id, options) {\r\n  if (!id) {\r\n    return Promise.reject(new Error('Invalid record ID. Specify valid record ID value'));\r\n  }\r\n  var url = [ this._baseUrl(), \"sobjects\", type, id ].join('/');\r\n  if (options.fields) {\r\n    url += '?fields=' + options.fields.join(',');\r\n  }\r\n  return this.request({\r\n    method: 'GET',\r\n    url: url,\r\n    headers: options.headers,\r\n  });\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._retrieveParallel = function(type, ids, options) {\r\n  if (ids.length > this.maxRequest) {\r\n    return Promise.reject(new Error(\"Exceeded max limit of concurrent call\"));\r\n  }\r\n  var self = this;\r\n  return Promise.all(\r\n    ids.map(function(id) {\r\n      return self._retrieveSingle(type, id, options).catch(function(err) {\r\n        if (options.allOrNone || err.errorCode !== 'NOT_FOUND') {\r\n          throw err;\r\n        }\r\n        return null;\r\n      });\r\n    })\r\n  );\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._retrieveMany = function(type, ids, options) {\r\n  if (ids.length === 0) {\r\n    return Promise.resolve([]);\r\n  }\r\n  var url = [ this._baseUrl(), \"composite\", \"sobjects\", type ].join('/');\r\n  var self = this;\r\n  return (\r\n    options.fields ?\r\n      Promise.resolve(options.fields) :\r\n      new Promise(function(resolve, reject) {\r\n        self.describe$(type, function(err, so) {\r\n          if (err) {\r\n            reject(err);\r\n          } else {\r\n            var fields = so.fields.map(function(field) {\r\n              return field.name;\r\n            });\r\n            resolve(fields);\r\n          }\r\n        });\r\n      })\r\n  ).then(function(fields) {\r\n    return self.request({\r\n      method : 'POST',\r\n      url : url,\r\n      body : JSON.stringify({\r\n        ids : ids,\r\n        fields : fields\r\n      }),\r\n      headers : _.defaults(options.headers || {}, {\r\n        \"Content-Type\" : \"application/json\"\r\n      })\r\n    });\r\n  });\r\n};\r\n\r\n\r\n/**\r\n * @typedef RecordResult\r\n * @prop {Boolean} success - The result is succeessful or not\r\n * @prop {String} [id] - Record ID\r\n * @prop {Array.<Object>} [errors] - Errors (available when success = false)\r\n */\r\n\r\n/** @private */\r\nConnection.prototype._toRecordResult = function(id, err) {\r\n  var error = {\r\n    statusCode: err.errorCode,\r\n    message: err.message\r\n  };\r\n  if (err.content) { error.content = err.content; } // preserve External id duplication message\r\n  if (err.fields) { error.fields = err.fields; } // preserve DML exception occurred fields\r\n  var result = {\r\n    success: false,\r\n    errors: [error]\r\n  };\r\n  if (id) { result.id = id; }\r\n  return result;\r\n};\r\n\r\n/**\r\n * Synonym of Connection#create()\r\n *\r\n * @method Connection#insert\r\n * @param {String} type - SObject Type\r\n * @param {Object|Array.<Object>} records - A record or array of records to create\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Boolean} [options.allOrNone] - If true, any failed records in a call cause all changes for the call to be rolled back\r\n * @param {Boolean} [options.allowRecursive] - If true, when records goes over the max num of collection API (=200), records are divided into several chunks and requested recursively.\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in retrieve request\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Create records\r\n *\r\n * @method Connection#create\r\n * @param {String} type - SObject Type\r\n * @param {Record|Array.<Record>} records - A record or array of records to create\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Boolean} [options.allOrNone] - If true, any failed records in a call cause all changes for the call to be rolled back\r\n * @param {Boolean} [options.allowRecursive] - If true, when records goes over the max num of collection API (=200), records are divided into several chunks and requested recursively.\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in retrieve request\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\nConnection.prototype.insert =\r\nConnection.prototype.create = function(type, records, options, callback) {\r\n  if (!_.isString(type)) {\r\n    // reverse order\r\n    callback = options;\r\n    options = records;\r\n    records = type;\r\n    type = null;\r\n  }\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  return (\r\n    _.isArray(records) ?\r\n      (this._ensureVersion(42) ? // check the version whether SObject collection API is supported (42.0)\r\n        this._createMany(type, records, options) :\r\n        this._createParallel(type, records, options)) :\r\n      this._createSingle(type, records, options)\r\n  ).thenCall(callback);\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._createSingle = function(type, record, options) {\r\n  var sobjectType = type || (record.attributes && record.attributes.type) || record.type;\r\n  if (!sobjectType) {\r\n    return Promise.reject(new Error('No SObject Type defined in record'));\r\n  }\r\n  record = _.clone(record);\r\n  delete record.Id;\r\n  delete record.type;\r\n  delete record.attributes;\r\n  var url = [ this._baseUrl(), \"sobjects\", sobjectType ].join('/');\r\n  return this.request({\r\n    method : 'POST',\r\n    url : url,\r\n    body : JSON.stringify(record),\r\n    headers : _.defaults(options.headers || {}, {\r\n      \"Content-Type\" : \"application/json\"\r\n    })\r\n  });\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._createParallel = function(type, records, options) {\r\n  if (records.length > this.maxRequest) {\r\n    return Promise.reject(new Error(\"Exceeded max limit of concurrent call\"));\r\n  }\r\n  var self = this;\r\n  return Promise.all(\r\n    records.map(function(record) {\r\n      return self._createSingle(type, record, options).catch(function(err) {\r\n        // be aware that allOrNone in parallel mode will not revert the other successful requests\r\n        // it only raises error when met at least one failed request.\r\n        if (options.allOrNone || !err.errorCode) {\r\n          throw err;\r\n        }\r\n        return this._toRecordResult(null, err);\r\n      });\r\n    })\r\n  );\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._createMany = function(type, records, options) {\r\n  if (records.length === 0) {\r\n    return Promise.resolve([]);\r\n  }\r\n  if (records.length > MAX_DML_COUNT && options.allowRecursive) {\r\n    var self = this;\r\n    return self._createMany(type, records.slice(0, MAX_DML_COUNT), options).then(function(rets1) {\r\n      return self._createMany(type, records.slice(MAX_DML_COUNT), options).then(function(rets2) {\r\n        return rets1.concat(rets2);\r\n      });\r\n    });\r\n  }\r\n  records = _.map(records, function(record) {\r\n    var sobjectType = type || (record.attributes && record.attributes.type) || record.type;\r\n    if (!sobjectType) {\r\n      return Promise.reject(new Error('No SObject Type defined in record'));\r\n    }\r\n    record = _.clone(record);\r\n    delete record.Id;\r\n    delete record.type;\r\n    record.attributes = { type : sobjectType };\r\n    return record;\r\n  });\r\n  var url = [ this._baseUrl(), \"composite\", \"sobjects\" ].join('/');\r\n  return this.request({\r\n    method : 'POST',\r\n    url : url,\r\n    body : JSON.stringify({\r\n      allOrNone : options.allOrNone || false,\r\n      records : records\r\n    }),\r\n    headers : _.defaults(options.headers || {}, {\r\n      \"Content-Type\" : \"application/json\"\r\n    })\r\n  });\r\n};\r\n\r\n/**\r\n * Update records\r\n *\r\n * @param {String} type - SObject Type\r\n * @param {Record|Array.<Record>} records - A record or array of records to update\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Boolean} [options.allOrNone] - If true, any failed records in a call cause all changes for the call to be rolled back\r\n * @param {Boolean} [options.allowRecursive] - If true, when records goes over the max num of collection API (=200), records are divided into several chunks and requested recursively.\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in retrieve request\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\nConnection.prototype.update = function(type, records, options, callback) {\r\n  if (!_.isString(type)) {\r\n    // reverse order\r\n    callback = options;\r\n    options = records;\r\n    records = type;\r\n    type = null;\r\n  }\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  return (\r\n    _.isArray(records) ?\r\n      (this._ensureVersion(42) ? // check the version whether SObject collection API is supported (42.0)\r\n        this._updateMany(type, records, options) :\r\n        this._updateParallel(type, records, options)) :\r\n      this._updateSingle(type, records, options)\r\n  ).thenCall(callback);\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._updateSingle = function(type, record, options) {\r\n  var id = record.Id;\r\n  if (!id) {\r\n    return Promise.reject(new Error('Record id is not found in record.'));\r\n  }\r\n  var sobjectType = type || (record.attributes && record.attributes.type) || record.type;\r\n  if (!sobjectType) {\r\n    return Promise.reject(new Error('No SObject Type defined in record'));\r\n  }\r\n  record = _.clone(record);\r\n  delete record.Id;\r\n  delete record.type;\r\n  delete record.attributes;\r\n  var url = [ this._baseUrl(), \"sobjects\", sobjectType, id ].join('/');\r\n  return this.request({\r\n    method : 'PATCH',\r\n    url : url,\r\n    body : JSON.stringify(record),\r\n    headers : _.defaults(options.headers || {}, {\r\n      \"Content-Type\" : \"application/json\"\r\n    })\r\n  }, {\r\n    noContentResponse: { id : id, success : true, errors : [] }\r\n  });\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._updateParallel = function(type, records, options) {\r\n  if (records.length > this.maxRequest) {\r\n    return Promise.reject(new Error(\"Exceeded max limit of concurrent call\"));\r\n  }\r\n  var self = this;\r\n  return Promise.all(\r\n    records.map(function(record) {\r\n      return self._updateSingle(type, record, options).catch(function(err) {\r\n        // be aware that allOrNone in parallel mode will not revert the other successful requests\r\n        // it only raises error when met at least one failed request.\r\n        if (options.allOrNone || !err.errorCode) {\r\n          throw err;\r\n        }\r\n        return this._toRecordResult(record.Id, err);\r\n      });\r\n    })\r\n  );\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._updateMany = function(type, records, options) {\r\n  if (records.length === 0) {\r\n    return Promise.resolve([]);\r\n  }\r\n  if (records.length > MAX_DML_COUNT && options.allowRecursive) {\r\n    var self = this;\r\n    return self._updateMany(type, records.slice(0, MAX_DML_COUNT), options).then(function(rets1) {\r\n      return self._updateMany(type, records.slice(MAX_DML_COUNT), options).then(function(rets2) {\r\n        return rets1.concat(rets2);\r\n      });\r\n    });\r\n  }\r\n  records = _.map(records, function(record) {\r\n    var id = record.Id;\r\n    if (!id) {\r\n      throw new Error('Record id is not found in record.');\r\n    }\r\n    var sobjectType = type || (record.attributes && record.attributes.type) || record.type;\r\n    if (!sobjectType) {\r\n      throw new Error('No SObject Type defined in record');\r\n    }\r\n    record = _.clone(record);\r\n    delete record.Id;\r\n    record.id = id;\r\n    delete record.type;\r\n    record.attributes = { type : sobjectType };\r\n    return record;\r\n  });\r\n  var url = [ this._baseUrl(), \"composite\", \"sobjects\" ].join('/');\r\n  return this.request({\r\n    method : 'PATCH',\r\n    url : url,\r\n    body : JSON.stringify({\r\n      allOrNone : options.allOrNone || false,\r\n      records : records\r\n    }),\r\n    headers : _.defaults(options.headers || {}, {\r\n      \"Content-Type\" : \"application/json\"\r\n    })\r\n  });\r\n};\r\n\r\n/**\r\n * Upsert records\r\n *\r\n * @param {String} type - SObject Type\r\n * @param {Record|Array.<Record>} records - Record or array of records to upsert\r\n * @param {String} extIdField - External ID field name\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Boolean} [options.allOrNone] - If true, any failed records in a call cause all changes for the call to be rolled back\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in retrieve request\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\nConnection.prototype.upsert = function(type, records, extIdField, options, callback) {\r\n  // You can omit \"type\" argument, when the record includes type information.\r\n  if (!_.isString(type)) {\r\n    // reverse order\r\n    callback = options;\r\n    options = extIdField;\r\n    extIdField = records;\r\n    records = type;\r\n    type = null;\r\n  }\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  var self = this;\r\n  var isArray = _.isArray(records);\r\n  records = isArray ? records : [ records ];\r\n  if (records.length > this.maxRequest) {\r\n    return Promise.reject(new Error(\"Exceeded max limit of concurrent call\")).thenCall(callback);\r\n  }\r\n  return Promise.all(\r\n    _.map(records, function(record) {\r\n      var sobjectType = type || (record.attributes && record.attributes.type) || record.type;\r\n      var extId = record[extIdField];\r\n      record = _.clone(record);\r\n      delete record[extIdField];\r\n      delete record.type;\r\n      delete record.attributes;\r\n\r\n      var url = [ self._baseUrl(), \"sobjects\", sobjectType, extIdField, extId ].join('/');\r\n      return self.request({\r\n        method : 'PATCH',\r\n        url : url,\r\n        body : JSON.stringify(record),\r\n        headers : _.defaults(options.headers || {}, {\r\n          \"Content-Type\" : \"application/json\"\r\n        })\r\n      }, {\r\n        noContentResponse: { success : true, errors : [] }\r\n      })\r\n      .catch(function(err) {\r\n        // be aware that `allOrNone` option in upsert method will not revert the other successful requests\r\n        // it only raises error when met at least one failed request.\r\n        if (!isArray || options.allOrNone || !err.errorCode) { throw err; }\r\n        return this._toRecordResult(null, err);\r\n      })\r\n    })\r\n  ).then(function(results) {\r\n    return !isArray && _.isArray(results) ? results[0] : results;\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Synonym of Connection#destroy()\r\n *\r\n * @method Connection#delete\r\n * @param {String} type - SObject Type\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Boolean} [options.allOrNone] - If true, any failed records in a call cause all changes for the call to be rolled back\r\n * @param {Boolean} [options.allowRecursive] - If true, when ids goes over the max num of collection API (=200), ids are divided into several chunks and requested recursively.\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in retrieve request\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Synonym of Connection#destroy()\r\n *\r\n * @method Connection#del\r\n * @param {String} type - SObject Type\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Boolean} [options.allOrNone] - If true, any failed records in a call cause all changes for the call to be rolled back\r\n * @param {Boolean} [options.allowRecursive] - If true, when ids goes over the max num of collection API (=200), ids are divided into several chunks and requested recursively.\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in retrieve request\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Delete records\r\n *\r\n * @method Connection#destroy\r\n * @param {String} type - SObject Type\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Boolean} [options.allOrNone] - If true, any failed records in a call cause all changes for the call to be rolled back\r\n * @param {Boolean} [options.allowRecursive] - If true, when ids goes over the max num of collection API (=200), ids are divided into several chunks and requested recursively.\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in retrieve request\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\nConnection.prototype[\"delete\"] =\r\nConnection.prototype.del =\r\nConnection.prototype.destroy = function(type, ids, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  return (\r\n    _.isArray(ids) ?\r\n      (this._ensureVersion(42) ? // check the version whether SObject collection API is supported (42.0)\r\n        this._destroyMany(type, ids, options) :\r\n        this._destroyParallel(type, ids, options)) :\r\n      this._destroySingle(type, ids, options)\r\n  ).thenCall(callback);\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._destroySingle = function(type, id, options) {\r\n  var url = [ this._baseUrl(), \"sobjects\", type, id ].join('/');\r\n  return this.request({\r\n    method : 'DELETE',\r\n    url : url,\r\n    headers: options.headers || null\r\n  }, {\r\n    noContentResponse: { id : id, success : true, errors : [] }\r\n  });\r\n};\r\n\r\n/** @private */\r\nConnection.prototype._destroyParallel = function(type, ids, options) {\r\n  if (ids.length > this.maxRequest) {\r\n    return Promise.reject(new Error(\"Exceeded max limit of concurrent call\"));\r\n  }\r\n  var self = this;\r\n  return Promise.all(\r\n    ids.map(function(id) {\r\n      return self._destroySingle(type, id, options).catch(function(err) {\r\n        // be aware that `allOrNone` option in parallel mode will not revert the other successful requests\r\n        // it only raises error when met at least one failed request.\r\n        if (options.allOrNone || !err.errorCode) {\r\n          throw err;\r\n        }\r\n        return this._toRecordResult(id, err);\r\n      });\r\n    })\r\n  );\r\n};\r\n\r\n\r\n/** @private */\r\nConnection.prototype._destroyMany = function(type, ids, options) {\r\n  if (ids.length === 0) {\r\n    return Promise.resolve([]);\r\n  }\r\n  if (ids.length > MAX_DML_COUNT && options.allowRecursive) {\r\n    var self = this;\r\n    return self._destroyMany(type, ids.slice(0, MAX_DML_COUNT), options).then(function(rets1) {\r\n      return self._destroyMany(type, ids.slice(MAX_DML_COUNT), options).then(function(rets2) {\r\n        return rets1.concat(rets2);\r\n      });\r\n    });\r\n  }\r\n  var url = [ this._baseUrl(), \"composite\", \"sobjects?ids=\" ].join('/') + ids.join(',');\r\n  if (options.allOrNone) {\r\n    url += '&allOrNone=true';\r\n  }\r\n  return this.request({\r\n    method : 'DELETE',\r\n    url : url,\r\n    headers: options.headers || null\r\n  });\r\n};\r\n\r\n/**\r\n * Execute search by SOSL\r\n *\r\n * @param {String} sosl - SOSL string\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<RecordResult>>}\r\n */\r\nConnection.prototype.search = function(sosl, callback) {\r\n  var url = this._baseUrl() + \"/search?q=\" + encodeURIComponent(sosl);\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Result returned by describeSObject call\r\n *\r\n * @typedef {Object} DescribeSObjectResult\r\n */\r\n/**\r\n * Synonym of Connection#describe()\r\n *\r\n * @method Connection#describeSObject\r\n * @param {String} type - SObject Type\r\n * @param {Callback.<DescribeSObjectResult>} [callback] - Callback function\r\n * @returns {Promise.<DescribeSObjectResult>}\r\n */\r\n/**\r\n * Describe SObject metadata\r\n *\r\n * @method Connection#describe\r\n * @param {String} type - SObject Type\r\n * @param {Callback.<DescribeSObjectResult>} [callback] - Callback function\r\n * @returns {Promise.<DescribeSObjectResult>}\r\n */\r\nConnection.prototype.describe =\r\nConnection.prototype.describeSObject = function(type, callback) {\r\n  var url = [ this._baseUrl(), \"sobjects\", type, \"describe\" ].join('/');\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * Result returned by describeGlobal call\r\n *\r\n * @typedef {Object} DescribeGlobalResult\r\n */\r\n/**\r\n * Describe global SObjects\r\n *\r\n * @param {Callback.<DescribeGlobalResult>} [callback] - Callback function\r\n * @returns {Promise.<DescribeGlobalResult>}\r\n */\r\nConnection.prototype.describeGlobal = function(callback) {\r\n  var url = this._baseUrl() + \"/sobjects\";\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * Get SObject instance\r\n *\r\n * @param {String} type - SObject Type\r\n * @returns {SObject}\r\n */\r\nConnection.prototype.sobject = function(type) {\r\n  this.sobjects = this.sobjects || {};\r\n  var sobject = this.sobjects[type] =\r\n    this.sobjects[type] || new SObject(this, type);\r\n  return sobject;\r\n};\r\n\r\n/**\r\n * Get identity information of current user\r\n *\r\n * @param {Object} [options] - Identity call options\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in identity request\r\n * @param {Callback.<IdentityInfo>} [callback] - Callback function\r\n * @returns {Promise.<IdentityInfo>}\r\n */\r\nConnection.prototype.identity = function(options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  var self = this;\r\n  var idUrl = this.userInfo && this.userInfo.url;\r\n  return Promise.resolve(\r\n    idUrl ?\r\n    { identity: idUrl } :\r\n    this.request({ method: 'GET', url: this._baseUrl(), headers: options.headers })\r\n  ).then(function(res) {\r\n    var url = res.identity;\r\n    return self.request({ method: 'GET', url: url });\r\n  }).then(function(res) {\r\n    self.userInfo = {\r\n      id: res.user_id,\r\n      organizationId: res.organization_id,\r\n      url: res.id\r\n    };\r\n    return res;\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @typedef UserInfo\r\n * @prop {String} id - User ID\r\n * @prop {String} organizationId - Organization ID\r\n * @prop {String} url - Identity URL of the user\r\n */\r\n\r\n/**\r\n * Authorize (using oauth2 web server flow)\r\n *\r\n * @param {String} code - Authorization code\r\n * @param {Object} [params] - Optional parameters to send in token retrieval\r\n * @param {String} [params.code_verifier] - Code verifier value (RFC 7636 - Proof Key of Code Exchange)\r\n * @param {Callback.<UserInfo>} [callback] - Callback function\r\n * @returns {Promise.<UserInfo>}\r\n */\r\nConnection.prototype.authorize = function(code, params, callback) {\r\n  if (typeof params === 'function') {\r\n    callback = params;\r\n    params = {};\r\n  }\r\n  var self = this;\r\n  var logger = this._logger;\r\n\r\n  return this.oauth2.requestToken(code, params).then(function(res) {\r\n    var userInfo = parseIdUrl(res.id);\r\n    self.initialize({\r\n      instanceUrl : res.instance_url,\r\n      accessToken : res.access_token,\r\n      refreshToken : res.refresh_token,\r\n      userInfo: userInfo\r\n    });\r\n    logger.debug(\"<login> completed. user id = \" + userInfo.id + \", org id = \" + userInfo.organizationId);\r\n    return userInfo;\r\n\r\n  }).thenCall(callback);\r\n\r\n};\r\n\r\n\r\n/**\r\n * Login to Salesforce\r\n *\r\n * @param {String} username - Salesforce username\r\n * @param {String} password - Salesforce password (and security token, if required)\r\n * @param {Callback.<UserInfo>} [callback] - Callback function\r\n * @returns {Promise.<UserInfo>}\r\n */\r\nConnection.prototype.login = function(username, password, callback) {\r\n  // register refreshDelegate for session expiration\r\n  this._refreshDelegate = new HttpApi.SessionRefreshDelegate(this, createUsernamePasswordRefreshFn(username, password));\r\n  if (this.oauth2 && this.oauth2.clientId && this.oauth2.clientSecret) {\r\n    return this.loginByOAuth2(username, password, callback);\r\n  } else {\r\n    return this.loginBySoap(username, password, callback);\r\n  }\r\n};\r\n\r\n/** @private **/\r\nfunction createUsernamePasswordRefreshFn(username, password) {\r\n  return function(conn, callback) {\r\n    conn.login(username, password, function(err) {\r\n      if (err) { return callback(err); }\r\n      callback(null, conn.accessToken);\r\n    });\r\n  };\r\n}\r\n\r\n/**\r\n * Login by OAuth2 username & password flow\r\n *\r\n * @param {String} username - Salesforce username\r\n * @param {String} password - Salesforce password (and security token, if required)\r\n * @param {Callback.<UserInfo>} [callback] - Callback function\r\n * @returns {Promise.<UserInfo>}\r\n */\r\nConnection.prototype.loginByOAuth2 = function(username, password, callback) {\r\n  var self = this;\r\n  var logger = this._logger;\r\n  return this.oauth2.authenticate(username, password).then(function(res) {\r\n    var userInfo = parseIdUrl(res.id);\r\n    self.initialize({\r\n      instanceUrl : res.instance_url,\r\n      accessToken : res.access_token,\r\n      userInfo: userInfo\r\n    });\r\n    logger.debug(\"<login> completed. user id = \" + userInfo.id + \", org id = \" + userInfo.organizationId);\r\n    return userInfo;\r\n\r\n  }).thenCall(callback);\r\n\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nfunction esc(str) {\r\n  return str && String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;')\r\n                           .replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\r\n}\r\n\r\n/**\r\n * Login by SOAP web service API\r\n *\r\n * @param {String} username - Salesforce username\r\n * @param {String} password - Salesforce password (and security token, if required)\r\n * @param {Callback.<UserInfo>} [callback] - Callback function\r\n * @returns {Promise.<UserInfo>}\r\n */\r\nConnection.prototype.loginBySoap = function(username, password, callback) {\r\n  var self = this;\r\n  var logger = this._logger;\r\n  var body = [\r\n    '<se:Envelope xmlns:se=\"http://schemas.xmlsoap.org/soap/envelope/\">',\r\n      '<se:Header/>',\r\n      '<se:Body>',\r\n        '<login xmlns=\"urn:partner.soap.sforce.com\">',\r\n          '<username>' + esc(username) + '</username>',\r\n          '<password>' + esc(password) + '</password>',\r\n        '</login>',\r\n      '</se:Body>',\r\n    '</se:Envelope>'\r\n  ].join('');\r\n\r\n  var soapLoginEndpoint = [ this.loginUrl, \"services/Soap/u\", this.version ].join('/');\r\n\r\n  return this._transport.httpRequest({\r\n    method : 'POST',\r\n    url : soapLoginEndpoint,\r\n    body : body,\r\n    headers : {\r\n      \"Content-Type\" : \"text/xml\",\r\n      \"SOAPAction\" : '\"\"'\r\n    }\r\n  }).then(function(response) {\r\n    var m;\r\n    if (response.statusCode >= 400) {\r\n      m = response.body.match(/<faultstring>([^<]+)<\\/faultstring>/);\r\n      var faultstring = m && m[1];\r\n      throw new Error(faultstring || response.body);\r\n    }\r\n    logger.debug(\"SOAP response = \" + response.body);\r\n    m = response.body.match(/<serverUrl>([^<]+)<\\/serverUrl>/);\r\n    var serverUrl = m && m[1];\r\n    m = response.body.match(/<sessionId>([^<]+)<\\/sessionId>/);\r\n    var sessionId = m && m[1];\r\n    m = response.body.match(/<userId>([^<]+)<\\/userId>/);\r\n    var userId = m && m[1];\r\n    m = response.body.match(/<organizationId>([^<]+)<\\/organizationId>/);\r\n    var orgId = m && m[1];\r\n    var idUrl = soapLoginEndpoint.split('/').slice(0, 3).join('/');\r\n    idUrl += \"/id/\" + orgId + \"/\" + userId;\r\n    var userInfo = {\r\n      id: userId,\r\n      organizationId: orgId,\r\n      url: idUrl\r\n    };\r\n    self.initialize({\r\n      serverUrl: serverUrl.split('/').slice(0, 3).join('/'),\r\n      sessionId: sessionId,\r\n      userInfo: userInfo\r\n    });\r\n    logger.debug(\"<login> completed. user id = \" + userId + \", org id = \" + orgId);\r\n    return userInfo;\r\n\r\n  }).thenCall(callback);\r\n\r\n};\r\n\r\n/**\r\n * Logout the current session \r\n *\r\n * @param {Boolean} [revoke] - Revokes API Access if set to true\r\n * @param {Callback.<undefined>} [callback] - Callback function\r\n * @returns {Promise.<undefined>}\r\n */\r\nConnection.prototype.logout = function(revoke, callback) {\r\n  if (typeof revoke === 'function') {\r\n    callback = revoke;\r\n    revoke = false;\r\n  }\r\n\r\n  if (this._sessionType === \"oauth2\") {\r\n    return this.logoutByOAuth2(revoke, callback);\r\n  } else {\r\n    return this.logoutBySoap(revoke, callback);\r\n  }\r\n};\r\n\r\n/**\r\n * Logout the current session by revoking access token via OAuth2 session revoke\r\n *\r\n * @param {Boolean} [revoke] - Revokes API Access if set to true\r\n * @param {Callback.<undefined>} [callback] - Callback function\r\n * @returns {Promise.<undefined>}\r\n */\r\nConnection.prototype.logoutByOAuth2 = function(revoke, callback) {\r\n  if (typeof revoke === 'function') {\r\n    callback = revoke;\r\n    revoke = false;\r\n  }\r\n  var self = this;\r\n  var logger = this._logger;\r\n\r\n  return this.oauth2.revokeToken(revoke ? this.refreshToken : this.accessToken).then(function() {\r\n    // Destroy the session bound to this connection\r\n    self.accessToken = null;\r\n    self.userInfo = null;\r\n    self.refreshToken = null;\r\n    self.instanceUrl = null;\r\n    self.cache.clear();\r\n\r\n    // nothing useful returned by logout API, just return\r\n    return undefined;\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * Logout the session by using SOAP web service API\r\n *\r\n * @param {Boolean} [revoke] - Revokes API Access if set to true\r\n * @param {Callback.<undefined>} [callback] - Callback function\r\n * @returns {Promise.<undefined>}\r\n */\r\nConnection.prototype.logoutBySoap = function(revoke, callback) {\r\n  if (typeof revoke === 'function') {\r\n    callback = revoke;\r\n    revoke = false;\r\n  }\r\n  var self = this;\r\n  var logger = this._logger;\r\n\r\n  var body = [\r\n    '<se:Envelope xmlns:se=\"http://schemas.xmlsoap.org/soap/envelope/\">',\r\n      '<se:Header>',\r\n        '<SessionHeader xmlns=\"urn:partner.soap.sforce.com\">',\r\n          '<sessionId>' + esc(revoke ? this.refreshToken : this.accessToken) + '</sessionId>',\r\n        '</SessionHeader>',\r\n      '</se:Header>',\r\n      '<se:Body>',\r\n        '<logout xmlns=\"urn:partner.soap.sforce.com\"/>',\r\n      '</se:Body>',\r\n    '</se:Envelope>'\r\n  ].join('');\r\n\r\n  return this._transport.httpRequest({\r\n    method : 'POST',\r\n    url : [ this.instanceUrl, \"services/Soap/u\", this.version ].join('/'),\r\n    body : body,\r\n    headers : {\r\n      \"Content-Type\" : \"text/xml\",\r\n      \"SOAPAction\" : '\"\"'\r\n    }\r\n  }).then(function(response) {\r\n    logger.debug(\"SOAP statusCode = \" + response.statusCode + \", response = \" + response.body);\r\n    if (response.statusCode >= 400) {\r\n      var m = response.body.match(/<faultstring>([^<]+)<\\/faultstring>/);\r\n      var faultstring = m && m[1];\r\n      throw new Error(faultstring || response.body);\r\n    }\r\n\r\n    // Destroy the session bound to this connection\r\n    self.accessToken = null;\r\n    self.userInfo = null;\r\n    self.refreshToken = null;\r\n    self.instanceUrl = null;\r\n    self.cache.clear();\r\n\r\n    // nothing useful returned by logout API, just return\r\n    return undefined;\r\n\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * List recently viewed records\r\n *\r\n * @param {String} [type] - SObject type\r\n * @param {Number} [limit] - Limit num to fetch\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<RecordResult>>}\r\n */\r\nConnection.prototype.recent = function(type, limit, callback) {\r\n  if (!_.isString(type)) {\r\n    callback = limit;\r\n    limit = type;\r\n    type = undefined;\r\n  }\r\n  if (!_.isNumber(limit)) {\r\n    callback = limit;\r\n    limit = undefined;\r\n  }\r\n  var url;\r\n  if (type) {\r\n    url = [ this._baseUrl(), \"sobjects\", type ].join('/');\r\n    return this.request(url).then(function(res) {\r\n      return limit ? res.recentItems.slice(0, limit) : res.recentItems;\r\n    }).thenCall(callback);\r\n  } else {\r\n    url = this._baseUrl() + \"/recent\";\r\n    if (limit) {\r\n      url += \"?limit=\" + limit;\r\n    }\r\n    return this.request(url).thenCall(callback);\r\n  }\r\n\r\n};\r\n\r\n/**\r\n * @typedef {Object} UpdatedRecordsInfo\r\n * @prop {String} latestDateCovered - The timestamp of the last date covered.\r\n * @prop {Array.<String>} ids - Updated record IDs.\r\n */\r\n\r\n/**\r\n * Retrieve updated records\r\n *\r\n * @param {String} type - SObject Type\r\n * @param {String|Date} start - start date or string representing the start of the interval\r\n * @param {String|Date} end - start date or string representing the end of the interval must be > start\r\n * @param {Callback.<UpdatedRecordsInfo>} [callback] - Callback function\r\n * @returns {Promise.<UpdatedRecordsInfo>}\r\n */\r\nConnection.prototype.updated = function (type, start, end, callback) {\r\n  var url = [ this._baseUrl(), \"sobjects\", type, \"updated\" ].join('/');\r\n\r\n  if (typeof start === 'string') {\r\n    start = new Date(start);\r\n  }\r\n\r\n  if (start instanceof Date) {\r\n    start = formatDate(start);\r\n  }\r\n\r\n  if (start) {\r\n    url += \"?start=\" + encodeURIComponent(start);\r\n  }\r\n\r\n  if (typeof end === 'string') {\r\n    end = new Date(end);\r\n  }\r\n\r\n  if (end instanceof Date) {\r\n    end = formatDate(end);\r\n  }\r\n\r\n  if (end) {\r\n    url += \"&end=\" + encodeURIComponent(end);\r\n  }\r\n\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} DeletedRecordsInfo\r\n * @prop {String} earliestDateAvailable - The timestamp of the earliest date available\r\n * @prop {String} latestDateCovered - The timestamp of the last date covered\r\n * @prop {Array.<Object>} deletedRecords - Updated records\r\n * @prop {String} deletedRecords.id - Record ID\r\n * @prop {String} deletedRecords.deletedDate - The timestamp when this record was deleted\r\n */\r\n\r\n/**\r\n * Retrieve deleted records\r\n *\r\n * @param {String} type - SObject Type\r\n * @param {String|Date} start - start date or string representing the start of the interval\r\n * @param {String|Date} end - start date or string representing the end of the interval\r\n * @param {Callback.<DeletedRecordsInfo>} [callback] - Callback function\r\n * @returns {Promise.<DeletedRecordsInfo>}\r\n */\r\nConnection.prototype.deleted = function (type, start, end, callback) {\r\n  var url = [ this._baseUrl(), \"sobjects\", type, \"deleted\" ].join('/');\r\n\r\n  if (typeof start === 'string') {\r\n    start = new Date(start);\r\n  }\r\n\r\n  if (start instanceof Date) {\r\n    start = formatDate(start);\r\n  }\r\n\r\n  if (start) {\r\n    url += \"?start=\" + encodeURIComponent(start);\r\n  }\r\n\r\n  if (typeof end === 'string') {\r\n    end = new Date(end);\r\n  }\r\n\r\n  if (end instanceof Date) {\r\n    end = formatDate(end);\r\n  }\r\n\r\n  if (end) {\r\n    url += \"&end=\" + encodeURIComponent(end);\r\n  }\r\n\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * @typedef {Object} TabsInfo - See the API document for detail structure\r\n */\r\n\r\n/**\r\n * Returns a list of all tabs\r\n *\r\n * @param {Callback.<TabsInfo>} [callback] - Callback function\r\n * @returns {Promise.<TabsInfo>}\r\n */\r\nConnection.prototype.tabs = function(callback) {\r\n  var url = [ this._baseUrl(), \"tabs\" ].join('/');\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * @typedef {Object} LimitsInfo - See the API document for detail structure\r\n */\r\n\r\n/**\r\n * Returns curren system limit in the organization\r\n *\r\n * @param {Callback.<LimitsInfo>} [callback] - Callback function\r\n * @returns {Promise.<LimitsInfo>}\r\n */\r\nConnection.prototype.limits = function(callback) {\r\n  var url = [ this._baseUrl(), \"limits\" ].join('/');\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * @typedef {Object} ThemeInfo - See the API document for detail structure\r\n */\r\n\r\n/**\r\n * Returns a theme info\r\n *\r\n * @param {Callback.<ThemeInfo>} [callback] - Callback function\r\n * @returns {Promise.<ThemeInfo>}\r\n */\r\nConnection.prototype.theme = function(callback) {\r\n  var url = [ this._baseUrl(), \"theme\" ].join('/');\r\n  return this.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Returns all registered global quick actions\r\n *\r\n * @param {Callback.<Array.<QuickAction~QuickActionInfo>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<QuickAction~QuickActionInfo>>}\r\n */\r\nConnection.prototype.quickActions = function(callback) {\r\n  return this.request(\"/quickActions\").thenCall(callback);\r\n};\r\n\r\n/**\r\n * Get reference for specified global quick aciton\r\n *\r\n * @param {String} actionName - Name of the global quick action\r\n * @returns {QuickAction}\r\n */\r\nConnection.prototype.quickAction = function(actionName) {\r\n  return new QuickAction(this, \"/quickActions/\" + actionName);\r\n};\r\n\r\n}).call(this,require(\"buffer\").Buffer)\r\n\r\n},{\"./cache\":18,\"./core\":20,\"./http-api\":23,\"./logger\":24,\"./oauth2\":25,\"./process\":26,\"./promise\":27,\"./query\":28,\"./quick-action\":29,\"./sobject\":34,\"./transport\":36,\"buffer\":41,\"events\":47,\"inherits\":84,\"lodash/core\":88}],20:[function(require,module,exports){\r\n/**\r\n * @file JSforce Core\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n'use strict';\r\n\r\nvar EventEmitter = require('events').EventEmitter;\r\n\r\nvar jsforce = module.exports = new EventEmitter();\r\njsforce.VERSION = require('./VERSION');\r\njsforce.Connection = require('./connection');\r\njsforce.OAuth2 = require('./oauth2');\r\njsforce.Date = jsforce.SfDate = require(\"./date\");\r\njsforce.RecordStream = require('./record-stream');\r\njsforce.Promise = require('./promise');\r\njsforce.require = require('./require');\r\n\r\n},{\"./VERSION\":2,\"./connection\":19,\"./date\":22,\"./oauth2\":25,\"./promise\":27,\"./record-stream\":30,\"./require\":32,\"events\":47}],21:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar _ = require('lodash/core'),\r\n    csvParse = require('csv-parse'),\r\n    csvParseSync = require('csv-parse/lib/sync'),\r\n    csvStringify = require('csv-stringify'),\r\n    csvStringifySync = require('csv-stringify/lib/sync');\r\n\r\n/**\r\n * @private\r\n */\r\nfunction parseCSV(str, options) {\r\n  options = _.extend({}, options, { columns: true });\r\n  return csvParseSync(str, options);\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nfunction toCSV(records, options) {\r\n  options = _.extend({}, options, { header: true });\r\n  return csvStringifySync(records, options);\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nfunction parseCSVStream(options) {\r\n  options = _.extend({}, options, { columns: true });\r\n  return csvParse(options);\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nfunction serializeCSVStream(options) {\r\n  options = _.extend({}, options, { header: true });\r\n  return csvStringify(options);\r\n}\r\n\r\n\r\n/**\r\n * @protected\r\n */\r\nmodule.exports = {\r\n  parseCSV: parseCSV,\r\n  toCSV: toCSV,\r\n  parseCSVStream: parseCSVStream,\r\n  serializeCSVStream: serializeCSVStream\r\n};\r\n\r\n},{\"csv-parse\":43,\"csv-parse/lib/sync\":44,\"csv-stringify\":45,\"csv-stringify/lib/sync\":46,\"lodash/core\":88}],22:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar _ = require('lodash/core');\r\n\r\n/**\r\n * A date object to keep Salesforce date literal\r\n *\r\n * @class\r\n * @constructor\r\n * @see http://www.salesforce.com/us/developer/docs/soql_sosl/Content/sforce_api_calls_soql_select_dateformats.htm\r\n */\r\nvar SfDate = module.exports = function(literal) {\r\n  this._literal = literal;\r\n};\r\n\r\n/**\r\n * Returns literal when converted to string\r\n *\r\n * @override\r\n */\r\nSfDate.prototype.toString =\r\nSfDate.prototype.toJSON = function() { return this._literal; };\r\n\r\n\r\n/** @private **/\r\nfunction zeropad(n) { return (n<10 ? \"0\" : \"\") + n; }\r\n\r\n/**\r\n * Convert JavaScript date object to ISO8601 Date format (e.g. 2012-10-31)\r\n *\r\n * @param {String|Number|Date} date - Input date\r\n * @returns {SfDate} - Salesforce date literal with ISO8601 date format\r\n */\r\nSfDate.toDateLiteral = function(date) {\r\n  if (_.isNumber(date)) {\r\n    date = new Date(date);\r\n  } else if (_.isString(date)) {\r\n    date = SfDate.parseDate(date);\r\n  }\r\n  var yy = date.getFullYear();\r\n  var mm = date.getMonth()+1;\r\n  var dd = date.getDate();\r\n  var dstr = [ yy, zeropad(mm), zeropad(dd) ].join(\"-\");\r\n  return new SfDate(dstr);\r\n};\r\n\r\n/**\r\n * Convert JavaScript date object to ISO8601 DateTime format\r\n * (e.g. 2012-10-31T12:34:56Z)\r\n *\r\n * @param {String|Number|Date} date - Input date\r\n * @returns {SfDate} - Salesforce date literal with ISO8601 datetime format\r\n */\r\nSfDate.toDateTimeLiteral = function(date) {\r\n  if (_.isNumber(date)) {\r\n    date = new Date(date);\r\n  } else if (_.isString(date)) {\r\n    date = SfDate.parseDate(date);\r\n  }\r\n  var yy = date.getUTCFullYear();\r\n  var mm = date.getUTCMonth()+1;\r\n  var dd = date.getUTCDate();\r\n  var hh = date.getUTCHours();\r\n  var mi = date.getUTCMinutes();\r\n  var ss = date.getUTCSeconds();\r\n  var dtstr =\r\n    [ yy, zeropad(mm), zeropad(dd) ].join(\"-\") + \"T\" +\r\n    [ zeropad(hh), zeropad(mi), zeropad(ss) ].join(\":\") + \"Z\";\r\n  return new SfDate(dtstr);\r\n};\r\n\r\n/**\r\n * Parse IS08601 date(time) formatted string and return date instance\r\n *\r\n * @param {String} str\r\n * @returns {Date}\r\n */\r\nSfDate.parseDate = function(str) {\r\n  var d = new Date();\r\n  var regexp = /^([\\d]{4})-?([\\d]{2})-?([\\d]{2})(T([\\d]{2}):?([\\d]{2}):?([\\d]{2})(.([\\d]{3}))?(Z|([\\+\\-])([\\d]{2}):?([\\d]{2})))?$/;\r\n  var m = str.match(regexp);\r\n  if (m) {\r\n    d = new Date(0);\r\n    if (!m[4]) {\r\n      d.setFullYear(parseInt(m[1], 10));\r\n      d.setDate(parseInt(m[3], 10));\r\n      d.setMonth(parseInt(m[2], 10) - 1);\r\n      d.setHours(0);\r\n      d.setMinutes(0);\r\n      d.setSeconds(0);\r\n      d.setMilliseconds(0);\r\n    } else {\r\n      d.setUTCFullYear(parseInt(m[1], 10));\r\n      d.setUTCDate(parseInt(m[3], 10));\r\n      d.setUTCMonth(parseInt(m[2], 10) - 1);\r\n      d.setUTCHours(parseInt(m[5], 10));\r\n      d.setUTCMinutes(parseInt(m[6], 10));\r\n      d.setUTCSeconds(parseInt(m[7], 10));\r\n      d.setUTCMilliseconds(parseInt(m[9] || '0', 10));\r\n      if (m[10] && m[10] !== 'Z') {\r\n        var offset = parseInt(m[12],10) * 60 + parseInt(m[13], 10);\r\n        d.setTime((m[11] === '+' ? -1 : 1) * offset * 60 * 1000 +d.getTime());\r\n      }\r\n    }\r\n    return d;\r\n  } else {\r\n    throw new Error(\"Invalid date format is specified : \" + str);\r\n  }\r\n};\r\n\r\n/*\r\n * Pre-defined Salesforce Date Literals\r\n */\r\nvar SfDateLiterals = {\r\n  YESTERDAY: 1,\r\n  TODAY: 1,\r\n  TOMORROW: 1,\r\n  LAST_WEEK: 1,\r\n  THIS_WEEK: 1,\r\n  NEXT_WEEK: 1,\r\n  LAST_MONTH: 1,\r\n  THIS_MONTH: 1,\r\n  NEXT_MONTH: 1,\r\n  LAST_90_DAYS: 1,\r\n  NEXT_90_DAYS: 1,\r\n  LAST_N_DAYS: 2,\r\n  NEXT_N_DAYS: 2,\r\n  NEXT_N_WEEKS: 2,\r\n  LAST_N_WEEKS: 2,\r\n  NEXT_N_MONTHS: 2,\r\n  LAST_N_MONTHS: 2,\r\n  THIS_QUARTER: 1,\r\n  LAST_QUARTER: 1,\r\n  NEXT_QUARTER: 1,\r\n  NEXT_N_QUARTERS: 2,\r\n  LAST_N_QUARTERS: 2,\r\n  THIS_YEAR: 1,\r\n  LAST_YEAR: 1,\r\n  NEXT_YEAR: 1,\r\n  NEXT_N_YEARS: 2,\r\n  LAST_N_YEARS: 2,\r\n  THIS_FISCAL_QUARTER: 1,\r\n  LAST_FISCAL_QUARTER: 1,\r\n  NEXT_FISCAL_QUARTER: 1,\r\n  NEXT_N_FISCAL_QUARTERS:2,\r\n  LAST_N_FISCAL_QUARTERS:2,\r\n  THIS_FISCAL_YEAR:1,\r\n  LAST_FISCAL_YEAR:1,\r\n  NEXT_FISCAL_YEAR:1,\r\n  NEXT_N_FISCAL_YEARS: 2,\r\n  LAST_N_FISCAL_YEARS: 2\r\n};\r\n\r\nfor (var literal in SfDateLiterals) {\r\n  var type = SfDateLiterals[literal];\r\n  SfDate[literal] =\r\n   type === 1 ? new SfDate(literal) : createLiteralBuilder(literal);\r\n}\r\n\r\n/** @private **/\r\nfunction createLiteralBuilder(literal) {\r\n  return function(num) { return new SfDate(literal + \":\" + num); };\r\n}\r\n\r\n},{\"lodash/core\":88}],23:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar inherits = require('inherits'),\r\n    events = require('events'),\r\n    _ = require('lodash/core'),\r\n    Promise = require('./promise');\r\n\r\n/**\r\n * HTTP based API class with authorization hook\r\n *\r\n * @constructor\r\n * @extends events.EventEmitter\r\n * @param {Connection} conn - Connection object\r\n * @param {Object} [options] - Http API Options\r\n * @param {String} [options.responseType] - Overriding content mime-type in response\r\n * @param {Transport} [options.transport] - Transport for http api\r\n * @param {Object} [options.noContentResponse] - Alternative response when no content returned in response (= HTTP 204)\r\n */\r\nvar HttpApi = function(conn, options) {\r\n  options = options || {};\r\n  this._conn = conn;\r\n  this.on('resume', function(err) { conn.emit('resume', err); });\r\n  this._responseType = options.responseType;\r\n  this._transport = options.transport || conn._transport;\r\n  this._noContentResponse = options.noContentResponse;\r\n};\r\n\r\ninherits(HttpApi, events.EventEmitter);\r\n\r\n/**\r\n * Callout to API endpoint using http\r\n *\r\n * @param {Object} request - Http Request object\r\n * @param {String} request.url - Endpoint URL to request\r\n * @param {String} request.method - Http method for request\r\n * @param {Object} [request.headers] - Http request headers in hash object\r\n * @param {Callback.<Object>} callback - Callback function\r\n * @returns {Promise.<Object>} -\r\n */\r\nHttpApi.prototype.request = function(request, callback) {\r\n  var self = this;\r\n  var conn = this._conn;\r\n  var logger = conn._logger;\r\n  var refreshDelegate = this.getRefreshDelegate();\r\n  // remember previous instance url in case it changes after a refresh\r\n  var lastInstanceUrl = conn.instanceUrl;\r\n\r\n  var deferred = Promise.defer();\r\n\r\n  var onResume = function(err) {\r\n    if (err) {\r\n      deferred.reject(err);\r\n      return;\r\n    }\r\n    // check to see if the token refresh has changed the instance url\r\n    if(lastInstanceUrl !== conn.instanceUrl){\r\n      // if the instance url has changed\r\n      // then replace the current request urls instance url fragment\r\n      // with the updated instance url\r\n      request.url = request.url.replace(lastInstanceUrl,conn.instanceUrl);\r\n    }\r\n\r\n    self.request(request).then(function(response) {\r\n      deferred.resolve(response);\r\n    }, function(err) {\r\n      deferred.reject(err);\r\n    });\r\n  };\r\n\r\n  if (refreshDelegate && refreshDelegate._refreshing) {\r\n    refreshDelegate.once('resume', onResume);\r\n    return deferred.promise.thenCall(callback);\r\n  }\r\n\r\n  // hook before sending\r\n  self.beforeSend(request);\r\n\r\n  self.emit('request', request);\r\n  logger.debug(\"<request> method=\" + request.method + \", url=\" + request.url);\r\n  var requestTime = Date.now();\r\n\r\n  return this._transport.httpRequest(request).then(function(response) {\r\n    var responseTime = Date.now();\r\n    logger.debug(\"elappsed time : \" + (responseTime - requestTime) + \"msec\");\r\n    logger.debug(\"<response> status=\" + response.statusCode + \", url=\" + request.url);\r\n\r\n    self.emit('response', response);\r\n    // Refresh token if session has been expired and requires authentication\r\n    // when session refresh delegate is available\r\n    if (self.isSessionExpired(response) && refreshDelegate) {\r\n      refreshDelegate.refresh(requestTime, onResume);\r\n      return deferred.promise;\r\n    }\r\n    if (self.isErrorResponse(response)) {\r\n      var err = self.getError(response);\r\n      throw err;\r\n    }\r\n    return self.getResponseBody(response);\r\n  }, function(err) {\r\n    var responseTime = Date.now();\r\n    logger.debug(\"elappsed time : \" + (responseTime - requestTime) + \"msec\");\r\n    logger.error(err);\r\n    throw err;\r\n  })\r\n  .thenCall(callback);\r\n};\r\n\r\n/**\r\n * @protected\r\n */\r\nHttpApi.prototype.getRefreshDelegate = function() {\r\n  return this._conn._refreshDelegate;\r\n};\r\n\r\n/**\r\n *\r\n * @protected\r\n */\r\nHttpApi.prototype.beforeSend = function(request) {\r\n  request.headers = request.headers || {};\r\n  if (this._conn.accessToken) {\r\n    request.headers.Authorization = \"Bearer \" + this._conn.accessToken;\r\n  }\r\n  if (this._conn.callOptions) {\r\n    var callOptions = [];\r\n    for (var name in this._conn.callOptions) {\r\n      callOptions.push(name + \"=\" + this._conn.callOptions[name]);\r\n    }\r\n    request.headers[\"Sforce-Call-Options\"] = callOptions.join(', ');\r\n  }\r\n};\r\n\r\n/**\r\n * Detect response content mime-type\r\n * @protected\r\n */\r\nHttpApi.prototype.getResponseContentType = function(response) {\r\n  return this._responseType || response.headers && response.headers[\"content-type\"];\r\n};\r\n\r\n/**\r\n *\r\n */\r\nHttpApi.prototype.parseResponseBody = function(response) {\r\n  var contentType = this.getResponseContentType(response);\r\n  var parseBody = /^(text|application)\\/xml(;|$)/.test(contentType) ? parseXML :\r\n         /^application\\/json(;|$)/.test(contentType) ? parseJSON :\r\n         /^text\\/csv(;|$)/.test(contentType) ? parseCSV :\r\n         parseText;\r\n  try {\r\n    return parseBody(response.body);\r\n  } catch(e) {\r\n    return response.body;\r\n  }\r\n};\r\n\r\n/**\r\n * Get response body\r\n * @protected\r\n */\r\nHttpApi.prototype.getResponseBody = function(response) {\r\n  if (response.statusCode === 204) { // No Content\r\n    return this._noContentResponse;\r\n  }\r\n  var body = this.parseResponseBody(response);\r\n  var err;\r\n  if (this.hasErrorInResponseBody(body)) {\r\n    err = this.getError(response, body);\r\n    throw err;\r\n  }\r\n  if (response.statusCode === 300) { // Multiple Choices\r\n    err = new Error('Multiple records found');\r\n    err.name = \"MULTIPLE_CHOICES\";\r\n    err.content = body;\r\n    throw err;\r\n  }\r\n  return body;\r\n};\r\n\r\n/** @private */\r\nfunction parseJSON(str) {\r\n  return JSON.parse(str);\r\n}\r\n\r\n/** @private */\r\nfunction parseXML(str) {\r\n  var ret = {};\r\n  require('xml2js').parseString(str, { explicitArray: false }, function(err, result) {\r\n    ret = { error: err, result : result };\r\n  });\r\n  if (ret.error) { throw ret.error; }\r\n  return ret.result;\r\n}\r\n\r\n/** @private */\r\nfunction parseCSV(str) {\r\n  return require('./csv').parseCSV(str);\r\n}\r\n\r\n/** @private */\r\nfunction parseText(str) { return str; }\r\n\r\n\r\n/**\r\n * Detect session expiry\r\n * @protected\r\n */\r\nHttpApi.prototype.isSessionExpired = function(response) {\r\n  return response.statusCode === 401;\r\n};\r\n\r\n/**\r\n * Detect error response\r\n * @protected\r\n */\r\nHttpApi.prototype.isErrorResponse = function(response) {\r\n  return response.statusCode >= 400;\r\n};\r\n\r\n/**\r\n * Detect error in response body\r\n * @protected\r\n */\r\nHttpApi.prototype.hasErrorInResponseBody = function(body) {\r\n  return false;\r\n};\r\n\r\n/**\r\n * Parsing error message in response\r\n * @protected\r\n */\r\nHttpApi.prototype.parseError = function(body) {\r\n  var errors = body;\r\n  return _.isArray(errors) ? errors[0] : errors;\r\n};\r\n\r\n/**\r\n * Get error message in response\r\n * @protected\r\n */\r\nHttpApi.prototype.getError = function(response, body) {\r\n  var error;\r\n  try {\r\n    error = this.parseError(body || this.parseResponseBody(response));\r\n  } catch(e) {}\r\n  error = _.isObject(error) && _.isString(error.message) ? error : {\r\n    errorCode: 'ERROR_HTTP_' + response.statusCode,\r\n    message : response.body\r\n  };\r\n  var err = new Error(error.message);\r\n  err.name = error.errorCode;\r\n  for (var key in error) { err[key] = error[key]; }\r\n  return err;\r\n};\r\n\r\n/*-------------------------------------------------------------------------*/\r\n\r\n/**\r\n * @protected\r\n */\r\nvar SessionRefreshDelegate = function(conn, refreshFn) {\r\n  this._conn = conn;\r\n  this._refreshFn = refreshFn;\r\n  this._refreshing = false;\r\n};\r\n\r\ninherits(SessionRefreshDelegate, events.EventEmitter);\r\n\r\n/**\r\n * Refresh access token\r\n * @private\r\n */\r\nSessionRefreshDelegate.prototype.refresh = function(since, callback) {\r\n  // Callback immediately When refreshed after designated time\r\n  if (this._lastRefreshedAt > since) { return callback(); }\r\n  var self = this;\r\n  var conn = this._conn;\r\n  var logger = conn._logger;\r\n  self.once('resume', callback);\r\n  if (self._refreshing) { return; }\r\n  logger.debug(\"<refresh token>\");\r\n  self._refreshing = true;\r\n  return self._refreshFn(conn, function(err, accessToken, res) {\r\n    if (!err) {\r\n      logger.debug(\"Connection refresh completed.\");\r\n      conn.accessToken = accessToken;\r\n      conn.emit(\"refresh\", accessToken, res);\r\n    }\r\n    self._lastRefreshedAt = Date.now();\r\n    self._refreshing = false;\r\n    self.emit('resume', err);\r\n  });\r\n};\r\n\r\n\r\n/**\r\n *\r\n */\r\nHttpApi.SessionRefreshDelegate = SessionRefreshDelegate;\r\nmodule.exports = HttpApi;\r\n\r\n},{\"./csv\":21,\"./promise\":27,\"events\":47,\"inherits\":84,\"lodash/core\":88,\"xml2js\":123}],24:[function(require,module,exports){\r\n'use strict';\r\n\r\n/**\r\n * @protected\r\n * @class\r\n * @constructor\r\n * @param {String|Number} logLevel - Log level\r\n */\r\nvar Logger = module.exports = function(logLevel) {\r\n  if (typeof logLevel === 'string') {\r\n    logLevel = LogLevels[logLevel];\r\n  }\r\n  if (!logLevel) {\r\n    logLevel = LogLevels.INFO;\r\n  }\r\n  this._logLevel = logLevel;\r\n};\r\n\r\n/**\r\n * @memberof Logger\r\n */\r\nvar LogLevels = Logger.LogLevels = {\r\n  \"DEBUG\" : 1,\r\n  \"INFO\" : 2,\r\n  \"WARN\" : 3,\r\n  \"ERROR\" : 4,\r\n  \"FATAL\" : 5\r\n};\r\n\r\n/**\r\n * Output log\r\n *\r\n * @param {String} level - Logging target level\r\n * @param {String} message - Message to log\r\n */\r\nLogger.prototype.log = function(level, message) {\r\n  if (this._logLevel <= level) {\r\n    if (level < LogLevels.ERROR) {\r\n      console.log(message);\r\n    } else {\r\n      console.error(message);\r\n    }\r\n  }\r\n};\r\n\r\nfor (var level in LogLevels) {\r\n  Logger.prototype[level.toLowerCase()] = createLoggerFunction(LogLevels[level]);\r\n}\r\n\r\nfunction createLoggerFunction(level) {\r\n  return function(message) { this.log(level, message); };\r\n}\r\n\r\n},{}],25:[function(require,module,exports){\r\n/**\r\n * @file Manages Salesforce OAuth2 operations\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar querystring = require('querystring'),\r\n    _ = require('lodash/core'),\r\n    Transport = require('./transport');\r\n\r\nvar defaults = {\r\n  loginUrl : \"https://login.salesforce.com\"\r\n};\r\n\r\n/**\r\n * OAuth2 class\r\n *\r\n * @class\r\n * @constructor\r\n * @param {Object} options - OAuth2 config options\r\n * @param {String} [options.loginUrl] - Salesforce login server URL\r\n * @param {String} [options.authzServiceUrl] - OAuth2 authorization service URL. If not specified, it generates from default by adding to login server URL.\r\n * @param {String} [options.tokenServiceUrl] - OAuth2 token service URL. If not specified it generates from default by adding to login server URL.\r\n * @param {String} options.clientId - OAuth2 client ID.\r\n * @param {String} [options.clientSecret] - OAuth2 client secret (This is optional for public client).\r\n * @param {String} options.redirectUri - URI to be callbacked from Salesforce OAuth2 authorization service.\r\n */\r\nvar OAuth2 = module.exports = function(options) {\r\n  if (options.authzServiceUrl && options.tokenServiceUrl) {\r\n    this.loginUrl = options.authzServiceUrl.split('/').slice(0, 3).join('/');\r\n    this.authzServiceUrl = options.authzServiceUrl;\r\n    this.tokenServiceUrl = options.tokenServiceUrl;\r\n    this.revokeServiceUrl = options.revokeServiceUrl;\r\n  } else {\r\n    this.loginUrl = options.loginUrl || defaults.loginUrl;\r\n    this.authzServiceUrl = this.loginUrl + \"/services/oauth2/authorize\";\r\n    this.tokenServiceUrl = this.loginUrl + \"/services/oauth2/token\";\r\n    this.revokeServiceUrl = this.loginUrl + \"/services/oauth2/revoke\";\r\n  }\r\n  this.clientId = options.clientId;\r\n  this.clientSecret = options.clientSecret;\r\n  this.redirectUri = options.redirectUri;\r\n  if (options.proxyUrl) {\r\n    this._transport = new Transport.ProxyTransport(options.proxyUrl);\r\n  } else if (options.httpProxy) {\r\n    this._transport = new Transport.HttpProxyTransport(options.httpProxy);\r\n  } else {\r\n    this._transport = new Transport();\r\n  }\r\n};\r\n\r\n\r\n\r\n/**\r\n *\r\n */\r\n_.extend(OAuth2.prototype, /** @lends OAuth2.prototype **/ {\r\n\r\n  /**\r\n   * Get Salesforce OAuth2 authorization page URL to redirect user agent.\r\n   *\r\n   * @param {Object} params - Parameters\r\n   * @param {String} [params.scope] - Scope values in space-separated string\r\n   * @param {String} [params.state] - State parameter\r\n   * @param {String} [params.code_challenge] - Code challenge value (RFC 7636 - Proof Key of Code Exchange)\r\n   * @returns {String} Authorization page URL\r\n   */\r\n  getAuthorizationUrl : function(params) {\r\n    params = _.extend({\r\n      response_type : \"code\",\r\n      client_id : this.clientId,\r\n      redirect_uri : this.redirectUri\r\n    }, params || {});\r\n    return this.authzServiceUrl +\r\n      (this.authzServiceUrl.indexOf('?') >= 0 ? \"&\" : \"?\") +\r\n      querystring.stringify(params);\r\n  },\r\n\r\n  /**\r\n   * @typedef TokenResponse\r\n   * @type {Object}\r\n   * @property {String} access_token\r\n   * @property {String} refresh_token\r\n   */\r\n\r\n  /**\r\n   * OAuth2 Refresh Token Flow\r\n   *\r\n   * @param {String} refreshToken - Refresh token\r\n   * @param {Callback.<TokenResponse>} [callback] - Callback function\r\n   * @returns {Promise.<TokenResponse>}\r\n   */\r\n  refreshToken : function(refreshToken, callback) {\r\n    var params = {\r\n      grant_type : \"refresh_token\",\r\n      refresh_token : refreshToken,\r\n      client_id : this.clientId\r\n    };\r\n    if (this.clientSecret) {\r\n      params.client_secret = this.clientSecret;\r\n    }\r\n    return this._postParams(params, callback);\r\n  },\r\n\r\n  /**\r\n   * OAuth2 Web Server Authentication Flow (Authorization Code)\r\n   * Access Token Request\r\n   *\r\n   * @param {String} code - Authorization code\r\n   * @param {Object} [params] - Optional parameters to send in token retrieval\r\n   * @param {String} [params.code_verifier] - Code verifier value (RFC 7636 - Proof Key of Code Exchange)\r\n   * @param {Callback.<TokenResponse>} [callback] - Callback function\r\n   * @returns {Promise.<TokenResponse>}\r\n   */\r\n  requestToken : function(code, params, callback) {\r\n    if (typeof params === 'function') {\r\n      callback = params;\r\n      params = {};\r\n    }\r\n    params = _.extend({\r\n      grant_type : \"authorization_code\",\r\n      code : code,\r\n      client_id : this.clientId,\r\n      redirect_uri : this.redirectUri\r\n    }, params || {});\r\n    if (this.clientSecret) {\r\n      params.client_secret = this.clientSecret;\r\n    }\r\n    return this._postParams(params, callback);\r\n  },\r\n\r\n  /**\r\n   * OAuth2 Username-Password Flow (Resource Owner Password Credentials)\r\n   *\r\n   * @param {String} username - Salesforce username\r\n   * @param {String} password - Salesforce password\r\n   * @param {Callback.<TokenResponse>} [callback] - Callback function\r\n   * @returns {Promise.<TokenResponse>}\r\n   */\r\n  authenticate : function(username, password, callback) {\r\n    return this._postParams({\r\n      grant_type : \"password\",\r\n      username : username,\r\n      password : password,\r\n      client_id : this.clientId,\r\n      client_secret : this.clientSecret,\r\n      redirect_uri : this.redirectUri\r\n    }, callback);\r\n  },\r\n\r\n  /**\r\n   * OAuth2 Revoke Session or API Token\r\n   *\r\n   * @param {String} token - Access or Refresh token to revoke. Passing in the Access token revokes the session. Passing in the Refresh token revokes API Access.\r\n   * @param {Callback.<undefined>} [callback] - Callback function\r\n   * @returns {Promise.<undefined>}\r\n   */\r\n  revokeToken : function(token, callback) {\r\n    return this._transport.httpRequest({\r\n      method : 'POST',\r\n      url : this.revokeServiceUrl,\r\n      body: querystring.stringify({ token: token }),\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\r\n      }\r\n    }).then(function(response) {\r\n      if (response.statusCode >= 400) {\r\n        var res = querystring.parse(response.body);\r\n        if (!res || !res.error) {\r\n          res = { error: \"ERROR_HTTP_\"+response.statusCode, error_description: response.body };\r\n        }\r\n        var err = new Error(res.error_description);\r\n        err.name = res.error;\r\n        throw err;\r\n      }\r\n    }).thenCall(callback);\r\n  },\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  _postParams : function(params, callback) {\r\n    return this._transport.httpRequest({\r\n      method : 'POST',\r\n      url : this.tokenServiceUrl,\r\n      body : querystring.stringify(params),\r\n      headers : {\r\n        \"content-type\" : \"application/x-www-form-urlencoded\"\r\n      }\r\n    }).then(function(response) {\r\n      var res;\r\n      try {\r\n        res = JSON.parse(response.body);\r\n      } catch(e) {}\r\n      if (response.statusCode >= 400) {\r\n        res = res || { error: \"ERROR_HTTP_\"+response.statusCode, error_description: response.body };\r\n        var err = new Error(res.error_description);\r\n        err.name = res.error;\r\n        throw err;\r\n      }\r\n      return res;\r\n    }).thenCall(callback);\r\n  }\r\n\r\n});\r\n\r\n},{\"./transport\":36,\"lodash/core\":88,\"querystring\":96}],26:[function(require,module,exports){\r\n/**\r\n * @file Process class to manage/run workflow rule and approval process\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar _ = require('lodash/core'),\r\n    Promise = require('./promise'),\r\n    Conneciton = require('./connection');\r\n\r\n/**\r\n * A class which manages process rules and approval processes\r\n *\r\n * @class\r\n * @param {Connection} conn - Connection object\r\n */\r\nvar Process = module.exports = function(conn) {\r\n  /**\r\n   * Object which mangages process rules\r\n   * @member {Process~ProcessRule} Process#rule\r\n   */\r\n  this.rule = new ProcessRule(conn);\r\n  /**\r\n   * Object which mangages approval process\r\n   * @member {Process~ApprovalProcess} Process#approval\r\n   */\r\n  this.approval = new ApprovalProcess(conn);\r\n};\r\n\r\n/**\r\n * A class which manages process (workflow) rules\r\n *\r\n * @class Process~ProcessRule\r\n * @param {Connection} conn - Connection object\r\n */\r\nvar ProcessRule = function(conn) {\r\n  this._conn = conn;\r\n};\r\n\r\n/**\r\n * @typedef {Object} Process~ProcessRuleDefinition\r\n * @prop {String} id - Id of approval process definition\r\n * @prop {String} name - Name of process rule definition\r\n * @prop {String} object - SObject name which process rule is defined\r\n */\r\n\r\n/**\r\n * Get all process rule definitions registered to sobjects\r\n *\r\n * @method Process~ProcessRule#list\r\n * @param {Callback.<Map.<String, Array.<Process~ProcessRuleDefinition>>>} [callback] - Callback function\r\n * @returns {Promise.<Map.<String, Array.<Process~ProcessRuleDefinition>>>}\r\n */\r\nProcessRule.prototype.list = function(callback) {\r\n  return this._conn.request(\"/process/rules\").then(function(res) {\r\n    return res.rules;\r\n  }).thenCall(callback);\r\n};\r\n\r\n\r\n/**\r\n * @typedef {Object} Process~ProcessRuleTriggerResult\r\n * @prop {Boolean} success - Is process rule trigger succeeded or not\r\n * @prop {Array.<Object>} errors - Array of errors returned if the request failed\r\n */\r\n\r\n/**\r\n * Trigger process rule for given entities\r\n *\r\n * @method Process~ProcessRule#trigger\r\n * @param {String|Array.<String>} contextIds - Entity ID(s) to trigger workflow process\r\n * @param {Callback.<Process~ProcessRuleTriggerResult>} [callback] - Callback function\r\n * @returns {Promise.<Process~ProcessRuleTriggerResult>}\r\n */\r\nProcessRule.prototype.trigger = function(contextIds, callback) {\r\n  contextIds = _.isArray(contextIds) ? contextIds : [ contextIds ];\r\n  return this._conn.request({\r\n    method: \"POST\",\r\n    url: \"/process/rules/\",\r\n    body: JSON.stringify({\r\n      contextIds: contextIds\r\n    }),\r\n    headers: {\r\n      \"content-type\": \"application/json\"\r\n    }\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * A class which manages approval processes\r\n *\r\n * @class Process~ApprovalProcess\r\n * @param {Connection} conn - Connection object\r\n */\r\nvar ApprovalProcess = function(conn) {\r\n  this._conn = conn;\r\n};\r\n\r\n/**\r\n * @typedef {Object} Process~ApprovalProcessDefinition\r\n * @prop {String} id - Id of approval process definition\r\n * @prop {String} name - Name of approval process definition\r\n * @prop {String} object - SObject name which approval process is defined\r\n * @prop {Number} sortOrder - Processing order of approval in SObject\r\n */\r\n/**\r\n * Get all approval process definitions registered to sobjects\r\n *\r\n * @method Process~ApprovalProcess#list\r\n * @param {Callback.<Map.<String, Array.<ApprovalProcessDefinition>>>} [callback] - Callback function\r\n * @returns {Promise.<Map.<String, Array.<ApprovalProcessDefinition>>>}\r\n */\r\nApprovalProcess.prototype.list = function(callback) {\r\n  return this._conn.request(\"/process/approvals\").then(function(res) {\r\n    return res.approvals;\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} Process~ApprovalProcessRequestResult\r\n * @prop {Boolean} success - True if processing or approval completed successfully\r\n * @prop {Array.<Object>} errors - The set of errors returned if the request failed\r\n * @prop {Array.<String>} actorIds - IDs of the users who are currently assigned to this approval step\r\n * @prop {String} entityId - Object being processed\r\n * @prop {String} instanceId - ID of the ProcessInstance associated with the object submitted for processing\r\n * @prop {String} instanceStatus - Status of the current process instance (not an individual object but the entire process instance)\r\n * @prop {Array.<String>} newWorkItemIds - Case-insensitive IDs that point to ProcessInstanceWorkitem items (the set of pending approval requests)\r\n */\r\n\r\n/**\r\n * Send bulk requests for approval process\r\n *\r\n * @method Process~ApprovalProcess#request\r\n * @param {Array.<ApprovalProcessRequest>} requests - Array of approval process request to send\r\n * @param {Callback.<Array.<ApprovalProcessRequestResult>>} - Callback function\r\n * @param {Promise.<Array.<ApprovalProcessRequestResult>>}\r\n */\r\nApprovalProcess.prototype.request = function(requests, callback) {\r\n  requests = requests.map(function(req) {\r\n    return req._request ? req._request : req;\r\n  });\r\n  return this._conn.request({\r\n    method: 'POST',\r\n    url: '/process/approvals',\r\n    headers: { \"content-type\": \"application/json\" },\r\n    body: JSON.stringify({ requests: requests })\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Create approval process request\r\n *\r\n * @private\r\n */\r\nApprovalProcess.prototype._createRequest = function(actionType, contextId, comments, options, callback) {\r\n  if (typeof comments === \"function\") {\r\n    callback = comments;\r\n    options = null;\r\n    comments = null;\r\n  }\r\n  if (typeof options === \"function\") {\r\n    callback = options;\r\n    options = null;\r\n  }\r\n  options = options || {};\r\n  var request = {\r\n    actionType: actionType,\r\n    contextId: contextId,\r\n    comments: comments\r\n  };\r\n  _.extend(request, options);\r\n  return new ApprovalProcessRequest(this, request).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Submit approval request for an item\r\n *\r\n * @method Process~ApprovalProcess#submit\r\n * @param {String} contextId - ID of the item that is being acted upon\r\n * @param {String} [comments] - Comment to add to the history step associated with this request\r\n * @param {Object} [options] - Request parameters\r\n * @param {Array.<String>} [options.nextApproverIds] - If the process requires specification of the next approval, the ID of the user to be assigned the next request\r\n * @param {String} [options.processDefinitionNameOrId] - Developer name or ID of the process definition\r\n * @param {Boolean} [options.skipEntryCriteria] - Determines whether to evaluate the entry criteria for the process (true) or not (false) if the process definition name or ID isn’t null\r\n * @param {Callback.<ApprovalProcessRequestResult>} [callback] - Callback function\r\n * @returns {ApprovalProcessRequest}\r\n */\r\nApprovalProcess.prototype.submit = function(contextId, comments, options, callback) {\r\n  return this._createRequest(\"Submit\", contextId, comments, options, callback);\r\n};\r\n\r\n/**\r\n * Approve approval request for an item\r\n *\r\n * @method Process~ApprovalProcess#approve\r\n * @param {String} workitemId - ID of the item that is being acted upon\r\n * @param {String} [comments] - Comment to add to the history step associated with this request\r\n * @param {Object} [options] - Request parameters\r\n * @param {Array.<String>} [options.nextApproverIds] - If the process requires specification of the next approval, the ID of the user to be assigned the next request\r\n * @param {String} [options.processDefinitionNameOrId] - Developer name or ID of the process definition\r\n * @param {Boolean} [options.skipEntryCriteria] - Determines whether to evaluate the entry criteria for the process (true) or not (false) if the process definition name or ID isn’t null\r\n * @param {Callback.<ApprovalProcessRequestResult>} [callback] - Callback function\r\n * @returns {ApprovalProcessRequest}\r\n */\r\nApprovalProcess.prototype.approve = function(workitemId, comments, options, callback) {\r\n  return this._createRequest(\"Approve\", workitemId, comments, options, callback);\r\n};\r\n\r\n/**\r\n * Reject approval request for an item\r\n *\r\n * @method Process~ApprovalProcess#reject\r\n * @param {String} workitemId - ID of the item that is being acted upon\r\n * @param {String} [comments] - Comment to add to the history step associated with this request\r\n * @param {Object} [options] - Request parameters\r\n * @param {Array.<String>} [options.nextApproverIds] - If the process requires specification of the next approval, the ID of the user to be assigned the next request\r\n * @param {String} [options.processDefinitionNameOrId] - Developer name or ID of the process definition\r\n * @param {Boolean} [options.skipEntryCriteria] - Determines whether to evaluate the entry criteria for the process (true) or not (false) if the process definition name or ID isn’t null\r\n * @param {Callback.<ApprovalProcessRequestResult>} [callback] - Callback function\r\n * @returns {ApprovalProcessRequest}\r\n */\r\nApprovalProcess.prototype.reject = function(workitemId, comments, options, callback) {\r\n  return this._createRequest(\"Reject\", workitemId, comments, options, callback);\r\n};\r\n\r\n/**\r\n * A class representing approval process request\r\n *\r\n * @protected\r\n * @class Process~ApprovalProcessRequest\r\n * @implements {Promise.<Process~ApprovalProcessRequestResult>}\r\n * @param {Process~ApprovalProcess} process - ApprovalProcess\r\n * @param {Object} request - Request parameters\r\n * @param {String} request.actionType - Represents the kind of action to take: Submit, Approve, or Reject\r\n * @param {String} request.contextId - ID of the item that is being acted upon\r\n * @param {String} request.comments - Comment to add to the history step associated with this request\r\n * @param {Array.<String>} [request.nextApproverIds] - If the process requires specification of the next approval, the ID of the user to be assigned the next request\r\n * @param {String} [request.processDefinitionNameOrId] - Developer name or ID of the process definition\r\n * @param {Boolean} [request.skipEntryCriteria] - Determines whether to evaluate the entry criteria for the process (true) or not (false) if the process definition name or ID isn’t null\r\n */\r\nvar ApprovalProcessRequest = function(process, request) {\r\n  this._process = process;\r\n  this._request = request;\r\n};\r\n\r\n/**\r\n * Promise/A+ interface\r\n * http://promises-aplus.github.io/promises-spec/\r\n *\r\n * @method Process~ApprovalProcessRequest#then\r\n */\r\nApprovalProcessRequest.prototype.then = function(onResolve, onReject) {\r\n  if (!this._promise) {\r\n    this._promise = this._process.request([ this ]).then(function(rets) {\r\n      return rets[0];\r\n    });\r\n  }\r\n  this._promise.then(onResolve, onReject);\r\n};\r\n\r\n/**\r\n * Promise/A+ extension\r\n * Call \"then\" using given node-style callback function\r\n *\r\n * @method Process~ApprovalProcessRequest#thenCall\r\n */\r\nApprovalProcessRequest.prototype.thenCall = function(callback) {\r\n  return callback ? this.then(function(res) {\r\n    callback(null, res);\r\n  }, function(err) {\r\n    callback(err);\r\n  }) :\r\n  this;\r\n};\r\n\r\n},{\"./connection\":19,\"./promise\":27,\"lodash/core\":88}],27:[function(require,module,exports){\r\n(function (process){\r\n/*global process*/\r\n\r\n'use strict';\r\n\r\nvar _ = require('lodash/core');\r\n\r\n/**\r\n * @callback ResolvedCallback\r\n * @param {T} result - Resolved value\r\n * @returns {S}\r\n * @template T,S\r\n */\r\n\r\n/**\r\n * @callback RejectedCallback\r\n * @param {Error} reason - Rejected reason\r\n * @returns {S}\r\n * @template S\r\n */\r\n\r\n/**\r\n * @callback ResolveCallback\r\n * @param {T} result\r\n * @template T\r\n */\r\n\r\n/**\r\n * @callback RejectedCallback\r\n * @param {Error} reason - Rejected reason\r\n * @returns {S}\r\n * @template S\r\n */\r\n\r\n/**\r\n * @callback PromiseCallback\r\n * @param {ResolveCallback.<T>} resolve\r\n * @param {RejectCallback} reject\r\n * @template T\r\n */\r\n\r\n/**\r\n * Promise class with a little extension\r\n *\r\n * @class Promise\r\n * @constructor\r\n * @param {PromiseCallback.<T>}\r\n * @template T\r\n */\r\nvar Promise = require('promise/lib/es6-extensions');\r\n\r\n/**\r\n * The \"then\" method from the Promises/A+ specification\r\n *\r\n * @method Promise#then\r\n * @param {FulfilledCallback.<T, S1>} [onFulfilled]\r\n * @param {RejectedCallback.<S2>} [onRejected]\r\n * @returns {Promise.<S1|S2>}\r\n */\r\n\r\n/**\r\n * Call \"then\" using given node-style callback function.\r\n * This is basically same as \"nodeify\" except that it always return the original promise\r\n *\r\n * @method Promise#thenCall\r\n * @param {Callback.<T>} [callback] - Callback function\r\n * @returns {Promise}\r\n */\r\nPromise.prototype.thenCall = function(callback) {\r\n  if (_.isFunction(callback)) {\r\n    this.then(function(res) {\r\n      process.nextTick(function() {\r\n        callback(null, res);\r\n      });\r\n    }, function(err) {\r\n      process.nextTick(function() {\r\n        callback(err);\r\n      });\r\n    });\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * A sugar method, equivalent to promise.then(undefined, onRejected).\r\n *\r\n * @method Promise#catch\r\n * @param {RejectedCallback.<S>} onRejected\r\n * @returns {Promise.<S>}\r\n */\r\n\r\n/**\r\n * Synonym of Promise#catch\r\n *\r\n * @method Promise#fail\r\n * @param {RejectedCallback.<S>} onRejected\r\n * @returns {Promise.<S>}\r\n */\r\nPromise.prototype.fail = Promise.prototype['catch'];\r\n\r\n/**\r\n * Returns resolving promise with given reason\r\n *\r\n * @method Promise.resolve\r\n * @param {*} result - Resolved value\r\n * @returns {Promise}\r\n */\r\n\r\n/**\r\n * Returns rejecting promise with given reason\r\n *\r\n * @method Promise.reject\r\n * @param {Error} reason - Rejecting reason\r\n * @returns {Promise}\r\n */\r\n\r\n/**\r\n * Returns a promise that is fulfilled with an array containing the fulfillment value of each promise,\r\n * or is rejected with the same rejection reason as the first promise to be rejected.\r\n *\r\n * @method Promise.all\r\n * @param {Array.<Promise.<*>|*>} promises\r\n * @returns {Promise.<Array.<*>>}\r\n */\r\n\r\n/**\r\n * Returns a deferred object\r\n *\r\n * @method Promise.defer\r\n * @returns {Deferred}\r\n */\r\nPromise.defer = function() {\r\n  return new Deferred();\r\n};\r\n\r\n/**\r\n * Deferred object\r\n *\r\n * @protected\r\n * @constructor\r\n */\r\nvar Deferred = function() {\r\n  var self = this;\r\n  this.promise = new Promise(function(resolve, reject) {\r\n    self.resolve = resolve;\r\n    self.reject = reject;\r\n  });\r\n};\r\n\r\n/**\r\n * Resolve promise\r\n * @method Deferred#resolve\r\n * @param {*} result - Resolving result\r\n */\r\n\r\n/**\r\n * Reject promise\r\n * @method Deferred#reject\r\n * @param {Error} error - Rejecting reason\r\n */\r\n\r\n/**\r\n *\r\n */\r\nmodule.exports = Promise;\r\n\r\n}).call(this,require('_process'))\r\n\r\n},{\"_process\":91,\"lodash/core\":88,\"promise/lib/es6-extensions\":93}],28:[function(require,module,exports){\r\n(function (process){\r\n/*global process*/\r\n/**\r\n * @file Manages query for records in Salesforce\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar inherits = require('inherits'),\r\n    events = require('events'),\r\n    stream = require('readable-stream'),\r\n    _      = require('lodash/core'),\r\n    Promise = require('./promise'),\r\n    SfDate = require(\"./date\"),\r\n    SOQLBuilder = require(\"./soql-builder\"),\r\n    RecordStream = require(\"./record-stream\");\r\n\r\n/**\r\n * Query\r\n *\r\n * @protected\r\n * @class\r\n * @extends {stream.Readable}\r\n * @implements Promise.<T>\r\n * @template T\r\n * @param {Connection} conn - Connection object\r\n * @param {Object|String} config - Query config object or SOQL string\r\n * @param {Object} [options] - Default query options\r\n * @param {Boolean} [options.autoFetch] - Using auto fetch mode or not\r\n * @param {Number} [options.maxFetch] - Max fetching records in auto fetch mode\r\n * @param {Boolean} [options.scanAll] - Including deleted records for query target or not\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in query request\r\n */\r\nvar Query = module.exports = function(conn, config, options) {\r\n  Query.super_.call(this, { objectMode: true });\r\n\r\n  this._conn = conn;\r\n  if (_.isString(config)) { // if query config is string, it is given in SOQL.\r\n    this._soql = config;\r\n  } else if (config.locator && config.locator.indexOf(\"/\") >= 0) { // if locator given in url for next records\r\n    this._locator = config.locator.split(\"/\").pop();\r\n  } else {\r\n    this._config = config;\r\n    this.select(config.fields);\r\n    if (config.includes) {\r\n      this.include(config.includes);\r\n    }\r\n    if (config.sort) {\r\n      this.sort(config.sort);\r\n    }\r\n  }\r\n  this._options = _.defaults(options || {}, {\r\n    maxFetch: 10000,\r\n    autoFetch: false,\r\n    scanAll: false,\r\n    responseTarget: ResponseTargets.QueryResult\r\n  });\r\n  this._executed = false;\r\n  this._finished = false;\r\n  this._chaining = false;\r\n\r\n  this._deferred = Promise.defer();\r\n\r\n  var self = this;\r\n};\r\n\r\ninherits(Query, stream.Readable);\r\n\r\n/**\r\n * Select fields to include in the returning result\r\n *\r\n * @param {Object|Array.<String>|String} fields - Fields to fetch. Format can be in JSON object (MongoDB-like), array of field names, or comma-separated field names.\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.select = function(fields) {\r\n  if (this._soql) {\r\n    throw Error(\"Cannot set select fields for the query which has already built SOQL.\");\r\n  }\r\n  fields = fields || '*';\r\n  if (_.isString(fields)) {\r\n    fields = fields.split(/\\s*,\\s*/);\r\n  } else if (_.isObject(fields) && !_.isArray(fields)) {\r\n    var _fields =  [];\r\n    for (var k in fields) {\r\n      if (fields[k]) { _fields.push(k); }\r\n    }\r\n    fields = _fields;\r\n  }\r\n  this._config.fields = fields;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set query conditions to filter the result records\r\n *\r\n * @param {Object|String} conditions - Conditions in JSON object (MongoDB-like), or raw SOQL WHERE clause string.\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.where = function(conditions) {\r\n  if (this._soql) {\r\n    throw Error(\"Cannot set where conditions for the query which has already built SOQL.\");\r\n  }\r\n  this._config.conditions = conditions;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Limit the returning result\r\n *\r\n * @param {Number} limit - Maximum number of records the query will return.\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.limit = function(limit) {\r\n  if (this._soql) {\r\n    throw Error(\"Cannot set limit for the query which has already built SOQL.\");\r\n  }\r\n  this._config.limit = limit;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Synonym of Query#offset()\r\n *\r\n * @method Query#skip\r\n * @param {Number} offset - Offset number where begins returning results.\r\n * @returns {Query.<T>}\r\n */\r\n/**\r\n * Skip records\r\n *\r\n * @method Query#offset\r\n * @param {Number} offset - Offset number where begins returning results.\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.skip =\r\nQuery.prototype.offset = function(offset) {\r\n  if (this._soql) {\r\n    throw Error(\"Cannot set skip/offset for the query which has already built SOQL.\");\r\n  }\r\n  this._config.offset = offset;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Synonym of Query#sort()\r\n *\r\n * @memthod Query#orderby\r\n * @param {String|Object} sort - Sorting field or hash object with field name and sord direction\r\n * @param {String|Number} [dir] - Sorting direction (ASC|DESC|1|-1)\r\n * @returns {Query.<T>}\r\n */\r\n/**\r\n * Set query sort with direction\r\n *\r\n * @method Query#sort\r\n * @param {String|Object} sort - Sorting field or hash object with field name and sord direction\r\n * @param {String|Number} [dir] - Sorting direction (ASC|DESC|1|-1)\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.sort =\r\nQuery.prototype.orderby = function(sort, dir) {\r\n  if (this._soql) {\r\n    throw Error(\"Cannot set sort for the query which has already built SOQL.\");\r\n  }\r\n  if (_.isString(sort) && _.isString(dir)) {\r\n    sort = [ [ sort, dir ] ];\r\n  }\r\n  this._config.sort = sort;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Include child relationship query\r\n *\r\n * @param {String} childRelName - Child relationship name to include in query result\r\n * @param {Object|String} [conditions] - Conditions in JSON object (MongoDB-like), or raw SOQL WHERE clause string.\r\n * @param {Object|Array.<String>|String} [fields] - Fields to fetch. Format can be in JSON object (MongoDB-like), array of field names, or comma-separated field names.\r\n * @param {Object} [options] - Optional query configulations.\r\n * @param {Number} [options.limit] - Maximum number of records the query will return.\r\n * @param {Number} [options.offset] - Offset number where begins returning results.\r\n * @param {Number} [options.skip] - Synonym of options.offset.\r\n * @returns {Query~SubQuery}\r\n */\r\nQuery.prototype.include = function(childRelName, conditions, fields, options) {\r\n  if (this._soql) {\r\n    throw Error(\"Cannot include child relationship into the query which has already built SOQL.\");\r\n  }\r\n  if (_.isObject(childRelName)) {\r\n    var includes = childRelName;\r\n    for (var crname in includes) {\r\n      var config = includes[crname];\r\n      this.include(crname, config.conditions, config.fields, config);\r\n    }\r\n    return;\r\n  }\r\n  var childConfig = {\r\n    table: childRelName,\r\n    conditions: conditions,\r\n    fields: fields,\r\n    limit: options && options.limit,\r\n    offset: options && (options.offset || options.skip),\r\n    sort: options && options.sort\r\n  };\r\n  if (!_.isArray(this._config.includes)) this._config.includes = [];\r\n  this._config.includes.push(childConfig);\r\n  var childQuery = new SubQuery(this._conn, this, childConfig);\r\n  this._children = this._children || [];\r\n  this._children.push(childQuery);\r\n  return childQuery;\r\n};\r\n\r\n\r\n/**\r\n * Setting maxFetch query option\r\n *\r\n * @param {Number} maxFetch - Max fetching records in auto fetch mode\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.maxFetch = function(maxFetch) {\r\n  this._options.maxFetch = maxFetch;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Switching auto fetch mode\r\n *\r\n * @param {Boolean} autoFetch - Using auto fetch mode or not\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.autoFetch = function(autoFetch) {\r\n  this._options.autoFetch = autoFetch;\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set flag to scan all records including deleted and archived.\r\n *\r\n * @param {Boolean} scanAll - Flag whether include deleted/archived record or not. Default is false.\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.scanAll = function(scanAll) {\r\n  this._options.scanAll = scanAll;\r\n  return this;\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nvar ResponseTargets = Query.ResponseTargets = {};\r\n[ \"QueryResult\", \"Records\", \"SingleRecord\", \"Count\" ].forEach(function(f) {\r\n  ResponseTargets[f] = f;\r\n});\r\n\r\n/**\r\n * @protected\r\n * @param {String} responseTarget - Query response target\r\n * @returns {Query.<S>}\r\n */\r\nQuery.prototype.setResponseTarget = function(responseTarget) {\r\n  if (responseTarget in ResponseTargets) {\r\n    this._options.responseTarget = responseTarget;\r\n  }\r\n  return this;\r\n};\r\n\r\n\r\n/**\r\n * Synonym of Query#execute()\r\n *\r\n * @method Query#run\r\n * @param {Object} [options] - Query options\r\n * @param {Boolean} [options.autoFetch] - Using auto fetch mode or not\r\n * @param {Number} [options.maxFetch] - Max fetching records in auto fetch mode\r\n * @param {Boolean} [options.scanAll] - Including deleted records for query target or not\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in query request\r\n * @param {Callback.<T>} [callback] - Callback function\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.run =\r\n/**\r\n * Synonym of Query#execute()\r\n *\r\n * @method Query#exec\r\n * @param {Object} [options] - Query options\r\n * @param {Boolean} [options.autoFetch] - Using auto fetch mode or not\r\n * @param {Number} [options.maxFetch] - Max fetching records in auto fetch mode\r\n * @param {Boolean} [options.scanAll] - Including deleted records for query target or not\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in query request\r\n * @param {Callback.<T>} [callback] - Callback function\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.exec =\r\n/**\r\n * Execute query and fetch records from server.\r\n *\r\n * @method Query#execute\r\n * @param {Object} [options] - Query options\r\n * @param {Boolean} [options.autoFetch] - Using auto fetch mode or not\r\n * @param {Number} [options.maxFetch] - Max fetching records in auto fetch mode\r\n * @param {Boolean} [options.scanAll] - Including deleted records for query target or not\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in query request\r\n * @param {Callback.<T>} [callback] - Callback function\r\n * @returns {Query.<T>}\r\n */\r\nQuery.prototype.execute = function(options, callback) {\r\n  var self = this;\r\n  var logger = this._conn._logger;\r\n  var deferred = this._deferred;\r\n\r\n  if (this._executed) {\r\n    deferred.reject(new Error(\"re-executing already executed query\"));\r\n    return this;\r\n  }\r\n\r\n  if (this._finished) {\r\n    deferred.reject(new Error(\"executing already closed query\"));\r\n    return this;\r\n  }\r\n\r\n  if (typeof options === \"function\") {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  options = {\r\n    headers: options.headers || self._options.headers,\r\n    responseTarget: options.responseTarget || self._options.responseTarget,\r\n    autoFetch: options.autoFetch || self._options.autoFetch,\r\n    maxFetch: options.maxFetch || self._options.maxFetch,\r\n    scanAll: options.scanAll || self._options.scanAll\r\n  };\r\n\r\n  // callback and promise resolution;\r\n  var promiseCallback = function(err, res) {\r\n    if (_.isFunction(callback)) {\r\n      try {\r\n        res = callback(err, res);\r\n        err = null;\r\n      } catch(e) {\r\n        err = e;\r\n      }\r\n    }\r\n    if (err) {\r\n      deferred.reject(err);\r\n    } else {\r\n      deferred.resolve(res);\r\n    }\r\n  };\r\n  this.once('response', function(res) {\r\n    promiseCallback(null, res);\r\n  });\r\n  this.once('error', function(err) {\r\n    promiseCallback(err);\r\n  });\r\n\r\n  // collect fetched records in array\r\n  // only when response target is Records and\r\n  // either callback or chaining promises are available to this query.\r\n  this.once('fetch', function() {\r\n    if (options.responseTarget === ResponseTargets.Records && (self._chaining || callback)) {\r\n      logger.debug('--- collecting all fetched records ---');\r\n      var records = [];\r\n      var onRecord = function(record) {\r\n        records.push(record);\r\n      };\r\n      self.on('record', onRecord);\r\n      self.once('end', function() {\r\n        self.removeListener('record', onRecord);\r\n        self.emit('response', records, self);\r\n      });\r\n    }\r\n  });\r\n\r\n  // flag to prevent re-execution\r\n  this._executed = true;\r\n\r\n  // start actual query\r\n  logger.debug('>>> Query start >>>');\r\n  this._execute(options).then(function() {\r\n    logger.debug('*** Query finished ***');\r\n  }).fail(function(err) {\r\n    logger.debug('--- Query error ---');\r\n    self.emit('error', err);\r\n  });\r\n\r\n  // return Query instance for chaining\r\n  return this;\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nQuery.prototype._execute = function(options) {\r\n  var self = this;\r\n  var logger = this._conn._logger;\r\n  var responseTarget = options.responseTarget;\r\n  var autoFetch = options.autoFetch;\r\n  var maxFetch = options.maxFetch;\r\n  var scanAll = options.scanAll;\r\n\r\n  return Promise.resolve(\r\n    self._locator ?\r\n    self._conn._baseUrl() + \"/query/\" + self._locator :\r\n    self.toSOQL().then(function(soql) {\r\n      self.totalFetched = 0;\r\n      logger.debug(\"SOQL = \" + soql);\r\n      return self._conn._baseUrl() + \"/\" + (scanAll ? \"queryAll\" : \"query\") + \"?q=\" + encodeURIComponent(soql);\r\n    })\r\n  ).then(function(url) {\r\n    return self._conn.request({\r\n      method: 'GET',\r\n      url: url,\r\n      headers: options.headers\r\n    });\r\n  }).then(function(data) {\r\n    self.emit(\"fetch\");\r\n    self.totalSize = data.totalSize;\r\n    var res;\r\n    switch(responseTarget) {\r\n      case ResponseTargets.SingleRecord:\r\n        res = data.records && data.records.length > 0 ? data.records[0] : null;\r\n        break;\r\n      case ResponseTargets.Records:\r\n        res = data.records;\r\n        break;\r\n      case ResponseTargets.Count:\r\n        res = data.totalSize;\r\n        break;\r\n      default:\r\n        res = data;\r\n    }\r\n    // only fire response event when it should be notified per fetch\r\n    if (responseTarget !== ResponseTargets.Records) {\r\n      self.emit(\"response\", res, self);\r\n    }\r\n\r\n    // streaming record instances\r\n    var numRecords = (data.records && data.records.length) || 0;\r\n    for (var i=0; i<numRecords; i++) {\r\n      if (self.totalFetched >= maxFetch) {\r\n        self._finished = true;\r\n        break;\r\n      }\r\n      var record = data.records[i];\r\n      self.push(record);\r\n      self.emit('record', record, self.totalFetched++, self);\r\n    }\r\n    if (data.nextRecordsUrl) {\r\n      self._locator = data.nextRecordsUrl.split('/').pop();\r\n    }\r\n    self._finished = self._finished || data.done || !autoFetch;\r\n    if (self._finished) {\r\n      self.push(null);\r\n    } else {\r\n      self._execute(options);\r\n    }\r\n    return res;\r\n  });\r\n};\r\n\r\n/**\r\n * Readable stream implementation\r\n *\r\n * @override\r\n * @private\r\n */\r\nQuery.prototype._read = function(size) {\r\n  if (!this._finished && !this._executed) {\r\n    this.execute({ autoFetch: true });\r\n  }\r\n};\r\n\r\n/** @override **/\r\nQuery.prototype.on = function(e, fn) {\r\n  if (e === 'record') {\r\n    var self = this;\r\n    this.on('readable', function() {\r\n      while(self.read() !== null) {} // discard buffered records\r\n    });\r\n  }\r\n  return Query.super_.prototype.on.call(this, e, fn);\r\n};\r\n\r\n/** @override **/\r\nQuery.prototype.addListener = Query.prototype.on;\r\n\r\n\r\n/**\r\n * @private\r\n */\r\nQuery.prototype._expandFields = function() {\r\n  if (this._soql) {\r\n    return Promise.reject(new Error(\"Cannot expand fields for the query which has already built SOQL.\"));\r\n  }\r\n  var self = this;\r\n  var logger = self._conn._logger;\r\n  var conn = this._conn;\r\n  var table = this._config.table;\r\n  var fields = this._config.fields || [];\r\n\r\n  logger.debug('_expandFields: table = ' + table + ', fields = ' + fields.join(', '));\r\n\r\n  return Promise.all([\r\n    Promise.resolve(self._parent ? findRelationTable(table) : table)\r\n      .then(function(table) {\r\n        return Promise.all(\r\n          _.map(fields, function(field) { return expandAsteriskField(table, field); })\r\n        ).then(function(expandedFields) {\r\n          self._config.fields = _.flatten(expandedFields);\r\n        });\r\n      }),\r\n    Promise.all(\r\n      _.map(self._children || [], function(childQuery) {\r\n        return childQuery._expandFields();\r\n      })\r\n    )\r\n  ]);\r\n\r\n  function findRelationTable(rname) {\r\n    var ptable = self._parent._config.table;\r\n    logger.debug('finding table for relation \"' + rname + '\" in \"' + ptable + '\"...');\r\n    return describeCache(ptable).then(function(sobject) {\r\n      var upperRname = rname.toUpperCase();\r\n      var childRelation = _.find(sobject.childRelationships, function(cr) {\r\n        return (cr.relationshipName || '').toUpperCase() === upperRname;\r\n      });\r\n      return childRelation ? childRelation.childSObject :\r\n        Promise.reject(new Error(\"No child relationship found: \" + rname ));\r\n    });\r\n  }\r\n\r\n  function describeCache(table) {\r\n    logger.debug('describe cache: '+table);\r\n    var deferred = Promise.defer();\r\n    conn.describe$(table, function(err, sobject) {\r\n      logger.debug('... done.');\r\n      if (err) { deferred.reject(err); }\r\n      else { deferred.resolve(sobject); }\r\n    });\r\n    return deferred.promise;\r\n  }\r\n\r\n  function expandAsteriskField(table, field) {\r\n    logger.debug('expanding field \"'+ field + '\" in \"' + table + '\"...');\r\n    var fpath = field.split('.');\r\n    return fpath[fpath.length - 1] === '*' ?\r\n      describeCache(table).then(function(sobject) {\r\n        logger.debug('table '+table+'has been described');\r\n        if (fpath.length > 1) {\r\n          var rname = fpath.shift();\r\n          var rfield = _.find(sobject.fields, function(f) {\r\n            return f.relationshipName &&\r\n                   f.relationshipName.toUpperCase() === rname.toUpperCase();\r\n          });\r\n          if (rfield) {\r\n            var rtable = rfield.referenceTo.length === 1 ? rfield.referenceTo[0] : 'Name';\r\n            return expandAsteriskField(rtable, fpath.join('.')).then(function(fpaths) {\r\n              return _.map(fpaths, function(fpath) { return rname + '.' + fpath; });\r\n            });\r\n          } else {\r\n            return [];\r\n          }\r\n        } else {\r\n          return _.map(sobject.fields, function(f) { return f.name; });\r\n        }\r\n      }) :\r\n      Promise.resolve([ field ]);\r\n  }\r\n};\r\n\r\n/**\r\n * Explain plan for executing query\r\n *\r\n * @param {Callback.<ExplainInfo>} [callback] - Callback function\r\n * @returns {Promise.<ExplainInfo>}\r\n */\r\nQuery.prototype.explain = function(callback) {\r\n  var self = this;\r\n  var logger = this._conn._logger;\r\n  return self.toSOQL().then(function(soql) {\r\n    logger.debug(\"SOQL = \" + soql);\r\n    var url = \"/query/?explain=\" + encodeURIComponent(soql);\r\n    return self._conn.request(url);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Return SOQL expression for the query\r\n *\r\n * @param {Callback.<String>} [callback] - Callback function\r\n * @returns {Promise.<String>}\r\n */\r\nQuery.prototype.toSOQL = function(callback) {\r\n  var self = this;\r\n  return Promise.resolve(self._soql ||\r\n    self._expandFields().then(function() { return SOQLBuilder.createSOQL(self._config); })\r\n  ).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Create data stream of queried records.\r\n * Automatically resume query if paused.\r\n *\r\n * @param {String} [type] - Type of outgoing data format. Currently 'csv' is default value and the only supported.\r\n * @param {Object} [options] - Options passed to converter\r\n * @returns {stream.Readable}\r\n */\r\nQuery.prototype.stream = RecordStream.Serializable.prototype.stream;\r\n\r\n/**\r\n * Get record stream of queried records applying the given mapping function\r\n *\r\n * @param {RecordMapFunction} fn - Record mapping function\r\n * @returns {RecordStream.Serializable}\r\n */\r\nQuery.prototype.map = RecordStream.prototype.map;\r\n\r\n/**\r\n * Get record stream of queried records, applying the given filter function\r\n *\r\n * @param {RecordFilterFunction} fn - Record filtering function\r\n * @returns {RecordStream.Serializable}\r\n */\r\nQuery.prototype.filter = RecordStream.prototype.map;\r\n\r\n/*\r\n * Default threshold num of bulk API switching\r\n */\r\nvar DEFAULT_BULK_THRESHOLD = 200;\r\n\r\n/**\r\n * Synonym of Query#destroy()\r\n *\r\n * @method Query#delete\r\n * @param {String} [type] - SObject type. Required for SOQL based query object.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<RecordResult>>}\r\n */\r\n/**\r\n * Synonym of Query#destroy()\r\n *\r\n * @method Query#del\r\n * @param {String} [type] - SObject type. Required for SOQL based query object.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<RecordResult>>}\r\n */\r\n/**\r\n * Delete queried records\r\n *\r\n * @method Query#destroy\r\n * @param {String} [type] - SObject type. Required for SOQL based query object.\r\n * @param {Object} [options] - Mass delete operation options\r\n * @param {Boolean} [options.allowBulk] - Allow switching to Bulk API when the num of queried records reached to certain threshold. Default is true.\r\n * @param {Number} [options.bulkThreshold] - Threshold num to switch to use Bulk API instead of usual `SObject#delete()` call. Default value is 200 after API ver 42.0, and 0.5 * `maxRequest` before API ver 42.0.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<RecordResult>>}\r\n */\r\nQuery.prototype[\"delete\"] =\r\nQuery.prototype.del =\r\nQuery.prototype.destroy = function(type, options, callback) {\r\n  if (typeof type === 'function') {\r\n    callback = type;\r\n    options = {};\r\n    type = null;\r\n  } else if (typeof type === 'object' && type !== null) {\r\n    callback = options;\r\n    options = type;\r\n    type = null;\r\n  }\r\n  options = options || {};\r\n  type = type || (this._config && this._config.table);\r\n  if (!type) {\r\n    throw new Error(\"SOQL based query needs SObject type information to bulk delete.\");\r\n  }\r\n  // Set the threshold number to pass to bulk API\r\n  var thresholdNum =\r\n    options.allowBulk === false ?\r\n      -1 :\r\n    typeof options.bulkThreshold === 'number' ?\r\n      options.bulkThreshold :\r\n      // determine threshold if the connection version supports SObject collection API or not\r\n      (this._conn._ensureVersion(42) ? DEFAULT_BULK_THRESHOLD : this._conn.maxRequest / 2);\r\n  var self = this;\r\n  return new Promise(function(resolve, reject) {\r\n    var records = [];\r\n    var batch = null;\r\n    var handleRecord = function(rec) {\r\n      if (!rec.Id) {\r\n        self.emit('error', new Error('Queried record does not include Salesforce record ID.'))\r\n        return;\r\n      }\r\n      var record = { Id: rec.Id };\r\n      if (batch) {\r\n        batch.write(record);\r\n      } else {\r\n        records.push(record);\r\n        if (thresholdNum < 0 || records.length > thresholdNum) {\r\n          // Use bulk delete instead of SObject REST API\r\n          batch =\r\n            self._conn.sobject(type).deleteBulk()\r\n              .on('response', resolve)\r\n              .on('error', reject);\r\n          records.forEach(function(record) {\r\n            batch.write(record);\r\n          });\r\n          records = [];\r\n        }\r\n      }\r\n    };\r\n    var handleEnd = function() {\r\n      if (batch) {\r\n        batch.end();\r\n      } else {\r\n        var ids = records.map(function (record) { return record.Id; });\r\n        self._conn.sobject(type).destroy(ids, { allowRecursive: true }).then(resolve, reject);\r\n      }\r\n    };\r\n    self.on('data', handleRecord)\r\n      .on('end', handleEnd)\r\n      .on('error', reject);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Update queried records, using given mapping function/object\r\n *\r\n * @param {Record|RecordMapFunction} mapping - Mapping record or record mapping function\r\n * @param {String} [type] - SObject type. Required for SOQL based query object.\r\n * @param {Object} [options] - Mass update operation options\r\n * @param {Boolean} [options.allowBulk] - Allow switching to Bulk API when the num of queried records reached to certain threshold. Default is true.\r\n * @param {Number} [options.bulkThreshold] - Threshold num to switch to use Bulk API instead of usual `SObject#delete()` call. Default value is 200 after API ver 42.0, and 0.5 * `maxRequest` before API ver 42.0.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<RecordResult>>}\r\n */\r\nQuery.prototype.update = function(mapping, type, options, callback) {\r\n  if (typeof type === 'function') {\r\n    callback = type;\r\n    options = {};\r\n    type = null;\r\n  } else if (typeof type === 'object' && type !== null) {\r\n    callback = options;\r\n    options = type;\r\n    type = null;\r\n  }\r\n  options = options || {};\r\n  type = type || (this._config && this._config.table);\r\n  if (!type) {\r\n    throw new Error(\"SOQL based query needs SObject type information to bulk update.\");\r\n  }\r\n  var updateStream = _.isFunction(mapping) ? RecordStream.map(mapping) : RecordStream.recordMapStream(mapping);\r\n  // Set the threshold number to pass to bulk API\r\n  var thresholdNum =\r\n    options.allowBulk === false ?\r\n      -1 :\r\n    typeof options.bulkThreshold === 'number' ?\r\n      options.bulkThreshold :\r\n      // determine threshold if the connection version supports SObject collection API or not\r\n      (this._conn._ensureVersion(42) ? DEFAULT_BULK_THRESHOLD : this._conn.maxRequest / 2);\r\n  var self = this;\r\n  return new Promise(function(resolve, reject) {\r\n    var records = [];\r\n    var batch = null;\r\n    var handleRecord = function(record) {\r\n      if (batch) {\r\n        batch.write(record);\r\n      } else {\r\n        records.push(record);\r\n        if (thresholdNum < 0 || records.length > thresholdNum) {\r\n          // Use bulk update instead of SObject REST API\r\n          batch =\r\n            self._conn.sobject(type).updateBulk()\r\n              .on('response', resolve)\r\n              .on('error', reject);\r\n          records.forEach(function(record) {\r\n            batch.write(record);\r\n          });\r\n          records = [];\r\n        }\r\n      }\r\n    };\r\n    var handleEnd = function() {\r\n      if (batch) {\r\n        batch.end();\r\n      } else {\r\n        self._conn.sobject(type).update(records, { allowRecursive: true }).then(resolve, reject);\r\n      }\r\n    };\r\n    self.on('error', reject)\r\n      .pipe(updateStream)\r\n      .on('data', handleRecord)\r\n      .on('end', handleEnd)\r\n      .on('error', reject);\r\n  }).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Promise/A+ interface\r\n * http://promises-aplus.github.io/promises-spec/\r\n *\r\n * Delegate to deferred promise, return promise instance for query result\r\n *\r\n * @param {FulfilledCallback.<T, S1>} [onFulfilled]\r\n * @param {RejectedCallback.<S2>} [onRejected]\r\n * @returns {Promise.<S1|S2>}\r\n */\r\nQuery.prototype.then = function(onResolved, onReject) {\r\n  this._chaining = true;\r\n  if (!this._finished && !this._executed) { this.execute(); }\r\n  return this._deferred.promise.then.apply(this._deferred.promise, arguments);\r\n};\r\n\r\n/**\r\n * Promise/A+ extension\r\n * Call \"then\" using given node-style callback function\r\n *\r\n * @param {Callback.<T>} [callback] - Callback function\r\n * @returns {Query}\r\n */\r\nQuery.prototype.thenCall = function(callback) {\r\n  if (_.isFunction(callback)) {\r\n    this.then(function(res) {\r\n      process.nextTick(function() {\r\n        callback(null, res);\r\n      });\r\n    }, function(err) {\r\n      process.nextTick(function() {\r\n        callback(err);\r\n      });\r\n    });\r\n  }\r\n  return this;\r\n};\r\n\r\n/*--------------------------------------------*/\r\n\r\n/**\r\n * SubQuery object for representing child relationship query\r\n *\r\n * @protected\r\n * @class Query~SubQuery\r\n * @extends Query\r\n * @param {Connection} conn - Connection object\r\n * @param {Query} parent - Parent query object\r\n * @param {Object} config - Sub query configuration\r\n */\r\nvar SubQuery = function(conn, parent, config) {\r\n  SubQuery.super_.call(this, conn, config);\r\n  this._parent = parent;\r\n};\r\n\r\ninherits(SubQuery, Query);\r\n\r\n/**\r\n * @method Query~SubQuery#include\r\n * @override\r\n */\r\nSubQuery.prototype.include = function() {\r\n  throw new Error(\"Not allowed to include another subquery in subquery.\");\r\n};\r\n\r\n/**\r\n * Back the context to parent query object\r\n *\r\n * @method Query~SubQuery#end\r\n * @returns {Query}\r\n */\r\nSubQuery.prototype.end = function() {\r\n  return this._parent;\r\n};\r\n\r\n/**\r\n * If execute is called in subquery context, delegate it to parent query object\r\n *\r\n * @method Query~SubQuery#execute\r\n * @override\r\n */\r\nSubQuery.prototype.run =\r\nSubQuery.prototype.exec =\r\nSubQuery.prototype.execute = function() {\r\n  return this._parent.execute.apply(this._parent, arguments);\r\n};\r\n\r\n}).call(this,require('_process'))\r\n\r\n},{\"./date\":22,\"./promise\":27,\"./record-stream\":30,\"./soql-builder\":35,\"_process\":91,\"events\":47,\"inherits\":84,\"lodash/core\":88,\"readable-stream\":107}],29:[function(require,module,exports){\r\n/**\r\n * @file Represents Salesforce QuickAction\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\n\r\n/**\r\n * A class for quick action\r\n *\r\n * @protected\r\n * @constructor\r\n */\r\nvar QuickAction = module.exports = function(conn, path) {\r\n  this._conn = conn;\r\n  this._path = path;\r\n};\r\n\r\n/**\r\n * @typedef {Object} QuickAction~QuickActionInfo\r\n * @prop {String} type - Type of the action (e.g. Create, Update, Post, LogACall)\r\n * @prop {String} name - Name of the action\r\n * @prop {String} label - Label of the action\r\n * @prop {Object} urls - Endpoint URL information of the action\r\n */\r\n/**\r\n * @typedef {QuickAction~QuickActionInfo} QuickAction~QuickActionDescriveInfo\r\n * @prop {String} contextSobjectType - Object type used for the action\r\n * @prop {String} targetSobjectType - Object type of the action to target\r\n * @prop {String} targetParentField - Field name in the target object which refers parent(context) object record ID.\r\n * @prop {String} targetRecordTypeId - Record type of the targeted record\r\n * @prop {Object} layout - Layout sections that comprise an action\r\n */\r\n\r\n/**\r\n * Describe the action's information (including layout, etc.)\r\n *\r\n * @param {Callback.<QuickAction~QuickActionDescriveInfo>} [callback] - Callback function\r\n * @returns {Promise.<QuickAction~QuickActionDescriveInfo>}\r\n */\r\nQuickAction.prototype.describe = function(callback) {\r\n  var url = this._path + \"/describe\";\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * Retrieve default field values in the action (for given record, if specified)\r\n *\r\n * @param {String} [contextId] - ID of record to get default values specific to the record\r\n * @param {Callback.<Record>} [callback] - Callback function\r\n * @returns {Promise.<Record>}\r\n */\r\nQuickAction.prototype.defaultValues = function(contextId, callback) {\r\n  if (typeof contextId === 'function') {\r\n    callback = contextId;\r\n    contextId = null;\r\n  }\r\n  var url = this._path + \"/defaultValues\";\r\n  if (contextId) {\r\n    url += \"/\" + contextId;\r\n  }\r\n  return this._conn.request(url).thenCall(callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} QuickAction~QuickActionResult\r\n * @param {String} id - Record id of the action result\r\n * @param {Array.<String>} feedItemIds - List of IDs for feed item\r\n * @param {Boolean} success - True if the action successfully completed\r\n * @param {Boolean} created - True if the action yields a new record\r\n * @param {String} contextId - Context record ID of the action\r\n * @param {Array.<Object>} errors - Errors if the action failed\r\n */\r\n\r\n/**\r\n * Execute the action for given context Id and record information\r\n * \r\n * @param {String} contextId - Context record ID of the action\r\n * @param {Record} record - Input record information for the action\r\n * @param {Callback.<QuickAction~QuickActionResult>} [callback] - Callback function\r\n * @returns {Promise.<QuickAction~QuickActionResult>}\r\n */\r\nQuickAction.prototype.execute = function(contextId, record, callback) {\r\n  var body = {\r\n    contextId: contextId,\r\n    record: record\r\n  };\r\n  return this._conn.requestPost(this._path, body).thenCall(callback);\r\n};\r\n\r\n},{}],30:[function(require,module,exports){\r\n/**\r\n * @file Represents stream that handles Salesforce record as stream data\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar events = require('events'),\r\n    stream = require('readable-stream'),\r\n    Duplex = stream.Duplex,\r\n    Transform = stream.Transform,\r\n    PassThrough = stream.PassThrough,\r\n    inherits = require('inherits'),\r\n    _      = require('lodash/core'),\r\n    CSV    = require('./csv');\r\n\r\n\r\n/**\r\n * Class for Record Stream\r\n *\r\n * @class\r\n * @constructor\r\n * @extends stream.Transform\r\n */\r\nvar RecordStream = module.exports = function() {\r\n  RecordStream.super_.call(this, { objectMode: true });\r\n};\r\n\r\ninherits(RecordStream, Transform);\r\n\r\n\r\n/*\r\n * @override\r\n */\r\nRecordStream.prototype._transform = function(record, enc, callback) {\r\n  this.emit('record', record);\r\n  this.push(record);\r\n  callback();\r\n};\r\n\r\n/**\r\n * Get record stream of queried records applying the given mapping function\r\n *\r\n * @param {RecordMapFunction} fn - Record mapping function\r\n * @returns {RecordStream}\r\n */\r\nRecordStream.prototype.map = function(fn) {\r\n  return this.pipe(RecordStream.map(fn));\r\n};\r\n\r\n/**\r\n * Get record stream of queried records, applying the given filter function\r\n *\r\n * @param {RecordFilterFunction} fn - Record filtering function\r\n * @returns {RecordStream}\r\n */\r\nRecordStream.prototype.filter = function(fn) {\r\n  return this.pipe(RecordStream.filter(fn));\r\n};\r\n\r\n\r\n/**\r\n * @class RecordStream.Serializable\r\n * @extends {RecordStream}\r\n */\r\nvar Serializable = RecordStream.Serializable = function() {\r\n  Serializable.super_.call(this);\r\n  this._dataStream = null;\r\n};\r\n\r\ninherits(Serializable, RecordStream);\r\n\r\n/**\r\n * Create readable data stream which emits serialized record data\r\n *\r\n * @param {String} [type] - Type of outgoing data format. Currently 'csv' is default value and the only supported.\r\n * @param {Object} [options] - Options passed to converter\r\n * @returns {stream.Readable}\r\n*/\r\nSerializable.prototype.stream = function(type, options) {\r\n  type = type || 'csv';\r\n  var converter = DataStreamConverters[type];\r\n  if (!converter) {\r\n    throw new Error('Converting [' + type + '] data stream is not supported.');\r\n  }\r\n  if (!this._dataStream) {\r\n    this._dataStream = new PassThrough();\r\n    this.pipe(converter.serialize(options))\r\n      .pipe(this._dataStream);\r\n  }\r\n  return this._dataStream;\r\n};\r\n\r\n\r\n/**\r\n * @class RecordStream.Parsable\r\n * @extends {RecordStream}\r\n */\r\nvar Parsable = RecordStream.Parsable = function() {\r\n  Parsable.super_.call(this);\r\n  this._dataStream = null;\r\n};\r\n\r\ninherits(Parsable, RecordStream);\r\n\r\n/**\r\n * Create writable data stream which accepts serialized record data\r\n *\r\n * @param {String} [type] - Type of outgoing data format. Currently 'csv' is default value and the only supported.\r\n * @param {Object} [options] - Options passed to converter\r\n * @returns {stream.Readable}\r\n*/\r\nParsable.prototype.stream = function(type, options) {\r\n  type = type || 'csv';\r\n  var converter = DataStreamConverters[type];\r\n  if (!converter) {\r\n    throw new Error('Converting [' + type + '] data stream is not supported.');\r\n  }\r\n  if (!this._dataStream) {\r\n    this._dataStream = new PassThrough();\r\n    this._parserStream = converter.parse(options).on('error', function(error) { this.emit('error', error); });\r\n    this._parserStream.pipe(this).pipe(new PassThrough({ objectMode: true, highWaterMark: ( 500 * 1000 ) }));\r\n  }\r\n  return this._dataStream;\r\n};\r\n\r\n\r\n/* @override */\r\nParsable.prototype.on = function(ev, fn) {\r\n  if (ev === 'readable' || ev === 'record') {\r\n    this._dataStream.pipe(this._parserStream);\r\n  }\r\n  return Parsable.super_.prototype.on.call(this, ev, fn);\r\n};\r\n\r\n/* @override */\r\nParsable.prototype.addListener = Parsable.prototype.on;\r\n\r\n/* --------------------------------------------------- */\r\n\r\n/**\r\n * @callback RecordMapFunction\r\n * @param {Record} record - Source record to map\r\n * @returns {Record}\r\n */\r\n\r\n/**\r\n * Create a record stream which maps records and pass them to downstream\r\n *\r\n * @param {RecordMapFunction} fn - Record mapping function\r\n * @returns {RecordStream.Serializable}\r\n */\r\nRecordStream.map = function(fn) {\r\n  var mapStream = new RecordStream.Serializable();\r\n  mapStream._transform = function(record, enc, callback) {\r\n    var rec = fn(record) || record; // if not returned record, use same record\r\n    this.push(rec);\r\n    callback();\r\n  };\r\n  return mapStream;\r\n};\r\n\r\n/**\r\n * Create mapping stream using given record template\r\n *\r\n * @param {Record} record - Mapping record object. In mapping field value, temlate notation can be used to refer field value in source record, if noeval param is not true.\r\n * @param {Boolean} [noeval] - Disable template evaluation in mapping record.\r\n * @returns {RecordStream.Serializable}\r\n */\r\nRecordStream.recordMapStream = function(record, noeval) {\r\n  return RecordStream.map(function(rec) {\r\n    var mapped = { Id: rec.Id };\r\n    for (var prop in record) {\r\n      mapped[prop] = noeval ? record[prop] : evalMapping(record[prop], rec);\r\n    }\r\n    return mapped;\r\n  });\r\n\r\n  function evalMapping(value, mapping) {\r\n    if (_.isString(value)) {\r\n      var m = /^\\$\\{(\\w+)\\}$/.exec(value);\r\n      if (m) { return mapping[m[1]]; }\r\n      return value.replace(/\\$\\{(\\w+)\\}/g, function($0, prop) {\r\n        var v = mapping[prop];\r\n        return _.isNull(v) || _.isUndefined(v) ? \"\" : String(v);\r\n      });\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * @callback RecordFilterFunction\r\n * @param {Record} record - Source record to filter\r\n * @returns {Boolean}\r\n */\r\n\r\n/**\r\n * Create a record stream which filters records and pass them to downstream\r\n *\r\n * @param {RecordFilterFunction} fn - Record filtering function\r\n * @returns {RecordStream.Serializable}\r\n */\r\nRecordStream.filter = function(fn) {\r\n  var filterStream = new RecordStream.Serializable();\r\n  filterStream._transform = function(record, enc, callback) {\r\n    if (fn(record)) { this.push(record); }\r\n    callback();\r\n  };\r\n  return filterStream;\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nfunction convertRecordForSerialization(record, options) {\r\n  return Object.keys(record).reduce(function(rec, key) {\r\n    var value = rec[key];\r\n    var t = typeof value;\r\n    var urec = {};\r\n    if (key === 'attributes') { // 'attributes' prop will be ignored\r\n      rec = _.extend({}, rec);\r\n      delete rec[key];\r\n    } else if (options.nullValue && value === null) {\r\n      urec[key] = options.nullValue;\r\n      rec = _.extend({}, rec, urec);\r\n    } else if (value !== null && typeof value === 'object') {\r\n      var precord = convertRecordForSerialization(value, options);\r\n      rec = Object.keys(precord).reduce(function(prec, pkey) {\r\n        prec[key + '.' + pkey] = precord[pkey];\r\n        return prec;\r\n      }, _.extend({}, rec));\r\n    }\r\n    return rec;\r\n  }, record);\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nfunction createPipelineStream(s1, s2) {\r\n  var pipeline = new PassThrough();\r\n  pipeline.on('pipe', function(source) {\r\n    source.unpipe(pipeline);\r\n    source.pipe(s1).pipe(s2);\r\n  });\r\n  pipeline.pipe = function(dest, options) {\r\n    return s2.pipe(dest, options);\r\n  };\r\n  return pipeline;\r\n}\r\n\r\n/** ---------------------------------------------------------------------- **/\r\n\r\n/**\r\n * @private\r\n */\r\nvar CSVStreamConverter = {\r\n  serialize: function(options) {\r\n    options = options || {};\r\n    return createPipelineStream(\r\n      RecordStream.map(function(record) {\r\n        return convertRecordForSerialization(record, options);\r\n      }),\r\n      CSV.serializeCSVStream(options)\r\n    );\r\n  },\r\n  parse: function(options) {\r\n    return CSV.parseCSVStream(options);\r\n  }\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nvar DataStreamConverters = RecordStream.DataStreamConverters = {\r\n  csv: CSVStreamConverter\r\n};\r\n\r\n},{\"./csv\":21,\"events\":47,\"inherits\":84,\"lodash/core\":88,\"readable-stream\":107}],31:[function(require,module,exports){\r\n/**\r\n * @file Represents Salesforce record information\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar _ = require('lodash/core');\r\n\r\n/**\r\n * A simple hash object including record field information\r\n *\r\n * @typedef {Object} Record\r\n */\r\n\r\n/**\r\n * Remote reference to record information\r\n *\r\n * @protected\r\n * @class\r\n * @constructor\r\n * @param {Connection} conn - Connection object\r\n * @param {String} type - SObject type\r\n * @param {String} id - Record ID\r\n */\r\nvar RecordReference = module.exports = function(conn, type, id) {\r\n  this._conn = conn;\r\n  this.type = type;\r\n  this.id = id;\r\n};\r\n\r\n/**\r\n * Retrieve record field information\r\n *\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<Record>} [callback] - Callback function\r\n * @returns {Promise.<Record>}\r\n */\r\nRecordReference.prototype.retrieve = function(options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  return this._conn.retrieve(this.type, this.id, options, callback);\r\n};\r\n\r\n/**\r\n * Update record field information\r\n *\r\n * @param {Record} record - A Record which includes fields to update\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<RecordResult>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult>}\r\n */\r\nRecordReference.prototype.update = function(record, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  record = _.clone(record);\r\n  record.Id = this.id;\r\n  return this._conn.update(this.type, record, options, callback);\r\n};\r\n\r\n/**\r\n * Synonym of Record#destroy()\r\n *\r\n * @method RecordReference#delete\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<RecordResult>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult>}\r\n */\r\nRecordReference.prototype[\"delete\"] =\r\n/**\r\n * Synonym of Record#destroy()\r\n *\r\n * @method RecordReference#del\r\n * @param {Callback.<RecordResult>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult>}\r\n */\r\nRecordReference.prototype.del =\r\n/**\r\n * Delete record field\r\n *\r\n * @method RecordReference#destroy\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<RecordResult>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult>}\r\n */\r\nRecordReference.prototype.destroy = function(options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  return this._conn.destroy(this.type, this.id, options, callback);\r\n};\r\n\r\n/**\r\n * Get blob field as stream\r\n *\r\n * @param {String} fieldName - Blob field name\r\n * @returns {stream.Stream}\r\n */\r\nRecordReference.prototype.blob = function(fieldName) {\r\n  var url = [ this._conn._baseUrl(), 'sobjects', this.type, this.id, fieldName ].join('/');\r\n  return this._conn.request(url).stream();\r\n};\r\n\r\n},{\"lodash/core\":88}],32:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar required = require('./_required');\r\n\r\nmodule.exports = function(name) {\r\n  if (name === './jsforce' || name === 'jsforce') {\r\n    name = './core';\r\n  }\r\n  var m = required[name];\r\n  if (typeof m === 'undefined') {\r\n    throw new Error(\"Cannot find module '\" + name + \"'\");\r\n  }\r\n  return m;\r\n};\r\n\r\n},{\"./_required\":3}],33:[function(require,module,exports){\r\n/**\r\n * @file Manages method call to SOAP endpoint\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar inherits = require('inherits'),\r\n    _ = require('lodash/core'),\r\n    xml2js = require('xml2js'),\r\n    HttpApi = require('./http-api');\r\n\r\n\r\n/**\r\n * Class for SOAP endpoint of Salesforce\r\n *\r\n * @protected\r\n * @class\r\n * @constructor\r\n * @param {Connection} conn - Connection instance\r\n * @param {Object} options - SOAP endpoint setting options\r\n * @param {String} options.endpointUrl - SOAP endpoint URL\r\n * @param {String} [options.xmlns] - XML namespace for method call (default is \"urn:partner.soap.sforce.com\")\r\n */\r\nvar SOAP = module.exports = function(conn, options) {\r\n  SOAP.super_.apply(this, arguments);\r\n  this._endpointUrl = options.endpointUrl;\r\n  this._xmlns = options.xmlns || 'urn:partner.soap.sforce.com';\r\n};\r\n\r\ninherits(SOAP, HttpApi);\r\n\r\n/**\r\n * Invoke SOAP call using method and arguments\r\n *\r\n * @param {String} method - Method name\r\n * @param {Object} args - Arguments for the method call\r\n * @param {Object} [schema] - Schema definition of response message\r\n * @param {Callback.<Object>} [callback] - Callback function\r\n * @returns {Promise.<Object>}\r\n */\r\nSOAP.prototype.invoke = function(method, args, schema, callback) {\r\n  if (typeof schema === 'function') {\r\n    callback = schema;\r\n    schema = null;\r\n  }\r\n  var message = {};\r\n  message[method] = args;\r\n  return this.request({\r\n    method: 'POST',\r\n    url: this._endpointUrl,\r\n    headers: {\r\n      'Content-Type': 'text/xml',\r\n      'SOAPAction': '\"\"'\r\n    },\r\n    message: message\r\n  }).then(function(res) {\r\n    return schema ? convertType(res, schema) : res;\r\n  }).thenCall(callback);\r\n};\r\n\r\n/* @private */\r\nfunction convertType(value, schema) {\r\n  if (_.isArray(value)) {\r\n    return value.map(function(v) {\r\n      return convertType(v, schema && schema[0])\r\n    });\r\n  } else if (_.isObject(value)) {\r\n    if (value.$ && value.$['xsi:nil'] === 'true') {\r\n      return null;\r\n    } else if (_.isArray(schema)) {\r\n      return [ convertType(value, schema[0]) ];\r\n    } else {\r\n      var o = {};\r\n      for (var key in value) {\r\n        o[key] = convertType(value[key], schema && schema[key]);\r\n      }\r\n      return o;\r\n    }\r\n  } else {\r\n    if (_.isArray(schema)) {\r\n      return [ convertType(value, schema[0]) ];\r\n    } else if (_.isObject(schema)) {\r\n      return {};\r\n    } else {\r\n      switch(schema) {\r\n        case 'string':\r\n          return String(value);\r\n        case 'number':\r\n          return Number(value);\r\n        case 'boolean':\r\n          return value === 'true';\r\n        default:\r\n          return value;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/** @override **/\r\nSOAP.prototype.beforeSend = function(request) {\r\n  request.body = this._createEnvelope(request.message);\r\n};\r\n\r\n/** @override **/\r\nSOAP.prototype.isSessionExpired = function(response) {\r\n  return response.statusCode === 500 &&\r\n    /<faultcode>[a-zA-Z]+:INVALID_SESSION_ID<\\/faultcode>/.test(response.body);\r\n};\r\n\r\n/** @override **/\r\nSOAP.prototype.parseError = function(body) {\r\n  var error = lookupValue(body, [ /:Envelope$/, /:Body$/, /:Fault$/ ]);\r\n  return {\r\n    errorCode: error.faultcode,\r\n    message: error.faultstring\r\n  };\r\n};\r\n\r\n/** @override **/\r\nSOAP.prototype.getResponseBody = function(response) {\r\n  var body = SOAP.super_.prototype.getResponseBody.call(this, response);\r\n  return lookupValue(body, [ /:Envelope$/, /:Body$/, /.+/ ]);\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nfunction lookupValue(obj, propRegExps) {\r\n  var regexp = propRegExps.shift();\r\n  if (!regexp) {\r\n    return obj;\r\n  }\r\n  else {\r\n    for (var prop in obj) {\r\n      if (regexp.test(prop)) {\r\n        return lookupValue(obj[prop], propRegExps);\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nfunction toXML(name, value) {\r\n  if (_.isObject(name)) {\r\n    value = name;\r\n    name = null;\r\n  }\r\n  if (_.isArray(value)) {\r\n    return _.map(value, function(v) { return toXML(name, v); }).join('');\r\n  } else {\r\n    var attrs = [];\r\n    var elems = [];\r\n    if (_.isObject(value)) {\r\n      for (var k in value) {\r\n        var v = value[k];\r\n        if (k[0] === '@') {\r\n          k = k.substring(1);\r\n          attrs.push(k + '=\"' + v + '\"');\r\n        } else {\r\n          elems.push(toXML(k, v));\r\n        }\r\n      }\r\n      value = elems.join('');\r\n    } else {\r\n      value = String(value)\r\n        .replace(/&/g, '&amp;')\r\n        .replace(/</g, '&lt;')\r\n        .replace(/>/g, '&gt;')\r\n        .replace(/\"/g, '&quot;')\r\n        .replace(/'/g, '&apos;');\r\n    }\r\n    var startTag = name ? '<' + name + (attrs.length > 0 ? ' ' + attrs.join(' ') : '') + '>' : '';\r\n    var endTag = name ? '</' + name + '>' : '';\r\n    return  startTag + value + endTag;\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nSOAP.prototype._createEnvelope = function(message) {\r\n  var header = {};\r\n  var conn = this._conn;\r\n  if (conn.accessToken) {\r\n    header.SessionHeader = { sessionId: this._conn.accessToken };\r\n  }\r\n  if (conn.callOptions) {\r\n    header.CallOptions = conn.callOptions;\r\n  }\r\n  return [\r\n    '<?xml version=\"1.0\" encoding=\"UTF-8\"?>',\r\n    '<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"',\r\n    ' xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"',\r\n    ' xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">',\r\n    '<soapenv:Header xmlns=\"' + this._xmlns + '\">',\r\n    toXML(header),\r\n    '</soapenv:Header>',\r\n    '<soapenv:Body xmlns=\"' + this._xmlns + '\">',\r\n    toXML(message),\r\n    '</soapenv:Body>',\r\n    '</soapenv:Envelope>'\r\n  ].join('');\r\n};\r\n\r\n},{\"./http-api\":23,\"inherits\":84,\"lodash/core\":88,\"xml2js\":123}],34:[function(require,module,exports){\r\n/**\r\n * @file Represents Salesforce SObject\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar _      = require('lodash/core'),\r\n    Record = require('./record'),\r\n    Query  = require('./query'),\r\n    Cache  = require('./cache'),\r\n    QuickAction = require('./quick-action');\r\n\r\n/**\r\n * A class for organizing all SObject access\r\n *\r\n * @constructor\r\n */\r\nvar SObject = module.exports = function(conn, type) {\r\n  this._conn = conn;\r\n  this.type = type;\r\n  var cacheOptions = { key: \"describe.\" + this.type };\r\n  this.describe$ = conn.cache.makeCacheable(this.describe, this, cacheOptions);\r\n  this.describe = conn.cache.makeResponseCacheable(this.describe, this, cacheOptions);\r\n\r\n  cacheOptions = { key: \"layouts.\" + this.type };\r\n  this.layouts$ = conn.cache.makeCacheable(this.layouts, this, cacheOptions);\r\n  this.layouts = conn.cache.makeResponseCacheable(this.layouts, this, cacheOptions);\r\n\r\n  cacheOptions = { key: \"compactLayouts.\" + this.type };\r\n  this.compactLayouts$ = conn.cache.makeCacheable(this.compactLayouts, this, cacheOptions);\r\n  this.compactLayouts = conn.cache.makeResponseCacheable(this.compactLayouts, this, cacheOptions);\r\n\r\n  cacheOptions = { key: \"approvalLayouts.\" + this.type };\r\n  this.approvalLayouts$ = conn.cache.makeCacheable(this.approvalLayouts, this, cacheOptions);\r\n  this.approvalLayouts = conn.cache.makeResponseCacheable(this.approvalLayouts, this, cacheOptions);\r\n};\r\n\r\n/**\r\n * Synonym of SObject#create()\r\n *\r\n * @method SObject#insert\r\n * @param {Record|Array.<Record>} records - A record or array of records to create\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Create records\r\n *\r\n * @method SObject#create\r\n * @param {Record|Array.<Record>} records - A record or array of records to create\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\nSObject.prototype.insert =\r\nSObject.prototype.create = function(records, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  return this._conn.create(this.type, records, options, callback);\r\n};\r\n\r\n/**\r\n * Retrieve specified records\r\n *\r\n * @param {String|Array.<String>} ids - A record ID or array of record IDs\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<Record|Array.<Record>>} [callback] - Callback function\r\n * @returns {Promise.<Record|Array.<Record>>}\r\n */\r\nSObject.prototype.retrieve = function(ids, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  return this._conn.retrieve(this.type, ids, options, callback);\r\n};\r\n\r\n/**\r\n * Update records\r\n *\r\n * @param {Record|Array.<Record>} records - A record or array of records to update\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\nSObject.prototype.update = function(records, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  return this._conn.update(this.type, records, options, callback);\r\n};\r\n\r\n/**\r\n * Upsert records\r\n *\r\n * @param {Record|Array.<Record>} records - Record or array of records to upsert\r\n * @param {String} extIdField - External ID field name\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\nSObject.prototype.upsert = function(records, extIdField, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  return this._conn.upsert(this.type, records, extIdField, options, callback);\r\n};\r\n\r\n/**\r\n * Synonym of SObject#destroy()\r\n *\r\n * @method SObject#delete\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Synonym of SObject#destroy()\r\n *\r\n * @method SObject#del\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\n/**\r\n * Delete records\r\n *\r\n * @method SObject#destroy\r\n * @param {String|Array.<String>} ids - A ID or array of IDs to delete\r\n * @param {Object} [options] - Options for rest api.\r\n * @param {Callback.<RecordResult|Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<RecordResult|Array.<RecordResult>>}\r\n */\r\nSObject.prototype[\"delete\"] =\r\nSObject.prototype.del =\r\nSObject.prototype.destroy = function(ids, options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  return this._conn.destroy(this.type, ids, options, callback);\r\n};\r\n\r\n/**\r\n * Describe SObject metadata\r\n *\r\n * @param {Callback.<DescribeSObjectResult>} [callback] - Callback function\r\n * @returns {Promise.<DescribeSObjectResult>}\r\n */\r\nSObject.prototype.describe = function(callback) {\r\n  return this._conn.describe(this.type, callback);\r\n};\r\n\r\n/**\r\n * Get record representation instance by given id\r\n *\r\n * @param {String} id - A record ID\r\n * @returns {RecordReference}\r\n */\r\nSObject.prototype.record = function(id) {\r\n  return new Record(this._conn, this.type, id);\r\n};\r\n\r\n/**\r\n * Find and fetch records which matches given conditions\r\n *\r\n * @param {Object|String} [conditions] - Conditions in JSON object (MongoDB-like), or raw SOQL WHERE clause string.\r\n * @param {Object|Array.<String>|String} [fields] - Fields to fetch. Format can be in JSON object (MongoDB-like), array of field names, or comma-separated field names.\r\n * @param {Object} [options] - Query options.\r\n * @param {Number} [options.limit] - Maximum number of records the query will return.\r\n * @param {Number} [options.offset] - Offset number where begins returning results.\r\n * @param {Number} [options.skip] - Synonym of options.offset.\r\n * @param {Callback.<Array.<Record>>} [callback] - Callback function\r\n * @returns {Query.<Array.<Record>>}\r\n */\r\nSObject.prototype.find = function(conditions, fields, options, callback) {\r\n  if (typeof conditions === 'function') {\r\n    callback = conditions;\r\n    conditions = {};\r\n    fields = null;\r\n    options = null;\r\n  } else if (typeof fields === 'function') {\r\n    callback = fields;\r\n    fields = null;\r\n    options = null;\r\n  } else if (typeof options === 'function') {\r\n    callback = options;\r\n    options = null;\r\n  }\r\n  options = options || {};\r\n  var config = {\r\n    fields: fields,\r\n    includes: options.includes,\r\n    table: this.type,\r\n    conditions: conditions,\r\n    limit: options.limit,\r\n    sort: options.sort,\r\n    offset: options.offset || options.skip\r\n  };\r\n  var query = new Query(this._conn, config, options);\r\n  query.setResponseTarget(Query.ResponseTargets.Records);\r\n  if (callback) { query.run(callback); }\r\n  return query;\r\n};\r\n\r\n/**\r\n * Fetch one record which matches given conditions\r\n *\r\n * @param {Object|String} [conditions] - Conditions in JSON object (MongoDB-like), or raw SOQL WHERE clause string.\r\n * @param {Object|Array.<String>|String} [fields] - Fields to fetch. Format can be in JSON object (MongoDB-like), array of field names, or comma-separated field names.\r\n * @param {Object} [options] - Query options.\r\n * @param {Number} [options.limit] - Maximum number of records the query will return.\r\n * @param {Number} [options.offset] - Offset number where begins returning results.\r\n * @param {Number} [options.skip] - Synonym of options.offset.\r\n * @param {Callback.<Record>} [callback] - Callback function\r\n * @returns {Query.<Record>}\r\n */\r\nSObject.prototype.findOne = function(conditions, fields, options, callback) {\r\n  if (typeof conditions === 'function') {\r\n    callback = conditions;\r\n    conditions = {};\r\n    fields = null;\r\n    options = null;\r\n  } else if (typeof fields === 'function') {\r\n    callback = fields;\r\n    fields = null;\r\n    options = null;\r\n  } else if (typeof options === 'function') {\r\n    callback = options;\r\n    options = null;\r\n  }\r\n  options = _.extend(options || {}, { limit: 1 });\r\n  var query = this.find(conditions, fields, options);\r\n  query.setResponseTarget(Query.ResponseTargets.SingleRecord);\r\n  if (callback) { query.run(callback); }\r\n  return query;\r\n};\r\n\r\n/**\r\n * Find and fetch records only by specifying fields to fetch.\r\n *\r\n * @param {Object|Array.<String>|String} [fields] - Fields to fetch. Format can be in JSON object (MongoDB-like), array of field names, or comma-separated field names.\r\n * @param {Callback.<Array.<Record>>} [callback] - Callback function\r\n * @returns {Query.<Array.<Record>>}\r\n */\r\nSObject.prototype.select = function(fields, callback) {\r\n  return this.find(null, fields, null, callback);\r\n};\r\n\r\n/**\r\n * Count num of records which matches given conditions\r\n *\r\n * @param {Object|String} [conditions] - Conditions in JSON object (MongoDB-like), or raw SOQL WHERE clause string.\r\n * @param {Callback.<Number>} [callback] - Callback function\r\n * @returns {Query.<Number>}\r\n */\r\nSObject.prototype.count = function(conditions, callback) {\r\n  if (typeof conditions === 'function') {\r\n    callback = conditions;\r\n    conditions = {};\r\n  }\r\n  var query = this.find(conditions, { \"count()\" : true });\r\n  query.setResponseTarget(\"Count\");\r\n  if (callback) { query.run(callback); }\r\n  return query;\r\n};\r\n\r\n\r\n/**\r\n * Call Bulk#load() to execute bulkload, returning batch object\r\n *\r\n * @param {String} operation - Bulk load operation ('insert', 'update', 'upsert', 'delete', or 'hardDelete')\r\n * @param {Object} [options] - Options for bulk loading operation\r\n * @param {String} [options.extIdField] - External ID field name (used when upsert operation).\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulkload. Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\nSObject.prototype.bulkload = function(operation, options, input, callback) {\r\n  return this._conn.bulk.load(this.type, operation, options, input, callback);\r\n};\r\n\r\n/**\r\n * Synonym of SObject#createBulk()\r\n *\r\n * @method SObject#insertBulk\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulk insert. Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\n/**\r\n * Bulkly insert input data using bulk API\r\n *\r\n * @method SObject#createBulk\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulk insert. Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\nSObject.prototype.insertBulk =\r\nSObject.prototype.createBulk = function(input, callback) {\r\n  return this.bulkload(\"insert\", input, callback);\r\n};\r\n\r\n/**\r\n * Bulkly update records by input data using bulk API\r\n *\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulk update Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\nSObject.prototype.updateBulk = function(input, callback) {\r\n  return this.bulkload(\"update\", input, callback);\r\n};\r\n\r\n/**\r\n * Bulkly upsert records by input data using bulk API\r\n *\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulk upsert. Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {String} [options.extIdField] - External ID field name\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\nSObject.prototype.upsertBulk = function(input, extIdField, callback) {\r\n  return this.bulkload(\"upsert\", { extIdField: extIdField }, input, callback);\r\n};\r\n\r\n/**\r\n * Synonym of SObject#destroyBulk()\r\n *\r\n * @method SObject#deleteBulk\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulk delete. Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\n/**\r\n * Bulkly delete records specified by input data using bulk API\r\n *\r\n * @method SObject#destroyBulk\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulk delete. Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\nSObject.prototype.deleteBulk =\r\nSObject.prototype.destroyBulk = function(input, callback) {\r\n  return this.bulkload(\"delete\", input, callback);\r\n};\r\n\r\n/**\r\n * Synonym of SObject#destroyHardBulk()\r\n *\r\n * @method SObject#deleteHardBulk\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulk delete. Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\n/**\r\n * Bulkly hard delete records specified in input data using bulk API\r\n *\r\n * @method SObject#destroyHardBulk\r\n * @param {Array.<Record>|stream.Stream|String} [input] - Input source for bulk delete. Accepts array of records, CSv string, and CSV data input stream.\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Bulk~Batch}\r\n */\r\nSObject.prototype.deleteHardBulk =\r\nSObject.prototype.destroyHardBulk = function(input, callback) {\r\n  return this.bulkload(\"hardDelete\", input, callback);\r\n};\r\n\r\n/**\r\n * Retrieve recently accessed records\r\n *\r\n * @param {Callback.<Array.<RecordResult>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<RecordResult>>}\r\n */\r\nSObject.prototype.recent = function (callback) {\r\n  return this._conn.recent(this.type, callback);\r\n};\r\n\r\n/**\r\n * Retrieve the updated records\r\n *\r\n * @param {String|Date} start - start date or string representing the start of the interval\r\n * @param {String|Date} end - start date or string representing the end of the interval, must be > start\r\n * @param {Callback.<UpdatedRecordsInfo>} [callback] - Callback function\r\n * @returns {Promise.<UpdatedRecordsInfo>}\r\n */\r\nSObject.prototype.updated = function (start, end, callback) {\r\n  return this._conn.updated(this.type, start, end, callback);\r\n};\r\n\r\n/**\r\n * Retrieve the deleted records\r\n *\r\n * @param {String|Date} start - start date or string representing the start of the interval\r\n * @param {String|Date} end - start date or string representing the end of the interval, must be > start\r\n * @param {Callback.<DeletedRecordsInfo>} [callback] - Callback function\r\n * @returns {Promise.<DeletedRecordsInfo>}\r\n */\r\nSObject.prototype.deleted = function (start, end, callback) {\r\n  return this._conn.deleted(this.type, start, end, callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} LayoutInfo\r\n * @prop {Array.<Object>} layouts - Array of layouts\r\n * @prop {Array.<Object>} recordTypeMappings - Array of record type mappings\r\n */\r\n/**\r\n * Describe layout information for SObject\r\n *\r\n * @param {String} [layoutName] - Name of named layout. (e.g. UserAlt in User SObject)\r\n * @param {Callback.<LayoutInfo>} [callback] - Callback function\r\n * @returns {Promise.<LayoutInfo>}\r\n */\r\nSObject.prototype.layouts = function(layoutName, callback) {\r\n  if (typeof layoutName === 'function') {\r\n    callback = layoutName;\r\n    layoutName = null;\r\n  }\r\n  var url = \"/sobjects/\" + this.type + \"/describe/\" + (layoutName ? \"namedLayouts/\"+layoutName : \"layouts\");\r\n  return this._conn.request(url, callback);\r\n};\r\n\r\n/**\r\n * @typedef {Object} CompactLayoutInfo\r\n * @prop {Array.<Object>} compactLayouts - Array of compact layouts\r\n * @prop {String} defaultCompactLayoutId - ID of default compact layout\r\n * @prop {Array.<Object>} recordTypeCompactLayoutMappings - Array of record type mappings\r\n */\r\n/**\r\n * Describe compact layout information defined for SObject\r\n *\r\n * @param {Callback.<CompactLayoutInfo>} [callback] - Callback function\r\n * @returns {Promise.<CompactLayoutInfo>}\r\n */\r\nSObject.prototype.compactLayouts = function(callback) {\r\n  var url = \"/sobjects/\" + this.type + \"/describe/compactLayouts\";\r\n  return this._conn.request(url, callback);\r\n};\r\n\r\n\r\n/**\r\n * @typedef {Object} ApprovalLayoutInfo\r\n * @prop {Array.<Object>} approvalLayouts - Array of approval layouts\r\n */\r\n/**\r\n * Describe compact layout information defined for SObject\r\n *\r\n * @param {Callback.<ApprovalLayoutInfo>} [callback] - Callback function\r\n * @returns {Promise.<ApprovalLayoutInfo>}\r\n */\r\nSObject.prototype.approvalLayouts = function(callback) {\r\n  var url = \"/sobjects/\" + this.type + \"/describe/approvalLayouts\";\r\n  return this._conn.request(url, callback);\r\n};\r\n\r\n/**\r\n * Returns the list of list views for the SObject\r\n *\r\n * @param {Callback.<ListViewsInfo>} [callback] - Callback function\r\n * @returns {Promise.<ListViewsInfo>}\r\n */\r\nSObject.prototype.listviews = function(callback) {\r\n  var url = this._conn._baseUrl() + '/sobjects/' + this.type + '/listviews';\r\n  return this._conn.request(url, callback);\r\n};\r\n\r\n/**\r\n * Returns the list view info in specifed view id\r\n *\r\n * @param {String} id - List view ID\r\n * @returns {ListView}\r\n */\r\nSObject.prototype.listview = function(id) {\r\n  return new ListView(this._conn, this.type, id);\r\n};\r\n\r\n/**\r\n * Returns all registered quick actions for the SObject\r\n *\r\n * @param {Callback.<Array.<QuickAction~QuickActionInfo>>} [callback] - Callback function\r\n * @returns {Promise.<Array.<QuickAction~QuickActionInfo>>}\r\n */\r\nSObject.prototype.quickActions = function(callback) {\r\n  return this._conn.request(\"/sobjects/\" + this.type + \"/quickActions\").thenCall(callback);\r\n};\r\n\r\n/**\r\n * Get reference for specified quick aciton in the SObject\r\n *\r\n * @param {String} actionName - Name of the quick action\r\n * @returns {QuickAction}\r\n */\r\nSObject.prototype.quickAction = function(actionName) {\r\n  return new QuickAction(this._conn, \"/sobjects/\" + this.type + \"/quickActions/\" + actionName);\r\n};\r\n\r\n\r\n/**\r\n * A class for organizing list view information\r\n *\r\n * @protected\r\n * @class ListView\r\n * @param {Connection} conn - Connection instance\r\n * @param {SObject} type - SObject type\r\n * @param {String} id - List view ID\r\n */\r\nvar ListView = function(conn, type, id) {\r\n  this._conn = conn;\r\n  this.type = type;\r\n  this.id = id;\r\n};\r\n\r\n/**\r\n * Executes query for the list view and returns the resulting data and presentation information.\r\n *\r\n * @param {Callback.<ListViewResultInfo>} [callback] - Callback function\r\n * @returns {Promise.<ListViewResultInfo>}\r\n */\r\nListView.prototype.results = function(callback) {\r\n  var url =  this._conn._baseUrl() + '/sobjects/' + this.type + '/listviews/' + this.id + '/results';\r\n  return this._conn.request(url, callback);\r\n};\r\n\r\n\r\n/**\r\n * Returns detailed information about a list view\r\n *\r\n * @param {Object} [options] - Identity call options\r\n * @param {Object} [options.headers] - Additional HTTP request headers sent in identity request\r\n * @param {Callback.<ListViewDescribeInfo>} [callback] - Callback function\r\n * @returns {Promise.<ListViewDescribeInfo>}\r\n */\r\nListView.prototype.describe = function(options, callback) {\r\n  if (typeof options === 'function') {\r\n    callback = options;\r\n    options = {};\r\n  }\r\n  options = options || {};\r\n  var url =  this._conn._baseUrl() + '/sobjects/' + this.type + '/listviews/' + this.id + '/describe';\r\n  return this._conn.request({ method: 'GET', url: url, headers: options.headers }, callback);\r\n};\r\n\r\n/**\r\n * Explain plan for executing list view\r\n *\r\n * @param {Callback.<ExplainInfo>} [callback] - Callback function\r\n * @returns {Promise.<ExplainInfo>}\r\n */\r\nListView.prototype.explain = function(callback) {\r\n  var url = \"/query/?explain=\" + this.id;\r\n  return this._conn.request(url, callback);\r\n};\r\n\r\n},{\"./cache\":18,\"./query\":28,\"./quick-action\":29,\"./record\":31,\"lodash/core\":88}],35:[function(require,module,exports){\r\n/**\r\n * @file Create and build SOQL string from configuration\r\n * @author Shinichi Tomita <shinichi.tomita@gmail.com>\r\n */\r\n\r\n'use strict';\r\n\r\nvar _      = require('lodash/core'),\r\n    SfDate = require(\"./date\");\r\n\r\n\r\n/**\r\n * Create SOQL\r\n * @private\r\n */\r\nfunction createSOQL(query) {\r\n  var soql = [\r\n    \"SELECT \",\r\n    createFieldsClause(query.fields, query.includes),\r\n    \" FROM \",\r\n    query.table\r\n  ].join(\"\");\r\n  var cond = createConditionClause(query.conditions);\r\n  if (cond) {\r\n    soql += \" WHERE \" + cond;\r\n  }\r\n  var orderby = createOrderByClause(query.sort);\r\n  if (orderby) {\r\n    soql += \" ORDER BY \" + orderby;\r\n  }\r\n  if (query.limit) {\r\n    soql += \" LIMIT \" + query.limit;\r\n  }\r\n  if (query.offset) {\r\n    soql += \" OFFSET \" + query.offset;\r\n  }\r\n  return soql;\r\n}\r\n\r\n/** @private **/\r\nfunction createFieldsClause(fields, childQueries) {\r\n  childQueries = _.map(_.values(childQueries || {}), function(cquery) {\r\n    return '(' + createSOQL(cquery) + ')';\r\n  });\r\n  return (fields || [ \"Id\" ]).concat(childQueries).join(', ');\r\n}\r\n\r\n/** @private **/\r\nfunction createConditionClause(conditions, operator, depth) {\r\n  if (_.isString(conditions)) {\r\n    return conditions;\r\n  }\r\n  conditions = conditions || [];\r\n  operator = operator || \"AND\";\r\n  depth = depth || 0;\r\n  if (!isArray(conditions)) { // if passed in hash object\r\n    conditions = _.keys(conditions).map(function(key) {\r\n      return {\r\n        key: key,\r\n        value: conditions[key]\r\n      };\r\n    });\r\n  } else {\r\n    conditions = conditions.map(function(cond) {\r\n      var conds = [];\r\n      for (var key in cond) {\r\n        conds.push({\r\n          key: key,\r\n          value: cond[key]\r\n        });\r\n      }\r\n      return conds.length>1 ? conds : conds[0];\r\n    });\r\n  }\r\n  conditions = conditions.map(function(cond) {\r\n    var d = depth+1, op;\r\n    switch (cond.key) {\r\n      case \"$or\" :\r\n      case \"$and\" :\r\n      case \"$not\" :\r\n        if (operator !== \"NOT\" && conditions.length === 1) {\r\n          d = depth; // not change tree depth\r\n        }\r\n        op = cond.key === \"$or\" ? \"OR\" :\r\n             cond.key === \"$and\" ? \"AND\" :\r\n             \"NOT\";\r\n        return createConditionClause(cond.value, op, d);\r\n      default:\r\n        return createFieldExpression(cond.key, cond.value);\r\n    }\r\n  }).filter(function(expr) { return expr; });\r\n\r\n  var paren;\r\n  if (operator === 'NOT') {\r\n    paren = depth > 0;\r\n    return (paren ? \"(\" : \"\") + \"NOT \" + conditions[0] + (paren ? \")\" : \"\");\r\n  } else {\r\n    paren = depth > 0 && conditions.length > 1;\r\n    return (paren ? \"(\" : \"\") + conditions.join(\" \"+operator+\" \") + (paren ? \")\" : \"\");\r\n  }\r\n}\r\n\r\nvar opMap = {\r\n  \"=\"     : \"=\",\r\n  \"$eq\"   : \"=\",\r\n  \"!=\"    : \"!=\",\r\n  \"$ne\"   : \"!=\",\r\n  \">\"     : \">\",\r\n  \"$gt\"   : \">\",\r\n  \"<\"     : \"<\",\r\n  \"$lt\"   : \"<\",\r\n  \">=\"    : \">=\",\r\n  \"$gte\"  : \">=\",\r\n  \"<=\"    : \"<=\",\r\n  \"$lte\"  : \"<=\",\r\n  \"$like\" : \"LIKE\",\r\n  \"$nlike\" : \"NOT LIKE\",\r\n  \"$in\"   : \"IN\",\r\n  \"$nin\"  : \"NOT IN\",\r\n  \"$includes\" : \"INCLUDES\",\r\n  \"$excludes\" : \"EXCLUDES\",\r\n  \"$exists\" : \"EXISTS\"\r\n};\r\n\r\n/** @private **/\r\nfunction createFieldExpression(field, value) {\r\n  var op = \"$eq\";\r\n\r\n  // Assume the `$in` operator if value is an array and none was supplied.\r\n  if (_.isArray(value)) { op = \"$in\"; }\r\n  // Otherwise, if an object was passed then process the supplied ops.\r\n  else if (_.isObject(value)) {\r\n    var _value;\r\n    for (var k in value) {\r\n      if (k[0] === \"$\") {\r\n        op = k;\r\n        value = value[k];\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  var sfop = opMap[op];\r\n  if (!sfop || _.isUndefined(value)) { return null; }\r\n  var valueExpr = createValueExpression(value);\r\n  if (_.isUndefined(valueExpr)) { return null; }\r\n  switch (sfop) {\r\n    case \"NOT LIKE\":\r\n      return \"(\" + [ \"NOT\", field, 'LIKE', valueExpr ].join(\" \") + \")\";\r\n    case \"EXISTS\":\r\n      return [ field, value ? \"!=\" : \"=\", \"null\" ].join(\" \");\r\n    default:\r\n      return [ field, sfop, valueExpr ].join(\" \");\r\n  }\r\n}\r\n\r\n/** @private **/\r\nfunction createValueExpression(value) {\r\n  if (isArray(value)) {\r\n    return value.length > 0 ?\r\n           \"(\" + value.map(createValueExpression).join(\", \") + \")\" :\r\n           undefined;\r\n  }\r\n  if (value instanceof SfDate) {\r\n    return value.toString();\r\n  }\r\n  if (_.isString(value)) {\r\n    return \"'\" + escapeSOQLString(value) + \"'\";\r\n  }\r\n  if (_.isNumber(value)) {\r\n    return (value).toString();\r\n  }\r\n  if (_.isNull(value)) {\r\n    return \"null\";\r\n  }\r\n  return value;\r\n}\r\n\r\n/** @private **/\r\nfunction escapeSOQLString(str) {\r\n  return String(str || '').replace(/'/g, \"\\\\'\");\r\n}\r\n\r\n/** @private **/\r\nfunction isArray(a) {\r\n  return _.isObject(a) && _.isFunction(a.pop);\r\n}\r\n\r\n\r\n/** @private **/\r\nfunction createOrderByClause(sort) {\r\n  sort = sort || [];\r\n  if (_.isString(sort)) {\r\n    if (/,|\\s+(asc|desc)\\s*$/.test(sort)) {\r\n      // must be specified in pure \"order by\" clause. Return raw config.\r\n      return sort;\r\n    }\r\n    // sort order in mongoose-style expression.\r\n    // e.g. \"FieldA -FieldB\" => \"ORDER BY FieldA ASC, FieldB DESC\"\r\n    sort = sort.split(/\\s+/).map(function(field) {\r\n      var dir = \"ASC\"; // ascending\r\n      var flag = field[0];\r\n      if (flag === '-') {\r\n        dir = \"DESC\";\r\n        field = field.substring(1);\r\n      } else if (flag === '+') {\r\n        field = field.substring(1);\r\n      }\r\n      return [ field, dir ];\r\n    });\r\n  } else if (!isArray(sort)) {\r\n    sort = _.keys(sort).map(function(field) {\r\n      var dir = sort[field];\r\n      return [ field, dir ];\r\n    });\r\n  }\r\n  return sort.map(function(s) {\r\n    var field = s[0], dir = s[1];\r\n    switch (String(dir)) {\r\n      case \"DESC\":\r\n      case \"desc\":\r\n      case \"descending\":\r\n      case \"-\":\r\n      case \"-1\":\r\n        dir = \"DESC\";\r\n        break;\r\n      default:\r\n        dir = \"ASC\";\r\n    }\r\n    return field + \" \" + dir;\r\n  }).join(\", \");\r\n}\r\n\r\n\r\nexports.createSOQL = createSOQL;\r\n\r\n},{\"./date\":22,\"lodash/core\":88}],36:[function(require,module,exports){\r\n(function (process){\r\n/*global process, Sfdc */\r\n\r\n'use strict';\r\n\r\nvar inherits = require('inherits'),\r\n    Promise = require('./promise');\r\n\r\n/* */\r\n\r\nvar request = require('request'),\r\n    canvas = require('./browser/canvas'),\r\n    jsonp = require('./browser/jsonp');\r\n\r\n// set options if defaults setting is available in request, which is not available in xhr module.\r\nif (request.defaults) {\r\n  var defaults = {\r\n    followAllRedirects: true\r\n  };\r\n  if (process.env.HTTP_PROXY) {\r\n    defaults.proxy = process.env.HTTP_PROXY;\r\n  }\r\n  if (parseInt(process.env.HTTP_TIMEOUT)) {\r\n    defaults.timeout = parseInt(process.env.HTTP_TIMEOUT);\r\n  }\r\n  request = request.defaults(defaults);\r\n}\r\n\r\nvar baseUrl;\r\nif (typeof window === 'undefined') {\r\n  baseUrl = process.env.LOCATION_BASE_URL || \"\";\r\n} else {\r\n  var apiHost = normalizeApiHost(window.location.host);\r\n  baseUrl = apiHost ? \"https://\" + apiHost : \"\";\r\n}\r\n\r\n/**\r\n * Add stream() method to promise (and following promise chain), to access original request stream.\r\n * @private\r\n */\r\nfunction streamify(promise, factory) {\r\n  var _then = promise.then;\r\n  promise.then = function() {\r\n    factory();\r\n    var newPromise = _then.apply(promise, arguments);\r\n    return streamify(newPromise, factory);\r\n  };\r\n  promise.stream = factory;\r\n  return promise;\r\n}\r\n\r\n/**\r\n * Normarize Salesforce API host name\r\n * @private\r\n */\r\nfunction normalizeApiHost(apiHost) {\r\n  var m = /(\\w+)\\.(visual\\.force|salesforce)\\.com$/.exec(apiHost);\r\n  if (m) {\r\n    apiHost = m[1] + \".salesforce.com\";\r\n  }\r\n  return apiHost;\r\n}\r\n\r\n/**\r\n * Class for HTTP request transport\r\n *\r\n * @class\r\n * @protected\r\n */\r\nvar Transport = module.exports = function() {};\r\n\r\n/**\r\n * Make HTTP request, returns promise instead of stream\r\n *\r\n * @param {Object} params - HTTP request\r\n * @param {Callback.<Object>} [callback] - Calback Function\r\n * @returns {Promise.<Object>}\r\n */\r\nTransport.prototype.httpRequest = function(params, callback) {\r\n  var deferred = Promise.defer();\r\n  var req;\r\n  var httpRequest = this._getHttpRequestModule();\r\n  var createRequest = function() {\r\n    if (!req) {\r\n      req = httpRequest(params, function(err, response) {\r\n        if (err) {\r\n          deferred.reject(err);\r\n        } else {\r\n          deferred.resolve(response);\r\n        }\r\n      });\r\n    }\r\n    return req;\r\n  };\r\n  return streamify(deferred.promise, createRequest).thenCall(callback);\r\n};\r\n\r\n/** @protected **/\r\nTransport.prototype._getHttpRequestModule = function() {\r\n  return request;\r\n};\r\n\r\n\r\n/**\r\n * Class for JSONP request transport\r\n * @class Transport~JsonpTransport\r\n * @protected\r\n * @extends Transport\r\n * @param {String} jsonpParam - Callback parameter name for JSONP invokation.\r\n */\r\nvar JsonpTransport = Transport.JsonpTransport = function(jsonpParam) {\r\n  this._jsonpParam = jsonpParam;\r\n};\r\n\r\ninherits(JsonpTransport, Transport);\r\n\r\n/** @protected **/\r\nJsonpTransport.prototype._getHttpRequestModule = function() {\r\n  return jsonp.createRequest(this._jsonpParam);\r\n};\r\n\r\nJsonpTransport.supported = jsonp.supported;\r\n\r\n\r\n/**\r\n * Class for Sfdc Canvas request transport\r\n * @class Transport~CanvasTransport\r\n * @protected\r\n * @extends Transport\r\n * @param {Object} signedRequest - Parsed signed request object\r\n */\r\nvar CanvasTransport = Transport.CanvasTransport = function(signedRequest) {\r\n  this._signedRequest = signedRequest;\r\n};\r\n\r\ninherits(CanvasTransport, Transport);\r\n\r\n/** @protected **/\r\nCanvasTransport.prototype._getHttpRequestModule = function() {\r\n  return canvas.createRequest(this._signedRequest);\r\n};\r\n\r\nCanvasTransport.supported = canvas.supported;\r\n\r\n\r\n/**\r\n * Class for HTTP request transport using AJAX proxy service\r\n *\r\n * @class Transport~ProxyTransport\r\n * @protected\r\n * @extends Transport\r\n * @param {String} proxyUrl - AJAX Proxy server URL\r\n */\r\nvar ProxyTransport = Transport.ProxyTransport = function(proxyUrl) {\r\n  this._proxyUrl = proxyUrl;\r\n};\r\n\r\ninherits(ProxyTransport, Transport);\r\n\r\n/**\r\n * Make HTTP request via AJAX proxy\r\n *\r\n * @method Transport~ProxyTransport#httpRequest\r\n * @param {Object} params - HTTP request\r\n * @param {Callback.<Object>} [callback] - Calback Function\r\n * @returns {Promise.<Object>}\r\n */\r\nProxyTransport.prototype.httpRequest = function(params, callback) {\r\n  var url = params.url;\r\n  if (url.indexOf(\"/\") === 0) {\r\n    url = baseUrl + url;\r\n  }\r\n  var proxyParams = {\r\n    method: params.method,\r\n    url: this._proxyUrl + '?' + Date.now() + \".\" + (\"\" + Math.random()).substring(2),\r\n    headers: {\r\n      'salesforceproxy-endpoint': url\r\n    }\r\n  };\r\n  if (params.body || params.body === \"\") {\r\n    proxyParams.body = params.body;\r\n  }\r\n  if (params.headers) {\r\n    for (var name in params.headers) {\r\n      proxyParams.headers[name] = params.headers[name];\r\n    }\r\n  }\r\n  return ProxyTransport.super_.prototype.httpRequest.call(this, proxyParams, callback);\r\n};\r\n\r\n\r\n/**\r\n * Class for HTTP request transport using a proxy server\r\n *\r\n * @class Transport~HttpProxyTransport\r\n * @protected\r\n * @extends Transport\r\n * @param {String} httpProxy - URL of the HTTP proxy server\r\n */\r\nvar HttpProxyTransport = Transport.HttpProxyTransport = function(httpProxy) {\r\n  this._httpProxy = httpProxy;\r\n};\r\n\r\ninherits(HttpProxyTransport, Transport);\r\n\r\n/**\r\n * Make HTTP request via proxy server\r\n *\r\n * @method Transport~HttpProxyTransport#httpRequest\r\n * @param {Object} params - HTTP request\r\n * @param {Callback.<Object>} [callback] - Callback Function\r\n * @returns {Promise.<Object>}\r\n */\r\nHttpProxyTransport.prototype.httpRequest = function(params, callback) {\r\n  var url = params.url;\r\n  if (url.indexOf(\"/\") === 0) {\r\n    url = baseUrl + url;\r\n  }\r\n  var proxyParams = {\r\n    method: params.method,\r\n    url: params.url,\r\n    proxy: this._httpProxy,\r\n    headers: {}\r\n  };\r\n  if (params.body || params.body === \"\") {\r\n    proxyParams.body = params.body;\r\n  }\r\n  if (params.headers) {\r\n    for (var name in params.headers) {\r\n      proxyParams.headers[name] = params.headers[name];\r\n    }\r\n  }\r\n  return HttpProxyTransport.super_.prototype.httpRequest.call(this, proxyParams, callback);\r\n};\r\n\r\n}).call(this,require('_process'))\r\n\r\n},{\"./browser/canvas\":14,\"./browser/jsonp\":16,\"./promise\":27,\"_process\":91,\"inherits\":84,\"request\":17}],37:[function(require,module,exports){\r\n\"use strict\";\r\n\r\n// rawAsap provides everything we need except exception management.\r\nvar rawAsap = require(\"./raw\");\r\n// RawTasks are recycled to reduce GC churn.\r\nvar freeTasks = [];\r\n// We queue errors to ensure they are thrown in right order (FIFO).\r\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\r\nvar pendingErrors = [];\r\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\r\n\r\nfunction throwFirstError() {\r\n    if (pendingErrors.length) {\r\n        throw pendingErrors.shift();\r\n    }\r\n}\r\n\r\n/**\r\n * Calls a task as soon as possible after returning, in its own event, with priority\r\n * over other events like animation, reflow, and repaint. An error thrown from an\r\n * event will not interrupt, nor even substantially slow down the processing of\r\n * other events, but will be rather postponed to a lower priority event.\r\n * @param {{call}} task A callable object, typically a function that takes no\r\n * arguments.\r\n */\r\nmodule.exports = asap;\r\nfunction asap(task) {\r\n    var rawTask;\r\n    if (freeTasks.length) {\r\n        rawTask = freeTasks.pop();\r\n    } else {\r\n        rawTask = new RawTask();\r\n    }\r\n    rawTask.task = task;\r\n    rawAsap(rawTask);\r\n}\r\n\r\n// We wrap tasks with recyclable task objects.  A task object implements\r\n// `call`, just like a function.\r\nfunction RawTask() {\r\n    this.task = null;\r\n}\r\n\r\n// The sole purpose of wrapping the task is to catch the exception and recycle\r\n// the task object after its single use.\r\nRawTask.prototype.call = function () {\r\n    try {\r\n        this.task.call();\r\n    } catch (error) {\r\n        if (asap.onerror) {\r\n            // This hook exists purely for testing purposes.\r\n            // Its name will be periodically randomized to break any code that\r\n            // depends on its existence.\r\n            asap.onerror(error);\r\n        } else {\r\n            // In a web browser, exceptions are not fatal. However, to avoid\r\n            // slowing down the queue of pending tasks, we rethrow the error in a\r\n            // lower priority turn.\r\n            pendingErrors.push(error);\r\n            requestErrorThrow();\r\n        }\r\n    } finally {\r\n        this.task = null;\r\n        freeTasks[freeTasks.length] = this;\r\n    }\r\n};\r\n\r\n},{\"./raw\":38}],38:[function(require,module,exports){\r\n(function (global){\r\n\"use strict\";\r\n\r\n// Use the fastest means possible to execute a task in its own turn, with\r\n// priority over other events including IO, animation, reflow, and redraw\r\n// events in browsers.\r\n//\r\n// An exception thrown by a task will permanently interrupt the processing of\r\n// subsequent tasks. The higher level `asap` function ensures that if an\r\n// exception is thrown by a task, that the task queue will continue flushing as\r\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\r\n// either ensure that no exceptions are thrown from your task, or to manually\r\n// call `rawAsap.requestFlush` if an exception is thrown.\r\nmodule.exports = rawAsap;\r\nfunction rawAsap(task) {\r\n    if (!queue.length) {\r\n        requestFlush();\r\n        flushing = true;\r\n    }\r\n    // Equivalent to push, but avoids a function call.\r\n    queue[queue.length] = task;\r\n}\r\n\r\nvar queue = [];\r\n// Once a flush has been requested, no further calls to `requestFlush` are\r\n// necessary until the next `flush` completes.\r\nvar flushing = false;\r\n// `requestFlush` is an implementation-specific method that attempts to kick\r\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\r\n// the event queue before yielding to the browser's own event loop.\r\nvar requestFlush;\r\n// The position of the next task to execute in the task queue. This is\r\n// preserved between calls to `flush` so that it can be resumed if\r\n// a task throws an exception.\r\nvar index = 0;\r\n// If a task schedules additional tasks recursively, the task queue can grow\r\n// unbounded. To prevent memory exhaustion, the task queue will periodically\r\n// truncate already-completed tasks.\r\nvar capacity = 1024;\r\n\r\n// The flush function processes all tasks that have been scheduled with\r\n// `rawAsap` unless and until one of those tasks throws an exception.\r\n// If a task throws an exception, `flush` ensures that its state will remain\r\n// consistent and will resume where it left off when called again.\r\n// However, `flush` does not make any arrangements to be called again if an\r\n// exception is thrown.\r\nfunction flush() {\r\n    while (index < queue.length) {\r\n        var currentIndex = index;\r\n        // Advance the index before calling the task. This ensures that we will\r\n        // begin flushing on the next task the task throws an error.\r\n        index = index + 1;\r\n        queue[currentIndex].call();\r\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\r\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\r\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\r\n        // shift tasks off the queue after they have been executed.\r\n        // Instead, we periodically shift 1024 tasks off the queue.\r\n        if (index > capacity) {\r\n            // Manually shift all values starting at the index back to the\r\n            // beginning of the queue.\r\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\r\n                queue[scan] = queue[scan + index];\r\n            }\r\n            queue.length -= index;\r\n            index = 0;\r\n        }\r\n    }\r\n    queue.length = 0;\r\n    index = 0;\r\n    flushing = false;\r\n}\r\n\r\n// `requestFlush` is implemented using a strategy based on data collected from\r\n// every available SauceLabs Selenium web driver worker at time of writing.\r\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\r\n\r\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\r\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\r\n// Must use `global` or `self` instead of `window` to work in both frames and web\r\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\r\n\r\n/* globals self */\r\nvar scope = typeof global !== \"undefined\" ? global : self;\r\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\r\n\r\n// MutationObservers are desirable because they have high priority and work\r\n// reliably everywhere they are implemented.\r\n// They are implemented in all modern browsers.\r\n//\r\n// - Android 4-4.3\r\n// - Chrome 26-34\r\n// - Firefox 14-29\r\n// - Internet Explorer 11\r\n// - iPad Safari 6-7.1\r\n// - iPhone Safari 7-7.1\r\n// - Safari 6-7\r\nif (typeof BrowserMutationObserver === \"function\") {\r\n    requestFlush = makeRequestCallFromMutationObserver(flush);\r\n\r\n// MessageChannels are desirable because they give direct access to the HTML\r\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\r\n// 11-12, and in web workers in many engines.\r\n// Although message channels yield to any queued rendering and IO tasks, they\r\n// would be better than imposing the 4ms delay of timers.\r\n// However, they do not work reliably in Internet Explorer or Safari.\r\n\r\n// Internet Explorer 10 is the only browser that has setImmediate but does\r\n// not have MutationObservers.\r\n// Although setImmediate yields to the browser's renderer, it would be\r\n// preferrable to falling back to setTimeout since it does not have\r\n// the minimum 4ms penalty.\r\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\r\n// Desktop to a lesser extent) that renders both setImmediate and\r\n// MessageChannel useless for the purposes of ASAP.\r\n// https://github.com/kriskowal/q/issues/396\r\n\r\n// Timers are implemented universally.\r\n// We fall back to timers in workers in most engines, and in foreground\r\n// contexts in the following browsers.\r\n// However, note that even this simple case requires nuances to operate in a\r\n// broad spectrum of browsers.\r\n//\r\n// - Firefox 3-13\r\n// - Internet Explorer 6-9\r\n// - iPad Safari 4.3\r\n// - Lynx 2.8.7\r\n} else {\r\n    requestFlush = makeRequestCallFromTimer(flush);\r\n}\r\n\r\n// `requestFlush` requests that the high priority event queue be flushed as\r\n// soon as possible.\r\n// This is useful to prevent an error thrown in a task from stalling the event\r\n// queue if the exception handled by Node.js’s\r\n// `process.on(\"uncaughtException\")` or by a domain.\r\nrawAsap.requestFlush = requestFlush;\r\n\r\n// To request a high priority event, we induce a mutation observer by toggling\r\n// the text of a text node between \"1\" and \"-1\".\r\nfunction makeRequestCallFromMutationObserver(callback) {\r\n    var toggle = 1;\r\n    var observer = new BrowserMutationObserver(callback);\r\n    var node = document.createTextNode(\"\");\r\n    observer.observe(node, {characterData: true});\r\n    return function requestCall() {\r\n        toggle = -toggle;\r\n        node.data = toggle;\r\n    };\r\n}\r\n\r\n// The message channel technique was discovered by Malte Ubl and was the\r\n// original foundation for this library.\r\n// http://www.nonblocking.io/2011/06/windownexttick.html\r\n\r\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\r\n// page's first load. Thankfully, this version of Safari supports\r\n// MutationObservers, so we don't need to fall back in that case.\r\n\r\n// function makeRequestCallFromMessageChannel(callback) {\r\n//     var channel = new MessageChannel();\r\n//     channel.port1.onmessage = callback;\r\n//     return function requestCall() {\r\n//         channel.port2.postMessage(0);\r\n//     };\r\n// }\r\n\r\n// For reasons explained above, we are also unable to use `setImmediate`\r\n// under any circumstances.\r\n// Even if we were, there is another bug in Internet Explorer 10.\r\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\r\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\r\n// closure.\r\n// Never forget.\r\n\r\n// function makeRequestCallFromSetImmediate(callback) {\r\n//     return function requestCall() {\r\n//         setImmediate(callback);\r\n//     };\r\n// }\r\n\r\n// Safari 6.0 has a problem where timers will get lost while the user is\r\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\r\n// mutation observers, so that implementation is used instead.\r\n// However, if we ever elect to use timers in Safari, the prevalent work-around\r\n// is to add a scroll event listener that calls for a flush.\r\n\r\n// `setTimeout` does not call the passed callback if the delay is less than\r\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\r\n// even then.\r\n\r\nfunction makeRequestCallFromTimer(callback) {\r\n    return function requestCall() {\r\n        // We dispatch a timeout with a specified delay of 0 for engines that\r\n        // can reliably accommodate that request. This will usually be snapped\r\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\r\n        // between events.\r\n        var timeoutHandle = setTimeout(handleTimer, 0);\r\n        // However, since this timer gets frequently dropped in Firefox\r\n        // workers, we enlist an interval handle that will try to fire\r\n        // an event 20 times per second until it succeeds.\r\n        var intervalHandle = setInterval(handleTimer, 50);\r\n\r\n        function handleTimer() {\r\n            // Whichever timer succeeds will cancel both timers and\r\n            // execute the callback.\r\n            clearTimeout(timeoutHandle);\r\n            clearInterval(intervalHandle);\r\n            callback();\r\n        }\r\n    };\r\n}\r\n\r\n// This is for `asap.js` only.\r\n// Its name will be periodically randomized to break any code that depends on\r\n// its existence.\r\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\r\n\r\n// ASAP was originally a nextTick shim included in Q. This was factored out\r\n// into this ASAP package. It was later adapted to RSVP which made further\r\n// amendments. These decisions, particularly to marginalize MessageChannel and\r\n// to capture the MutationObserver implementation in a closure, were integrated\r\n// back into ASAP proper.\r\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{}],39:[function(require,module,exports){\r\n'use strict'\r\n\r\nexports.byteLength = byteLength\r\nexports.toByteArray = toByteArray\r\nexports.fromByteArray = fromByteArray\r\n\r\nvar lookup = []\r\nvar revLookup = []\r\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\r\n\r\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\r\nfor (var i = 0, len = code.length; i < len; ++i) {\r\n  lookup[i] = code[i]\r\n  revLookup[code.charCodeAt(i)] = i\r\n}\r\n\r\n// Support decoding URL-safe base64 strings, as Node.js does.\r\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\r\nrevLookup['-'.charCodeAt(0)] = 62\r\nrevLookup['_'.charCodeAt(0)] = 63\r\n\r\nfunction getLens (b64) {\r\n  var len = b64.length\r\n\r\n  if (len % 4 > 0) {\r\n    throw new Error('Invalid string. Length must be a multiple of 4')\r\n  }\r\n\r\n  // Trim off extra bytes after placeholder bytes are found\r\n  // See: https://github.com/beatgammit/base64-js/issues/42\r\n  var validLen = b64.indexOf('=')\r\n  if (validLen === -1) validLen = len\r\n\r\n  var placeHoldersLen = validLen === len\r\n    ? 0\r\n    : 4 - (validLen % 4)\r\n\r\n  return [validLen, placeHoldersLen]\r\n}\r\n\r\n// base64 is 4/3 + up to two characters of the original data\r\nfunction byteLength (b64) {\r\n  var lens = getLens(b64)\r\n  var validLen = lens[0]\r\n  var placeHoldersLen = lens[1]\r\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\r\n}\r\n\r\nfunction _byteLength (b64, validLen, placeHoldersLen) {\r\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\r\n}\r\n\r\nfunction toByteArray (b64) {\r\n  var tmp\r\n  var lens = getLens(b64)\r\n  var validLen = lens[0]\r\n  var placeHoldersLen = lens[1]\r\n\r\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\r\n\r\n  var curByte = 0\r\n\r\n  // if there are placeholders, only get up to the last complete 4 chars\r\n  var len = placeHoldersLen > 0\r\n    ? validLen - 4\r\n    : validLen\r\n\r\n  for (var i = 0; i < len; i += 4) {\r\n    tmp =\r\n      (revLookup[b64.charCodeAt(i)] << 18) |\r\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\r\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\r\n      revLookup[b64.charCodeAt(i + 3)]\r\n    arr[curByte++] = (tmp >> 16) & 0xFF\r\n    arr[curByte++] = (tmp >> 8) & 0xFF\r\n    arr[curByte++] = tmp & 0xFF\r\n  }\r\n\r\n  if (placeHoldersLen === 2) {\r\n    tmp =\r\n      (revLookup[b64.charCodeAt(i)] << 2) |\r\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\r\n    arr[curByte++] = tmp & 0xFF\r\n  }\r\n\r\n  if (placeHoldersLen === 1) {\r\n    tmp =\r\n      (revLookup[b64.charCodeAt(i)] << 10) |\r\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\r\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\r\n    arr[curByte++] = (tmp >> 8) & 0xFF\r\n    arr[curByte++] = tmp & 0xFF\r\n  }\r\n\r\n  return arr\r\n}\r\n\r\nfunction tripletToBase64 (num) {\r\n  return lookup[num >> 18 & 0x3F] +\r\n    lookup[num >> 12 & 0x3F] +\r\n    lookup[num >> 6 & 0x3F] +\r\n    lookup[num & 0x3F]\r\n}\r\n\r\nfunction encodeChunk (uint8, start, end) {\r\n  var tmp\r\n  var output = []\r\n  for (var i = start; i < end; i += 3) {\r\n    tmp =\r\n      ((uint8[i] << 16) & 0xFF0000) +\r\n      ((uint8[i + 1] << 8) & 0xFF00) +\r\n      (uint8[i + 2] & 0xFF)\r\n    output.push(tripletToBase64(tmp))\r\n  }\r\n  return output.join('')\r\n}\r\n\r\nfunction fromByteArray (uint8) {\r\n  var tmp\r\n  var len = uint8.length\r\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\r\n  var parts = []\r\n  var maxChunkLength = 16383 // must be multiple of 3\r\n\r\n  // go through the array every three bytes, we'll deal with trailing stuff later\r\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\r\n    parts.push(encodeChunk(\r\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\r\n    ))\r\n  }\r\n\r\n  // pad the end with zeros, but make sure to not forget the extra bytes\r\n  if (extraBytes === 1) {\r\n    tmp = uint8[len - 1]\r\n    parts.push(\r\n      lookup[tmp >> 2] +\r\n      lookup[(tmp << 4) & 0x3F] +\r\n      '=='\r\n    )\r\n  } else if (extraBytes === 2) {\r\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\r\n    parts.push(\r\n      lookup[tmp >> 10] +\r\n      lookup[(tmp >> 4) & 0x3F] +\r\n      lookup[(tmp << 2) & 0x3F] +\r\n      '='\r\n    )\r\n  }\r\n\r\n  return parts.join('')\r\n}\r\n\r\n},{}],40:[function(require,module,exports){\r\n\r\n},{}],41:[function(require,module,exports){\r\n/*!\r\n * The buffer module from node.js, for the browser.\r\n *\r\n * @author   Feross Aboukhadijeh <https://feross.org>\r\n * @license  MIT\r\n */\r\n/* eslint-disable no-proto */\r\n\r\n'use strict'\r\n\r\nvar base64 = require('base64-js')\r\nvar ieee754 = require('ieee754')\r\n\r\nexports.Buffer = Buffer\r\nexports.SlowBuffer = SlowBuffer\r\nexports.INSPECT_MAX_BYTES = 50\r\n\r\nvar K_MAX_LENGTH = 0x7fffffff\r\nexports.kMaxLength = K_MAX_LENGTH\r\n\r\n/**\r\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\r\n *   === true    Use Uint8Array implementation (fastest)\r\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\r\n *               implementation (most compatible, even IE6)\r\n *\r\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\r\n * Opera 11.6+, iOS 4.2+.\r\n *\r\n * We report that the browser does not support typed arrays if the are not subclassable\r\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\r\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\r\n * for __proto__ and has a buggy typed array implementation.\r\n */\r\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\r\n\r\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\r\n    typeof console.error === 'function') {\r\n  console.error(\r\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\r\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\r\n  )\r\n}\r\n\r\nfunction typedArraySupport () {\r\n  // Can typed array instances can be augmented?\r\n  try {\r\n    var arr = new Uint8Array(1)\r\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\r\n    return arr.foo() === 42\r\n  } catch (e) {\r\n    return false\r\n  }\r\n}\r\n\r\nObject.defineProperty(Buffer.prototype, 'parent', {\r\n  get: function () {\r\n    if (!(this instanceof Buffer)) {\r\n      return undefined\r\n    }\r\n    return this.buffer\r\n  }\r\n})\r\n\r\nObject.defineProperty(Buffer.prototype, 'offset', {\r\n  get: function () {\r\n    if (!(this instanceof Buffer)) {\r\n      return undefined\r\n    }\r\n    return this.byteOffset\r\n  }\r\n})\r\n\r\nfunction createBuffer (length) {\r\n  if (length > K_MAX_LENGTH) {\r\n    throw new RangeError('Invalid typed array length')\r\n  }\r\n  // Return an augmented `Uint8Array` instance\r\n  var buf = new Uint8Array(length)\r\n  buf.__proto__ = Buffer.prototype\r\n  return buf\r\n}\r\n\r\n/**\r\n * The Buffer constructor returns instances of `Uint8Array` that have their\r\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\r\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\r\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\r\n * returns a single octet.\r\n *\r\n * The `Uint8Array` prototype remains unmodified.\r\n */\r\n\r\nfunction Buffer (arg, encodingOrOffset, length) {\r\n  // Common case.\r\n  if (typeof arg === 'number') {\r\n    if (typeof encodingOrOffset === 'string') {\r\n      throw new Error(\r\n        'If encoding is specified then the first argument must be a string'\r\n      )\r\n    }\r\n    return allocUnsafe(arg)\r\n  }\r\n  return from(arg, encodingOrOffset, length)\r\n}\r\n\r\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\r\nif (typeof Symbol !== 'undefined' && Symbol.species &&\r\n    Buffer[Symbol.species] === Buffer) {\r\n  Object.defineProperty(Buffer, Symbol.species, {\r\n    value: null,\r\n    configurable: true,\r\n    enumerable: false,\r\n    writable: false\r\n  })\r\n}\r\n\r\nBuffer.poolSize = 8192 // not used by this implementation\r\n\r\nfunction from (value, encodingOrOffset, length) {\r\n  if (typeof value === 'number') {\r\n    throw new TypeError('\"value\" argument must not be a number')\r\n  }\r\n\r\n  if (isArrayBuffer(value) || (value && isArrayBuffer(value.buffer))) {\r\n    return fromArrayBuffer(value, encodingOrOffset, length)\r\n  }\r\n\r\n  if (typeof value === 'string') {\r\n    return fromString(value, encodingOrOffset)\r\n  }\r\n\r\n  return fromObject(value)\r\n}\r\n\r\n/**\r\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\r\n * if value is a number.\r\n * Buffer.from(str[, encoding])\r\n * Buffer.from(array)\r\n * Buffer.from(buffer)\r\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\r\n **/\r\nBuffer.from = function (value, encodingOrOffset, length) {\r\n  return from(value, encodingOrOffset, length)\r\n}\r\n\r\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\r\n// https://github.com/feross/buffer/pull/148\r\nBuffer.prototype.__proto__ = Uint8Array.prototype\r\nBuffer.__proto__ = Uint8Array\r\n\r\nfunction assertSize (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('\"size\" argument must be of type number')\r\n  } else if (size < 0) {\r\n    throw new RangeError('\"size\" argument must not be negative')\r\n  }\r\n}\r\n\r\nfunction alloc (size, fill, encoding) {\r\n  assertSize(size)\r\n  if (size <= 0) {\r\n    return createBuffer(size)\r\n  }\r\n  if (fill !== undefined) {\r\n    // Only pay attention to encoding if it's a string. This\r\n    // prevents accidentally sending in a number that would\r\n    // be interpretted as a start offset.\r\n    return typeof encoding === 'string'\r\n      ? createBuffer(size).fill(fill, encoding)\r\n      : createBuffer(size).fill(fill)\r\n  }\r\n  return createBuffer(size)\r\n}\r\n\r\n/**\r\n * Creates a new filled Buffer instance.\r\n * alloc(size[, fill[, encoding]])\r\n **/\r\nBuffer.alloc = function (size, fill, encoding) {\r\n  return alloc(size, fill, encoding)\r\n}\r\n\r\nfunction allocUnsafe (size) {\r\n  assertSize(size)\r\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\r\n}\r\n\r\n/**\r\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\r\n * */\r\nBuffer.allocUnsafe = function (size) {\r\n  return allocUnsafe(size)\r\n}\r\n/**\r\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\r\n */\r\nBuffer.allocUnsafeSlow = function (size) {\r\n  return allocUnsafe(size)\r\n}\r\n\r\nfunction fromString (string, encoding) {\r\n  if (typeof encoding !== 'string' || encoding === '') {\r\n    encoding = 'utf8'\r\n  }\r\n\r\n  if (!Buffer.isEncoding(encoding)) {\r\n    throw new TypeError('Unknown encoding: ' + encoding)\r\n  }\r\n\r\n  var length = byteLength(string, encoding) | 0\r\n  var buf = createBuffer(length)\r\n\r\n  var actual = buf.write(string, encoding)\r\n\r\n  if (actual !== length) {\r\n    // Writing a hex string, for example, that contains invalid characters will\r\n    // cause everything after the first invalid character to be ignored. (e.g.\r\n    // 'abxxcd' will be treated as 'ab')\r\n    buf = buf.slice(0, actual)\r\n  }\r\n\r\n  return buf\r\n}\r\n\r\nfunction fromArrayLike (array) {\r\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\r\n  var buf = createBuffer(length)\r\n  for (var i = 0; i < length; i += 1) {\r\n    buf[i] = array[i] & 255\r\n  }\r\n  return buf\r\n}\r\n\r\nfunction fromArrayBuffer (array, byteOffset, length) {\r\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\r\n    throw new RangeError('\"offset\" is outside of buffer bounds')\r\n  }\r\n\r\n  if (array.byteLength < byteOffset + (length || 0)) {\r\n    throw new RangeError('\"length\" is outside of buffer bounds')\r\n  }\r\n\r\n  var buf\r\n  if (byteOffset === undefined && length === undefined) {\r\n    buf = new Uint8Array(array)\r\n  } else if (length === undefined) {\r\n    buf = new Uint8Array(array, byteOffset)\r\n  } else {\r\n    buf = new Uint8Array(array, byteOffset, length)\r\n  }\r\n\r\n  // Return an augmented `Uint8Array` instance\r\n  buf.__proto__ = Buffer.prototype\r\n  return buf\r\n}\r\n\r\nfunction fromObject (obj) {\r\n  if (Buffer.isBuffer(obj)) {\r\n    var len = checked(obj.length) | 0\r\n    var buf = createBuffer(len)\r\n\r\n    if (buf.length === 0) {\r\n      return buf\r\n    }\r\n\r\n    obj.copy(buf, 0, 0, len)\r\n    return buf\r\n  }\r\n\r\n  if (obj) {\r\n    if (ArrayBuffer.isView(obj) || 'length' in obj) {\r\n      if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\r\n        return createBuffer(0)\r\n      }\r\n      return fromArrayLike(obj)\r\n    }\r\n\r\n    if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\r\n      return fromArrayLike(obj.data)\r\n    }\r\n  }\r\n\r\n  throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.')\r\n}\r\n\r\nfunction checked (length) {\r\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\r\n  // length is NaN (which is otherwise coerced to zero.)\r\n  if (length >= K_MAX_LENGTH) {\r\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\r\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\r\n  }\r\n  return length | 0\r\n}\r\n\r\nfunction SlowBuffer (length) {\r\n  if (+length != length) { // eslint-disable-line eqeqeq\r\n    length = 0\r\n  }\r\n  return Buffer.alloc(+length)\r\n}\r\n\r\nBuffer.isBuffer = function isBuffer (b) {\r\n  return b != null && b._isBuffer === true\r\n}\r\n\r\nBuffer.compare = function compare (a, b) {\r\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\r\n    throw new TypeError('Arguments must be Buffers')\r\n  }\r\n\r\n  if (a === b) return 0\r\n\r\n  var x = a.length\r\n  var y = b.length\r\n\r\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\r\n    if (a[i] !== b[i]) {\r\n      x = a[i]\r\n      y = b[i]\r\n      break\r\n    }\r\n  }\r\n\r\n  if (x < y) return -1\r\n  if (y < x) return 1\r\n  return 0\r\n}\r\n\r\nBuffer.isEncoding = function isEncoding (encoding) {\r\n  switch (String(encoding).toLowerCase()) {\r\n    case 'hex':\r\n    case 'utf8':\r\n    case 'utf-8':\r\n    case 'ascii':\r\n    case 'latin1':\r\n    case 'binary':\r\n    case 'base64':\r\n    case 'ucs2':\r\n    case 'ucs-2':\r\n    case 'utf16le':\r\n    case 'utf-16le':\r\n      return true\r\n    default:\r\n      return false\r\n  }\r\n}\r\n\r\nBuffer.concat = function concat (list, length) {\r\n  if (!Array.isArray(list)) {\r\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\r\n  }\r\n\r\n  if (list.length === 0) {\r\n    return Buffer.alloc(0)\r\n  }\r\n\r\n  var i\r\n  if (length === undefined) {\r\n    length = 0\r\n    for (i = 0; i < list.length; ++i) {\r\n      length += list[i].length\r\n    }\r\n  }\r\n\r\n  var buffer = Buffer.allocUnsafe(length)\r\n  var pos = 0\r\n  for (i = 0; i < list.length; ++i) {\r\n    var buf = list[i]\r\n    if (ArrayBuffer.isView(buf)) {\r\n      buf = Buffer.from(buf)\r\n    }\r\n    if (!Buffer.isBuffer(buf)) {\r\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\r\n    }\r\n    buf.copy(buffer, pos)\r\n    pos += buf.length\r\n  }\r\n  return buffer\r\n}\r\n\r\nfunction byteLength (string, encoding) {\r\n  if (Buffer.isBuffer(string)) {\r\n    return string.length\r\n  }\r\n  if (ArrayBuffer.isView(string) || isArrayBuffer(string)) {\r\n    return string.byteLength\r\n  }\r\n  if (typeof string !== 'string') {\r\n    string = '' + string\r\n  }\r\n\r\n  var len = string.length\r\n  if (len === 0) return 0\r\n\r\n  // Use a for loop to avoid recursion\r\n  var loweredCase = false\r\n  for (;;) {\r\n    switch (encoding) {\r\n      case 'ascii':\r\n      case 'latin1':\r\n      case 'binary':\r\n        return len\r\n      case 'utf8':\r\n      case 'utf-8':\r\n      case undefined:\r\n        return utf8ToBytes(string).length\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return len * 2\r\n      case 'hex':\r\n        return len >>> 1\r\n      case 'base64':\r\n        return base64ToBytes(string).length\r\n      default:\r\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\r\n        encoding = ('' + encoding).toLowerCase()\r\n        loweredCase = true\r\n    }\r\n  }\r\n}\r\nBuffer.byteLength = byteLength\r\n\r\nfunction slowToString (encoding, start, end) {\r\n  var loweredCase = false\r\n\r\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\r\n  // property of a typed array.\r\n\r\n  // This behaves neither like String nor Uint8Array in that we set start/end\r\n  // to their upper/lower bounds if the value passed is out of range.\r\n  // undefined is handled specially as per ECMA-262 6th Edition,\r\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\r\n  if (start === undefined || start < 0) {\r\n    start = 0\r\n  }\r\n  // Return early if start > this.length. Done here to prevent potential uint32\r\n  // coercion fail below.\r\n  if (start > this.length) {\r\n    return ''\r\n  }\r\n\r\n  if (end === undefined || end > this.length) {\r\n    end = this.length\r\n  }\r\n\r\n  if (end <= 0) {\r\n    return ''\r\n  }\r\n\r\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\r\n  end >>>= 0\r\n  start >>>= 0\r\n\r\n  if (end <= start) {\r\n    return ''\r\n  }\r\n\r\n  if (!encoding) encoding = 'utf8'\r\n\r\n  while (true) {\r\n    switch (encoding) {\r\n      case 'hex':\r\n        return hexSlice(this, start, end)\r\n\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return utf8Slice(this, start, end)\r\n\r\n      case 'ascii':\r\n        return asciiSlice(this, start, end)\r\n\r\n      case 'latin1':\r\n      case 'binary':\r\n        return latin1Slice(this, start, end)\r\n\r\n      case 'base64':\r\n        return base64Slice(this, start, end)\r\n\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return utf16leSlice(this, start, end)\r\n\r\n      default:\r\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\r\n        encoding = (encoding + '').toLowerCase()\r\n        loweredCase = true\r\n    }\r\n  }\r\n}\r\n\r\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\r\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\r\n// reliably in a browserify context because there could be multiple different\r\n// copies of the 'buffer' package in use. This method works even for Buffer\r\n// instances that were created from another copy of the `buffer` package.\r\n// See: https://github.com/feross/buffer/issues/154\r\nBuffer.prototype._isBuffer = true\r\n\r\nfunction swap (b, n, m) {\r\n  var i = b[n]\r\n  b[n] = b[m]\r\n  b[m] = i\r\n}\r\n\r\nBuffer.prototype.swap16 = function swap16 () {\r\n  var len = this.length\r\n  if (len % 2 !== 0) {\r\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\r\n  }\r\n  for (var i = 0; i < len; i += 2) {\r\n    swap(this, i, i + 1)\r\n  }\r\n  return this\r\n}\r\n\r\nBuffer.prototype.swap32 = function swap32 () {\r\n  var len = this.length\r\n  if (len % 4 !== 0) {\r\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\r\n  }\r\n  for (var i = 0; i < len; i += 4) {\r\n    swap(this, i, i + 3)\r\n    swap(this, i + 1, i + 2)\r\n  }\r\n  return this\r\n}\r\n\r\nBuffer.prototype.swap64 = function swap64 () {\r\n  var len = this.length\r\n  if (len % 8 !== 0) {\r\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\r\n  }\r\n  for (var i = 0; i < len; i += 8) {\r\n    swap(this, i, i + 7)\r\n    swap(this, i + 1, i + 6)\r\n    swap(this, i + 2, i + 5)\r\n    swap(this, i + 3, i + 4)\r\n  }\r\n  return this\r\n}\r\n\r\nBuffer.prototype.toString = function toString () {\r\n  var length = this.length\r\n  if (length === 0) return ''\r\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\r\n  return slowToString.apply(this, arguments)\r\n}\r\n\r\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\r\n\r\nBuffer.prototype.equals = function equals (b) {\r\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\r\n  if (this === b) return true\r\n  return Buffer.compare(this, b) === 0\r\n}\r\n\r\nBuffer.prototype.inspect = function inspect () {\r\n  var str = ''\r\n  var max = exports.INSPECT_MAX_BYTES\r\n  if (this.length > 0) {\r\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\r\n    if (this.length > max) str += ' ... '\r\n  }\r\n  return '<Buffer ' + str + '>'\r\n}\r\n\r\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\r\n  if (!Buffer.isBuffer(target)) {\r\n    throw new TypeError('Argument must be a Buffer')\r\n  }\r\n\r\n  if (start === undefined) {\r\n    start = 0\r\n  }\r\n  if (end === undefined) {\r\n    end = target ? target.length : 0\r\n  }\r\n  if (thisStart === undefined) {\r\n    thisStart = 0\r\n  }\r\n  if (thisEnd === undefined) {\r\n    thisEnd = this.length\r\n  }\r\n\r\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\r\n    throw new RangeError('out of range index')\r\n  }\r\n\r\n  if (thisStart >= thisEnd && start >= end) {\r\n    return 0\r\n  }\r\n  if (thisStart >= thisEnd) {\r\n    return -1\r\n  }\r\n  if (start >= end) {\r\n    return 1\r\n  }\r\n\r\n  start >>>= 0\r\n  end >>>= 0\r\n  thisStart >>>= 0\r\n  thisEnd >>>= 0\r\n\r\n  if (this === target) return 0\r\n\r\n  var x = thisEnd - thisStart\r\n  var y = end - start\r\n  var len = Math.min(x, y)\r\n\r\n  var thisCopy = this.slice(thisStart, thisEnd)\r\n  var targetCopy = target.slice(start, end)\r\n\r\n  for (var i = 0; i < len; ++i) {\r\n    if (thisCopy[i] !== targetCopy[i]) {\r\n      x = thisCopy[i]\r\n      y = targetCopy[i]\r\n      break\r\n    }\r\n  }\r\n\r\n  if (x < y) return -1\r\n  if (y < x) return 1\r\n  return 0\r\n}\r\n\r\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\r\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\r\n//\r\n// Arguments:\r\n// - buffer - a Buffer to search\r\n// - val - a string, Buffer, or number\r\n// - byteOffset - an index into `buffer`; will be clamped to an int32\r\n// - encoding - an optional encoding, relevant is val is a string\r\n// - dir - true for indexOf, false for lastIndexOf\r\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\r\n  // Empty buffer means no match\r\n  if (buffer.length === 0) return -1\r\n\r\n  // Normalize byteOffset\r\n  if (typeof byteOffset === 'string') {\r\n    encoding = byteOffset\r\n    byteOffset = 0\r\n  } else if (byteOffset > 0x7fffffff) {\r\n    byteOffset = 0x7fffffff\r\n  } else if (byteOffset < -0x80000000) {\r\n    byteOffset = -0x80000000\r\n  }\r\n  byteOffset = +byteOffset  // Coerce to Number.\r\n  if (numberIsNaN(byteOffset)) {\r\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\r\n    byteOffset = dir ? 0 : (buffer.length - 1)\r\n  }\r\n\r\n  // Normalize byteOffset: negative offsets start from the end of the buffer\r\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\r\n  if (byteOffset >= buffer.length) {\r\n    if (dir) return -1\r\n    else byteOffset = buffer.length - 1\r\n  } else if (byteOffset < 0) {\r\n    if (dir) byteOffset = 0\r\n    else return -1\r\n  }\r\n\r\n  // Normalize val\r\n  if (typeof val === 'string') {\r\n    val = Buffer.from(val, encoding)\r\n  }\r\n\r\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\r\n  if (Buffer.isBuffer(val)) {\r\n    // Special case: looking for empty string/buffer always fails\r\n    if (val.length === 0) {\r\n      return -1\r\n    }\r\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\r\n  } else if (typeof val === 'number') {\r\n    val = val & 0xFF // Search for a byte value [0-255]\r\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\r\n      if (dir) {\r\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\r\n      } else {\r\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\r\n      }\r\n    }\r\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\r\n  }\r\n\r\n  throw new TypeError('val must be string, number or Buffer')\r\n}\r\n\r\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\r\n  var indexSize = 1\r\n  var arrLength = arr.length\r\n  var valLength = val.length\r\n\r\n  if (encoding !== undefined) {\r\n    encoding = String(encoding).toLowerCase()\r\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\r\n        encoding === 'utf16le' || encoding === 'utf-16le') {\r\n      if (arr.length < 2 || val.length < 2) {\r\n        return -1\r\n      }\r\n      indexSize = 2\r\n      arrLength /= 2\r\n      valLength /= 2\r\n      byteOffset /= 2\r\n    }\r\n  }\r\n\r\n  function read (buf, i) {\r\n    if (indexSize === 1) {\r\n      return buf[i]\r\n    } else {\r\n      return buf.readUInt16BE(i * indexSize)\r\n    }\r\n  }\r\n\r\n  var i\r\n  if (dir) {\r\n    var foundIndex = -1\r\n    for (i = byteOffset; i < arrLength; i++) {\r\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\r\n        if (foundIndex === -1) foundIndex = i\r\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\r\n      } else {\r\n        if (foundIndex !== -1) i -= i - foundIndex\r\n        foundIndex = -1\r\n      }\r\n    }\r\n  } else {\r\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\r\n    for (i = byteOffset; i >= 0; i--) {\r\n      var found = true\r\n      for (var j = 0; j < valLength; j++) {\r\n        if (read(arr, i + j) !== read(val, j)) {\r\n          found = false\r\n          break\r\n        }\r\n      }\r\n      if (found) return i\r\n    }\r\n  }\r\n\r\n  return -1\r\n}\r\n\r\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\r\n  return this.indexOf(val, byteOffset, encoding) !== -1\r\n}\r\n\r\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\r\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\r\n}\r\n\r\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\r\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\r\n}\r\n\r\nfunction hexWrite (buf, string, offset, length) {\r\n  offset = Number(offset) || 0\r\n  var remaining = buf.length - offset\r\n  if (!length) {\r\n    length = remaining\r\n  } else {\r\n    length = Number(length)\r\n    if (length > remaining) {\r\n      length = remaining\r\n    }\r\n  }\r\n\r\n  var strLen = string.length\r\n\r\n  if (length > strLen / 2) {\r\n    length = strLen / 2\r\n  }\r\n  for (var i = 0; i < length; ++i) {\r\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\r\n    if (numberIsNaN(parsed)) return i\r\n    buf[offset + i] = parsed\r\n  }\r\n  return i\r\n}\r\n\r\nfunction utf8Write (buf, string, offset, length) {\r\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\r\n}\r\n\r\nfunction asciiWrite (buf, string, offset, length) {\r\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\r\n}\r\n\r\nfunction latin1Write (buf, string, offset, length) {\r\n  return asciiWrite(buf, string, offset, length)\r\n}\r\n\r\nfunction base64Write (buf, string, offset, length) {\r\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\r\n}\r\n\r\nfunction ucs2Write (buf, string, offset, length) {\r\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\r\n}\r\n\r\nBuffer.prototype.write = function write (string, offset, length, encoding) {\r\n  // Buffer#write(string)\r\n  if (offset === undefined) {\r\n    encoding = 'utf8'\r\n    length = this.length\r\n    offset = 0\r\n  // Buffer#write(string, encoding)\r\n  } else if (length === undefined && typeof offset === 'string') {\r\n    encoding = offset\r\n    length = this.length\r\n    offset = 0\r\n  // Buffer#write(string, offset[, length][, encoding])\r\n  } else if (isFinite(offset)) {\r\n    offset = offset >>> 0\r\n    if (isFinite(length)) {\r\n      length = length >>> 0\r\n      if (encoding === undefined) encoding = 'utf8'\r\n    } else {\r\n      encoding = length\r\n      length = undefined\r\n    }\r\n  } else {\r\n    throw new Error(\r\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\r\n    )\r\n  }\r\n\r\n  var remaining = this.length - offset\r\n  if (length === undefined || length > remaining) length = remaining\r\n\r\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\r\n    throw new RangeError('Attempt to write outside buffer bounds')\r\n  }\r\n\r\n  if (!encoding) encoding = 'utf8'\r\n\r\n  var loweredCase = false\r\n  for (;;) {\r\n    switch (encoding) {\r\n      case 'hex':\r\n        return hexWrite(this, string, offset, length)\r\n\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return utf8Write(this, string, offset, length)\r\n\r\n      case 'ascii':\r\n        return asciiWrite(this, string, offset, length)\r\n\r\n      case 'latin1':\r\n      case 'binary':\r\n        return latin1Write(this, string, offset, length)\r\n\r\n      case 'base64':\r\n        // Warning: maxLength not taken into account in base64Write\r\n        return base64Write(this, string, offset, length)\r\n\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return ucs2Write(this, string, offset, length)\r\n\r\n      default:\r\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\r\n        encoding = ('' + encoding).toLowerCase()\r\n        loweredCase = true\r\n    }\r\n  }\r\n}\r\n\r\nBuffer.prototype.toJSON = function toJSON () {\r\n  return {\r\n    type: 'Buffer',\r\n    data: Array.prototype.slice.call(this._arr || this, 0)\r\n  }\r\n}\r\n\r\nfunction base64Slice (buf, start, end) {\r\n  if (start === 0 && end === buf.length) {\r\n    return base64.fromByteArray(buf)\r\n  } else {\r\n    return base64.fromByteArray(buf.slice(start, end))\r\n  }\r\n}\r\n\r\nfunction utf8Slice (buf, start, end) {\r\n  end = Math.min(buf.length, end)\r\n  var res = []\r\n\r\n  var i = start\r\n  while (i < end) {\r\n    var firstByte = buf[i]\r\n    var codePoint = null\r\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\r\n      : (firstByte > 0xDF) ? 3\r\n      : (firstByte > 0xBF) ? 2\r\n      : 1\r\n\r\n    if (i + bytesPerSequence <= end) {\r\n      var secondByte, thirdByte, fourthByte, tempCodePoint\r\n\r\n      switch (bytesPerSequence) {\r\n        case 1:\r\n          if (firstByte < 0x80) {\r\n            codePoint = firstByte\r\n          }\r\n          break\r\n        case 2:\r\n          secondByte = buf[i + 1]\r\n          if ((secondByte & 0xC0) === 0x80) {\r\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\r\n            if (tempCodePoint > 0x7F) {\r\n              codePoint = tempCodePoint\r\n            }\r\n          }\r\n          break\r\n        case 3:\r\n          secondByte = buf[i + 1]\r\n          thirdByte = buf[i + 2]\r\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\r\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\r\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\r\n              codePoint = tempCodePoint\r\n            }\r\n          }\r\n          break\r\n        case 4:\r\n          secondByte = buf[i + 1]\r\n          thirdByte = buf[i + 2]\r\n          fourthByte = buf[i + 3]\r\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\r\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\r\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\r\n              codePoint = tempCodePoint\r\n            }\r\n          }\r\n      }\r\n    }\r\n\r\n    if (codePoint === null) {\r\n      // we did not generate a valid codePoint so insert a\r\n      // replacement char (U+FFFD) and advance only 1 byte\r\n      codePoint = 0xFFFD\r\n      bytesPerSequence = 1\r\n    } else if (codePoint > 0xFFFF) {\r\n      // encode to utf16 (surrogate pair dance)\r\n      codePoint -= 0x10000\r\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\r\n      codePoint = 0xDC00 | codePoint & 0x3FF\r\n    }\r\n\r\n    res.push(codePoint)\r\n    i += bytesPerSequence\r\n  }\r\n\r\n  return decodeCodePointsArray(res)\r\n}\r\n\r\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\r\n// the lowest limit is Chrome, with 0x10000 args.\r\n// We go 1 magnitude less, for safety\r\nvar MAX_ARGUMENTS_LENGTH = 0x1000\r\n\r\nfunction decodeCodePointsArray (codePoints) {\r\n  var len = codePoints.length\r\n  if (len <= MAX_ARGUMENTS_LENGTH) {\r\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\r\n  }\r\n\r\n  // Decode in chunks to avoid \"call stack size exceeded\".\r\n  var res = ''\r\n  var i = 0\r\n  while (i < len) {\r\n    res += String.fromCharCode.apply(\r\n      String,\r\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\r\n    )\r\n  }\r\n  return res\r\n}\r\n\r\nfunction asciiSlice (buf, start, end) {\r\n  var ret = ''\r\n  end = Math.min(buf.length, end)\r\n\r\n  for (var i = start; i < end; ++i) {\r\n    ret += String.fromCharCode(buf[i] & 0x7F)\r\n  }\r\n  return ret\r\n}\r\n\r\nfunction latin1Slice (buf, start, end) {\r\n  var ret = ''\r\n  end = Math.min(buf.length, end)\r\n\r\n  for (var i = start; i < end; ++i) {\r\n    ret += String.fromCharCode(buf[i])\r\n  }\r\n  return ret\r\n}\r\n\r\nfunction hexSlice (buf, start, end) {\r\n  var len = buf.length\r\n\r\n  if (!start || start < 0) start = 0\r\n  if (!end || end < 0 || end > len) end = len\r\n\r\n  var out = ''\r\n  for (var i = start; i < end; ++i) {\r\n    out += toHex(buf[i])\r\n  }\r\n  return out\r\n}\r\n\r\nfunction utf16leSlice (buf, start, end) {\r\n  var bytes = buf.slice(start, end)\r\n  var res = ''\r\n  for (var i = 0; i < bytes.length; i += 2) {\r\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\r\n  }\r\n  return res\r\n}\r\n\r\nBuffer.prototype.slice = function slice (start, end) {\r\n  var len = this.length\r\n  start = ~~start\r\n  end = end === undefined ? len : ~~end\r\n\r\n  if (start < 0) {\r\n    start += len\r\n    if (start < 0) start = 0\r\n  } else if (start > len) {\r\n    start = len\r\n  }\r\n\r\n  if (end < 0) {\r\n    end += len\r\n    if (end < 0) end = 0\r\n  } else if (end > len) {\r\n    end = len\r\n  }\r\n\r\n  if (end < start) end = start\r\n\r\n  var newBuf = this.subarray(start, end)\r\n  // Return an augmented `Uint8Array` instance\r\n  newBuf.__proto__ = Buffer.prototype\r\n  return newBuf\r\n}\r\n\r\n/*\r\n * Need to make sure that buffer isn't trying to write out of bounds.\r\n */\r\nfunction checkOffset (offset, ext, length) {\r\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\r\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\r\n}\r\n\r\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var val = this[offset]\r\n  var mul = 1\r\n  var i = 0\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    val += this[offset + i] * mul\r\n  }\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) {\r\n    checkOffset(offset, byteLength, this.length)\r\n  }\r\n\r\n  var val = this[offset + --byteLength]\r\n  var mul = 1\r\n  while (byteLength > 0 && (mul *= 0x100)) {\r\n    val += this[offset + --byteLength] * mul\r\n  }\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 1, this.length)\r\n  return this[offset]\r\n}\r\n\r\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  return this[offset] | (this[offset + 1] << 8)\r\n}\r\n\r\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  return (this[offset] << 8) | this[offset + 1]\r\n}\r\n\r\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return ((this[offset]) |\r\n      (this[offset + 1] << 8) |\r\n      (this[offset + 2] << 16)) +\r\n      (this[offset + 3] * 0x1000000)\r\n}\r\n\r\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset] * 0x1000000) +\r\n    ((this[offset + 1] << 16) |\r\n    (this[offset + 2] << 8) |\r\n    this[offset + 3])\r\n}\r\n\r\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var val = this[offset]\r\n  var mul = 1\r\n  var i = 0\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    val += this[offset + i] * mul\r\n  }\r\n  mul *= 0x80\r\n\r\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var i = byteLength\r\n  var mul = 1\r\n  var val = this[offset + --i]\r\n  while (i > 0 && (mul *= 0x100)) {\r\n    val += this[offset + --i] * mul\r\n  }\r\n  mul *= 0x80\r\n\r\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 1, this.length)\r\n  if (!(this[offset] & 0x80)) return (this[offset])\r\n  return ((0xff - this[offset] + 1) * -1)\r\n}\r\n\r\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  var val = this[offset] | (this[offset + 1] << 8)\r\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\r\n}\r\n\r\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  var val = this[offset + 1] | (this[offset] << 8)\r\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\r\n}\r\n\r\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset]) |\r\n    (this[offset + 1] << 8) |\r\n    (this[offset + 2] << 16) |\r\n    (this[offset + 3] << 24)\r\n}\r\n\r\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset] << 24) |\r\n    (this[offset + 1] << 16) |\r\n    (this[offset + 2] << 8) |\r\n    (this[offset + 3])\r\n}\r\n\r\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n  return ieee754.read(this, offset, true, 23, 4)\r\n}\r\n\r\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n  return ieee754.read(this, offset, false, 23, 4)\r\n}\r\n\r\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 8, this.length)\r\n  return ieee754.read(this, offset, true, 52, 8)\r\n}\r\n\r\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 8, this.length)\r\n  return ieee754.read(this, offset, false, 52, 8)\r\n}\r\n\r\nfunction checkInt (buf, value, offset, ext, max, min) {\r\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\r\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\r\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\r\n}\r\n\r\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) {\r\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\r\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\r\n  }\r\n\r\n  var mul = 1\r\n  var i = 0\r\n  this[offset] = value & 0xFF\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    this[offset + i] = (value / mul) & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) {\r\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\r\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\r\n  }\r\n\r\n  var i = byteLength - 1\r\n  var mul = 1\r\n  this[offset + i] = value & 0xFF\r\n  while (--i >= 0 && (mul *= 0x100)) {\r\n    this[offset + i] = (value / mul) & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\r\n  this[offset] = (value & 0xff)\r\n  return offset + 1\r\n}\r\n\r\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\r\n  this[offset] = (value & 0xff)\r\n  this[offset + 1] = (value >>> 8)\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\r\n  this[offset] = (value >>> 8)\r\n  this[offset + 1] = (value & 0xff)\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\r\n  this[offset + 3] = (value >>> 24)\r\n  this[offset + 2] = (value >>> 16)\r\n  this[offset + 1] = (value >>> 8)\r\n  this[offset] = (value & 0xff)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\r\n  this[offset] = (value >>> 24)\r\n  this[offset + 1] = (value >>> 16)\r\n  this[offset + 2] = (value >>> 8)\r\n  this[offset + 3] = (value & 0xff)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    var limit = Math.pow(2, (8 * byteLength) - 1)\r\n\r\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\r\n  }\r\n\r\n  var i = 0\r\n  var mul = 1\r\n  var sub = 0\r\n  this[offset] = value & 0xFF\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\r\n      sub = 1\r\n    }\r\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    var limit = Math.pow(2, (8 * byteLength) - 1)\r\n\r\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\r\n  }\r\n\r\n  var i = byteLength - 1\r\n  var mul = 1\r\n  var sub = 0\r\n  this[offset + i] = value & 0xFF\r\n  while (--i >= 0 && (mul *= 0x100)) {\r\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\r\n      sub = 1\r\n    }\r\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\r\n  if (value < 0) value = 0xff + value + 1\r\n  this[offset] = (value & 0xff)\r\n  return offset + 1\r\n}\r\n\r\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\r\n  this[offset] = (value & 0xff)\r\n  this[offset + 1] = (value >>> 8)\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\r\n  this[offset] = (value >>> 8)\r\n  this[offset + 1] = (value & 0xff)\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\r\n  this[offset] = (value & 0xff)\r\n  this[offset + 1] = (value >>> 8)\r\n  this[offset + 2] = (value >>> 16)\r\n  this[offset + 3] = (value >>> 24)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\r\n  if (value < 0) value = 0xffffffff + value + 1\r\n  this[offset] = (value >>> 24)\r\n  this[offset + 1] = (value >>> 16)\r\n  this[offset + 2] = (value >>> 8)\r\n  this[offset + 3] = (value & 0xff)\r\n  return offset + 4\r\n}\r\n\r\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\r\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\r\n  if (offset < 0) throw new RangeError('Index out of range')\r\n}\r\n\r\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\r\n  }\r\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\r\n  return writeFloat(this, value, offset, true, noAssert)\r\n}\r\n\r\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\r\n  return writeFloat(this, value, offset, false, noAssert)\r\n}\r\n\r\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\r\n  }\r\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\r\n  return offset + 8\r\n}\r\n\r\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\r\n  return writeDouble(this, value, offset, true, noAssert)\r\n}\r\n\r\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\r\n  return writeDouble(this, value, offset, false, noAssert)\r\n}\r\n\r\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\r\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\r\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\r\n  if (!start) start = 0\r\n  if (!end && end !== 0) end = this.length\r\n  if (targetStart >= target.length) targetStart = target.length\r\n  if (!targetStart) targetStart = 0\r\n  if (end > 0 && end < start) end = start\r\n\r\n  // Copy 0 bytes; we're done\r\n  if (end === start) return 0\r\n  if (target.length === 0 || this.length === 0) return 0\r\n\r\n  // Fatal error conditions\r\n  if (targetStart < 0) {\r\n    throw new RangeError('targetStart out of bounds')\r\n  }\r\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\r\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\r\n\r\n  // Are we oob?\r\n  if (end > this.length) end = this.length\r\n  if (target.length - targetStart < end - start) {\r\n    end = target.length - targetStart + start\r\n  }\r\n\r\n  var len = end - start\r\n\r\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\r\n    // Use built-in when available, missing from IE11\r\n    this.copyWithin(targetStart, start, end)\r\n  } else if (this === target && start < targetStart && targetStart < end) {\r\n    // descending copy from end\r\n    for (var i = len - 1; i >= 0; --i) {\r\n      target[i + targetStart] = this[i + start]\r\n    }\r\n  } else {\r\n    Uint8Array.prototype.set.call(\r\n      target,\r\n      this.subarray(start, end),\r\n      targetStart\r\n    )\r\n  }\r\n\r\n  return len\r\n}\r\n\r\n// Usage:\r\n//    buffer.fill(number[, offset[, end]])\r\n//    buffer.fill(buffer[, offset[, end]])\r\n//    buffer.fill(string[, offset[, end]][, encoding])\r\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\r\n  // Handle string cases:\r\n  if (typeof val === 'string') {\r\n    if (typeof start === 'string') {\r\n      encoding = start\r\n      start = 0\r\n      end = this.length\r\n    } else if (typeof end === 'string') {\r\n      encoding = end\r\n      end = this.length\r\n    }\r\n    if (encoding !== undefined && typeof encoding !== 'string') {\r\n      throw new TypeError('encoding must be a string')\r\n    }\r\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\r\n      throw new TypeError('Unknown encoding: ' + encoding)\r\n    }\r\n    if (val.length === 1) {\r\n      var code = val.charCodeAt(0)\r\n      if ((encoding === 'utf8' && code < 128) ||\r\n          encoding === 'latin1') {\r\n        // Fast path: If `val` fits into a single byte, use that numeric value.\r\n        val = code\r\n      }\r\n    }\r\n  } else if (typeof val === 'number') {\r\n    val = val & 255\r\n  }\r\n\r\n  // Invalid ranges are not set to a default, so can range check early.\r\n  if (start < 0 || this.length < start || this.length < end) {\r\n    throw new RangeError('Out of range index')\r\n  }\r\n\r\n  if (end <= start) {\r\n    return this\r\n  }\r\n\r\n  start = start >>> 0\r\n  end = end === undefined ? this.length : end >>> 0\r\n\r\n  if (!val) val = 0\r\n\r\n  var i\r\n  if (typeof val === 'number') {\r\n    for (i = start; i < end; ++i) {\r\n      this[i] = val\r\n    }\r\n  } else {\r\n    var bytes = Buffer.isBuffer(val)\r\n      ? val\r\n      : new Buffer(val, encoding)\r\n    var len = bytes.length\r\n    if (len === 0) {\r\n      throw new TypeError('The value \"' + val +\r\n        '\" is invalid for argument \"value\"')\r\n    }\r\n    for (i = 0; i < end - start; ++i) {\r\n      this[i + start] = bytes[i % len]\r\n    }\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// HELPER FUNCTIONS\r\n// ================\r\n\r\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\r\n\r\nfunction base64clean (str) {\r\n  // Node takes equal signs as end of the Base64 encoding\r\n  str = str.split('=')[0]\r\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\r\n  str = str.trim().replace(INVALID_BASE64_RE, '')\r\n  // Node converts strings with length < 2 to ''\r\n  if (str.length < 2) return ''\r\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\r\n  while (str.length % 4 !== 0) {\r\n    str = str + '='\r\n  }\r\n  return str\r\n}\r\n\r\nfunction toHex (n) {\r\n  if (n < 16) return '0' + n.toString(16)\r\n  return n.toString(16)\r\n}\r\n\r\nfunction utf8ToBytes (string, units) {\r\n  units = units || Infinity\r\n  var codePoint\r\n  var length = string.length\r\n  var leadSurrogate = null\r\n  var bytes = []\r\n\r\n  for (var i = 0; i < length; ++i) {\r\n    codePoint = string.charCodeAt(i)\r\n\r\n    // is surrogate component\r\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\r\n      // last char was a lead\r\n      if (!leadSurrogate) {\r\n        // no lead yet\r\n        if (codePoint > 0xDBFF) {\r\n          // unexpected trail\r\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n          continue\r\n        } else if (i + 1 === length) {\r\n          // unpaired lead\r\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n          continue\r\n        }\r\n\r\n        // valid lead\r\n        leadSurrogate = codePoint\r\n\r\n        continue\r\n      }\r\n\r\n      // 2 leads in a row\r\n      if (codePoint < 0xDC00) {\r\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n        leadSurrogate = codePoint\r\n        continue\r\n      }\r\n\r\n      // valid surrogate pair\r\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\r\n    } else if (leadSurrogate) {\r\n      // valid bmp char, but last char was a lead\r\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n    }\r\n\r\n    leadSurrogate = null\r\n\r\n    // encode utf8\r\n    if (codePoint < 0x80) {\r\n      if ((units -= 1) < 0) break\r\n      bytes.push(codePoint)\r\n    } else if (codePoint < 0x800) {\r\n      if ((units -= 2) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0x6 | 0xC0,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else if (codePoint < 0x10000) {\r\n      if ((units -= 3) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0xC | 0xE0,\r\n        codePoint >> 0x6 & 0x3F | 0x80,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else if (codePoint < 0x110000) {\r\n      if ((units -= 4) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0x12 | 0xF0,\r\n        codePoint >> 0xC & 0x3F | 0x80,\r\n        codePoint >> 0x6 & 0x3F | 0x80,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else {\r\n      throw new Error('Invalid code point')\r\n    }\r\n  }\r\n\r\n  return bytes\r\n}\r\n\r\nfunction asciiToBytes (str) {\r\n  var byteArray = []\r\n  for (var i = 0; i < str.length; ++i) {\r\n    // Node's code seems to be doing this and not & 0x7F..\r\n    byteArray.push(str.charCodeAt(i) & 0xFF)\r\n  }\r\n  return byteArray\r\n}\r\n\r\nfunction utf16leToBytes (str, units) {\r\n  var c, hi, lo\r\n  var byteArray = []\r\n  for (var i = 0; i < str.length; ++i) {\r\n    if ((units -= 2) < 0) break\r\n\r\n    c = str.charCodeAt(i)\r\n    hi = c >> 8\r\n    lo = c % 256\r\n    byteArray.push(lo)\r\n    byteArray.push(hi)\r\n  }\r\n\r\n  return byteArray\r\n}\r\n\r\nfunction base64ToBytes (str) {\r\n  return base64.toByteArray(base64clean(str))\r\n}\r\n\r\nfunction blitBuffer (src, dst, offset, length) {\r\n  for (var i = 0; i < length; ++i) {\r\n    if ((i + offset >= dst.length) || (i >= src.length)) break\r\n    dst[i + offset] = src[i]\r\n  }\r\n  return i\r\n}\r\n\r\n// ArrayBuffers from another context (i.e. an iframe) do not pass the `instanceof` check\r\n// but they should be treated as valid. See: https://github.com/feross/buffer/issues/166\r\nfunction isArrayBuffer (obj) {\r\n  return obj instanceof ArrayBuffer ||\r\n    (obj != null && obj.constructor != null && obj.constructor.name === 'ArrayBuffer' &&\r\n      typeof obj.byteLength === 'number')\r\n}\r\n\r\nfunction numberIsNaN (obj) {\r\n  return obj !== obj // eslint-disable-line no-self-compare\r\n}\r\n\r\n},{\"base64-js\":39,\"ieee754\":83}],42:[function(require,module,exports){\r\n(function (Buffer){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// NOTE: These type checking functions intentionally don't use `instanceof`\r\n// because it is fragile and can be easily faked with `Object.create()`.\r\n\r\nfunction isArray(arg) {\r\n  if (Array.isArray) {\r\n    return Array.isArray(arg);\r\n  }\r\n  return objectToString(arg) === '[object Array]';\r\n}\r\nexports.isArray = isArray;\r\n\r\nfunction isBoolean(arg) {\r\n  return typeof arg === 'boolean';\r\n}\r\nexports.isBoolean = isBoolean;\r\n\r\nfunction isNull(arg) {\r\n  return arg === null;\r\n}\r\nexports.isNull = isNull;\r\n\r\nfunction isNullOrUndefined(arg) {\r\n  return arg == null;\r\n}\r\nexports.isNullOrUndefined = isNullOrUndefined;\r\n\r\nfunction isNumber(arg) {\r\n  return typeof arg === 'number';\r\n}\r\nexports.isNumber = isNumber;\r\n\r\nfunction isString(arg) {\r\n  return typeof arg === 'string';\r\n}\r\nexports.isString = isString;\r\n\r\nfunction isSymbol(arg) {\r\n  return typeof arg === 'symbol';\r\n}\r\nexports.isSymbol = isSymbol;\r\n\r\nfunction isUndefined(arg) {\r\n  return arg === void 0;\r\n}\r\nexports.isUndefined = isUndefined;\r\n\r\nfunction isRegExp(re) {\r\n  return objectToString(re) === '[object RegExp]';\r\n}\r\nexports.isRegExp = isRegExp;\r\n\r\nfunction isObject(arg) {\r\n  return typeof arg === 'object' && arg !== null;\r\n}\r\nexports.isObject = isObject;\r\n\r\nfunction isDate(d) {\r\n  return objectToString(d) === '[object Date]';\r\n}\r\nexports.isDate = isDate;\r\n\r\nfunction isError(e) {\r\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\r\n}\r\nexports.isError = isError;\r\n\r\nfunction isFunction(arg) {\r\n  return typeof arg === 'function';\r\n}\r\nexports.isFunction = isFunction;\r\n\r\nfunction isPrimitive(arg) {\r\n  return arg === null ||\r\n         typeof arg === 'boolean' ||\r\n         typeof arg === 'number' ||\r\n         typeof arg === 'string' ||\r\n         typeof arg === 'symbol' ||  // ES6 symbol\r\n         typeof arg === 'undefined';\r\n}\r\nexports.isPrimitive = isPrimitive;\r\n\r\nexports.isBuffer = Buffer.isBuffer;\r\n\r\nfunction objectToString(o) {\r\n  return Object.prototype.toString.call(o);\r\n}\r\n\r\n}).call(this,{\"isBuffer\":require(\"../../is-buffer/index.js\")})\r\n\r\n},{\"../../is-buffer/index.js\":85}],43:[function(require,module,exports){\r\n(function (process,Buffer){\r\n// Generated by CoffeeScript 1.12.7\r\nvar Parser, StringDecoder, isObjLiteral, stream, util;\r\n\r\nstream = require('stream');\r\n\r\nutil = require('util');\r\n\r\nStringDecoder = require('string_decoder').StringDecoder;\r\n\r\nmodule.exports = function() {\r\n  var callback, called, chunks, data, err, options, parser;\r\n  if (arguments.length === 3) {\r\n    data = arguments[0];\r\n    options = arguments[1];\r\n    callback = arguments[2];\r\n    if (typeof callback !== 'function') {\r\n      throw Error(\"Invalid callback argument: \" + (JSON.stringify(callback)));\r\n    }\r\n    if (!(typeof data === 'string' || Buffer.isBuffer(arguments[0]))) {\r\n      return callback(Error(\"Invalid data argument: \" + (JSON.stringify(data))));\r\n    }\r\n  } else if (arguments.length === 2) {\r\n    if (typeof arguments[0] === 'string' || Buffer.isBuffer(arguments[0])) {\r\n      data = arguments[0];\r\n    } else if (isObjLiteral(arguments[0])) {\r\n      options = arguments[0];\r\n    } else {\r\n      err = \"Invalid first argument: \" + (JSON.stringify(arguments[0]));\r\n    }\r\n    if (typeof arguments[1] === 'function') {\r\n      callback = arguments[1];\r\n    } else if (isObjLiteral(arguments[1])) {\r\n      if (options) {\r\n        err = 'Invalid arguments: got options twice as first and second arguments';\r\n      } else {\r\n        options = arguments[1];\r\n      }\r\n    } else {\r\n      err = \"Invalid first argument: \" + (JSON.stringify(arguments[1]));\r\n    }\r\n    if (err) {\r\n      if (!callback) {\r\n        throw Error(err);\r\n      } else {\r\n        return callback(Error(err));\r\n      }\r\n    }\r\n  } else if (arguments.length === 1) {\r\n    if (typeof arguments[0] === 'function') {\r\n      callback = arguments[0];\r\n    } else {\r\n      options = arguments[0];\r\n    }\r\n  }\r\n  if (options == null) {\r\n    options = {};\r\n  }\r\n  parser = new Parser(options);\r\n  if (data != null) {\r\n    process.nextTick(function() {\r\n      parser.write(data);\r\n      return parser.end();\r\n    });\r\n  }\r\n  if (callback) {\r\n    called = false;\r\n    chunks = options.objname ? {} : [];\r\n    parser.on('readable', function() {\r\n      var chunk, results;\r\n      results = [];\r\n      while (chunk = parser.read()) {\r\n        if (options.objname) {\r\n          results.push(chunks[chunk[0]] = chunk[1]);\r\n        } else {\r\n          results.push(chunks.push(chunk));\r\n        }\r\n      }\r\n      return results;\r\n    });\r\n    parser.on('error', function(err) {\r\n      called = true;\r\n      return callback(err);\r\n    });\r\n    parser.on('end', function() {\r\n      if (!called) {\r\n        return callback(null, chunks);\r\n      }\r\n    });\r\n  }\r\n  return parser;\r\n};\r\n\r\nParser = function(options) {\r\n  var base, base1, base10, base11, base12, base13, base14, base15, base16, base2, base3, base4, base5, base6, base7, base8, base9, k, v;\r\n  if (options == null) {\r\n    options = {};\r\n  }\r\n  this.options = {};\r\n  for (k in options) {\r\n    v = options[k];\r\n    this.options[k] = v;\r\n  }\r\n  this.options.objectMode = true;\r\n  stream.Transform.call(this, this.options);\r\n  if ((base = this.options).rowDelimiter == null) {\r\n    base.rowDelimiter = null;\r\n  }\r\n  if (typeof this.options.rowDelimiter === 'string') {\r\n    this.options.rowDelimiter = [this.options.rowDelimiter];\r\n  }\r\n  if ((base1 = this.options).delimiter == null) {\r\n    base1.delimiter = ',';\r\n  }\r\n  if (this.options.quote !== void 0 && !this.options.quote) {\r\n    this.options.quote = '';\r\n  }\r\n  if ((base2 = this.options).quote == null) {\r\n    base2.quote = '\"';\r\n  }\r\n  if ((base3 = this.options).escape == null) {\r\n    base3.escape = '\"';\r\n  }\r\n  if ((base4 = this.options).columns == null) {\r\n    base4.columns = null;\r\n  }\r\n  if ((base5 = this.options).comment == null) {\r\n    base5.comment = '';\r\n  }\r\n  if ((base6 = this.options).objname == null) {\r\n    base6.objname = false;\r\n  }\r\n  if ((base7 = this.options).trim == null) {\r\n    base7.trim = false;\r\n  }\r\n  if ((base8 = this.options).ltrim == null) {\r\n    base8.ltrim = false;\r\n  }\r\n  if ((base9 = this.options).rtrim == null) {\r\n    base9.rtrim = false;\r\n  }\r\n  if ((base10 = this.options).auto_parse == null) {\r\n    base10.auto_parse = false;\r\n  }\r\n  if ((base11 = this.options).auto_parse_date == null) {\r\n    base11.auto_parse_date = false;\r\n  }\r\n  if (this.options.auto_parse_date === true) {\r\n    this.options.auto_parse_date = function(value) {\r\n      var m;\r\n      m = Date.parse(value);\r\n      if (!isNaN(m)) {\r\n        value = new Date(m);\r\n      }\r\n      return value;\r\n    };\r\n  }\r\n  if ((base12 = this.options).relax == null) {\r\n    base12.relax = false;\r\n  }\r\n  if ((base13 = this.options).relax_column_count == null) {\r\n    base13.relax_column_count = false;\r\n  }\r\n  if ((base14 = this.options).skip_empty_lines == null) {\r\n    base14.skip_empty_lines = false;\r\n  }\r\n  if ((base15 = this.options).max_limit_on_data_read == null) {\r\n    base15.max_limit_on_data_read = 128000;\r\n  }\r\n  if ((base16 = this.options).skip_lines_with_empty_values == null) {\r\n    base16.skip_lines_with_empty_values = false;\r\n  }\r\n  this.lines = 0;\r\n  this.count = 0;\r\n  this.skipped_line_count = 0;\r\n  this.empty_line_count = 0;\r\n  this.is_int = /^(\\-|\\+)?([1-9]+[0-9]*)$/;\r\n  this.is_float = function(value) {\r\n    return (value - parseFloat(value) + 1) >= 0;\r\n  };\r\n  this._ = {\r\n    decoder: new StringDecoder(),\r\n    quoting: false,\r\n    commenting: false,\r\n    field: null,\r\n    nextChar: null,\r\n    closingQuote: 0,\r\n    line: [],\r\n    chunks: [],\r\n    rawBuf: '',\r\n    buf: '',\r\n    rowDelimiterLength: this.options.rowDelimiter ? Math.max.apply(Math, this.options.rowDelimiter.map(function(v) {\r\n      return v.length;\r\n    })) : void 0\r\n  };\r\n  return this;\r\n};\r\n\r\nutil.inherits(Parser, stream.Transform);\r\n\r\nmodule.exports.Parser = Parser;\r\n\r\nParser.prototype._transform = function(chunk, encoding, callback) {\r\n  var err;\r\n  if (chunk instanceof Buffer) {\r\n    chunk = this._.decoder.write(chunk);\r\n  }\r\n  err = this.__write(chunk, false);\r\n  if (err) {\r\n    return this.emit('error', err);\r\n  }\r\n  return callback();\r\n};\r\n\r\nParser.prototype._flush = function(callback) {\r\n  var err;\r\n  err = this.__write(this._.decoder.end(), true);\r\n  if (err) {\r\n    return this.emit('error', err);\r\n  }\r\n  if (this._.quoting) {\r\n    this.emit('error', new Error(\"Quoted field not terminated at line \" + (this.lines + 1)));\r\n    return;\r\n  }\r\n  if (this._.line.length > 0) {\r\n    err = this.__push(this._.line);\r\n    if (err) {\r\n      return callback(err);\r\n    }\r\n  }\r\n  return callback();\r\n};\r\n\r\nParser.prototype.__push = function(line) {\r\n  var call_column_udf, columns, err, field, i, j, len, lineAsColumns, rawBuf, ref, row;\r\n  if (this.options.skip_lines_with_empty_values && line.join('').trim() === '') {\r\n    return;\r\n  }\r\n  row = null;\r\n  if (this.options.columns === true) {\r\n    this.options.columns = line;\r\n    rawBuf = '';\r\n    return;\r\n  } else if (typeof this.options.columns === 'function') {\r\n    call_column_udf = function(fn, line) {\r\n      var columns, err;\r\n      try {\r\n        columns = fn.call(null, line);\r\n        return [null, columns];\r\n      } catch (error) {\r\n        err = error;\r\n        return [err];\r\n      }\r\n    };\r\n    ref = call_column_udf(this.options.columns, line), err = ref[0], columns = ref[1];\r\n    if (err) {\r\n      return err;\r\n    }\r\n    this.options.columns = columns;\r\n    rawBuf = '';\r\n    return;\r\n  }\r\n  if (!this._.line_length && line.length > 0) {\r\n    this._.line_length = this.options.columns ? this.options.columns.length : line.length;\r\n  }\r\n  if (line.length === 1 && line[0] === '') {\r\n    this.empty_line_count++;\r\n  } else if (line.length !== this._.line_length) {\r\n    if (this.options.relax_column_count) {\r\n      this.count++;\r\n      this.skipped_line_count++;\r\n    } else if (this.options.columns != null) {\r\n      return Error(\"Number of columns on line \" + this.lines + \" does not match header\");\r\n    } else {\r\n      return Error(\"Number of columns is inconsistent on line \" + this.lines);\r\n    }\r\n  } else {\r\n    this.count++;\r\n  }\r\n  if (this.options.columns != null) {\r\n    lineAsColumns = {};\r\n    for (i = j = 0, len = line.length; j < len; i = ++j) {\r\n      field = line[i];\r\n      if (this.options.columns[i] === false) {\r\n        continue;\r\n      }\r\n      lineAsColumns[this.options.columns[i]] = field;\r\n    }\r\n    if (this.options.objname) {\r\n      row = [lineAsColumns[this.options.objname], lineAsColumns];\r\n    } else {\r\n      row = lineAsColumns;\r\n    }\r\n  } else {\r\n    row = line;\r\n  }\r\n  if (this.count < this.options.from) {\r\n    return;\r\n  }\r\n  if (this.count > this.options.to) {\r\n    return;\r\n  }\r\n  if (this.options.raw) {\r\n    this.push({\r\n      raw: this._.rawBuf,\r\n      row: row\r\n    });\r\n    this._.rawBuf = '';\r\n  } else {\r\n    this.push(row);\r\n  }\r\n  return null;\r\n};\r\n\r\nParser.prototype.__write = function(chars, end) {\r\n  var areNextCharsDelimiter, areNextCharsRowDelimiters, auto_parse, char, err, escapeIsQuote, i, isDelimiter, isEscape, isNextCharAComment, isQuote, isRowDelimiter, isRowDelimiterLength, is_float, is_int, l, ltrim, nextCharPos, ref, ref1, ref2, ref3, ref4, ref5, remainingBuffer, rowDelimiter, rtrim, wasCommenting;\r\n  is_int = (function(_this) {\r\n    return function(value) {\r\n      if (typeof _this.is_int === 'function') {\r\n        return _this.is_int(value);\r\n      } else {\r\n        return _this.is_int.test(value);\r\n      }\r\n    };\r\n  })(this);\r\n  is_float = (function(_this) {\r\n    return function(value) {\r\n      if (typeof _this.is_float === 'function') {\r\n        return _this.is_float(value);\r\n      } else {\r\n        return _this.is_float.test(value);\r\n      }\r\n    };\r\n  })(this);\r\n  auto_parse = (function(_this) {\r\n    return function(value) {\r\n      if (!_this.options.auto_parse) {\r\n        return value;\r\n      }\r\n      if (typeof _this.options.auto_parse === 'function') {\r\n        return _this.options.auto_parse(value);\r\n      }\r\n      if (is_int(value)) {\r\n        value = parseInt(value);\r\n      } else if (is_float(value)) {\r\n        value = parseFloat(value);\r\n      } else if (_this.options.auto_parse_date) {\r\n        value = _this.options.auto_parse_date(value);\r\n      }\r\n      return value;\r\n    };\r\n  })(this);\r\n  ltrim = this.options.trim || this.options.ltrim;\r\n  rtrim = this.options.trim || this.options.rtrim;\r\n  chars = this._.buf + chars;\r\n  l = chars.length;\r\n  i = 0;\r\n  if (this.lines === 0 && 0xFEFF === chars.charCodeAt(0)) {\r\n    i++;\r\n  }\r\n  while (i < l) {\r\n    if (!end) {\r\n      remainingBuffer = chars.substr(i, l - i);\r\n      if ((!this.options.rowDelimiter && i + 3 > l) || (!this._.commenting && l - i < this.options.comment.length && this.options.comment.substr(0, l - i) === remainingBuffer) || (this.options.rowDelimiter && l - i < this._.rowDelimiterLength && this.options.rowDelimiter.some(function(rd) {\r\n        return rd.substr(0, l - i) === remainingBuffer;\r\n      })) || (this.options.rowDelimiter && this._.quoting && l - i < (this.options.quote.length + this._.rowDelimiterLength) && this.options.rowDelimiter.some((function(_this) {\r\n        return function(rd) {\r\n          return (_this.options.quote + rd).substr(0, l - i) === remainingBuffer;\r\n        };\r\n      })(this))) || (l - i <= this.options.delimiter.length && this.options.delimiter.substr(0, l - i) === remainingBuffer) || (l - i <= this.options.escape.length && this.options.escape.substr(0, l - i) === remainingBuffer)) {\r\n        break;\r\n      }\r\n    }\r\n    char = this._.nextChar ? this._.nextChar : chars.charAt(i);\r\n    this._.nextChar = l > i + 1 ? chars.charAt(i + 1) : '';\r\n    if (this.options.raw) {\r\n      this._.rawBuf += char;\r\n    }\r\n    if (this.options.rowDelimiter == null) {\r\n      nextCharPos = i;\r\n      rowDelimiter = null;\r\n      if (!this._.quoting && (char === '\\n' || char === '\\r')) {\r\n        rowDelimiter = char;\r\n        nextCharPos += 1;\r\n      } else if (this._.quoting && char === this.options.quote && ((ref = this._.nextChar) === '\\n' || ref === '\\r')) {\r\n        rowDelimiter = this._.nextChar;\r\n        nextCharPos += 2;\r\n        if (this.raw) {\r\n          rawBuf += this._.nextChar;\r\n        }\r\n      }\r\n      if (rowDelimiter) {\r\n        if (rowDelimiter === '\\r' && chars.charAt(nextCharPos) === '\\n') {\r\n          rowDelimiter += '\\n';\r\n        }\r\n        this.options.rowDelimiter = [rowDelimiter];\r\n        this._.rowDelimiterLength = rowDelimiter.length;\r\n      }\r\n    }\r\n    if (!this._.commenting && char === this.options.escape) {\r\n      escapeIsQuote = this.options.escape === this.options.quote;\r\n      isEscape = this._.nextChar === this.options.escape;\r\n      isQuote = this._.nextChar === this.options.quote;\r\n      if (!(escapeIsQuote && (this._.field == null) && !this._.quoting) && (isEscape || isQuote)) {\r\n        i++;\r\n        char = this._.nextChar;\r\n        this._.nextChar = chars.charAt(i + 1);\r\n        if (this._.field == null) {\r\n          this._.field = '';\r\n        }\r\n        this._.field += char;\r\n        if (this.options.raw) {\r\n          this._.rawBuf += char;\r\n        }\r\n        i++;\r\n        continue;\r\n      }\r\n    }\r\n    if (!this._.commenting && char === this.options.quote) {\r\n      if (this._.quoting) {\r\n        areNextCharsRowDelimiters = this.options.rowDelimiter && this.options.rowDelimiter.some(function(rd) {\r\n          return chars.substr(i + 1, rd.length) === rd;\r\n        });\r\n        areNextCharsDelimiter = chars.substr(i + 1, this.options.delimiter.length) === this.options.delimiter;\r\n        isNextCharAComment = this._.nextChar === this.options.comment;\r\n        if (this._.nextChar && !areNextCharsRowDelimiters && !areNextCharsDelimiter && !isNextCharAComment) {\r\n          if (this.options.relax) {\r\n            this._.quoting = false;\r\n            if (this._.field) {\r\n              this._.field = \"\" + this.options.quote + this._.field;\r\n            }\r\n          } else {\r\n            return Error(\"Invalid closing quote at line \" + (this.lines + 1) + \"; found \" + (JSON.stringify(this._.nextChar)) + \" instead of delimiter \" + (JSON.stringify(this.options.delimiter)));\r\n          }\r\n        } else {\r\n          this._.quoting = false;\r\n          this._.closingQuote = this.options.quote.length;\r\n          i++;\r\n          if (end && i === l) {\r\n            this._.line.push(auto_parse(this._.field || ''));\r\n            this._.field = null;\r\n          }\r\n          continue;\r\n        }\r\n      } else if (!this._.field) {\r\n        this._.quoting = true;\r\n        i++;\r\n        continue;\r\n      } else if ((this._.field != null) && !this.options.relax) {\r\n        return Error(\"Invalid opening quote at line \" + (this.lines + 1));\r\n      }\r\n    }\r\n    isRowDelimiter = this.options.rowDelimiter && this.options.rowDelimiter.some(function(rd) {\r\n      return chars.substr(i, rd.length) === rd;\r\n    });\r\n    if (isRowDelimiter || (end && i === l - 1)) {\r\n      this.lines++;\r\n    }\r\n    wasCommenting = false;\r\n    if (!this._.commenting && !this._.quoting && this.options.comment && chars.substr(i, this.options.comment.length) === this.options.comment) {\r\n      this._.commenting = true;\r\n    } else if (this._.commenting && isRowDelimiter) {\r\n      wasCommenting = true;\r\n      this._.commenting = false;\r\n    }\r\n    isDelimiter = chars.substr(i, this.options.delimiter.length) === this.options.delimiter;\r\n    if (!this._.commenting && !this._.quoting && (isDelimiter || isRowDelimiter)) {\r\n      if (isRowDelimiter) {\r\n        isRowDelimiterLength = this.options.rowDelimiter.filter(function(rd) {\r\n          return chars.substr(i, rd.length) === rd;\r\n        })[0].length;\r\n      }\r\n      if (isRowDelimiter && this._.line.length === 0 && (this._.field == null)) {\r\n        if (wasCommenting || this.options.skip_empty_lines) {\r\n          i += isRowDelimiterLength;\r\n          this._.nextChar = chars.charAt(i);\r\n          continue;\r\n        }\r\n      }\r\n      if (rtrim) {\r\n        if (!this._.closingQuote) {\r\n          this._.field = (ref1 = this._.field) != null ? ref1.trimRight() : void 0;\r\n        }\r\n      }\r\n      this._.line.push(auto_parse(this._.field || ''));\r\n      this._.closingQuote = 0;\r\n      this._.field = null;\r\n      if (isDelimiter) {\r\n        i += this.options.delimiter.length;\r\n        this._.nextChar = chars.charAt(i);\r\n        if (end && !this._.nextChar) {\r\n          isRowDelimiter = true;\r\n          this._.line.push('');\r\n        }\r\n      }\r\n      if (isRowDelimiter) {\r\n        err = this.__push(this._.line);\r\n        if (err) {\r\n          return err;\r\n        }\r\n        this._.line = [];\r\n        i += isRowDelimiterLength;\r\n        this._.nextChar = chars.charAt(i);\r\n        continue;\r\n      }\r\n    } else if (!this._.commenting && !this._.quoting && (char === ' ' || char === '\\t')) {\r\n      if (this._.field == null) {\r\n        this._.field = '';\r\n      }\r\n      if (!(ltrim && !this._.field)) {\r\n        this._.field += char;\r\n      }\r\n      i++;\r\n    } else if (!this._.commenting) {\r\n      if (this._.field == null) {\r\n        this._.field = '';\r\n      }\r\n      this._.field += char;\r\n      i++;\r\n    } else {\r\n      i++;\r\n    }\r\n    if (!this._.commenting && ((ref2 = this._.field) != null ? ref2.length : void 0) > this.options.max_limit_on_data_read) {\r\n      return Error(\"Field exceeds max_limit_on_data_read setting (\" + this.options.max_limit_on_data_read + \") \" + (JSON.stringify(this.options.delimiter)));\r\n    }\r\n    if (!this._.commenting && ((ref3 = this._.line) != null ? ref3.length : void 0) > this.options.max_limit_on_data_read) {\r\n      return Error(\"Row delimiter not found in the file \" + (JSON.stringify(this.options.rowDelimiter)));\r\n    }\r\n  }\r\n  if (end) {\r\n    if (this._.field != null) {\r\n      if (rtrim) {\r\n        if (!this._.closingQuote) {\r\n          this._.field = (ref4 = this._.field) != null ? ref4.trimRight() : void 0;\r\n        }\r\n      }\r\n      this._.line.push(auto_parse(this._.field || ''));\r\n      this._.field = null;\r\n    }\r\n    if (((ref5 = this._.field) != null ? ref5.length : void 0) > this.options.max_limit_on_data_read) {\r\n      return Error(\"Delimiter not found in the file \" + (JSON.stringify(this.options.delimiter)));\r\n    }\r\n    if (l === 0) {\r\n      this.lines++;\r\n    }\r\n    if (this._.line.length > this.options.max_limit_on_data_read) {\r\n      return Error(\"Row delimiter not found in the file \" + (JSON.stringify(this.options.rowDelimiter)));\r\n    }\r\n  }\r\n  this._.buf = chars.substr(i);\r\n  return null;\r\n};\r\n\r\nisObjLiteral = function(_obj) {\r\n  var _test;\r\n  _test = _obj;\r\n  if (typeof _obj !== 'object' || _obj === null || Array.isArray(_obj)) {\r\n    return false;\r\n  } else {\r\n    return (function() {\r\n      while (!false) {\r\n        if (Object.getPrototypeOf(_test = Object.getPrototypeOf(_test)) === null) {\r\n          break;\r\n        }\r\n      }\r\n      return Object.getPrototypeOf(_obj === _test);\r\n    })();\r\n  }\r\n};\r\n\r\n}).call(this,require('_process'),require(\"buffer\").Buffer)\r\n\r\n},{\"_process\":91,\"buffer\":41,\"stream\":112,\"string_decoder\":113,\"util\":117}],44:[function(require,module,exports){\r\n(function (Buffer){\r\n// Generated by CoffeeScript 1.12.7\r\nvar StringDecoder, parse;\r\n\r\nStringDecoder = require('string_decoder').StringDecoder;\r\n\r\nparse = require('./index');\r\n\r\nmodule.exports = function(data, options) {\r\n  var decoder, err, parser, records;\r\n  if (options == null) {\r\n    options = {};\r\n  }\r\n  records = options.objname ? {} : [];\r\n  if (data instanceof Buffer) {\r\n    decoder = new StringDecoder();\r\n    data = decoder.write(data);\r\n  }\r\n  parser = new parse.Parser(options);\r\n  parser.push = function(record) {\r\n    if (options.objname) {\r\n      return records[record[0]] = record[1];\r\n    } else {\r\n      return records.push(record);\r\n    }\r\n  };\r\n  err = parser.__write(data, false);\r\n  if (err) {\r\n    throw err;\r\n  }\r\n  if (data instanceof Buffer) {\r\n    err = parser.__write(data.end(), true);\r\n    if (err) {\r\n      throw err;\r\n    }\r\n  }\r\n  parser._flush((function() {}));\r\n  return records;\r\n};\r\n\r\n}).call(this,require(\"buffer\").Buffer)\r\n\r\n},{\"./index\":43,\"buffer\":41,\"string_decoder\":113}],45:[function(require,module,exports){\r\n(function (process){\r\n// Generated by CoffeeScript 1.12.7\r\nvar Stringifier, get, stream, util;\r\n\r\nstream = require('stream');\r\n\r\nutil = require('util');\r\n\r\nget = require('lodash.get');\r\n\r\nmodule.exports = function() {\r\n  var callback, chunks, data, options, stringifier;\r\n  if (arguments.length === 3) {\r\n    data = arguments[0];\r\n    options = arguments[1];\r\n    callback = arguments[2];\r\n  } else if (arguments.length === 2) {\r\n    if (Array.isArray(arguments[0])) {\r\n      data = arguments[0];\r\n    } else {\r\n      options = arguments[0];\r\n    }\r\n    if (typeof arguments[1] === 'function') {\r\n      callback = arguments[1];\r\n    } else {\r\n      options = arguments[1];\r\n    }\r\n  } else if (arguments.length === 1) {\r\n    if (typeof arguments[0] === 'function') {\r\n      callback = arguments[0];\r\n    } else if (Array.isArray(arguments[0])) {\r\n      data = arguments[0];\r\n    } else {\r\n      options = arguments[0];\r\n    }\r\n  }\r\n  if (options == null) {\r\n    options = {};\r\n  }\r\n  stringifier = new Stringifier(options);\r\n  if (data) {\r\n    process.nextTick(function() {\r\n      var d, j, len;\r\n      for (j = 0, len = data.length; j < len; j++) {\r\n        d = data[j];\r\n        stringifier.write(d);\r\n      }\r\n      return stringifier.end();\r\n    });\r\n  }\r\n  if (callback) {\r\n    chunks = [];\r\n    stringifier.on('readable', function() {\r\n      var chunk, results;\r\n      results = [];\r\n      while (chunk = stringifier.read()) {\r\n        results.push(chunks.push(chunk));\r\n      }\r\n      return results;\r\n    });\r\n    stringifier.on('error', function(err) {\r\n      return callback(err);\r\n    });\r\n    stringifier.on('end', function() {\r\n      return callback(null, chunks.join(''));\r\n    });\r\n  }\r\n  return stringifier;\r\n};\r\n\r\nStringifier = function(opts) {\r\n  var base, base1, base10, base11, base12, base13, base2, base3, base4, base5, base6, base7, base8, base9, k, options, v;\r\n  if (opts == null) {\r\n    opts = {};\r\n  }\r\n  options = {};\r\n  for (k in opts) {\r\n    v = opts[k];\r\n    options[k] = v;\r\n  }\r\n  stream.Transform.call(this, options);\r\n  this.options = options;\r\n  if ((base = this.options).delimiter == null) {\r\n    base.delimiter = ',';\r\n  }\r\n  if ((base1 = this.options).quote == null) {\r\n    base1.quote = '\"';\r\n  }\r\n  if ((base2 = this.options).quoted == null) {\r\n    base2.quoted = false;\r\n  }\r\n  if ((base3 = this.options).quotedEmpty == null) {\r\n    base3.quotedEmpty = void 0;\r\n  }\r\n  if ((base4 = this.options).quotedString == null) {\r\n    base4.quotedString = false;\r\n  }\r\n  if ((base5 = this.options).eof == null) {\r\n    base5.eof = true;\r\n  }\r\n  if ((base6 = this.options).escape == null) {\r\n    base6.escape = '\"';\r\n  }\r\n  if ((base7 = this.options).columns == null) {\r\n    base7.columns = null;\r\n  }\r\n  if ((base8 = this.options).header == null) {\r\n    base8.header = false;\r\n  }\r\n  if ((base9 = this.options).formatters == null) {\r\n    base9.formatters = {};\r\n  }\r\n  if ((base10 = this.options.formatters).date == null) {\r\n    base10.date = function(value) {\r\n      return '' + value.getTime();\r\n    };\r\n  }\r\n  if ((base11 = this.options.formatters).bool == null) {\r\n    base11.bool = function(value) {\r\n      if (value) {\r\n        return '1';\r\n      } else {\r\n        return '';\r\n      }\r\n    };\r\n  }\r\n  if ((base12 = this.options.formatters).object == null) {\r\n    base12.object = function(value) {\r\n      return JSON.stringify(value);\r\n    };\r\n  }\r\n  if ((base13 = this.options).rowDelimiter == null) {\r\n    base13.rowDelimiter = '\\n';\r\n  }\r\n  if (this.countWriten == null) {\r\n    this.countWriten = 0;\r\n  }\r\n  switch (this.options.rowDelimiter) {\r\n    case 'auto':\r\n      this.options.rowDelimiter = null;\r\n      break;\r\n    case 'unix':\r\n      this.options.rowDelimiter = \"\\n\";\r\n      break;\r\n    case 'mac':\r\n      this.options.rowDelimiter = \"\\r\";\r\n      break;\r\n    case 'windows':\r\n      this.options.rowDelimiter = \"\\r\\n\";\r\n      break;\r\n    case 'unicode':\r\n      this.options.rowDelimiter = \"\\u2028\";\r\n  }\r\n  return this;\r\n};\r\n\r\nutil.inherits(Stringifier, stream.Transform);\r\n\r\nmodule.exports.Stringifier = Stringifier;\r\n\r\nStringifier.prototype.headers = function() {\r\n  var k, label, labels;\r\n  if (!this.options.header) {\r\n    return;\r\n  }\r\n  if (!this.options.columns) {\r\n    return;\r\n  }\r\n  labels = this.options.columns;\r\n  if (typeof labels === 'object') {\r\n    labels = (function() {\r\n      var results;\r\n      results = [];\r\n      for (k in labels) {\r\n        label = labels[k];\r\n        results.push(label);\r\n      }\r\n      return results;\r\n    })();\r\n  }\r\n  if (this.options.eof) {\r\n    labels = this.stringify(labels) + this.options.rowDelimiter;\r\n  } else {\r\n    labels = this.stringify(labels);\r\n  }\r\n  return stream.Transform.prototype.write.call(this, labels);\r\n};\r\n\r\nStringifier.prototype.end = function(chunk, encoding, callback) {\r\n  if (this.countWriten === 0) {\r\n    this.headers();\r\n  }\r\n  return stream.Transform.prototype.end.apply(this, arguments);\r\n};\r\n\r\nStringifier.prototype.write = function(chunk, encoding, callback) {\r\n  var base, e, preserve;\r\n  if (chunk == null) {\r\n    return;\r\n  }\r\n  preserve = typeof chunk !== 'object';\r\n  if (!preserve) {\r\n    if (this.countWriten === 0 && !Array.isArray(chunk)) {\r\n      if ((base = this.options).columns == null) {\r\n        base.columns = Object.keys(chunk);\r\n      }\r\n    }\r\n    try {\r\n      this.emit('record', chunk, this.countWriten);\r\n    } catch (error) {\r\n      e = error;\r\n      return this.emit('error', e);\r\n    }\r\n    if (this.options.eof) {\r\n      chunk = this.stringify(chunk) + this.options.rowDelimiter;\r\n    } else {\r\n      chunk = this.stringify(chunk);\r\n      if (this.options.header || this.countWriten) {\r\n        chunk = this.options.rowDelimiter + chunk;\r\n      }\r\n    }\r\n  }\r\n  if (typeof chunk === 'number') {\r\n    chunk = \"\" + chunk;\r\n  }\r\n  if (this.countWriten === 0) {\r\n    this.headers();\r\n  }\r\n  if (!preserve) {\r\n    this.countWriten++;\r\n  }\r\n  return stream.Transform.prototype.write.call(this, chunk, encoding, callback);\r\n};\r\n\r\nStringifier.prototype._transform = function(chunk, encoding, callback) {\r\n  this.push(chunk);\r\n  return callback();\r\n};\r\n\r\nStringifier.prototype.stringify = function(line) {\r\n  var _line, column, columns, containsEscape, containsLinebreak, containsQuote, containsdelimiter, delimiter, escape, field, i, j, l, newLine, quote, ref, ref1, regexp, shouldQuote, value;\r\n  if (typeof line !== 'object') {\r\n    return line;\r\n  }\r\n  columns = this.options.columns;\r\n  if (typeof columns === 'object' && columns !== null && !Array.isArray(columns)) {\r\n    columns = Object.keys(columns);\r\n  }\r\n  delimiter = this.options.delimiter;\r\n  quote = this.options.quote;\r\n  escape = this.options.escape;\r\n  if (!Array.isArray(line)) {\r\n    _line = [];\r\n    if (columns) {\r\n      for (i = j = 0, ref = columns.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\r\n        column = columns[i];\r\n        value = get(line, column);\r\n        _line[i] = (typeof value === 'undefined' || value === null) ? '' : value;\r\n      }\r\n    } else {\r\n      for (column in line) {\r\n        _line.push(line[column]);\r\n      }\r\n    }\r\n    line = _line;\r\n    _line = null;\r\n  } else if (columns) {\r\n    line.splice(columns.length);\r\n  }\r\n  if (Array.isArray(line)) {\r\n    newLine = '';\r\n    for (i = l = 0, ref1 = line.length; 0 <= ref1 ? l < ref1 : l > ref1; i = 0 <= ref1 ? ++l : --l) {\r\n      field = line[i];\r\n      if (typeof field === 'string') {\r\n\r\n      } else if (typeof field === 'number') {\r\n        field = '' + field;\r\n      } else if (typeof field === 'boolean') {\r\n        field = this.options.formatters.bool(field);\r\n      } else if (field instanceof Date) {\r\n        field = this.options.formatters.date(field);\r\n      } else if (typeof field === 'object' && field !== null) {\r\n        field = this.options.formatters.object(field);\r\n      }\r\n      if (field) {\r\n        containsdelimiter = field.indexOf(delimiter) >= 0;\r\n        containsQuote = field.indexOf(quote) >= 0;\r\n        containsEscape = field.indexOf(escape) >= 0 && (escape !== quote);\r\n        containsLinebreak = field.indexOf('\\r') >= 0 || field.indexOf('\\n') >= 0;\r\n        shouldQuote = containsQuote || containsdelimiter || containsLinebreak || this.options.quoted || (this.options.quotedString && typeof line[i] === 'string');\r\n        if (shouldQuote && containsEscape) {\r\n          regexp = escape === '\\\\' ? new RegExp(escape + escape, 'g') : new RegExp(escape, 'g');\r\n          field = field.replace(regexp, escape + escape);\r\n        }\r\n        if (containsQuote) {\r\n          regexp = new RegExp(quote, 'g');\r\n          field = field.replace(regexp, escape + quote);\r\n        }\r\n        if (shouldQuote) {\r\n          field = quote + field + quote;\r\n        }\r\n        newLine += field;\r\n      } else if (this.options.quotedEmpty || ((this.options.quotedEmpty == null) && line[i] === '' && this.options.quotedString)) {\r\n        newLine += quote + quote;\r\n      }\r\n      if (i !== line.length - 1) {\r\n        newLine += delimiter;\r\n      }\r\n    }\r\n    line = newLine;\r\n  }\r\n  return line;\r\n};\r\n\r\n}).call(this,require('_process'))\r\n\r\n},{\"_process\":91,\"lodash.get\":87,\"stream\":112,\"util\":117}],46:[function(require,module,exports){\r\n(function (Buffer){\r\n// Generated by CoffeeScript 1.12.7\r\nvar StringDecoder, stringify;\r\n\r\nStringDecoder = require('string_decoder').StringDecoder;\r\n\r\nstringify = require('./index');\r\n\r\nmodule.exports = function(records, options) {\r\n  var data, decoder, i, len, record, stringifier;\r\n  if (options == null) {\r\n    options = {};\r\n  }\r\n  data = [];\r\n  if (records instanceof Buffer) {\r\n    decoder = new StringDecoder();\r\n    records = decoder.write(records);\r\n  }\r\n  stringifier = new stringify.Stringifier(options);\r\n  stringifier.push = function(record) {\r\n    if (record) {\r\n      return data.push(record.toString());\r\n    }\r\n  };\r\n  for (i = 0, len = records.length; i < len; i++) {\r\n    record = records[i];\r\n    stringifier.write(record);\r\n  }\r\n  stringifier.end();\r\n  return data.join('');\r\n};\r\n\r\n}).call(this,require(\"buffer\").Buffer)\r\n\r\n},{\"./index\":45,\"buffer\":41,\"string_decoder\":113}],47:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nvar objectCreate = Object.create || objectCreatePolyfill\r\nvar objectKeys = Object.keys || objectKeysPolyfill\r\nvar bind = Function.prototype.bind || functionBindPolyfill\r\n\r\nfunction EventEmitter() {\r\n  if (!this._events || !Object.prototype.hasOwnProperty.call(this, '_events')) {\r\n    this._events = objectCreate(null);\r\n    this._eventsCount = 0;\r\n  }\r\n\r\n  this._maxListeners = this._maxListeners || undefined;\r\n}\r\nmodule.exports = EventEmitter;\r\n\r\n// Backwards-compat with node 0.10.x\r\nEventEmitter.EventEmitter = EventEmitter;\r\n\r\nEventEmitter.prototype._events = undefined;\r\nEventEmitter.prototype._maxListeners = undefined;\r\n\r\n// By default EventEmitters will print a warning if more than 10 listeners are\r\n// added to it. This is a useful default which helps finding memory leaks.\r\nvar defaultMaxListeners = 10;\r\n\r\nvar hasDefineProperty;\r\ntry {\r\n  var o = {};\r\n  if (Object.defineProperty) Object.defineProperty(o, 'x', { value: 0 });\r\n  hasDefineProperty = o.x === 0;\r\n} catch (err) { hasDefineProperty = false }\r\nif (hasDefineProperty) {\r\n  Object.defineProperty(EventEmitter, 'defaultMaxListeners', {\r\n    enumerable: true,\r\n    get: function() {\r\n      return defaultMaxListeners;\r\n    },\r\n    set: function(arg) {\r\n      // check whether the input is a positive number (whose value is zero or\r\n      // greater and not a NaN).\r\n      if (typeof arg !== 'number' || arg < 0 || arg !== arg)\r\n        throw new TypeError('\"defaultMaxListeners\" must be a positive number');\r\n      defaultMaxListeners = arg;\r\n    }\r\n  });\r\n} else {\r\n  EventEmitter.defaultMaxListeners = defaultMaxListeners;\r\n}\r\n\r\n// Obviously not all Emitters should be limited to 10. This function allows\r\n// that to be increased. Set to zero for unlimited.\r\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\r\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\r\n    throw new TypeError('\"n\" argument must be a positive number');\r\n  this._maxListeners = n;\r\n  return this;\r\n};\r\n\r\nfunction $getMaxListeners(that) {\r\n  if (that._maxListeners === undefined)\r\n    return EventEmitter.defaultMaxListeners;\r\n  return that._maxListeners;\r\n}\r\n\r\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\r\n  return $getMaxListeners(this);\r\n};\r\n\r\n// These standalone emit* functions are used to optimize calling of event\r\n// handlers for fast cases because emit() itself often has a variable number of\r\n// arguments and can be deoptimized because of that. These functions always have\r\n// the same number of arguments and thus do not get deoptimized, so the code\r\n// inside them can execute faster.\r\nfunction emitNone(handler, isFn, self) {\r\n  if (isFn)\r\n    handler.call(self);\r\n  else {\r\n    var len = handler.length;\r\n    var listeners = arrayClone(handler, len);\r\n    for (var i = 0; i < len; ++i)\r\n      listeners[i].call(self);\r\n  }\r\n}\r\nfunction emitOne(handler, isFn, self, arg1) {\r\n  if (isFn)\r\n    handler.call(self, arg1);\r\n  else {\r\n    var len = handler.length;\r\n    var listeners = arrayClone(handler, len);\r\n    for (var i = 0; i < len; ++i)\r\n      listeners[i].call(self, arg1);\r\n  }\r\n}\r\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\r\n  if (isFn)\r\n    handler.call(self, arg1, arg2);\r\n  else {\r\n    var len = handler.length;\r\n    var listeners = arrayClone(handler, len);\r\n    for (var i = 0; i < len; ++i)\r\n      listeners[i].call(self, arg1, arg2);\r\n  }\r\n}\r\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\r\n  if (isFn)\r\n    handler.call(self, arg1, arg2, arg3);\r\n  else {\r\n    var len = handler.length;\r\n    var listeners = arrayClone(handler, len);\r\n    for (var i = 0; i < len; ++i)\r\n      listeners[i].call(self, arg1, arg2, arg3);\r\n  }\r\n}\r\n\r\nfunction emitMany(handler, isFn, self, args) {\r\n  if (isFn)\r\n    handler.apply(self, args);\r\n  else {\r\n    var len = handler.length;\r\n    var listeners = arrayClone(handler, len);\r\n    for (var i = 0; i < len; ++i)\r\n      listeners[i].apply(self, args);\r\n  }\r\n}\r\n\r\nEventEmitter.prototype.emit = function emit(type) {\r\n  var er, handler, len, args, i, events;\r\n  var doError = (type === 'error');\r\n\r\n  events = this._events;\r\n  if (events)\r\n    doError = (doError && events.error == null);\r\n  else if (!doError)\r\n    return false;\r\n\r\n  // If there is no 'error' event listener then throw.\r\n  if (doError) {\r\n    if (arguments.length > 1)\r\n      er = arguments[1];\r\n    if (er instanceof Error) {\r\n      throw er; // Unhandled 'error' event\r\n    } else {\r\n      // At least give some kind of context to the user\r\n      var err = new Error('Unhandled \"error\" event. (' + er + ')');\r\n      err.context = er;\r\n      throw err;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  handler = events[type];\r\n\r\n  if (!handler)\r\n    return false;\r\n\r\n  var isFn = typeof handler === 'function';\r\n  len = arguments.length;\r\n  switch (len) {\r\n      // fast cases\r\n    case 1:\r\n      emitNone(handler, isFn, this);\r\n      break;\r\n    case 2:\r\n      emitOne(handler, isFn, this, arguments[1]);\r\n      break;\r\n    case 3:\r\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\r\n      break;\r\n    case 4:\r\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\r\n      break;\r\n      // slower\r\n    default:\r\n      args = new Array(len - 1);\r\n      for (i = 1; i < len; i++)\r\n        args[i - 1] = arguments[i];\r\n      emitMany(handler, isFn, this, args);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction _addListener(target, type, listener, prepend) {\r\n  var m;\r\n  var events;\r\n  var existing;\r\n\r\n  if (typeof listener !== 'function')\r\n    throw new TypeError('\"listener\" argument must be a function');\r\n\r\n  events = target._events;\r\n  if (!events) {\r\n    events = target._events = objectCreate(null);\r\n    target._eventsCount = 0;\r\n  } else {\r\n    // To avoid recursion in the case that type === \"newListener\"! Before\r\n    // adding it to the listeners, first emit \"newListener\".\r\n    if (events.newListener) {\r\n      target.emit('newListener', type,\r\n          listener.listener ? listener.listener : listener);\r\n\r\n      // Re-assign `events` because a newListener handler could have caused the\r\n      // this._events to be assigned to a new object\r\n      events = target._events;\r\n    }\r\n    existing = events[type];\r\n  }\r\n\r\n  if (!existing) {\r\n    // Optimize the case of one listener. Don't need the extra array object.\r\n    existing = events[type] = listener;\r\n    ++target._eventsCount;\r\n  } else {\r\n    if (typeof existing === 'function') {\r\n      // Adding the second element, need to change to array.\r\n      existing = events[type] =\r\n          prepend ? [listener, existing] : [existing, listener];\r\n    } else {\r\n      // If we've already got an array, just append.\r\n      if (prepend) {\r\n        existing.unshift(listener);\r\n      } else {\r\n        existing.push(listener);\r\n      }\r\n    }\r\n\r\n    // Check for listener leak\r\n    if (!existing.warned) {\r\n      m = $getMaxListeners(target);\r\n      if (m && m > 0 && existing.length > m) {\r\n        existing.warned = true;\r\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\r\n            existing.length + ' \"' + String(type) + '\" listeners ' +\r\n            'added. Use emitter.setMaxListeners() to ' +\r\n            'increase limit.');\r\n        w.name = 'MaxListenersExceededWarning';\r\n        w.emitter = target;\r\n        w.type = type;\r\n        w.count = existing.length;\r\n        if (typeof console === 'object' && console.warn) {\r\n          console.warn('%s: %s', w.name, w.message);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return target;\r\n}\r\n\r\nEventEmitter.prototype.addListener = function addListener(type, listener) {\r\n  return _addListener(this, type, listener, false);\r\n};\r\n\r\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\r\n\r\nEventEmitter.prototype.prependListener =\r\n    function prependListener(type, listener) {\r\n      return _addListener(this, type, listener, true);\r\n    };\r\n\r\nfunction onceWrapper() {\r\n  if (!this.fired) {\r\n    this.target.removeListener(this.type, this.wrapFn);\r\n    this.fired = true;\r\n    switch (arguments.length) {\r\n      case 0:\r\n        return this.listener.call(this.target);\r\n      case 1:\r\n        return this.listener.call(this.target, arguments[0]);\r\n      case 2:\r\n        return this.listener.call(this.target, arguments[0], arguments[1]);\r\n      case 3:\r\n        return this.listener.call(this.target, arguments[0], arguments[1],\r\n            arguments[2]);\r\n      default:\r\n        var args = new Array(arguments.length);\r\n        for (var i = 0; i < args.length; ++i)\r\n          args[i] = arguments[i];\r\n        this.listener.apply(this.target, args);\r\n    }\r\n  }\r\n}\r\n\r\nfunction _onceWrap(target, type, listener) {\r\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\r\n  var wrapped = bind.call(onceWrapper, state);\r\n  wrapped.listener = listener;\r\n  state.wrapFn = wrapped;\r\n  return wrapped;\r\n}\r\n\r\nEventEmitter.prototype.once = function once(type, listener) {\r\n  if (typeof listener !== 'function')\r\n    throw new TypeError('\"listener\" argument must be a function');\r\n  this.on(type, _onceWrap(this, type, listener));\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.prependOnceListener =\r\n    function prependOnceListener(type, listener) {\r\n      if (typeof listener !== 'function')\r\n        throw new TypeError('\"listener\" argument must be a function');\r\n      this.prependListener(type, _onceWrap(this, type, listener));\r\n      return this;\r\n    };\r\n\r\n// Emits a 'removeListener' event if and only if the listener was removed.\r\nEventEmitter.prototype.removeListener =\r\n    function removeListener(type, listener) {\r\n      var list, events, position, i, originalListener;\r\n\r\n      if (typeof listener !== 'function')\r\n        throw new TypeError('\"listener\" argument must be a function');\r\n\r\n      events = this._events;\r\n      if (!events)\r\n        return this;\r\n\r\n      list = events[type];\r\n      if (!list)\r\n        return this;\r\n\r\n      if (list === listener || list.listener === listener) {\r\n        if (--this._eventsCount === 0)\r\n          this._events = objectCreate(null);\r\n        else {\r\n          delete events[type];\r\n          if (events.removeListener)\r\n            this.emit('removeListener', type, list.listener || listener);\r\n        }\r\n      } else if (typeof list !== 'function') {\r\n        position = -1;\r\n\r\n        for (i = list.length - 1; i >= 0; i--) {\r\n          if (list[i] === listener || list[i].listener === listener) {\r\n            originalListener = list[i].listener;\r\n            position = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (position < 0)\r\n          return this;\r\n\r\n        if (position === 0)\r\n          list.shift();\r\n        else\r\n          spliceOne(list, position);\r\n\r\n        if (list.length === 1)\r\n          events[type] = list[0];\r\n\r\n        if (events.removeListener)\r\n          this.emit('removeListener', type, originalListener || listener);\r\n      }\r\n\r\n      return this;\r\n    };\r\n\r\nEventEmitter.prototype.removeAllListeners =\r\n    function removeAllListeners(type) {\r\n      var listeners, events, i;\r\n\r\n      events = this._events;\r\n      if (!events)\r\n        return this;\r\n\r\n      // not listening for removeListener, no need to emit\r\n      if (!events.removeListener) {\r\n        if (arguments.length === 0) {\r\n          this._events = objectCreate(null);\r\n          this._eventsCount = 0;\r\n        } else if (events[type]) {\r\n          if (--this._eventsCount === 0)\r\n            this._events = objectCreate(null);\r\n          else\r\n            delete events[type];\r\n        }\r\n        return this;\r\n      }\r\n\r\n      // emit removeListener for all listeners on all events\r\n      if (arguments.length === 0) {\r\n        var keys = objectKeys(events);\r\n        var key;\r\n        for (i = 0; i < keys.length; ++i) {\r\n          key = keys[i];\r\n          if (key === 'removeListener') continue;\r\n          this.removeAllListeners(key);\r\n        }\r\n        this.removeAllListeners('removeListener');\r\n        this._events = objectCreate(null);\r\n        this._eventsCount = 0;\r\n        return this;\r\n      }\r\n\r\n      listeners = events[type];\r\n\r\n      if (typeof listeners === 'function') {\r\n        this.removeListener(type, listeners);\r\n      } else if (listeners) {\r\n        // LIFO order\r\n        for (i = listeners.length - 1; i >= 0; i--) {\r\n          this.removeListener(type, listeners[i]);\r\n        }\r\n      }\r\n\r\n      return this;\r\n    };\r\n\r\nfunction _listeners(target, type, unwrap) {\r\n  var events = target._events;\r\n\r\n  if (!events)\r\n    return [];\r\n\r\n  var evlistener = events[type];\r\n  if (!evlistener)\r\n    return [];\r\n\r\n  if (typeof evlistener === 'function')\r\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\r\n\r\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\r\n}\r\n\r\nEventEmitter.prototype.listeners = function listeners(type) {\r\n  return _listeners(this, type, true);\r\n};\r\n\r\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\r\n  return _listeners(this, type, false);\r\n};\r\n\r\nEventEmitter.listenerCount = function(emitter, type) {\r\n  if (typeof emitter.listenerCount === 'function') {\r\n    return emitter.listenerCount(type);\r\n  } else {\r\n    return listenerCount.call(emitter, type);\r\n  }\r\n};\r\n\r\nEventEmitter.prototype.listenerCount = listenerCount;\r\nfunction listenerCount(type) {\r\n  var events = this._events;\r\n\r\n  if (events) {\r\n    var evlistener = events[type];\r\n\r\n    if (typeof evlistener === 'function') {\r\n      return 1;\r\n    } else if (evlistener) {\r\n      return evlistener.length;\r\n    }\r\n  }\r\n\r\n  return 0;\r\n}\r\n\r\nEventEmitter.prototype.eventNames = function eventNames() {\r\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\r\n};\r\n\r\n// About 1.5x faster than the two-arg version of Array#splice().\r\nfunction spliceOne(list, index) {\r\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\r\n    list[i] = list[k];\r\n  list.pop();\r\n}\r\n\r\nfunction arrayClone(arr, n) {\r\n  var copy = new Array(n);\r\n  for (var i = 0; i < n; ++i)\r\n    copy[i] = arr[i];\r\n  return copy;\r\n}\r\n\r\nfunction unwrapListeners(arr) {\r\n  var ret = new Array(arr.length);\r\n  for (var i = 0; i < ret.length; ++i) {\r\n    ret[i] = arr[i].listener || arr[i];\r\n  }\r\n  return ret;\r\n}\r\n\r\nfunction objectCreatePolyfill(proto) {\r\n  var F = function() {};\r\n  F.prototype = proto;\r\n  return new F;\r\n}\r\nfunction objectKeysPolyfill(obj) {\r\n  var keys = [];\r\n  for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k)) {\r\n    keys.push(k);\r\n  }\r\n  return k;\r\n}\r\nfunction functionBindPolyfill(context) {\r\n  var fn = this;\r\n  return function () {\r\n    return fn.apply(context, arguments);\r\n  };\r\n}\r\n\r\n},{}],48:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar constants = require('./util/constants'),\r\n    Logging   = require('./mixins/logging');\r\n\r\nvar Faye = {\r\n  VERSION:    constants.VERSION,\r\n\r\n  Client:     require('./protocol/client'),\r\n  Scheduler:  require('./protocol/scheduler')\r\n};\r\n\r\nLogging.wrapper = Faye;\r\n\r\nmodule.exports = Faye;\r\n\r\n},{\"./mixins/logging\":50,\"./protocol/client\":54,\"./protocol/scheduler\":60,\"./util/constants\":72}],49:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar Promise   = require('../util/promise');\r\n\r\nmodule.exports = {\r\n  then: function(callback, errback) {\r\n    var self = this;\r\n    if (!this._promise)\r\n      this._promise = new Promise(function(resolve, reject) {\r\n        self._resolve = resolve;\r\n        self._reject  = reject;\r\n      });\r\n\r\n    if (arguments.length === 0)\r\n      return this._promise;\r\n    else\r\n      return this._promise.then(callback, errback);\r\n  },\r\n\r\n  callback: function(callback, context) {\r\n    return this.then(function(value) { callback.call(context, value) });\r\n  },\r\n\r\n  errback: function(callback, context) {\r\n    return this.then(null, function(reason) { callback.call(context, reason) });\r\n  },\r\n\r\n  timeout: function(seconds, message) {\r\n    this.then();\r\n    var self = this;\r\n    this._timer = global.setTimeout(function() {\r\n      self._reject(message);\r\n    }, seconds * 1000);\r\n  },\r\n\r\n  setDeferredStatus: function(status, value) {\r\n    if (this._timer) global.clearTimeout(this._timer);\r\n\r\n    this.then();\r\n\r\n    if (status === 'succeeded')\r\n      this._resolve(value);\r\n    else if (status === 'failed')\r\n      this._reject(value);\r\n    else\r\n      delete this._promise;\r\n  }\r\n};\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"../util/promise\":77}],50:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar toJSON = require('../util/to_json');\r\n\r\nvar Logging = {\r\n  LOG_LEVELS: {\r\n    fatal:  4,\r\n    error:  3,\r\n    warn:   2,\r\n    info:   1,\r\n    debug:  0\r\n  },\r\n\r\n  writeLog: function(messageArgs, level) {\r\n    var logger = Logging.logger || (Logging.wrapper || Logging).logger;\r\n    if (!logger) return;\r\n\r\n    var args   = Array.prototype.slice.apply(messageArgs),\r\n        banner = '[Faye',\r\n        klass  = this.className,\r\n\r\n        message = args.shift().replace(/\\?/g, function() {\r\n          try {\r\n            return toJSON(args.shift());\r\n          } catch (error) {\r\n            return '[Object]';\r\n          }\r\n        });\r\n\r\n    if (klass) banner += '.' + klass;\r\n    banner += '] ';\r\n\r\n    if (typeof logger[level] === 'function')\r\n      logger[level](banner + message);\r\n    else if (typeof logger === 'function')\r\n      logger(banner + message);\r\n  }\r\n};\r\n\r\nfor (var key in Logging.LOG_LEVELS)\r\n  (function(level) {\r\n    Logging[level] = function() {\r\n      this.writeLog(arguments, level);\r\n    };\r\n  })(key);\r\n\r\nmodule.exports = Logging;\r\n\r\n},{\"../util/to_json\":79}],51:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar extend       = require('../util/extend'),\r\n    EventEmitter = require('../util/event_emitter');\r\n\r\nvar Publisher = {\r\n  countListeners: function(eventType) {\r\n    return this.listeners(eventType).length;\r\n  },\r\n\r\n  bind: function(eventType, listener, context) {\r\n    var slice   = Array.prototype.slice,\r\n        handler = function() { listener.apply(context, slice.call(arguments)) };\r\n\r\n    this._listeners = this._listeners || [];\r\n    this._listeners.push([eventType, listener, context, handler]);\r\n    return this.on(eventType, handler);\r\n  },\r\n\r\n  unbind: function(eventType, listener, context) {\r\n    this._listeners = this._listeners || [];\r\n    var n = this._listeners.length, tuple;\r\n\r\n    while (n--) {\r\n      tuple = this._listeners[n];\r\n      if (tuple[0] !== eventType) continue;\r\n      if (listener && (tuple[1] !== listener || tuple[2] !== context)) continue;\r\n      this._listeners.splice(n, 1);\r\n      this.removeListener(eventType, tuple[3]);\r\n    }\r\n  }\r\n};\r\n\r\nextend(Publisher, EventEmitter.prototype);\r\nPublisher.trigger = Publisher.emit;\r\n\r\nmodule.exports = Publisher;\r\n\r\n},{\"../util/event_emitter\":75,\"../util/extend\":76}],52:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nmodule.exports = {\r\n  addTimeout: function(name, delay, callback, context) {\r\n    this._timeouts = this._timeouts || {};\r\n    if (this._timeouts.hasOwnProperty(name)) return;\r\n    var self = this;\r\n    this._timeouts[name] = global.setTimeout(function() {\r\n      delete self._timeouts[name];\r\n      callback.call(context);\r\n    }, 1000 * delay);\r\n  },\r\n\r\n  removeTimeout: function(name) {\r\n    this._timeouts = this._timeouts || {};\r\n    var timeout = this._timeouts[name];\r\n    if (!timeout) return;\r\n    global.clearTimeout(timeout);\r\n    delete this._timeouts[name];\r\n  },\r\n\r\n  removeAllTimeouts: function() {\r\n    this._timeouts = this._timeouts || {};\r\n    for (var name in this._timeouts) this.removeTimeout(name);\r\n  }\r\n};\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{}],53:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar Class     = require('../util/class'),\r\n    extend    = require('../util/extend'),\r\n    Publisher = require('../mixins/publisher'),\r\n    Grammar   = require('./grammar');\r\n\r\nvar Channel = Class({\r\n  initialize: function(name) {\r\n    this.id = this.name = name;\r\n  },\r\n\r\n  push: function(message) {\r\n    this.trigger('message', message);\r\n  },\r\n\r\n  isUnused: function() {\r\n    return this.countListeners('message') === 0;\r\n  }\r\n});\r\n\r\nextend(Channel.prototype, Publisher);\r\n\r\nextend(Channel, {\r\n  HANDSHAKE:    '/meta/handshake',\r\n  CONNECT:      '/meta/connect',\r\n  SUBSCRIBE:    '/meta/subscribe',\r\n  UNSUBSCRIBE:  '/meta/unsubscribe',\r\n  DISCONNECT:   '/meta/disconnect',\r\n\r\n  META:         'meta',\r\n  SERVICE:      'service',\r\n\r\n  expand: function(name) {\r\n    var segments = this.parse(name),\r\n        channels = ['/**', name];\r\n\r\n    var copy = segments.slice();\r\n    copy[copy.length - 1] = '*';\r\n    channels.push(this.unparse(copy));\r\n\r\n    for (var i = 1, n = segments.length; i < n; i++) {\r\n      copy = segments.slice(0, i);\r\n      copy.push('**');\r\n      channels.push(this.unparse(copy));\r\n    }\r\n\r\n    return channels;\r\n  },\r\n\r\n  isValid: function(name) {\r\n    return Grammar.CHANNEL_NAME.test(name) ||\r\n           Grammar.CHANNEL_PATTERN.test(name);\r\n  },\r\n\r\n  parse: function(name) {\r\n    if (!this.isValid(name)) return null;\r\n    return name.split('/').slice(1);\r\n  },\r\n\r\n  unparse: function(segments) {\r\n    return '/' + segments.join('/');\r\n  },\r\n\r\n  isMeta: function(name) {\r\n    var segments = this.parse(name);\r\n    return segments ? (segments[0] === this.META) : null;\r\n  },\r\n\r\n  isService: function(name) {\r\n    var segments = this.parse(name);\r\n    return segments ? (segments[0] === this.SERVICE) : null;\r\n  },\r\n\r\n  isSubscribable: function(name) {\r\n    if (!this.isValid(name)) return null;\r\n    return !this.isMeta(name) && !this.isService(name);\r\n  },\r\n\r\n  Set: Class({\r\n    initialize: function() {\r\n      this._channels = {};\r\n    },\r\n\r\n    getKeys: function() {\r\n      var keys = [];\r\n      for (var key in this._channels) keys.push(key);\r\n      return keys;\r\n    },\r\n\r\n    remove: function(name) {\r\n      delete this._channels[name];\r\n    },\r\n\r\n    hasSubscription: function(name) {\r\n      return this._channels.hasOwnProperty(name);\r\n    },\r\n\r\n    subscribe: function(names, subscription) {\r\n      var name;\r\n      for (var i = 0, n = names.length; i < n; i++) {\r\n        name = names[i];\r\n        var channel = this._channels[name] = this._channels[name] || new Channel(name);\r\n        channel.bind('message', subscription);\r\n      }\r\n    },\r\n\r\n    unsubscribe: function(name, subscription) {\r\n      var channel = this._channels[name];\r\n      if (!channel) return false;\r\n      channel.unbind('message', subscription);\r\n\r\n      if (channel.isUnused()) {\r\n        this.remove(name);\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    distributeMessage: function(message) {\r\n      var channels = Channel.expand(message.channel);\r\n\r\n      for (var i = 0, n = channels.length; i < n; i++) {\r\n        var channel = this._channels[channels[i]];\r\n        if (channel) channel.trigger('message', message);\r\n      }\r\n    }\r\n  })\r\n});\r\n\r\nmodule.exports = Channel;\r\n\r\n},{\"../mixins/publisher\":51,\"../util/class\":71,\"../util/extend\":76,\"./grammar\":58}],54:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar asap            = require('asap'),\r\n    Class           = require('../util/class'),\r\n    Promise         = require('../util/promise'),\r\n    URI             = require('../util/uri'),\r\n    array           = require('../util/array'),\r\n    browser         = require('../util/browser'),\r\n    constants       = require('../util/constants'),\r\n    extend          = require('../util/extend'),\r\n    validateOptions = require('../util/validate_options'),\r\n    Deferrable      = require('../mixins/deferrable'),\r\n    Logging         = require('../mixins/logging'),\r\n    Publisher       = require('../mixins/publisher'),\r\n    Channel         = require('./channel'),\r\n    Dispatcher      = require('./dispatcher'),\r\n    Error           = require('./error'),\r\n    Extensible      = require('./extensible'),\r\n    Publication     = require('./publication'),\r\n    Subscription    = require('./subscription');\r\n\r\nvar Client = Class({ className: 'Client',\r\n  UNCONNECTED:        1,\r\n  CONNECTING:         2,\r\n  CONNECTED:          3,\r\n  DISCONNECTED:       4,\r\n\r\n  HANDSHAKE:          'handshake',\r\n  RETRY:              'retry',\r\n  NONE:               'none',\r\n\r\n  CONNECTION_TIMEOUT: 60,\r\n\r\n  DEFAULT_ENDPOINT:   '/bayeux',\r\n  INTERVAL:           0,\r\n\r\n  initialize: function(endpoint, options) {\r\n    this.info('New client created for ?', endpoint);\r\n    options = options || {};\r\n\r\n    validateOptions(options, ['interval', 'timeout', 'endpoints', 'proxy', 'retry', 'scheduler', 'websocketExtensions', 'tls', 'ca']);\r\n\r\n    this._channels   = new Channel.Set();\r\n    this._dispatcher = Dispatcher.create(this, endpoint || this.DEFAULT_ENDPOINT, options);\r\n\r\n    this._messageId = 0;\r\n    this._state     = this.UNCONNECTED;\r\n\r\n    this._responseCallbacks = {};\r\n\r\n    this._advice = {\r\n      reconnect: this.RETRY,\r\n      interval:  1000 * (options.interval || this.INTERVAL),\r\n      timeout:   1000 * (options.timeout  || this.CONNECTION_TIMEOUT)\r\n    };\r\n    this._dispatcher.timeout = this._advice.timeout / 1000;\r\n\r\n    this._dispatcher.bind('message', this._receiveMessage, this);\r\n\r\n    if (browser.Event && global.onbeforeunload !== undefined)\r\n      browser.Event.on(global, 'beforeunload', function() {\r\n        if (array.indexOf(this._dispatcher._disabled, 'autodisconnect') < 0)\r\n          this.disconnect();\r\n      }, this);\r\n  },\r\n\r\n  addWebsocketExtension: function(extension) {\r\n    return this._dispatcher.addWebsocketExtension(extension);\r\n  },\r\n\r\n  disable: function(feature) {\r\n    return this._dispatcher.disable(feature);\r\n  },\r\n\r\n  setHeader: function(name, value) {\r\n    return this._dispatcher.setHeader(name, value);\r\n  },\r\n\r\n  // Request\r\n  // MUST include:  * channel\r\n  //                * version\r\n  //                * supportedConnectionTypes\r\n  // MAY include:   * minimumVersion\r\n  //                * ext\r\n  //                * id\r\n  //\r\n  // Success Response                             Failed Response\r\n  // MUST include:  * channel                     MUST include:  * channel\r\n  //                * version                                    * successful\r\n  //                * supportedConnectionTypes                   * error\r\n  //                * clientId                    MAY include:   * supportedConnectionTypes\r\n  //                * successful                                 * advice\r\n  // MAY include:   * minimumVersion                             * version\r\n  //                * advice                                     * minimumVersion\r\n  //                * ext                                        * ext\r\n  //                * id                                         * id\r\n  //                * authSuccessful\r\n  handshake: function(callback, context) {\r\n    if (this._advice.reconnect === this.NONE) return;\r\n    if (this._state !== this.UNCONNECTED) return;\r\n\r\n    this._state = this.CONNECTING;\r\n    var self = this;\r\n\r\n    this.info('Initiating handshake with ?', URI.stringify(this._dispatcher.endpoint));\r\n    this._dispatcher.selectTransport(constants.MANDATORY_CONNECTION_TYPES);\r\n\r\n    this._sendMessage({\r\n      channel:                  Channel.HANDSHAKE,\r\n      version:                  constants.BAYEUX_VERSION,\r\n      supportedConnectionTypes: this._dispatcher.getConnectionTypes()\r\n\r\n    }, {}, function(response) {\r\n\r\n      if (response.successful) {\r\n        this._state = this.CONNECTED;\r\n        this._dispatcher.clientId  = response.clientId;\r\n\r\n        this._dispatcher.selectTransport(response.supportedConnectionTypes);\r\n\r\n        this.info('Handshake successful: ?', this._dispatcher.clientId);\r\n\r\n        this.subscribe(this._channels.getKeys(), true);\r\n        if (callback) asap(function() { callback.call(context) });\r\n\r\n      } else {\r\n        this.info('Handshake unsuccessful');\r\n        global.setTimeout(function() { self.handshake(callback, context) }, this._dispatcher.retry * 1000);\r\n        this._state = this.UNCONNECTED;\r\n      }\r\n    }, this);\r\n  },\r\n\r\n  // Request                              Response\r\n  // MUST include:  * channel             MUST include:  * channel\r\n  //                * clientId                           * successful\r\n  //                * connectionType                     * clientId\r\n  // MAY include:   * ext                 MAY include:   * error\r\n  //                * id                                 * advice\r\n  //                                                     * ext\r\n  //                                                     * id\r\n  //                                                     * timestamp\r\n  connect: function(callback, context) {\r\n    if (this._advice.reconnect === this.NONE) return;\r\n    if (this._state === this.DISCONNECTED) return;\r\n\r\n    if (this._state === this.UNCONNECTED)\r\n      return this.handshake(function() { this.connect(callback, context) }, this);\r\n\r\n    this.callback(callback, context);\r\n    if (this._state !== this.CONNECTED) return;\r\n\r\n    this.info('Calling deferred actions for ?', this._dispatcher.clientId);\r\n    this.setDeferredStatus('succeeded');\r\n    this.setDeferredStatus('unknown');\r\n\r\n    if (this._connectRequest) return;\r\n    this._connectRequest = true;\r\n\r\n    this.info('Initiating connection for ?', this._dispatcher.clientId);\r\n\r\n    this._sendMessage({\r\n      channel:        Channel.CONNECT,\r\n      clientId:       this._dispatcher.clientId,\r\n      connectionType: this._dispatcher.connectionType\r\n\r\n    }, {}, this._cycleConnection, this);\r\n  },\r\n\r\n  // Request                              Response\r\n  // MUST include:  * channel             MUST include:  * channel\r\n  //                * clientId                           * successful\r\n  // MAY include:   * ext                                * clientId\r\n  //                * id                  MAY include:   * error\r\n  //                                                     * ext\r\n  //                                                     * id\r\n  disconnect: function() {\r\n    if (this._state !== this.CONNECTED) return;\r\n    this._state = this.DISCONNECTED;\r\n\r\n    this.info('Disconnecting ?', this._dispatcher.clientId);\r\n    var promise = new Publication();\r\n\r\n    this._sendMessage({\r\n      channel:  Channel.DISCONNECT,\r\n      clientId: this._dispatcher.clientId\r\n\r\n    }, {}, function(response) {\r\n      if (response.successful) {\r\n        this._dispatcher.close();\r\n        promise.setDeferredStatus('succeeded');\r\n      } else {\r\n        promise.setDeferredStatus('failed', Error.parse(response.error));\r\n      }\r\n    }, this);\r\n\r\n    this.info('Clearing channel listeners for ?', this._dispatcher.clientId);\r\n    this._channels = new Channel.Set();\r\n\r\n    return promise;\r\n  },\r\n\r\n  // Request                              Response\r\n  // MUST include:  * channel             MUST include:  * channel\r\n  //                * clientId                           * successful\r\n  //                * subscription                       * clientId\r\n  // MAY include:   * ext                                * subscription\r\n  //                * id                  MAY include:   * error\r\n  //                                                     * advice\r\n  //                                                     * ext\r\n  //                                                     * id\r\n  //                                                     * timestamp\r\n  subscribe: function(channel, callback, context) {\r\n    if (channel instanceof Array)\r\n      return array.map(channel, function(c) {\r\n        return this.subscribe(c, callback, context);\r\n      }, this);\r\n\r\n    var subscription = new Subscription(this, channel, callback, context),\r\n        force        = (callback === true),\r\n        hasSubscribe = this._channels.hasSubscription(channel);\r\n\r\n    if (hasSubscribe && !force) {\r\n      this._channels.subscribe([channel], subscription);\r\n      subscription.setDeferredStatus('succeeded');\r\n      return subscription;\r\n    }\r\n\r\n    this.connect(function() {\r\n      this.info('Client ? attempting to subscribe to ?', this._dispatcher.clientId, channel);\r\n      if (!force) this._channels.subscribe([channel], subscription);\r\n\r\n      this._sendMessage({\r\n        channel:      Channel.SUBSCRIBE,\r\n        clientId:     this._dispatcher.clientId,\r\n        subscription: channel\r\n\r\n      }, {}, function(response) {\r\n        if (!response.successful) {\r\n          subscription.setDeferredStatus('failed', Error.parse(response.error));\r\n          return this._channels.unsubscribe(channel, subscription);\r\n        }\r\n\r\n        var channels = [].concat(response.subscription);\r\n        this.info('Subscription acknowledged for ? to ?', this._dispatcher.clientId, channels);\r\n        subscription.setDeferredStatus('succeeded');\r\n      }, this);\r\n    }, this);\r\n\r\n    return subscription;\r\n  },\r\n\r\n  // Request                              Response\r\n  // MUST include:  * channel             MUST include:  * channel\r\n  //                * clientId                           * successful\r\n  //                * subscription                       * clientId\r\n  // MAY include:   * ext                                * subscription\r\n  //                * id                  MAY include:   * error\r\n  //                                                     * advice\r\n  //                                                     * ext\r\n  //                                                     * id\r\n  //                                                     * timestamp\r\n  unsubscribe: function(channel, subscription) {\r\n    if (channel instanceof Array)\r\n      return array.map(channel, function(c) {\r\n        return this.unsubscribe(c, subscription);\r\n      }, this);\r\n\r\n    var dead = this._channels.unsubscribe(channel, subscription);\r\n    if (!dead) return;\r\n\r\n    this.connect(function() {\r\n      this.info('Client ? attempting to unsubscribe from ?', this._dispatcher.clientId, channel);\r\n\r\n      this._sendMessage({\r\n        channel:      Channel.UNSUBSCRIBE,\r\n        clientId:     this._dispatcher.clientId,\r\n        subscription: channel\r\n\r\n      }, {}, function(response) {\r\n        if (!response.successful) return;\r\n\r\n        var channels = [].concat(response.subscription);\r\n        this.info('Unsubscription acknowledged for ? from ?', this._dispatcher.clientId, channels);\r\n      }, this);\r\n    }, this);\r\n  },\r\n\r\n  // Request                              Response\r\n  // MUST include:  * channel             MUST include:  * channel\r\n  //                * data                               * successful\r\n  // MAY include:   * clientId            MAY include:   * id\r\n  //                * id                                 * error\r\n  //                * ext                                * ext\r\n  publish: function(channel, data, options) {\r\n    validateOptions(options || {}, ['attempts', 'deadline']);\r\n    var publication = new Publication();\r\n\r\n    this.connect(function() {\r\n      this.info('Client ? queueing published message to ?: ?', this._dispatcher.clientId, channel, data);\r\n\r\n      this._sendMessage({\r\n        channel:  channel,\r\n        data:     data,\r\n        clientId: this._dispatcher.clientId\r\n\r\n      }, options, function(response) {\r\n        if (response.successful)\r\n          publication.setDeferredStatus('succeeded');\r\n        else\r\n          publication.setDeferredStatus('failed', Error.parse(response.error));\r\n      }, this);\r\n    }, this);\r\n\r\n    return publication;\r\n  },\r\n\r\n  _sendMessage: function(message, options, callback, context) {\r\n    message.id = this._generateMessageId();\r\n\r\n    var timeout = this._advice.timeout\r\n                ? 1.2 * this._advice.timeout / 1000\r\n                : 1.2 * this._dispatcher.retry;\r\n\r\n    this.pipeThroughExtensions('outgoing', message, null, function(message) {\r\n      if (!message) return;\r\n      if (callback) this._responseCallbacks[message.id] = [callback, context];\r\n      this._dispatcher.sendMessage(message, timeout, options || {});\r\n    }, this);\r\n  },\r\n\r\n  _generateMessageId: function() {\r\n    this._messageId += 1;\r\n    if (this._messageId >= Math.pow(2,32)) this._messageId = 0;\r\n    return this._messageId.toString(36);\r\n  },\r\n\r\n  _receiveMessage: function(message) {\r\n    var id = message.id, callback;\r\n\r\n    if (message.successful !== undefined) {\r\n      callback = this._responseCallbacks[id];\r\n      delete this._responseCallbacks[id];\r\n    }\r\n\r\n    this.pipeThroughExtensions('incoming', message, null, function(message) {\r\n      if (!message) return;\r\n      if (message.advice) this._handleAdvice(message.advice);\r\n      this._deliverMessage(message);\r\n      if (callback) callback[0].call(callback[1], message);\r\n    }, this);\r\n  },\r\n\r\n  _handleAdvice: function(advice) {\r\n    extend(this._advice, advice);\r\n    this._dispatcher.timeout = this._advice.timeout / 1000;\r\n\r\n    if (this._advice.reconnect === this.HANDSHAKE && this._state !== this.DISCONNECTED) {\r\n      this._state = this.UNCONNECTED;\r\n      this._dispatcher.clientId = null;\r\n      this._cycleConnection();\r\n    }\r\n  },\r\n\r\n  _deliverMessage: function(message) {\r\n    if (!message.channel || message.data === undefined) return;\r\n    this.info('Client ? calling listeners for ? with ?', this._dispatcher.clientId, message.channel, message.data);\r\n    this._channels.distributeMessage(message);\r\n  },\r\n\r\n  _cycleConnection: function() {\r\n    if (this._connectRequest) {\r\n      this._connectRequest = null;\r\n      this.info('Closed connection for ?', this._dispatcher.clientId);\r\n    }\r\n    var self = this;\r\n    global.setTimeout(function() { self.connect() }, this._advice.interval);\r\n  }\r\n});\r\n\r\nextend(Client.prototype, Deferrable);\r\nextend(Client.prototype, Publisher);\r\nextend(Client.prototype, Logging);\r\nextend(Client.prototype, Extensible);\r\n\r\nmodule.exports = Client;\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"../mixins/deferrable\":49,\"../mixins/logging\":50,\"../mixins/publisher\":51,\"../util/array\":69,\"../util/browser\":70,\"../util/class\":71,\"../util/constants\":72,\"../util/extend\":76,\"../util/promise\":77,\"../util/uri\":80,\"../util/validate_options\":81,\"./channel\":53,\"./dispatcher\":55,\"./error\":56,\"./extensible\":57,\"./publication\":59,\"./subscription\":61,\"asap\":37}],55:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar Class     = require('../util/class'),\r\n    URI       = require('../util/uri'),\r\n    cookies   = require('../util/cookies'),\r\n    extend    = require('../util/extend'),\r\n    Logging   = require('../mixins/logging'),\r\n    Publisher = require('../mixins/publisher'),\r\n    Transport = require('../transport'),\r\n    Scheduler = require('./scheduler');\r\n\r\nvar Dispatcher = Class({ className: 'Dispatcher',\r\n  MAX_REQUEST_SIZE: 2048,\r\n  DEFAULT_RETRY:    5,\r\n\r\n  UP:   1,\r\n  DOWN: 2,\r\n\r\n  initialize: function(client, endpoint, options) {\r\n    this._client     = client;\r\n    this.endpoint    = URI.parse(endpoint);\r\n    this._alternates = options.endpoints || {};\r\n\r\n    this.cookies      = cookies.CookieJar && new cookies.CookieJar();\r\n    this._disabled    = [];\r\n    this._envelopes   = {};\r\n    this.headers      = {};\r\n    this.retry        = options.retry || this.DEFAULT_RETRY;\r\n    this._scheduler   = options.scheduler || Scheduler;\r\n    this._state       = 0;\r\n    this.transports   = {};\r\n    this.wsExtensions = [];\r\n\r\n    this.proxy = options.proxy || {};\r\n    if (typeof this._proxy === 'string') this._proxy = {origin: this._proxy};\r\n\r\n    var exts = options.websocketExtensions;\r\n    if (exts) {\r\n      exts = [].concat(exts);\r\n      for (var i = 0, n = exts.length; i < n; i++)\r\n        this.addWebsocketExtension(exts[i]);\r\n    }\r\n\r\n    this.tls = options.tls || {};\r\n    this.tls.ca = this.tls.ca || options.ca;\r\n\r\n    for (var type in this._alternates)\r\n      this._alternates[type] = URI.parse(this._alternates[type]);\r\n\r\n    this.maxRequestSize = this.MAX_REQUEST_SIZE;\r\n  },\r\n\r\n  endpointFor: function(connectionType) {\r\n    return this._alternates[connectionType] || this.endpoint;\r\n  },\r\n\r\n  addWebsocketExtension: function(extension) {\r\n    this.wsExtensions.push(extension);\r\n  },\r\n\r\n  disable: function(feature) {\r\n    this._disabled.push(feature);\r\n  },\r\n\r\n  setHeader: function(name, value) {\r\n    this.headers[name] = value;\r\n  },\r\n\r\n  close: function() {\r\n    var transport = this._transport;\r\n    delete this._transport;\r\n    if (transport) transport.close();\r\n  },\r\n\r\n  getConnectionTypes: function() {\r\n    return Transport.getConnectionTypes();\r\n  },\r\n\r\n  selectTransport: function(transportTypes) {\r\n    Transport.get(this, transportTypes, this._disabled, function(transport) {\r\n      this.debug('Selected ? transport for ?', transport.connectionType, URI.stringify(transport.endpoint));\r\n\r\n      if (transport === this._transport) return;\r\n      if (this._transport) this._transport.close();\r\n\r\n      this._transport = transport;\r\n      this.connectionType = transport.connectionType;\r\n    }, this);\r\n  },\r\n\r\n  sendMessage: function(message, timeout, options) {\r\n    options = options || {};\r\n\r\n    var id       = message.id,\r\n        attempts = options.attempts,\r\n        deadline = options.deadline && new Date().getTime() + (options.deadline * 1000),\r\n        envelope = this._envelopes[id],\r\n        scheduler;\r\n\r\n    if (!envelope) {\r\n      scheduler = new this._scheduler(message, {timeout: timeout, interval: this.retry, attempts: attempts, deadline: deadline});\r\n      envelope  = this._envelopes[id] = {message: message, scheduler: scheduler};\r\n    }\r\n\r\n    this._sendEnvelope(envelope);\r\n  },\r\n\r\n  _sendEnvelope: function(envelope) {\r\n    if (!this._transport) return;\r\n    if (envelope.request || envelope.timer) return;\r\n\r\n    var message   = envelope.message,\r\n        scheduler = envelope.scheduler,\r\n        self      = this;\r\n\r\n    if (!scheduler.isDeliverable()) {\r\n      scheduler.abort();\r\n      delete this._envelopes[message.id];\r\n      return;\r\n    }\r\n\r\n    envelope.timer = global.setTimeout(function() {\r\n      self.handleError(message);\r\n    }, scheduler.getTimeout() * 1000);\r\n\r\n    scheduler.send();\r\n    envelope.request = this._transport.sendMessage(message);\r\n  },\r\n\r\n  handleResponse: function(reply) {\r\n    var envelope = this._envelopes[reply.id];\r\n\r\n    if (reply.successful !== undefined && envelope) {\r\n      envelope.scheduler.succeed();\r\n      delete this._envelopes[reply.id];\r\n      global.clearTimeout(envelope.timer);\r\n    }\r\n\r\n    this.trigger('message', reply);\r\n\r\n    if (this._state === this.UP) return;\r\n    this._state = this.UP;\r\n    this._client.trigger('transport:up');\r\n  },\r\n\r\n  handleError: function(message, immediate) {\r\n    var envelope = this._envelopes[message.id],\r\n        request  = envelope && envelope.request,\r\n        self     = this;\r\n\r\n    if (!request) return;\r\n\r\n    request.then(function(req) {\r\n      if (req && req.abort) req.abort();\r\n    });\r\n\r\n    var scheduler = envelope.scheduler;\r\n    scheduler.fail();\r\n\r\n    global.clearTimeout(envelope.timer);\r\n    envelope.request = envelope.timer = null;\r\n\r\n    if (immediate) {\r\n      this._sendEnvelope(envelope);\r\n    } else {\r\n      envelope.timer = global.setTimeout(function() {\r\n        envelope.timer = null;\r\n        self._sendEnvelope(envelope);\r\n      }, scheduler.getInterval() * 1000);\r\n    }\r\n\r\n    if (this._state === this.DOWN) return;\r\n    this._state = this.DOWN;\r\n    this._client.trigger('transport:down');\r\n  }\r\n});\r\n\r\nDispatcher.create = function(client, endpoint, options) {\r\n  return new Dispatcher(client, endpoint, options);\r\n};\r\n\r\nextend(Dispatcher.prototype, Publisher);\r\nextend(Dispatcher.prototype, Logging);\r\n\r\nmodule.exports = Dispatcher;\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"../mixins/logging\":50,\"../mixins/publisher\":51,\"../transport\":62,\"../util/class\":71,\"../util/cookies\":73,\"../util/extend\":76,\"../util/uri\":80,\"./scheduler\":60}],56:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar Class   = require('../util/class'),\r\n    Grammar = require('./grammar');\r\n\r\nvar Error = Class({\r\n  initialize: function(code, params, message) {\r\n    this.code    = code;\r\n    this.params  = Array.prototype.slice.call(params);\r\n    this.message = message;\r\n  },\r\n\r\n  toString: function() {\r\n    return this.code + ':' +\r\n           this.params.join(',') + ':' +\r\n           this.message;\r\n  }\r\n});\r\n\r\nError.parse = function(message) {\r\n  message = message || '';\r\n  if (!Grammar.ERROR.test(message)) return new Error(null, [], message);\r\n\r\n  var parts   = message.split(':'),\r\n      code    = parseInt(parts[0]),\r\n      params  = parts[1].split(','),\r\n      message = parts[2];\r\n\r\n  return new Error(code, params, message);\r\n};\r\n\r\n// http://code.google.com/p/cometd/wiki/BayeuxCodes\r\nvar errors = {\r\n  versionMismatch:  [300, 'Version mismatch'],\r\n  conntypeMismatch: [301, 'Connection types not supported'],\r\n  extMismatch:      [302, 'Extension mismatch'],\r\n  badRequest:       [400, 'Bad request'],\r\n  clientUnknown:    [401, 'Unknown client'],\r\n  parameterMissing: [402, 'Missing required parameter'],\r\n  channelForbidden: [403, 'Forbidden channel'],\r\n  channelUnknown:   [404, 'Unknown channel'],\r\n  channelInvalid:   [405, 'Invalid channel'],\r\n  extUnknown:       [406, 'Unknown extension'],\r\n  publishFailed:    [407, 'Failed to publish'],\r\n  serverError:      [500, 'Internal server error']\r\n};\r\n\r\nfor (var name in errors)\r\n  (function(name) {\r\n    Error[name] = function() {\r\n      return new Error(errors[name][0], arguments, errors[name][1]).toString();\r\n    };\r\n  })(name);\r\n\r\nmodule.exports = Error;\r\n\r\n},{\"../util/class\":71,\"./grammar\":58}],57:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar extend  = require('../util/extend'),\r\n    Logging = require('../mixins/logging');\r\n\r\nvar Extensible = {\r\n  addExtension: function(extension) {\r\n    this._extensions = this._extensions || [];\r\n    this._extensions.push(extension);\r\n    if (extension.added) extension.added(this);\r\n  },\r\n\r\n  removeExtension: function(extension) {\r\n    if (!this._extensions) return;\r\n    var i = this._extensions.length;\r\n    while (i--) {\r\n      if (this._extensions[i] !== extension) continue;\r\n      this._extensions.splice(i,1);\r\n      if (extension.removed) extension.removed(this);\r\n    }\r\n  },\r\n\r\n  pipeThroughExtensions: function(stage, message, request, callback, context) {\r\n    this.debug('Passing through ? extensions: ?', stage, message);\r\n\r\n    if (!this._extensions) return callback.call(context, message);\r\n    var extensions = this._extensions.slice();\r\n\r\n    var pipe = function(message) {\r\n      if (!message) return callback.call(context, message);\r\n\r\n      var extension = extensions.shift();\r\n      if (!extension) return callback.call(context, message);\r\n\r\n      var fn = extension[stage];\r\n      if (!fn) return pipe(message);\r\n\r\n      if (fn.length >= 3) extension[stage](message, request, pipe);\r\n      else                extension[stage](message, pipe);\r\n    };\r\n    pipe(message);\r\n  }\r\n};\r\n\r\nextend(Extensible, Logging);\r\n\r\nmodule.exports = Extensible;\r\n\r\n},{\"../mixins/logging\":50,\"../util/extend\":76}],58:[function(require,module,exports){\r\n'use strict';\r\n\r\nmodule.exports = {\r\n  CHANNEL_NAME:     /^\\/(((([a-z]|[A-Z])|[0-9])|(\\-|\\_|\\!|\\~|\\(|\\)|\\$|\\@)))+(\\/(((([a-z]|[A-Z])|[0-9])|(\\-|\\_|\\!|\\~|\\(|\\)|\\$|\\@)))+)*$/,\r\n  CHANNEL_PATTERN:  /^(\\/(((([a-z]|[A-Z])|[0-9])|(\\-|\\_|\\!|\\~|\\(|\\)|\\$|\\@)))+)*\\/\\*{1,2}$/,\r\n  ERROR:            /^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\\-|\\_|\\!|\\~|\\(|\\)|\\$|\\@)| |\\/|\\*|\\.))*(,(((([a-z]|[A-Z])|[0-9])|(\\-|\\_|\\!|\\~|\\(|\\)|\\$|\\@)| |\\/|\\*|\\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\\-|\\_|\\!|\\~|\\(|\\)|\\$|\\@)| |\\/|\\*|\\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\\-|\\_|\\!|\\~|\\(|\\)|\\$|\\@)| |\\/|\\*|\\.))*)$/,\r\n  VERSION:          /^([0-9])+(\\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\\-|\\_))*)*$/\r\n};\r\n\r\n},{}],59:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar Class      = require('../util/class'),\r\n    Deferrable = require('../mixins/deferrable');\r\n\r\nmodule.exports = Class(Deferrable);\r\n\r\n},{\"../mixins/deferrable\":49,\"../util/class\":71}],60:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar extend = require('../util/extend');\r\n\r\nvar Scheduler = function(message, options) {\r\n  this.message  = message;\r\n  this.options  = options;\r\n  this.attempts = 0;\r\n};\r\n\r\nextend(Scheduler.prototype, {\r\n  getTimeout: function() {\r\n    return this.options.timeout;\r\n  },\r\n\r\n  getInterval: function() {\r\n    return this.options.interval;\r\n  },\r\n\r\n  isDeliverable: function() {\r\n    var attempts = this.options.attempts,\r\n        made     = this.attempts,\r\n        deadline = this.options.deadline,\r\n        now      = new Date().getTime();\r\n\r\n    if (attempts !== undefined && made >= attempts)\r\n      return false;\r\n\r\n    if (deadline !== undefined && now > deadline)\r\n      return false;\r\n\r\n    return true;\r\n  },\r\n\r\n  send: function() {\r\n    this.attempts += 1;\r\n  },\r\n\r\n  succeed: function() {},\r\n\r\n  fail: function() {},\r\n\r\n  abort: function() {}\r\n});\r\n\r\nmodule.exports = Scheduler;\r\n\r\n},{\"../util/extend\":76}],61:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar Class      = require('../util/class'),\r\n    extend     = require('../util/extend'),\r\n    Deferrable = require('../mixins/deferrable');\r\n\r\nvar Subscription = Class({\r\n  initialize: function(client, channels, callback, context) {\r\n    this._client    = client;\r\n    this._channels  = channels;\r\n    this._callback  = callback;\r\n    this._context   = context;\r\n    this._cancelled = false;\r\n  },\r\n\r\n  withChannel: function(callback, context) {\r\n    this._withChannel = [callback, context];\r\n    return this;\r\n  },\r\n\r\n  apply: function(context, args) {\r\n    var message = args[0];\r\n\r\n    if (this._callback)\r\n      this._callback.call(this._context, message.data);\r\n\r\n    if (this._withChannel)\r\n      this._withChannel[0].call(this._withChannel[1], message.channel, message.data);\r\n  },\r\n\r\n  cancel: function() {\r\n    if (this._cancelled) return;\r\n    this._client.unsubscribe(this._channels, this);\r\n    this._cancelled = true;\r\n  },\r\n\r\n  unsubscribe: function() {\r\n    this.cancel();\r\n  }\r\n});\r\n\r\nextend(Subscription.prototype, Deferrable);\r\n\r\nmodule.exports = Subscription;\r\n\r\n},{\"../mixins/deferrable\":49,\"../util/class\":71,\"../util/extend\":76}],62:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar Transport = require('./transport');\r\n\r\nTransport.register('websocket', require('./web_socket'));\r\nTransport.register('eventsource', require('./event_source'));\r\nTransport.register('long-polling', require('./xhr'));\r\nTransport.register('cross-origin-long-polling', require('./cors'));\r\nTransport.register('callback-polling', require('./jsonp'));\r\n\r\nmodule.exports = Transport;\r\n\r\n},{\"./cors\":63,\"./event_source\":64,\"./jsonp\":65,\"./transport\":66,\"./web_socket\":67,\"./xhr\":68}],63:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar Class     = require('../util/class'),\r\n    Set       = require('../util/set'),\r\n    URI       = require('../util/uri'),\r\n    extend    = require('../util/extend'),\r\n    toJSON    = require('../util/to_json'),\r\n    Transport = require('./transport');\r\n\r\nvar CORS = extend(Class(Transport, {\r\n  encode: function(messages) {\r\n    return 'message=' + encodeURIComponent(toJSON(messages));\r\n  },\r\n\r\n  request: function(messages) {\r\n    var xhrClass = global.XDomainRequest ? XDomainRequest : XMLHttpRequest,\r\n        xhr      = new xhrClass(),\r\n        id       = ++CORS._id,\r\n        headers  = this._dispatcher.headers,\r\n        self     = this,\r\n        key;\r\n\r\n    xhr.open('POST', URI.stringify(this.endpoint), true);\r\n\r\n    if (xhr.setRequestHeader) {\r\n      xhr.setRequestHeader('Pragma', 'no-cache');\r\n      for (key in headers) {\r\n        if (!headers.hasOwnProperty(key)) continue;\r\n        xhr.setRequestHeader(key, headers[key]);\r\n      }\r\n    }\r\n\r\n    var cleanUp = function() {\r\n      if (!xhr) return false;\r\n      CORS._pending.remove(id);\r\n      xhr.onload = xhr.onerror = xhr.ontimeout = xhr.onprogress = null;\r\n      xhr = null;\r\n    };\r\n\r\n    xhr.onload = function() {\r\n      var replies;\r\n      try { replies = JSON.parse(xhr.responseText) } catch (error) {}\r\n\r\n      cleanUp();\r\n\r\n      if (replies)\r\n        self._receive(replies);\r\n      else\r\n        self._handleError(messages);\r\n    };\r\n\r\n    xhr.onerror = xhr.ontimeout = function() {\r\n      cleanUp();\r\n      self._handleError(messages);\r\n    };\r\n\r\n    xhr.onprogress = function() {};\r\n\r\n    if (xhrClass === global.XDomainRequest)\r\n      CORS._pending.add({id: id, xhr: xhr});\r\n\r\n    xhr.send(this.encode(messages));\r\n    return xhr;\r\n  }\r\n}), {\r\n  _id:      0,\r\n  _pending: new Set(),\r\n\r\n  isUsable: function(dispatcher, endpoint, callback, context) {\r\n    if (URI.isSameOrigin(endpoint))\r\n      return callback.call(context, false);\r\n\r\n    if (global.XDomainRequest)\r\n      return callback.call(context, endpoint.protocol === location.protocol);\r\n\r\n    if (global.XMLHttpRequest) {\r\n      var xhr = new XMLHttpRequest();\r\n      return callback.call(context, xhr.withCredentials !== undefined);\r\n    }\r\n    return callback.call(context, false);\r\n  }\r\n});\r\n\r\nmodule.exports = CORS;\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"../util/class\":71,\"../util/extend\":76,\"../util/set\":78,\"../util/to_json\":79,\"../util/uri\":80,\"./transport\":66}],64:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar Class      = require('../util/class'),\r\n    URI        = require('../util/uri'),\r\n    copyObject = require('../util/copy_object'),\r\n    extend     = require('../util/extend'),\r\n    Deferrable = require('../mixins/deferrable'),\r\n    Transport  = require('./transport'),\r\n    XHR        = require('./xhr');\r\n\r\nvar EventSource = extend(Class(Transport, {\r\n  initialize: function(dispatcher, endpoint) {\r\n    Transport.prototype.initialize.call(this, dispatcher, endpoint);\r\n    if (!global.EventSource) return this.setDeferredStatus('failed');\r\n\r\n    this._xhr = new XHR(dispatcher, endpoint);\r\n\r\n    endpoint = copyObject(endpoint);\r\n    endpoint.pathname += '/' + dispatcher.clientId;\r\n\r\n    var socket = new global.EventSource(URI.stringify(endpoint)),\r\n        self   = this;\r\n\r\n    socket.onopen = function() {\r\n      self._everConnected = true;\r\n      self.setDeferredStatus('succeeded');\r\n    };\r\n\r\n    socket.onerror = function() {\r\n      if (self._everConnected) {\r\n        self._handleError([]);\r\n      } else {\r\n        self.setDeferredStatus('failed');\r\n        socket.close();\r\n      }\r\n    };\r\n\r\n    socket.onmessage = function(event) {\r\n      var replies;\r\n      try { replies = JSON.parse(event.data) } catch (error) {}\r\n\r\n      if (replies)\r\n        self._receive(replies);\r\n      else\r\n        self._handleError([]);\r\n    };\r\n\r\n    this._socket = socket;\r\n  },\r\n\r\n  close: function() {\r\n    if (!this._socket) return;\r\n    this._socket.onopen = this._socket.onerror = this._socket.onmessage = null;\r\n    this._socket.close();\r\n    delete this._socket;\r\n  },\r\n\r\n  isUsable: function(callback, context) {\r\n    this.callback(function() { callback.call(context, true) });\r\n    this.errback(function() { callback.call(context, false) });\r\n  },\r\n\r\n  encode: function(messages) {\r\n    return this._xhr.encode(messages);\r\n  },\r\n\r\n  request: function(messages) {\r\n    return this._xhr.request(messages);\r\n  }\r\n\r\n}), {\r\n  isUsable: function(dispatcher, endpoint, callback, context) {\r\n    var id = dispatcher.clientId;\r\n    if (!id) return callback.call(context, false);\r\n\r\n    XHR.isUsable(dispatcher, endpoint, function(usable) {\r\n      if (!usable) return callback.call(context, false);\r\n      this.create(dispatcher, endpoint).isUsable(callback, context);\r\n    }, this);\r\n  },\r\n\r\n  create: function(dispatcher, endpoint) {\r\n    var sockets = dispatcher.transports.eventsource = dispatcher.transports.eventsource || {},\r\n        id      = dispatcher.clientId;\r\n\r\n    var url = copyObject(endpoint);\r\n    url.pathname += '/' + (id || '');\r\n    url = URI.stringify(url);\r\n\r\n    sockets[url] = sockets[url] || new this(dispatcher, endpoint);\r\n    return sockets[url];\r\n  }\r\n});\r\n\r\nextend(EventSource.prototype, Deferrable);\r\n\r\nmodule.exports = EventSource;\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"../mixins/deferrable\":49,\"../util/class\":71,\"../util/copy_object\":74,\"../util/extend\":76,\"../util/uri\":80,\"./transport\":66,\"./xhr\":68}],65:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar Class      = require('../util/class'),\r\n    URI        = require('../util/uri'),\r\n    copyObject = require('../util/copy_object'),\r\n    extend     = require('../util/extend'),\r\n    toJSON     = require('../util/to_json'),\r\n    Transport  = require('./transport');\r\n\r\nvar JSONP = extend(Class(Transport, {\r\n encode: function(messages) {\r\n    var url = copyObject(this.endpoint);\r\n    url.query.message = toJSON(messages);\r\n    url.query.jsonp   = '__jsonp' + JSONP._cbCount + '__';\r\n    return URI.stringify(url);\r\n  },\r\n\r\n  request: function(messages) {\r\n    var head         = document.getElementsByTagName('head')[0],\r\n        script       = document.createElement('script'),\r\n        callbackName = JSONP.getCallbackName(),\r\n        endpoint     = copyObject(this.endpoint),\r\n        self         = this;\r\n\r\n    endpoint.query.message = toJSON(messages);\r\n    endpoint.query.jsonp   = callbackName;\r\n\r\n    var cleanup = function() {\r\n      if (!global[callbackName]) return false;\r\n      global[callbackName] = undefined;\r\n      try { delete global[callbackName] } catch (error) {}\r\n      script.parentNode.removeChild(script);\r\n    };\r\n\r\n    global[callbackName] = function(replies) {\r\n      cleanup();\r\n      self._receive(replies);\r\n    };\r\n\r\n    script.type = 'text/javascript';\r\n    script.src  = URI.stringify(endpoint);\r\n    head.appendChild(script);\r\n\r\n    script.onerror = function() {\r\n      cleanup();\r\n      self._handleError(messages);\r\n    };\r\n\r\n    return {abort: cleanup};\r\n  }\r\n}), {\r\n  _cbCount: 0,\r\n\r\n  getCallbackName: function() {\r\n    this._cbCount += 1;\r\n    return '__jsonp' + this._cbCount + '__';\r\n  },\r\n\r\n  isUsable: function(dispatcher, endpoint, callback, context) {\r\n    callback.call(context, true);\r\n  }\r\n});\r\n\r\nmodule.exports = JSONP;\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"../util/class\":71,\"../util/copy_object\":74,\"../util/extend\":76,\"../util/to_json\":79,\"../util/uri\":80,\"./transport\":66}],66:[function(require,module,exports){\r\n(function (process){\r\n'use strict';\r\n\r\nvar Class    = require('../util/class'),\r\n    Cookie   = require('../util/cookies').Cookie,\r\n    Promise  = require('../util/promise'),\r\n    URI      = require('../util/uri'),\r\n    array    = require('../util/array'),\r\n    extend   = require('../util/extend'),\r\n    Logging  = require('../mixins/logging'),\r\n    Timeouts = require('../mixins/timeouts'),\r\n    Channel  = require('../protocol/channel');\r\n\r\nvar Transport = extend(Class({ className: 'Transport',\r\n  DEFAULT_PORTS: {'http:': 80, 'https:': 443, 'ws:': 80, 'wss:': 443},\r\n  MAX_DELAY:     0,\r\n\r\n  batching:  true,\r\n\r\n  initialize: function(dispatcher, endpoint) {\r\n    this._dispatcher = dispatcher;\r\n    this.endpoint    = endpoint;\r\n    this._outbox     = [];\r\n    this._proxy      = extend({}, this._dispatcher.proxy);\r\n\r\n    if (!this._proxy.origin)\r\n      this._proxy.origin = this._findProxy();\r\n  },\r\n\r\n  close: function() {},\r\n\r\n  encode: function(messages) {\r\n    return '';\r\n  },\r\n\r\n  sendMessage: function(message) {\r\n    this.debug('Client ? sending message to ?: ?',\r\n               this._dispatcher.clientId, URI.stringify(this.endpoint), message);\r\n\r\n    if (!this.batching) return Promise.resolve(this.request([message]));\r\n\r\n    this._outbox.push(message);\r\n    this._flushLargeBatch();\r\n\r\n    if (message.channel === Channel.HANDSHAKE)\r\n      return this._publish(0.01);\r\n\r\n    if (message.channel === Channel.CONNECT)\r\n      this._connectMessage = message;\r\n\r\n    return this._publish(this.MAX_DELAY);\r\n  },\r\n\r\n  _makePromise: function() {\r\n    var self = this;\r\n\r\n    this._requestPromise = this._requestPromise || new Promise(function(resolve) {\r\n      self._resolvePromise = resolve;\r\n    });\r\n  },\r\n\r\n  _publish: function(delay) {\r\n    this._makePromise();\r\n\r\n    this.addTimeout('publish', delay, function() {\r\n      this._flush();\r\n      delete this._requestPromise;\r\n    }, this);\r\n\r\n    return this._requestPromise;\r\n  },\r\n\r\n  _flush: function() {\r\n    this.removeTimeout('publish');\r\n\r\n    if (this._outbox.length > 1 && this._connectMessage)\r\n      this._connectMessage.advice = {timeout: 0};\r\n\r\n    this._resolvePromise(this.request(this._outbox));\r\n\r\n    this._connectMessage = null;\r\n    this._outbox = [];\r\n  },\r\n\r\n  _flushLargeBatch: function() {\r\n    var string = this.encode(this._outbox);\r\n    if (string.length < this._dispatcher.maxRequestSize) return;\r\n    var last = this._outbox.pop();\r\n\r\n    this._makePromise();\r\n    this._flush();\r\n\r\n    if (last) this._outbox.push(last);\r\n  },\r\n\r\n  _receive: function(replies) {\r\n    if (!replies) return;\r\n    replies = [].concat(replies);\r\n\r\n    this.debug('Client ? received from ? via ?: ?',\r\n               this._dispatcher.clientId, URI.stringify(this.endpoint), this.connectionType, replies);\r\n\r\n    for (var i = 0, n = replies.length; i < n; i++)\r\n      this._dispatcher.handleResponse(replies[i]);\r\n  },\r\n\r\n  _handleError: function(messages, immediate) {\r\n    messages = [].concat(messages);\r\n\r\n    this.debug('Client ? failed to send to ? via ?: ?',\r\n               this._dispatcher.clientId, URI.stringify(this.endpoint), this.connectionType, messages);\r\n\r\n    for (var i = 0, n = messages.length; i < n; i++)\r\n      this._dispatcher.handleError(messages[i]);\r\n  },\r\n\r\n  _getCookies: function() {\r\n    var cookies = this._dispatcher.cookies,\r\n        url     = URI.stringify(this.endpoint);\r\n\r\n    if (!cookies) return '';\r\n\r\n    return array.map(cookies.getCookiesSync(url), function(cookie) {\r\n      return cookie.cookieString();\r\n    }).join('; ');\r\n  },\r\n\r\n  _storeCookies: function(setCookie) {\r\n    var cookies = this._dispatcher.cookies,\r\n        url     = URI.stringify(this.endpoint),\r\n        cookie;\r\n\r\n    if (!setCookie || !cookies) return;\r\n    setCookie = [].concat(setCookie);\r\n\r\n    for (var i = 0, n = setCookie.length; i < n; i++) {\r\n      cookie = Cookie.parse(setCookie[i]);\r\n      cookies.setCookieSync(cookie, url);\r\n    }\r\n  },\r\n\r\n  _findProxy: function() {\r\n    if (typeof process === 'undefined') return undefined;\r\n\r\n    var protocol = this.endpoint.protocol;\r\n    if (!protocol) return undefined;\r\n\r\n    var name   = protocol.replace(/:$/, '').toLowerCase() + '_proxy',\r\n        upcase = name.toUpperCase(),\r\n        env    = process.env,\r\n        keys, proxy;\r\n\r\n    if (name === 'http_proxy' && env.REQUEST_METHOD) {\r\n      keys = Object.keys(env).filter(function(k) { return /^http_proxy$/i.test(k) });\r\n      if (keys.length === 1) {\r\n        if (keys[0] === name && env[upcase] === undefined)\r\n          proxy = env[name];\r\n      } else if (keys.length > 1) {\r\n        proxy = env[name];\r\n      }\r\n      proxy = proxy || env['CGI_' + upcase];\r\n    } else {\r\n      proxy = env[name] || env[upcase];\r\n      if (proxy && !env[name])\r\n        console.warn('The environment variable ' + upcase +\r\n                     ' is discouraged. Use ' + name + '.');\r\n    }\r\n    return proxy;\r\n  }\r\n\r\n}), {\r\n  get: function(dispatcher, allowed, disabled, callback, context) {\r\n    var endpoint = dispatcher.endpoint;\r\n\r\n    array.asyncEach(this._transports, function(pair, resume) {\r\n      var connType     = pair[0], klass = pair[1],\r\n          connEndpoint = dispatcher.endpointFor(connType);\r\n\r\n      if (array.indexOf(disabled, connType) >= 0)\r\n        return resume();\r\n\r\n      if (array.indexOf(allowed, connType) < 0) {\r\n        klass.isUsable(dispatcher, connEndpoint, function() {});\r\n        return resume();\r\n      }\r\n\r\n      klass.isUsable(dispatcher, connEndpoint, function(isUsable) {\r\n        if (!isUsable) return resume();\r\n        var transport = klass.hasOwnProperty('create') ? klass.create(dispatcher, connEndpoint) : new klass(dispatcher, connEndpoint);\r\n        callback.call(context, transport);\r\n      });\r\n    }, function() {\r\n      throw new Error('Could not find a usable connection type for ' + URI.stringify(endpoint));\r\n    });\r\n  },\r\n\r\n  register: function(type, klass) {\r\n    this._transports.push([type, klass]);\r\n    klass.prototype.connectionType = type;\r\n  },\r\n\r\n  getConnectionTypes: function() {\r\n    return array.map(this._transports, function(t) { return t[0] });\r\n  },\r\n\r\n  _transports: []\r\n});\r\n\r\nextend(Transport.prototype, Logging);\r\nextend(Transport.prototype, Timeouts);\r\n\r\nmodule.exports = Transport;\r\n\r\n}).call(this,require('_process'))\r\n\r\n},{\"../mixins/logging\":50,\"../mixins/timeouts\":52,\"../protocol/channel\":53,\"../util/array\":69,\"../util/class\":71,\"../util/cookies\":73,\"../util/extend\":76,\"../util/promise\":77,\"../util/uri\":80,\"_process\":91}],67:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar Class      = require('../util/class'),\r\n    Promise    = require('../util/promise'),\r\n    Set        = require('../util/set'),\r\n    URI        = require('../util/uri'),\r\n    browser    = require('../util/browser'),\r\n    copyObject = require('../util/copy_object'),\r\n    extend     = require('../util/extend'),\r\n    toJSON     = require('../util/to_json'),\r\n    ws         = require('../util/websocket'),\r\n    Deferrable = require('../mixins/deferrable'),\r\n    Transport  = require('./transport');\r\n\r\nvar WebSocket = extend(Class(Transport, {\r\n  UNCONNECTED:  1,\r\n  CONNECTING:   2,\r\n  CONNECTED:    3,\r\n\r\n  batching:     false,\r\n\r\n  isUsable: function(callback, context) {\r\n    this.callback(function() { callback.call(context, true) });\r\n    this.errback(function() { callback.call(context, false) });\r\n    this.connect();\r\n  },\r\n\r\n  request: function(messages) {\r\n    this._pending = this._pending || new Set();\r\n    for (var i = 0, n = messages.length; i < n; i++) this._pending.add(messages[i]);\r\n\r\n    var self = this;\r\n\r\n    var promise = new Promise(function(resolve, reject) {\r\n      self.callback(function(socket) {\r\n        if (!socket || socket.readyState !== 1) return;\r\n        socket.send(toJSON(messages));\r\n        resolve(socket);\r\n      });\r\n\r\n      self.connect();\r\n    });\r\n\r\n    return {\r\n      abort: function() { promise.then(function(ws) { ws.close() }) }\r\n    };\r\n  },\r\n\r\n  connect: function() {\r\n    if (WebSocket._unloaded) return;\r\n\r\n    this._state = this._state || this.UNCONNECTED;\r\n    if (this._state !== this.UNCONNECTED) return;\r\n    this._state = this.CONNECTING;\r\n\r\n    var socket = this._createSocket();\r\n    if (!socket) return this.setDeferredStatus('failed');\r\n\r\n    var self = this;\r\n\r\n    socket.onopen = function() {\r\n      if (socket.headers) self._storeCookies(socket.headers['set-cookie']);\r\n      self._socket = socket;\r\n      self._state = self.CONNECTED;\r\n      self._everConnected = true;\r\n      self._ping();\r\n      self.setDeferredStatus('succeeded', socket);\r\n    };\r\n\r\n    var closed = false;\r\n    socket.onclose = socket.onerror = function() {\r\n      if (closed) return;\r\n      closed = true;\r\n\r\n      var wasConnected = (self._state === self.CONNECTED);\r\n      socket.onopen = socket.onclose = socket.onerror = socket.onmessage = null;\r\n\r\n      delete self._socket;\r\n      self._state = self.UNCONNECTED;\r\n      self.removeTimeout('ping');\r\n\r\n      var pending = self._pending ? self._pending.toArray() : [];\r\n      delete self._pending;\r\n\r\n      if (wasConnected || self._everConnected) {\r\n        self.setDeferredStatus('unknown');\r\n        self._handleError(pending, wasConnected);\r\n      } else {\r\n        self.setDeferredStatus('failed');\r\n      }\r\n    };\r\n\r\n    socket.onmessage = function(event) {\r\n      var replies;\r\n      try { replies = JSON.parse(event.data) } catch (error) {}\r\n\r\n      if (!replies) return;\r\n\r\n      replies = [].concat(replies);\r\n\r\n      for (var i = 0, n = replies.length; i < n; i++) {\r\n        if (replies[i].successful === undefined) continue;\r\n        self._pending.remove(replies[i]);\r\n      }\r\n      self._receive(replies);\r\n    };\r\n  },\r\n\r\n  close: function() {\r\n    if (!this._socket) return;\r\n    this._socket.close();\r\n  },\r\n\r\n  _createSocket: function() {\r\n    var url        = WebSocket.getSocketUrl(this.endpoint),\r\n        headers    = this._dispatcher.headers,\r\n        extensions = this._dispatcher.wsExtensions,\r\n        cookie     = this._getCookies(),\r\n        tls        = this._dispatcher.tls,\r\n        options    = {extensions: extensions, headers: headers, proxy: this._proxy, tls: tls};\r\n\r\n    if (cookie !== '') options.headers['Cookie'] = cookie;\r\n\r\n    return ws.create(url, [], options);\r\n  },\r\n\r\n  _ping: function() {\r\n    if (!this._socket || this._socket.readyState !== 1) return;\r\n    this._socket.send('[]');\r\n    this.addTimeout('ping', this._dispatcher.timeout / 2, this._ping, this);\r\n  }\r\n\r\n}), {\r\n  PROTOCOLS: {\r\n    'http:':  'ws:',\r\n    'https:': 'wss:'\r\n  },\r\n\r\n  create: function(dispatcher, endpoint) {\r\n    var sockets = dispatcher.transports.websocket = dispatcher.transports.websocket || {};\r\n    sockets[endpoint.href] = sockets[endpoint.href] || new this(dispatcher, endpoint);\r\n    return sockets[endpoint.href];\r\n  },\r\n\r\n  getSocketUrl: function(endpoint) {\r\n    endpoint = copyObject(endpoint);\r\n    endpoint.protocol = this.PROTOCOLS[endpoint.protocol];\r\n    return URI.stringify(endpoint);\r\n  },\r\n\r\n  isUsable: function(dispatcher, endpoint, callback, context) {\r\n    this.create(dispatcher, endpoint).isUsable(callback, context);\r\n  }\r\n});\r\n\r\nextend(WebSocket.prototype, Deferrable);\r\n\r\nif (browser.Event && global.onbeforeunload !== undefined)\r\n  browser.Event.on(global, 'beforeunload', function() { WebSocket._unloaded = true });\r\n\r\nmodule.exports = WebSocket;\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"../mixins/deferrable\":49,\"../util/browser\":70,\"../util/class\":71,\"../util/copy_object\":74,\"../util/extend\":76,\"../util/promise\":77,\"../util/set\":78,\"../util/to_json\":79,\"../util/uri\":80,\"../util/websocket\":82,\"./transport\":66}],68:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar Class     = require('../util/class'),\r\n    URI       = require('../util/uri'),\r\n    browser   = require('../util/browser'),\r\n    extend    = require('../util/extend'),\r\n    toJSON    = require('../util/to_json'),\r\n    Transport = require('./transport');\r\n\r\nvar XHR = extend(Class(Transport, {\r\n  encode: function(messages) {\r\n    return toJSON(messages);\r\n  },\r\n\r\n  request: function(messages) {\r\n    var href = this.endpoint.href,\r\n        self = this,\r\n        xhr;\r\n\r\n    // Prefer XMLHttpRequest over ActiveXObject if they both exist\r\n    if (global.XMLHttpRequest) {\r\n      xhr = new XMLHttpRequest();\r\n    } else if (global.ActiveXObject) {\r\n      xhr = new ActiveXObject('Microsoft.XMLHTTP');\r\n    } else {\r\n      return this._handleError(messages);\r\n    }\r\n\r\n    xhr.open('POST', href, true);\r\n    xhr.setRequestHeader('Content-Type', 'application/json');\r\n    xhr.setRequestHeader('Pragma', 'no-cache');\r\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n\r\n    var headers = this._dispatcher.headers;\r\n    for (var key in headers) {\r\n      if (!headers.hasOwnProperty(key)) continue;\r\n      xhr.setRequestHeader(key, headers[key]);\r\n    }\r\n\r\n    var abort = function() { xhr.abort() };\r\n    if (global.onbeforeunload !== undefined)\r\n      browser.Event.on(global, 'beforeunload', abort);\r\n\r\n    xhr.onreadystatechange = function() {\r\n      if (!xhr || xhr.readyState !== 4) return;\r\n\r\n      var replies    = null,\r\n          status     = xhr.status,\r\n          text       = xhr.responseText,\r\n          successful = (status >= 200 && status < 300) || status === 304 || status === 1223;\r\n\r\n      if (global.onbeforeunload !== undefined)\r\n        browser.Event.detach(global, 'beforeunload', abort);\r\n\r\n      xhr.onreadystatechange = function() {};\r\n      xhr = null;\r\n\r\n      if (!successful) return self._handleError(messages);\r\n\r\n      try {\r\n        replies = JSON.parse(text);\r\n      } catch (error) {}\r\n\r\n      if (replies)\r\n        self._receive(replies);\r\n      else\r\n        self._handleError(messages);\r\n    };\r\n\r\n    xhr.send(this.encode(messages));\r\n    return xhr;\r\n  }\r\n}), {\r\n  isUsable: function(dispatcher, endpoint, callback, context) {\r\n    var usable = (navigator.product === 'ReactNative')\r\n              || URI.isSameOrigin(endpoint);\r\n\r\n    callback.call(context, usable);\r\n  }\r\n});\r\n\r\nmodule.exports = XHR;\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"../util/browser\":70,\"../util/class\":71,\"../util/extend\":76,\"../util/to_json\":79,\"../util/uri\":80,\"./transport\":66}],69:[function(require,module,exports){\r\n'use strict';\r\n\r\nmodule.exports = {\r\n  commonElement: function(lista, listb) {\r\n    for (var i = 0, n = lista.length; i < n; i++) {\r\n      if (this.indexOf(listb, lista[i]) !== -1)\r\n        return lista[i];\r\n    }\r\n    return null;\r\n  },\r\n\r\n  indexOf: function(list, needle) {\r\n    if (list.indexOf) return list.indexOf(needle);\r\n\r\n    for (var i = 0, n = list.length; i < n; i++) {\r\n      if (list[i] === needle) return i;\r\n    }\r\n    return -1;\r\n  },\r\n\r\n  map: function(object, callback, context) {\r\n    if (object.map) return object.map(callback, context);\r\n    var result = [];\r\n\r\n    if (object instanceof Array) {\r\n      for (var i = 0, n = object.length; i < n; i++) {\r\n        result.push(callback.call(context || null, object[i], i));\r\n      }\r\n    } else {\r\n      for (var key in object) {\r\n        if (!object.hasOwnProperty(key)) continue;\r\n        result.push(callback.call(context || null, key, object[key]));\r\n      }\r\n    }\r\n    return result;\r\n  },\r\n\r\n  filter: function(array, callback, context) {\r\n    if (array.filter) return array.filter(callback, context);\r\n    var result = [];\r\n    for (var i = 0, n = array.length; i < n; i++) {\r\n      if (callback.call(context || null, array[i], i))\r\n        result.push(array[i]);\r\n    }\r\n    return result;\r\n  },\r\n\r\n  asyncEach: function(list, iterator, callback, context) {\r\n    var n       = list.length,\r\n        i       = -1,\r\n        calls   = 0,\r\n        looping = false;\r\n\r\n    var iterate = function() {\r\n      calls -= 1;\r\n      i += 1;\r\n      if (i === n) return callback && callback.call(context);\r\n      iterator(list[i], resume);\r\n    };\r\n\r\n    var loop = function() {\r\n      if (looping) return;\r\n      looping = true;\r\n      while (calls > 0) iterate();\r\n      looping = false;\r\n    };\r\n\r\n    var resume = function() {\r\n      calls += 1;\r\n      loop();\r\n    };\r\n    resume();\r\n  }\r\n};\r\n\r\n},{}],70:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar Event = {\r\n  _registry: [],\r\n\r\n  on: function(element, eventName, callback, context) {\r\n    var wrapped = function() { callback.call(context) };\r\n\r\n    if (element.addEventListener)\r\n      element.addEventListener(eventName, wrapped, false);\r\n    else\r\n      element.attachEvent('on' + eventName, wrapped);\r\n\r\n    this._registry.push({\r\n      _element:   element,\r\n      _type:      eventName,\r\n      _callback:  callback,\r\n      _context:     context,\r\n      _handler:   wrapped\r\n    });\r\n  },\r\n\r\n  detach: function(element, eventName, callback, context) {\r\n    var i = this._registry.length, register;\r\n    while (i--) {\r\n      register = this._registry[i];\r\n\r\n      if ((element    && element    !== register._element)  ||\r\n          (eventName  && eventName  !== register._type)     ||\r\n          (callback   && callback   !== register._callback) ||\r\n          (context    && context    !== register._context))\r\n        continue;\r\n\r\n      if (register._element.removeEventListener)\r\n        register._element.removeEventListener(register._type, register._handler, false);\r\n      else\r\n        register._element.detachEvent('on' + register._type, register._handler);\r\n\r\n      this._registry.splice(i,1);\r\n      register = null;\r\n    }\r\n  }\r\n};\r\n\r\nif (global.onunload !== undefined)\r\n  Event.on(global, 'unload', Event.detach, Event);\r\n\r\nmodule.exports = {\r\n  Event: Event\r\n};\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{}],71:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar extend = require('./extend');\r\n\r\nmodule.exports = function(parent, methods) {\r\n  if (typeof parent !== 'function') {\r\n    methods = parent;\r\n    parent  = Object;\r\n  }\r\n\r\n  var klass = function() {\r\n    if (!this.initialize) return this;\r\n    return this.initialize.apply(this, arguments) || this;\r\n  };\r\n\r\n  var bridge = function() {};\r\n  bridge.prototype = parent.prototype;\r\n\r\n  klass.prototype = new bridge();\r\n  extend(klass.prototype, methods);\r\n\r\n  return klass;\r\n};\r\n\r\n},{\"./extend\":76}],72:[function(require,module,exports){\r\nmodule.exports = {\r\n  VERSION:          '1.2.4',\r\n\r\n  BAYEUX_VERSION:   '1.0',\r\n  ID_LENGTH:        160,\r\n  JSONP_CALLBACK:   'jsonpcallback',\r\n  CONNECTION_TYPES: ['long-polling', 'cross-origin-long-polling', 'callback-polling', 'websocket', 'eventsource', 'in-process'],\r\n\r\n  MANDATORY_CONNECTION_TYPES: ['long-polling', 'callback-polling', 'in-process']\r\n};\r\n\r\n},{}],73:[function(require,module,exports){\r\n'use strict';\r\n\r\nmodule.exports = {};\r\n\r\n},{}],74:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar copyObject = function(object) {\r\n  var clone, i, key;\r\n  if (object instanceof Array) {\r\n    clone = [];\r\n    i = object.length;\r\n    while (i--) clone[i] = copyObject(object[i]);\r\n    return clone;\r\n  } else if (typeof object === 'object') {\r\n    clone = (object === null) ? null : {};\r\n    for (key in object) clone[key] = copyObject(object[key]);\r\n    return clone;\r\n  } else {\r\n    return object;\r\n  }\r\n};\r\n\r\nmodule.exports = copyObject;\r\n\r\n},{}],75:[function(require,module,exports){\r\n/*\r\nCopyright Joyent, Inc. and other Node contributors. All rights reserved.\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of\r\nthis software and associated documentation files (the \"Software\"), to deal in\r\nthe Software without restriction, including without limitation the rights to\r\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\r\nof the Software, and to permit persons to whom the Software is furnished to do\r\nso, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n*/\r\n\r\nvar isArray = typeof Array.isArray === 'function'\r\n    ? Array.isArray\r\n    : function (xs) {\r\n        return Object.prototype.toString.call(xs) === '[object Array]'\r\n    }\r\n;\r\nfunction indexOf (xs, x) {\r\n    if (xs.indexOf) return xs.indexOf(x);\r\n    for (var i = 0; i < xs.length; i++) {\r\n        if (x === xs[i]) return i;\r\n    }\r\n    return -1;\r\n}\r\n\r\nfunction EventEmitter() {}\r\nmodule.exports = EventEmitter;\r\n\r\nEventEmitter.prototype.emit = function(type) {\r\n  // If there is no 'error' event listener then throw.\r\n  if (type === 'error') {\r\n    if (!this._events || !this._events.error ||\r\n        (isArray(this._events.error) && !this._events.error.length))\r\n    {\r\n      if (arguments[1] instanceof Error) {\r\n        throw arguments[1]; // Unhandled 'error' event\r\n      } else {\r\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\r\n      }\r\n      return false;\r\n    }\r\n  }\r\n\r\n  if (!this._events) return false;\r\n  var handler = this._events[type];\r\n  if (!handler) return false;\r\n\r\n  if (typeof handler == 'function') {\r\n    switch (arguments.length) {\r\n      // fast cases\r\n      case 1:\r\n        handler.call(this);\r\n        break;\r\n      case 2:\r\n        handler.call(this, arguments[1]);\r\n        break;\r\n      case 3:\r\n        handler.call(this, arguments[1], arguments[2]);\r\n        break;\r\n      // slower\r\n      default:\r\n        var args = Array.prototype.slice.call(arguments, 1);\r\n        handler.apply(this, args);\r\n    }\r\n    return true;\r\n\r\n  } else if (isArray(handler)) {\r\n    var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n    var listeners = handler.slice();\r\n    for (var i = 0, l = listeners.length; i < l; i++) {\r\n      listeners[i].apply(this, args);\r\n    }\r\n    return true;\r\n\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\n// EventEmitter is defined in src/node_events.cc\r\n// EventEmitter.prototype.emit() is also defined there.\r\nEventEmitter.prototype.addListener = function(type, listener) {\r\n  if ('function' !== typeof listener) {\r\n    throw new Error('addListener only takes instances of Function');\r\n  }\r\n\r\n  if (!this._events) this._events = {};\r\n\r\n  // To avoid recursion in the case that type == \"newListeners\"! Before\r\n  // adding it to the listeners, first emit \"newListeners\".\r\n  this.emit('newListener', type, listener);\r\n\r\n  if (!this._events[type]) {\r\n    // Optimize the case of one listener. Don't need the extra array object.\r\n    this._events[type] = listener;\r\n  } else if (isArray(this._events[type])) {\r\n    // If we've already got an array, just append.\r\n    this._events[type].push(listener);\r\n  } else {\r\n    // Adding the second element, need to change to array.\r\n    this._events[type] = [this._events[type], listener];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\r\n\r\nEventEmitter.prototype.once = function(type, listener) {\r\n  var self = this;\r\n  self.on(type, function g() {\r\n    self.removeListener(type, g);\r\n    listener.apply(this, arguments);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.removeListener = function(type, listener) {\r\n  if ('function' !== typeof listener) {\r\n    throw new Error('removeListener only takes instances of Function');\r\n  }\r\n\r\n  // does not use listeners(), so no side effect of creating _events[type]\r\n  if (!this._events || !this._events[type]) return this;\r\n\r\n  var list = this._events[type];\r\n\r\n  if (isArray(list)) {\r\n    var i = indexOf(list, listener);\r\n    if (i < 0) return this;\r\n    list.splice(i, 1);\r\n    if (list.length == 0)\r\n      delete this._events[type];\r\n  } else if (this._events[type] === listener) {\r\n    delete this._events[type];\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.removeAllListeners = function(type) {\r\n  if (arguments.length === 0) {\r\n    this._events = {};\r\n    return this;\r\n  }\r\n\r\n  // does not use listeners(), so no side effect of creating _events[type]\r\n  if (type && this._events && this._events[type]) this._events[type] = null;\r\n  return this;\r\n};\r\n\r\nEventEmitter.prototype.listeners = function(type) {\r\n  if (!this._events) this._events = {};\r\n  if (!this._events[type]) this._events[type] = [];\r\n  if (!isArray(this._events[type])) {\r\n    this._events[type] = [this._events[type]];\r\n  }\r\n  return this._events[type];\r\n};\r\n\r\n},{}],76:[function(require,module,exports){\r\n'use strict';\r\n\r\nmodule.exports = function(dest, source, overwrite) {\r\n  if (!source) return dest;\r\n  for (var key in source) {\r\n    if (!source.hasOwnProperty(key)) continue;\r\n    if (dest.hasOwnProperty(key) && overwrite === false) continue;\r\n    if (dest[key] !== source[key])\r\n      dest[key] = source[key];\r\n  }\r\n  return dest;\r\n};\r\n\r\n},{}],77:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar asap = require('asap');\r\n\r\nvar PENDING   = 0,\r\n    FULFILLED = 1,\r\n    REJECTED  = 2;\r\n\r\nvar RETURN = function(x) { return x },\r\n    THROW  = function(x) { throw  x };\r\n\r\nvar Promise = function(task) {\r\n  this._state       = PENDING;\r\n  this._onFulfilled = [];\r\n  this._onRejected  = [];\r\n\r\n  if (typeof task !== 'function') return;\r\n  var self = this;\r\n\r\n  task(function(value)  { resolve(self, value) },\r\n       function(reason) { reject(self, reason) });\r\n};\r\n\r\nPromise.prototype.then = function(onFulfilled, onRejected) {\r\n  var next = new Promise();\r\n  registerOnFulfilled(this, onFulfilled, next);\r\n  registerOnRejected(this, onRejected, next);\r\n  return next;\r\n};\r\n\r\nPromise.prototype['catch'] = function(onRejected) {\r\n  return this.then(null, onRejected);\r\n};\r\n\r\nvar registerOnFulfilled = function(promise, onFulfilled, next) {\r\n  if (typeof onFulfilled !== 'function') onFulfilled = RETURN;\r\n  var handler = function(value) { invoke(onFulfilled, value, next) };\r\n\r\n  if (promise._state === PENDING) {\r\n    promise._onFulfilled.push(handler);\r\n  } else if (promise._state === FULFILLED) {\r\n    handler(promise._value);\r\n  }\r\n};\r\n\r\nvar registerOnRejected = function(promise, onRejected, next) {\r\n  if (typeof onRejected !== 'function') onRejected = THROW;\r\n  var handler = function(reason) { invoke(onRejected, reason, next) };\r\n\r\n  if (promise._state === PENDING) {\r\n    promise._onRejected.push(handler);\r\n  } else if (promise._state === REJECTED) {\r\n    handler(promise._reason);\r\n  }\r\n};\r\n\r\nvar invoke = function(fn, value, next) {\r\n  asap(function() { _invoke(fn, value, next) });\r\n};\r\n\r\nvar _invoke = function(fn, value, next) {\r\n  var outcome;\r\n\r\n  try {\r\n    outcome = fn(value);\r\n  } catch (error) {\r\n    return reject(next, error);\r\n  }\r\n\r\n  if (outcome === next) {\r\n    reject(next, new TypeError('Recursive promise chain detected'));\r\n  } else {\r\n    resolve(next, outcome);\r\n  }\r\n};\r\n\r\nvar resolve = function(promise, value) {\r\n  var called = false, type, then;\r\n\r\n  try {\r\n    type = typeof value;\r\n    then = value !== null && (type === 'function' || type === 'object') && value.then;\r\n\r\n    if (typeof then !== 'function') return fulfill(promise, value);\r\n\r\n    then.call(value, function(v) {\r\n      if (!(called ^ (called = true))) return;\r\n      resolve(promise, v);\r\n    }, function(r) {\r\n      if (!(called ^ (called = true))) return;\r\n      reject(promise, r);\r\n    });\r\n  } catch (error) {\r\n    if (!(called ^ (called = true))) return;\r\n    reject(promise, error);\r\n  }\r\n};\r\n\r\nvar fulfill = function(promise, value) {\r\n  if (promise._state !== PENDING) return;\r\n\r\n  promise._state      = FULFILLED;\r\n  promise._value      = value;\r\n  promise._onRejected = [];\r\n\r\n  var onFulfilled = promise._onFulfilled, fn;\r\n  while (fn = onFulfilled.shift()) fn(value);\r\n};\r\n\r\nvar reject = function(promise, reason) {\r\n  if (promise._state !== PENDING) return;\r\n\r\n  promise._state       = REJECTED;\r\n  promise._reason      = reason;\r\n  promise._onFulfilled = [];\r\n\r\n  var onRejected = promise._onRejected, fn;\r\n  while (fn = onRejected.shift()) fn(reason);\r\n};\r\n\r\nPromise.resolve = function(value) {\r\n  return new Promise(function(resolve, reject) { resolve(value) });\r\n};\r\n\r\nPromise.reject = function(reason) {\r\n  return new Promise(function(resolve, reject) { reject(reason) });\r\n};\r\n\r\nPromise.all = function(promises) {\r\n  return new Promise(function(resolve, reject) {\r\n    var list = [], n = promises.length, i;\r\n\r\n    if (n === 0) return resolve(list);\r\n\r\n    for (i = 0; i < n; i++) (function(promise, i) {\r\n      Promise.resolve(promise).then(function(value) {\r\n        list[i] = value;\r\n        if (--n === 0) resolve(list);\r\n      }, reject);\r\n    })(promises[i], i);\r\n  });\r\n};\r\n\r\nPromise.race = function(promises) {\r\n  return new Promise(function(resolve, reject) {\r\n    for (var i = 0, n = promises.length; i < n; i++)\r\n      Promise.resolve(promises[i]).then(resolve, reject);\r\n  });\r\n};\r\n\r\nPromise.deferred = Promise.pending = function() {\r\n  var tuple = {};\r\n\r\n  tuple.promise = new Promise(function(resolve, reject) {\r\n    tuple.resolve = resolve;\r\n    tuple.reject  = reject;\r\n  });\r\n  return tuple;\r\n};\r\n\r\nmodule.exports = Promise;\r\n\r\n},{\"asap\":37}],78:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar Class = require('./class');\r\n\r\nmodule.exports = Class({\r\n  initialize: function() {\r\n    this._index = {};\r\n  },\r\n\r\n  add: function(item) {\r\n    var key = (item.id !== undefined) ? item.id : item;\r\n    if (this._index.hasOwnProperty(key)) return false;\r\n    this._index[key] = item;\r\n    return true;\r\n  },\r\n\r\n  forEach: function(block, context) {\r\n    for (var key in this._index) {\r\n      if (this._index.hasOwnProperty(key))\r\n        block.call(context, this._index[key]);\r\n    }\r\n  },\r\n\r\n  isEmpty: function() {\r\n    for (var key in this._index) {\r\n      if (this._index.hasOwnProperty(key)) return false;\r\n    }\r\n    return true;\r\n  },\r\n\r\n  member: function(item) {\r\n    for (var key in this._index) {\r\n      if (this._index[key] === item) return true;\r\n    }\r\n    return false;\r\n  },\r\n\r\n  remove: function(item) {\r\n    var key = (item.id !== undefined) ? item.id : item;\r\n    var removed = this._index[key];\r\n    delete this._index[key];\r\n    return removed;\r\n  },\r\n\r\n  toArray: function() {\r\n    var array = [];\r\n    this.forEach(function(item) { array.push(item) });\r\n    return array;\r\n  }\r\n});\r\n\r\n},{\"./class\":71}],79:[function(require,module,exports){\r\n'use strict';\r\n\r\n// http://assanka.net/content/tech/2009/09/02/json2-js-vs-prototype/\r\n\r\nmodule.exports = function(object) {\r\n  return JSON.stringify(object, function(key, value) {\r\n    return (this[key] instanceof Array) ? this[key] : value;\r\n  });\r\n};\r\n\r\n},{}],80:[function(require,module,exports){\r\n'use strict';\r\n\r\nmodule.exports = {\r\n  isURI: function(uri) {\r\n    return uri && uri.protocol && uri.host && uri.path;\r\n  },\r\n\r\n  isSameOrigin: function(uri) {\r\n    return uri.protocol === location.protocol &&\r\n           uri.hostname === location.hostname &&\r\n           uri.port     === location.port;\r\n  },\r\n\r\n  parse: function(url) {\r\n    if (typeof url !== 'string') return url;\r\n    var uri = {}, parts, query, pairs, i, n, data;\r\n\r\n    var consume = function(name, pattern) {\r\n      url = url.replace(pattern, function(match) {\r\n        uri[name] = match;\r\n        return '';\r\n      });\r\n      uri[name] = uri[name] || '';\r\n    };\r\n\r\n    consume('protocol', /^[a-z]+\\:/i);\r\n    consume('host',     /^\\/\\/[^\\/\\?#]+/);\r\n\r\n    if (!/^\\//.test(url) && !uri.host)\r\n      url = location.pathname.replace(/[^\\/]*$/, '') + url;\r\n\r\n    consume('pathname', /^[^\\?#]*/);\r\n    consume('search',   /^\\?[^#]*/);\r\n    consume('hash',     /^#.*/);\r\n\r\n    uri.protocol = uri.protocol || location.protocol;\r\n\r\n    if (uri.host) {\r\n      uri.host     = uri.host.substr(2);\r\n      parts        = uri.host.split(':');\r\n      uri.hostname = parts[0];\r\n      uri.port     = parts[1] || '';\r\n    } else {\r\n      uri.host     = location.host;\r\n      uri.hostname = location.hostname;\r\n      uri.port     = location.port;\r\n    }\r\n\r\n    uri.pathname = uri.pathname || '/';\r\n    uri.path = uri.pathname + uri.search;\r\n\r\n    query = uri.search.replace(/^\\?/, '');\r\n    pairs = query ? query.split('&') : [];\r\n    data  = {};\r\n\r\n    for (i = 0, n = pairs.length; i < n; i++) {\r\n      parts = pairs[i].split('=');\r\n      data[decodeURIComponent(parts[0] || '')] = decodeURIComponent(parts[1] || '');\r\n    }\r\n\r\n    uri.query = data;\r\n\r\n    uri.href = this.stringify(uri);\r\n    return uri;\r\n  },\r\n\r\n  stringify: function(uri) {\r\n    var string = uri.protocol + '//' + uri.hostname;\r\n    if (uri.port) string += ':' + uri.port;\r\n    string += uri.pathname + this.queryString(uri.query) + (uri.hash || '');\r\n    return string;\r\n  },\r\n\r\n  queryString: function(query) {\r\n    var pairs = [];\r\n    for (var key in query) {\r\n      if (!query.hasOwnProperty(key)) continue;\r\n      pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(query[key]));\r\n    }\r\n    if (pairs.length === 0) return '';\r\n    return '?' + pairs.join('&');\r\n  }\r\n};\r\n\r\n},{}],81:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar array = require('./array');\r\n\r\nmodule.exports = function(options, validKeys) {\r\n  for (var key in options) {\r\n    if (array.indexOf(validKeys, key) < 0)\r\n      throw new Error('Unrecognized option: ' + key);\r\n  }\r\n};\r\n\r\n},{\"./array\":69}],82:[function(require,module,exports){\r\n(function (global){\r\n'use strict';\r\n\r\nvar WS = global.MozWebSocket || global.WebSocket;\r\n\r\nmodule.exports = {\r\n  create: function(url, protocols, options) {\r\n    if (typeof WS !== 'function') return null;\r\n    return new WS(url);\r\n  }\r\n};\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{}],83:[function(require,module,exports){\r\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\r\n  var e, m\r\n  var eLen = (nBytes * 8) - mLen - 1\r\n  var eMax = (1 << eLen) - 1\r\n  var eBias = eMax >> 1\r\n  var nBits = -7\r\n  var i = isLE ? (nBytes - 1) : 0\r\n  var d = isLE ? -1 : 1\r\n  var s = buffer[offset + i]\r\n\r\n  i += d\r\n\r\n  e = s & ((1 << (-nBits)) - 1)\r\n  s >>= (-nBits)\r\n  nBits += eLen\r\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\r\n\r\n  m = e & ((1 << (-nBits)) - 1)\r\n  e >>= (-nBits)\r\n  nBits += mLen\r\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\r\n\r\n  if (e === 0) {\r\n    e = 1 - eBias\r\n  } else if (e === eMax) {\r\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\r\n  } else {\r\n    m = m + Math.pow(2, mLen)\r\n    e = e - eBias\r\n  }\r\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\r\n}\r\n\r\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\r\n  var e, m, c\r\n  var eLen = (nBytes * 8) - mLen - 1\r\n  var eMax = (1 << eLen) - 1\r\n  var eBias = eMax >> 1\r\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\r\n  var i = isLE ? 0 : (nBytes - 1)\r\n  var d = isLE ? 1 : -1\r\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\r\n\r\n  value = Math.abs(value)\r\n\r\n  if (isNaN(value) || value === Infinity) {\r\n    m = isNaN(value) ? 1 : 0\r\n    e = eMax\r\n  } else {\r\n    e = Math.floor(Math.log(value) / Math.LN2)\r\n    if (value * (c = Math.pow(2, -e)) < 1) {\r\n      e--\r\n      c *= 2\r\n    }\r\n    if (e + eBias >= 1) {\r\n      value += rt / c\r\n    } else {\r\n      value += rt * Math.pow(2, 1 - eBias)\r\n    }\r\n    if (value * c >= 2) {\r\n      e++\r\n      c /= 2\r\n    }\r\n\r\n    if (e + eBias >= eMax) {\r\n      m = 0\r\n      e = eMax\r\n    } else if (e + eBias >= 1) {\r\n      m = ((value * c) - 1) * Math.pow(2, mLen)\r\n      e = e + eBias\r\n    } else {\r\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\r\n      e = 0\r\n    }\r\n  }\r\n\r\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\r\n\r\n  e = (e << mLen) | m\r\n  eLen += mLen\r\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\r\n\r\n  buffer[offset + i - d] |= s * 128\r\n}\r\n\r\n},{}],84:[function(require,module,exports){\r\nif (typeof Object.create === 'function') {\r\n  // implementation from standard node.js 'util' module\r\n  module.exports = function inherits(ctor, superCtor) {\r\n    ctor.super_ = superCtor\r\n    ctor.prototype = Object.create(superCtor.prototype, {\r\n      constructor: {\r\n        value: ctor,\r\n        enumerable: false,\r\n        writable: true,\r\n        configurable: true\r\n      }\r\n    });\r\n  };\r\n} else {\r\n  // old school shim for old browsers\r\n  module.exports = function inherits(ctor, superCtor) {\r\n    ctor.super_ = superCtor\r\n    var TempCtor = function () {}\r\n    TempCtor.prototype = superCtor.prototype\r\n    ctor.prototype = new TempCtor()\r\n    ctor.prototype.constructor = ctor\r\n  }\r\n}\r\n\r\n},{}],85:[function(require,module,exports){\r\n/*!\r\n * Determine if an object is a Buffer\r\n *\r\n * @author   Feross Aboukhadijeh <https://feross.org>\r\n * @license  MIT\r\n */\r\n\r\n// The _isBuffer check is for Safari 5-7 support, because it's missing\r\n// Object.prototype.constructor. Remove this eventually\r\nmodule.exports = function (obj) {\r\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\r\n}\r\n\r\nfunction isBuffer (obj) {\r\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\r\n}\r\n\r\n// For Node v0.10 support. Remove this eventually.\r\nfunction isSlowBuffer (obj) {\r\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\r\n}\r\n\r\n},{}],86:[function(require,module,exports){\r\nvar toString = {}.toString;\r\n\r\nmodule.exports = Array.isArray || function (arr) {\r\n  return toString.call(arr) == '[object Array]';\r\n};\r\n\r\n},{}],87:[function(require,module,exports){\r\n(function (global){\r\n/**\r\n * lodash (Custom Build) <https://lodash.com/>\r\n * Build: `lodash modularize exports=\"npm\" -o ./`\r\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\r\n * Released under MIT license <https://lodash.com/license>\r\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\r\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n */\r\n\r\n/** Used as the `TypeError` message for \"Functions\" methods. */\r\nvar FUNC_ERROR_TEXT = 'Expected a function';\r\n\r\n/** Used to stand-in for `undefined` hash values. */\r\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\r\n\r\n/** Used as references for various `Number` constants. */\r\nvar INFINITY = 1 / 0;\r\n\r\n/** `Object#toString` result references. */\r\nvar funcTag = '[object Function]',\r\n    genTag = '[object GeneratorFunction]',\r\n    symbolTag = '[object Symbol]';\r\n\r\n/** Used to match property names within property paths. */\r\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\r\n    reIsPlainProp = /^\\w*$/,\r\n    reLeadingDot = /^\\./,\r\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\r\n\r\n/**\r\n * Used to match `RegExp`\r\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\r\n */\r\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\r\n\r\n/** Used to match backslashes in property paths. */\r\nvar reEscapeChar = /\\\\(\\\\)?/g;\r\n\r\n/** Used to detect host constructors (Safari). */\r\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\r\n\r\n/** Detect free variable `global` from Node.js. */\r\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\r\n\r\n/** Detect free variable `self`. */\r\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\r\n\r\n/** Used as a reference to the global object. */\r\nvar root = freeGlobal || freeSelf || Function('return this')();\r\n\r\n/**\r\n * Gets the value at `key` of `object`.\r\n *\r\n * @private\r\n * @param {Object} [object] The object to query.\r\n * @param {string} key The key of the property to get.\r\n * @returns {*} Returns the property value.\r\n */\r\nfunction getValue(object, key) {\r\n  return object == null ? undefined : object[key];\r\n}\r\n\r\n/**\r\n * Checks if `value` is a host object in IE < 9.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\r\n */\r\nfunction isHostObject(value) {\r\n  // Many host objects are `Object` objects that can coerce to strings\r\n  // despite having improperly defined `toString` methods.\r\n  var result = false;\r\n  if (value != null && typeof value.toString != 'function') {\r\n    try {\r\n      result = !!(value + '');\r\n    } catch (e) {}\r\n  }\r\n  return result;\r\n}\r\n\r\n/** Used for built-in method references. */\r\nvar arrayProto = Array.prototype,\r\n    funcProto = Function.prototype,\r\n    objectProto = Object.prototype;\r\n\r\n/** Used to detect overreaching core-js shims. */\r\nvar coreJsData = root['__core-js_shared__'];\r\n\r\n/** Used to detect methods masquerading as native. */\r\nvar maskSrcKey = (function() {\r\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\r\n  return uid ? ('Symbol(src)_1.' + uid) : '';\r\n}());\r\n\r\n/** Used to resolve the decompiled source of functions. */\r\nvar funcToString = funcProto.toString;\r\n\r\n/** Used to check objects for own properties. */\r\nvar hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n/**\r\n * Used to resolve the\r\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\r\n * of values.\r\n */\r\nvar objectToString = objectProto.toString;\r\n\r\n/** Used to detect if a method is native. */\r\nvar reIsNative = RegExp('^' +\r\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\r\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\r\n);\r\n\r\n/** Built-in value references. */\r\nvar Symbol = root.Symbol,\r\n    splice = arrayProto.splice;\r\n\r\n/* Built-in method references that are verified to be native. */\r\nvar Map = getNative(root, 'Map'),\r\n    nativeCreate = getNative(Object, 'create');\r\n\r\n/** Used to convert symbols to primitives and strings. */\r\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\r\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\r\n\r\n/**\r\n * Creates a hash object.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Array} [entries] The key-value pairs to cache.\r\n */\r\nfunction Hash(entries) {\r\n  var index = -1,\r\n      length = entries ? entries.length : 0;\r\n\r\n  this.clear();\r\n  while (++index < length) {\r\n    var entry = entries[index];\r\n    this.set(entry[0], entry[1]);\r\n  }\r\n}\r\n\r\n/**\r\n * Removes all key-value entries from the hash.\r\n *\r\n * @private\r\n * @name clear\r\n * @memberOf Hash\r\n */\r\nfunction hashClear() {\r\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\r\n}\r\n\r\n/**\r\n * Removes `key` and its value from the hash.\r\n *\r\n * @private\r\n * @name delete\r\n * @memberOf Hash\r\n * @param {Object} hash The hash to modify.\r\n * @param {string} key The key of the value to remove.\r\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\r\n */\r\nfunction hashDelete(key) {\r\n  return this.has(key) && delete this.__data__[key];\r\n}\r\n\r\n/**\r\n * Gets the hash value for `key`.\r\n *\r\n * @private\r\n * @name get\r\n * @memberOf Hash\r\n * @param {string} key The key of the value to get.\r\n * @returns {*} Returns the entry value.\r\n */\r\nfunction hashGet(key) {\r\n  var data = this.__data__;\r\n  if (nativeCreate) {\r\n    var result = data[key];\r\n    return result === HASH_UNDEFINED ? undefined : result;\r\n  }\r\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\r\n}\r\n\r\n/**\r\n * Checks if a hash value for `key` exists.\r\n *\r\n * @private\r\n * @name has\r\n * @memberOf Hash\r\n * @param {string} key The key of the entry to check.\r\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\r\n */\r\nfunction hashHas(key) {\r\n  var data = this.__data__;\r\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\r\n}\r\n\r\n/**\r\n * Sets the hash `key` to `value`.\r\n *\r\n * @private\r\n * @name set\r\n * @memberOf Hash\r\n * @param {string} key The key of the value to set.\r\n * @param {*} value The value to set.\r\n * @returns {Object} Returns the hash instance.\r\n */\r\nfunction hashSet(key, value) {\r\n  var data = this.__data__;\r\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\r\n  return this;\r\n}\r\n\r\n// Add methods to `Hash`.\r\nHash.prototype.clear = hashClear;\r\nHash.prototype['delete'] = hashDelete;\r\nHash.prototype.get = hashGet;\r\nHash.prototype.has = hashHas;\r\nHash.prototype.set = hashSet;\r\n\r\n/**\r\n * Creates an list cache object.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Array} [entries] The key-value pairs to cache.\r\n */\r\nfunction ListCache(entries) {\r\n  var index = -1,\r\n      length = entries ? entries.length : 0;\r\n\r\n  this.clear();\r\n  while (++index < length) {\r\n    var entry = entries[index];\r\n    this.set(entry[0], entry[1]);\r\n  }\r\n}\r\n\r\n/**\r\n * Removes all key-value entries from the list cache.\r\n *\r\n * @private\r\n * @name clear\r\n * @memberOf ListCache\r\n */\r\nfunction listCacheClear() {\r\n  this.__data__ = [];\r\n}\r\n\r\n/**\r\n * Removes `key` and its value from the list cache.\r\n *\r\n * @private\r\n * @name delete\r\n * @memberOf ListCache\r\n * @param {string} key The key of the value to remove.\r\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\r\n */\r\nfunction listCacheDelete(key) {\r\n  var data = this.__data__,\r\n      index = assocIndexOf(data, key);\r\n\r\n  if (index < 0) {\r\n    return false;\r\n  }\r\n  var lastIndex = data.length - 1;\r\n  if (index == lastIndex) {\r\n    data.pop();\r\n  } else {\r\n    splice.call(data, index, 1);\r\n  }\r\n  return true;\r\n}\r\n\r\n/**\r\n * Gets the list cache value for `key`.\r\n *\r\n * @private\r\n * @name get\r\n * @memberOf ListCache\r\n * @param {string} key The key of the value to get.\r\n * @returns {*} Returns the entry value.\r\n */\r\nfunction listCacheGet(key) {\r\n  var data = this.__data__,\r\n      index = assocIndexOf(data, key);\r\n\r\n  return index < 0 ? undefined : data[index][1];\r\n}\r\n\r\n/**\r\n * Checks if a list cache value for `key` exists.\r\n *\r\n * @private\r\n * @name has\r\n * @memberOf ListCache\r\n * @param {string} key The key of the entry to check.\r\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\r\n */\r\nfunction listCacheHas(key) {\r\n  return assocIndexOf(this.__data__, key) > -1;\r\n}\r\n\r\n/**\r\n * Sets the list cache `key` to `value`.\r\n *\r\n * @private\r\n * @name set\r\n * @memberOf ListCache\r\n * @param {string} key The key of the value to set.\r\n * @param {*} value The value to set.\r\n * @returns {Object} Returns the list cache instance.\r\n */\r\nfunction listCacheSet(key, value) {\r\n  var data = this.__data__,\r\n      index = assocIndexOf(data, key);\r\n\r\n  if (index < 0) {\r\n    data.push([key, value]);\r\n  } else {\r\n    data[index][1] = value;\r\n  }\r\n  return this;\r\n}\r\n\r\n// Add methods to `ListCache`.\r\nListCache.prototype.clear = listCacheClear;\r\nListCache.prototype['delete'] = listCacheDelete;\r\nListCache.prototype.get = listCacheGet;\r\nListCache.prototype.has = listCacheHas;\r\nListCache.prototype.set = listCacheSet;\r\n\r\n/**\r\n * Creates a map cache object to store key-value pairs.\r\n *\r\n * @private\r\n * @constructor\r\n * @param {Array} [entries] The key-value pairs to cache.\r\n */\r\nfunction MapCache(entries) {\r\n  var index = -1,\r\n      length = entries ? entries.length : 0;\r\n\r\n  this.clear();\r\n  while (++index < length) {\r\n    var entry = entries[index];\r\n    this.set(entry[0], entry[1]);\r\n  }\r\n}\r\n\r\n/**\r\n * Removes all key-value entries from the map.\r\n *\r\n * @private\r\n * @name clear\r\n * @memberOf MapCache\r\n */\r\nfunction mapCacheClear() {\r\n  this.__data__ = {\r\n    'hash': new Hash,\r\n    'map': new (Map || ListCache),\r\n    'string': new Hash\r\n  };\r\n}\r\n\r\n/**\r\n * Removes `key` and its value from the map.\r\n *\r\n * @private\r\n * @name delete\r\n * @memberOf MapCache\r\n * @param {string} key The key of the value to remove.\r\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\r\n */\r\nfunction mapCacheDelete(key) {\r\n  return getMapData(this, key)['delete'](key);\r\n}\r\n\r\n/**\r\n * Gets the map value for `key`.\r\n *\r\n * @private\r\n * @name get\r\n * @memberOf MapCache\r\n * @param {string} key The key of the value to get.\r\n * @returns {*} Returns the entry value.\r\n */\r\nfunction mapCacheGet(key) {\r\n  return getMapData(this, key).get(key);\r\n}\r\n\r\n/**\r\n * Checks if a map value for `key` exists.\r\n *\r\n * @private\r\n * @name has\r\n * @memberOf MapCache\r\n * @param {string} key The key of the entry to check.\r\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\r\n */\r\nfunction mapCacheHas(key) {\r\n  return getMapData(this, key).has(key);\r\n}\r\n\r\n/**\r\n * Sets the map `key` to `value`.\r\n *\r\n * @private\r\n * @name set\r\n * @memberOf MapCache\r\n * @param {string} key The key of the value to set.\r\n * @param {*} value The value to set.\r\n * @returns {Object} Returns the map cache instance.\r\n */\r\nfunction mapCacheSet(key, value) {\r\n  getMapData(this, key).set(key, value);\r\n  return this;\r\n}\r\n\r\n// Add methods to `MapCache`.\r\nMapCache.prototype.clear = mapCacheClear;\r\nMapCache.prototype['delete'] = mapCacheDelete;\r\nMapCache.prototype.get = mapCacheGet;\r\nMapCache.prototype.has = mapCacheHas;\r\nMapCache.prototype.set = mapCacheSet;\r\n\r\n/**\r\n * Gets the index at which the `key` is found in `array` of key-value pairs.\r\n *\r\n * @private\r\n * @param {Array} array The array to inspect.\r\n * @param {*} key The key to search for.\r\n * @returns {number} Returns the index of the matched value, else `-1`.\r\n */\r\nfunction assocIndexOf(array, key) {\r\n  var length = array.length;\r\n  while (length--) {\r\n    if (eq(array[length][0], key)) {\r\n      return length;\r\n    }\r\n  }\r\n  return -1;\r\n}\r\n\r\n/**\r\n * The base implementation of `_.get` without support for default values.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @param {Array|string} path The path of the property to get.\r\n * @returns {*} Returns the resolved value.\r\n */\r\nfunction baseGet(object, path) {\r\n  path = isKey(path, object) ? [path] : castPath(path);\r\n\r\n  var index = 0,\r\n      length = path.length;\r\n\r\n  while (object != null && index < length) {\r\n    object = object[toKey(path[index++])];\r\n  }\r\n  return (index && index == length) ? object : undefined;\r\n}\r\n\r\n/**\r\n * The base implementation of `_.isNative` without bad shim checks.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a native function,\r\n *  else `false`.\r\n */\r\nfunction baseIsNative(value) {\r\n  if (!isObject(value) || isMasked(value)) {\r\n    return false;\r\n  }\r\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\r\n  return pattern.test(toSource(value));\r\n}\r\n\r\n/**\r\n * The base implementation of `_.toString` which doesn't convert nullish\r\n * values to empty strings.\r\n *\r\n * @private\r\n * @param {*} value The value to process.\r\n * @returns {string} Returns the string.\r\n */\r\nfunction baseToString(value) {\r\n  // Exit early for strings to avoid a performance hit in some environments.\r\n  if (typeof value == 'string') {\r\n    return value;\r\n  }\r\n  if (isSymbol(value)) {\r\n    return symbolToString ? symbolToString.call(value) : '';\r\n  }\r\n  var result = (value + '');\r\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\r\n}\r\n\r\n/**\r\n * Casts `value` to a path array if it's not one.\r\n *\r\n * @private\r\n * @param {*} value The value to inspect.\r\n * @returns {Array} Returns the cast property path array.\r\n */\r\nfunction castPath(value) {\r\n  return isArray(value) ? value : stringToPath(value);\r\n}\r\n\r\n/**\r\n * Gets the data for `map`.\r\n *\r\n * @private\r\n * @param {Object} map The map to query.\r\n * @param {string} key The reference key.\r\n * @returns {*} Returns the map data.\r\n */\r\nfunction getMapData(map, key) {\r\n  var data = map.__data__;\r\n  return isKeyable(key)\r\n    ? data[typeof key == 'string' ? 'string' : 'hash']\r\n    : data.map;\r\n}\r\n\r\n/**\r\n * Gets the native function at `key` of `object`.\r\n *\r\n * @private\r\n * @param {Object} object The object to query.\r\n * @param {string} key The key of the method to get.\r\n * @returns {*} Returns the function if it's native, else `undefined`.\r\n */\r\nfunction getNative(object, key) {\r\n  var value = getValue(object, key);\r\n  return baseIsNative(value) ? value : undefined;\r\n}\r\n\r\n/**\r\n * Checks if `value` is a property name and not a property path.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @param {Object} [object] The object to query keys on.\r\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\r\n */\r\nfunction isKey(value, object) {\r\n  if (isArray(value)) {\r\n    return false;\r\n  }\r\n  var type = typeof value;\r\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\r\n      value == null || isSymbol(value)) {\r\n    return true;\r\n  }\r\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\r\n    (object != null && value in Object(object));\r\n}\r\n\r\n/**\r\n * Checks if `value` is suitable for use as unique object key.\r\n *\r\n * @private\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\r\n */\r\nfunction isKeyable(value) {\r\n  var type = typeof value;\r\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\r\n    ? (value !== '__proto__')\r\n    : (value === null);\r\n}\r\n\r\n/**\r\n * Checks if `func` has its source masked.\r\n *\r\n * @private\r\n * @param {Function} func The function to check.\r\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\r\n */\r\nfunction isMasked(func) {\r\n  return !!maskSrcKey && (maskSrcKey in func);\r\n}\r\n\r\n/**\r\n * Converts `string` to a property path array.\r\n *\r\n * @private\r\n * @param {string} string The string to convert.\r\n * @returns {Array} Returns the property path array.\r\n */\r\nvar stringToPath = memoize(function(string) {\r\n  string = toString(string);\r\n\r\n  var result = [];\r\n  if (reLeadingDot.test(string)) {\r\n    result.push('');\r\n  }\r\n  string.replace(rePropName, function(match, number, quote, string) {\r\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\r\n  });\r\n  return result;\r\n});\r\n\r\n/**\r\n * Converts `value` to a string key if it's not a string or symbol.\r\n *\r\n * @private\r\n * @param {*} value The value to inspect.\r\n * @returns {string|symbol} Returns the key.\r\n */\r\nfunction toKey(value) {\r\n  if (typeof value == 'string' || isSymbol(value)) {\r\n    return value;\r\n  }\r\n  var result = (value + '');\r\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\r\n}\r\n\r\n/**\r\n * Converts `func` to its source code.\r\n *\r\n * @private\r\n * @param {Function} func The function to process.\r\n * @returns {string} Returns the source code.\r\n */\r\nfunction toSource(func) {\r\n  if (func != null) {\r\n    try {\r\n      return funcToString.call(func);\r\n    } catch (e) {}\r\n    try {\r\n      return (func + '');\r\n    } catch (e) {}\r\n  }\r\n  return '';\r\n}\r\n\r\n/**\r\n * Creates a function that memoizes the result of `func`. If `resolver` is\r\n * provided, it determines the cache key for storing the result based on the\r\n * arguments provided to the memoized function. By default, the first argument\r\n * provided to the memoized function is used as the map cache key. The `func`\r\n * is invoked with the `this` binding of the memoized function.\r\n *\r\n * **Note:** The cache is exposed as the `cache` property on the memoized\r\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\r\n * constructor with one whose instances implement the\r\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\r\n * method interface of `delete`, `get`, `has`, and `set`.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Function\r\n * @param {Function} func The function to have its output memoized.\r\n * @param {Function} [resolver] The function to resolve the cache key.\r\n * @returns {Function} Returns the new memoized function.\r\n * @example\r\n *\r\n * var object = { 'a': 1, 'b': 2 };\r\n * var other = { 'c': 3, 'd': 4 };\r\n *\r\n * var values = _.memoize(_.values);\r\n * values(object);\r\n * // => [1, 2]\r\n *\r\n * values(other);\r\n * // => [3, 4]\r\n *\r\n * object.a = 2;\r\n * values(object);\r\n * // => [1, 2]\r\n *\r\n * // Modify the result cache.\r\n * values.cache.set(object, ['a', 'b']);\r\n * values(object);\r\n * // => ['a', 'b']\r\n *\r\n * // Replace `_.memoize.Cache`.\r\n * _.memoize.Cache = WeakMap;\r\n */\r\nfunction memoize(func, resolver) {\r\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\r\n    throw new TypeError(FUNC_ERROR_TEXT);\r\n  }\r\n  var memoized = function() {\r\n    var args = arguments,\r\n        key = resolver ? resolver.apply(this, args) : args[0],\r\n        cache = memoized.cache;\r\n\r\n    if (cache.has(key)) {\r\n      return cache.get(key);\r\n    }\r\n    var result = func.apply(this, args);\r\n    memoized.cache = cache.set(key, result);\r\n    return result;\r\n  };\r\n  memoized.cache = new (memoize.Cache || MapCache);\r\n  return memoized;\r\n}\r\n\r\n// Assign cache to `_.memoize`.\r\nmemoize.Cache = MapCache;\r\n\r\n/**\r\n * Performs a\r\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n * comparison between two values to determine if they are equivalent.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to compare.\r\n * @param {*} other The other value to compare.\r\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\r\n * @example\r\n *\r\n * var object = { 'a': 1 };\r\n * var other = { 'a': 1 };\r\n *\r\n * _.eq(object, object);\r\n * // => true\r\n *\r\n * _.eq(object, other);\r\n * // => false\r\n *\r\n * _.eq('a', 'a');\r\n * // => true\r\n *\r\n * _.eq('a', Object('a'));\r\n * // => false\r\n *\r\n * _.eq(NaN, NaN);\r\n * // => true\r\n */\r\nfunction eq(value, other) {\r\n  return value === other || (value !== value && other !== other);\r\n}\r\n\r\n/**\r\n * Checks if `value` is classified as an `Array` object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\r\n * @example\r\n *\r\n * _.isArray([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isArray(document.body.children);\r\n * // => false\r\n *\r\n * _.isArray('abc');\r\n * // => false\r\n *\r\n * _.isArray(_.noop);\r\n * // => false\r\n */\r\nvar isArray = Array.isArray;\r\n\r\n/**\r\n * Checks if `value` is classified as a `Function` object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\r\n * @example\r\n *\r\n * _.isFunction(_);\r\n * // => true\r\n *\r\n * _.isFunction(/abc/);\r\n * // => false\r\n */\r\nfunction isFunction(value) {\r\n  // The use of `Object#toString` avoids issues with the `typeof` operator\r\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\r\n  var tag = isObject(value) ? objectToString.call(value) : '';\r\n  return tag == funcTag || tag == genTag;\r\n}\r\n\r\n/**\r\n * Checks if `value` is the\r\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\r\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 0.1.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\r\n * @example\r\n *\r\n * _.isObject({});\r\n * // => true\r\n *\r\n * _.isObject([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isObject(_.noop);\r\n * // => true\r\n *\r\n * _.isObject(null);\r\n * // => false\r\n */\r\nfunction isObject(value) {\r\n  var type = typeof value;\r\n  return !!value && (type == 'object' || type == 'function');\r\n}\r\n\r\n/**\r\n * Checks if `value` is object-like. A value is object-like if it's not `null`\r\n * and has a `typeof` result of \"object\".\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\r\n * @example\r\n *\r\n * _.isObjectLike({});\r\n * // => true\r\n *\r\n * _.isObjectLike([1, 2, 3]);\r\n * // => true\r\n *\r\n * _.isObjectLike(_.noop);\r\n * // => false\r\n *\r\n * _.isObjectLike(null);\r\n * // => false\r\n */\r\nfunction isObjectLike(value) {\r\n  return !!value && typeof value == 'object';\r\n}\r\n\r\n/**\r\n * Checks if `value` is classified as a `Symbol` primitive or object.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to check.\r\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\r\n * @example\r\n *\r\n * _.isSymbol(Symbol.iterator);\r\n * // => true\r\n *\r\n * _.isSymbol('abc');\r\n * // => false\r\n */\r\nfunction isSymbol(value) {\r\n  return typeof value == 'symbol' ||\r\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\r\n}\r\n\r\n/**\r\n * Converts `value` to a string. An empty string is returned for `null`\r\n * and `undefined` values. The sign of `-0` is preserved.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 4.0.0\r\n * @category Lang\r\n * @param {*} value The value to process.\r\n * @returns {string} Returns the string.\r\n * @example\r\n *\r\n * _.toString(null);\r\n * // => ''\r\n *\r\n * _.toString(-0);\r\n * // => '-0'\r\n *\r\n * _.toString([1, 2, 3]);\r\n * // => '1,2,3'\r\n */\r\nfunction toString(value) {\r\n  return value == null ? '' : baseToString(value);\r\n}\r\n\r\n/**\r\n * Gets the value at `path` of `object`. If the resolved value is\r\n * `undefined`, the `defaultValue` is returned in its place.\r\n *\r\n * @static\r\n * @memberOf _\r\n * @since 3.7.0\r\n * @category Object\r\n * @param {Object} object The object to query.\r\n * @param {Array|string} path The path of the property to get.\r\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\r\n * @returns {*} Returns the resolved value.\r\n * @example\r\n *\r\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\r\n *\r\n * _.get(object, 'a[0].b.c');\r\n * // => 3\r\n *\r\n * _.get(object, ['a', '0', 'b', 'c']);\r\n * // => 3\r\n *\r\n * _.get(object, 'a.b.c', 'default');\r\n * // => 'default'\r\n */\r\nfunction get(object, path, defaultValue) {\r\n  var result = object == null ? undefined : baseGet(object, path);\r\n  return result === undefined ? defaultValue : result;\r\n}\r\n\r\nmodule.exports = get;\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{}],88:[function(require,module,exports){\r\n(function (global){\r\n/**\r\n * @license\r\n * Lodash (Custom Build) <https://lodash.com/>\r\n * Build: `lodash core -o ./dist/lodash.core.js`\r\n * Copyright JS Foundation and other contributors <https://js.foundation/>\r\n * Released under MIT license <https://lodash.com/license>\r\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\r\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\r\n */\r\n;(function() {\r\n\r\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\r\n  var undefined;\r\n\r\n  /** Used as the semantic version number. */\r\n  var VERSION = '4.17.10';\r\n\r\n  /** Error message constants. */\r\n  var FUNC_ERROR_TEXT = 'Expected a function';\r\n\r\n  /** Used to compose bitmasks for value comparisons. */\r\n  var COMPARE_PARTIAL_FLAG = 1,\r\n      COMPARE_UNORDERED_FLAG = 2;\r\n\r\n  /** Used to compose bitmasks for function metadata. */\r\n  var WRAP_BIND_FLAG = 1,\r\n      WRAP_PARTIAL_FLAG = 32;\r\n\r\n  /** Used as references for various `Number` constants. */\r\n  var INFINITY = 1 / 0,\r\n      MAX_SAFE_INTEGER = 9007199254740991;\r\n\r\n  /** `Object#toString` result references. */\r\n  var argsTag = '[object Arguments]',\r\n      arrayTag = '[object Array]',\r\n      asyncTag = '[object AsyncFunction]',\r\n      boolTag = '[object Boolean]',\r\n      dateTag = '[object Date]',\r\n      errorTag = '[object Error]',\r\n      funcTag = '[object Function]',\r\n      genTag = '[object GeneratorFunction]',\r\n      numberTag = '[object Number]',\r\n      objectTag = '[object Object]',\r\n      proxyTag = '[object Proxy]',\r\n      regexpTag = '[object RegExp]',\r\n      stringTag = '[object String]';\r\n\r\n  /** Used to match HTML entities and HTML characters. */\r\n  var reUnescapedHtml = /[&<>\"']/g,\r\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\r\n\r\n  /** Used to detect unsigned integer values. */\r\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\r\n\r\n  /** Used to map characters to HTML entities. */\r\n  var htmlEscapes = {\r\n    '&': '&amp;',\r\n    '<': '&lt;',\r\n    '>': '&gt;',\r\n    '\"': '&quot;',\r\n    \"'\": '&#39;'\r\n  };\r\n\r\n  /** Detect free variable `global` from Node.js. */\r\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\r\n\r\n  /** Detect free variable `self`. */\r\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\r\n\r\n  /** Used as a reference to the global object. */\r\n  var root = freeGlobal || freeSelf || Function('return this')();\r\n\r\n  /** Detect free variable `exports`. */\r\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\r\n\r\n  /** Detect free variable `module`. */\r\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\r\n\r\n  /*--------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Appends the elements of `values` to `array`.\r\n   *\r\n   * @private\r\n   * @param {Array} array The array to modify.\r\n   * @param {Array} values The values to append.\r\n   * @returns {Array} Returns `array`.\r\n   */\r\n  function arrayPush(array, values) {\r\n    array.push.apply(array, values);\r\n    return array;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\r\n   * support for iteratee shorthands.\r\n   *\r\n   * @private\r\n   * @param {Array} array The array to inspect.\r\n   * @param {Function} predicate The function invoked per iteration.\r\n   * @param {number} fromIndex The index to search from.\r\n   * @param {boolean} [fromRight] Specify iterating from right to left.\r\n   * @returns {number} Returns the index of the matched value, else `-1`.\r\n   */\r\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\r\n    var length = array.length,\r\n        index = fromIndex + (fromRight ? 1 : -1);\r\n\r\n    while ((fromRight ? index-- : ++index < length)) {\r\n      if (predicate(array[index], index, array)) {\r\n        return index;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.property` without support for deep paths.\r\n   *\r\n   * @private\r\n   * @param {string} key The key of the property to get.\r\n   * @returns {Function} Returns the new accessor function.\r\n   */\r\n  function baseProperty(key) {\r\n    return function(object) {\r\n      return object == null ? undefined : object[key];\r\n    };\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.propertyOf` without support for deep paths.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to query.\r\n   * @returns {Function} Returns the new accessor function.\r\n   */\r\n  function basePropertyOf(object) {\r\n    return function(key) {\r\n      return object == null ? undefined : object[key];\r\n    };\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\r\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\r\n   *\r\n   * @private\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} iteratee The function invoked per iteration.\r\n   * @param {*} accumulator The initial value.\r\n   * @param {boolean} initAccum Specify using the first or last element of\r\n   *  `collection` as the initial value.\r\n   * @param {Function} eachFunc The function to iterate over `collection`.\r\n   * @returns {*} Returns the accumulated value.\r\n   */\r\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\r\n    eachFunc(collection, function(value, index, collection) {\r\n      accumulator = initAccum\r\n        ? (initAccum = false, value)\r\n        : iteratee(accumulator, value, index, collection);\r\n    });\r\n    return accumulator;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\r\n   * array of `object` property values corresponding to the property names\r\n   * of `props`.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to query.\r\n   * @param {Array} props The property names to get values for.\r\n   * @returns {Object} Returns the array of property values.\r\n   */\r\n  function baseValues(object, props) {\r\n    return baseMap(props, function(key) {\r\n      return object[key];\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Used by `_.escape` to convert characters to HTML entities.\r\n   *\r\n   * @private\r\n   * @param {string} chr The matched character to escape.\r\n   * @returns {string} Returns the escaped character.\r\n   */\r\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\r\n\r\n  /**\r\n   * Creates a unary function that invokes `func` with its argument transformed.\r\n   *\r\n   * @private\r\n   * @param {Function} func The function to wrap.\r\n   * @param {Function} transform The argument transform.\r\n   * @returns {Function} Returns the new function.\r\n   */\r\n  function overArg(func, transform) {\r\n    return function(arg) {\r\n      return func(transform(arg));\r\n    };\r\n  }\r\n\r\n  /*--------------------------------------------------------------------------*/\r\n\r\n  /** Used for built-in method references. */\r\n  var arrayProto = Array.prototype,\r\n      objectProto = Object.prototype;\r\n\r\n  /** Used to check objects for own properties. */\r\n  var hasOwnProperty = objectProto.hasOwnProperty;\r\n\r\n  /** Used to generate unique IDs. */\r\n  var idCounter = 0;\r\n\r\n  /**\r\n   * Used to resolve the\r\n   * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\r\n   * of values.\r\n   */\r\n  var nativeObjectToString = objectProto.toString;\r\n\r\n  /** Used to restore the original `_` reference in `_.noConflict`. */\r\n  var oldDash = root._;\r\n\r\n  /** Built-in value references. */\r\n  var objectCreate = Object.create,\r\n      propertyIsEnumerable = objectProto.propertyIsEnumerable;\r\n\r\n  /* Built-in method references for those with the same name as other `lodash` methods. */\r\n  var nativeIsFinite = root.isFinite,\r\n      nativeKeys = overArg(Object.keys, Object),\r\n      nativeMax = Math.max;\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Creates a `lodash` object which wraps `value` to enable implicit method\r\n   * chain sequences. Methods that operate on and return arrays, collections,\r\n   * and functions can be chained together. Methods that retrieve a single value\r\n   * or may return a primitive value will automatically end the chain sequence\r\n   * and return the unwrapped value. Otherwise, the value must be unwrapped\r\n   * with `_#value`.\r\n   *\r\n   * Explicit chain sequences, which must be unwrapped with `_#value`, may be\r\n   * enabled using `_.chain`.\r\n   *\r\n   * The execution of chained methods is lazy, that is, it's deferred until\r\n   * `_#value` is implicitly or explicitly called.\r\n   *\r\n   * Lazy evaluation allows several methods to support shortcut fusion.\r\n   * Shortcut fusion is an optimization to merge iteratee calls; this avoids\r\n   * the creation of intermediate arrays and can greatly reduce the number of\r\n   * iteratee executions. Sections of a chain sequence qualify for shortcut\r\n   * fusion if the section is applied to an array and iteratees accept only\r\n   * one argument. The heuristic for whether a section qualifies for shortcut\r\n   * fusion is subject to change.\r\n   *\r\n   * Chaining is supported in custom builds as long as the `_#value` method is\r\n   * directly or indirectly included in the build.\r\n   *\r\n   * In addition to lodash methods, wrappers have `Array` and `String` methods.\r\n   *\r\n   * The wrapper `Array` methods are:\r\n   * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\r\n   *\r\n   * The wrapper `String` methods are:\r\n   * `replace` and `split`\r\n   *\r\n   * The wrapper methods that support shortcut fusion are:\r\n   * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\r\n   * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\r\n   * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\r\n   *\r\n   * The chainable wrapper methods are:\r\n   * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\r\n   * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\r\n   * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\r\n   * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\r\n   * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\r\n   * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\r\n   * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\r\n   * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\r\n   * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\r\n   * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\r\n   * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\r\n   * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\r\n   * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\r\n   * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\r\n   * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\r\n   * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\r\n   * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\r\n   * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\r\n   * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\r\n   * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\r\n   * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\r\n   * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\r\n   * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\r\n   * `zipObject`, `zipObjectDeep`, and `zipWith`\r\n   *\r\n   * The wrapper methods that are **not** chainable by default are:\r\n   * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\r\n   * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\r\n   * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\r\n   * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\r\n   * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\r\n   * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\r\n   * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\r\n   * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\r\n   * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\r\n   * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\r\n   * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\r\n   * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\r\n   * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\r\n   * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\r\n   * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\r\n   * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\r\n   * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\r\n   * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\r\n   * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\r\n   * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\r\n   * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\r\n   * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\r\n   * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\r\n   * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\r\n   * `upperFirst`, `value`, and `words`\r\n   *\r\n   * @name _\r\n   * @constructor\r\n   * @category Seq\r\n   * @param {*} value The value to wrap in a `lodash` instance.\r\n   * @returns {Object} Returns the new `lodash` wrapper instance.\r\n   * @example\r\n   *\r\n   * function square(n) {\r\n   *   return n * n;\r\n   * }\r\n   *\r\n   * var wrapped = _([1, 2, 3]);\r\n   *\r\n   * // Returns an unwrapped value.\r\n   * wrapped.reduce(_.add);\r\n   * // => 6\r\n   *\r\n   * // Returns a wrapped value.\r\n   * var squares = wrapped.map(square);\r\n   *\r\n   * _.isArray(squares);\r\n   * // => false\r\n   *\r\n   * _.isArray(squares.value());\r\n   * // => true\r\n   */\r\n  function lodash(value) {\r\n    return value instanceof LodashWrapper\r\n      ? value\r\n      : new LodashWrapper(value);\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.create` without support for assigning\r\n   * properties to the created object.\r\n   *\r\n   * @private\r\n   * @param {Object} proto The object to inherit from.\r\n   * @returns {Object} Returns the new object.\r\n   */\r\n  var baseCreate = (function() {\r\n    function object() {}\r\n    return function(proto) {\r\n      if (!isObject(proto)) {\r\n        return {};\r\n      }\r\n      if (objectCreate) {\r\n        return objectCreate(proto);\r\n      }\r\n      object.prototype = proto;\r\n      var result = new object;\r\n      object.prototype = undefined;\r\n      return result;\r\n    };\r\n  }());\r\n\r\n  /**\r\n   * The base constructor for creating `lodash` wrapper objects.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to wrap.\r\n   * @param {boolean} [chainAll] Enable explicit method chain sequences.\r\n   */\r\n  function LodashWrapper(value, chainAll) {\r\n    this.__wrapped__ = value;\r\n    this.__actions__ = [];\r\n    this.__chain__ = !!chainAll;\r\n  }\r\n\r\n  LodashWrapper.prototype = baseCreate(lodash.prototype);\r\n  LodashWrapper.prototype.constructor = LodashWrapper;\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Assigns `value` to `key` of `object` if the existing value is not equivalent\r\n   * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n   * for equality comparisons.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to modify.\r\n   * @param {string} key The key of the property to assign.\r\n   * @param {*} value The value to assign.\r\n   */\r\n  function assignValue(object, key, value) {\r\n    var objValue = object[key];\r\n    if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\r\n        (value === undefined && !(key in object))) {\r\n      baseAssignValue(object, key, value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `assignValue` and `assignMergeValue` without\r\n   * value checks.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to modify.\r\n   * @param {string} key The key of the property to assign.\r\n   * @param {*} value The value to assign.\r\n   */\r\n  function baseAssignValue(object, key, value) {\r\n    object[key] = value;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.delay` and `_.defer` which accepts `args`\r\n   * to provide to `func`.\r\n   *\r\n   * @private\r\n   * @param {Function} func The function to delay.\r\n   * @param {number} wait The number of milliseconds to delay invocation.\r\n   * @param {Array} args The arguments to provide to `func`.\r\n   * @returns {number|Object} Returns the timer id or timeout object.\r\n   */\r\n  function baseDelay(func, wait, args) {\r\n    if (typeof func != 'function') {\r\n      throw new TypeError(FUNC_ERROR_TEXT);\r\n    }\r\n    return setTimeout(function() { func.apply(undefined, args); }, wait);\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.forEach` without support for iteratee shorthands.\r\n   *\r\n   * @private\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} iteratee The function invoked per iteration.\r\n   * @returns {Array|Object} Returns `collection`.\r\n   */\r\n  var baseEach = createBaseEach(baseForOwn);\r\n\r\n  /**\r\n   * The base implementation of `_.every` without support for iteratee shorthands.\r\n   *\r\n   * @private\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} predicate The function invoked per iteration.\r\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\r\n   *  else `false`\r\n   */\r\n  function baseEvery(collection, predicate) {\r\n    var result = true;\r\n    baseEach(collection, function(value, index, collection) {\r\n      result = !!predicate(value, index, collection);\r\n      return result;\r\n    });\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of methods like `_.max` and `_.min` which accepts a\r\n   * `comparator` to determine the extremum value.\r\n   *\r\n   * @private\r\n   * @param {Array} array The array to iterate over.\r\n   * @param {Function} iteratee The iteratee invoked per iteration.\r\n   * @param {Function} comparator The comparator used to compare values.\r\n   * @returns {*} Returns the extremum value.\r\n   */\r\n  function baseExtremum(array, iteratee, comparator) {\r\n    var index = -1,\r\n        length = array.length;\r\n\r\n    while (++index < length) {\r\n      var value = array[index],\r\n          current = iteratee(value);\r\n\r\n      if (current != null && (computed === undefined\r\n            ? (current === current && !false)\r\n            : comparator(current, computed)\r\n          )) {\r\n        var computed = current,\r\n            result = value;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.filter` without support for iteratee shorthands.\r\n   *\r\n   * @private\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} predicate The function invoked per iteration.\r\n   * @returns {Array} Returns the new filtered array.\r\n   */\r\n  function baseFilter(collection, predicate) {\r\n    var result = [];\r\n    baseEach(collection, function(value, index, collection) {\r\n      if (predicate(value, index, collection)) {\r\n        result.push(value);\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.flatten` with support for restricting flattening.\r\n   *\r\n   * @private\r\n   * @param {Array} array The array to flatten.\r\n   * @param {number} depth The maximum recursion depth.\r\n   * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\r\n   * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\r\n   * @param {Array} [result=[]] The initial result value.\r\n   * @returns {Array} Returns the new flattened array.\r\n   */\r\n  function baseFlatten(array, depth, predicate, isStrict, result) {\r\n    var index = -1,\r\n        length = array.length;\r\n\r\n    predicate || (predicate = isFlattenable);\r\n    result || (result = []);\r\n\r\n    while (++index < length) {\r\n      var value = array[index];\r\n      if (depth > 0 && predicate(value)) {\r\n        if (depth > 1) {\r\n          // Recursively flatten arrays (susceptible to call stack limits).\r\n          baseFlatten(value, depth - 1, predicate, isStrict, result);\r\n        } else {\r\n          arrayPush(result, value);\r\n        }\r\n      } else if (!isStrict) {\r\n        result[result.length] = value;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `baseForOwn` which iterates over `object`\r\n   * properties returned by `keysFunc` and invokes `iteratee` for each property.\r\n   * Iteratee functions may exit iteration early by explicitly returning `false`.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to iterate over.\r\n   * @param {Function} iteratee The function invoked per iteration.\r\n   * @param {Function} keysFunc The function to get the keys of `object`.\r\n   * @returns {Object} Returns `object`.\r\n   */\r\n  var baseFor = createBaseFor();\r\n\r\n  /**\r\n   * The base implementation of `_.forOwn` without support for iteratee shorthands.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to iterate over.\r\n   * @param {Function} iteratee The function invoked per iteration.\r\n   * @returns {Object} Returns `object`.\r\n   */\r\n  function baseForOwn(object, iteratee) {\r\n    return object && baseFor(object, iteratee, keys);\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.functions` which creates an array of\r\n   * `object` function property names filtered from `props`.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to inspect.\r\n   * @param {Array} props The property names to filter.\r\n   * @returns {Array} Returns the function names.\r\n   */\r\n  function baseFunctions(object, props) {\r\n    return baseFilter(props, function(key) {\r\n      return isFunction(object[key]);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `getTag` without fallbacks for buggy environments.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to query.\r\n   * @returns {string} Returns the `toStringTag`.\r\n   */\r\n  function baseGetTag(value) {\r\n    return objectToString(value);\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.gt` which doesn't coerce arguments.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to compare.\r\n   * @param {*} other The other value to compare.\r\n   * @returns {boolean} Returns `true` if `value` is greater than `other`,\r\n   *  else `false`.\r\n   */\r\n  function baseGt(value, other) {\r\n    return value > other;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.isArguments`.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is an `arguments` object,\r\n   */\r\n  var baseIsArguments = noop;\r\n\r\n  /**\r\n   * The base implementation of `_.isDate` without Node.js optimizations.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\r\n   */\r\n  function baseIsDate(value) {\r\n    return isObjectLike(value) && baseGetTag(value) == dateTag;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.isEqual` which supports partial comparisons\r\n   * and tracks traversed objects.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to compare.\r\n   * @param {*} other The other value to compare.\r\n   * @param {boolean} bitmask The bitmask flags.\r\n   *  1 - Unordered comparison\r\n   *  2 - Partial comparison\r\n   * @param {Function} [customizer] The function to customize comparisons.\r\n   * @param {Object} [stack] Tracks traversed `value` and `other` objects.\r\n   * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\r\n   */\r\n  function baseIsEqual(value, other, bitmask, customizer, stack) {\r\n    if (value === other) {\r\n      return true;\r\n    }\r\n    if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\r\n      return value !== value && other !== other;\r\n    }\r\n    return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\r\n  }\r\n\r\n  /**\r\n   * A specialized version of `baseIsEqual` for arrays and objects which performs\r\n   * deep comparisons and tracks traversed objects enabling objects with circular\r\n   * references to be compared.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to compare.\r\n   * @param {Object} other The other object to compare.\r\n   * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\r\n   * @param {Function} customizer The function to customize comparisons.\r\n   * @param {Function} equalFunc The function to determine equivalents of values.\r\n   * @param {Object} [stack] Tracks traversed `object` and `other` objects.\r\n   * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\r\n   */\r\n  function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\r\n    var objIsArr = isArray(object),\r\n        othIsArr = isArray(other),\r\n        objTag = objIsArr ? arrayTag : baseGetTag(object),\r\n        othTag = othIsArr ? arrayTag : baseGetTag(other);\r\n\r\n    objTag = objTag == argsTag ? objectTag : objTag;\r\n    othTag = othTag == argsTag ? objectTag : othTag;\r\n\r\n    var objIsObj = objTag == objectTag,\r\n        othIsObj = othTag == objectTag,\r\n        isSameTag = objTag == othTag;\r\n\r\n    stack || (stack = []);\r\n    var objStack = find(stack, function(entry) {\r\n      return entry[0] == object;\r\n    });\r\n    var othStack = find(stack, function(entry) {\r\n      return entry[0] == other;\r\n    });\r\n    if (objStack && othStack) {\r\n      return objStack[1] == other;\r\n    }\r\n    stack.push([object, other]);\r\n    stack.push([other, object]);\r\n    if (isSameTag && !objIsObj) {\r\n      var result = (objIsArr)\r\n        ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\r\n        : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\r\n      stack.pop();\r\n      return result;\r\n    }\r\n    if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\r\n      var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\r\n          othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\r\n\r\n      if (objIsWrapped || othIsWrapped) {\r\n        var objUnwrapped = objIsWrapped ? object.value() : object,\r\n            othUnwrapped = othIsWrapped ? other.value() : other;\r\n\r\n        var result = equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\r\n        stack.pop();\r\n        return result;\r\n      }\r\n    }\r\n    if (!isSameTag) {\r\n      return false;\r\n    }\r\n    var result = equalObjects(object, other, bitmask, customizer, equalFunc, stack);\r\n    stack.pop();\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.isRegExp` without Node.js optimizations.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\r\n   */\r\n  function baseIsRegExp(value) {\r\n    return isObjectLike(value) && baseGetTag(value) == regexpTag;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.iteratee`.\r\n   *\r\n   * @private\r\n   * @param {*} [value=_.identity] The value to convert to an iteratee.\r\n   * @returns {Function} Returns the iteratee.\r\n   */\r\n  function baseIteratee(func) {\r\n    if (typeof func == 'function') {\r\n      return func;\r\n    }\r\n    if (func == null) {\r\n      return identity;\r\n    }\r\n    return (typeof func == 'object' ? baseMatches : baseProperty)(func);\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.lt` which doesn't coerce arguments.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to compare.\r\n   * @param {*} other The other value to compare.\r\n   * @returns {boolean} Returns `true` if `value` is less than `other`,\r\n   *  else `false`.\r\n   */\r\n  function baseLt(value, other) {\r\n    return value < other;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.map` without support for iteratee shorthands.\r\n   *\r\n   * @private\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} iteratee The function invoked per iteration.\r\n   * @returns {Array} Returns the new mapped array.\r\n   */\r\n  function baseMap(collection, iteratee) {\r\n    var index = -1,\r\n        result = isArrayLike(collection) ? Array(collection.length) : [];\r\n\r\n    baseEach(collection, function(value, key, collection) {\r\n      result[++index] = iteratee(value, key, collection);\r\n    });\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.matches` which doesn't clone `source`.\r\n   *\r\n   * @private\r\n   * @param {Object} source The object of property values to match.\r\n   * @returns {Function} Returns the new spec function.\r\n   */\r\n  function baseMatches(source) {\r\n    var props = nativeKeys(source);\r\n    return function(object) {\r\n      var length = props.length;\r\n      if (object == null) {\r\n        return !length;\r\n      }\r\n      object = Object(object);\r\n      while (length--) {\r\n        var key = props[length];\r\n        if (!(key in object &&\r\n              baseIsEqual(source[key], object[key], COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG)\r\n            )) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.pick` without support for individual\r\n   * property identifiers.\r\n   *\r\n   * @private\r\n   * @param {Object} object The source object.\r\n   * @param {string[]} paths The property paths to pick.\r\n   * @returns {Object} Returns the new object.\r\n   */\r\n  function basePick(object, props) {\r\n    object = Object(object);\r\n    return reduce(props, function(result, key) {\r\n      if (key in object) {\r\n        result[key] = object[key];\r\n      }\r\n      return result;\r\n    }, {});\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.rest` which doesn't validate or coerce arguments.\r\n   *\r\n   * @private\r\n   * @param {Function} func The function to apply a rest parameter to.\r\n   * @param {number} [start=func.length-1] The start position of the rest parameter.\r\n   * @returns {Function} Returns the new function.\r\n   */\r\n  function baseRest(func, start) {\r\n    return setToString(overRest(func, start, identity), func + '');\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.slice` without an iteratee call guard.\r\n   *\r\n   * @private\r\n   * @param {Array} array The array to slice.\r\n   * @param {number} [start=0] The start position.\r\n   * @param {number} [end=array.length] The end position.\r\n   * @returns {Array} Returns the slice of `array`.\r\n   */\r\n  function baseSlice(array, start, end) {\r\n    var index = -1,\r\n        length = array.length;\r\n\r\n    if (start < 0) {\r\n      start = -start > length ? 0 : (length + start);\r\n    }\r\n    end = end > length ? length : end;\r\n    if (end < 0) {\r\n      end += length;\r\n    }\r\n    length = start > end ? 0 : ((end - start) >>> 0);\r\n    start >>>= 0;\r\n\r\n    var result = Array(length);\r\n    while (++index < length) {\r\n      result[index] = array[index + start];\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Copies the values of `source` to `array`.\r\n   *\r\n   * @private\r\n   * @param {Array} source The array to copy values from.\r\n   * @param {Array} [array=[]] The array to copy values to.\r\n   * @returns {Array} Returns `array`.\r\n   */\r\n  function copyArray(source) {\r\n    return baseSlice(source, 0, source.length);\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `_.some` without support for iteratee shorthands.\r\n   *\r\n   * @private\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} predicate The function invoked per iteration.\r\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\r\n   *  else `false`.\r\n   */\r\n  function baseSome(collection, predicate) {\r\n    var result;\r\n\r\n    baseEach(collection, function(value, index, collection) {\r\n      result = predicate(value, index, collection);\r\n      return !result;\r\n    });\r\n    return !!result;\r\n  }\r\n\r\n  /**\r\n   * The base implementation of `wrapperValue` which returns the result of\r\n   * performing a sequence of actions on the unwrapped `value`, where each\r\n   * successive action is supplied the return value of the previous.\r\n   *\r\n   * @private\r\n   * @param {*} value The unwrapped value.\r\n   * @param {Array} actions Actions to perform to resolve the unwrapped value.\r\n   * @returns {*} Returns the resolved value.\r\n   */\r\n  function baseWrapperValue(value, actions) {\r\n    var result = value;\r\n    return reduce(actions, function(result, action) {\r\n      return action.func.apply(action.thisArg, arrayPush([result], action.args));\r\n    }, result);\r\n  }\r\n\r\n  /**\r\n   * Compares values to sort them in ascending order.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to compare.\r\n   * @param {*} other The other value to compare.\r\n   * @returns {number} Returns the sort order indicator for `value`.\r\n   */\r\n  function compareAscending(value, other) {\r\n    if (value !== other) {\r\n      var valIsDefined = value !== undefined,\r\n          valIsNull = value === null,\r\n          valIsReflexive = value === value,\r\n          valIsSymbol = false;\r\n\r\n      var othIsDefined = other !== undefined,\r\n          othIsNull = other === null,\r\n          othIsReflexive = other === other,\r\n          othIsSymbol = false;\r\n\r\n      if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\r\n          (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\r\n          (valIsNull && othIsDefined && othIsReflexive) ||\r\n          (!valIsDefined && othIsReflexive) ||\r\n          !valIsReflexive) {\r\n        return 1;\r\n      }\r\n      if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\r\n          (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\r\n          (othIsNull && valIsDefined && valIsReflexive) ||\r\n          (!othIsDefined && valIsReflexive) ||\r\n          !othIsReflexive) {\r\n        return -1;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  /**\r\n   * Copies properties of `source` to `object`.\r\n   *\r\n   * @private\r\n   * @param {Object} source The object to copy properties from.\r\n   * @param {Array} props The property identifiers to copy.\r\n   * @param {Object} [object={}] The object to copy properties to.\r\n   * @param {Function} [customizer] The function to customize copied values.\r\n   * @returns {Object} Returns `object`.\r\n   */\r\n  function copyObject(source, props, object, customizer) {\r\n    var isNew = !object;\r\n    object || (object = {});\r\n\r\n    var index = -1,\r\n        length = props.length;\r\n\r\n    while (++index < length) {\r\n      var key = props[index];\r\n\r\n      var newValue = customizer\r\n        ? customizer(object[key], source[key], key, object, source)\r\n        : undefined;\r\n\r\n      if (newValue === undefined) {\r\n        newValue = source[key];\r\n      }\r\n      if (isNew) {\r\n        baseAssignValue(object, key, newValue);\r\n      } else {\r\n        assignValue(object, key, newValue);\r\n      }\r\n    }\r\n    return object;\r\n  }\r\n\r\n  /**\r\n   * Creates a function like `_.assign`.\r\n   *\r\n   * @private\r\n   * @param {Function} assigner The function to assign values.\r\n   * @returns {Function} Returns the new assigner function.\r\n   */\r\n  function createAssigner(assigner) {\r\n    return baseRest(function(object, sources) {\r\n      var index = -1,\r\n          length = sources.length,\r\n          customizer = length > 1 ? sources[length - 1] : undefined;\r\n\r\n      customizer = (assigner.length > 3 && typeof customizer == 'function')\r\n        ? (length--, customizer)\r\n        : undefined;\r\n\r\n      object = Object(object);\r\n      while (++index < length) {\r\n        var source = sources[index];\r\n        if (source) {\r\n          assigner(object, source, index, customizer);\r\n        }\r\n      }\r\n      return object;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates a `baseEach` or `baseEachRight` function.\r\n   *\r\n   * @private\r\n   * @param {Function} eachFunc The function to iterate over a collection.\r\n   * @param {boolean} [fromRight] Specify iterating from right to left.\r\n   * @returns {Function} Returns the new base function.\r\n   */\r\n  function createBaseEach(eachFunc, fromRight) {\r\n    return function(collection, iteratee) {\r\n      if (collection == null) {\r\n        return collection;\r\n      }\r\n      if (!isArrayLike(collection)) {\r\n        return eachFunc(collection, iteratee);\r\n      }\r\n      var length = collection.length,\r\n          index = fromRight ? length : -1,\r\n          iterable = Object(collection);\r\n\r\n      while ((fromRight ? index-- : ++index < length)) {\r\n        if (iteratee(iterable[index], index, iterable) === false) {\r\n          break;\r\n        }\r\n      }\r\n      return collection;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Creates a base function for methods like `_.forIn` and `_.forOwn`.\r\n   *\r\n   * @private\r\n   * @param {boolean} [fromRight] Specify iterating from right to left.\r\n   * @returns {Function} Returns the new base function.\r\n   */\r\n  function createBaseFor(fromRight) {\r\n    return function(object, iteratee, keysFunc) {\r\n      var index = -1,\r\n          iterable = Object(object),\r\n          props = keysFunc(object),\r\n          length = props.length;\r\n\r\n      while (length--) {\r\n        var key = props[fromRight ? length : ++index];\r\n        if (iteratee(iterable[key], key, iterable) === false) {\r\n          break;\r\n        }\r\n      }\r\n      return object;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Creates a function that produces an instance of `Ctor` regardless of\r\n   * whether it was invoked as part of a `new` expression or by `call` or `apply`.\r\n   *\r\n   * @private\r\n   * @param {Function} Ctor The constructor to wrap.\r\n   * @returns {Function} Returns the new wrapped function.\r\n   */\r\n  function createCtor(Ctor) {\r\n    return function() {\r\n      // Use a `switch` statement to work with class constructors. See\r\n      // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\r\n      // for more details.\r\n      var args = arguments;\r\n      var thisBinding = baseCreate(Ctor.prototype),\r\n          result = Ctor.apply(thisBinding, args);\r\n\r\n      // Mimic the constructor's `return` behavior.\r\n      // See https://es5.github.io/#x13.2.2 for more details.\r\n      return isObject(result) ? result : thisBinding;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Creates a `_.find` or `_.findLast` function.\r\n   *\r\n   * @private\r\n   * @param {Function} findIndexFunc The function to find the collection index.\r\n   * @returns {Function} Returns the new find function.\r\n   */\r\n  function createFind(findIndexFunc) {\r\n    return function(collection, predicate, fromIndex) {\r\n      var iterable = Object(collection);\r\n      if (!isArrayLike(collection)) {\r\n        var iteratee = baseIteratee(predicate, 3);\r\n        collection = keys(collection);\r\n        predicate = function(key) { return iteratee(iterable[key], key, iterable); };\r\n      }\r\n      var index = findIndexFunc(collection, predicate, fromIndex);\r\n      return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Creates a function that wraps `func` to invoke it with the `this` binding\r\n   * of `thisArg` and `partials` prepended to the arguments it receives.\r\n   *\r\n   * @private\r\n   * @param {Function} func The function to wrap.\r\n   * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\r\n   * @param {*} thisArg The `this` binding of `func`.\r\n   * @param {Array} partials The arguments to prepend to those provided to\r\n   *  the new function.\r\n   * @returns {Function} Returns the new wrapped function.\r\n   */\r\n  function createPartial(func, bitmask, thisArg, partials) {\r\n    if (typeof func != 'function') {\r\n      throw new TypeError(FUNC_ERROR_TEXT);\r\n    }\r\n    var isBind = bitmask & WRAP_BIND_FLAG,\r\n        Ctor = createCtor(func);\r\n\r\n    function wrapper() {\r\n      var argsIndex = -1,\r\n          argsLength = arguments.length,\r\n          leftIndex = -1,\r\n          leftLength = partials.length,\r\n          args = Array(leftLength + argsLength),\r\n          fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\r\n\r\n      while (++leftIndex < leftLength) {\r\n        args[leftIndex] = partials[leftIndex];\r\n      }\r\n      while (argsLength--) {\r\n        args[leftIndex++] = arguments[++argsIndex];\r\n      }\r\n      return fn.apply(isBind ? thisArg : this, args);\r\n    }\r\n    return wrapper;\r\n  }\r\n\r\n  /**\r\n   * A specialized version of `baseIsEqualDeep` for arrays with support for\r\n   * partial deep comparisons.\r\n   *\r\n   * @private\r\n   * @param {Array} array The array to compare.\r\n   * @param {Array} other The other array to compare.\r\n   * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\r\n   * @param {Function} customizer The function to customize comparisons.\r\n   * @param {Function} equalFunc The function to determine equivalents of values.\r\n   * @param {Object} stack Tracks traversed `array` and `other` objects.\r\n   * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\r\n   */\r\n  function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\r\n    var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\r\n        arrLength = array.length,\r\n        othLength = other.length;\r\n\r\n    if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\r\n      return false;\r\n    }\r\n    var index = -1,\r\n        result = true,\r\n        seen = (bitmask & COMPARE_UNORDERED_FLAG) ? [] : undefined;\r\n\r\n    // Ignore non-index properties.\r\n    while (++index < arrLength) {\r\n      var arrValue = array[index],\r\n          othValue = other[index];\r\n\r\n      var compared;\r\n      if (compared !== undefined) {\r\n        if (compared) {\r\n          continue;\r\n        }\r\n        result = false;\r\n        break;\r\n      }\r\n      // Recursively compare arrays (susceptible to call stack limits).\r\n      if (seen) {\r\n        if (!baseSome(other, function(othValue, othIndex) {\r\n              if (!indexOf(seen, othIndex) &&\r\n                  (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\r\n                return seen.push(othIndex);\r\n              }\r\n            })) {\r\n          result = false;\r\n          break;\r\n        }\r\n      } else if (!(\r\n            arrValue === othValue ||\r\n              equalFunc(arrValue, othValue, bitmask, customizer, stack)\r\n          )) {\r\n        result = false;\r\n        break;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * A specialized version of `baseIsEqualDeep` for comparing objects of\r\n   * the same `toStringTag`.\r\n   *\r\n   * **Note:** This function only supports comparing values with tags of\r\n   * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to compare.\r\n   * @param {Object} other The other object to compare.\r\n   * @param {string} tag The `toStringTag` of the objects to compare.\r\n   * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\r\n   * @param {Function} customizer The function to customize comparisons.\r\n   * @param {Function} equalFunc The function to determine equivalents of values.\r\n   * @param {Object} stack Tracks traversed `object` and `other` objects.\r\n   * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\r\n   */\r\n  function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\r\n    switch (tag) {\r\n\r\n      case boolTag:\r\n      case dateTag:\r\n      case numberTag:\r\n        // Coerce booleans to `1` or `0` and dates to milliseconds.\r\n        // Invalid dates are coerced to `NaN`.\r\n        return eq(+object, +other);\r\n\r\n      case errorTag:\r\n        return object.name == other.name && object.message == other.message;\r\n\r\n      case regexpTag:\r\n      case stringTag:\r\n        // Coerce regexes to strings and treat strings, primitives and objects,\r\n        // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\r\n        // for more details.\r\n        return object == (other + '');\r\n\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * A specialized version of `baseIsEqualDeep` for objects with support for\r\n   * partial deep comparisons.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to compare.\r\n   * @param {Object} other The other object to compare.\r\n   * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\r\n   * @param {Function} customizer The function to customize comparisons.\r\n   * @param {Function} equalFunc The function to determine equivalents of values.\r\n   * @param {Object} stack Tracks traversed `object` and `other` objects.\r\n   * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\r\n   */\r\n  function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\r\n    var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\r\n        objProps = keys(object),\r\n        objLength = objProps.length,\r\n        othProps = keys(other),\r\n        othLength = othProps.length;\r\n\r\n    if (objLength != othLength && !isPartial) {\r\n      return false;\r\n    }\r\n    var index = objLength;\r\n    while (index--) {\r\n      var key = objProps[index];\r\n      if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\r\n        return false;\r\n      }\r\n    }\r\n    var result = true;\r\n\r\n    var skipCtor = isPartial;\r\n    while (++index < objLength) {\r\n      key = objProps[index];\r\n      var objValue = object[key],\r\n          othValue = other[key];\r\n\r\n      var compared;\r\n      // Recursively compare objects (susceptible to call stack limits).\r\n      if (!(compared === undefined\r\n            ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\r\n            : compared\r\n          )) {\r\n        result = false;\r\n        break;\r\n      }\r\n      skipCtor || (skipCtor = key == 'constructor');\r\n    }\r\n    if (result && !skipCtor) {\r\n      var objCtor = object.constructor,\r\n          othCtor = other.constructor;\r\n\r\n      // Non `Object` object instances with different constructors are not equal.\r\n      if (objCtor != othCtor &&\r\n          ('constructor' in object && 'constructor' in other) &&\r\n          !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\r\n            typeof othCtor == 'function' && othCtor instanceof othCtor)) {\r\n        result = false;\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * A specialized version of `baseRest` which flattens the rest array.\r\n   *\r\n   * @private\r\n   * @param {Function} func The function to apply a rest parameter to.\r\n   * @returns {Function} Returns the new function.\r\n   */\r\n  function flatRest(func) {\r\n    return setToString(overRest(func, undefined, flatten), func + '');\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is a flattenable `arguments` object or array.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\r\n   */\r\n  function isFlattenable(value) {\r\n    return isArray(value) || isArguments(value);\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is a valid array-like index.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to check.\r\n   * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\r\n   * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\r\n   */\r\n  function isIndex(value, length) {\r\n    var type = typeof value;\r\n    length = length == null ? MAX_SAFE_INTEGER : length;\r\n\r\n    return !!length &&\r\n      (type == 'number' ||\r\n        (type != 'symbol' && reIsUint.test(value))) &&\r\n          (value > -1 && value % 1 == 0 && value < length);\r\n  }\r\n\r\n  /**\r\n   * Checks if the given arguments are from an iteratee call.\r\n   *\r\n   * @private\r\n   * @param {*} value The potential iteratee value argument.\r\n   * @param {*} index The potential iteratee index or key argument.\r\n   * @param {*} object The potential iteratee object argument.\r\n   * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\r\n   *  else `false`.\r\n   */\r\n  function isIterateeCall(value, index, object) {\r\n    if (!isObject(object)) {\r\n      return false;\r\n    }\r\n    var type = typeof index;\r\n    if (type == 'number'\r\n          ? (isArrayLike(object) && isIndex(index, object.length))\r\n          : (type == 'string' && index in object)\r\n        ) {\r\n      return eq(object[index], value);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * This function is like\r\n   * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\r\n   * except that it includes inherited enumerable properties.\r\n   *\r\n   * @private\r\n   * @param {Object} object The object to query.\r\n   * @returns {Array} Returns the array of property names.\r\n   */\r\n  function nativeKeysIn(object) {\r\n    var result = [];\r\n    if (object != null) {\r\n      for (var key in Object(object)) {\r\n        result.push(key);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Converts `value` to a string using `Object.prototype.toString`.\r\n   *\r\n   * @private\r\n   * @param {*} value The value to convert.\r\n   * @returns {string} Returns the converted string.\r\n   */\r\n  function objectToString(value) {\r\n    return nativeObjectToString.call(value);\r\n  }\r\n\r\n  /**\r\n   * A specialized version of `baseRest` which transforms the rest array.\r\n   *\r\n   * @private\r\n   * @param {Function} func The function to apply a rest parameter to.\r\n   * @param {number} [start=func.length-1] The start position of the rest parameter.\r\n   * @param {Function} transform The rest array transform.\r\n   * @returns {Function} Returns the new function.\r\n   */\r\n  function overRest(func, start, transform) {\r\n    start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\r\n    return function() {\r\n      var args = arguments,\r\n          index = -1,\r\n          length = nativeMax(args.length - start, 0),\r\n          array = Array(length);\r\n\r\n      while (++index < length) {\r\n        array[index] = args[start + index];\r\n      }\r\n      index = -1;\r\n      var otherArgs = Array(start + 1);\r\n      while (++index < start) {\r\n        otherArgs[index] = args[index];\r\n      }\r\n      otherArgs[start] = transform(array);\r\n      return func.apply(this, otherArgs);\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Sets the `toString` method of `func` to return `string`.\r\n   *\r\n   * @private\r\n   * @param {Function} func The function to modify.\r\n   * @param {Function} string The `toString` result.\r\n   * @returns {Function} Returns `func`.\r\n   */\r\n  var setToString = identity;\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Creates an array with all falsey values removed. The values `false`, `null`,\r\n   * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Array\r\n   * @param {Array} array The array to compact.\r\n   * @returns {Array} Returns the new array of filtered values.\r\n   * @example\r\n   *\r\n   * _.compact([0, 1, false, 2, '', 3]);\r\n   * // => [1, 2, 3]\r\n   */\r\n  function compact(array) {\r\n    return baseFilter(array, Boolean);\r\n  }\r\n\r\n  /**\r\n   * Creates a new array concatenating `array` with any additional arrays\r\n   * and/or values.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @category Array\r\n   * @param {Array} array The array to concatenate.\r\n   * @param {...*} [values] The values to concatenate.\r\n   * @returns {Array} Returns the new concatenated array.\r\n   * @example\r\n   *\r\n   * var array = [1];\r\n   * var other = _.concat(array, 2, [3], [[4]]);\r\n   *\r\n   * console.log(other);\r\n   * // => [1, 2, 3, [4]]\r\n   *\r\n   * console.log(array);\r\n   * // => [1]\r\n   */\r\n  function concat() {\r\n    var length = arguments.length;\r\n    if (!length) {\r\n      return [];\r\n    }\r\n    var args = Array(length - 1),\r\n        array = arguments[0],\r\n        index = length;\r\n\r\n    while (index--) {\r\n      args[index - 1] = arguments[index];\r\n    }\r\n    return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\r\n  }\r\n\r\n  /**\r\n   * This method is like `_.find` except that it returns the index of the first\r\n   * element `predicate` returns truthy for instead of the element itself.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 1.1.0\r\n   * @category Array\r\n   * @param {Array} array The array to inspect.\r\n   * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n   * @param {number} [fromIndex=0] The index to search from.\r\n   * @returns {number} Returns the index of the found element, else `-1`.\r\n   * @example\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney',  'active': false },\r\n   *   { 'user': 'fred',    'active': false },\r\n   *   { 'user': 'pebbles', 'active': true }\r\n   * ];\r\n   *\r\n   * _.findIndex(users, function(o) { return o.user == 'barney'; });\r\n   * // => 0\r\n   *\r\n   * // The `_.matches` iteratee shorthand.\r\n   * _.findIndex(users, { 'user': 'fred', 'active': false });\r\n   * // => 1\r\n   *\r\n   * // The `_.matchesProperty` iteratee shorthand.\r\n   * _.findIndex(users, ['active', false]);\r\n   * // => 0\r\n   *\r\n   * // The `_.property` iteratee shorthand.\r\n   * _.findIndex(users, 'active');\r\n   * // => 2\r\n   */\r\n  function findIndex(array, predicate, fromIndex) {\r\n    var length = array == null ? 0 : array.length;\r\n    if (!length) {\r\n      return -1;\r\n    }\r\n    var index = fromIndex == null ? 0 : toInteger(fromIndex);\r\n    if (index < 0) {\r\n      index = nativeMax(length + index, 0);\r\n    }\r\n    return baseFindIndex(array, baseIteratee(predicate, 3), index);\r\n  }\r\n\r\n  /**\r\n   * Flattens `array` a single level deep.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Array\r\n   * @param {Array} array The array to flatten.\r\n   * @returns {Array} Returns the new flattened array.\r\n   * @example\r\n   *\r\n   * _.flatten([1, [2, [3, [4]], 5]]);\r\n   * // => [1, 2, [3, [4]], 5]\r\n   */\r\n  function flatten(array) {\r\n    var length = array == null ? 0 : array.length;\r\n    return length ? baseFlatten(array, 1) : [];\r\n  }\r\n\r\n  /**\r\n   * Recursively flattens `array`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 3.0.0\r\n   * @category Array\r\n   * @param {Array} array The array to flatten.\r\n   * @returns {Array} Returns the new flattened array.\r\n   * @example\r\n   *\r\n   * _.flattenDeep([1, [2, [3, [4]], 5]]);\r\n   * // => [1, 2, 3, 4, 5]\r\n   */\r\n  function flattenDeep(array) {\r\n    var length = array == null ? 0 : array.length;\r\n    return length ? baseFlatten(array, INFINITY) : [];\r\n  }\r\n\r\n  /**\r\n   * Gets the first element of `array`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @alias first\r\n   * @category Array\r\n   * @param {Array} array The array to query.\r\n   * @returns {*} Returns the first element of `array`.\r\n   * @example\r\n   *\r\n   * _.head([1, 2, 3]);\r\n   * // => 1\r\n   *\r\n   * _.head([]);\r\n   * // => undefined\r\n   */\r\n  function head(array) {\r\n    return (array && array.length) ? array[0] : undefined;\r\n  }\r\n\r\n  /**\r\n   * Gets the index at which the first occurrence of `value` is found in `array`\r\n   * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n   * for equality comparisons. If `fromIndex` is negative, it's used as the\r\n   * offset from the end of `array`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Array\r\n   * @param {Array} array The array to inspect.\r\n   * @param {*} value The value to search for.\r\n   * @param {number} [fromIndex=0] The index to search from.\r\n   * @returns {number} Returns the index of the matched value, else `-1`.\r\n   * @example\r\n   *\r\n   * _.indexOf([1, 2, 1, 2], 2);\r\n   * // => 1\r\n   *\r\n   * // Search from the `fromIndex`.\r\n   * _.indexOf([1, 2, 1, 2], 2, 2);\r\n   * // => 3\r\n   */\r\n  function indexOf(array, value, fromIndex) {\r\n    var length = array == null ? 0 : array.length;\r\n    if (typeof fromIndex == 'number') {\r\n      fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : fromIndex;\r\n    } else {\r\n      fromIndex = 0;\r\n    }\r\n    var index = (fromIndex || 0) - 1,\r\n        isReflexive = value === value;\r\n\r\n    while (++index < length) {\r\n      var other = array[index];\r\n      if ((isReflexive ? other === value : other !== other)) {\r\n        return index;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Gets the last element of `array`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Array\r\n   * @param {Array} array The array to query.\r\n   * @returns {*} Returns the last element of `array`.\r\n   * @example\r\n   *\r\n   * _.last([1, 2, 3]);\r\n   * // => 3\r\n   */\r\n  function last(array) {\r\n    var length = array == null ? 0 : array.length;\r\n    return length ? array[length - 1] : undefined;\r\n  }\r\n\r\n  /**\r\n   * Creates a slice of `array` from `start` up to, but not including, `end`.\r\n   *\r\n   * **Note:** This method is used instead of\r\n   * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\r\n   * returned.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 3.0.0\r\n   * @category Array\r\n   * @param {Array} array The array to slice.\r\n   * @param {number} [start=0] The start position.\r\n   * @param {number} [end=array.length] The end position.\r\n   * @returns {Array} Returns the slice of `array`.\r\n   */\r\n  function slice(array, start, end) {\r\n    var length = array == null ? 0 : array.length;\r\n    start = start == null ? 0 : +start;\r\n    end = end === undefined ? length : +end;\r\n    return length ? baseSlice(array, start, end) : [];\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Creates a `lodash` wrapper instance that wraps `value` with explicit method\r\n   * chain sequences enabled. The result of such sequences must be unwrapped\r\n   * with `_#value`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 1.3.0\r\n   * @category Seq\r\n   * @param {*} value The value to wrap.\r\n   * @returns {Object} Returns the new `lodash` wrapper instance.\r\n   * @example\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney',  'age': 36 },\r\n   *   { 'user': 'fred',    'age': 40 },\r\n   *   { 'user': 'pebbles', 'age': 1 }\r\n   * ];\r\n   *\r\n   * var youngest = _\r\n   *   .chain(users)\r\n   *   .sortBy('age')\r\n   *   .map(function(o) {\r\n   *     return o.user + ' is ' + o.age;\r\n   *   })\r\n   *   .head()\r\n   *   .value();\r\n   * // => 'pebbles is 1'\r\n   */\r\n  function chain(value) {\r\n    var result = lodash(value);\r\n    result.__chain__ = true;\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * This method invokes `interceptor` and returns `value`. The interceptor\r\n   * is invoked with one argument; (value). The purpose of this method is to\r\n   * \"tap into\" a method chain sequence in order to modify intermediate results.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Seq\r\n   * @param {*} value The value to provide to `interceptor`.\r\n   * @param {Function} interceptor The function to invoke.\r\n   * @returns {*} Returns `value`.\r\n   * @example\r\n   *\r\n   * _([1, 2, 3])\r\n   *  .tap(function(array) {\r\n   *    // Mutate input array.\r\n   *    array.pop();\r\n   *  })\r\n   *  .reverse()\r\n   *  .value();\r\n   * // => [2, 1]\r\n   */\r\n  function tap(value, interceptor) {\r\n    interceptor(value);\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * This method is like `_.tap` except that it returns the result of `interceptor`.\r\n   * The purpose of this method is to \"pass thru\" values replacing intermediate\r\n   * results in a method chain sequence.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 3.0.0\r\n   * @category Seq\r\n   * @param {*} value The value to provide to `interceptor`.\r\n   * @param {Function} interceptor The function to invoke.\r\n   * @returns {*} Returns the result of `interceptor`.\r\n   * @example\r\n   *\r\n   * _('  abc  ')\r\n   *  .chain()\r\n   *  .trim()\r\n   *  .thru(function(value) {\r\n   *    return [value];\r\n   *  })\r\n   *  .value();\r\n   * // => ['abc']\r\n   */\r\n  function thru(value, interceptor) {\r\n    return interceptor(value);\r\n  }\r\n\r\n  /**\r\n   * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\r\n   *\r\n   * @name chain\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Seq\r\n   * @returns {Object} Returns the new `lodash` wrapper instance.\r\n   * @example\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney', 'age': 36 },\r\n   *   { 'user': 'fred',   'age': 40 }\r\n   * ];\r\n   *\r\n   * // A sequence without explicit chaining.\r\n   * _(users).head();\r\n   * // => { 'user': 'barney', 'age': 36 }\r\n   *\r\n   * // A sequence with explicit chaining.\r\n   * _(users)\r\n   *   .chain()\r\n   *   .head()\r\n   *   .pick('user')\r\n   *   .value();\r\n   * // => { 'user': 'barney' }\r\n   */\r\n  function wrapperChain() {\r\n    return chain(this);\r\n  }\r\n\r\n  /**\r\n   * Executes the chain sequence to resolve the unwrapped value.\r\n   *\r\n   * @name value\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @alias toJSON, valueOf\r\n   * @category Seq\r\n   * @returns {*} Returns the resolved unwrapped value.\r\n   * @example\r\n   *\r\n   * _([1, 2, 3]).value();\r\n   * // => [1, 2, 3]\r\n   */\r\n  function wrapperValue() {\r\n    return baseWrapperValue(this.__wrapped__, this.__actions__);\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Checks if `predicate` returns truthy for **all** elements of `collection`.\r\n   * Iteration is stopped once `predicate` returns falsey. The predicate is\r\n   * invoked with three arguments: (value, index|key, collection).\r\n   *\r\n   * **Note:** This method returns `true` for\r\n   * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\r\n   * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\r\n   * elements of empty collections.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Collection\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n   * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\r\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\r\n   *  else `false`.\r\n   * @example\r\n   *\r\n   * _.every([true, 1, null, 'yes'], Boolean);\r\n   * // => false\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney', 'age': 36, 'active': false },\r\n   *   { 'user': 'fred',   'age': 40, 'active': false }\r\n   * ];\r\n   *\r\n   * // The `_.matches` iteratee shorthand.\r\n   * _.every(users, { 'user': 'barney', 'active': false });\r\n   * // => false\r\n   *\r\n   * // The `_.matchesProperty` iteratee shorthand.\r\n   * _.every(users, ['active', false]);\r\n   * // => true\r\n   *\r\n   * // The `_.property` iteratee shorthand.\r\n   * _.every(users, 'active');\r\n   * // => false\r\n   */\r\n  function every(collection, predicate, guard) {\r\n    predicate = guard ? undefined : predicate;\r\n    return baseEvery(collection, baseIteratee(predicate));\r\n  }\r\n\r\n  /**\r\n   * Iterates over elements of `collection`, returning an array of all elements\r\n   * `predicate` returns truthy for. The predicate is invoked with three\r\n   * arguments: (value, index|key, collection).\r\n   *\r\n   * **Note:** Unlike `_.remove`, this method returns a new array.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Collection\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n   * @returns {Array} Returns the new filtered array.\r\n   * @see _.reject\r\n   * @example\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney', 'age': 36, 'active': true },\r\n   *   { 'user': 'fred',   'age': 40, 'active': false }\r\n   * ];\r\n   *\r\n   * _.filter(users, function(o) { return !o.active; });\r\n   * // => objects for ['fred']\r\n   *\r\n   * // The `_.matches` iteratee shorthand.\r\n   * _.filter(users, { 'age': 36, 'active': true });\r\n   * // => objects for ['barney']\r\n   *\r\n   * // The `_.matchesProperty` iteratee shorthand.\r\n   * _.filter(users, ['active', false]);\r\n   * // => objects for ['fred']\r\n   *\r\n   * // The `_.property` iteratee shorthand.\r\n   * _.filter(users, 'active');\r\n   * // => objects for ['barney']\r\n   */\r\n  function filter(collection, predicate) {\r\n    return baseFilter(collection, baseIteratee(predicate));\r\n  }\r\n\r\n  /**\r\n   * Iterates over elements of `collection`, returning the first element\r\n   * `predicate` returns truthy for. The predicate is invoked with three\r\n   * arguments: (value, index|key, collection).\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Collection\r\n   * @param {Array|Object} collection The collection to inspect.\r\n   * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n   * @param {number} [fromIndex=0] The index to search from.\r\n   * @returns {*} Returns the matched element, else `undefined`.\r\n   * @example\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney',  'age': 36, 'active': true },\r\n   *   { 'user': 'fred',    'age': 40, 'active': false },\r\n   *   { 'user': 'pebbles', 'age': 1,  'active': true }\r\n   * ];\r\n   *\r\n   * _.find(users, function(o) { return o.age < 40; });\r\n   * // => object for 'barney'\r\n   *\r\n   * // The `_.matches` iteratee shorthand.\r\n   * _.find(users, { 'age': 1, 'active': true });\r\n   * // => object for 'pebbles'\r\n   *\r\n   * // The `_.matchesProperty` iteratee shorthand.\r\n   * _.find(users, ['active', false]);\r\n   * // => object for 'fred'\r\n   *\r\n   * // The `_.property` iteratee shorthand.\r\n   * _.find(users, 'active');\r\n   * // => object for 'barney'\r\n   */\r\n  var find = createFind(findIndex);\r\n\r\n  /**\r\n   * Iterates over elements of `collection` and invokes `iteratee` for each element.\r\n   * The iteratee is invoked with three arguments: (value, index|key, collection).\r\n   * Iteratee functions may exit iteration early by explicitly returning `false`.\r\n   *\r\n   * **Note:** As with other \"Collections\" methods, objects with a \"length\"\r\n   * property are iterated like arrays. To avoid this behavior use `_.forIn`\r\n   * or `_.forOwn` for object iteration.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @alias each\r\n   * @category Collection\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} [iteratee=_.identity] The function invoked per iteration.\r\n   * @returns {Array|Object} Returns `collection`.\r\n   * @see _.forEachRight\r\n   * @example\r\n   *\r\n   * _.forEach([1, 2], function(value) {\r\n   *   console.log(value);\r\n   * });\r\n   * // => Logs `1` then `2`.\r\n   *\r\n   * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\r\n   *   console.log(key);\r\n   * });\r\n   * // => Logs 'a' then 'b' (iteration order is not guaranteed).\r\n   */\r\n  function forEach(collection, iteratee) {\r\n    return baseEach(collection, baseIteratee(iteratee));\r\n  }\r\n\r\n  /**\r\n   * Creates an array of values by running each element in `collection` thru\r\n   * `iteratee`. The iteratee is invoked with three arguments:\r\n   * (value, index|key, collection).\r\n   *\r\n   * Many lodash methods are guarded to work as iteratees for methods like\r\n   * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\r\n   *\r\n   * The guarded methods are:\r\n   * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\r\n   * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\r\n   * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\r\n   * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Collection\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} [iteratee=_.identity] The function invoked per iteration.\r\n   * @returns {Array} Returns the new mapped array.\r\n   * @example\r\n   *\r\n   * function square(n) {\r\n   *   return n * n;\r\n   * }\r\n   *\r\n   * _.map([4, 8], square);\r\n   * // => [16, 64]\r\n   *\r\n   * _.map({ 'a': 4, 'b': 8 }, square);\r\n   * // => [16, 64] (iteration order is not guaranteed)\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney' },\r\n   *   { 'user': 'fred' }\r\n   * ];\r\n   *\r\n   * // The `_.property` iteratee shorthand.\r\n   * _.map(users, 'user');\r\n   * // => ['barney', 'fred']\r\n   */\r\n  function map(collection, iteratee) {\r\n    return baseMap(collection, baseIteratee(iteratee));\r\n  }\r\n\r\n  /**\r\n   * Reduces `collection` to a value which is the accumulated result of running\r\n   * each element in `collection` thru `iteratee`, where each successive\r\n   * invocation is supplied the return value of the previous. If `accumulator`\r\n   * is not given, the first element of `collection` is used as the initial\r\n   * value. The iteratee is invoked with four arguments:\r\n   * (accumulator, value, index|key, collection).\r\n   *\r\n   * Many lodash methods are guarded to work as iteratees for methods like\r\n   * `_.reduce`, `_.reduceRight`, and `_.transform`.\r\n   *\r\n   * The guarded methods are:\r\n   * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\r\n   * and `sortBy`\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Collection\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} [iteratee=_.identity] The function invoked per iteration.\r\n   * @param {*} [accumulator] The initial value.\r\n   * @returns {*} Returns the accumulated value.\r\n   * @see _.reduceRight\r\n   * @example\r\n   *\r\n   * _.reduce([1, 2], function(sum, n) {\r\n   *   return sum + n;\r\n   * }, 0);\r\n   * // => 3\r\n   *\r\n   * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\r\n   *   (result[value] || (result[value] = [])).push(key);\r\n   *   return result;\r\n   * }, {});\r\n   * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\r\n   */\r\n  function reduce(collection, iteratee, accumulator) {\r\n    return baseReduce(collection, baseIteratee(iteratee), accumulator, arguments.length < 3, baseEach);\r\n  }\r\n\r\n  /**\r\n   * Gets the size of `collection` by returning its length for array-like\r\n   * values or the number of own enumerable string keyed properties for objects.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Collection\r\n   * @param {Array|Object|string} collection The collection to inspect.\r\n   * @returns {number} Returns the collection size.\r\n   * @example\r\n   *\r\n   * _.size([1, 2, 3]);\r\n   * // => 3\r\n   *\r\n   * _.size({ 'a': 1, 'b': 2 });\r\n   * // => 2\r\n   *\r\n   * _.size('pebbles');\r\n   * // => 7\r\n   */\r\n  function size(collection) {\r\n    if (collection == null) {\r\n      return 0;\r\n    }\r\n    collection = isArrayLike(collection) ? collection : nativeKeys(collection);\r\n    return collection.length;\r\n  }\r\n\r\n  /**\r\n   * Checks if `predicate` returns truthy for **any** element of `collection`.\r\n   * Iteration is stopped once `predicate` returns truthy. The predicate is\r\n   * invoked with three arguments: (value, index|key, collection).\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Collection\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {Function} [predicate=_.identity] The function invoked per iteration.\r\n   * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\r\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\r\n   *  else `false`.\r\n   * @example\r\n   *\r\n   * _.some([null, 0, 'yes', false], Boolean);\r\n   * // => true\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney', 'active': true },\r\n   *   { 'user': 'fred',   'active': false }\r\n   * ];\r\n   *\r\n   * // The `_.matches` iteratee shorthand.\r\n   * _.some(users, { 'user': 'barney', 'active': false });\r\n   * // => false\r\n   *\r\n   * // The `_.matchesProperty` iteratee shorthand.\r\n   * _.some(users, ['active', false]);\r\n   * // => true\r\n   *\r\n   * // The `_.property` iteratee shorthand.\r\n   * _.some(users, 'active');\r\n   * // => true\r\n   */\r\n  function some(collection, predicate, guard) {\r\n    predicate = guard ? undefined : predicate;\r\n    return baseSome(collection, baseIteratee(predicate));\r\n  }\r\n\r\n  /**\r\n   * Creates an array of elements, sorted in ascending order by the results of\r\n   * running each element in a collection thru each iteratee. This method\r\n   * performs a stable sort, that is, it preserves the original sort order of\r\n   * equal elements. The iteratees are invoked with one argument: (value).\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Collection\r\n   * @param {Array|Object} collection The collection to iterate over.\r\n   * @param {...(Function|Function[])} [iteratees=[_.identity]]\r\n   *  The iteratees to sort by.\r\n   * @returns {Array} Returns the new sorted array.\r\n   * @example\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'fred',   'age': 48 },\r\n   *   { 'user': 'barney', 'age': 36 },\r\n   *   { 'user': 'fred',   'age': 40 },\r\n   *   { 'user': 'barney', 'age': 34 }\r\n   * ];\r\n   *\r\n   * _.sortBy(users, [function(o) { return o.user; }]);\r\n   * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\r\n   *\r\n   * _.sortBy(users, ['user', 'age']);\r\n   * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]\r\n   */\r\n  function sortBy(collection, iteratee) {\r\n    var index = 0;\r\n    iteratee = baseIteratee(iteratee);\r\n\r\n    return baseMap(baseMap(collection, function(value, key, collection) {\r\n      return { 'value': value, 'index': index++, 'criteria': iteratee(value, key, collection) };\r\n    }).sort(function(object, other) {\r\n      return compareAscending(object.criteria, other.criteria) || (object.index - other.index);\r\n    }), baseProperty('value'));\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Creates a function that invokes `func`, with the `this` binding and arguments\r\n   * of the created function, while it's called less than `n` times. Subsequent\r\n   * calls to the created function return the result of the last `func` invocation.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 3.0.0\r\n   * @category Function\r\n   * @param {number} n The number of calls at which `func` is no longer invoked.\r\n   * @param {Function} func The function to restrict.\r\n   * @returns {Function} Returns the new restricted function.\r\n   * @example\r\n   *\r\n   * jQuery(element).on('click', _.before(5, addContactToList));\r\n   * // => Allows adding up to 4 contacts to the list.\r\n   */\r\n  function before(n, func) {\r\n    var result;\r\n    if (typeof func != 'function') {\r\n      throw new TypeError(FUNC_ERROR_TEXT);\r\n    }\r\n    n = toInteger(n);\r\n    return function() {\r\n      if (--n > 0) {\r\n        result = func.apply(this, arguments);\r\n      }\r\n      if (n <= 1) {\r\n        func = undefined;\r\n      }\r\n      return result;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Creates a function that invokes `func` with the `this` binding of `thisArg`\r\n   * and `partials` prepended to the arguments it receives.\r\n   *\r\n   * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\r\n   * may be used as a placeholder for partially applied arguments.\r\n   *\r\n   * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\r\n   * property of bound functions.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Function\r\n   * @param {Function} func The function to bind.\r\n   * @param {*} thisArg The `this` binding of `func`.\r\n   * @param {...*} [partials] The arguments to be partially applied.\r\n   * @returns {Function} Returns the new bound function.\r\n   * @example\r\n   *\r\n   * function greet(greeting, punctuation) {\r\n   *   return greeting + ' ' + this.user + punctuation;\r\n   * }\r\n   *\r\n   * var object = { 'user': 'fred' };\r\n   *\r\n   * var bound = _.bind(greet, object, 'hi');\r\n   * bound('!');\r\n   * // => 'hi fred!'\r\n   *\r\n   * // Bound with placeholders.\r\n   * var bound = _.bind(greet, object, _, '!');\r\n   * bound('hi');\r\n   * // => 'hi fred!'\r\n   */\r\n  var bind = baseRest(function(func, thisArg, partials) {\r\n    return createPartial(func, WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG, thisArg, partials);\r\n  });\r\n\r\n  /**\r\n   * Defers invoking the `func` until the current call stack has cleared. Any\r\n   * additional arguments are provided to `func` when it's invoked.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Function\r\n   * @param {Function} func The function to defer.\r\n   * @param {...*} [args] The arguments to invoke `func` with.\r\n   * @returns {number} Returns the timer id.\r\n   * @example\r\n   *\r\n   * _.defer(function(text) {\r\n   *   console.log(text);\r\n   * }, 'deferred');\r\n   * // => Logs 'deferred' after one millisecond.\r\n   */\r\n  var defer = baseRest(function(func, args) {\r\n    return baseDelay(func, 1, args);\r\n  });\r\n\r\n  /**\r\n   * Invokes `func` after `wait` milliseconds. Any additional arguments are\r\n   * provided to `func` when it's invoked.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Function\r\n   * @param {Function} func The function to delay.\r\n   * @param {number} wait The number of milliseconds to delay invocation.\r\n   * @param {...*} [args] The arguments to invoke `func` with.\r\n   * @returns {number} Returns the timer id.\r\n   * @example\r\n   *\r\n   * _.delay(function(text) {\r\n   *   console.log(text);\r\n   * }, 1000, 'later');\r\n   * // => Logs 'later' after one second.\r\n   */\r\n  var delay = baseRest(function(func, wait, args) {\r\n    return baseDelay(func, toNumber(wait) || 0, args);\r\n  });\r\n\r\n  /**\r\n   * Creates a function that negates the result of the predicate `func`. The\r\n   * `func` predicate is invoked with the `this` binding and arguments of the\r\n   * created function.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 3.0.0\r\n   * @category Function\r\n   * @param {Function} predicate The predicate to negate.\r\n   * @returns {Function} Returns the new negated function.\r\n   * @example\r\n   *\r\n   * function isEven(n) {\r\n   *   return n % 2 == 0;\r\n   * }\r\n   *\r\n   * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\r\n   * // => [1, 3, 5]\r\n   */\r\n  function negate(predicate) {\r\n    if (typeof predicate != 'function') {\r\n      throw new TypeError(FUNC_ERROR_TEXT);\r\n    }\r\n    return function() {\r\n      var args = arguments;\r\n      return !predicate.apply(this, args);\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Creates a function that is restricted to invoking `func` once. Repeat calls\r\n   * to the function return the value of the first invocation. The `func` is\r\n   * invoked with the `this` binding and arguments of the created function.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Function\r\n   * @param {Function} func The function to restrict.\r\n   * @returns {Function} Returns the new restricted function.\r\n   * @example\r\n   *\r\n   * var initialize = _.once(createApplication);\r\n   * initialize();\r\n   * initialize();\r\n   * // => `createApplication` is invoked once\r\n   */\r\n  function once(func) {\r\n    return before(2, func);\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Creates a shallow clone of `value`.\r\n   *\r\n   * **Note:** This method is loosely based on the\r\n   * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\r\n   * and supports cloning arrays, array buffers, booleans, date objects, maps,\r\n   * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\r\n   * arrays. The own enumerable properties of `arguments` objects are cloned\r\n   * as plain objects. An empty object is returned for uncloneable values such\r\n   * as error objects, functions, DOM nodes, and WeakMaps.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to clone.\r\n   * @returns {*} Returns the cloned value.\r\n   * @see _.cloneDeep\r\n   * @example\r\n   *\r\n   * var objects = [{ 'a': 1 }, { 'b': 2 }];\r\n   *\r\n   * var shallow = _.clone(objects);\r\n   * console.log(shallow[0] === objects[0]);\r\n   * // => true\r\n   */\r\n  function clone(value) {\r\n    if (!isObject(value)) {\r\n      return value;\r\n    }\r\n    return isArray(value) ? copyArray(value) : copyObject(value, nativeKeys(value));\r\n  }\r\n\r\n  /**\r\n   * Performs a\r\n   * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\r\n   * comparison between two values to determine if they are equivalent.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @category Lang\r\n   * @param {*} value The value to compare.\r\n   * @param {*} other The other value to compare.\r\n   * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\r\n   * @example\r\n   *\r\n   * var object = { 'a': 1 };\r\n   * var other = { 'a': 1 };\r\n   *\r\n   * _.eq(object, object);\r\n   * // => true\r\n   *\r\n   * _.eq(object, other);\r\n   * // => false\r\n   *\r\n   * _.eq('a', 'a');\r\n   * // => true\r\n   *\r\n   * _.eq('a', Object('a'));\r\n   * // => false\r\n   *\r\n   * _.eq(NaN, NaN);\r\n   * // => true\r\n   */\r\n  function eq(value, other) {\r\n    return value === other || (value !== value && other !== other);\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is likely an `arguments` object.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is an `arguments` object,\r\n   *  else `false`.\r\n   * @example\r\n   *\r\n   * _.isArguments(function() { return arguments; }());\r\n   * // => true\r\n   *\r\n   * _.isArguments([1, 2, 3]);\r\n   * // => false\r\n   */\r\n  var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\r\n    return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\r\n      !propertyIsEnumerable.call(value, 'callee');\r\n  };\r\n\r\n  /**\r\n   * Checks if `value` is classified as an `Array` object.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is an array, else `false`.\r\n   * @example\r\n   *\r\n   * _.isArray([1, 2, 3]);\r\n   * // => true\r\n   *\r\n   * _.isArray(document.body.children);\r\n   * // => false\r\n   *\r\n   * _.isArray('abc');\r\n   * // => false\r\n   *\r\n   * _.isArray(_.noop);\r\n   * // => false\r\n   */\r\n  var isArray = Array.isArray;\r\n\r\n  /**\r\n   * Checks if `value` is array-like. A value is considered array-like if it's\r\n   * not a function and has a `value.length` that's an integer greater than or\r\n   * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\r\n   * @example\r\n   *\r\n   * _.isArrayLike([1, 2, 3]);\r\n   * // => true\r\n   *\r\n   * _.isArrayLike(document.body.children);\r\n   * // => true\r\n   *\r\n   * _.isArrayLike('abc');\r\n   * // => true\r\n   *\r\n   * _.isArrayLike(_.noop);\r\n   * // => false\r\n   */\r\n  function isArrayLike(value) {\r\n    return value != null && isLength(value.length) && !isFunction(value);\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is classified as a boolean primitive or object.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\r\n   * @example\r\n   *\r\n   * _.isBoolean(false);\r\n   * // => true\r\n   *\r\n   * _.isBoolean(null);\r\n   * // => false\r\n   */\r\n  function isBoolean(value) {\r\n    return value === true || value === false ||\r\n      (isObjectLike(value) && baseGetTag(value) == boolTag);\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is classified as a `Date` object.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\r\n   * @example\r\n   *\r\n   * _.isDate(new Date);\r\n   * // => true\r\n   *\r\n   * _.isDate('Mon April 23 2012');\r\n   * // => false\r\n   */\r\n  var isDate = baseIsDate;\r\n\r\n  /**\r\n   * Checks if `value` is an empty object, collection, map, or set.\r\n   *\r\n   * Objects are considered empty if they have no own enumerable string keyed\r\n   * properties.\r\n   *\r\n   * Array-like values such as `arguments` objects, arrays, buffers, strings, or\r\n   * jQuery-like collections are considered empty if they have a `length` of `0`.\r\n   * Similarly, maps and sets are considered empty if they have a `size` of `0`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is empty, else `false`.\r\n   * @example\r\n   *\r\n   * _.isEmpty(null);\r\n   * // => true\r\n   *\r\n   * _.isEmpty(true);\r\n   * // => true\r\n   *\r\n   * _.isEmpty(1);\r\n   * // => true\r\n   *\r\n   * _.isEmpty([1, 2, 3]);\r\n   * // => false\r\n   *\r\n   * _.isEmpty({ 'a': 1 });\r\n   * // => false\r\n   */\r\n  function isEmpty(value) {\r\n    if (isArrayLike(value) &&\r\n        (isArray(value) || isString(value) ||\r\n          isFunction(value.splice) || isArguments(value))) {\r\n      return !value.length;\r\n    }\r\n    return !nativeKeys(value).length;\r\n  }\r\n\r\n  /**\r\n   * Performs a deep comparison between two values to determine if they are\r\n   * equivalent.\r\n   *\r\n   * **Note:** This method supports comparing arrays, array buffers, booleans,\r\n   * date objects, error objects, maps, numbers, `Object` objects, regexes,\r\n   * sets, strings, symbols, and typed arrays. `Object` objects are compared\r\n   * by their own, not inherited, enumerable properties. Functions and DOM\r\n   * nodes are compared by strict equality, i.e. `===`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to compare.\r\n   * @param {*} other The other value to compare.\r\n   * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\r\n   * @example\r\n   *\r\n   * var object = { 'a': 1 };\r\n   * var other = { 'a': 1 };\r\n   *\r\n   * _.isEqual(object, other);\r\n   * // => true\r\n   *\r\n   * object === other;\r\n   * // => false\r\n   */\r\n  function isEqual(value, other) {\r\n    return baseIsEqual(value, other);\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is a finite primitive number.\r\n   *\r\n   * **Note:** This method is based on\r\n   * [`Number.isFinite`](https://mdn.io/Number/isFinite).\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\r\n   * @example\r\n   *\r\n   * _.isFinite(3);\r\n   * // => true\r\n   *\r\n   * _.isFinite(Number.MIN_VALUE);\r\n   * // => true\r\n   *\r\n   * _.isFinite(Infinity);\r\n   * // => false\r\n   *\r\n   * _.isFinite('3');\r\n   * // => false\r\n   */\r\n  function isFinite(value) {\r\n    return typeof value == 'number' && nativeIsFinite(value);\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is classified as a `Function` object.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a function, else `false`.\r\n   * @example\r\n   *\r\n   * _.isFunction(_);\r\n   * // => true\r\n   *\r\n   * _.isFunction(/abc/);\r\n   * // => false\r\n   */\r\n  function isFunction(value) {\r\n    if (!isObject(value)) {\r\n      return false;\r\n    }\r\n    // The use of `Object#toString` avoids issues with the `typeof` operator\r\n    // in Safari 9 which returns 'object' for typed arrays and other constructors.\r\n    var tag = baseGetTag(value);\r\n    return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is a valid array-like length.\r\n   *\r\n   * **Note:** This method is loosely based on\r\n   * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\r\n   * @example\r\n   *\r\n   * _.isLength(3);\r\n   * // => true\r\n   *\r\n   * _.isLength(Number.MIN_VALUE);\r\n   * // => false\r\n   *\r\n   * _.isLength(Infinity);\r\n   * // => false\r\n   *\r\n   * _.isLength('3');\r\n   * // => false\r\n   */\r\n  function isLength(value) {\r\n    return typeof value == 'number' &&\r\n      value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is the\r\n   * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\r\n   * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is an object, else `false`.\r\n   * @example\r\n   *\r\n   * _.isObject({});\r\n   * // => true\r\n   *\r\n   * _.isObject([1, 2, 3]);\r\n   * // => true\r\n   *\r\n   * _.isObject(_.noop);\r\n   * // => true\r\n   *\r\n   * _.isObject(null);\r\n   * // => false\r\n   */\r\n  function isObject(value) {\r\n    var type = typeof value;\r\n    return value != null && (type == 'object' || type == 'function');\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is object-like. A value is object-like if it's not `null`\r\n   * and has a `typeof` result of \"object\".\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\r\n   * @example\r\n   *\r\n   * _.isObjectLike({});\r\n   * // => true\r\n   *\r\n   * _.isObjectLike([1, 2, 3]);\r\n   * // => true\r\n   *\r\n   * _.isObjectLike(_.noop);\r\n   * // => false\r\n   *\r\n   * _.isObjectLike(null);\r\n   * // => false\r\n   */\r\n  function isObjectLike(value) {\r\n    return value != null && typeof value == 'object';\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is `NaN`.\r\n   *\r\n   * **Note:** This method is based on\r\n   * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\r\n   * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\r\n   * `undefined` and other non-number values.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\r\n   * @example\r\n   *\r\n   * _.isNaN(NaN);\r\n   * // => true\r\n   *\r\n   * _.isNaN(new Number(NaN));\r\n   * // => true\r\n   *\r\n   * isNaN(undefined);\r\n   * // => true\r\n   *\r\n   * _.isNaN(undefined);\r\n   * // => false\r\n   */\r\n  function isNaN(value) {\r\n    // An `NaN` primitive is the only value that is not equal to itself.\r\n    // Perform the `toStringTag` check first to avoid errors with some\r\n    // ActiveX objects in IE.\r\n    return isNumber(value) && value != +value;\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is `null`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\r\n   * @example\r\n   *\r\n   * _.isNull(null);\r\n   * // => true\r\n   *\r\n   * _.isNull(void 0);\r\n   * // => false\r\n   */\r\n  function isNull(value) {\r\n    return value === null;\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is classified as a `Number` primitive or object.\r\n   *\r\n   * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\r\n   * classified as numbers, use the `_.isFinite` method.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a number, else `false`.\r\n   * @example\r\n   *\r\n   * _.isNumber(3);\r\n   * // => true\r\n   *\r\n   * _.isNumber(Number.MIN_VALUE);\r\n   * // => true\r\n   *\r\n   * _.isNumber(Infinity);\r\n   * // => true\r\n   *\r\n   * _.isNumber('3');\r\n   * // => false\r\n   */\r\n  function isNumber(value) {\r\n    return typeof value == 'number' ||\r\n      (isObjectLike(value) && baseGetTag(value) == numberTag);\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is classified as a `RegExp` object.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.1.0\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\r\n   * @example\r\n   *\r\n   * _.isRegExp(/abc/);\r\n   * // => true\r\n   *\r\n   * _.isRegExp('/abc/');\r\n   * // => false\r\n   */\r\n  var isRegExp = baseIsRegExp;\r\n\r\n  /**\r\n   * Checks if `value` is classified as a `String` primitive or object.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is a string, else `false`.\r\n   * @example\r\n   *\r\n   * _.isString('abc');\r\n   * // => true\r\n   *\r\n   * _.isString(1);\r\n   * // => false\r\n   */\r\n  function isString(value) {\r\n    return typeof value == 'string' ||\r\n      (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\r\n  }\r\n\r\n  /**\r\n   * Checks if `value` is `undefined`.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Lang\r\n   * @param {*} value The value to check.\r\n   * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\r\n   * @example\r\n   *\r\n   * _.isUndefined(void 0);\r\n   * // => true\r\n   *\r\n   * _.isUndefined(null);\r\n   * // => false\r\n   */\r\n  function isUndefined(value) {\r\n    return value === undefined;\r\n  }\r\n\r\n  /**\r\n   * Converts `value` to an array.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Lang\r\n   * @param {*} value The value to convert.\r\n   * @returns {Array} Returns the converted array.\r\n   * @example\r\n   *\r\n   * _.toArray({ 'a': 1, 'b': 2 });\r\n   * // => [1, 2]\r\n   *\r\n   * _.toArray('abc');\r\n   * // => ['a', 'b', 'c']\r\n   *\r\n   * _.toArray(1);\r\n   * // => []\r\n   *\r\n   * _.toArray(null);\r\n   * // => []\r\n   */\r\n  function toArray(value) {\r\n    if (!isArrayLike(value)) {\r\n      return values(value);\r\n    }\r\n    return value.length ? copyArray(value) : [];\r\n  }\r\n\r\n  /**\r\n   * Converts `value` to an integer.\r\n   *\r\n   * **Note:** This method is loosely based on\r\n   * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @category Lang\r\n   * @param {*} value The value to convert.\r\n   * @returns {number} Returns the converted integer.\r\n   * @example\r\n   *\r\n   * _.toInteger(3.2);\r\n   * // => 3\r\n   *\r\n   * _.toInteger(Number.MIN_VALUE);\r\n   * // => 0\r\n   *\r\n   * _.toInteger(Infinity);\r\n   * // => 1.7976931348623157e+308\r\n   *\r\n   * _.toInteger('3.2');\r\n   * // => 3\r\n   */\r\n  var toInteger = Number;\r\n\r\n  /**\r\n   * Converts `value` to a number.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @category Lang\r\n   * @param {*} value The value to process.\r\n   * @returns {number} Returns the number.\r\n   * @example\r\n   *\r\n   * _.toNumber(3.2);\r\n   * // => 3.2\r\n   *\r\n   * _.toNumber(Number.MIN_VALUE);\r\n   * // => 5e-324\r\n   *\r\n   * _.toNumber(Infinity);\r\n   * // => Infinity\r\n   *\r\n   * _.toNumber('3.2');\r\n   * // => 3.2\r\n   */\r\n  var toNumber = Number;\r\n\r\n  /**\r\n   * Converts `value` to a string. An empty string is returned for `null`\r\n   * and `undefined` values. The sign of `-0` is preserved.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @category Lang\r\n   * @param {*} value The value to convert.\r\n   * @returns {string} Returns the converted string.\r\n   * @example\r\n   *\r\n   * _.toString(null);\r\n   * // => ''\r\n   *\r\n   * _.toString(-0);\r\n   * // => '-0'\r\n   *\r\n   * _.toString([1, 2, 3]);\r\n   * // => '1,2,3'\r\n   */\r\n  function toString(value) {\r\n    if (typeof value == 'string') {\r\n      return value;\r\n    }\r\n    return value == null ? '' : (value + '');\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Assigns own enumerable string keyed properties of source objects to the\r\n   * destination object. Source objects are applied from left to right.\r\n   * Subsequent sources overwrite property assignments of previous sources.\r\n   *\r\n   * **Note:** This method mutates `object` and is loosely based on\r\n   * [`Object.assign`](https://mdn.io/Object/assign).\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 0.10.0\r\n   * @category Object\r\n   * @param {Object} object The destination object.\r\n   * @param {...Object} [sources] The source objects.\r\n   * @returns {Object} Returns `object`.\r\n   * @see _.assignIn\r\n   * @example\r\n   *\r\n   * function Foo() {\r\n   *   this.a = 1;\r\n   * }\r\n   *\r\n   * function Bar() {\r\n   *   this.c = 3;\r\n   * }\r\n   *\r\n   * Foo.prototype.b = 2;\r\n   * Bar.prototype.d = 4;\r\n   *\r\n   * _.assign({ 'a': 0 }, new Foo, new Bar);\r\n   * // => { 'a': 1, 'c': 3 }\r\n   */\r\n  var assign = createAssigner(function(object, source) {\r\n    copyObject(source, nativeKeys(source), object);\r\n  });\r\n\r\n  /**\r\n   * This method is like `_.assign` except that it iterates over own and\r\n   * inherited source properties.\r\n   *\r\n   * **Note:** This method mutates `object`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 4.0.0\r\n   * @alias extend\r\n   * @category Object\r\n   * @param {Object} object The destination object.\r\n   * @param {...Object} [sources] The source objects.\r\n   * @returns {Object} Returns `object`.\r\n   * @see _.assign\r\n   * @example\r\n   *\r\n   * function Foo() {\r\n   *   this.a = 1;\r\n   * }\r\n   *\r\n   * function Bar() {\r\n   *   this.c = 3;\r\n   * }\r\n   *\r\n   * Foo.prototype.b = 2;\r\n   * Bar.prototype.d = 4;\r\n   *\r\n   * _.assignIn({ 'a': 0 }, new Foo, new Bar);\r\n   * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\r\n   */\r\n  var assignIn = createAssigner(function(object, source) {\r\n    copyObject(source, nativeKeysIn(source), object);\r\n  });\r\n\r\n  /**\r\n   * Creates an object that inherits from the `prototype` object. If a\r\n   * `properties` object is given, its own enumerable string keyed properties\r\n   * are assigned to the created object.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 2.3.0\r\n   * @category Object\r\n   * @param {Object} prototype The object to inherit from.\r\n   * @param {Object} [properties] The properties to assign to the object.\r\n   * @returns {Object} Returns the new object.\r\n   * @example\r\n   *\r\n   * function Shape() {\r\n   *   this.x = 0;\r\n   *   this.y = 0;\r\n   * }\r\n   *\r\n   * function Circle() {\r\n   *   Shape.call(this);\r\n   * }\r\n   *\r\n   * Circle.prototype = _.create(Shape.prototype, {\r\n   *   'constructor': Circle\r\n   * });\r\n   *\r\n   * var circle = new Circle;\r\n   * circle instanceof Circle;\r\n   * // => true\r\n   *\r\n   * circle instanceof Shape;\r\n   * // => true\r\n   */\r\n  function create(prototype, properties) {\r\n    var result = baseCreate(prototype);\r\n    return properties == null ? result : assign(result, properties);\r\n  }\r\n\r\n  /**\r\n   * Assigns own and inherited enumerable string keyed properties of source\r\n   * objects to the destination object for all destination properties that\r\n   * resolve to `undefined`. Source objects are applied from left to right.\r\n   * Once a property is set, additional values of the same property are ignored.\r\n   *\r\n   * **Note:** This method mutates `object`.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Object\r\n   * @param {Object} object The destination object.\r\n   * @param {...Object} [sources] The source objects.\r\n   * @returns {Object} Returns `object`.\r\n   * @see _.defaultsDeep\r\n   * @example\r\n   *\r\n   * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\r\n   * // => { 'a': 1, 'b': 2 }\r\n   */\r\n  var defaults = baseRest(function(object, sources) {\r\n    object = Object(object);\r\n\r\n    var index = -1;\r\n    var length = sources.length;\r\n    var guard = length > 2 ? sources[2] : undefined;\r\n\r\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\r\n      length = 1;\r\n    }\r\n\r\n    while (++index < length) {\r\n      var source = sources[index];\r\n      var props = keysIn(source);\r\n      var propsIndex = -1;\r\n      var propsLength = props.length;\r\n\r\n      while (++propsIndex < propsLength) {\r\n        var key = props[propsIndex];\r\n        var value = object[key];\r\n\r\n        if (value === undefined ||\r\n            (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\r\n          object[key] = source[key];\r\n        }\r\n      }\r\n    }\r\n\r\n    return object;\r\n  });\r\n\r\n  /**\r\n   * Checks if `path` is a direct property of `object`.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Object\r\n   * @param {Object} object The object to query.\r\n   * @param {Array|string} path The path to check.\r\n   * @returns {boolean} Returns `true` if `path` exists, else `false`.\r\n   * @example\r\n   *\r\n   * var object = { 'a': { 'b': 2 } };\r\n   * var other = _.create({ 'a': _.create({ 'b': 2 }) });\r\n   *\r\n   * _.has(object, 'a');\r\n   * // => true\r\n   *\r\n   * _.has(object, 'a.b');\r\n   * // => true\r\n   *\r\n   * _.has(object, ['a', 'b']);\r\n   * // => true\r\n   *\r\n   * _.has(other, 'a');\r\n   * // => false\r\n   */\r\n  function has(object, path) {\r\n    return object != null && hasOwnProperty.call(object, path);\r\n  }\r\n\r\n  /**\r\n   * Creates an array of the own enumerable property names of `object`.\r\n   *\r\n   * **Note:** Non-object values are coerced to objects. See the\r\n   * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\r\n   * for more details.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Object\r\n   * @param {Object} object The object to query.\r\n   * @returns {Array} Returns the array of property names.\r\n   * @example\r\n   *\r\n   * function Foo() {\r\n   *   this.a = 1;\r\n   *   this.b = 2;\r\n   * }\r\n   *\r\n   * Foo.prototype.c = 3;\r\n   *\r\n   * _.keys(new Foo);\r\n   * // => ['a', 'b'] (iteration order is not guaranteed)\r\n   *\r\n   * _.keys('hi');\r\n   * // => ['0', '1']\r\n   */\r\n  var keys = nativeKeys;\r\n\r\n  /**\r\n   * Creates an array of the own and inherited enumerable property names of `object`.\r\n   *\r\n   * **Note:** Non-object values are coerced to objects.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 3.0.0\r\n   * @category Object\r\n   * @param {Object} object The object to query.\r\n   * @returns {Array} Returns the array of property names.\r\n   * @example\r\n   *\r\n   * function Foo() {\r\n   *   this.a = 1;\r\n   *   this.b = 2;\r\n   * }\r\n   *\r\n   * Foo.prototype.c = 3;\r\n   *\r\n   * _.keysIn(new Foo);\r\n   * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\r\n   */\r\n  var keysIn = nativeKeysIn;\r\n\r\n  /**\r\n   * Creates an object composed of the picked `object` properties.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Object\r\n   * @param {Object} object The source object.\r\n   * @param {...(string|string[])} [paths] The property paths to pick.\r\n   * @returns {Object} Returns the new object.\r\n   * @example\r\n   *\r\n   * var object = { 'a': 1, 'b': '2', 'c': 3 };\r\n   *\r\n   * _.pick(object, ['a', 'c']);\r\n   * // => { 'a': 1, 'c': 3 }\r\n   */\r\n  var pick = flatRest(function(object, paths) {\r\n    return object == null ? {} : basePick(object, paths);\r\n  });\r\n\r\n  /**\r\n   * This method is like `_.get` except that if the resolved value is a\r\n   * function it's invoked with the `this` binding of its parent object and\r\n   * its result is returned.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Object\r\n   * @param {Object} object The object to query.\r\n   * @param {Array|string} path The path of the property to resolve.\r\n   * @param {*} [defaultValue] The value returned for `undefined` resolved values.\r\n   * @returns {*} Returns the resolved value.\r\n   * @example\r\n   *\r\n   * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\r\n   *\r\n   * _.result(object, 'a[0].b.c1');\r\n   * // => 3\r\n   *\r\n   * _.result(object, 'a[0].b.c2');\r\n   * // => 4\r\n   *\r\n   * _.result(object, 'a[0].b.c3', 'default');\r\n   * // => 'default'\r\n   *\r\n   * _.result(object, 'a[0].b.c3', _.constant('default'));\r\n   * // => 'default'\r\n   */\r\n  function result(object, path, defaultValue) {\r\n    var value = object == null ? undefined : object[path];\r\n    if (value === undefined) {\r\n      value = defaultValue;\r\n    }\r\n    return isFunction(value) ? value.call(object) : value;\r\n  }\r\n\r\n  /**\r\n   * Creates an array of the own enumerable string keyed property values of `object`.\r\n   *\r\n   * **Note:** Non-object values are coerced to objects.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Object\r\n   * @param {Object} object The object to query.\r\n   * @returns {Array} Returns the array of property values.\r\n   * @example\r\n   *\r\n   * function Foo() {\r\n   *   this.a = 1;\r\n   *   this.b = 2;\r\n   * }\r\n   *\r\n   * Foo.prototype.c = 3;\r\n   *\r\n   * _.values(new Foo);\r\n   * // => [1, 2] (iteration order is not guaranteed)\r\n   *\r\n   * _.values('hi');\r\n   * // => ['h', 'i']\r\n   */\r\n  function values(object) {\r\n    return object == null ? [] : baseValues(object, keys(object));\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\r\n   * corresponding HTML entities.\r\n   *\r\n   * **Note:** No other characters are escaped. To escape additional\r\n   * characters use a third-party library like [_he_](https://mths.be/he).\r\n   *\r\n   * Though the \">\" character is escaped for symmetry, characters like\r\n   * \">\" and \"/\" don't need escaping in HTML and have no special meaning\r\n   * unless they're part of a tag or unquoted attribute value. See\r\n   * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\r\n   * (under \"semi-related fun fact\") for more details.\r\n   *\r\n   * When working with HTML you should always\r\n   * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\r\n   * XSS vectors.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category String\r\n   * @param {string} [string=''] The string to escape.\r\n   * @returns {string} Returns the escaped string.\r\n   * @example\r\n   *\r\n   * _.escape('fred, barney, & pebbles');\r\n   * // => 'fred, barney, &amp; pebbles'\r\n   */\r\n  function escape(string) {\r\n    string = toString(string);\r\n    return (string && reHasUnescapedHtml.test(string))\r\n      ? string.replace(reUnescapedHtml, escapeHtmlChar)\r\n      : string;\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * This method returns the first argument it receives.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Util\r\n   * @param {*} value Any value.\r\n   * @returns {*} Returns `value`.\r\n   * @example\r\n   *\r\n   * var object = { 'a': 1 };\r\n   *\r\n   * console.log(_.identity(object) === object);\r\n   * // => true\r\n   */\r\n  function identity(value) {\r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * Creates a function that invokes `func` with the arguments of the created\r\n   * function. If `func` is a property name, the created function returns the\r\n   * property value for a given element. If `func` is an array or object, the\r\n   * created function returns `true` for elements that contain the equivalent\r\n   * source properties, otherwise it returns `false`.\r\n   *\r\n   * @static\r\n   * @since 4.0.0\r\n   * @memberOf _\r\n   * @category Util\r\n   * @param {*} [func=_.identity] The value to convert to a callback.\r\n   * @returns {Function} Returns the callback.\r\n   * @example\r\n   *\r\n   * var users = [\r\n   *   { 'user': 'barney', 'age': 36, 'active': true },\r\n   *   { 'user': 'fred',   'age': 40, 'active': false }\r\n   * ];\r\n   *\r\n   * // The `_.matches` iteratee shorthand.\r\n   * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\r\n   * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\r\n   *\r\n   * // The `_.matchesProperty` iteratee shorthand.\r\n   * _.filter(users, _.iteratee(['user', 'fred']));\r\n   * // => [{ 'user': 'fred', 'age': 40 }]\r\n   *\r\n   * // The `_.property` iteratee shorthand.\r\n   * _.map(users, _.iteratee('user'));\r\n   * // => ['barney', 'fred']\r\n   *\r\n   * // Create custom iteratee shorthands.\r\n   * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\r\n   *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\r\n   *     return func.test(string);\r\n   *   };\r\n   * });\r\n   *\r\n   * _.filter(['abc', 'def'], /ef/);\r\n   * // => ['def']\r\n   */\r\n  var iteratee = baseIteratee;\r\n\r\n  /**\r\n   * Creates a function that performs a partial deep comparison between a given\r\n   * object and `source`, returning `true` if the given object has equivalent\r\n   * property values, else `false`.\r\n   *\r\n   * **Note:** The created function is equivalent to `_.isMatch` with `source`\r\n   * partially applied.\r\n   *\r\n   * Partial comparisons will match empty array and empty object `source`\r\n   * values against any array or object value, respectively. See `_.isEqual`\r\n   * for a list of supported value comparisons.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 3.0.0\r\n   * @category Util\r\n   * @param {Object} source The object of property values to match.\r\n   * @returns {Function} Returns the new spec function.\r\n   * @example\r\n   *\r\n   * var objects = [\r\n   *   { 'a': 1, 'b': 2, 'c': 3 },\r\n   *   { 'a': 4, 'b': 5, 'c': 6 }\r\n   * ];\r\n   *\r\n   * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\r\n   * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\r\n   */\r\n  function matches(source) {\r\n    return baseMatches(assign({}, source));\r\n  }\r\n\r\n  /**\r\n   * Adds all own enumerable string keyed function properties of a source\r\n   * object to the destination object. If `object` is a function, then methods\r\n   * are added to its prototype as well.\r\n   *\r\n   * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\r\n   * avoid conflicts caused by modifying the original.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Util\r\n   * @param {Function|Object} [object=lodash] The destination object.\r\n   * @param {Object} source The object of functions to add.\r\n   * @param {Object} [options={}] The options object.\r\n   * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\r\n   * @returns {Function|Object} Returns `object`.\r\n   * @example\r\n   *\r\n   * function vowels(string) {\r\n   *   return _.filter(string, function(v) {\r\n   *     return /[aeiou]/i.test(v);\r\n   *   });\r\n   * }\r\n   *\r\n   * _.mixin({ 'vowels': vowels });\r\n   * _.vowels('fred');\r\n   * // => ['e']\r\n   *\r\n   * _('fred').vowels().value();\r\n   * // => ['e']\r\n   *\r\n   * _.mixin({ 'vowels': vowels }, { 'chain': false });\r\n   * _('fred').vowels();\r\n   * // => ['e']\r\n   */\r\n  function mixin(object, source, options) {\r\n    var props = keys(source),\r\n        methodNames = baseFunctions(source, props);\r\n\r\n    if (options == null &&\r\n        !(isObject(source) && (methodNames.length || !props.length))) {\r\n      options = source;\r\n      source = object;\r\n      object = this;\r\n      methodNames = baseFunctions(source, keys(source));\r\n    }\r\n    var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\r\n        isFunc = isFunction(object);\r\n\r\n    baseEach(methodNames, function(methodName) {\r\n      var func = source[methodName];\r\n      object[methodName] = func;\r\n      if (isFunc) {\r\n        object.prototype[methodName] = function() {\r\n          var chainAll = this.__chain__;\r\n          if (chain || chainAll) {\r\n            var result = object(this.__wrapped__),\r\n                actions = result.__actions__ = copyArray(this.__actions__);\r\n\r\n            actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\r\n            result.__chain__ = chainAll;\r\n            return result;\r\n          }\r\n          return func.apply(object, arrayPush([this.value()], arguments));\r\n        };\r\n      }\r\n    });\r\n\r\n    return object;\r\n  }\r\n\r\n  /**\r\n   * Reverts the `_` variable to its previous value and returns a reference to\r\n   * the `lodash` function.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Util\r\n   * @returns {Function} Returns the `lodash` function.\r\n   * @example\r\n   *\r\n   * var lodash = _.noConflict();\r\n   */\r\n  function noConflict() {\r\n    if (root._ === this) {\r\n      root._ = oldDash;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * This method returns `undefined`.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @since 2.3.0\r\n   * @category Util\r\n   * @example\r\n   *\r\n   * _.times(2, _.noop);\r\n   * // => [undefined, undefined]\r\n   */\r\n  function noop() {\r\n    // No operation performed.\r\n  }\r\n\r\n  /**\r\n   * Generates a unique ID. If `prefix` is given, the ID is appended to it.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Util\r\n   * @param {string} [prefix=''] The value to prefix the ID with.\r\n   * @returns {string} Returns the unique ID.\r\n   * @example\r\n   *\r\n   * _.uniqueId('contact_');\r\n   * // => 'contact_104'\r\n   *\r\n   * _.uniqueId();\r\n   * // => '105'\r\n   */\r\n  function uniqueId(prefix) {\r\n    var id = ++idCounter;\r\n    return toString(prefix) + id;\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * Computes the maximum value of `array`. If `array` is empty or falsey,\r\n   * `undefined` is returned.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Math\r\n   * @param {Array} array The array to iterate over.\r\n   * @returns {*} Returns the maximum value.\r\n   * @example\r\n   *\r\n   * _.max([4, 2, 8, 6]);\r\n   * // => 8\r\n   *\r\n   * _.max([]);\r\n   * // => undefined\r\n   */\r\n  function max(array) {\r\n    return (array && array.length)\r\n      ? baseExtremum(array, identity, baseGt)\r\n      : undefined;\r\n  }\r\n\r\n  /**\r\n   * Computes the minimum value of `array`. If `array` is empty or falsey,\r\n   * `undefined` is returned.\r\n   *\r\n   * @static\r\n   * @since 0.1.0\r\n   * @memberOf _\r\n   * @category Math\r\n   * @param {Array} array The array to iterate over.\r\n   * @returns {*} Returns the minimum value.\r\n   * @example\r\n   *\r\n   * _.min([4, 2, 8, 6]);\r\n   * // => 2\r\n   *\r\n   * _.min([]);\r\n   * // => undefined\r\n   */\r\n  function min(array) {\r\n    return (array && array.length)\r\n      ? baseExtremum(array, identity, baseLt)\r\n      : undefined;\r\n  }\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  // Add methods that return wrapped values in chain sequences.\r\n  lodash.assignIn = assignIn;\r\n  lodash.before = before;\r\n  lodash.bind = bind;\r\n  lodash.chain = chain;\r\n  lodash.compact = compact;\r\n  lodash.concat = concat;\r\n  lodash.create = create;\r\n  lodash.defaults = defaults;\r\n  lodash.defer = defer;\r\n  lodash.delay = delay;\r\n  lodash.filter = filter;\r\n  lodash.flatten = flatten;\r\n  lodash.flattenDeep = flattenDeep;\r\n  lodash.iteratee = iteratee;\r\n  lodash.keys = keys;\r\n  lodash.map = map;\r\n  lodash.matches = matches;\r\n  lodash.mixin = mixin;\r\n  lodash.negate = negate;\r\n  lodash.once = once;\r\n  lodash.pick = pick;\r\n  lodash.slice = slice;\r\n  lodash.sortBy = sortBy;\r\n  lodash.tap = tap;\r\n  lodash.thru = thru;\r\n  lodash.toArray = toArray;\r\n  lodash.values = values;\r\n\r\n  // Add aliases.\r\n  lodash.extend = assignIn;\r\n\r\n  // Add methods to `lodash.prototype`.\r\n  mixin(lodash, lodash);\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  // Add methods that return unwrapped values in chain sequences.\r\n  lodash.clone = clone;\r\n  lodash.escape = escape;\r\n  lodash.every = every;\r\n  lodash.find = find;\r\n  lodash.forEach = forEach;\r\n  lodash.has = has;\r\n  lodash.head = head;\r\n  lodash.identity = identity;\r\n  lodash.indexOf = indexOf;\r\n  lodash.isArguments = isArguments;\r\n  lodash.isArray = isArray;\r\n  lodash.isBoolean = isBoolean;\r\n  lodash.isDate = isDate;\r\n  lodash.isEmpty = isEmpty;\r\n  lodash.isEqual = isEqual;\r\n  lodash.isFinite = isFinite;\r\n  lodash.isFunction = isFunction;\r\n  lodash.isNaN = isNaN;\r\n  lodash.isNull = isNull;\r\n  lodash.isNumber = isNumber;\r\n  lodash.isObject = isObject;\r\n  lodash.isRegExp = isRegExp;\r\n  lodash.isString = isString;\r\n  lodash.isUndefined = isUndefined;\r\n  lodash.last = last;\r\n  lodash.max = max;\r\n  lodash.min = min;\r\n  lodash.noConflict = noConflict;\r\n  lodash.noop = noop;\r\n  lodash.reduce = reduce;\r\n  lodash.result = result;\r\n  lodash.size = size;\r\n  lodash.some = some;\r\n  lodash.uniqueId = uniqueId;\r\n\r\n  // Add aliases.\r\n  lodash.each = forEach;\r\n  lodash.first = head;\r\n\r\n  mixin(lodash, (function() {\r\n    var source = {};\r\n    baseForOwn(lodash, function(func, methodName) {\r\n      if (!hasOwnProperty.call(lodash.prototype, methodName)) {\r\n        source[methodName] = func;\r\n      }\r\n    });\r\n    return source;\r\n  }()), { 'chain': false });\r\n\r\n  /*------------------------------------------------------------------------*/\r\n\r\n  /**\r\n   * The semantic version number.\r\n   *\r\n   * @static\r\n   * @memberOf _\r\n   * @type {string}\r\n   */\r\n  lodash.VERSION = VERSION;\r\n\r\n  // Add `Array` methods to `lodash.prototype`.\r\n  baseEach(['pop', 'join', 'replace', 'reverse', 'split', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\r\n    var func = (/^(?:replace|split)$/.test(methodName) ? String.prototype : arrayProto)[methodName],\r\n        chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\r\n        retUnwrapped = /^(?:pop|join|replace|shift)$/.test(methodName);\r\n\r\n    lodash.prototype[methodName] = function() {\r\n      var args = arguments;\r\n      if (retUnwrapped && !this.__chain__) {\r\n        var value = this.value();\r\n        return func.apply(isArray(value) ? value : [], args);\r\n      }\r\n      return this[chainName](function(value) {\r\n        return func.apply(isArray(value) ? value : [], args);\r\n      });\r\n    };\r\n  });\r\n\r\n  // Add chain sequence methods to the `lodash` wrapper.\r\n  lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\r\n\r\n  /*--------------------------------------------------------------------------*/\r\n\r\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\r\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\r\n    // Expose Lodash on the global object to prevent errors when Lodash is\r\n    // loaded by a script tag in the presence of an AMD loader.\r\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\r\n    // Use `_.noConflict` to remove Lodash from the global object.\r\n    root._ = lodash;\r\n\r\n    // Define as an anonymous module so, through path mapping, it can be\r\n    // referenced as the \"underscore\" module.\r\n    define(function() {\r\n      return lodash;\r\n    });\r\n  }\r\n  // Check for `exports` after `define` in case a build optimizer adds it.\r\n  else if (freeModule) {\r\n    // Export for Node.js.\r\n    (freeModule.exports = lodash)._ = lodash;\r\n    // Export for CommonJS support.\r\n    freeExports._ = lodash;\r\n  }\r\n  else {\r\n    // Export to the global object.\r\n    root._ = lodash;\r\n  }\r\n}.call(this));\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{}],89:[function(require,module,exports){\r\nmodule.exports = MultiStream\r\n\r\nvar inherits = require('inherits')\r\nvar stream = require('readable-stream')\r\n\r\ninherits(MultiStream, stream.Readable)\r\n\r\nfunction MultiStream (streams, opts) {\r\n  var self = this\r\n  if (!(self instanceof MultiStream)) return new MultiStream(streams, opts)\r\n  stream.Readable.call(self, opts)\r\n\r\n  self.destroyed = false\r\n\r\n  self._drained = false\r\n  self._forwarding = false\r\n  self._current = null\r\n  self._toStreams2 = (opts && opts.objectMode) ? toStreams2Obj : toStreams2Buf\r\n\r\n  if (typeof streams === 'function') {\r\n    self._queue = streams\r\n  } else {\r\n    self._queue = streams.map(self._toStreams2)\r\n    self._queue.forEach(function (stream) {\r\n      if (typeof stream !== 'function') self._attachErrorListener(stream)\r\n    })\r\n  }\r\n\r\n  self._next()\r\n}\r\n\r\nMultiStream.obj = function (streams) {\r\n  return new MultiStream(streams, { objectMode: true, highWaterMark: 16 })\r\n}\r\n\r\nMultiStream.prototype._read = function () {\r\n  this._drained = true\r\n  this._forward()\r\n}\r\n\r\nMultiStream.prototype._forward = function () {\r\n  if (this._forwarding || !this._drained || !this._current) return\r\n  this._forwarding = true\r\n\r\n  var chunk\r\n  while ((chunk = this._current.read()) !== null) {\r\n    this._drained = this.push(chunk)\r\n  }\r\n\r\n  this._forwarding = false\r\n}\r\n\r\nMultiStream.prototype.destroy = function (err) {\r\n  if (this.destroyed) return\r\n  this.destroyed = true\r\n\r\n  if (this._current && this._current.destroy) this._current.destroy()\r\n  if (typeof this._queue !== 'function') {\r\n    this._queue.forEach(function (stream) {\r\n      if (stream.destroy) stream.destroy()\r\n    })\r\n  }\r\n\r\n  if (err) this.emit('error', err)\r\n  this.emit('close')\r\n}\r\n\r\nMultiStream.prototype._next = function () {\r\n  var self = this\r\n  self._current = null\r\n\r\n  if (typeof self._queue === 'function') {\r\n    self._queue(function (err, stream) {\r\n      if (err) return self.destroy(err)\r\n      stream = self._toStreams2(stream)\r\n      self._attachErrorListener(stream)\r\n      self._gotNextStream(stream)\r\n    })\r\n  } else {\r\n    var stream = self._queue.shift()\r\n    if (typeof stream === 'function') {\r\n      stream = self._toStreams2(stream())\r\n      self._attachErrorListener(stream)\r\n    }\r\n    self._gotNextStream(stream)\r\n  }\r\n}\r\n\r\nMultiStream.prototype._gotNextStream = function (stream) {\r\n  var self = this\r\n\r\n  if (!stream) {\r\n    self.push(null)\r\n    self.destroy()\r\n    return\r\n  }\r\n\r\n  self._current = stream\r\n  self._forward()\r\n\r\n  stream.on('readable', onReadable)\r\n  stream.once('end', onEnd)\r\n  stream.once('close', onClose)\r\n\r\n  function onReadable () {\r\n    self._forward()\r\n  }\r\n\r\n  function onClose () {\r\n    if (!stream._readableState.ended) {\r\n      self.destroy()\r\n    }\r\n  }\r\n\r\n  function onEnd () {\r\n    self._current = null\r\n    stream.removeListener('readable', onReadable)\r\n    stream.removeListener('end', onEnd)\r\n    stream.removeListener('close', onClose)\r\n    self._next()\r\n  }\r\n}\r\n\r\nMultiStream.prototype._attachErrorListener = function (stream) {\r\n  var self = this\r\n  if (!stream) return\r\n\r\n  stream.once('error', onError)\r\n\r\n  function onError (err) {\r\n    stream.removeListener('error', onError)\r\n    self.destroy(err)\r\n  }\r\n}\r\n\r\nfunction toStreams2Obj (s) {\r\n  return toStreams2(s, {objectMode: true, highWaterMark: 16})\r\n}\r\n\r\nfunction toStreams2Buf (s) {\r\n  return toStreams2(s)\r\n}\r\n\r\nfunction toStreams2 (s, opts) {\r\n  if (!s || typeof s === 'function' || s._readableState) return s\r\n\r\n  var wrap = new stream.Readable(opts).wrap(s)\r\n  if (s.destroy) {\r\n    wrap.destroy = s.destroy.bind(s)\r\n  }\r\n  return wrap\r\n}\r\n\r\n},{\"inherits\":84,\"readable-stream\":107}],90:[function(require,module,exports){\r\n(function (process){\r\n'use strict';\r\n\r\nif (!process.version ||\r\n    process.version.indexOf('v0.') === 0 ||\r\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\r\n  module.exports = { nextTick: nextTick };\r\n} else {\r\n  module.exports = process\r\n}\r\n\r\nfunction nextTick(fn, arg1, arg2, arg3) {\r\n  if (typeof fn !== 'function') {\r\n    throw new TypeError('\"callback\" argument must be a function');\r\n  }\r\n  var len = arguments.length;\r\n  var args, i;\r\n  switch (len) {\r\n  case 0:\r\n  case 1:\r\n    return process.nextTick(fn);\r\n  case 2:\r\n    return process.nextTick(function afterTickOne() {\r\n      fn.call(null, arg1);\r\n    });\r\n  case 3:\r\n    return process.nextTick(function afterTickTwo() {\r\n      fn.call(null, arg1, arg2);\r\n    });\r\n  case 4:\r\n    return process.nextTick(function afterTickThree() {\r\n      fn.call(null, arg1, arg2, arg3);\r\n    });\r\n  default:\r\n    args = new Array(len - 1);\r\n    i = 0;\r\n    while (i < args.length) {\r\n      args[i++] = arguments[i];\r\n    }\r\n    return process.nextTick(function afterTick() {\r\n      fn.apply(null, args);\r\n    });\r\n  }\r\n}\r\n\r\n\r\n}).call(this,require('_process'))\r\n\r\n},{\"_process\":91}],91:[function(require,module,exports){\r\n// shim for using process in browser\r\nvar process = module.exports = {};\r\n\r\n// cached from whatever global is present so that test runners that stub it\r\n// don't break things.  But we need to wrap it in a try catch in case it is\r\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\r\n// function because try/catches deoptimize in certain engines.\r\n\r\nvar cachedSetTimeout;\r\nvar cachedClearTimeout;\r\n\r\nfunction defaultSetTimout() {\r\n    throw new Error('setTimeout has not been defined');\r\n}\r\nfunction defaultClearTimeout () {\r\n    throw new Error('clearTimeout has not been defined');\r\n}\r\n(function () {\r\n    try {\r\n        if (typeof setTimeout === 'function') {\r\n            cachedSetTimeout = setTimeout;\r\n        } else {\r\n            cachedSetTimeout = defaultSetTimout;\r\n        }\r\n    } catch (e) {\r\n        cachedSetTimeout = defaultSetTimout;\r\n    }\r\n    try {\r\n        if (typeof clearTimeout === 'function') {\r\n            cachedClearTimeout = clearTimeout;\r\n        } else {\r\n            cachedClearTimeout = defaultClearTimeout;\r\n        }\r\n    } catch (e) {\r\n        cachedClearTimeout = defaultClearTimeout;\r\n    }\r\n} ())\r\nfunction runTimeout(fun) {\r\n    if (cachedSetTimeout === setTimeout) {\r\n        //normal enviroments in sane situations\r\n        return setTimeout(fun, 0);\r\n    }\r\n    // if setTimeout wasn't available but was latter defined\r\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\r\n        cachedSetTimeout = setTimeout;\r\n        return setTimeout(fun, 0);\r\n    }\r\n    try {\r\n        // when when somebody has screwed with setTimeout but no I.E. maddness\r\n        return cachedSetTimeout(fun, 0);\r\n    } catch(e){\r\n        try {\r\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\r\n            return cachedSetTimeout.call(null, fun, 0);\r\n        } catch(e){\r\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\r\n            return cachedSetTimeout.call(this, fun, 0);\r\n        }\r\n    }\r\n\r\n\r\n}\r\nfunction runClearTimeout(marker) {\r\n    if (cachedClearTimeout === clearTimeout) {\r\n        //normal enviroments in sane situations\r\n        return clearTimeout(marker);\r\n    }\r\n    // if clearTimeout wasn't available but was latter defined\r\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\r\n        cachedClearTimeout = clearTimeout;\r\n        return clearTimeout(marker);\r\n    }\r\n    try {\r\n        // when when somebody has screwed with setTimeout but no I.E. maddness\r\n        return cachedClearTimeout(marker);\r\n    } catch (e){\r\n        try {\r\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\r\n            return cachedClearTimeout.call(null, marker);\r\n        } catch (e){\r\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\r\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\r\n            return cachedClearTimeout.call(this, marker);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\nvar queue = [];\r\nvar draining = false;\r\nvar currentQueue;\r\nvar queueIndex = -1;\r\n\r\nfunction cleanUpNextTick() {\r\n    if (!draining || !currentQueue) {\r\n        return;\r\n    }\r\n    draining = false;\r\n    if (currentQueue.length) {\r\n        queue = currentQueue.concat(queue);\r\n    } else {\r\n        queueIndex = -1;\r\n    }\r\n    if (queue.length) {\r\n        drainQueue();\r\n    }\r\n}\r\n\r\nfunction drainQueue() {\r\n    if (draining) {\r\n        return;\r\n    }\r\n    var timeout = runTimeout(cleanUpNextTick);\r\n    draining = true;\r\n\r\n    var len = queue.length;\r\n    while(len) {\r\n        currentQueue = queue;\r\n        queue = [];\r\n        while (++queueIndex < len) {\r\n            if (currentQueue) {\r\n                currentQueue[queueIndex].run();\r\n            }\r\n        }\r\n        queueIndex = -1;\r\n        len = queue.length;\r\n    }\r\n    currentQueue = null;\r\n    draining = false;\r\n    runClearTimeout(timeout);\r\n}\r\n\r\nprocess.nextTick = function (fun) {\r\n    var args = new Array(arguments.length - 1);\r\n    if (arguments.length > 1) {\r\n        for (var i = 1; i < arguments.length; i++) {\r\n            args[i - 1] = arguments[i];\r\n        }\r\n    }\r\n    queue.push(new Item(fun, args));\r\n    if (queue.length === 1 && !draining) {\r\n        runTimeout(drainQueue);\r\n    }\r\n};\r\n\r\n// v8 likes predictible objects\r\nfunction Item(fun, array) {\r\n    this.fun = fun;\r\n    this.array = array;\r\n}\r\nItem.prototype.run = function () {\r\n    this.fun.apply(null, this.array);\r\n};\r\nprocess.title = 'browser';\r\nprocess.browser = true;\r\nprocess.env = {};\r\nprocess.argv = [];\r\nprocess.version = ''; // empty string to avoid regexp issues\r\nprocess.versions = {};\r\n\r\nfunction noop() {}\r\n\r\nprocess.on = noop;\r\nprocess.addListener = noop;\r\nprocess.once = noop;\r\nprocess.off = noop;\r\nprocess.removeListener = noop;\r\nprocess.removeAllListeners = noop;\r\nprocess.emit = noop;\r\nprocess.prependListener = noop;\r\nprocess.prependOnceListener = noop;\r\n\r\nprocess.listeners = function (name) { return [] }\r\n\r\nprocess.binding = function (name) {\r\n    throw new Error('process.binding is not supported');\r\n};\r\n\r\nprocess.cwd = function () { return '/' };\r\nprocess.chdir = function (dir) {\r\n    throw new Error('process.chdir is not supported');\r\n};\r\nprocess.umask = function() { return 0; };\r\n\r\n},{}],92:[function(require,module,exports){\r\n'use strict';\r\n\r\nvar asap = require('asap/raw');\r\n\r\nfunction noop() {}\r\n\r\n// States:\r\n//\r\n// 0 - pending\r\n// 1 - fulfilled with _value\r\n// 2 - rejected with _value\r\n// 3 - adopted the state of another promise, _value\r\n//\r\n// once the state is no longer pending (0) it is immutable\r\n\r\n// All `_` prefixed properties will be reduced to `_{random number}`\r\n// at build time to obfuscate them and discourage their use.\r\n// We don't use symbols or Object.defineProperty to fully hide them\r\n// because the performance isn't good enough.\r\n\r\n\r\n// to avoid using try/catch inside critical functions, we\r\n// extract them to here.\r\nvar LAST_ERROR = null;\r\nvar IS_ERROR = {};\r\nfunction getThen(obj) {\r\n  try {\r\n    return obj.then;\r\n  } catch (ex) {\r\n    LAST_ERROR = ex;\r\n    return IS_ERROR;\r\n  }\r\n}\r\n\r\nfunction tryCallOne(fn, a) {\r\n  try {\r\n    return fn(a);\r\n  } catch (ex) {\r\n    LAST_ERROR = ex;\r\n    return IS_ERROR;\r\n  }\r\n}\r\nfunction tryCallTwo(fn, a, b) {\r\n  try {\r\n    fn(a, b);\r\n  } catch (ex) {\r\n    LAST_ERROR = ex;\r\n    return IS_ERROR;\r\n  }\r\n}\r\n\r\nmodule.exports = Promise;\r\n\r\nfunction Promise(fn) {\r\n  if (typeof this !== 'object') {\r\n    throw new TypeError('Promises must be constructed via new');\r\n  }\r\n  if (typeof fn !== 'function') {\r\n    throw new TypeError('Promise constructor\\'s argument is not a function');\r\n  }\r\n  this._40 = 0;\r\n  this._65 = 0;\r\n  this._55 = null;\r\n  this._72 = null;\r\n  if (fn === noop) return;\r\n  doResolve(fn, this);\r\n}\r\nPromise._37 = null;\r\nPromise._87 = null;\r\nPromise._61 = noop;\r\n\r\nPromise.prototype.then = function(onFulfilled, onRejected) {\r\n  if (this.constructor !== Promise) {\r\n    return safeThen(this, onFulfilled, onRejected);\r\n  }\r\n  var res = new Promise(noop);\r\n  handle(this, new Handler(onFulfilled, onRejected, res));\r\n  return res;\r\n};\r\n\r\nfunction safeThen(self, onFulfilled, onRejected) {\r\n  return new self.constructor(function (resolve, reject) {\r\n    var res = new Promise(noop);\r\n    res.then(resolve, reject);\r\n    handle(self, new Handler(onFulfilled, onRejected, res));\r\n  });\r\n}\r\nfunction handle(self, deferred) {\r\n  while (self._65 === 3) {\r\n    self = self._55;\r\n  }\r\n  if (Promise._37) {\r\n    Promise._37(self);\r\n  }\r\n  if (self._65 === 0) {\r\n    if (self._40 === 0) {\r\n      self._40 = 1;\r\n      self._72 = deferred;\r\n      return;\r\n    }\r\n    if (self._40 === 1) {\r\n      self._40 = 2;\r\n      self._72 = [self._72, deferred];\r\n      return;\r\n    }\r\n    self._72.push(deferred);\r\n    return;\r\n  }\r\n  handleResolved(self, deferred);\r\n}\r\n\r\nfunction handleResolved(self, deferred) {\r\n  asap(function() {\r\n    var cb = self._65 === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n    if (cb === null) {\r\n      if (self._65 === 1) {\r\n        resolve(deferred.promise, self._55);\r\n      } else {\r\n        reject(deferred.promise, self._55);\r\n      }\r\n      return;\r\n    }\r\n    var ret = tryCallOne(cb, self._55);\r\n    if (ret === IS_ERROR) {\r\n      reject(deferred.promise, LAST_ERROR);\r\n    } else {\r\n      resolve(deferred.promise, ret);\r\n    }\r\n  });\r\n}\r\nfunction resolve(self, newValue) {\r\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n  if (newValue === self) {\r\n    return reject(\r\n      self,\r\n      new TypeError('A promise cannot be resolved with itself.')\r\n    );\r\n  }\r\n  if (\r\n    newValue &&\r\n    (typeof newValue === 'object' || typeof newValue === 'function')\r\n  ) {\r\n    var then = getThen(newValue);\r\n    if (then === IS_ERROR) {\r\n      return reject(self, LAST_ERROR);\r\n    }\r\n    if (\r\n      then === self.then &&\r\n      newValue instanceof Promise\r\n    ) {\r\n      self._65 = 3;\r\n      self._55 = newValue;\r\n      finale(self);\r\n      return;\r\n    } else if (typeof then === 'function') {\r\n      doResolve(then.bind(newValue), self);\r\n      return;\r\n    }\r\n  }\r\n  self._65 = 1;\r\n  self._55 = newValue;\r\n  finale(self);\r\n}\r\n\r\nfunction reject(self, newValue) {\r\n  self._65 = 2;\r\n  self._55 = newValue;\r\n  if (Promise._87) {\r\n    Promise._87(self, newValue);\r\n  }\r\n  finale(self);\r\n}\r\nfunction finale(self) {\r\n  if (self._40 === 1) {\r\n    handle(self, self._72);\r\n    self._72 = null;\r\n  }\r\n  if (self._40 === 2) {\r\n    for (var i = 0; i < self._72.length; i++) {\r\n      handle(self, self._72[i]);\r\n    }\r\n    self._72 = null;\r\n  }\r\n}\r\n\r\nfunction Handler(onFulfilled, onRejected, promise){\r\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n  this.promise = promise;\r\n}\r\n\r\n/**\r\n * Take a potentially misbehaving resolver function and make sure\r\n * onFulfilled and onRejected are only called once.\r\n *\r\n * Makes no guarantees about asynchrony.\r\n */\r\nfunction doResolve(fn, promise) {\r\n  var done = false;\r\n  var res = tryCallTwo(fn, function (value) {\r\n    if (done) return;\r\n    done = true;\r\n    resolve(promise, value);\r\n  }, function (reason) {\r\n    if (done) return;\r\n    done = true;\r\n    reject(promise, reason);\r\n  });\r\n  if (!done && res === IS_ERROR) {\r\n    done = true;\r\n    reject(promise, LAST_ERROR);\r\n  }\r\n}\r\n\r\n},{\"asap/raw\":38}],93:[function(require,module,exports){\r\n'use strict';\r\n\r\n//This file contains the ES6 extensions to the core Promises/A+ API\r\n\r\nvar Promise = require('./core.js');\r\n\r\nmodule.exports = Promise;\r\n\r\n/* Static Functions */\r\n\r\nvar TRUE = valuePromise(true);\r\nvar FALSE = valuePromise(false);\r\nvar NULL = valuePromise(null);\r\nvar UNDEFINED = valuePromise(undefined);\r\nvar ZERO = valuePromise(0);\r\nvar EMPTYSTRING = valuePromise('');\r\n\r\nfunction valuePromise(value) {\r\n  var p = new Promise(Promise._61);\r\n  p._65 = 1;\r\n  p._55 = value;\r\n  return p;\r\n}\r\nPromise.resolve = function (value) {\r\n  if (value instanceof Promise) return value;\r\n\r\n  if (value === null) return NULL;\r\n  if (value === undefined) return UNDEFINED;\r\n  if (value === true) return TRUE;\r\n  if (value === false) return FALSE;\r\n  if (value === 0) return ZERO;\r\n  if (value === '') return EMPTYSTRING;\r\n\r\n  if (typeof value === 'object' || typeof value === 'function') {\r\n    try {\r\n      var then = value.then;\r\n      if (typeof then === 'function') {\r\n        return new Promise(then.bind(value));\r\n      }\r\n    } catch (ex) {\r\n      return new Promise(function (resolve, reject) {\r\n        reject(ex);\r\n      });\r\n    }\r\n  }\r\n  return valuePromise(value);\r\n};\r\n\r\nPromise.all = function (arr) {\r\n  var args = Array.prototype.slice.call(arr);\r\n\r\n  return new Promise(function (resolve, reject) {\r\n    if (args.length === 0) return resolve([]);\r\n    var remaining = args.length;\r\n    function res(i, val) {\r\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\r\n          while (val._65 === 3) {\r\n            val = val._55;\r\n          }\r\n          if (val._65 === 1) return res(i, val._55);\r\n          if (val._65 === 2) reject(val._55);\r\n          val.then(function (val) {\r\n            res(i, val);\r\n          }, reject);\r\n          return;\r\n        } else {\r\n          var then = val.then;\r\n          if (typeof then === 'function') {\r\n            var p = new Promise(then.bind(val));\r\n            p.then(function (val) {\r\n              res(i, val);\r\n            }, reject);\r\n            return;\r\n          }\r\n        }\r\n      }\r\n      args[i] = val;\r\n      if (--remaining === 0) {\r\n        resolve(args);\r\n      }\r\n    }\r\n    for (var i = 0; i < args.length; i++) {\r\n      res(i, args[i]);\r\n    }\r\n  });\r\n};\r\n\r\nPromise.reject = function (value) {\r\n  return new Promise(function (resolve, reject) {\r\n    reject(value);\r\n  });\r\n};\r\n\r\nPromise.race = function (values) {\r\n  return new Promise(function (resolve, reject) {\r\n    values.forEach(function(value){\r\n      Promise.resolve(value).then(resolve, reject);\r\n    });\r\n  });\r\n};\r\n\r\n/* Prototype Methods */\r\n\r\nPromise.prototype['catch'] = function (onRejected) {\r\n  return this.then(null, onRejected);\r\n};\r\n\r\n},{\"./core.js\":92}],94:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n'use strict';\r\n\r\n// If obj.hasOwnProperty has been overridden, then calling\r\n// obj.hasOwnProperty(prop) will break.\r\n// See: https://github.com/joyent/node/issues/1707\r\nfunction hasOwnProperty(obj, prop) {\r\n  return Object.prototype.hasOwnProperty.call(obj, prop);\r\n}\r\n\r\nmodule.exports = function(qs, sep, eq, options) {\r\n  sep = sep || '&';\r\n  eq = eq || '=';\r\n  var obj = {};\r\n\r\n  if (typeof qs !== 'string' || qs.length === 0) {\r\n    return obj;\r\n  }\r\n\r\n  var regexp = /\\+/g;\r\n  qs = qs.split(sep);\r\n\r\n  var maxKeys = 1000;\r\n  if (options && typeof options.maxKeys === 'number') {\r\n    maxKeys = options.maxKeys;\r\n  }\r\n\r\n  var len = qs.length;\r\n  // maxKeys <= 0 means that we should not limit keys count\r\n  if (maxKeys > 0 && len > maxKeys) {\r\n    len = maxKeys;\r\n  }\r\n\r\n  for (var i = 0; i < len; ++i) {\r\n    var x = qs[i].replace(regexp, '%20'),\r\n        idx = x.indexOf(eq),\r\n        kstr, vstr, k, v;\r\n\r\n    if (idx >= 0) {\r\n      kstr = x.substr(0, idx);\r\n      vstr = x.substr(idx + 1);\r\n    } else {\r\n      kstr = x;\r\n      vstr = '';\r\n    }\r\n\r\n    k = decodeURIComponent(kstr);\r\n    v = decodeURIComponent(vstr);\r\n\r\n    if (!hasOwnProperty(obj, k)) {\r\n      obj[k] = v;\r\n    } else if (isArray(obj[k])) {\r\n      obj[k].push(v);\r\n    } else {\r\n      obj[k] = [obj[k], v];\r\n    }\r\n  }\r\n\r\n  return obj;\r\n};\r\n\r\nvar isArray = Array.isArray || function (xs) {\r\n  return Object.prototype.toString.call(xs) === '[object Array]';\r\n};\r\n\r\n},{}],95:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n'use strict';\r\n\r\nvar stringifyPrimitive = function(v) {\r\n  switch (typeof v) {\r\n    case 'string':\r\n      return v;\r\n\r\n    case 'boolean':\r\n      return v ? 'true' : 'false';\r\n\r\n    case 'number':\r\n      return isFinite(v) ? v : '';\r\n\r\n    default:\r\n      return '';\r\n  }\r\n};\r\n\r\nmodule.exports = function(obj, sep, eq, name) {\r\n  sep = sep || '&';\r\n  eq = eq || '=';\r\n  if (obj === null) {\r\n    obj = undefined;\r\n  }\r\n\r\n  if (typeof obj === 'object') {\r\n    return map(objectKeys(obj), function(k) {\r\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\r\n      if (isArray(obj[k])) {\r\n        return map(obj[k], function(v) {\r\n          return ks + encodeURIComponent(stringifyPrimitive(v));\r\n        }).join(sep);\r\n      } else {\r\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\r\n      }\r\n    }).join(sep);\r\n\r\n  }\r\n\r\n  if (!name) return '';\r\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\r\n         encodeURIComponent(stringifyPrimitive(obj));\r\n};\r\n\r\nvar isArray = Array.isArray || function (xs) {\r\n  return Object.prototype.toString.call(xs) === '[object Array]';\r\n};\r\n\r\nfunction map (xs, f) {\r\n  if (xs.map) return xs.map(f);\r\n  var res = [];\r\n  for (var i = 0; i < xs.length; i++) {\r\n    res.push(f(xs[i], i));\r\n  }\r\n  return res;\r\n}\r\n\r\nvar objectKeys = Object.keys || function (obj) {\r\n  var res = [];\r\n  for (var key in obj) {\r\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\r\n  }\r\n  return res;\r\n};\r\n\r\n},{}],96:[function(require,module,exports){\r\n'use strict';\r\n\r\nexports.decode = exports.parse = require('./decode');\r\nexports.encode = exports.stringify = require('./encode');\r\n\r\n},{\"./decode\":94,\"./encode\":95}],97:[function(require,module,exports){\r\nmodule.exports = require('./lib/_stream_duplex.js');\r\n\r\n},{\"./lib/_stream_duplex.js\":98}],98:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// a duplex stream is just a stream that is both readable and writable.\r\n// Since JS doesn't have multiple prototypal inheritance, this class\r\n// prototypally inherits from Readable, and then parasitically from\r\n// Writable.\r\n\r\n'use strict';\r\n\r\n/*<replacement>*/\r\n\r\nvar pna = require('process-nextick-args');\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\nvar objectKeys = Object.keys || function (obj) {\r\n  var keys = [];\r\n  for (var key in obj) {\r\n    keys.push(key);\r\n  }return keys;\r\n};\r\n/*</replacement>*/\r\n\r\nmodule.exports = Duplex;\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\nvar Readable = require('./_stream_readable');\r\nvar Writable = require('./_stream_writable');\r\n\r\nutil.inherits(Duplex, Readable);\r\n\r\n{\r\n  // avoid scope creep, the keys array can then be collected\r\n  var keys = objectKeys(Writable.prototype);\r\n  for (var v = 0; v < keys.length; v++) {\r\n    var method = keys[v];\r\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\r\n  }\r\n}\r\n\r\nfunction Duplex(options) {\r\n  if (!(this instanceof Duplex)) return new Duplex(options);\r\n\r\n  Readable.call(this, options);\r\n  Writable.call(this, options);\r\n\r\n  if (options && options.readable === false) this.readable = false;\r\n\r\n  if (options && options.writable === false) this.writable = false;\r\n\r\n  this.allowHalfOpen = true;\r\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\r\n\r\n  this.once('end', onend);\r\n}\r\n\r\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\r\n  // making it explicit this property is not enumerable\r\n  // because otherwise some prototype manipulation in\r\n  // userland will fail\r\n  enumerable: false,\r\n  get: function () {\r\n    return this._writableState.highWaterMark;\r\n  }\r\n});\r\n\r\n// the no-half-open enforcer\r\nfunction onend() {\r\n  // if we allow half-open state, or if the writable side ended,\r\n  // then we're ok.\r\n  if (this.allowHalfOpen || this._writableState.ended) return;\r\n\r\n  // no more data can be written.\r\n  // But allow more writes to happen in this tick.\r\n  pna.nextTick(onEndNT, this);\r\n}\r\n\r\nfunction onEndNT(self) {\r\n  self.end();\r\n}\r\n\r\nObject.defineProperty(Duplex.prototype, 'destroyed', {\r\n  get: function () {\r\n    if (this._readableState === undefined || this._writableState === undefined) {\r\n      return false;\r\n    }\r\n    return this._readableState.destroyed && this._writableState.destroyed;\r\n  },\r\n  set: function (value) {\r\n    // we ignore the value if the stream\r\n    // has not been initialized yet\r\n    if (this._readableState === undefined || this._writableState === undefined) {\r\n      return;\r\n    }\r\n\r\n    // backward compatibility, the user is explicitly\r\n    // managing destroyed\r\n    this._readableState.destroyed = value;\r\n    this._writableState.destroyed = value;\r\n  }\r\n});\r\n\r\nDuplex.prototype._destroy = function (err, cb) {\r\n  this.push(null);\r\n  this.end();\r\n\r\n  pna.nextTick(cb, err);\r\n};\r\n},{\"./_stream_readable\":100,\"./_stream_writable\":102,\"core-util-is\":42,\"inherits\":84,\"process-nextick-args\":90}],99:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// a passthrough stream.\r\n// basically just the most minimal sort of Transform stream.\r\n// Every written chunk gets output as-is.\r\n\r\n'use strict';\r\n\r\nmodule.exports = PassThrough;\r\n\r\nvar Transform = require('./_stream_transform');\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\nutil.inherits(PassThrough, Transform);\r\n\r\nfunction PassThrough(options) {\r\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\r\n\r\n  Transform.call(this, options);\r\n}\r\n\r\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\r\n  cb(null, chunk);\r\n};\r\n},{\"./_stream_transform\":101,\"core-util-is\":42,\"inherits\":84}],100:[function(require,module,exports){\r\n(function (process,global){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n'use strict';\r\n\r\n/*<replacement>*/\r\n\r\nvar pna = require('process-nextick-args');\r\n/*</replacement>*/\r\n\r\nmodule.exports = Readable;\r\n\r\n/*<replacement>*/\r\nvar isArray = require('isarray');\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\nvar Duplex;\r\n/*</replacement>*/\r\n\r\nReadable.ReadableState = ReadableState;\r\n\r\n/*<replacement>*/\r\nvar EE = require('events').EventEmitter;\r\n\r\nvar EElistenerCount = function (emitter, type) {\r\n  return emitter.listeners(type).length;\r\n};\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\nvar Stream = require('./internal/streams/stream');\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\n\r\nvar Buffer = require('safe-buffer').Buffer;\r\nvar OurUint8Array = global.Uint8Array || function () {};\r\nfunction _uint8ArrayToBuffer(chunk) {\r\n  return Buffer.from(chunk);\r\n}\r\nfunction _isUint8Array(obj) {\r\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\r\n}\r\n\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\nvar debugUtil = require('util');\r\nvar debug = void 0;\r\nif (debugUtil && debugUtil.debuglog) {\r\n  debug = debugUtil.debuglog('stream');\r\n} else {\r\n  debug = function () {};\r\n}\r\n/*</replacement>*/\r\n\r\nvar BufferList = require('./internal/streams/BufferList');\r\nvar destroyImpl = require('./internal/streams/destroy');\r\nvar StringDecoder;\r\n\r\nutil.inherits(Readable, Stream);\r\n\r\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\r\n\r\nfunction prependListener(emitter, event, fn) {\r\n  // Sadly this is not cacheable as some libraries bundle their own\r\n  // event emitter implementation with them.\r\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\r\n\r\n  // This is a hack to make sure that our error handler is attached before any\r\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\r\n  // to continue to work with older versions of Node.js that do not include\r\n  // the prependListener() method. The goal is to eventually remove this hack.\r\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\r\n}\r\n\r\nfunction ReadableState(options, stream) {\r\n  Duplex = Duplex || require('./_stream_duplex');\r\n\r\n  options = options || {};\r\n\r\n  // Duplex streams are both readable and writable, but share\r\n  // the same options object.\r\n  // However, some cases require setting options to different\r\n  // values for the readable and the writable sides of the duplex stream.\r\n  // These options can be provided separately as readableXXX and writableXXX.\r\n  var isDuplex = stream instanceof Duplex;\r\n\r\n  // object stream flag. Used to make read(n) ignore n and to\r\n  // make all the buffer merging and length checks go away\r\n  this.objectMode = !!options.objectMode;\r\n\r\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\r\n\r\n  // the point at which it stops calling _read() to fill the buffer\r\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\r\n  var hwm = options.highWaterMark;\r\n  var readableHwm = options.readableHighWaterMark;\r\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\r\n\r\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\r\n\r\n  // cast to ints.\r\n  this.highWaterMark = Math.floor(this.highWaterMark);\r\n\r\n  // A linked list is used to store data chunks instead of an array because the\r\n  // linked list can remove elements from the beginning faster than\r\n  // array.shift()\r\n  this.buffer = new BufferList();\r\n  this.length = 0;\r\n  this.pipes = null;\r\n  this.pipesCount = 0;\r\n  this.flowing = null;\r\n  this.ended = false;\r\n  this.endEmitted = false;\r\n  this.reading = false;\r\n\r\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\r\n  // immediately, or on a later tick.  We set this to true at first, because\r\n  // any actions that shouldn't happen until \"later\" should generally also\r\n  // not happen before the first read call.\r\n  this.sync = true;\r\n\r\n  // whenever we return null, then we set a flag to say\r\n  // that we're awaiting a 'readable' event emission.\r\n  this.needReadable = false;\r\n  this.emittedReadable = false;\r\n  this.readableListening = false;\r\n  this.resumeScheduled = false;\r\n\r\n  // has it been destroyed\r\n  this.destroyed = false;\r\n\r\n  // Crypto is kind of old and crusty.  Historically, its default string\r\n  // encoding is 'binary' so we have to make this configurable.\r\n  // Everything else in the universe uses 'utf8', though.\r\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\r\n\r\n  // the number of writers that are awaiting a drain event in .pipe()s\r\n  this.awaitDrain = 0;\r\n\r\n  // if true, a maybeReadMore has been scheduled\r\n  this.readingMore = false;\r\n\r\n  this.decoder = null;\r\n  this.encoding = null;\r\n  if (options.encoding) {\r\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\r\n    this.decoder = new StringDecoder(options.encoding);\r\n    this.encoding = options.encoding;\r\n  }\r\n}\r\n\r\nfunction Readable(options) {\r\n  Duplex = Duplex || require('./_stream_duplex');\r\n\r\n  if (!(this instanceof Readable)) return new Readable(options);\r\n\r\n  this._readableState = new ReadableState(options, this);\r\n\r\n  // legacy\r\n  this.readable = true;\r\n\r\n  if (options) {\r\n    if (typeof options.read === 'function') this._read = options.read;\r\n\r\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\r\n  }\r\n\r\n  Stream.call(this);\r\n}\r\n\r\nObject.defineProperty(Readable.prototype, 'destroyed', {\r\n  get: function () {\r\n    if (this._readableState === undefined) {\r\n      return false;\r\n    }\r\n    return this._readableState.destroyed;\r\n  },\r\n  set: function (value) {\r\n    // we ignore the value if the stream\r\n    // has not been initialized yet\r\n    if (!this._readableState) {\r\n      return;\r\n    }\r\n\r\n    // backward compatibility, the user is explicitly\r\n    // managing destroyed\r\n    this._readableState.destroyed = value;\r\n  }\r\n});\r\n\r\nReadable.prototype.destroy = destroyImpl.destroy;\r\nReadable.prototype._undestroy = destroyImpl.undestroy;\r\nReadable.prototype._destroy = function (err, cb) {\r\n  this.push(null);\r\n  cb(err);\r\n};\r\n\r\n// Manually shove something into the read() buffer.\r\n// This returns true if the highWaterMark has not been hit yet,\r\n// similar to how Writable.write() returns true if you should\r\n// write() some more.\r\nReadable.prototype.push = function (chunk, encoding) {\r\n  var state = this._readableState;\r\n  var skipChunkCheck;\r\n\r\n  if (!state.objectMode) {\r\n    if (typeof chunk === 'string') {\r\n      encoding = encoding || state.defaultEncoding;\r\n      if (encoding !== state.encoding) {\r\n        chunk = Buffer.from(chunk, encoding);\r\n        encoding = '';\r\n      }\r\n      skipChunkCheck = true;\r\n    }\r\n  } else {\r\n    skipChunkCheck = true;\r\n  }\r\n\r\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\r\n};\r\n\r\n// Unshift should *always* be something directly out of read()\r\nReadable.prototype.unshift = function (chunk) {\r\n  return readableAddChunk(this, chunk, null, true, false);\r\n};\r\n\r\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\r\n  var state = stream._readableState;\r\n  if (chunk === null) {\r\n    state.reading = false;\r\n    onEofChunk(stream, state);\r\n  } else {\r\n    var er;\r\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\r\n    if (er) {\r\n      stream.emit('error', er);\r\n    } else if (state.objectMode || chunk && chunk.length > 0) {\r\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\r\n        chunk = _uint8ArrayToBuffer(chunk);\r\n      }\r\n\r\n      if (addToFront) {\r\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\r\n      } else if (state.ended) {\r\n        stream.emit('error', new Error('stream.push() after EOF'));\r\n      } else {\r\n        state.reading = false;\r\n        if (state.decoder && !encoding) {\r\n          chunk = state.decoder.write(chunk);\r\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\r\n        } else {\r\n          addChunk(stream, state, chunk, false);\r\n        }\r\n      }\r\n    } else if (!addToFront) {\r\n      state.reading = false;\r\n    }\r\n  }\r\n\r\n  return needMoreData(state);\r\n}\r\n\r\nfunction addChunk(stream, state, chunk, addToFront) {\r\n  if (state.flowing && state.length === 0 && !state.sync) {\r\n    stream.emit('data', chunk);\r\n    stream.read(0);\r\n  } else {\r\n    // update the buffer info.\r\n    state.length += state.objectMode ? 1 : chunk.length;\r\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\r\n\r\n    if (state.needReadable) emitReadable(stream);\r\n  }\r\n  maybeReadMore(stream, state);\r\n}\r\n\r\nfunction chunkInvalid(state, chunk) {\r\n  var er;\r\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\r\n    er = new TypeError('Invalid non-string/buffer chunk');\r\n  }\r\n  return er;\r\n}\r\n\r\n// if it's past the high water mark, we can push in some more.\r\n// Also, if we have no data yet, we can stand some\r\n// more bytes.  This is to work around cases where hwm=0,\r\n// such as the repl.  Also, if the push() triggered a\r\n// readable event, and the user called read(largeNumber) such that\r\n// needReadable was set, then we ought to push more, so that another\r\n// 'readable' event will be triggered.\r\nfunction needMoreData(state) {\r\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\r\n}\r\n\r\nReadable.prototype.isPaused = function () {\r\n  return this._readableState.flowing === false;\r\n};\r\n\r\n// backwards compatibility.\r\nReadable.prototype.setEncoding = function (enc) {\r\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\r\n  this._readableState.decoder = new StringDecoder(enc);\r\n  this._readableState.encoding = enc;\r\n  return this;\r\n};\r\n\r\n// Don't raise the hwm > 8MB\r\nvar MAX_HWM = 0x800000;\r\nfunction computeNewHighWaterMark(n) {\r\n  if (n >= MAX_HWM) {\r\n    n = MAX_HWM;\r\n  } else {\r\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\r\n    // tiny amounts\r\n    n--;\r\n    n |= n >>> 1;\r\n    n |= n >>> 2;\r\n    n |= n >>> 4;\r\n    n |= n >>> 8;\r\n    n |= n >>> 16;\r\n    n++;\r\n  }\r\n  return n;\r\n}\r\n\r\n// This function is designed to be inlinable, so please take care when making\r\n// changes to the function body.\r\nfunction howMuchToRead(n, state) {\r\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\r\n  if (state.objectMode) return 1;\r\n  if (n !== n) {\r\n    // Only flow one buffer at a time\r\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\r\n  }\r\n  // If we're asking for more than the current hwm, then raise the hwm.\r\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\r\n  if (n <= state.length) return n;\r\n  // Don't have enough\r\n  if (!state.ended) {\r\n    state.needReadable = true;\r\n    return 0;\r\n  }\r\n  return state.length;\r\n}\r\n\r\n// you can override either this method, or the async _read(n) below.\r\nReadable.prototype.read = function (n) {\r\n  debug('read', n);\r\n  n = parseInt(n, 10);\r\n  var state = this._readableState;\r\n  var nOrig = n;\r\n\r\n  if (n !== 0) state.emittedReadable = false;\r\n\r\n  // if we're doing read(0) to trigger a readable event, but we\r\n  // already have a bunch of data in the buffer, then just trigger\r\n  // the 'readable' event and move on.\r\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\r\n    debug('read: emitReadable', state.length, state.ended);\r\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\r\n    return null;\r\n  }\r\n\r\n  n = howMuchToRead(n, state);\r\n\r\n  // if we've ended, and we're now clear, then finish it up.\r\n  if (n === 0 && state.ended) {\r\n    if (state.length === 0) endReadable(this);\r\n    return null;\r\n  }\r\n\r\n  // All the actual chunk generation logic needs to be\r\n  // *below* the call to _read.  The reason is that in certain\r\n  // synthetic stream cases, such as passthrough streams, _read\r\n  // may be a completely synchronous operation which may change\r\n  // the state of the read buffer, providing enough data when\r\n  // before there was *not* enough.\r\n  //\r\n  // So, the steps are:\r\n  // 1. Figure out what the state of things will be after we do\r\n  // a read from the buffer.\r\n  //\r\n  // 2. If that resulting state will trigger a _read, then call _read.\r\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\r\n  // deeply ugly to write APIs this way, but that still doesn't mean\r\n  // that the Readable class should behave improperly, as streams are\r\n  // designed to be sync/async agnostic.\r\n  // Take note if the _read call is sync or async (ie, if the read call\r\n  // has returned yet), so that we know whether or not it's safe to emit\r\n  // 'readable' etc.\r\n  //\r\n  // 3. Actually pull the requested chunks out of the buffer and return.\r\n\r\n  // if we need a readable event, then we need to do some reading.\r\n  var doRead = state.needReadable;\r\n  debug('need readable', doRead);\r\n\r\n  // if we currently have less than the highWaterMark, then also read some\r\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\r\n    doRead = true;\r\n    debug('length less than watermark', doRead);\r\n  }\r\n\r\n  // however, if we've ended, then there's no point, and if we're already\r\n  // reading, then it's unnecessary.\r\n  if (state.ended || state.reading) {\r\n    doRead = false;\r\n    debug('reading or ended', doRead);\r\n  } else if (doRead) {\r\n    debug('do read');\r\n    state.reading = true;\r\n    state.sync = true;\r\n    // if the length is currently zero, then we *need* a readable event.\r\n    if (state.length === 0) state.needReadable = true;\r\n    // call internal read method\r\n    this._read(state.highWaterMark);\r\n    state.sync = false;\r\n    // If _read pushed data synchronously, then `reading` will be false,\r\n    // and we need to re-evaluate how much data we can return to the user.\r\n    if (!state.reading) n = howMuchToRead(nOrig, state);\r\n  }\r\n\r\n  var ret;\r\n  if (n > 0) ret = fromList(n, state);else ret = null;\r\n\r\n  if (ret === null) {\r\n    state.needReadable = true;\r\n    n = 0;\r\n  } else {\r\n    state.length -= n;\r\n  }\r\n\r\n  if (state.length === 0) {\r\n    // If we have nothing in the buffer, then we want to know\r\n    // as soon as we *do* get something into the buffer.\r\n    if (!state.ended) state.needReadable = true;\r\n\r\n    // If we tried to read() past the EOF, then emit end on the next tick.\r\n    if (nOrig !== n && state.ended) endReadable(this);\r\n  }\r\n\r\n  if (ret !== null) this.emit('data', ret);\r\n\r\n  return ret;\r\n};\r\n\r\nfunction onEofChunk(stream, state) {\r\n  if (state.ended) return;\r\n  if (state.decoder) {\r\n    var chunk = state.decoder.end();\r\n    if (chunk && chunk.length) {\r\n      state.buffer.push(chunk);\r\n      state.length += state.objectMode ? 1 : chunk.length;\r\n    }\r\n  }\r\n  state.ended = true;\r\n\r\n  // emit 'readable' now to make sure it gets picked up.\r\n  emitReadable(stream);\r\n}\r\n\r\n// Don't emit readable right away in sync mode, because this can trigger\r\n// another read() call => stack overflow.  This way, it might trigger\r\n// a nextTick recursion warning, but that's not so bad.\r\nfunction emitReadable(stream) {\r\n  var state = stream._readableState;\r\n  state.needReadable = false;\r\n  if (!state.emittedReadable) {\r\n    debug('emitReadable', state.flowing);\r\n    state.emittedReadable = true;\r\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\r\n  }\r\n}\r\n\r\nfunction emitReadable_(stream) {\r\n  debug('emit readable');\r\n  stream.emit('readable');\r\n  flow(stream);\r\n}\r\n\r\n// at this point, the user has presumably seen the 'readable' event,\r\n// and called read() to consume some data.  that may have triggered\r\n// in turn another _read(n) call, in which case reading = true if\r\n// it's in progress.\r\n// However, if we're not ended, or reading, and the length < hwm,\r\n// then go ahead and try to read some more preemptively.\r\nfunction maybeReadMore(stream, state) {\r\n  if (!state.readingMore) {\r\n    state.readingMore = true;\r\n    pna.nextTick(maybeReadMore_, stream, state);\r\n  }\r\n}\r\n\r\nfunction maybeReadMore_(stream, state) {\r\n  var len = state.length;\r\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\r\n    debug('maybeReadMore read 0');\r\n    stream.read(0);\r\n    if (len === state.length)\r\n      // didn't get any data, stop spinning.\r\n      break;else len = state.length;\r\n  }\r\n  state.readingMore = false;\r\n}\r\n\r\n// abstract method.  to be overridden in specific implementation classes.\r\n// call cb(er, data) where data is <= n in length.\r\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\r\n// arbitrary, and perhaps not very meaningful.\r\nReadable.prototype._read = function (n) {\r\n  this.emit('error', new Error('_read() is not implemented'));\r\n};\r\n\r\nReadable.prototype.pipe = function (dest, pipeOpts) {\r\n  var src = this;\r\n  var state = this._readableState;\r\n\r\n  switch (state.pipesCount) {\r\n    case 0:\r\n      state.pipes = dest;\r\n      break;\r\n    case 1:\r\n      state.pipes = [state.pipes, dest];\r\n      break;\r\n    default:\r\n      state.pipes.push(dest);\r\n      break;\r\n  }\r\n  state.pipesCount += 1;\r\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\r\n\r\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\r\n\r\n  var endFn = doEnd ? onend : unpipe;\r\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\r\n\r\n  dest.on('unpipe', onunpipe);\r\n  function onunpipe(readable, unpipeInfo) {\r\n    debug('onunpipe');\r\n    if (readable === src) {\r\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\r\n        unpipeInfo.hasUnpiped = true;\r\n        cleanup();\r\n      }\r\n    }\r\n  }\r\n\r\n  function onend() {\r\n    debug('onend');\r\n    dest.end();\r\n  }\r\n\r\n  // when the dest drains, it reduces the awaitDrain counter\r\n  // on the source.  This would be more elegant with a .once()\r\n  // handler in flow(), but adding and removing repeatedly is\r\n  // too slow.\r\n  var ondrain = pipeOnDrain(src);\r\n  dest.on('drain', ondrain);\r\n\r\n  var cleanedUp = false;\r\n  function cleanup() {\r\n    debug('cleanup');\r\n    // cleanup event handlers once the pipe is broken\r\n    dest.removeListener('close', onclose);\r\n    dest.removeListener('finish', onfinish);\r\n    dest.removeListener('drain', ondrain);\r\n    dest.removeListener('error', onerror);\r\n    dest.removeListener('unpipe', onunpipe);\r\n    src.removeListener('end', onend);\r\n    src.removeListener('end', unpipe);\r\n    src.removeListener('data', ondata);\r\n\r\n    cleanedUp = true;\r\n\r\n    // if the reader is waiting for a drain event from this\r\n    // specific writer, then it would cause it to never start\r\n    // flowing again.\r\n    // So, if this is awaiting a drain, then we just call it now.\r\n    // If we don't know, then assume that we are waiting for one.\r\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\r\n  }\r\n\r\n  // If the user pushes more data while we're writing to dest then we'll end up\r\n  // in ondata again. However, we only want to increase awaitDrain once because\r\n  // dest will only emit one 'drain' event for the multiple writes.\r\n  // => Introduce a guard on increasing awaitDrain.\r\n  var increasedAwaitDrain = false;\r\n  src.on('data', ondata);\r\n  function ondata(chunk) {\r\n    debug('ondata');\r\n    increasedAwaitDrain = false;\r\n    var ret = dest.write(chunk);\r\n    if (false === ret && !increasedAwaitDrain) {\r\n      // If the user unpiped during `dest.write()`, it is possible\r\n      // to get stuck in a permanently paused state if that write\r\n      // also returned false.\r\n      // => Check whether `dest` is still a piping destination.\r\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\r\n        debug('false write response, pause', src._readableState.awaitDrain);\r\n        src._readableState.awaitDrain++;\r\n        increasedAwaitDrain = true;\r\n      }\r\n      src.pause();\r\n    }\r\n  }\r\n\r\n  // if the dest has an error, then stop piping into it.\r\n  // however, don't suppress the throwing behavior for this.\r\n  function onerror(er) {\r\n    debug('onerror', er);\r\n    unpipe();\r\n    dest.removeListener('error', onerror);\r\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\r\n  }\r\n\r\n  // Make sure our error handler is attached before userland ones.\r\n  prependListener(dest, 'error', onerror);\r\n\r\n  // Both close and finish should trigger unpipe, but only once.\r\n  function onclose() {\r\n    dest.removeListener('finish', onfinish);\r\n    unpipe();\r\n  }\r\n  dest.once('close', onclose);\r\n  function onfinish() {\r\n    debug('onfinish');\r\n    dest.removeListener('close', onclose);\r\n    unpipe();\r\n  }\r\n  dest.once('finish', onfinish);\r\n\r\n  function unpipe() {\r\n    debug('unpipe');\r\n    src.unpipe(dest);\r\n  }\r\n\r\n  // tell the dest that it's being piped to\r\n  dest.emit('pipe', src);\r\n\r\n  // start the flow if it hasn't been started already.\r\n  if (!state.flowing) {\r\n    debug('pipe resume');\r\n    src.resume();\r\n  }\r\n\r\n  return dest;\r\n};\r\n\r\nfunction pipeOnDrain(src) {\r\n  return function () {\r\n    var state = src._readableState;\r\n    debug('pipeOnDrain', state.awaitDrain);\r\n    if (state.awaitDrain) state.awaitDrain--;\r\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\r\n      state.flowing = true;\r\n      flow(src);\r\n    }\r\n  };\r\n}\r\n\r\nReadable.prototype.unpipe = function (dest) {\r\n  var state = this._readableState;\r\n  var unpipeInfo = { hasUnpiped: false };\r\n\r\n  // if we're not piping anywhere, then do nothing.\r\n  if (state.pipesCount === 0) return this;\r\n\r\n  // just one destination.  most common case.\r\n  if (state.pipesCount === 1) {\r\n    // passed in one, but it's not the right one.\r\n    if (dest && dest !== state.pipes) return this;\r\n\r\n    if (!dest) dest = state.pipes;\r\n\r\n    // got a match.\r\n    state.pipes = null;\r\n    state.pipesCount = 0;\r\n    state.flowing = false;\r\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\r\n    return this;\r\n  }\r\n\r\n  // slow case. multiple pipe destinations.\r\n\r\n  if (!dest) {\r\n    // remove all.\r\n    var dests = state.pipes;\r\n    var len = state.pipesCount;\r\n    state.pipes = null;\r\n    state.pipesCount = 0;\r\n    state.flowing = false;\r\n\r\n    for (var i = 0; i < len; i++) {\r\n      dests[i].emit('unpipe', this, unpipeInfo);\r\n    }return this;\r\n  }\r\n\r\n  // try to find the right one.\r\n  var index = indexOf(state.pipes, dest);\r\n  if (index === -1) return this;\r\n\r\n  state.pipes.splice(index, 1);\r\n  state.pipesCount -= 1;\r\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\r\n\r\n  dest.emit('unpipe', this, unpipeInfo);\r\n\r\n  return this;\r\n};\r\n\r\n// set up data events if they are asked for\r\n// Ensure readable listeners eventually get something\r\nReadable.prototype.on = function (ev, fn) {\r\n  var res = Stream.prototype.on.call(this, ev, fn);\r\n\r\n  if (ev === 'data') {\r\n    // Start flowing on next tick if stream isn't explicitly paused\r\n    if (this._readableState.flowing !== false) this.resume();\r\n  } else if (ev === 'readable') {\r\n    var state = this._readableState;\r\n    if (!state.endEmitted && !state.readableListening) {\r\n      state.readableListening = state.needReadable = true;\r\n      state.emittedReadable = false;\r\n      if (!state.reading) {\r\n        pna.nextTick(nReadingNextTick, this);\r\n      } else if (state.length) {\r\n        emitReadable(this);\r\n      }\r\n    }\r\n  }\r\n\r\n  return res;\r\n};\r\nReadable.prototype.addListener = Readable.prototype.on;\r\n\r\nfunction nReadingNextTick(self) {\r\n  debug('readable nexttick read 0');\r\n  self.read(0);\r\n}\r\n\r\n// pause() and resume() are remnants of the legacy readable stream API\r\n// If the user uses them, then switch into old mode.\r\nReadable.prototype.resume = function () {\r\n  var state = this._readableState;\r\n  if (!state.flowing) {\r\n    debug('resume');\r\n    state.flowing = true;\r\n    resume(this, state);\r\n  }\r\n  return this;\r\n};\r\n\r\nfunction resume(stream, state) {\r\n  if (!state.resumeScheduled) {\r\n    state.resumeScheduled = true;\r\n    pna.nextTick(resume_, stream, state);\r\n  }\r\n}\r\n\r\nfunction resume_(stream, state) {\r\n  if (!state.reading) {\r\n    debug('resume read 0');\r\n    stream.read(0);\r\n  }\r\n\r\n  state.resumeScheduled = false;\r\n  state.awaitDrain = 0;\r\n  stream.emit('resume');\r\n  flow(stream);\r\n  if (state.flowing && !state.reading) stream.read(0);\r\n}\r\n\r\nReadable.prototype.pause = function () {\r\n  debug('call pause flowing=%j', this._readableState.flowing);\r\n  if (false !== this._readableState.flowing) {\r\n    debug('pause');\r\n    this._readableState.flowing = false;\r\n    this.emit('pause');\r\n  }\r\n  return this;\r\n};\r\n\r\nfunction flow(stream) {\r\n  var state = stream._readableState;\r\n  debug('flow', state.flowing);\r\n  while (state.flowing && stream.read() !== null) {}\r\n}\r\n\r\n// wrap an old-style stream as the async data source.\r\n// This is *not* part of the readable stream interface.\r\n// It is an ugly unfortunate mess of history.\r\nReadable.prototype.wrap = function (stream) {\r\n  var _this = this;\r\n\r\n  var state = this._readableState;\r\n  var paused = false;\r\n\r\n  stream.on('end', function () {\r\n    debug('wrapped end');\r\n    if (state.decoder && !state.ended) {\r\n      var chunk = state.decoder.end();\r\n      if (chunk && chunk.length) _this.push(chunk);\r\n    }\r\n\r\n    _this.push(null);\r\n  });\r\n\r\n  stream.on('data', function (chunk) {\r\n    debug('wrapped data');\r\n    if (state.decoder) chunk = state.decoder.write(chunk);\r\n\r\n    // don't skip over falsy values in objectMode\r\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\r\n\r\n    var ret = _this.push(chunk);\r\n    if (!ret) {\r\n      paused = true;\r\n      stream.pause();\r\n    }\r\n  });\r\n\r\n  // proxy all the other methods.\r\n  // important when wrapping filters and duplexes.\r\n  for (var i in stream) {\r\n    if (this[i] === undefined && typeof stream[i] === 'function') {\r\n      this[i] = function (method) {\r\n        return function () {\r\n          return stream[method].apply(stream, arguments);\r\n        };\r\n      }(i);\r\n    }\r\n  }\r\n\r\n  // proxy certain important events.\r\n  for (var n = 0; n < kProxyEvents.length; n++) {\r\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\r\n  }\r\n\r\n  // when we try to consume some more bytes, simply unpause the\r\n  // underlying stream.\r\n  this._read = function (n) {\r\n    debug('wrapped _read', n);\r\n    if (paused) {\r\n      paused = false;\r\n      stream.resume();\r\n    }\r\n  };\r\n\r\n  return this;\r\n};\r\n\r\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\r\n  // making it explicit this property is not enumerable\r\n  // because otherwise some prototype manipulation in\r\n  // userland will fail\r\n  enumerable: false,\r\n  get: function () {\r\n    return this._readableState.highWaterMark;\r\n  }\r\n});\r\n\r\n// exposed for testing purposes only.\r\nReadable._fromList = fromList;\r\n\r\n// Pluck off n bytes from an array of buffers.\r\n// Length is the combined lengths of all the buffers in the list.\r\n// This function is designed to be inlinable, so please take care when making\r\n// changes to the function body.\r\nfunction fromList(n, state) {\r\n  // nothing buffered\r\n  if (state.length === 0) return null;\r\n\r\n  var ret;\r\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\r\n    // read it all, truncate the list\r\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\r\n    state.buffer.clear();\r\n  } else {\r\n    // read part of list\r\n    ret = fromListPartial(n, state.buffer, state.decoder);\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\n// Extracts only enough buffered data to satisfy the amount requested.\r\n// This function is designed to be inlinable, so please take care when making\r\n// changes to the function body.\r\nfunction fromListPartial(n, list, hasStrings) {\r\n  var ret;\r\n  if (n < list.head.data.length) {\r\n    // slice is the same for buffers and strings\r\n    ret = list.head.data.slice(0, n);\r\n    list.head.data = list.head.data.slice(n);\r\n  } else if (n === list.head.data.length) {\r\n    // first chunk is a perfect match\r\n    ret = list.shift();\r\n  } else {\r\n    // result spans more than one buffer\r\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\r\n  }\r\n  return ret;\r\n}\r\n\r\n// Copies a specified amount of characters from the list of buffered data\r\n// chunks.\r\n// This function is designed to be inlinable, so please take care when making\r\n// changes to the function body.\r\nfunction copyFromBufferString(n, list) {\r\n  var p = list.head;\r\n  var c = 1;\r\n  var ret = p.data;\r\n  n -= ret.length;\r\n  while (p = p.next) {\r\n    var str = p.data;\r\n    var nb = n > str.length ? str.length : n;\r\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\r\n    n -= nb;\r\n    if (n === 0) {\r\n      if (nb === str.length) {\r\n        ++c;\r\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\r\n      } else {\r\n        list.head = p;\r\n        p.data = str.slice(nb);\r\n      }\r\n      break;\r\n    }\r\n    ++c;\r\n  }\r\n  list.length -= c;\r\n  return ret;\r\n}\r\n\r\n// Copies a specified amount of bytes from the list of buffered data chunks.\r\n// This function is designed to be inlinable, so please take care when making\r\n// changes to the function body.\r\nfunction copyFromBuffer(n, list) {\r\n  var ret = Buffer.allocUnsafe(n);\r\n  var p = list.head;\r\n  var c = 1;\r\n  p.data.copy(ret);\r\n  n -= p.data.length;\r\n  while (p = p.next) {\r\n    var buf = p.data;\r\n    var nb = n > buf.length ? buf.length : n;\r\n    buf.copy(ret, ret.length - n, 0, nb);\r\n    n -= nb;\r\n    if (n === 0) {\r\n      if (nb === buf.length) {\r\n        ++c;\r\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\r\n      } else {\r\n        list.head = p;\r\n        p.data = buf.slice(nb);\r\n      }\r\n      break;\r\n    }\r\n    ++c;\r\n  }\r\n  list.length -= c;\r\n  return ret;\r\n}\r\n\r\nfunction endReadable(stream) {\r\n  var state = stream._readableState;\r\n\r\n  // If we get here before consuming all the bytes, then that is a\r\n  // bug in node.  Should never happen.\r\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\r\n\r\n  if (!state.endEmitted) {\r\n    state.ended = true;\r\n    pna.nextTick(endReadableNT, state, stream);\r\n  }\r\n}\r\n\r\nfunction endReadableNT(state, stream) {\r\n  // Check that we didn't get one last unshift.\r\n  if (!state.endEmitted && state.length === 0) {\r\n    state.endEmitted = true;\r\n    stream.readable = false;\r\n    stream.emit('end');\r\n  }\r\n}\r\n\r\nfunction indexOf(xs, x) {\r\n  for (var i = 0, l = xs.length; i < l; i++) {\r\n    if (xs[i] === x) return i;\r\n  }\r\n  return -1;\r\n}\r\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"./_stream_duplex\":98,\"./internal/streams/BufferList\":103,\"./internal/streams/destroy\":104,\"./internal/streams/stream\":105,\"_process\":91,\"core-util-is\":42,\"events\":47,\"inherits\":84,\"isarray\":86,\"process-nextick-args\":90,\"safe-buffer\":110,\"string_decoder/\":113,\"util\":40}],101:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// a transform stream is a readable/writable stream where you do\r\n// something with the data.  Sometimes it's called a \"filter\",\r\n// but that's not a great name for it, since that implies a thing where\r\n// some bits pass through, and others are simply ignored.  (That would\r\n// be a valid example of a transform, of course.)\r\n//\r\n// While the output is causally related to the input, it's not a\r\n// necessarily symmetric or synchronous transformation.  For example,\r\n// a zlib stream might take multiple plain-text writes(), and then\r\n// emit a single compressed chunk some time in the future.\r\n//\r\n// Here's how this works:\r\n//\r\n// The Transform stream has all the aspects of the readable and writable\r\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\r\n// internally, and returns false if there's a lot of pending writes\r\n// buffered up.  When you call read(), that calls _read(n) until\r\n// there's enough pending readable data buffered up.\r\n//\r\n// In a transform stream, the written data is placed in a buffer.  When\r\n// _read(n) is called, it transforms the queued up data, calling the\r\n// buffered _write cb's as it consumes chunks.  If consuming a single\r\n// written chunk would result in multiple output chunks, then the first\r\n// outputted bit calls the readcb, and subsequent chunks just go into\r\n// the read buffer, and will cause it to emit 'readable' if necessary.\r\n//\r\n// This way, back-pressure is actually determined by the reading side,\r\n// since _read has to be called to start processing a new chunk.  However,\r\n// a pathological inflate type of transform can cause excessive buffering\r\n// here.  For example, imagine a stream where every byte of input is\r\n// interpreted as an integer from 0-255, and then results in that many\r\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\r\n// 1kb of data being output.  In this case, you could write a very small\r\n// amount of input, and end up with a very large amount of output.  In\r\n// such a pathological inflating mechanism, there'd be no way to tell\r\n// the system to stop doing the transform.  A single 4MB write could\r\n// cause the system to run out of memory.\r\n//\r\n// However, even in such a pathological case, only a single written chunk\r\n// would be consumed, and then the rest would wait (un-transformed) until\r\n// the results of the previous transformed chunk were consumed.\r\n\r\n'use strict';\r\n\r\nmodule.exports = Transform;\r\n\r\nvar Duplex = require('./_stream_duplex');\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\nutil.inherits(Transform, Duplex);\r\n\r\nfunction afterTransform(er, data) {\r\n  var ts = this._transformState;\r\n  ts.transforming = false;\r\n\r\n  var cb = ts.writecb;\r\n\r\n  if (!cb) {\r\n    return this.emit('error', new Error('write callback called multiple times'));\r\n  }\r\n\r\n  ts.writechunk = null;\r\n  ts.writecb = null;\r\n\r\n  if (data != null) // single equals check for both `null` and `undefined`\r\n    this.push(data);\r\n\r\n  cb(er);\r\n\r\n  var rs = this._readableState;\r\n  rs.reading = false;\r\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\r\n    this._read(rs.highWaterMark);\r\n  }\r\n}\r\n\r\nfunction Transform(options) {\r\n  if (!(this instanceof Transform)) return new Transform(options);\r\n\r\n  Duplex.call(this, options);\r\n\r\n  this._transformState = {\r\n    afterTransform: afterTransform.bind(this),\r\n    needTransform: false,\r\n    transforming: false,\r\n    writecb: null,\r\n    writechunk: null,\r\n    writeencoding: null\r\n  };\r\n\r\n  // start out asking for a readable event once data is transformed.\r\n  this._readableState.needReadable = true;\r\n\r\n  // we have implemented the _read method, and done the other things\r\n  // that Readable wants before the first _read call, so unset the\r\n  // sync guard flag.\r\n  this._readableState.sync = false;\r\n\r\n  if (options) {\r\n    if (typeof options.transform === 'function') this._transform = options.transform;\r\n\r\n    if (typeof options.flush === 'function') this._flush = options.flush;\r\n  }\r\n\r\n  // When the writable side finishes, then flush out anything remaining.\r\n  this.on('prefinish', prefinish);\r\n}\r\n\r\nfunction prefinish() {\r\n  var _this = this;\r\n\r\n  if (typeof this._flush === 'function') {\r\n    this._flush(function (er, data) {\r\n      done(_this, er, data);\r\n    });\r\n  } else {\r\n    done(this, null, null);\r\n  }\r\n}\r\n\r\nTransform.prototype.push = function (chunk, encoding) {\r\n  this._transformState.needTransform = false;\r\n  return Duplex.prototype.push.call(this, chunk, encoding);\r\n};\r\n\r\n// This is the part where you do stuff!\r\n// override this function in implementation classes.\r\n// 'chunk' is an input chunk.\r\n//\r\n// Call `push(newChunk)` to pass along transformed output\r\n// to the readable side.  You may call 'push' zero or more times.\r\n//\r\n// Call `cb(err)` when you are done with this chunk.  If you pass\r\n// an error, then that'll put the hurt on the whole operation.  If you\r\n// never call cb(), then you'll never get another chunk.\r\nTransform.prototype._transform = function (chunk, encoding, cb) {\r\n  throw new Error('_transform() is not implemented');\r\n};\r\n\r\nTransform.prototype._write = function (chunk, encoding, cb) {\r\n  var ts = this._transformState;\r\n  ts.writecb = cb;\r\n  ts.writechunk = chunk;\r\n  ts.writeencoding = encoding;\r\n  if (!ts.transforming) {\r\n    var rs = this._readableState;\r\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\r\n  }\r\n};\r\n\r\n// Doesn't matter what the args are here.\r\n// _transform does all the work.\r\n// That we got here means that the readable side wants more data.\r\nTransform.prototype._read = function (n) {\r\n  var ts = this._transformState;\r\n\r\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\r\n    ts.transforming = true;\r\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\r\n  } else {\r\n    // mark that we need a transform, so that any data that comes in\r\n    // will get processed, now that we've asked for it.\r\n    ts.needTransform = true;\r\n  }\r\n};\r\n\r\nTransform.prototype._destroy = function (err, cb) {\r\n  var _this2 = this;\r\n\r\n  Duplex.prototype._destroy.call(this, err, function (err2) {\r\n    cb(err2);\r\n    _this2.emit('close');\r\n  });\r\n};\r\n\r\nfunction done(stream, er, data) {\r\n  if (er) return stream.emit('error', er);\r\n\r\n  if (data != null) // single equals check for both `null` and `undefined`\r\n    stream.push(data);\r\n\r\n  // if there's nothing in the write buffer, then that means\r\n  // that nothing more will ever be provided\r\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\r\n\r\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\r\n\r\n  return stream.push(null);\r\n}\r\n},{\"./_stream_duplex\":98,\"core-util-is\":42,\"inherits\":84}],102:[function(require,module,exports){\r\n(function (process,global,setImmediate){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n// A bit simpler than readable streams.\r\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\r\n// the drain event emission and buffering.\r\n\r\n'use strict';\r\n\r\n/*<replacement>*/\r\n\r\nvar pna = require('process-nextick-args');\r\n/*</replacement>*/\r\n\r\nmodule.exports = Writable;\r\n\r\n/* <replacement> */\r\nfunction WriteReq(chunk, encoding, cb) {\r\n  this.chunk = chunk;\r\n  this.encoding = encoding;\r\n  this.callback = cb;\r\n  this.next = null;\r\n}\r\n\r\n// It seems a linked list but it is not\r\n// there will be only 2 of these for each stream\r\nfunction CorkedRequest(state) {\r\n  var _this = this;\r\n\r\n  this.next = null;\r\n  this.entry = null;\r\n  this.finish = function () {\r\n    onCorkedFinish(_this, state);\r\n  };\r\n}\r\n/* </replacement> */\r\n\r\n/*<replacement>*/\r\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\nvar Duplex;\r\n/*</replacement>*/\r\n\r\nWritable.WritableState = WritableState;\r\n\r\n/*<replacement>*/\r\nvar util = require('core-util-is');\r\nutil.inherits = require('inherits');\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\nvar internalUtil = {\r\n  deprecate: require('util-deprecate')\r\n};\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\nvar Stream = require('./internal/streams/stream');\r\n/*</replacement>*/\r\n\r\n/*<replacement>*/\r\n\r\nvar Buffer = require('safe-buffer').Buffer;\r\nvar OurUint8Array = global.Uint8Array || function () {};\r\nfunction _uint8ArrayToBuffer(chunk) {\r\n  return Buffer.from(chunk);\r\n}\r\nfunction _isUint8Array(obj) {\r\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\r\n}\r\n\r\n/*</replacement>*/\r\n\r\nvar destroyImpl = require('./internal/streams/destroy');\r\n\r\nutil.inherits(Writable, Stream);\r\n\r\nfunction nop() {}\r\n\r\nfunction WritableState(options, stream) {\r\n  Duplex = Duplex || require('./_stream_duplex');\r\n\r\n  options = options || {};\r\n\r\n  // Duplex streams are both readable and writable, but share\r\n  // the same options object.\r\n  // However, some cases require setting options to different\r\n  // values for the readable and the writable sides of the duplex stream.\r\n  // These options can be provided separately as readableXXX and writableXXX.\r\n  var isDuplex = stream instanceof Duplex;\r\n\r\n  // object stream flag to indicate whether or not this stream\r\n  // contains buffers or objects.\r\n  this.objectMode = !!options.objectMode;\r\n\r\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\r\n\r\n  // the point at which write() starts returning false\r\n  // Note: 0 is a valid value, means that we always return false if\r\n  // the entire buffer is not flushed immediately on write()\r\n  var hwm = options.highWaterMark;\r\n  var writableHwm = options.writableHighWaterMark;\r\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\r\n\r\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\r\n\r\n  // cast to ints.\r\n  this.highWaterMark = Math.floor(this.highWaterMark);\r\n\r\n  // if _final has been called\r\n  this.finalCalled = false;\r\n\r\n  // drain event flag.\r\n  this.needDrain = false;\r\n  // at the start of calling end()\r\n  this.ending = false;\r\n  // when end() has been called, and returned\r\n  this.ended = false;\r\n  // when 'finish' is emitted\r\n  this.finished = false;\r\n\r\n  // has it been destroyed\r\n  this.destroyed = false;\r\n\r\n  // should we decode strings into buffers before passing to _write?\r\n  // this is here so that some node-core streams can optimize string\r\n  // handling at a lower level.\r\n  var noDecode = options.decodeStrings === false;\r\n  this.decodeStrings = !noDecode;\r\n\r\n  // Crypto is kind of old and crusty.  Historically, its default string\r\n  // encoding is 'binary' so we have to make this configurable.\r\n  // Everything else in the universe uses 'utf8', though.\r\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\r\n\r\n  // not an actual buffer we keep track of, but a measurement\r\n  // of how much we're waiting to get pushed to some underlying\r\n  // socket or file.\r\n  this.length = 0;\r\n\r\n  // a flag to see when we're in the middle of a write.\r\n  this.writing = false;\r\n\r\n  // when true all writes will be buffered until .uncork() call\r\n  this.corked = 0;\r\n\r\n  // a flag to be able to tell if the onwrite cb is called immediately,\r\n  // or on a later tick.  We set this to true at first, because any\r\n  // actions that shouldn't happen until \"later\" should generally also\r\n  // not happen before the first write call.\r\n  this.sync = true;\r\n\r\n  // a flag to know if we're processing previously buffered items, which\r\n  // may call the _write() callback in the same tick, so that we don't\r\n  // end up in an overlapped onwrite situation.\r\n  this.bufferProcessing = false;\r\n\r\n  // the callback that's passed to _write(chunk,cb)\r\n  this.onwrite = function (er) {\r\n    onwrite(stream, er);\r\n  };\r\n\r\n  // the callback that the user supplies to write(chunk,encoding,cb)\r\n  this.writecb = null;\r\n\r\n  // the amount that is being written when _write is called.\r\n  this.writelen = 0;\r\n\r\n  this.bufferedRequest = null;\r\n  this.lastBufferedRequest = null;\r\n\r\n  // number of pending user-supplied write callbacks\r\n  // this must be 0 before 'finish' can be emitted\r\n  this.pendingcb = 0;\r\n\r\n  // emit prefinish if the only thing we're waiting for is _write cbs\r\n  // This is relevant for synchronous Transform streams\r\n  this.prefinished = false;\r\n\r\n  // True if the error was already emitted and should not be thrown again\r\n  this.errorEmitted = false;\r\n\r\n  // count buffered requests\r\n  this.bufferedRequestCount = 0;\r\n\r\n  // allocate the first CorkedRequest, there is always\r\n  // one allocated and free to use, and we maintain at most two\r\n  this.corkedRequestsFree = new CorkedRequest(this);\r\n}\r\n\r\nWritableState.prototype.getBuffer = function getBuffer() {\r\n  var current = this.bufferedRequest;\r\n  var out = [];\r\n  while (current) {\r\n    out.push(current);\r\n    current = current.next;\r\n  }\r\n  return out;\r\n};\r\n\r\n(function () {\r\n  try {\r\n    Object.defineProperty(WritableState.prototype, 'buffer', {\r\n      get: internalUtil.deprecate(function () {\r\n        return this.getBuffer();\r\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\r\n    });\r\n  } catch (_) {}\r\n})();\r\n\r\n// Test _writableState for inheritance to account for Duplex streams,\r\n// whose prototype chain only points to Readable.\r\nvar realHasInstance;\r\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\r\n  realHasInstance = Function.prototype[Symbol.hasInstance];\r\n  Object.defineProperty(Writable, Symbol.hasInstance, {\r\n    value: function (object) {\r\n      if (realHasInstance.call(this, object)) return true;\r\n      if (this !== Writable) return false;\r\n\r\n      return object && object._writableState instanceof WritableState;\r\n    }\r\n  });\r\n} else {\r\n  realHasInstance = function (object) {\r\n    return object instanceof this;\r\n  };\r\n}\r\n\r\nfunction Writable(options) {\r\n  Duplex = Duplex || require('./_stream_duplex');\r\n\r\n  // Writable ctor is applied to Duplexes, too.\r\n  // `realHasInstance` is necessary because using plain `instanceof`\r\n  // would return false, as no `_writableState` property is attached.\r\n\r\n  // Trying to use the custom `instanceof` for Writable here will also break the\r\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\r\n  // `_writableState` that would lead to infinite recursion.\r\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\r\n    return new Writable(options);\r\n  }\r\n\r\n  this._writableState = new WritableState(options, this);\r\n\r\n  // legacy.\r\n  this.writable = true;\r\n\r\n  if (options) {\r\n    if (typeof options.write === 'function') this._write = options.write;\r\n\r\n    if (typeof options.writev === 'function') this._writev = options.writev;\r\n\r\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\r\n\r\n    if (typeof options.final === 'function') this._final = options.final;\r\n  }\r\n\r\n  Stream.call(this);\r\n}\r\n\r\n// Otherwise people can pipe Writable streams, which is just wrong.\r\nWritable.prototype.pipe = function () {\r\n  this.emit('error', new Error('Cannot pipe, not readable'));\r\n};\r\n\r\nfunction writeAfterEnd(stream, cb) {\r\n  var er = new Error('write after end');\r\n  // TODO: defer error events consistently everywhere, not just the cb\r\n  stream.emit('error', er);\r\n  pna.nextTick(cb, er);\r\n}\r\n\r\n// Checks that a user-supplied chunk is valid, especially for the particular\r\n// mode the stream is in. Currently this means that `null` is never accepted\r\n// and undefined/non-string values are only allowed in object mode.\r\nfunction validChunk(stream, state, chunk, cb) {\r\n  var valid = true;\r\n  var er = false;\r\n\r\n  if (chunk === null) {\r\n    er = new TypeError('May not write null values to stream');\r\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\r\n    er = new TypeError('Invalid non-string/buffer chunk');\r\n  }\r\n  if (er) {\r\n    stream.emit('error', er);\r\n    pna.nextTick(cb, er);\r\n    valid = false;\r\n  }\r\n  return valid;\r\n}\r\n\r\nWritable.prototype.write = function (chunk, encoding, cb) {\r\n  var state = this._writableState;\r\n  var ret = false;\r\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\r\n\r\n  if (isBuf && !Buffer.isBuffer(chunk)) {\r\n    chunk = _uint8ArrayToBuffer(chunk);\r\n  }\r\n\r\n  if (typeof encoding === 'function') {\r\n    cb = encoding;\r\n    encoding = null;\r\n  }\r\n\r\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\r\n\r\n  if (typeof cb !== 'function') cb = nop;\r\n\r\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\r\n    state.pendingcb++;\r\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\r\n  }\r\n\r\n  return ret;\r\n};\r\n\r\nWritable.prototype.cork = function () {\r\n  var state = this._writableState;\r\n\r\n  state.corked++;\r\n};\r\n\r\nWritable.prototype.uncork = function () {\r\n  var state = this._writableState;\r\n\r\n  if (state.corked) {\r\n    state.corked--;\r\n\r\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\r\n  }\r\n};\r\n\r\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\r\n  // node::ParseEncoding() requires lower case.\r\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\r\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\r\n  this._writableState.defaultEncoding = encoding;\r\n  return this;\r\n};\r\n\r\nfunction decodeChunk(state, chunk, encoding) {\r\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\r\n    chunk = Buffer.from(chunk, encoding);\r\n  }\r\n  return chunk;\r\n}\r\n\r\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\r\n  // making it explicit this property is not enumerable\r\n  // because otherwise some prototype manipulation in\r\n  // userland will fail\r\n  enumerable: false,\r\n  get: function () {\r\n    return this._writableState.highWaterMark;\r\n  }\r\n});\r\n\r\n// if we're already writing something, then just put this\r\n// in the queue, and wait our turn.  Otherwise, call _write\r\n// If we return false, then we need a drain event, so set that flag.\r\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\r\n  if (!isBuf) {\r\n    var newChunk = decodeChunk(state, chunk, encoding);\r\n    if (chunk !== newChunk) {\r\n      isBuf = true;\r\n      encoding = 'buffer';\r\n      chunk = newChunk;\r\n    }\r\n  }\r\n  var len = state.objectMode ? 1 : chunk.length;\r\n\r\n  state.length += len;\r\n\r\n  var ret = state.length < state.highWaterMark;\r\n  // we must ensure that previous needDrain will not be reset to false.\r\n  if (!ret) state.needDrain = true;\r\n\r\n  if (state.writing || state.corked) {\r\n    var last = state.lastBufferedRequest;\r\n    state.lastBufferedRequest = {\r\n      chunk: chunk,\r\n      encoding: encoding,\r\n      isBuf: isBuf,\r\n      callback: cb,\r\n      next: null\r\n    };\r\n    if (last) {\r\n      last.next = state.lastBufferedRequest;\r\n    } else {\r\n      state.bufferedRequest = state.lastBufferedRequest;\r\n    }\r\n    state.bufferedRequestCount += 1;\r\n  } else {\r\n    doWrite(stream, state, false, len, chunk, encoding, cb);\r\n  }\r\n\r\n  return ret;\r\n}\r\n\r\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\r\n  state.writelen = len;\r\n  state.writecb = cb;\r\n  state.writing = true;\r\n  state.sync = true;\r\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\r\n  state.sync = false;\r\n}\r\n\r\nfunction onwriteError(stream, state, sync, er, cb) {\r\n  --state.pendingcb;\r\n\r\n  if (sync) {\r\n    // defer the callback if we are being called synchronously\r\n    // to avoid piling up things on the stack\r\n    pna.nextTick(cb, er);\r\n    // this can emit finish, and it will always happen\r\n    // after error\r\n    pna.nextTick(finishMaybe, stream, state);\r\n    stream._writableState.errorEmitted = true;\r\n    stream.emit('error', er);\r\n  } else {\r\n    // the caller expect this to happen before if\r\n    // it is async\r\n    cb(er);\r\n    stream._writableState.errorEmitted = true;\r\n    stream.emit('error', er);\r\n    // this can emit finish, but finish must\r\n    // always follow error\r\n    finishMaybe(stream, state);\r\n  }\r\n}\r\n\r\nfunction onwriteStateUpdate(state) {\r\n  state.writing = false;\r\n  state.writecb = null;\r\n  state.length -= state.writelen;\r\n  state.writelen = 0;\r\n}\r\n\r\nfunction onwrite(stream, er) {\r\n  var state = stream._writableState;\r\n  var sync = state.sync;\r\n  var cb = state.writecb;\r\n\r\n  onwriteStateUpdate(state);\r\n\r\n  if (er) onwriteError(stream, state, sync, er, cb);else {\r\n    // Check if we're actually ready to finish, but don't emit yet\r\n    var finished = needFinish(state);\r\n\r\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\r\n      clearBuffer(stream, state);\r\n    }\r\n\r\n    if (sync) {\r\n      /*<replacement>*/\r\n      asyncWrite(afterWrite, stream, state, finished, cb);\r\n      /*</replacement>*/\r\n    } else {\r\n      afterWrite(stream, state, finished, cb);\r\n    }\r\n  }\r\n}\r\n\r\nfunction afterWrite(stream, state, finished, cb) {\r\n  if (!finished) onwriteDrain(stream, state);\r\n  state.pendingcb--;\r\n  cb();\r\n  finishMaybe(stream, state);\r\n}\r\n\r\n// Must force callback to be called on nextTick, so that we don't\r\n// emit 'drain' before the write() consumer gets the 'false' return\r\n// value, and has a chance to attach a 'drain' listener.\r\nfunction onwriteDrain(stream, state) {\r\n  if (state.length === 0 && state.needDrain) {\r\n    state.needDrain = false;\r\n    stream.emit('drain');\r\n  }\r\n}\r\n\r\n// if there's something in the buffer waiting, then process it\r\nfunction clearBuffer(stream, state) {\r\n  state.bufferProcessing = true;\r\n  var entry = state.bufferedRequest;\r\n\r\n  if (stream._writev && entry && entry.next) {\r\n    // Fast case, write everything using _writev()\r\n    var l = state.bufferedRequestCount;\r\n    var buffer = new Array(l);\r\n    var holder = state.corkedRequestsFree;\r\n    holder.entry = entry;\r\n\r\n    var count = 0;\r\n    var allBuffers = true;\r\n    while (entry) {\r\n      buffer[count] = entry;\r\n      if (!entry.isBuf) allBuffers = false;\r\n      entry = entry.next;\r\n      count += 1;\r\n    }\r\n    buffer.allBuffers = allBuffers;\r\n\r\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\r\n\r\n    // doWrite is almost always async, defer these to save a bit of time\r\n    // as the hot path ends with doWrite\r\n    state.pendingcb++;\r\n    state.lastBufferedRequest = null;\r\n    if (holder.next) {\r\n      state.corkedRequestsFree = holder.next;\r\n      holder.next = null;\r\n    } else {\r\n      state.corkedRequestsFree = new CorkedRequest(state);\r\n    }\r\n    state.bufferedRequestCount = 0;\r\n  } else {\r\n    // Slow case, write chunks one-by-one\r\n    while (entry) {\r\n      var chunk = entry.chunk;\r\n      var encoding = entry.encoding;\r\n      var cb = entry.callback;\r\n      var len = state.objectMode ? 1 : chunk.length;\r\n\r\n      doWrite(stream, state, false, len, chunk, encoding, cb);\r\n      entry = entry.next;\r\n      state.bufferedRequestCount--;\r\n      // if we didn't call the onwrite immediately, then\r\n      // it means that we need to wait until it does.\r\n      // also, that means that the chunk and cb are currently\r\n      // being processed, so move the buffer counter past them.\r\n      if (state.writing) {\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (entry === null) state.lastBufferedRequest = null;\r\n  }\r\n\r\n  state.bufferedRequest = entry;\r\n  state.bufferProcessing = false;\r\n}\r\n\r\nWritable.prototype._write = function (chunk, encoding, cb) {\r\n  cb(new Error('_write() is not implemented'));\r\n};\r\n\r\nWritable.prototype._writev = null;\r\n\r\nWritable.prototype.end = function (chunk, encoding, cb) {\r\n  var state = this._writableState;\r\n\r\n  if (typeof chunk === 'function') {\r\n    cb = chunk;\r\n    chunk = null;\r\n    encoding = null;\r\n  } else if (typeof encoding === 'function') {\r\n    cb = encoding;\r\n    encoding = null;\r\n  }\r\n\r\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\r\n\r\n  // .end() fully uncorks\r\n  if (state.corked) {\r\n    state.corked = 1;\r\n    this.uncork();\r\n  }\r\n\r\n  // ignore unnecessary end() calls.\r\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\r\n};\r\n\r\nfunction needFinish(state) {\r\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\r\n}\r\nfunction callFinal(stream, state) {\r\n  stream._final(function (err) {\r\n    state.pendingcb--;\r\n    if (err) {\r\n      stream.emit('error', err);\r\n    }\r\n    state.prefinished = true;\r\n    stream.emit('prefinish');\r\n    finishMaybe(stream, state);\r\n  });\r\n}\r\nfunction prefinish(stream, state) {\r\n  if (!state.prefinished && !state.finalCalled) {\r\n    if (typeof stream._final === 'function') {\r\n      state.pendingcb++;\r\n      state.finalCalled = true;\r\n      pna.nextTick(callFinal, stream, state);\r\n    } else {\r\n      state.prefinished = true;\r\n      stream.emit('prefinish');\r\n    }\r\n  }\r\n}\r\n\r\nfunction finishMaybe(stream, state) {\r\n  var need = needFinish(state);\r\n  if (need) {\r\n    prefinish(stream, state);\r\n    if (state.pendingcb === 0) {\r\n      state.finished = true;\r\n      stream.emit('finish');\r\n    }\r\n  }\r\n  return need;\r\n}\r\n\r\nfunction endWritable(stream, state, cb) {\r\n  state.ending = true;\r\n  finishMaybe(stream, state);\r\n  if (cb) {\r\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\r\n  }\r\n  state.ended = true;\r\n  stream.writable = false;\r\n}\r\n\r\nfunction onCorkedFinish(corkReq, state, err) {\r\n  var entry = corkReq.entry;\r\n  corkReq.entry = null;\r\n  while (entry) {\r\n    var cb = entry.callback;\r\n    state.pendingcb--;\r\n    cb(err);\r\n    entry = entry.next;\r\n  }\r\n  if (state.corkedRequestsFree) {\r\n    state.corkedRequestsFree.next = corkReq;\r\n  } else {\r\n    state.corkedRequestsFree = corkReq;\r\n  }\r\n}\r\n\r\nObject.defineProperty(Writable.prototype, 'destroyed', {\r\n  get: function () {\r\n    if (this._writableState === undefined) {\r\n      return false;\r\n    }\r\n    return this._writableState.destroyed;\r\n  },\r\n  set: function (value) {\r\n    // we ignore the value if the stream\r\n    // has not been initialized yet\r\n    if (!this._writableState) {\r\n      return;\r\n    }\r\n\r\n    // backward compatibility, the user is explicitly\r\n    // managing destroyed\r\n    this._writableState.destroyed = value;\r\n  }\r\n});\r\n\r\nWritable.prototype.destroy = destroyImpl.destroy;\r\nWritable.prototype._undestroy = destroyImpl.undestroy;\r\nWritable.prototype._destroy = function (err, cb) {\r\n  this.end();\r\n  cb(err);\r\n};\r\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {},require(\"timers\").setImmediate)\r\n\r\n},{\"./_stream_duplex\":98,\"./internal/streams/destroy\":104,\"./internal/streams/stream\":105,\"_process\":91,\"core-util-is\":42,\"inherits\":84,\"process-nextick-args\":90,\"safe-buffer\":110,\"timers\":114,\"util-deprecate\":115}],103:[function(require,module,exports){\r\n'use strict';\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar Buffer = require('safe-buffer').Buffer;\r\nvar util = require('util');\r\n\r\nfunction copyBuffer(src, target, offset) {\r\n  src.copy(target, offset);\r\n}\r\n\r\nmodule.exports = function () {\r\n  function BufferList() {\r\n    _classCallCheck(this, BufferList);\r\n\r\n    this.head = null;\r\n    this.tail = null;\r\n    this.length = 0;\r\n  }\r\n\r\n  BufferList.prototype.push = function push(v) {\r\n    var entry = { data: v, next: null };\r\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\r\n    this.tail = entry;\r\n    ++this.length;\r\n  };\r\n\r\n  BufferList.prototype.unshift = function unshift(v) {\r\n    var entry = { data: v, next: this.head };\r\n    if (this.length === 0) this.tail = entry;\r\n    this.head = entry;\r\n    ++this.length;\r\n  };\r\n\r\n  BufferList.prototype.shift = function shift() {\r\n    if (this.length === 0) return;\r\n    var ret = this.head.data;\r\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\r\n    --this.length;\r\n    return ret;\r\n  };\r\n\r\n  BufferList.prototype.clear = function clear() {\r\n    this.head = this.tail = null;\r\n    this.length = 0;\r\n  };\r\n\r\n  BufferList.prototype.join = function join(s) {\r\n    if (this.length === 0) return '';\r\n    var p = this.head;\r\n    var ret = '' + p.data;\r\n    while (p = p.next) {\r\n      ret += s + p.data;\r\n    }return ret;\r\n  };\r\n\r\n  BufferList.prototype.concat = function concat(n) {\r\n    if (this.length === 0) return Buffer.alloc(0);\r\n    if (this.length === 1) return this.head.data;\r\n    var ret = Buffer.allocUnsafe(n >>> 0);\r\n    var p = this.head;\r\n    var i = 0;\r\n    while (p) {\r\n      copyBuffer(p.data, ret, i);\r\n      i += p.data.length;\r\n      p = p.next;\r\n    }\r\n    return ret;\r\n  };\r\n\r\n  return BufferList;\r\n}();\r\n\r\nif (util && util.inspect && util.inspect.custom) {\r\n  module.exports.prototype[util.inspect.custom] = function () {\r\n    var obj = util.inspect({ length: this.length });\r\n    return this.constructor.name + ' ' + obj;\r\n  };\r\n}\r\n},{\"safe-buffer\":110,\"util\":40}],104:[function(require,module,exports){\r\n'use strict';\r\n\r\n/*<replacement>*/\r\n\r\nvar pna = require('process-nextick-args');\r\n/*</replacement>*/\r\n\r\n// undocumented cb() API, needed for core, not for public API\r\nfunction destroy(err, cb) {\r\n  var _this = this;\r\n\r\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\r\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\r\n\r\n  if (readableDestroyed || writableDestroyed) {\r\n    if (cb) {\r\n      cb(err);\r\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\r\n      pna.nextTick(emitErrorNT, this, err);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  // we set destroyed to true before firing error callbacks in order\r\n  // to make it re-entrance safe in case destroy() is called within callbacks\r\n\r\n  if (this._readableState) {\r\n    this._readableState.destroyed = true;\r\n  }\r\n\r\n  // if this is a duplex stream mark the writable part as destroyed as well\r\n  if (this._writableState) {\r\n    this._writableState.destroyed = true;\r\n  }\r\n\r\n  this._destroy(err || null, function (err) {\r\n    if (!cb && err) {\r\n      pna.nextTick(emitErrorNT, _this, err);\r\n      if (_this._writableState) {\r\n        _this._writableState.errorEmitted = true;\r\n      }\r\n    } else if (cb) {\r\n      cb(err);\r\n    }\r\n  });\r\n\r\n  return this;\r\n}\r\n\r\nfunction undestroy() {\r\n  if (this._readableState) {\r\n    this._readableState.destroyed = false;\r\n    this._readableState.reading = false;\r\n    this._readableState.ended = false;\r\n    this._readableState.endEmitted = false;\r\n  }\r\n\r\n  if (this._writableState) {\r\n    this._writableState.destroyed = false;\r\n    this._writableState.ended = false;\r\n    this._writableState.ending = false;\r\n    this._writableState.finished = false;\r\n    this._writableState.errorEmitted = false;\r\n  }\r\n}\r\n\r\nfunction emitErrorNT(self, err) {\r\n  self.emit('error', err);\r\n}\r\n\r\nmodule.exports = {\r\n  destroy: destroy,\r\n  undestroy: undestroy\r\n};\r\n},{\"process-nextick-args\":90}],105:[function(require,module,exports){\r\nmodule.exports = require('events').EventEmitter;\r\n\r\n},{\"events\":47}],106:[function(require,module,exports){\r\nmodule.exports = require('./readable').PassThrough\r\n\r\n},{\"./readable\":107}],107:[function(require,module,exports){\r\nexports = module.exports = require('./lib/_stream_readable.js');\r\nexports.Stream = exports;\r\nexports.Readable = exports;\r\nexports.Writable = require('./lib/_stream_writable.js');\r\nexports.Duplex = require('./lib/_stream_duplex.js');\r\nexports.Transform = require('./lib/_stream_transform.js');\r\nexports.PassThrough = require('./lib/_stream_passthrough.js');\r\n\r\n},{\"./lib/_stream_duplex.js\":98,\"./lib/_stream_passthrough.js\":99,\"./lib/_stream_readable.js\":100,\"./lib/_stream_transform.js\":101,\"./lib/_stream_writable.js\":102}],108:[function(require,module,exports){\r\nmodule.exports = require('./readable').Transform\r\n\r\n},{\"./readable\":107}],109:[function(require,module,exports){\r\nmodule.exports = require('./lib/_stream_writable.js');\r\n\r\n},{\"./lib/_stream_writable.js\":102}],110:[function(require,module,exports){\r\n/* eslint-disable node/no-deprecated-api */\r\nvar buffer = require('buffer')\r\nvar Buffer = buffer.Buffer\r\n\r\n// alternative to using Object.keys for old browsers\r\nfunction copyProps (src, dst) {\r\n  for (var key in src) {\r\n    dst[key] = src[key]\r\n  }\r\n}\r\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\r\n  module.exports = buffer\r\n} else {\r\n  // Copy properties from require('buffer')\r\n  copyProps(buffer, exports)\r\n  exports.Buffer = SafeBuffer\r\n}\r\n\r\nfunction SafeBuffer (arg, encodingOrOffset, length) {\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\n// Copy static methods from Buffer\r\ncopyProps(Buffer, SafeBuffer)\r\n\r\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\r\n  if (typeof arg === 'number') {\r\n    throw new TypeError('Argument must not be a number')\r\n  }\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\nSafeBuffer.alloc = function (size, fill, encoding) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  var buf = Buffer(size)\r\n  if (fill !== undefined) {\r\n    if (typeof encoding === 'string') {\r\n      buf.fill(fill, encoding)\r\n    } else {\r\n      buf.fill(fill)\r\n    }\r\n  } else {\r\n    buf.fill(0)\r\n  }\r\n  return buf\r\n}\r\n\r\nSafeBuffer.allocUnsafe = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return Buffer(size)\r\n}\r\n\r\nSafeBuffer.allocUnsafeSlow = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return buffer.SlowBuffer(size)\r\n}\r\n\r\n},{\"buffer\":41}],111:[function(require,module,exports){\r\n(function (Buffer){\r\n;(function (sax) { // wrapper for non-node envs\r\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\r\n  sax.SAXParser = SAXParser\r\n  sax.SAXStream = SAXStream\r\n  sax.createStream = createStream\r\n\r\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\r\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\r\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\r\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\r\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\r\n  // large string into write() might have undesirable effects, but this is manageable by\r\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\r\n  // edge case, result in creating at most one complete copy of the string passed in.\r\n  // Set to Infinity to have unlimited buffers.\r\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\r\n\r\n  var buffers = [\r\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\r\n    'procInstName', 'procInstBody', 'entity', 'attribName',\r\n    'attribValue', 'cdata', 'script'\r\n  ]\r\n\r\n  sax.EVENTS = [\r\n    'text',\r\n    'processinginstruction',\r\n    'sgmldeclaration',\r\n    'doctype',\r\n    'comment',\r\n    'opentagstart',\r\n    'attribute',\r\n    'opentag',\r\n    'closetag',\r\n    'opencdata',\r\n    'cdata',\r\n    'closecdata',\r\n    'error',\r\n    'end',\r\n    'ready',\r\n    'script',\r\n    'opennamespace',\r\n    'closenamespace'\r\n  ]\r\n\r\n  function SAXParser (strict, opt) {\r\n    if (!(this instanceof SAXParser)) {\r\n      return new SAXParser(strict, opt)\r\n    }\r\n\r\n    var parser = this\r\n    clearBuffers(parser)\r\n    parser.q = parser.c = ''\r\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\r\n    parser.opt = opt || {}\r\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\r\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\r\n    parser.tags = []\r\n    parser.closed = parser.closedRoot = parser.sawRoot = false\r\n    parser.tag = parser.error = null\r\n    parser.strict = !!strict\r\n    parser.noscript = !!(strict || parser.opt.noscript)\r\n    parser.state = S.BEGIN\r\n    parser.strictEntities = parser.opt.strictEntities\r\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\r\n    parser.attribList = []\r\n\r\n    // namespaces form a prototype chain.\r\n    // it always points at the current tag,\r\n    // which protos to its parent tag.\r\n    if (parser.opt.xmlns) {\r\n      parser.ns = Object.create(rootNS)\r\n    }\r\n\r\n    // mostly just for error reporting\r\n    parser.trackPosition = parser.opt.position !== false\r\n    if (parser.trackPosition) {\r\n      parser.position = parser.line = parser.column = 0\r\n    }\r\n    emit(parser, 'onready')\r\n  }\r\n\r\n  if (!Object.create) {\r\n    Object.create = function (o) {\r\n      function F () {}\r\n      F.prototype = o\r\n      var newf = new F()\r\n      return newf\r\n    }\r\n  }\r\n\r\n  if (!Object.keys) {\r\n    Object.keys = function (o) {\r\n      var a = []\r\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\r\n      return a\r\n    }\r\n  }\r\n\r\n  function checkBufferLength (parser) {\r\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\r\n    var maxActual = 0\r\n    for (var i = 0, l = buffers.length; i < l; i++) {\r\n      var len = parser[buffers[i]].length\r\n      if (len > maxAllowed) {\r\n        // Text/cdata nodes can get big, and since they're buffered,\r\n        // we can get here under normal conditions.\r\n        // Avoid issues by emitting the text node now,\r\n        // so at least it won't get any bigger.\r\n        switch (buffers[i]) {\r\n          case 'textNode':\r\n            closeText(parser)\r\n            break\r\n\r\n          case 'cdata':\r\n            emitNode(parser, 'oncdata', parser.cdata)\r\n            parser.cdata = ''\r\n            break\r\n\r\n          case 'script':\r\n            emitNode(parser, 'onscript', parser.script)\r\n            parser.script = ''\r\n            break\r\n\r\n          default:\r\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\r\n        }\r\n      }\r\n      maxActual = Math.max(maxActual, len)\r\n    }\r\n    // schedule the next check for the earliest possible buffer overrun.\r\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\r\n    parser.bufferCheckPosition = m + parser.position\r\n  }\r\n\r\n  function clearBuffers (parser) {\r\n    for (var i = 0, l = buffers.length; i < l; i++) {\r\n      parser[buffers[i]] = ''\r\n    }\r\n  }\r\n\r\n  function flushBuffers (parser) {\r\n    closeText(parser)\r\n    if (parser.cdata !== '') {\r\n      emitNode(parser, 'oncdata', parser.cdata)\r\n      parser.cdata = ''\r\n    }\r\n    if (parser.script !== '') {\r\n      emitNode(parser, 'onscript', parser.script)\r\n      parser.script = ''\r\n    }\r\n  }\r\n\r\n  SAXParser.prototype = {\r\n    end: function () { end(this) },\r\n    write: write,\r\n    resume: function () { this.error = null; return this },\r\n    close: function () { return this.write(null) },\r\n    flush: function () { flushBuffers(this) }\r\n  }\r\n\r\n  var Stream\r\n  try {\r\n    Stream = require('stream').Stream\r\n  } catch (ex) {\r\n    Stream = function () {}\r\n  }\r\n\r\n  var streamWraps = sax.EVENTS.filter(function (ev) {\r\n    return ev !== 'error' && ev !== 'end'\r\n  })\r\n\r\n  function createStream (strict, opt) {\r\n    return new SAXStream(strict, opt)\r\n  }\r\n\r\n  function SAXStream (strict, opt) {\r\n    if (!(this instanceof SAXStream)) {\r\n      return new SAXStream(strict, opt)\r\n    }\r\n\r\n    Stream.apply(this)\r\n\r\n    this._parser = new SAXParser(strict, opt)\r\n    this.writable = true\r\n    this.readable = true\r\n\r\n    var me = this\r\n\r\n    this._parser.onend = function () {\r\n      me.emit('end')\r\n    }\r\n\r\n    this._parser.onerror = function (er) {\r\n      me.emit('error', er)\r\n\r\n      // if didn't throw, then means error was handled.\r\n      // go ahead and clear error, so we can write again.\r\n      me._parser.error = null\r\n    }\r\n\r\n    this._decoder = null\r\n\r\n    streamWraps.forEach(function (ev) {\r\n      Object.defineProperty(me, 'on' + ev, {\r\n        get: function () {\r\n          return me._parser['on' + ev]\r\n        },\r\n        set: function (h) {\r\n          if (!h) {\r\n            me.removeAllListeners(ev)\r\n            me._parser['on' + ev] = h\r\n            return h\r\n          }\r\n          me.on(ev, h)\r\n        },\r\n        enumerable: true,\r\n        configurable: false\r\n      })\r\n    })\r\n  }\r\n\r\n  SAXStream.prototype = Object.create(Stream.prototype, {\r\n    constructor: {\r\n      value: SAXStream\r\n    }\r\n  })\r\n\r\n  SAXStream.prototype.write = function (data) {\r\n    if (typeof Buffer === 'function' &&\r\n      typeof Buffer.isBuffer === 'function' &&\r\n      Buffer.isBuffer(data)) {\r\n      if (!this._decoder) {\r\n        var SD = require('string_decoder').StringDecoder\r\n        this._decoder = new SD('utf8')\r\n      }\r\n      data = this._decoder.write(data)\r\n    }\r\n\r\n    this._parser.write(data.toString())\r\n    this.emit('data', data)\r\n    return true\r\n  }\r\n\r\n  SAXStream.prototype.end = function (chunk) {\r\n    if (chunk && chunk.length) {\r\n      this.write(chunk)\r\n    }\r\n    this._parser.end()\r\n    return true\r\n  }\r\n\r\n  SAXStream.prototype.on = function (ev, handler) {\r\n    var me = this\r\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\r\n      me._parser['on' + ev] = function () {\r\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\r\n        args.splice(0, 0, ev)\r\n        me.emit.apply(me, args)\r\n      }\r\n    }\r\n\r\n    return Stream.prototype.on.call(me, ev, handler)\r\n  }\r\n\r\n  // this really needs to be replaced with character classes.\r\n  // XML allows all manner of ridiculous numbers and digits.\r\n  var CDATA = '[CDATA['\r\n  var DOCTYPE = 'DOCTYPE'\r\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\r\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\r\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\r\n\r\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\r\n  // This implementation works on strings, a single character at a time\r\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\r\n  // without a significant breaking change to either this  parser, or the\r\n  // JavaScript language.  Implementation of an emoji-capable xml parser\r\n  // is left as an exercise for the reader.\r\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\r\n\r\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\r\n\r\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\r\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/\r\n\r\n  function isWhitespace (c) {\r\n    return c === ' ' || c === '\\n' || c === '\\r' || c === '\\t'\r\n  }\r\n\r\n  function isQuote (c) {\r\n    return c === '\"' || c === '\\''\r\n  }\r\n\r\n  function isAttribEnd (c) {\r\n    return c === '>' || isWhitespace(c)\r\n  }\r\n\r\n  function isMatch (regex, c) {\r\n    return regex.test(c)\r\n  }\r\n\r\n  function notMatch (regex, c) {\r\n    return !isMatch(regex, c)\r\n  }\r\n\r\n  var S = 0\r\n  sax.STATE = {\r\n    BEGIN: S++, // leading byte order mark or whitespace\r\n    BEGIN_WHITESPACE: S++, // leading whitespace\r\n    TEXT: S++, // general stuff\r\n    TEXT_ENTITY: S++, // &amp and such.\r\n    OPEN_WAKA: S++, // <\r\n    SGML_DECL: S++, // <!BLARG\r\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\r\n    DOCTYPE: S++, // <!DOCTYPE\r\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\r\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\r\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\r\n    COMMENT_STARTING: S++, // <!-\r\n    COMMENT: S++, // <!--\r\n    COMMENT_ENDING: S++, // <!-- blah -\r\n    COMMENT_ENDED: S++, // <!-- blah --\r\n    CDATA: S++, // <![CDATA[ something\r\n    CDATA_ENDING: S++, // ]\r\n    CDATA_ENDING_2: S++, // ]]\r\n    PROC_INST: S++, // <?hi\r\n    PROC_INST_BODY: S++, // <?hi there\r\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\r\n    OPEN_TAG: S++, // <strong\r\n    OPEN_TAG_SLASH: S++, // <strong /\r\n    ATTRIB: S++, // <a\r\n    ATTRIB_NAME: S++, // <a foo\r\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\r\n    ATTRIB_VALUE: S++, // <a foo=\r\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\r\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\r\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\r\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\r\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\r\n    CLOSE_TAG: S++, // </a\r\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\r\n    SCRIPT: S++, // <script> ...\r\n    SCRIPT_ENDING: S++ // <script> ... <\r\n  }\r\n\r\n  sax.XML_ENTITIES = {\r\n    'amp': '&',\r\n    'gt': '>',\r\n    'lt': '<',\r\n    'quot': '\"',\r\n    'apos': \"'\"\r\n  }\r\n\r\n  sax.ENTITIES = {\r\n    'amp': '&',\r\n    'gt': '>',\r\n    'lt': '<',\r\n    'quot': '\"',\r\n    'apos': \"'\",\r\n    'AElig': 198,\r\n    'Aacute': 193,\r\n    'Acirc': 194,\r\n    'Agrave': 192,\r\n    'Aring': 197,\r\n    'Atilde': 195,\r\n    'Auml': 196,\r\n    'Ccedil': 199,\r\n    'ETH': 208,\r\n    'Eacute': 201,\r\n    'Ecirc': 202,\r\n    'Egrave': 200,\r\n    'Euml': 203,\r\n    'Iacute': 205,\r\n    'Icirc': 206,\r\n    'Igrave': 204,\r\n    'Iuml': 207,\r\n    'Ntilde': 209,\r\n    'Oacute': 211,\r\n    'Ocirc': 212,\r\n    'Ograve': 210,\r\n    'Oslash': 216,\r\n    'Otilde': 213,\r\n    'Ouml': 214,\r\n    'THORN': 222,\r\n    'Uacute': 218,\r\n    'Ucirc': 219,\r\n    'Ugrave': 217,\r\n    'Uuml': 220,\r\n    'Yacute': 221,\r\n    'aacute': 225,\r\n    'acirc': 226,\r\n    'aelig': 230,\r\n    'agrave': 224,\r\n    'aring': 229,\r\n    'atilde': 227,\r\n    'auml': 228,\r\n    'ccedil': 231,\r\n    'eacute': 233,\r\n    'ecirc': 234,\r\n    'egrave': 232,\r\n    'eth': 240,\r\n    'euml': 235,\r\n    'iacute': 237,\r\n    'icirc': 238,\r\n    'igrave': 236,\r\n    'iuml': 239,\r\n    'ntilde': 241,\r\n    'oacute': 243,\r\n    'ocirc': 244,\r\n    'ograve': 242,\r\n    'oslash': 248,\r\n    'otilde': 245,\r\n    'ouml': 246,\r\n    'szlig': 223,\r\n    'thorn': 254,\r\n    'uacute': 250,\r\n    'ucirc': 251,\r\n    'ugrave': 249,\r\n    'uuml': 252,\r\n    'yacute': 253,\r\n    'yuml': 255,\r\n    'copy': 169,\r\n    'reg': 174,\r\n    'nbsp': 160,\r\n    'iexcl': 161,\r\n    'cent': 162,\r\n    'pound': 163,\r\n    'curren': 164,\r\n    'yen': 165,\r\n    'brvbar': 166,\r\n    'sect': 167,\r\n    'uml': 168,\r\n    'ordf': 170,\r\n    'laquo': 171,\r\n    'not': 172,\r\n    'shy': 173,\r\n    'macr': 175,\r\n    'deg': 176,\r\n    'plusmn': 177,\r\n    'sup1': 185,\r\n    'sup2': 178,\r\n    'sup3': 179,\r\n    'acute': 180,\r\n    'micro': 181,\r\n    'para': 182,\r\n    'middot': 183,\r\n    'cedil': 184,\r\n    'ordm': 186,\r\n    'raquo': 187,\r\n    'frac14': 188,\r\n    'frac12': 189,\r\n    'frac34': 190,\r\n    'iquest': 191,\r\n    'times': 215,\r\n    'divide': 247,\r\n    'OElig': 338,\r\n    'oelig': 339,\r\n    'Scaron': 352,\r\n    'scaron': 353,\r\n    'Yuml': 376,\r\n    'fnof': 402,\r\n    'circ': 710,\r\n    'tilde': 732,\r\n    'Alpha': 913,\r\n    'Beta': 914,\r\n    'Gamma': 915,\r\n    'Delta': 916,\r\n    'Epsilon': 917,\r\n    'Zeta': 918,\r\n    'Eta': 919,\r\n    'Theta': 920,\r\n    'Iota': 921,\r\n    'Kappa': 922,\r\n    'Lambda': 923,\r\n    'Mu': 924,\r\n    'Nu': 925,\r\n    'Xi': 926,\r\n    'Omicron': 927,\r\n    'Pi': 928,\r\n    'Rho': 929,\r\n    'Sigma': 931,\r\n    'Tau': 932,\r\n    'Upsilon': 933,\r\n    'Phi': 934,\r\n    'Chi': 935,\r\n    'Psi': 936,\r\n    'Omega': 937,\r\n    'alpha': 945,\r\n    'beta': 946,\r\n    'gamma': 947,\r\n    'delta': 948,\r\n    'epsilon': 949,\r\n    'zeta': 950,\r\n    'eta': 951,\r\n    'theta': 952,\r\n    'iota': 953,\r\n    'kappa': 954,\r\n    'lambda': 955,\r\n    'mu': 956,\r\n    'nu': 957,\r\n    'xi': 958,\r\n    'omicron': 959,\r\n    'pi': 960,\r\n    'rho': 961,\r\n    'sigmaf': 962,\r\n    'sigma': 963,\r\n    'tau': 964,\r\n    'upsilon': 965,\r\n    'phi': 966,\r\n    'chi': 967,\r\n    'psi': 968,\r\n    'omega': 969,\r\n    'thetasym': 977,\r\n    'upsih': 978,\r\n    'piv': 982,\r\n    'ensp': 8194,\r\n    'emsp': 8195,\r\n    'thinsp': 8201,\r\n    'zwnj': 8204,\r\n    'zwj': 8205,\r\n    'lrm': 8206,\r\n    'rlm': 8207,\r\n    'ndash': 8211,\r\n    'mdash': 8212,\r\n    'lsquo': 8216,\r\n    'rsquo': 8217,\r\n    'sbquo': 8218,\r\n    'ldquo': 8220,\r\n    'rdquo': 8221,\r\n    'bdquo': 8222,\r\n    'dagger': 8224,\r\n    'Dagger': 8225,\r\n    'bull': 8226,\r\n    'hellip': 8230,\r\n    'permil': 8240,\r\n    'prime': 8242,\r\n    'Prime': 8243,\r\n    'lsaquo': 8249,\r\n    'rsaquo': 8250,\r\n    'oline': 8254,\r\n    'frasl': 8260,\r\n    'euro': 8364,\r\n    'image': 8465,\r\n    'weierp': 8472,\r\n    'real': 8476,\r\n    'trade': 8482,\r\n    'alefsym': 8501,\r\n    'larr': 8592,\r\n    'uarr': 8593,\r\n    'rarr': 8594,\r\n    'darr': 8595,\r\n    'harr': 8596,\r\n    'crarr': 8629,\r\n    'lArr': 8656,\r\n    'uArr': 8657,\r\n    'rArr': 8658,\r\n    'dArr': 8659,\r\n    'hArr': 8660,\r\n    'forall': 8704,\r\n    'part': 8706,\r\n    'exist': 8707,\r\n    'empty': 8709,\r\n    'nabla': 8711,\r\n    'isin': 8712,\r\n    'notin': 8713,\r\n    'ni': 8715,\r\n    'prod': 8719,\r\n    'sum': 8721,\r\n    'minus': 8722,\r\n    'lowast': 8727,\r\n    'radic': 8730,\r\n    'prop': 8733,\r\n    'infin': 8734,\r\n    'ang': 8736,\r\n    'and': 8743,\r\n    'or': 8744,\r\n    'cap': 8745,\r\n    'cup': 8746,\r\n    'int': 8747,\r\n    'there4': 8756,\r\n    'sim': 8764,\r\n    'cong': 8773,\r\n    'asymp': 8776,\r\n    'ne': 8800,\r\n    'equiv': 8801,\r\n    'le': 8804,\r\n    'ge': 8805,\r\n    'sub': 8834,\r\n    'sup': 8835,\r\n    'nsub': 8836,\r\n    'sube': 8838,\r\n    'supe': 8839,\r\n    'oplus': 8853,\r\n    'otimes': 8855,\r\n    'perp': 8869,\r\n    'sdot': 8901,\r\n    'lceil': 8968,\r\n    'rceil': 8969,\r\n    'lfloor': 8970,\r\n    'rfloor': 8971,\r\n    'lang': 9001,\r\n    'rang': 9002,\r\n    'loz': 9674,\r\n    'spades': 9824,\r\n    'clubs': 9827,\r\n    'hearts': 9829,\r\n    'diams': 9830\r\n  }\r\n\r\n  Object.keys(sax.ENTITIES).forEach(function (key) {\r\n    var e = sax.ENTITIES[key]\r\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\r\n    sax.ENTITIES[key] = s\r\n  })\r\n\r\n  for (var s in sax.STATE) {\r\n    sax.STATE[sax.STATE[s]] = s\r\n  }\r\n\r\n  // shorthand\r\n  S = sax.STATE\r\n\r\n  function emit (parser, event, data) {\r\n    parser[event] && parser[event](data)\r\n  }\r\n\r\n  function emitNode (parser, nodeType, data) {\r\n    if (parser.textNode) closeText(parser)\r\n    emit(parser, nodeType, data)\r\n  }\r\n\r\n  function closeText (parser) {\r\n    parser.textNode = textopts(parser.opt, parser.textNode)\r\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\r\n    parser.textNode = ''\r\n  }\r\n\r\n  function textopts (opt, text) {\r\n    if (opt.trim) text = text.trim()\r\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\r\n    return text\r\n  }\r\n\r\n  function error (parser, er) {\r\n    closeText(parser)\r\n    if (parser.trackPosition) {\r\n      er += '\\nLine: ' + parser.line +\r\n        '\\nColumn: ' + parser.column +\r\n        '\\nChar: ' + parser.c\r\n    }\r\n    er = new Error(er)\r\n    parser.error = er\r\n    emit(parser, 'onerror', er)\r\n    return parser\r\n  }\r\n\r\n  function end (parser) {\r\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\r\n    if ((parser.state !== S.BEGIN) &&\r\n      (parser.state !== S.BEGIN_WHITESPACE) &&\r\n      (parser.state !== S.TEXT)) {\r\n      error(parser, 'Unexpected end')\r\n    }\r\n    closeText(parser)\r\n    parser.c = ''\r\n    parser.closed = true\r\n    emit(parser, 'onend')\r\n    SAXParser.call(parser, parser.strict, parser.opt)\r\n    return parser\r\n  }\r\n\r\n  function strictFail (parser, message) {\r\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\r\n      throw new Error('bad call to strictFail')\r\n    }\r\n    if (parser.strict) {\r\n      error(parser, message)\r\n    }\r\n  }\r\n\r\n  function newTag (parser) {\r\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\r\n    var parent = parser.tags[parser.tags.length - 1] || parser\r\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\r\n\r\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\r\n    if (parser.opt.xmlns) {\r\n      tag.ns = parent.ns\r\n    }\r\n    parser.attribList.length = 0\r\n    emitNode(parser, 'onopentagstart', tag)\r\n  }\r\n\r\n  function qname (name, attribute) {\r\n    var i = name.indexOf(':')\r\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\r\n    var prefix = qualName[0]\r\n    var local = qualName[1]\r\n\r\n    // <x \"xmlns\"=\"http://foo\">\r\n    if (attribute && name === 'xmlns') {\r\n      prefix = 'xmlns'\r\n      local = ''\r\n    }\r\n\r\n    return { prefix: prefix, local: local }\r\n  }\r\n\r\n  function attrib (parser) {\r\n    if (!parser.strict) {\r\n      parser.attribName = parser.attribName[parser.looseCase]()\r\n    }\r\n\r\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\r\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\r\n      parser.attribName = parser.attribValue = ''\r\n      return\r\n    }\r\n\r\n    if (parser.opt.xmlns) {\r\n      var qn = qname(parser.attribName, true)\r\n      var prefix = qn.prefix\r\n      var local = qn.local\r\n\r\n      if (prefix === 'xmlns') {\r\n        // namespace binding attribute. push the binding into scope\r\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\r\n          strictFail(parser,\r\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\r\n            'Actual: ' + parser.attribValue)\r\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\r\n          strictFail(parser,\r\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\r\n            'Actual: ' + parser.attribValue)\r\n        } else {\r\n          var tag = parser.tag\r\n          var parent = parser.tags[parser.tags.length - 1] || parser\r\n          if (tag.ns === parent.ns) {\r\n            tag.ns = Object.create(parent.ns)\r\n          }\r\n          tag.ns[local] = parser.attribValue\r\n        }\r\n      }\r\n\r\n      // defer onattribute events until all attributes have been seen\r\n      // so any new bindings can take effect. preserve attribute order\r\n      // so deferred events can be emitted in document order\r\n      parser.attribList.push([parser.attribName, parser.attribValue])\r\n    } else {\r\n      // in non-xmlns mode, we can emit the event right away\r\n      parser.tag.attributes[parser.attribName] = parser.attribValue\r\n      emitNode(parser, 'onattribute', {\r\n        name: parser.attribName,\r\n        value: parser.attribValue\r\n      })\r\n    }\r\n\r\n    parser.attribName = parser.attribValue = ''\r\n  }\r\n\r\n  function openTag (parser, selfClosing) {\r\n    if (parser.opt.xmlns) {\r\n      // emit namespace binding events\r\n      var tag = parser.tag\r\n\r\n      // add namespace info to tag\r\n      var qn = qname(parser.tagName)\r\n      tag.prefix = qn.prefix\r\n      tag.local = qn.local\r\n      tag.uri = tag.ns[qn.prefix] || ''\r\n\r\n      if (tag.prefix && !tag.uri) {\r\n        strictFail(parser, 'Unbound namespace prefix: ' +\r\n          JSON.stringify(parser.tagName))\r\n        tag.uri = qn.prefix\r\n      }\r\n\r\n      var parent = parser.tags[parser.tags.length - 1] || parser\r\n      if (tag.ns && parent.ns !== tag.ns) {\r\n        Object.keys(tag.ns).forEach(function (p) {\r\n          emitNode(parser, 'onopennamespace', {\r\n            prefix: p,\r\n            uri: tag.ns[p]\r\n          })\r\n        })\r\n      }\r\n\r\n      // handle deferred onattribute events\r\n      // Note: do not apply default ns to attributes:\r\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\r\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\r\n        var nv = parser.attribList[i]\r\n        var name = nv[0]\r\n        var value = nv[1]\r\n        var qualName = qname(name, true)\r\n        var prefix = qualName.prefix\r\n        var local = qualName.local\r\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\r\n        var a = {\r\n          name: name,\r\n          value: value,\r\n          prefix: prefix,\r\n          local: local,\r\n          uri: uri\r\n        }\r\n\r\n        // if there's any attributes with an undefined namespace,\r\n        // then fail on them now.\r\n        if (prefix && prefix !== 'xmlns' && !uri) {\r\n          strictFail(parser, 'Unbound namespace prefix: ' +\r\n            JSON.stringify(prefix))\r\n          a.uri = prefix\r\n        }\r\n        parser.tag.attributes[name] = a\r\n        emitNode(parser, 'onattribute', a)\r\n      }\r\n      parser.attribList.length = 0\r\n    }\r\n\r\n    parser.tag.isSelfClosing = !!selfClosing\r\n\r\n    // process the tag\r\n    parser.sawRoot = true\r\n    parser.tags.push(parser.tag)\r\n    emitNode(parser, 'onopentag', parser.tag)\r\n    if (!selfClosing) {\r\n      // special case for <script> in non-strict mode.\r\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\r\n        parser.state = S.SCRIPT\r\n      } else {\r\n        parser.state = S.TEXT\r\n      }\r\n      parser.tag = null\r\n      parser.tagName = ''\r\n    }\r\n    parser.attribName = parser.attribValue = ''\r\n    parser.attribList.length = 0\r\n  }\r\n\r\n  function closeTag (parser) {\r\n    if (!parser.tagName) {\r\n      strictFail(parser, 'Weird empty close tag.')\r\n      parser.textNode += '</>'\r\n      parser.state = S.TEXT\r\n      return\r\n    }\r\n\r\n    if (parser.script) {\r\n      if (parser.tagName !== 'script') {\r\n        parser.script += '</' + parser.tagName + '>'\r\n        parser.tagName = ''\r\n        parser.state = S.SCRIPT\r\n        return\r\n      }\r\n      emitNode(parser, 'onscript', parser.script)\r\n      parser.script = ''\r\n    }\r\n\r\n    // first make sure that the closing tag actually exists.\r\n    // <a><b></c></b></a> will close everything, otherwise.\r\n    var t = parser.tags.length\r\n    var tagName = parser.tagName\r\n    if (!parser.strict) {\r\n      tagName = tagName[parser.looseCase]()\r\n    }\r\n    var closeTo = tagName\r\n    while (t--) {\r\n      var close = parser.tags[t]\r\n      if (close.name !== closeTo) {\r\n        // fail the first time in strict mode\r\n        strictFail(parser, 'Unexpected close tag')\r\n      } else {\r\n        break\r\n      }\r\n    }\r\n\r\n    // didn't find it.  we already failed for strict, so just abort.\r\n    if (t < 0) {\r\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\r\n      parser.textNode += '</' + parser.tagName + '>'\r\n      parser.state = S.TEXT\r\n      return\r\n    }\r\n    parser.tagName = tagName\r\n    var s = parser.tags.length\r\n    while (s-- > t) {\r\n      var tag = parser.tag = parser.tags.pop()\r\n      parser.tagName = parser.tag.name\r\n      emitNode(parser, 'onclosetag', parser.tagName)\r\n\r\n      var x = {}\r\n      for (var i in tag.ns) {\r\n        x[i] = tag.ns[i]\r\n      }\r\n\r\n      var parent = parser.tags[parser.tags.length - 1] || parser\r\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\r\n        // remove namespace bindings introduced by tag\r\n        Object.keys(tag.ns).forEach(function (p) {\r\n          var n = tag.ns[p]\r\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\r\n        })\r\n      }\r\n    }\r\n    if (t === 0) parser.closedRoot = true\r\n    parser.tagName = parser.attribValue = parser.attribName = ''\r\n    parser.attribList.length = 0\r\n    parser.state = S.TEXT\r\n  }\r\n\r\n  function parseEntity (parser) {\r\n    var entity = parser.entity\r\n    var entityLC = entity.toLowerCase()\r\n    var num\r\n    var numStr = ''\r\n\r\n    if (parser.ENTITIES[entity]) {\r\n      return parser.ENTITIES[entity]\r\n    }\r\n    if (parser.ENTITIES[entityLC]) {\r\n      return parser.ENTITIES[entityLC]\r\n    }\r\n    entity = entityLC\r\n    if (entity.charAt(0) === '#') {\r\n      if (entity.charAt(1) === 'x') {\r\n        entity = entity.slice(2)\r\n        num = parseInt(entity, 16)\r\n        numStr = num.toString(16)\r\n      } else {\r\n        entity = entity.slice(1)\r\n        num = parseInt(entity, 10)\r\n        numStr = num.toString(10)\r\n      }\r\n    }\r\n    entity = entity.replace(/^0+/, '')\r\n    if (isNaN(num) || numStr.toLowerCase() !== entity) {\r\n      strictFail(parser, 'Invalid character entity')\r\n      return '&' + parser.entity + ';'\r\n    }\r\n\r\n    return String.fromCodePoint(num)\r\n  }\r\n\r\n  function beginWhiteSpace (parser, c) {\r\n    if (c === '<') {\r\n      parser.state = S.OPEN_WAKA\r\n      parser.startTagPosition = parser.position\r\n    } else if (!isWhitespace(c)) {\r\n      // have to process this as a text node.\r\n      // weird, but happens.\r\n      strictFail(parser, 'Non-whitespace before first tag.')\r\n      parser.textNode = c\r\n      parser.state = S.TEXT\r\n    }\r\n  }\r\n\r\n  function charAt (chunk, i) {\r\n    var result = ''\r\n    if (i < chunk.length) {\r\n      result = chunk.charAt(i)\r\n    }\r\n    return result\r\n  }\r\n\r\n  function write (chunk) {\r\n    var parser = this\r\n    if (this.error) {\r\n      throw this.error\r\n    }\r\n    if (parser.closed) {\r\n      return error(parser,\r\n        'Cannot write after close. Assign an onready handler.')\r\n    }\r\n    if (chunk === null) {\r\n      return end(parser)\r\n    }\r\n    if (typeof chunk === 'object') {\r\n      chunk = chunk.toString()\r\n    }\r\n    var i = 0\r\n    var c = ''\r\n    while (true) {\r\n      c = charAt(chunk, i++)\r\n      parser.c = c\r\n\r\n      if (!c) {\r\n        break\r\n      }\r\n\r\n      if (parser.trackPosition) {\r\n        parser.position++\r\n        if (c === '\\n') {\r\n          parser.line++\r\n          parser.column = 0\r\n        } else {\r\n          parser.column++\r\n        }\r\n      }\r\n\r\n      switch (parser.state) {\r\n        case S.BEGIN:\r\n          parser.state = S.BEGIN_WHITESPACE\r\n          if (c === '\\uFEFF') {\r\n            continue\r\n          }\r\n          beginWhiteSpace(parser, c)\r\n          continue\r\n\r\n        case S.BEGIN_WHITESPACE:\r\n          beginWhiteSpace(parser, c)\r\n          continue\r\n\r\n        case S.TEXT:\r\n          if (parser.sawRoot && !parser.closedRoot) {\r\n            var starti = i - 1\r\n            while (c && c !== '<' && c !== '&') {\r\n              c = charAt(chunk, i++)\r\n              if (c && parser.trackPosition) {\r\n                parser.position++\r\n                if (c === '\\n') {\r\n                  parser.line++\r\n                  parser.column = 0\r\n                } else {\r\n                  parser.column++\r\n                }\r\n              }\r\n            }\r\n            parser.textNode += chunk.substring(starti, i - 1)\r\n          }\r\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\r\n            parser.state = S.OPEN_WAKA\r\n            parser.startTagPosition = parser.position\r\n          } else {\r\n            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\r\n              strictFail(parser, 'Text data outside of root node.')\r\n            }\r\n            if (c === '&') {\r\n              parser.state = S.TEXT_ENTITY\r\n            } else {\r\n              parser.textNode += c\r\n            }\r\n          }\r\n          continue\r\n\r\n        case S.SCRIPT:\r\n          // only non-strict\r\n          if (c === '<') {\r\n            parser.state = S.SCRIPT_ENDING\r\n          } else {\r\n            parser.script += c\r\n          }\r\n          continue\r\n\r\n        case S.SCRIPT_ENDING:\r\n          if (c === '/') {\r\n            parser.state = S.CLOSE_TAG\r\n          } else {\r\n            parser.script += '<' + c\r\n            parser.state = S.SCRIPT\r\n          }\r\n          continue\r\n\r\n        case S.OPEN_WAKA:\r\n          // either a /, ?, !, or text is coming next.\r\n          if (c === '!') {\r\n            parser.state = S.SGML_DECL\r\n            parser.sgmlDecl = ''\r\n          } else if (isWhitespace(c)) {\r\n            // wait for it...\r\n          } else if (isMatch(nameStart, c)) {\r\n            parser.state = S.OPEN_TAG\r\n            parser.tagName = c\r\n          } else if (c === '/') {\r\n            parser.state = S.CLOSE_TAG\r\n            parser.tagName = ''\r\n          } else if (c === '?') {\r\n            parser.state = S.PROC_INST\r\n            parser.procInstName = parser.procInstBody = ''\r\n          } else {\r\n            strictFail(parser, 'Unencoded <')\r\n            // if there was some whitespace, then add that in.\r\n            if (parser.startTagPosition + 1 < parser.position) {\r\n              var pad = parser.position - parser.startTagPosition\r\n              c = new Array(pad).join(' ') + c\r\n            }\r\n            parser.textNode += '<' + c\r\n            parser.state = S.TEXT\r\n          }\r\n          continue\r\n\r\n        case S.SGML_DECL:\r\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\r\n            emitNode(parser, 'onopencdata')\r\n            parser.state = S.CDATA\r\n            parser.sgmlDecl = ''\r\n            parser.cdata = ''\r\n          } else if (parser.sgmlDecl + c === '--') {\r\n            parser.state = S.COMMENT\r\n            parser.comment = ''\r\n            parser.sgmlDecl = ''\r\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\r\n            parser.state = S.DOCTYPE\r\n            if (parser.doctype || parser.sawRoot) {\r\n              strictFail(parser,\r\n                'Inappropriately located doctype declaration')\r\n            }\r\n            parser.doctype = ''\r\n            parser.sgmlDecl = ''\r\n          } else if (c === '>') {\r\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\r\n            parser.sgmlDecl = ''\r\n            parser.state = S.TEXT\r\n          } else if (isQuote(c)) {\r\n            parser.state = S.SGML_DECL_QUOTED\r\n            parser.sgmlDecl += c\r\n          } else {\r\n            parser.sgmlDecl += c\r\n          }\r\n          continue\r\n\r\n        case S.SGML_DECL_QUOTED:\r\n          if (c === parser.q) {\r\n            parser.state = S.SGML_DECL\r\n            parser.q = ''\r\n          }\r\n          parser.sgmlDecl += c\r\n          continue\r\n\r\n        case S.DOCTYPE:\r\n          if (c === '>') {\r\n            parser.state = S.TEXT\r\n            emitNode(parser, 'ondoctype', parser.doctype)\r\n            parser.doctype = true // just remember that we saw it.\r\n          } else {\r\n            parser.doctype += c\r\n            if (c === '[') {\r\n              parser.state = S.DOCTYPE_DTD\r\n            } else if (isQuote(c)) {\r\n              parser.state = S.DOCTYPE_QUOTED\r\n              parser.q = c\r\n            }\r\n          }\r\n          continue\r\n\r\n        case S.DOCTYPE_QUOTED:\r\n          parser.doctype += c\r\n          if (c === parser.q) {\r\n            parser.q = ''\r\n            parser.state = S.DOCTYPE\r\n          }\r\n          continue\r\n\r\n        case S.DOCTYPE_DTD:\r\n          parser.doctype += c\r\n          if (c === ']') {\r\n            parser.state = S.DOCTYPE\r\n          } else if (isQuote(c)) {\r\n            parser.state = S.DOCTYPE_DTD_QUOTED\r\n            parser.q = c\r\n          }\r\n          continue\r\n\r\n        case S.DOCTYPE_DTD_QUOTED:\r\n          parser.doctype += c\r\n          if (c === parser.q) {\r\n            parser.state = S.DOCTYPE_DTD\r\n            parser.q = ''\r\n          }\r\n          continue\r\n\r\n        case S.COMMENT:\r\n          if (c === '-') {\r\n            parser.state = S.COMMENT_ENDING\r\n          } else {\r\n            parser.comment += c\r\n          }\r\n          continue\r\n\r\n        case S.COMMENT_ENDING:\r\n          if (c === '-') {\r\n            parser.state = S.COMMENT_ENDED\r\n            parser.comment = textopts(parser.opt, parser.comment)\r\n            if (parser.comment) {\r\n              emitNode(parser, 'oncomment', parser.comment)\r\n            }\r\n            parser.comment = ''\r\n          } else {\r\n            parser.comment += '-' + c\r\n            parser.state = S.COMMENT\r\n          }\r\n          continue\r\n\r\n        case S.COMMENT_ENDED:\r\n          if (c !== '>') {\r\n            strictFail(parser, 'Malformed comment')\r\n            // allow <!-- blah -- bloo --> in non-strict mode,\r\n            // which is a comment of \" blah -- bloo \"\r\n            parser.comment += '--' + c\r\n            parser.state = S.COMMENT\r\n          } else {\r\n            parser.state = S.TEXT\r\n          }\r\n          continue\r\n\r\n        case S.CDATA:\r\n          if (c === ']') {\r\n            parser.state = S.CDATA_ENDING\r\n          } else {\r\n            parser.cdata += c\r\n          }\r\n          continue\r\n\r\n        case S.CDATA_ENDING:\r\n          if (c === ']') {\r\n            parser.state = S.CDATA_ENDING_2\r\n          } else {\r\n            parser.cdata += ']' + c\r\n            parser.state = S.CDATA\r\n          }\r\n          continue\r\n\r\n        case S.CDATA_ENDING_2:\r\n          if (c === '>') {\r\n            if (parser.cdata) {\r\n              emitNode(parser, 'oncdata', parser.cdata)\r\n            }\r\n            emitNode(parser, 'onclosecdata')\r\n            parser.cdata = ''\r\n            parser.state = S.TEXT\r\n          } else if (c === ']') {\r\n            parser.cdata += ']'\r\n          } else {\r\n            parser.cdata += ']]' + c\r\n            parser.state = S.CDATA\r\n          }\r\n          continue\r\n\r\n        case S.PROC_INST:\r\n          if (c === '?') {\r\n            parser.state = S.PROC_INST_ENDING\r\n          } else if (isWhitespace(c)) {\r\n            parser.state = S.PROC_INST_BODY\r\n          } else {\r\n            parser.procInstName += c\r\n          }\r\n          continue\r\n\r\n        case S.PROC_INST_BODY:\r\n          if (!parser.procInstBody && isWhitespace(c)) {\r\n            continue\r\n          } else if (c === '?') {\r\n            parser.state = S.PROC_INST_ENDING\r\n          } else {\r\n            parser.procInstBody += c\r\n          }\r\n          continue\r\n\r\n        case S.PROC_INST_ENDING:\r\n          if (c === '>') {\r\n            emitNode(parser, 'onprocessinginstruction', {\r\n              name: parser.procInstName,\r\n              body: parser.procInstBody\r\n            })\r\n            parser.procInstName = parser.procInstBody = ''\r\n            parser.state = S.TEXT\r\n          } else {\r\n            parser.procInstBody += '?' + c\r\n            parser.state = S.PROC_INST_BODY\r\n          }\r\n          continue\r\n\r\n        case S.OPEN_TAG:\r\n          if (isMatch(nameBody, c)) {\r\n            parser.tagName += c\r\n          } else {\r\n            newTag(parser)\r\n            if (c === '>') {\r\n              openTag(parser)\r\n            } else if (c === '/') {\r\n              parser.state = S.OPEN_TAG_SLASH\r\n            } else {\r\n              if (!isWhitespace(c)) {\r\n                strictFail(parser, 'Invalid character in tag name')\r\n              }\r\n              parser.state = S.ATTRIB\r\n            }\r\n          }\r\n          continue\r\n\r\n        case S.OPEN_TAG_SLASH:\r\n          if (c === '>') {\r\n            openTag(parser, true)\r\n            closeTag(parser)\r\n          } else {\r\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\r\n            parser.state = S.ATTRIB\r\n          }\r\n          continue\r\n\r\n        case S.ATTRIB:\r\n          // haven't read the attribute name yet.\r\n          if (isWhitespace(c)) {\r\n            continue\r\n          } else if (c === '>') {\r\n            openTag(parser)\r\n          } else if (c === '/') {\r\n            parser.state = S.OPEN_TAG_SLASH\r\n          } else if (isMatch(nameStart, c)) {\r\n            parser.attribName = c\r\n            parser.attribValue = ''\r\n            parser.state = S.ATTRIB_NAME\r\n          } else {\r\n            strictFail(parser, 'Invalid attribute name')\r\n          }\r\n          continue\r\n\r\n        case S.ATTRIB_NAME:\r\n          if (c === '=') {\r\n            parser.state = S.ATTRIB_VALUE\r\n          } else if (c === '>') {\r\n            strictFail(parser, 'Attribute without value')\r\n            parser.attribValue = parser.attribName\r\n            attrib(parser)\r\n            openTag(parser)\r\n          } else if (isWhitespace(c)) {\r\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\r\n          } else if (isMatch(nameBody, c)) {\r\n            parser.attribName += c\r\n          } else {\r\n            strictFail(parser, 'Invalid attribute name')\r\n          }\r\n          continue\r\n\r\n        case S.ATTRIB_NAME_SAW_WHITE:\r\n          if (c === '=') {\r\n            parser.state = S.ATTRIB_VALUE\r\n          } else if (isWhitespace(c)) {\r\n            continue\r\n          } else {\r\n            strictFail(parser, 'Attribute without value')\r\n            parser.tag.attributes[parser.attribName] = ''\r\n            parser.attribValue = ''\r\n            emitNode(parser, 'onattribute', {\r\n              name: parser.attribName,\r\n              value: ''\r\n            })\r\n            parser.attribName = ''\r\n            if (c === '>') {\r\n              openTag(parser)\r\n            } else if (isMatch(nameStart, c)) {\r\n              parser.attribName = c\r\n              parser.state = S.ATTRIB_NAME\r\n            } else {\r\n              strictFail(parser, 'Invalid attribute name')\r\n              parser.state = S.ATTRIB\r\n            }\r\n          }\r\n          continue\r\n\r\n        case S.ATTRIB_VALUE:\r\n          if (isWhitespace(c)) {\r\n            continue\r\n          } else if (isQuote(c)) {\r\n            parser.q = c\r\n            parser.state = S.ATTRIB_VALUE_QUOTED\r\n          } else {\r\n            strictFail(parser, 'Unquoted attribute value')\r\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\r\n            parser.attribValue = c\r\n          }\r\n          continue\r\n\r\n        case S.ATTRIB_VALUE_QUOTED:\r\n          if (c !== parser.q) {\r\n            if (c === '&') {\r\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\r\n            } else {\r\n              parser.attribValue += c\r\n            }\r\n            continue\r\n          }\r\n          attrib(parser)\r\n          parser.q = ''\r\n          parser.state = S.ATTRIB_VALUE_CLOSED\r\n          continue\r\n\r\n        case S.ATTRIB_VALUE_CLOSED:\r\n          if (isWhitespace(c)) {\r\n            parser.state = S.ATTRIB\r\n          } else if (c === '>') {\r\n            openTag(parser)\r\n          } else if (c === '/') {\r\n            parser.state = S.OPEN_TAG_SLASH\r\n          } else if (isMatch(nameStart, c)) {\r\n            strictFail(parser, 'No whitespace between attributes')\r\n            parser.attribName = c\r\n            parser.attribValue = ''\r\n            parser.state = S.ATTRIB_NAME\r\n          } else {\r\n            strictFail(parser, 'Invalid attribute name')\r\n          }\r\n          continue\r\n\r\n        case S.ATTRIB_VALUE_UNQUOTED:\r\n          if (!isAttribEnd(c)) {\r\n            if (c === '&') {\r\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\r\n            } else {\r\n              parser.attribValue += c\r\n            }\r\n            continue\r\n          }\r\n          attrib(parser)\r\n          if (c === '>') {\r\n            openTag(parser)\r\n          } else {\r\n            parser.state = S.ATTRIB\r\n          }\r\n          continue\r\n\r\n        case S.CLOSE_TAG:\r\n          if (!parser.tagName) {\r\n            if (isWhitespace(c)) {\r\n              continue\r\n            } else if (notMatch(nameStart, c)) {\r\n              if (parser.script) {\r\n                parser.script += '</' + c\r\n                parser.state = S.SCRIPT\r\n              } else {\r\n                strictFail(parser, 'Invalid tagname in closing tag.')\r\n              }\r\n            } else {\r\n              parser.tagName = c\r\n            }\r\n          } else if (c === '>') {\r\n            closeTag(parser)\r\n          } else if (isMatch(nameBody, c)) {\r\n            parser.tagName += c\r\n          } else if (parser.script) {\r\n            parser.script += '</' + parser.tagName\r\n            parser.tagName = ''\r\n            parser.state = S.SCRIPT\r\n          } else {\r\n            if (!isWhitespace(c)) {\r\n              strictFail(parser, 'Invalid tagname in closing tag')\r\n            }\r\n            parser.state = S.CLOSE_TAG_SAW_WHITE\r\n          }\r\n          continue\r\n\r\n        case S.CLOSE_TAG_SAW_WHITE:\r\n          if (isWhitespace(c)) {\r\n            continue\r\n          }\r\n          if (c === '>') {\r\n            closeTag(parser)\r\n          } else {\r\n            strictFail(parser, 'Invalid characters in closing tag')\r\n          }\r\n          continue\r\n\r\n        case S.TEXT_ENTITY:\r\n        case S.ATTRIB_VALUE_ENTITY_Q:\r\n        case S.ATTRIB_VALUE_ENTITY_U:\r\n          var returnState\r\n          var buffer\r\n          switch (parser.state) {\r\n            case S.TEXT_ENTITY:\r\n              returnState = S.TEXT\r\n              buffer = 'textNode'\r\n              break\r\n\r\n            case S.ATTRIB_VALUE_ENTITY_Q:\r\n              returnState = S.ATTRIB_VALUE_QUOTED\r\n              buffer = 'attribValue'\r\n              break\r\n\r\n            case S.ATTRIB_VALUE_ENTITY_U:\r\n              returnState = S.ATTRIB_VALUE_UNQUOTED\r\n              buffer = 'attribValue'\r\n              break\r\n          }\r\n\r\n          if (c === ';') {\r\n            parser[buffer] += parseEntity(parser)\r\n            parser.entity = ''\r\n            parser.state = returnState\r\n          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\r\n            parser.entity += c\r\n          } else {\r\n            strictFail(parser, 'Invalid character in entity name')\r\n            parser[buffer] += '&' + parser.entity + c\r\n            parser.entity = ''\r\n            parser.state = returnState\r\n          }\r\n\r\n          continue\r\n\r\n        default:\r\n          throw new Error(parser, 'Unknown state: ' + parser.state)\r\n      }\r\n    } // while\r\n\r\n    if (parser.position >= parser.bufferCheckPosition) {\r\n      checkBufferLength(parser)\r\n    }\r\n    return parser\r\n  }\r\n\r\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\r\n  /* istanbul ignore next */\r\n  if (!String.fromCodePoint) {\r\n    (function () {\r\n      var stringFromCharCode = String.fromCharCode\r\n      var floor = Math.floor\r\n      var fromCodePoint = function () {\r\n        var MAX_SIZE = 0x4000\r\n        var codeUnits = []\r\n        var highSurrogate\r\n        var lowSurrogate\r\n        var index = -1\r\n        var length = arguments.length\r\n        if (!length) {\r\n          return ''\r\n        }\r\n        var result = ''\r\n        while (++index < length) {\r\n          var codePoint = Number(arguments[index])\r\n          if (\r\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\r\n            codePoint < 0 || // not a valid Unicode code point\r\n            codePoint > 0x10FFFF || // not a valid Unicode code point\r\n            floor(codePoint) !== codePoint // not an integer\r\n          ) {\r\n            throw RangeError('Invalid code point: ' + codePoint)\r\n          }\r\n          if (codePoint <= 0xFFFF) { // BMP code point\r\n            codeUnits.push(codePoint)\r\n          } else { // Astral code point; split in surrogate halves\r\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\r\n            codePoint -= 0x10000\r\n            highSurrogate = (codePoint >> 10) + 0xD800\r\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\r\n            codeUnits.push(highSurrogate, lowSurrogate)\r\n          }\r\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\r\n            result += stringFromCharCode.apply(null, codeUnits)\r\n            codeUnits.length = 0\r\n          }\r\n        }\r\n        return result\r\n      }\r\n      /* istanbul ignore next */\r\n      if (Object.defineProperty) {\r\n        Object.defineProperty(String, 'fromCodePoint', {\r\n          value: fromCodePoint,\r\n          configurable: true,\r\n          writable: true\r\n        })\r\n      } else {\r\n        String.fromCodePoint = fromCodePoint\r\n      }\r\n    }())\r\n  }\r\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\r\n\r\n}).call(this,require(\"buffer\").Buffer)\r\n\r\n},{\"buffer\":41,\"stream\":112,\"string_decoder\":113}],112:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nmodule.exports = Stream;\r\n\r\nvar EE = require('events').EventEmitter;\r\nvar inherits = require('inherits');\r\n\r\ninherits(Stream, EE);\r\nStream.Readable = require('readable-stream/readable.js');\r\nStream.Writable = require('readable-stream/writable.js');\r\nStream.Duplex = require('readable-stream/duplex.js');\r\nStream.Transform = require('readable-stream/transform.js');\r\nStream.PassThrough = require('readable-stream/passthrough.js');\r\n\r\n// Backwards-compat with node 0.4.x\r\nStream.Stream = Stream;\r\n\r\n\r\n\r\n// old-style streams.  Note that the pipe method (the only relevant\r\n// part of this class) is overridden in the Readable class.\r\n\r\nfunction Stream() {\r\n  EE.call(this);\r\n}\r\n\r\nStream.prototype.pipe = function(dest, options) {\r\n  var source = this;\r\n\r\n  function ondata(chunk) {\r\n    if (dest.writable) {\r\n      if (false === dest.write(chunk) && source.pause) {\r\n        source.pause();\r\n      }\r\n    }\r\n  }\r\n\r\n  source.on('data', ondata);\r\n\r\n  function ondrain() {\r\n    if (source.readable && source.resume) {\r\n      source.resume();\r\n    }\r\n  }\r\n\r\n  dest.on('drain', ondrain);\r\n\r\n  // If the 'end' option is not supplied, dest.end() will be called when\r\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\r\n  if (!dest._isStdio && (!options || options.end !== false)) {\r\n    source.on('end', onend);\r\n    source.on('close', onclose);\r\n  }\r\n\r\n  var didOnEnd = false;\r\n  function onend() {\r\n    if (didOnEnd) return;\r\n    didOnEnd = true;\r\n\r\n    dest.end();\r\n  }\r\n\r\n\r\n  function onclose() {\r\n    if (didOnEnd) return;\r\n    didOnEnd = true;\r\n\r\n    if (typeof dest.destroy === 'function') dest.destroy();\r\n  }\r\n\r\n  // don't leave dangling pipes when there are errors.\r\n  function onerror(er) {\r\n    cleanup();\r\n    if (EE.listenerCount(this, 'error') === 0) {\r\n      throw er; // Unhandled stream error in pipe.\r\n    }\r\n  }\r\n\r\n  source.on('error', onerror);\r\n  dest.on('error', onerror);\r\n\r\n  // remove all the event listeners that were added.\r\n  function cleanup() {\r\n    source.removeListener('data', ondata);\r\n    dest.removeListener('drain', ondrain);\r\n\r\n    source.removeListener('end', onend);\r\n    source.removeListener('close', onclose);\r\n\r\n    source.removeListener('error', onerror);\r\n    dest.removeListener('error', onerror);\r\n\r\n    source.removeListener('end', cleanup);\r\n    source.removeListener('close', cleanup);\r\n\r\n    dest.removeListener('close', cleanup);\r\n  }\r\n\r\n  source.on('end', cleanup);\r\n  source.on('close', cleanup);\r\n\r\n  dest.on('close', cleanup);\r\n\r\n  dest.emit('pipe', source);\r\n\r\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\r\n  return dest;\r\n};\r\n\r\n},{\"events\":47,\"inherits\":84,\"readable-stream/duplex.js\":97,\"readable-stream/passthrough.js\":106,\"readable-stream/readable.js\":107,\"readable-stream/transform.js\":108,\"readable-stream/writable.js\":109}],113:[function(require,module,exports){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n'use strict';\r\n\r\n/*<replacement>*/\r\n\r\nvar Buffer = require('safe-buffer').Buffer;\r\n/*</replacement>*/\r\n\r\nvar isEncoding = Buffer.isEncoding || function (encoding) {\r\n  encoding = '' + encoding;\r\n  switch (encoding && encoding.toLowerCase()) {\r\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\nfunction _normalizeEncoding(enc) {\r\n  if (!enc) return 'utf8';\r\n  var retried;\r\n  while (true) {\r\n    switch (enc) {\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return 'utf8';\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return 'utf16le';\r\n      case 'latin1':\r\n      case 'binary':\r\n        return 'latin1';\r\n      case 'base64':\r\n      case 'ascii':\r\n      case 'hex':\r\n        return enc;\r\n      default:\r\n        if (retried) return; // undefined\r\n        enc = ('' + enc).toLowerCase();\r\n        retried = true;\r\n    }\r\n  }\r\n};\r\n\r\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\r\n// modules monkey-patch it to support additional encodings\r\nfunction normalizeEncoding(enc) {\r\n  var nenc = _normalizeEncoding(enc);\r\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\r\n  return nenc || enc;\r\n}\r\n\r\n// StringDecoder provides an interface for efficiently splitting a series of\r\n// buffers into a series of JS strings without breaking apart multi-byte\r\n// characters.\r\nexports.StringDecoder = StringDecoder;\r\nfunction StringDecoder(encoding) {\r\n  this.encoding = normalizeEncoding(encoding);\r\n  var nb;\r\n  switch (this.encoding) {\r\n    case 'utf16le':\r\n      this.text = utf16Text;\r\n      this.end = utf16End;\r\n      nb = 4;\r\n      break;\r\n    case 'utf8':\r\n      this.fillLast = utf8FillLast;\r\n      nb = 4;\r\n      break;\r\n    case 'base64':\r\n      this.text = base64Text;\r\n      this.end = base64End;\r\n      nb = 3;\r\n      break;\r\n    default:\r\n      this.write = simpleWrite;\r\n      this.end = simpleEnd;\r\n      return;\r\n  }\r\n  this.lastNeed = 0;\r\n  this.lastTotal = 0;\r\n  this.lastChar = Buffer.allocUnsafe(nb);\r\n}\r\n\r\nStringDecoder.prototype.write = function (buf) {\r\n  if (buf.length === 0) return '';\r\n  var r;\r\n  var i;\r\n  if (this.lastNeed) {\r\n    r = this.fillLast(buf);\r\n    if (r === undefined) return '';\r\n    i = this.lastNeed;\r\n    this.lastNeed = 0;\r\n  } else {\r\n    i = 0;\r\n  }\r\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\r\n  return r || '';\r\n};\r\n\r\nStringDecoder.prototype.end = utf8End;\r\n\r\n// Returns only complete characters in a Buffer\r\nStringDecoder.prototype.text = utf8Text;\r\n\r\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\r\nStringDecoder.prototype.fillLast = function (buf) {\r\n  if (this.lastNeed <= buf.length) {\r\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\r\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\r\n  }\r\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\r\n  this.lastNeed -= buf.length;\r\n};\r\n\r\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\r\n// continuation byte. If an invalid byte is detected, -2 is returned.\r\nfunction utf8CheckByte(byte) {\r\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\r\n  return byte >> 6 === 0x02 ? -1 : -2;\r\n}\r\n\r\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\r\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\r\n// needed to complete the UTF-8 character (if applicable) are returned.\r\nfunction utf8CheckIncomplete(self, buf, i) {\r\n  var j = buf.length - 1;\r\n  if (j < i) return 0;\r\n  var nb = utf8CheckByte(buf[j]);\r\n  if (nb >= 0) {\r\n    if (nb > 0) self.lastNeed = nb - 1;\r\n    return nb;\r\n  }\r\n  if (--j < i || nb === -2) return 0;\r\n  nb = utf8CheckByte(buf[j]);\r\n  if (nb >= 0) {\r\n    if (nb > 0) self.lastNeed = nb - 2;\r\n    return nb;\r\n  }\r\n  if (--j < i || nb === -2) return 0;\r\n  nb = utf8CheckByte(buf[j]);\r\n  if (nb >= 0) {\r\n    if (nb > 0) {\r\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\r\n    }\r\n    return nb;\r\n  }\r\n  return 0;\r\n}\r\n\r\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\r\n// needed or are available. If we see a non-continuation byte where we expect\r\n// one, we \"replace\" the validated continuation bytes we've seen so far with\r\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\r\n// behavior. The continuation byte check is included three times in the case\r\n// where all of the continuation bytes for a character exist in the same buffer.\r\n// It is also done this way as a slight performance increase instead of using a\r\n// loop.\r\nfunction utf8CheckExtraBytes(self, buf, p) {\r\n  if ((buf[0] & 0xC0) !== 0x80) {\r\n    self.lastNeed = 0;\r\n    return '\\ufffd';\r\n  }\r\n  if (self.lastNeed > 1 && buf.length > 1) {\r\n    if ((buf[1] & 0xC0) !== 0x80) {\r\n      self.lastNeed = 1;\r\n      return '\\ufffd';\r\n    }\r\n    if (self.lastNeed > 2 && buf.length > 2) {\r\n      if ((buf[2] & 0xC0) !== 0x80) {\r\n        self.lastNeed = 2;\r\n        return '\\ufffd';\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\r\nfunction utf8FillLast(buf) {\r\n  var p = this.lastTotal - this.lastNeed;\r\n  var r = utf8CheckExtraBytes(this, buf, p);\r\n  if (r !== undefined) return r;\r\n  if (this.lastNeed <= buf.length) {\r\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\r\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\r\n  }\r\n  buf.copy(this.lastChar, p, 0, buf.length);\r\n  this.lastNeed -= buf.length;\r\n}\r\n\r\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\r\n// partial character, the character's bytes are buffered until the required\r\n// number of bytes are available.\r\nfunction utf8Text(buf, i) {\r\n  var total = utf8CheckIncomplete(this, buf, i);\r\n  if (!this.lastNeed) return buf.toString('utf8', i);\r\n  this.lastTotal = total;\r\n  var end = buf.length - (total - this.lastNeed);\r\n  buf.copy(this.lastChar, 0, end);\r\n  return buf.toString('utf8', i, end);\r\n}\r\n\r\n// For UTF-8, a replacement character is added when ending on a partial\r\n// character.\r\nfunction utf8End(buf) {\r\n  var r = buf && buf.length ? this.write(buf) : '';\r\n  if (this.lastNeed) return r + '\\ufffd';\r\n  return r;\r\n}\r\n\r\n// UTF-16LE typically needs two bytes per character, but even if we have an even\r\n// number of bytes available, we need to check if we end on a leading/high\r\n// surrogate. In that case, we need to wait for the next two bytes in order to\r\n// decode the last character properly.\r\nfunction utf16Text(buf, i) {\r\n  if ((buf.length - i) % 2 === 0) {\r\n    var r = buf.toString('utf16le', i);\r\n    if (r) {\r\n      var c = r.charCodeAt(r.length - 1);\r\n      if (c >= 0xD800 && c <= 0xDBFF) {\r\n        this.lastNeed = 2;\r\n        this.lastTotal = 4;\r\n        this.lastChar[0] = buf[buf.length - 2];\r\n        this.lastChar[1] = buf[buf.length - 1];\r\n        return r.slice(0, -1);\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n  this.lastNeed = 1;\r\n  this.lastTotal = 2;\r\n  this.lastChar[0] = buf[buf.length - 1];\r\n  return buf.toString('utf16le', i, buf.length - 1);\r\n}\r\n\r\n// For UTF-16LE we do not explicitly append special replacement characters if we\r\n// end on a partial character, we simply let v8 handle that.\r\nfunction utf16End(buf) {\r\n  var r = buf && buf.length ? this.write(buf) : '';\r\n  if (this.lastNeed) {\r\n    var end = this.lastTotal - this.lastNeed;\r\n    return r + this.lastChar.toString('utf16le', 0, end);\r\n  }\r\n  return r;\r\n}\r\n\r\nfunction base64Text(buf, i) {\r\n  var n = (buf.length - i) % 3;\r\n  if (n === 0) return buf.toString('base64', i);\r\n  this.lastNeed = 3 - n;\r\n  this.lastTotal = 3;\r\n  if (n === 1) {\r\n    this.lastChar[0] = buf[buf.length - 1];\r\n  } else {\r\n    this.lastChar[0] = buf[buf.length - 2];\r\n    this.lastChar[1] = buf[buf.length - 1];\r\n  }\r\n  return buf.toString('base64', i, buf.length - n);\r\n}\r\n\r\nfunction base64End(buf) {\r\n  var r = buf && buf.length ? this.write(buf) : '';\r\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\r\n  return r;\r\n}\r\n\r\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\r\nfunction simpleWrite(buf) {\r\n  return buf.toString(this.encoding);\r\n}\r\n\r\nfunction simpleEnd(buf) {\r\n  return buf && buf.length ? this.write(buf) : '';\r\n}\r\n},{\"safe-buffer\":110}],114:[function(require,module,exports){\r\n(function (setImmediate,clearImmediate){\r\nvar nextTick = require('process/browser.js').nextTick;\r\nvar apply = Function.prototype.apply;\r\nvar slice = Array.prototype.slice;\r\nvar immediateIds = {};\r\nvar nextImmediateId = 0;\r\n\r\n// DOM APIs, for completeness\r\n\r\nexports.setTimeout = function() {\r\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\r\n};\r\nexports.setInterval = function() {\r\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\r\n};\r\nexports.clearTimeout =\r\nexports.clearInterval = function(timeout) { timeout.close(); };\r\n\r\nfunction Timeout(id, clearFn) {\r\n  this._id = id;\r\n  this._clearFn = clearFn;\r\n}\r\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\r\nTimeout.prototype.close = function() {\r\n  this._clearFn.call(window, this._id);\r\n};\r\n\r\n// Does not start the time, just sets up the members needed.\r\nexports.enroll = function(item, msecs) {\r\n  clearTimeout(item._idleTimeoutId);\r\n  item._idleTimeout = msecs;\r\n};\r\n\r\nexports.unenroll = function(item) {\r\n  clearTimeout(item._idleTimeoutId);\r\n  item._idleTimeout = -1;\r\n};\r\n\r\nexports._unrefActive = exports.active = function(item) {\r\n  clearTimeout(item._idleTimeoutId);\r\n\r\n  var msecs = item._idleTimeout;\r\n  if (msecs >= 0) {\r\n    item._idleTimeoutId = setTimeout(function onTimeout() {\r\n      if (item._onTimeout)\r\n        item._onTimeout();\r\n    }, msecs);\r\n  }\r\n};\r\n\r\n// That's not how node.js implements it but the exposed api is the same.\r\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\r\n  var id = nextImmediateId++;\r\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\r\n\r\n  immediateIds[id] = true;\r\n\r\n  nextTick(function onNextTick() {\r\n    if (immediateIds[id]) {\r\n      // fn.call() is faster so we optimize for the common use-case\r\n      // @see http://jsperf.com/call-apply-segu\r\n      if (args) {\r\n        fn.apply(null, args);\r\n      } else {\r\n        fn.call(null);\r\n      }\r\n      // Prevent ids from leaking\r\n      exports.clearImmediate(id);\r\n    }\r\n  });\r\n\r\n  return id;\r\n};\r\n\r\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\r\n  delete immediateIds[id];\r\n};\r\n}).call(this,require(\"timers\").setImmediate,require(\"timers\").clearImmediate)\r\n\r\n},{\"process/browser.js\":91,\"timers\":114}],115:[function(require,module,exports){\r\n(function (global){\r\n\r\n/**\r\n * Module exports.\r\n */\r\n\r\nmodule.exports = deprecate;\r\n\r\n/**\r\n * Mark that a method should not be used.\r\n * Returns a modified function which warns once by default.\r\n *\r\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\r\n *\r\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\r\n * will throw an Error when invoked.\r\n *\r\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\r\n * will invoke `console.trace()` instead of `console.error()`.\r\n *\r\n * @param {Function} fn - the function to deprecate\r\n * @param {String} msg - the string to print to the console when `fn` is invoked\r\n * @returns {Function} a new \"deprecated\" version of `fn`\r\n * @api public\r\n */\r\n\r\nfunction deprecate (fn, msg) {\r\n  if (config('noDeprecation')) {\r\n    return fn;\r\n  }\r\n\r\n  var warned = false;\r\n  function deprecated() {\r\n    if (!warned) {\r\n      if (config('throwDeprecation')) {\r\n        throw new Error(msg);\r\n      } else if (config('traceDeprecation')) {\r\n        console.trace(msg);\r\n      } else {\r\n        console.warn(msg);\r\n      }\r\n      warned = true;\r\n    }\r\n    return fn.apply(this, arguments);\r\n  }\r\n\r\n  return deprecated;\r\n}\r\n\r\n/**\r\n * Checks `localStorage` for boolean values for the given `name`.\r\n *\r\n * @param {String} name\r\n * @returns {Boolean}\r\n * @api private\r\n */\r\n\r\nfunction config (name) {\r\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\r\n  try {\r\n    if (!global.localStorage) return false;\r\n  } catch (_) {\r\n    return false;\r\n  }\r\n  var val = global.localStorage[name];\r\n  if (null == val) return false;\r\n  return String(val).toLowerCase() === 'true';\r\n}\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{}],116:[function(require,module,exports){\r\nmodule.exports = function isBuffer(arg) {\r\n  return arg && typeof arg === 'object'\r\n    && typeof arg.copy === 'function'\r\n    && typeof arg.fill === 'function'\r\n    && typeof arg.readUInt8 === 'function';\r\n}\r\n},{}],117:[function(require,module,exports){\r\n(function (process,global){\r\n// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\nvar formatRegExp = /%[sdj%]/g;\r\nexports.format = function(f) {\r\n  if (!isString(f)) {\r\n    var objects = [];\r\n    for (var i = 0; i < arguments.length; i++) {\r\n      objects.push(inspect(arguments[i]));\r\n    }\r\n    return objects.join(' ');\r\n  }\r\n\r\n  var i = 1;\r\n  var args = arguments;\r\n  var len = args.length;\r\n  var str = String(f).replace(formatRegExp, function(x) {\r\n    if (x === '%%') return '%';\r\n    if (i >= len) return x;\r\n    switch (x) {\r\n      case '%s': return String(args[i++]);\r\n      case '%d': return Number(args[i++]);\r\n      case '%j':\r\n        try {\r\n          return JSON.stringify(args[i++]);\r\n        } catch (_) {\r\n          return '[Circular]';\r\n        }\r\n      default:\r\n        return x;\r\n    }\r\n  });\r\n  for (var x = args[i]; i < len; x = args[++i]) {\r\n    if (isNull(x) || !isObject(x)) {\r\n      str += ' ' + x;\r\n    } else {\r\n      str += ' ' + inspect(x);\r\n    }\r\n  }\r\n  return str;\r\n};\r\n\r\n\r\n// Mark that a method should not be used.\r\n// Returns a modified function which warns once by default.\r\n// If --no-deprecation is set, then it is a no-op.\r\nexports.deprecate = function(fn, msg) {\r\n  // Allow for deprecating things in the process of starting up.\r\n  if (isUndefined(global.process)) {\r\n    return function() {\r\n      return exports.deprecate(fn, msg).apply(this, arguments);\r\n    };\r\n  }\r\n\r\n  if (process.noDeprecation === true) {\r\n    return fn;\r\n  }\r\n\r\n  var warned = false;\r\n  function deprecated() {\r\n    if (!warned) {\r\n      if (process.throwDeprecation) {\r\n        throw new Error(msg);\r\n      } else if (process.traceDeprecation) {\r\n        console.trace(msg);\r\n      } else {\r\n        console.error(msg);\r\n      }\r\n      warned = true;\r\n    }\r\n    return fn.apply(this, arguments);\r\n  }\r\n\r\n  return deprecated;\r\n};\r\n\r\n\r\nvar debugs = {};\r\nvar debugEnviron;\r\nexports.debuglog = function(set) {\r\n  if (isUndefined(debugEnviron))\r\n    debugEnviron = process.env.NODE_DEBUG || '';\r\n  set = set.toUpperCase();\r\n  if (!debugs[set]) {\r\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\r\n      var pid = process.pid;\r\n      debugs[set] = function() {\r\n        var msg = exports.format.apply(exports, arguments);\r\n        console.error('%s %d: %s', set, pid, msg);\r\n      };\r\n    } else {\r\n      debugs[set] = function() {};\r\n    }\r\n  }\r\n  return debugs[set];\r\n};\r\n\r\n\r\n/**\r\n * Echos the value of a value. Trys to print the value out\r\n * in the best way possible given the different types.\r\n *\r\n * @param {Object} obj The object to print out.\r\n * @param {Object} opts Optional options object that alters the output.\r\n */\r\n/* legacy: obj, showHidden, depth, colors*/\r\nfunction inspect(obj, opts) {\r\n  // default options\r\n  var ctx = {\r\n    seen: [],\r\n    stylize: stylizeNoColor\r\n  };\r\n  // legacy...\r\n  if (arguments.length >= 3) ctx.depth = arguments[2];\r\n  if (arguments.length >= 4) ctx.colors = arguments[3];\r\n  if (isBoolean(opts)) {\r\n    // legacy...\r\n    ctx.showHidden = opts;\r\n  } else if (opts) {\r\n    // got an \"options\" object\r\n    exports._extend(ctx, opts);\r\n  }\r\n  // set default options\r\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\r\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\r\n  if (isUndefined(ctx.colors)) ctx.colors = false;\r\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\r\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\r\n  return formatValue(ctx, obj, ctx.depth);\r\n}\r\nexports.inspect = inspect;\r\n\r\n\r\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\r\ninspect.colors = {\r\n  'bold' : [1, 22],\r\n  'italic' : [3, 23],\r\n  'underline' : [4, 24],\r\n  'inverse' : [7, 27],\r\n  'white' : [37, 39],\r\n  'grey' : [90, 39],\r\n  'black' : [30, 39],\r\n  'blue' : [34, 39],\r\n  'cyan' : [36, 39],\r\n  'green' : [32, 39],\r\n  'magenta' : [35, 39],\r\n  'red' : [31, 39],\r\n  'yellow' : [33, 39]\r\n};\r\n\r\n// Don't use 'blue' not visible on cmd.exe\r\ninspect.styles = {\r\n  'special': 'cyan',\r\n  'number': 'yellow',\r\n  'boolean': 'yellow',\r\n  'undefined': 'grey',\r\n  'null': 'bold',\r\n  'string': 'green',\r\n  'date': 'magenta',\r\n  // \"name\": intentionally not styling\r\n  'regexp': 'red'\r\n};\r\n\r\n\r\nfunction stylizeWithColor(str, styleType) {\r\n  var style = inspect.styles[styleType];\r\n\r\n  if (style) {\r\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\r\n           '\\u001b[' + inspect.colors[style][1] + 'm';\r\n  } else {\r\n    return str;\r\n  }\r\n}\r\n\r\n\r\nfunction stylizeNoColor(str, styleType) {\r\n  return str;\r\n}\r\n\r\n\r\nfunction arrayToHash(array) {\r\n  var hash = {};\r\n\r\n  array.forEach(function(val, idx) {\r\n    hash[val] = true;\r\n  });\r\n\r\n  return hash;\r\n}\r\n\r\n\r\nfunction formatValue(ctx, value, recurseTimes) {\r\n  // Provide a hook for user-specified inspect functions.\r\n  // Check that value is an object with an inspect function on it\r\n  if (ctx.customInspect &&\r\n      value &&\r\n      isFunction(value.inspect) &&\r\n      // Filter out the util module, it's inspect function is special\r\n      value.inspect !== exports.inspect &&\r\n      // Also filter out any prototype objects using the circular check.\r\n      !(value.constructor && value.constructor.prototype === value)) {\r\n    var ret = value.inspect(recurseTimes, ctx);\r\n    if (!isString(ret)) {\r\n      ret = formatValue(ctx, ret, recurseTimes);\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  // Primitive types cannot have properties\r\n  var primitive = formatPrimitive(ctx, value);\r\n  if (primitive) {\r\n    return primitive;\r\n  }\r\n\r\n  // Look up the keys of the object.\r\n  var keys = Object.keys(value);\r\n  var visibleKeys = arrayToHash(keys);\r\n\r\n  if (ctx.showHidden) {\r\n    keys = Object.getOwnPropertyNames(value);\r\n  }\r\n\r\n  // IE doesn't make error fields non-enumerable\r\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\r\n  if (isError(value)\r\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\r\n    return formatError(value);\r\n  }\r\n\r\n  // Some type of object without properties can be shortcutted.\r\n  if (keys.length === 0) {\r\n    if (isFunction(value)) {\r\n      var name = value.name ? ': ' + value.name : '';\r\n      return ctx.stylize('[Function' + name + ']', 'special');\r\n    }\r\n    if (isRegExp(value)) {\r\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\r\n    }\r\n    if (isDate(value)) {\r\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\r\n    }\r\n    if (isError(value)) {\r\n      return formatError(value);\r\n    }\r\n  }\r\n\r\n  var base = '', array = false, braces = ['{', '}'];\r\n\r\n  // Make Array say that they are Array\r\n  if (isArray(value)) {\r\n    array = true;\r\n    braces = ['[', ']'];\r\n  }\r\n\r\n  // Make functions say that they are functions\r\n  if (isFunction(value)) {\r\n    var n = value.name ? ': ' + value.name : '';\r\n    base = ' [Function' + n + ']';\r\n  }\r\n\r\n  // Make RegExps say that they are RegExps\r\n  if (isRegExp(value)) {\r\n    base = ' ' + RegExp.prototype.toString.call(value);\r\n  }\r\n\r\n  // Make dates with properties first say the date\r\n  if (isDate(value)) {\r\n    base = ' ' + Date.prototype.toUTCString.call(value);\r\n  }\r\n\r\n  // Make error with message first say the error\r\n  if (isError(value)) {\r\n    base = ' ' + formatError(value);\r\n  }\r\n\r\n  if (keys.length === 0 && (!array || value.length == 0)) {\r\n    return braces[0] + base + braces[1];\r\n  }\r\n\r\n  if (recurseTimes < 0) {\r\n    if (isRegExp(value)) {\r\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\r\n    } else {\r\n      return ctx.stylize('[Object]', 'special');\r\n    }\r\n  }\r\n\r\n  ctx.seen.push(value);\r\n\r\n  var output;\r\n  if (array) {\r\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\r\n  } else {\r\n    output = keys.map(function(key) {\r\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\r\n    });\r\n  }\r\n\r\n  ctx.seen.pop();\r\n\r\n  return reduceToSingleString(output, base, braces);\r\n}\r\n\r\n\r\nfunction formatPrimitive(ctx, value) {\r\n  if (isUndefined(value))\r\n    return ctx.stylize('undefined', 'undefined');\r\n  if (isString(value)) {\r\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\r\n                                             .replace(/'/g, \"\\\\'\")\r\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\r\n    return ctx.stylize(simple, 'string');\r\n  }\r\n  if (isNumber(value))\r\n    return ctx.stylize('' + value, 'number');\r\n  if (isBoolean(value))\r\n    return ctx.stylize('' + value, 'boolean');\r\n  // For some reason typeof null is \"object\", so special case here.\r\n  if (isNull(value))\r\n    return ctx.stylize('null', 'null');\r\n}\r\n\r\n\r\nfunction formatError(value) {\r\n  return '[' + Error.prototype.toString.call(value) + ']';\r\n}\r\n\r\n\r\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\r\n  var output = [];\r\n  for (var i = 0, l = value.length; i < l; ++i) {\r\n    if (hasOwnProperty(value, String(i))) {\r\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\r\n          String(i), true));\r\n    } else {\r\n      output.push('');\r\n    }\r\n  }\r\n  keys.forEach(function(key) {\r\n    if (!key.match(/^\\d+$/)) {\r\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\r\n          key, true));\r\n    }\r\n  });\r\n  return output;\r\n}\r\n\r\n\r\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\r\n  var name, str, desc;\r\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\r\n  if (desc.get) {\r\n    if (desc.set) {\r\n      str = ctx.stylize('[Getter/Setter]', 'special');\r\n    } else {\r\n      str = ctx.stylize('[Getter]', 'special');\r\n    }\r\n  } else {\r\n    if (desc.set) {\r\n      str = ctx.stylize('[Setter]', 'special');\r\n    }\r\n  }\r\n  if (!hasOwnProperty(visibleKeys, key)) {\r\n    name = '[' + key + ']';\r\n  }\r\n  if (!str) {\r\n    if (ctx.seen.indexOf(desc.value) < 0) {\r\n      if (isNull(recurseTimes)) {\r\n        str = formatValue(ctx, desc.value, null);\r\n      } else {\r\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\r\n      }\r\n      if (str.indexOf('\\n') > -1) {\r\n        if (array) {\r\n          str = str.split('\\n').map(function(line) {\r\n            return '  ' + line;\r\n          }).join('\\n').substr(2);\r\n        } else {\r\n          str = '\\n' + str.split('\\n').map(function(line) {\r\n            return '   ' + line;\r\n          }).join('\\n');\r\n        }\r\n      }\r\n    } else {\r\n      str = ctx.stylize('[Circular]', 'special');\r\n    }\r\n  }\r\n  if (isUndefined(name)) {\r\n    if (array && key.match(/^\\d+$/)) {\r\n      return str;\r\n    }\r\n    name = JSON.stringify('' + key);\r\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\r\n      name = name.substr(1, name.length - 2);\r\n      name = ctx.stylize(name, 'name');\r\n    } else {\r\n      name = name.replace(/'/g, \"\\\\'\")\r\n                 .replace(/\\\\\"/g, '\"')\r\n                 .replace(/(^\"|\"$)/g, \"'\");\r\n      name = ctx.stylize(name, 'string');\r\n    }\r\n  }\r\n\r\n  return name + ': ' + str;\r\n}\r\n\r\n\r\nfunction reduceToSingleString(output, base, braces) {\r\n  var numLinesEst = 0;\r\n  var length = output.reduce(function(prev, cur) {\r\n    numLinesEst++;\r\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\r\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\r\n  }, 0);\r\n\r\n  if (length > 60) {\r\n    return braces[0] +\r\n           (base === '' ? '' : base + '\\n ') +\r\n           ' ' +\r\n           output.join(',\\n  ') +\r\n           ' ' +\r\n           braces[1];\r\n  }\r\n\r\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\r\n}\r\n\r\n\r\n// NOTE: These type checking functions intentionally don't use `instanceof`\r\n// because it is fragile and can be easily faked with `Object.create()`.\r\nfunction isArray(ar) {\r\n  return Array.isArray(ar);\r\n}\r\nexports.isArray = isArray;\r\n\r\nfunction isBoolean(arg) {\r\n  return typeof arg === 'boolean';\r\n}\r\nexports.isBoolean = isBoolean;\r\n\r\nfunction isNull(arg) {\r\n  return arg === null;\r\n}\r\nexports.isNull = isNull;\r\n\r\nfunction isNullOrUndefined(arg) {\r\n  return arg == null;\r\n}\r\nexports.isNullOrUndefined = isNullOrUndefined;\r\n\r\nfunction isNumber(arg) {\r\n  return typeof arg === 'number';\r\n}\r\nexports.isNumber = isNumber;\r\n\r\nfunction isString(arg) {\r\n  return typeof arg === 'string';\r\n}\r\nexports.isString = isString;\r\n\r\nfunction isSymbol(arg) {\r\n  return typeof arg === 'symbol';\r\n}\r\nexports.isSymbol = isSymbol;\r\n\r\nfunction isUndefined(arg) {\r\n  return arg === void 0;\r\n}\r\nexports.isUndefined = isUndefined;\r\n\r\nfunction isRegExp(re) {\r\n  return isObject(re) && objectToString(re) === '[object RegExp]';\r\n}\r\nexports.isRegExp = isRegExp;\r\n\r\nfunction isObject(arg) {\r\n  return typeof arg === 'object' && arg !== null;\r\n}\r\nexports.isObject = isObject;\r\n\r\nfunction isDate(d) {\r\n  return isObject(d) && objectToString(d) === '[object Date]';\r\n}\r\nexports.isDate = isDate;\r\n\r\nfunction isError(e) {\r\n  return isObject(e) &&\r\n      (objectToString(e) === '[object Error]' || e instanceof Error);\r\n}\r\nexports.isError = isError;\r\n\r\nfunction isFunction(arg) {\r\n  return typeof arg === 'function';\r\n}\r\nexports.isFunction = isFunction;\r\n\r\nfunction isPrimitive(arg) {\r\n  return arg === null ||\r\n         typeof arg === 'boolean' ||\r\n         typeof arg === 'number' ||\r\n         typeof arg === 'string' ||\r\n         typeof arg === 'symbol' ||  // ES6 symbol\r\n         typeof arg === 'undefined';\r\n}\r\nexports.isPrimitive = isPrimitive;\r\n\r\nexports.isBuffer = require('./support/isBuffer');\r\n\r\nfunction objectToString(o) {\r\n  return Object.prototype.toString.call(o);\r\n}\r\n\r\n\r\nfunction pad(n) {\r\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\r\n}\r\n\r\n\r\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\r\n              'Oct', 'Nov', 'Dec'];\r\n\r\n// 26 Feb 16:19:34\r\nfunction timestamp() {\r\n  var d = new Date();\r\n  var time = [pad(d.getHours()),\r\n              pad(d.getMinutes()),\r\n              pad(d.getSeconds())].join(':');\r\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\r\n}\r\n\r\n\r\n// log is just a thin wrapper to console.log that prepends a timestamp\r\nexports.log = function() {\r\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\r\n};\r\n\r\n\r\n/**\r\n * Inherit the prototype methods from one constructor into another.\r\n *\r\n * The Function.prototype.inherits from lang.js rewritten as a standalone\r\n * function (not on Function.prototype). NOTE: If this file is to be loaded\r\n * during bootstrapping this function needs to be rewritten using some native\r\n * functions as prototype setup using normal JavaScript does not work as\r\n * expected during bootstrapping (see mirror.js in r114903).\r\n *\r\n * @param {function} ctor Constructor function which needs to inherit the\r\n *     prototype.\r\n * @param {function} superCtor Constructor function to inherit prototype from.\r\n */\r\nexports.inherits = require('inherits');\r\n\r\nexports._extend = function(origin, add) {\r\n  // Don't do anything if add isn't an object\r\n  if (!add || !isObject(add)) return origin;\r\n\r\n  var keys = Object.keys(add);\r\n  var i = keys.length;\r\n  while (i--) {\r\n    origin[keys[i]] = add[keys[i]];\r\n  }\r\n  return origin;\r\n};\r\n\r\nfunction hasOwnProperty(obj, prop) {\r\n  return Object.prototype.hasOwnProperty.call(obj, prop);\r\n}\r\n\r\n}).call(this,require('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n\r\n},{\"./support/isBuffer\":116,\"_process\":91,\"inherits\":84}],118:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  \"use strict\";\r\n  exports.stripBOM = function(str) {\r\n    if (str[0] === '\\uFEFF') {\r\n      return str.substring(1);\r\n    } else {\r\n      return str;\r\n    }\r\n  };\r\n\r\n}).call(this);\r\n\r\n},{}],119:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  \"use strict\";\r\n  var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA,\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  builder = require('xmlbuilder');\r\n\r\n  defaults = require('./defaults').defaults;\r\n\r\n  requiresCDATA = function(entry) {\r\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\r\n  };\r\n\r\n  wrapCDATA = function(entry) {\r\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\r\n  };\r\n\r\n  escapeCDATA = function(entry) {\r\n    return entry.replace(']]>', ']]]]><![CDATA[>');\r\n  };\r\n\r\n  exports.Builder = (function() {\r\n    function Builder(opts) {\r\n      var key, ref, value;\r\n      this.options = {};\r\n      ref = defaults[\"0.2\"];\r\n      for (key in ref) {\r\n        if (!hasProp.call(ref, key)) continue;\r\n        value = ref[key];\r\n        this.options[key] = value;\r\n      }\r\n      for (key in opts) {\r\n        if (!hasProp.call(opts, key)) continue;\r\n        value = opts[key];\r\n        this.options[key] = value;\r\n      }\r\n    }\r\n\r\n    Builder.prototype.buildObject = function(rootObj) {\r\n      var attrkey, charkey, render, rootElement, rootName;\r\n      attrkey = this.options.attrkey;\r\n      charkey = this.options.charkey;\r\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults['0.2'].rootName)) {\r\n        rootName = Object.keys(rootObj)[0];\r\n        rootObj = rootObj[rootName];\r\n      } else {\r\n        rootName = this.options.rootName;\r\n      }\r\n      render = (function(_this) {\r\n        return function(element, obj) {\r\n          var attr, child, entry, index, key, value;\r\n          if (typeof obj !== 'object') {\r\n            if (_this.options.cdata && requiresCDATA(obj)) {\r\n              element.raw(wrapCDATA(obj));\r\n            } else {\r\n              element.txt(obj);\r\n            }\r\n          } else if (Array.isArray(obj)) {\r\n            for (index in obj) {\r\n              if (!hasProp.call(obj, index)) continue;\r\n              child = obj[index];\r\n              for (key in child) {\r\n                entry = child[key];\r\n                element = render(element.ele(key), entry).up();\r\n              }\r\n            }\r\n          } else {\r\n            for (key in obj) {\r\n              if (!hasProp.call(obj, key)) continue;\r\n              child = obj[key];\r\n              if (key === attrkey) {\r\n                if (typeof child === \"object\") {\r\n                  for (attr in child) {\r\n                    value = child[attr];\r\n                    element = element.att(attr, value);\r\n                  }\r\n                }\r\n              } else if (key === charkey) {\r\n                if (_this.options.cdata && requiresCDATA(child)) {\r\n                  element = element.raw(wrapCDATA(child));\r\n                } else {\r\n                  element = element.txt(child);\r\n                }\r\n              } else if (Array.isArray(child)) {\r\n                for (index in child) {\r\n                  if (!hasProp.call(child, index)) continue;\r\n                  entry = child[index];\r\n                  if (typeof entry === 'string') {\r\n                    if (_this.options.cdata && requiresCDATA(entry)) {\r\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\r\n                    } else {\r\n                      element = element.ele(key, entry).up();\r\n                    }\r\n                  } else {\r\n                    element = render(element.ele(key), entry).up();\r\n                  }\r\n                }\r\n              } else if (typeof child === \"object\") {\r\n                element = render(element.ele(key), child).up();\r\n              } else {\r\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\r\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\r\n                } else {\r\n                  if (child == null) {\r\n                    child = '';\r\n                  }\r\n                  element = element.ele(key, child.toString()).up();\r\n                }\r\n              }\r\n            }\r\n          }\r\n          return element;\r\n        };\r\n      })(this);\r\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\r\n        headless: this.options.headless,\r\n        allowSurrogateChars: this.options.allowSurrogateChars\r\n      });\r\n      return render(rootElement, rootObj).end(this.options.renderOpts);\r\n    };\r\n\r\n    return Builder;\r\n\r\n  })();\r\n\r\n}).call(this);\r\n\r\n},{\"./defaults\":120,\"xmlbuilder\":145}],120:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  exports.defaults = {\r\n    \"0.1\": {\r\n      explicitCharkey: false,\r\n      trim: true,\r\n      normalize: true,\r\n      normalizeTags: false,\r\n      attrkey: \"@\",\r\n      charkey: \"#\",\r\n      explicitArray: false,\r\n      ignoreAttrs: false,\r\n      mergeAttrs: false,\r\n      explicitRoot: false,\r\n      validator: null,\r\n      xmlns: false,\r\n      explicitChildren: false,\r\n      childkey: '@@',\r\n      charsAsChildren: false,\r\n      includeWhiteChars: false,\r\n      async: false,\r\n      strict: true,\r\n      attrNameProcessors: null,\r\n      attrValueProcessors: null,\r\n      tagNameProcessors: null,\r\n      valueProcessors: null,\r\n      emptyTag: ''\r\n    },\r\n    \"0.2\": {\r\n      explicitCharkey: false,\r\n      trim: false,\r\n      normalize: false,\r\n      normalizeTags: false,\r\n      attrkey: \"$\",\r\n      charkey: \"_\",\r\n      explicitArray: true,\r\n      ignoreAttrs: false,\r\n      mergeAttrs: false,\r\n      explicitRoot: true,\r\n      validator: null,\r\n      xmlns: false,\r\n      explicitChildren: false,\r\n      preserveChildrenOrder: false,\r\n      childkey: '$$',\r\n      charsAsChildren: false,\r\n      includeWhiteChars: false,\r\n      async: false,\r\n      strict: true,\r\n      attrNameProcessors: null,\r\n      attrValueProcessors: null,\r\n      tagNameProcessors: null,\r\n      valueProcessors: null,\r\n      rootName: 'root',\r\n      xmldec: {\r\n        'version': '1.0',\r\n        'encoding': 'UTF-8',\r\n        'standalone': true\r\n      },\r\n      doctype: null,\r\n      renderOpts: {\r\n        'pretty': true,\r\n        'indent': '  ',\r\n        'newline': '\\n'\r\n      },\r\n      headless: false,\r\n      chunkSize: 10000,\r\n      emptyTag: '',\r\n      cdata: false\r\n    }\r\n  };\r\n\r\n}).call(this);\r\n\r\n},{}],121:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  \"use strict\";\r\n  var bom, defaults, events, isEmpty, processItem, processors, sax, setImmediate,\r\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  sax = require('sax');\r\n\r\n  events = require('events');\r\n\r\n  bom = require('./bom');\r\n\r\n  processors = require('./processors');\r\n\r\n  setImmediate = require('timers').setImmediate;\r\n\r\n  defaults = require('./defaults').defaults;\r\n\r\n  isEmpty = function(thing) {\r\n    return typeof thing === \"object\" && (thing != null) && Object.keys(thing).length === 0;\r\n  };\r\n\r\n  processItem = function(processors, item, key) {\r\n    var i, len, process;\r\n    for (i = 0, len = processors.length; i < len; i++) {\r\n      process = processors[i];\r\n      item = process(item, key);\r\n    }\r\n    return item;\r\n  };\r\n\r\n  exports.Parser = (function(superClass) {\r\n    extend(Parser, superClass);\r\n\r\n    function Parser(opts) {\r\n      this.parseString = bind(this.parseString, this);\r\n      this.reset = bind(this.reset, this);\r\n      this.assignOrPush = bind(this.assignOrPush, this);\r\n      this.processAsync = bind(this.processAsync, this);\r\n      var key, ref, value;\r\n      if (!(this instanceof exports.Parser)) {\r\n        return new exports.Parser(opts);\r\n      }\r\n      this.options = {};\r\n      ref = defaults[\"0.2\"];\r\n      for (key in ref) {\r\n        if (!hasProp.call(ref, key)) continue;\r\n        value = ref[key];\r\n        this.options[key] = value;\r\n      }\r\n      for (key in opts) {\r\n        if (!hasProp.call(opts, key)) continue;\r\n        value = opts[key];\r\n        this.options[key] = value;\r\n      }\r\n      if (this.options.xmlns) {\r\n        this.options.xmlnskey = this.options.attrkey + \"ns\";\r\n      }\r\n      if (this.options.normalizeTags) {\r\n        if (!this.options.tagNameProcessors) {\r\n          this.options.tagNameProcessors = [];\r\n        }\r\n        this.options.tagNameProcessors.unshift(processors.normalize);\r\n      }\r\n      this.reset();\r\n    }\r\n\r\n    Parser.prototype.processAsync = function() {\r\n      var chunk, err;\r\n      try {\r\n        if (this.remaining.length <= this.options.chunkSize) {\r\n          chunk = this.remaining;\r\n          this.remaining = '';\r\n          this.saxParser = this.saxParser.write(chunk);\r\n          return this.saxParser.close();\r\n        } else {\r\n          chunk = this.remaining.substr(0, this.options.chunkSize);\r\n          this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);\r\n          this.saxParser = this.saxParser.write(chunk);\r\n          return setImmediate(this.processAsync);\r\n        }\r\n      } catch (error1) {\r\n        err = error1;\r\n        if (!this.saxParser.errThrown) {\r\n          this.saxParser.errThrown = true;\r\n          return this.emit(err);\r\n        }\r\n      }\r\n    };\r\n\r\n    Parser.prototype.assignOrPush = function(obj, key, newValue) {\r\n      if (!(key in obj)) {\r\n        if (!this.options.explicitArray) {\r\n          return obj[key] = newValue;\r\n        } else {\r\n          return obj[key] = [newValue];\r\n        }\r\n      } else {\r\n        if (!(obj[key] instanceof Array)) {\r\n          obj[key] = [obj[key]];\r\n        }\r\n        return obj[key].push(newValue);\r\n      }\r\n    };\r\n\r\n    Parser.prototype.reset = function() {\r\n      var attrkey, charkey, ontext, stack;\r\n      this.removeAllListeners();\r\n      this.saxParser = sax.parser(this.options.strict, {\r\n        trim: false,\r\n        normalize: false,\r\n        xmlns: this.options.xmlns\r\n      });\r\n      this.saxParser.errThrown = false;\r\n      this.saxParser.onerror = (function(_this) {\r\n        return function(error) {\r\n          _this.saxParser.resume();\r\n          if (!_this.saxParser.errThrown) {\r\n            _this.saxParser.errThrown = true;\r\n            return _this.emit(\"error\", error);\r\n          }\r\n        };\r\n      })(this);\r\n      this.saxParser.onend = (function(_this) {\r\n        return function() {\r\n          if (!_this.saxParser.ended) {\r\n            _this.saxParser.ended = true;\r\n            return _this.emit(\"end\", _this.resultObject);\r\n          }\r\n        };\r\n      })(this);\r\n      this.saxParser.ended = false;\r\n      this.EXPLICIT_CHARKEY = this.options.explicitCharkey;\r\n      this.resultObject = null;\r\n      stack = [];\r\n      attrkey = this.options.attrkey;\r\n      charkey = this.options.charkey;\r\n      this.saxParser.onopentag = (function(_this) {\r\n        return function(node) {\r\n          var key, newValue, obj, processedKey, ref;\r\n          obj = {};\r\n          obj[charkey] = \"\";\r\n          if (!_this.options.ignoreAttrs) {\r\n            ref = node.attributes;\r\n            for (key in ref) {\r\n              if (!hasProp.call(ref, key)) continue;\r\n              if (!(attrkey in obj) && !_this.options.mergeAttrs) {\r\n                obj[attrkey] = {};\r\n              }\r\n              newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];\r\n              processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;\r\n              if (_this.options.mergeAttrs) {\r\n                _this.assignOrPush(obj, processedKey, newValue);\r\n              } else {\r\n                obj[attrkey][processedKey] = newValue;\r\n              }\r\n            }\r\n          }\r\n          obj[\"#name\"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;\r\n          if (_this.options.xmlns) {\r\n            obj[_this.options.xmlnskey] = {\r\n              uri: node.uri,\r\n              local: node.local\r\n            };\r\n          }\r\n          return stack.push(obj);\r\n        };\r\n      })(this);\r\n      this.saxParser.onclosetag = (function(_this) {\r\n        return function() {\r\n          var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;\r\n          obj = stack.pop();\r\n          nodeName = obj[\"#name\"];\r\n          if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {\r\n            delete obj[\"#name\"];\r\n          }\r\n          if (obj.cdata === true) {\r\n            cdata = obj.cdata;\r\n            delete obj.cdata;\r\n          }\r\n          s = stack[stack.length - 1];\r\n          if (obj[charkey].match(/^\\s*$/) && !cdata) {\r\n            emptyStr = obj[charkey];\r\n            delete obj[charkey];\r\n          } else {\r\n            if (_this.options.trim) {\r\n              obj[charkey] = obj[charkey].trim();\r\n            }\r\n            if (_this.options.normalize) {\r\n              obj[charkey] = obj[charkey].replace(/\\s{2,}/g, \" \").trim();\r\n            }\r\n            obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];\r\n            if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\r\n              obj = obj[charkey];\r\n            }\r\n          }\r\n          if (isEmpty(obj)) {\r\n            obj = _this.options.emptyTag !== '' ? _this.options.emptyTag : emptyStr;\r\n          }\r\n          if (_this.options.validator != null) {\r\n            xpath = \"/\" + ((function() {\r\n              var i, len, results;\r\n              results = [];\r\n              for (i = 0, len = stack.length; i < len; i++) {\r\n                node = stack[i];\r\n                results.push(node[\"#name\"]);\r\n              }\r\n              return results;\r\n            })()).concat(nodeName).join(\"/\");\r\n            (function() {\r\n              var err;\r\n              try {\r\n                return obj = _this.options.validator(xpath, s && s[nodeName], obj);\r\n              } catch (error1) {\r\n                err = error1;\r\n                return _this.emit(\"error\", err);\r\n              }\r\n            })();\r\n          }\r\n          if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === 'object') {\r\n            if (!_this.options.preserveChildrenOrder) {\r\n              node = {};\r\n              if (_this.options.attrkey in obj) {\r\n                node[_this.options.attrkey] = obj[_this.options.attrkey];\r\n                delete obj[_this.options.attrkey];\r\n              }\r\n              if (!_this.options.charsAsChildren && _this.options.charkey in obj) {\r\n                node[_this.options.charkey] = obj[_this.options.charkey];\r\n                delete obj[_this.options.charkey];\r\n              }\r\n              if (Object.getOwnPropertyNames(obj).length > 0) {\r\n                node[_this.options.childkey] = obj;\r\n              }\r\n              obj = node;\r\n            } else if (s) {\r\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\r\n              objClone = {};\r\n              for (key in obj) {\r\n                if (!hasProp.call(obj, key)) continue;\r\n                objClone[key] = obj[key];\r\n              }\r\n              s[_this.options.childkey].push(objClone);\r\n              delete obj[\"#name\"];\r\n              if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\r\n                obj = obj[charkey];\r\n              }\r\n            }\r\n          }\r\n          if (stack.length > 0) {\r\n            return _this.assignOrPush(s, nodeName, obj);\r\n          } else {\r\n            if (_this.options.explicitRoot) {\r\n              old = obj;\r\n              obj = {};\r\n              obj[nodeName] = old;\r\n            }\r\n            _this.resultObject = obj;\r\n            _this.saxParser.ended = true;\r\n            return _this.emit(\"end\", _this.resultObject);\r\n          }\r\n        };\r\n      })(this);\r\n      ontext = (function(_this) {\r\n        return function(text) {\r\n          var charChild, s;\r\n          s = stack[stack.length - 1];\r\n          if (s) {\r\n            s[charkey] += text;\r\n            if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\\\n/g, '').trim() !== '')) {\r\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\r\n              charChild = {\r\n                '#name': '__text__'\r\n              };\r\n              charChild[charkey] = text;\r\n              if (_this.options.normalize) {\r\n                charChild[charkey] = charChild[charkey].replace(/\\s{2,}/g, \" \").trim();\r\n              }\r\n              s[_this.options.childkey].push(charChild);\r\n            }\r\n            return s;\r\n          }\r\n        };\r\n      })(this);\r\n      this.saxParser.ontext = ontext;\r\n      return this.saxParser.oncdata = (function(_this) {\r\n        return function(text) {\r\n          var s;\r\n          s = ontext(text);\r\n          if (s) {\r\n            return s.cdata = true;\r\n          }\r\n        };\r\n      })(this);\r\n    };\r\n\r\n    Parser.prototype.parseString = function(str, cb) {\r\n      var err;\r\n      if ((cb != null) && typeof cb === \"function\") {\r\n        this.on(\"end\", function(result) {\r\n          this.reset();\r\n          return cb(null, result);\r\n        });\r\n        this.on(\"error\", function(err) {\r\n          this.reset();\r\n          return cb(err);\r\n        });\r\n      }\r\n      try {\r\n        str = str.toString();\r\n        if (str.trim() === '') {\r\n          this.emit(\"end\", null);\r\n          return true;\r\n        }\r\n        str = bom.stripBOM(str);\r\n        if (this.options.async) {\r\n          this.remaining = str;\r\n          setImmediate(this.processAsync);\r\n          return this.saxParser;\r\n        }\r\n        return this.saxParser.write(str).close();\r\n      } catch (error1) {\r\n        err = error1;\r\n        if (!(this.saxParser.errThrown || this.saxParser.ended)) {\r\n          this.emit('error', err);\r\n          return this.saxParser.errThrown = true;\r\n        } else if (this.saxParser.ended) {\r\n          throw err;\r\n        }\r\n      }\r\n    };\r\n\r\n    return Parser;\r\n\r\n  })(events.EventEmitter);\r\n\r\n  exports.parseString = function(str, a, b) {\r\n    var cb, options, parser;\r\n    if (b != null) {\r\n      if (typeof b === 'function') {\r\n        cb = b;\r\n      }\r\n      if (typeof a === 'object') {\r\n        options = a;\r\n      }\r\n    } else {\r\n      if (typeof a === 'function') {\r\n        cb = a;\r\n      }\r\n      options = {};\r\n    }\r\n    parser = new exports.Parser(options);\r\n    return parser.parseString(str, cb);\r\n  };\r\n\r\n}).call(this);\r\n\r\n},{\"./bom\":118,\"./defaults\":120,\"./processors\":122,\"events\":47,\"sax\":111,\"timers\":114}],122:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  \"use strict\";\r\n  var prefixMatch;\r\n\r\n  prefixMatch = new RegExp(/(?!xmlns)^.*:/);\r\n\r\n  exports.normalize = function(str) {\r\n    return str.toLowerCase();\r\n  };\r\n\r\n  exports.firstCharLowerCase = function(str) {\r\n    return str.charAt(0).toLowerCase() + str.slice(1);\r\n  };\r\n\r\n  exports.stripPrefix = function(str) {\r\n    return str.replace(prefixMatch, '');\r\n  };\r\n\r\n  exports.parseNumbers = function(str) {\r\n    if (!isNaN(str)) {\r\n      str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);\r\n    }\r\n    return str;\r\n  };\r\n\r\n  exports.parseBooleans = function(str) {\r\n    if (/^(?:true|false)$/i.test(str)) {\r\n      str = str.toLowerCase() === 'true';\r\n    }\r\n    return str;\r\n  };\r\n\r\n}).call(this);\r\n\r\n},{}],123:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  \"use strict\";\r\n  var builder, defaults, parser, processors,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  defaults = require('./defaults');\r\n\r\n  builder = require('./builder');\r\n\r\n  parser = require('./parser');\r\n\r\n  processors = require('./processors');\r\n\r\n  exports.defaults = defaults.defaults;\r\n\r\n  exports.processors = processors;\r\n\r\n  exports.ValidationError = (function(superClass) {\r\n    extend(ValidationError, superClass);\r\n\r\n    function ValidationError(message) {\r\n      this.message = message;\r\n    }\r\n\r\n    return ValidationError;\r\n\r\n  })(Error);\r\n\r\n  exports.Builder = builder.Builder;\r\n\r\n  exports.Parser = parser.Parser;\r\n\r\n  exports.parseString = parser.parseString;\r\n\r\n}).call(this);\r\n\r\n},{\"./builder\":119,\"./defaults\":120,\"./parser\":121,\"./processors\":122}],124:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var assign, isArray, isEmpty, isFunction, isObject, isPlainObject,\r\n    slice = [].slice,\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  assign = function() {\r\n    var i, key, len, source, sources, target;\r\n    target = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];\r\n    if (isFunction(Object.assign)) {\r\n      Object.assign.apply(null, arguments);\r\n    } else {\r\n      for (i = 0, len = sources.length; i < len; i++) {\r\n        source = sources[i];\r\n        if (source != null) {\r\n          for (key in source) {\r\n            if (!hasProp.call(source, key)) continue;\r\n            target[key] = source[key];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return target;\r\n  };\r\n\r\n  isFunction = function(val) {\r\n    return !!val && Object.prototype.toString.call(val) === '[object Function]';\r\n  };\r\n\r\n  isObject = function(val) {\r\n    var ref;\r\n    return !!val && ((ref = typeof val) === 'function' || ref === 'object');\r\n  };\r\n\r\n  isArray = function(val) {\r\n    if (isFunction(Array.isArray)) {\r\n      return Array.isArray(val);\r\n    } else {\r\n      return Object.prototype.toString.call(val) === '[object Array]';\r\n    }\r\n  };\r\n\r\n  isEmpty = function(val) {\r\n    var key;\r\n    if (isArray(val)) {\r\n      return !val.length;\r\n    } else {\r\n      for (key in val) {\r\n        if (!hasProp.call(val, key)) continue;\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  };\r\n\r\n  isPlainObject = function(val) {\r\n    var ctor, proto;\r\n    return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && (typeof ctor === 'function') && (ctor instanceof ctor) && (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\r\n  };\r\n\r\n  module.exports.assign = assign;\r\n\r\n  module.exports.isFunction = isFunction;\r\n\r\n  module.exports.isObject = isObject;\r\n\r\n  module.exports.isArray = isArray;\r\n\r\n  module.exports.isEmpty = isEmpty;\r\n\r\n  module.exports.isPlainObject = isPlainObject;\r\n\r\n}).call(this);\r\n\r\n},{}],125:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLAttribute;\r\n\r\n  module.exports = XMLAttribute = (function() {\r\n    function XMLAttribute(parent, name, value) {\r\n      this.options = parent.options;\r\n      this.stringify = parent.stringify;\r\n      if (name == null) {\r\n        throw new Error(\"Missing attribute name of element \" + parent.name);\r\n      }\r\n      if (value == null) {\r\n        throw new Error(\"Missing attribute value for attribute \" + name + \" of element \" + parent.name);\r\n      }\r\n      this.name = this.stringify.attName(name);\r\n      this.value = this.stringify.attValue(value);\r\n    }\r\n\r\n    XMLAttribute.prototype.clone = function() {\r\n      return Object.create(this);\r\n    };\r\n\r\n    XMLAttribute.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).attribute(this);\r\n    };\r\n\r\n    return XMLAttribute;\r\n\r\n  })();\r\n\r\n}).call(this);\r\n\r\n},{}],126:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLCData, XMLNode,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLCData = (function(superClass) {\r\n    extend(XMLCData, superClass);\r\n\r\n    function XMLCData(parent, text) {\r\n      XMLCData.__super__.constructor.call(this, parent);\r\n      if (text == null) {\r\n        throw new Error(\"Missing CDATA text\");\r\n      }\r\n      this.text = this.stringify.cdata(text);\r\n    }\r\n\r\n    XMLCData.prototype.clone = function() {\r\n      return Object.create(this);\r\n    };\r\n\r\n    XMLCData.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).cdata(this);\r\n    };\r\n\r\n    return XMLCData;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLNode\":137}],127:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLComment, XMLNode,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLComment = (function(superClass) {\r\n    extend(XMLComment, superClass);\r\n\r\n    function XMLComment(parent, text) {\r\n      XMLComment.__super__.constructor.call(this, parent);\r\n      if (text == null) {\r\n        throw new Error(\"Missing comment text\");\r\n      }\r\n      this.text = this.stringify.comment(text);\r\n    }\r\n\r\n    XMLComment.prototype.clone = function() {\r\n      return Object.create(this);\r\n    };\r\n\r\n    XMLComment.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).comment(this);\r\n    };\r\n\r\n    return XMLComment;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLNode\":137}],128:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLDTDAttList, XMLNode,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLDTDAttList = (function(superClass) {\r\n    extend(XMLDTDAttList, superClass);\r\n\r\n    function XMLDTDAttList(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {\r\n      XMLDTDAttList.__super__.constructor.call(this, parent);\r\n      if (elementName == null) {\r\n        throw new Error(\"Missing DTD element name\");\r\n      }\r\n      if (attributeName == null) {\r\n        throw new Error(\"Missing DTD attribute name\");\r\n      }\r\n      if (!attributeType) {\r\n        throw new Error(\"Missing DTD attribute type\");\r\n      }\r\n      if (!defaultValueType) {\r\n        throw new Error(\"Missing DTD attribute default\");\r\n      }\r\n      if (defaultValueType.indexOf('#') !== 0) {\r\n        defaultValueType = '#' + defaultValueType;\r\n      }\r\n      if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {\r\n        throw new Error(\"Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT\");\r\n      }\r\n      if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {\r\n        throw new Error(\"Default value only applies to #FIXED or #DEFAULT\");\r\n      }\r\n      this.elementName = this.stringify.eleName(elementName);\r\n      this.attributeName = this.stringify.attName(attributeName);\r\n      this.attributeType = this.stringify.dtdAttType(attributeType);\r\n      this.defaultValue = this.stringify.dtdAttDefault(defaultValue);\r\n      this.defaultValueType = defaultValueType;\r\n    }\r\n\r\n    XMLDTDAttList.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).dtdAttList(this);\r\n    };\r\n\r\n    return XMLDTDAttList;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLNode\":137}],129:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLDTDElement, XMLNode,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLDTDElement = (function(superClass) {\r\n    extend(XMLDTDElement, superClass);\r\n\r\n    function XMLDTDElement(parent, name, value) {\r\n      XMLDTDElement.__super__.constructor.call(this, parent);\r\n      if (name == null) {\r\n        throw new Error(\"Missing DTD element name\");\r\n      }\r\n      if (!value) {\r\n        value = '(#PCDATA)';\r\n      }\r\n      if (Array.isArray(value)) {\r\n        value = '(' + value.join(',') + ')';\r\n      }\r\n      this.name = this.stringify.eleName(name);\r\n      this.value = this.stringify.dtdElementValue(value);\r\n    }\r\n\r\n    XMLDTDElement.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).dtdElement(this);\r\n    };\r\n\r\n    return XMLDTDElement;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLNode\":137}],130:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLDTDEntity, XMLNode, isObject,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  isObject = require('./Utility').isObject;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLDTDEntity = (function(superClass) {\r\n    extend(XMLDTDEntity, superClass);\r\n\r\n    function XMLDTDEntity(parent, pe, name, value) {\r\n      XMLDTDEntity.__super__.constructor.call(this, parent);\r\n      if (name == null) {\r\n        throw new Error(\"Missing entity name\");\r\n      }\r\n      if (value == null) {\r\n        throw new Error(\"Missing entity value\");\r\n      }\r\n      this.pe = !!pe;\r\n      this.name = this.stringify.eleName(name);\r\n      if (!isObject(value)) {\r\n        this.value = this.stringify.dtdEntityValue(value);\r\n      } else {\r\n        if (!value.pubID && !value.sysID) {\r\n          throw new Error(\"Public and/or system identifiers are required for an external entity\");\r\n        }\r\n        if (value.pubID && !value.sysID) {\r\n          throw new Error(\"System identifier is required for a public external entity\");\r\n        }\r\n        if (value.pubID != null) {\r\n          this.pubID = this.stringify.dtdPubID(value.pubID);\r\n        }\r\n        if (value.sysID != null) {\r\n          this.sysID = this.stringify.dtdSysID(value.sysID);\r\n        }\r\n        if (value.nData != null) {\r\n          this.nData = this.stringify.dtdNData(value.nData);\r\n        }\r\n        if (this.pe && this.nData) {\r\n          throw new Error(\"Notation declaration is not allowed in a parameter entity\");\r\n        }\r\n      }\r\n    }\r\n\r\n    XMLDTDEntity.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).dtdEntity(this);\r\n    };\r\n\r\n    return XMLDTDEntity;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./Utility\":124,\"./XMLNode\":137}],131:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLDTDNotation, XMLNode,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLDTDNotation = (function(superClass) {\r\n    extend(XMLDTDNotation, superClass);\r\n\r\n    function XMLDTDNotation(parent, name, value) {\r\n      XMLDTDNotation.__super__.constructor.call(this, parent);\r\n      if (name == null) {\r\n        throw new Error(\"Missing notation name\");\r\n      }\r\n      if (!value.pubID && !value.sysID) {\r\n        throw new Error(\"Public or system identifiers are required for an external entity\");\r\n      }\r\n      this.name = this.stringify.eleName(name);\r\n      if (value.pubID != null) {\r\n        this.pubID = this.stringify.dtdPubID(value.pubID);\r\n      }\r\n      if (value.sysID != null) {\r\n        this.sysID = this.stringify.dtdSysID(value.sysID);\r\n      }\r\n    }\r\n\r\n    XMLDTDNotation.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).dtdNotation(this);\r\n    };\r\n\r\n    return XMLDTDNotation;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLNode\":137}],132:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLDeclaration, XMLNode, isObject,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  isObject = require('./Utility').isObject;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLDeclaration = (function(superClass) {\r\n    extend(XMLDeclaration, superClass);\r\n\r\n    function XMLDeclaration(parent, version, encoding, standalone) {\r\n      var ref;\r\n      XMLDeclaration.__super__.constructor.call(this, parent);\r\n      if (isObject(version)) {\r\n        ref = version, version = ref.version, encoding = ref.encoding, standalone = ref.standalone;\r\n      }\r\n      if (!version) {\r\n        version = '1.0';\r\n      }\r\n      this.version = this.stringify.xmlVersion(version);\r\n      if (encoding != null) {\r\n        this.encoding = this.stringify.xmlEncoding(encoding);\r\n      }\r\n      if (standalone != null) {\r\n        this.standalone = this.stringify.xmlStandalone(standalone);\r\n      }\r\n    }\r\n\r\n    XMLDeclaration.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).declaration(this);\r\n    };\r\n\r\n    return XMLDeclaration;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./Utility\":124,\"./XMLNode\":137}],133:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNode, isObject,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  isObject = require('./Utility').isObject;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  XMLDTDAttList = require('./XMLDTDAttList');\r\n\r\n  XMLDTDEntity = require('./XMLDTDEntity');\r\n\r\n  XMLDTDElement = require('./XMLDTDElement');\r\n\r\n  XMLDTDNotation = require('./XMLDTDNotation');\r\n\r\n  module.exports = XMLDocType = (function(superClass) {\r\n    extend(XMLDocType, superClass);\r\n\r\n    function XMLDocType(parent, pubID, sysID) {\r\n      var ref, ref1;\r\n      XMLDocType.__super__.constructor.call(this, parent);\r\n      this.documentObject = parent;\r\n      if (isObject(pubID)) {\r\n        ref = pubID, pubID = ref.pubID, sysID = ref.sysID;\r\n      }\r\n      if (sysID == null) {\r\n        ref1 = [pubID, sysID], sysID = ref1[0], pubID = ref1[1];\r\n      }\r\n      if (pubID != null) {\r\n        this.pubID = this.stringify.dtdPubID(pubID);\r\n      }\r\n      if (sysID != null) {\r\n        this.sysID = this.stringify.dtdSysID(sysID);\r\n      }\r\n    }\r\n\r\n    XMLDocType.prototype.element = function(name, value) {\r\n      var child;\r\n      child = new XMLDTDElement(this, name, value);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLDocType.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\r\n      var child;\r\n      child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLDocType.prototype.entity = function(name, value) {\r\n      var child;\r\n      child = new XMLDTDEntity(this, false, name, value);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLDocType.prototype.pEntity = function(name, value) {\r\n      var child;\r\n      child = new XMLDTDEntity(this, true, name, value);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLDocType.prototype.notation = function(name, value) {\r\n      var child;\r\n      child = new XMLDTDNotation(this, name, value);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLDocType.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).docType(this);\r\n    };\r\n\r\n    XMLDocType.prototype.ele = function(name, value) {\r\n      return this.element(name, value);\r\n    };\r\n\r\n    XMLDocType.prototype.att = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\r\n      return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);\r\n    };\r\n\r\n    XMLDocType.prototype.ent = function(name, value) {\r\n      return this.entity(name, value);\r\n    };\r\n\r\n    XMLDocType.prototype.pent = function(name, value) {\r\n      return this.pEntity(name, value);\r\n    };\r\n\r\n    XMLDocType.prototype.not = function(name, value) {\r\n      return this.notation(name, value);\r\n    };\r\n\r\n    XMLDocType.prototype.up = function() {\r\n      return this.root() || this.documentObject;\r\n    };\r\n\r\n    return XMLDocType;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./Utility\":124,\"./XMLDTDAttList\":128,\"./XMLDTDElement\":129,\"./XMLDTDEntity\":130,\"./XMLDTDNotation\":131,\"./XMLNode\":137}],134:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  isPlainObject = require('./Utility').isPlainObject;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  XMLStringifier = require('./XMLStringifier');\r\n\r\n  XMLStringWriter = require('./XMLStringWriter');\r\n\r\n  module.exports = XMLDocument = (function(superClass) {\r\n    extend(XMLDocument, superClass);\r\n\r\n    function XMLDocument(options) {\r\n      XMLDocument.__super__.constructor.call(this, null);\r\n      options || (options = {});\r\n      if (!options.writer) {\r\n        options.writer = new XMLStringWriter();\r\n      }\r\n      this.options = options;\r\n      this.stringify = new XMLStringifier(options);\r\n      this.isDocument = true;\r\n    }\r\n\r\n    XMLDocument.prototype.end = function(writer) {\r\n      var writerOptions;\r\n      if (!writer) {\r\n        writer = this.options.writer;\r\n      } else if (isPlainObject(writer)) {\r\n        writerOptions = writer;\r\n        writer = this.options.writer.set(writerOptions);\r\n      }\r\n      return writer.document(this);\r\n    };\r\n\r\n    XMLDocument.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).document(this);\r\n    };\r\n\r\n    return XMLDocument;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./Utility\":124,\"./XMLNode\":137,\"./XMLStringWriter\":141,\"./XMLStringifier\":142}],135:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, isFunction, isObject, isPlainObject, ref,\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject;\r\n\r\n  XMLElement = require('./XMLElement');\r\n\r\n  XMLCData = require('./XMLCData');\r\n\r\n  XMLComment = require('./XMLComment');\r\n\r\n  XMLRaw = require('./XMLRaw');\r\n\r\n  XMLText = require('./XMLText');\r\n\r\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\r\n\r\n  XMLDeclaration = require('./XMLDeclaration');\r\n\r\n  XMLDocType = require('./XMLDocType');\r\n\r\n  XMLDTDAttList = require('./XMLDTDAttList');\r\n\r\n  XMLDTDEntity = require('./XMLDTDEntity');\r\n\r\n  XMLDTDElement = require('./XMLDTDElement');\r\n\r\n  XMLDTDNotation = require('./XMLDTDNotation');\r\n\r\n  XMLAttribute = require('./XMLAttribute');\r\n\r\n  XMLStringifier = require('./XMLStringifier');\r\n\r\n  XMLStringWriter = require('./XMLStringWriter');\r\n\r\n  module.exports = XMLDocumentCB = (function() {\r\n    function XMLDocumentCB(options, onData, onEnd) {\r\n      var writerOptions;\r\n      options || (options = {});\r\n      if (!options.writer) {\r\n        options.writer = new XMLStringWriter(options);\r\n      } else if (isPlainObject(options.writer)) {\r\n        writerOptions = options.writer;\r\n        options.writer = new XMLStringWriter(writerOptions);\r\n      }\r\n      this.options = options;\r\n      this.writer = options.writer;\r\n      this.stringify = new XMLStringifier(options);\r\n      this.onDataCallback = onData || function() {};\r\n      this.onEndCallback = onEnd || function() {};\r\n      this.currentNode = null;\r\n      this.currentLevel = -1;\r\n      this.openTags = {};\r\n      this.documentStarted = false;\r\n      this.documentCompleted = false;\r\n      this.root = null;\r\n    }\r\n\r\n    XMLDocumentCB.prototype.node = function(name, attributes, text) {\r\n      var ref1;\r\n      if (name == null) {\r\n        throw new Error(\"Missing node name\");\r\n      }\r\n      if (this.root && this.currentLevel === -1) {\r\n        throw new Error(\"Document can only have one root node\");\r\n      }\r\n      this.openCurrent();\r\n      name = name.valueOf();\r\n      if (attributes == null) {\r\n        attributes = {};\r\n      }\r\n      attributes = attributes.valueOf();\r\n      if (!isObject(attributes)) {\r\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\r\n      }\r\n      this.currentNode = new XMLElement(this, name, attributes);\r\n      this.currentNode.children = false;\r\n      this.currentLevel++;\r\n      this.openTags[this.currentLevel] = this.currentNode;\r\n      if (text != null) {\r\n        this.text(text);\r\n      }\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.element = function(name, attributes, text) {\r\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\r\n        return this.dtdElement.apply(this, arguments);\r\n      } else {\r\n        return this.node(name, attributes, text);\r\n      }\r\n    };\r\n\r\n    XMLDocumentCB.prototype.attribute = function(name, value) {\r\n      var attName, attValue;\r\n      if (!this.currentNode || this.currentNode.children) {\r\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode\");\r\n      }\r\n      if (name != null) {\r\n        name = name.valueOf();\r\n      }\r\n      if (isObject(name)) {\r\n        for (attName in name) {\r\n          if (!hasProp.call(name, attName)) continue;\r\n          attValue = name[attName];\r\n          this.attribute(attName, attValue);\r\n        }\r\n      } else {\r\n        if (isFunction(value)) {\r\n          value = value.apply();\r\n        }\r\n        if (!this.options.skipNullAttributes || (value != null)) {\r\n          this.currentNode.attributes[name] = new XMLAttribute(this, name, value);\r\n        }\r\n      }\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.text = function(value) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLText(this, value);\r\n      this.onData(this.writer.text(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.cdata = function(value) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLCData(this, value);\r\n      this.onData(this.writer.cdata(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.comment = function(value) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLComment(this, value);\r\n      this.onData(this.writer.comment(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.raw = function(value) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLRaw(this, value);\r\n      this.onData(this.writer.raw(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.instruction = function(target, value) {\r\n      var i, insTarget, insValue, len, node;\r\n      this.openCurrent();\r\n      if (target != null) {\r\n        target = target.valueOf();\r\n      }\r\n      if (value != null) {\r\n        value = value.valueOf();\r\n      }\r\n      if (Array.isArray(target)) {\r\n        for (i = 0, len = target.length; i < len; i++) {\r\n          insTarget = target[i];\r\n          this.instruction(insTarget);\r\n        }\r\n      } else if (isObject(target)) {\r\n        for (insTarget in target) {\r\n          if (!hasProp.call(target, insTarget)) continue;\r\n          insValue = target[insTarget];\r\n          this.instruction(insTarget, insValue);\r\n        }\r\n      } else {\r\n        if (isFunction(value)) {\r\n          value = value.apply();\r\n        }\r\n        node = new XMLProcessingInstruction(this, target, value);\r\n        this.onData(this.writer.processingInstruction(node, this.currentLevel + 1));\r\n      }\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.declaration = function(version, encoding, standalone) {\r\n      var node;\r\n      this.openCurrent();\r\n      if (this.documentStarted) {\r\n        throw new Error(\"declaration() must be the first node\");\r\n      }\r\n      node = new XMLDeclaration(this, version, encoding, standalone);\r\n      this.onData(this.writer.declaration(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.doctype = function(root, pubID, sysID) {\r\n      this.openCurrent();\r\n      if (root == null) {\r\n        throw new Error(\"Missing root node name\");\r\n      }\r\n      if (this.root) {\r\n        throw new Error(\"dtd() must come before the root node\");\r\n      }\r\n      this.currentNode = new XMLDocType(this, pubID, sysID);\r\n      this.currentNode.rootNodeName = root;\r\n      this.currentNode.children = false;\r\n      this.currentLevel++;\r\n      this.openTags[this.currentLevel] = this.currentNode;\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.dtdElement = function(name, value) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLDTDElement(this, name, value);\r\n      this.onData(this.writer.dtdElement(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\r\n      this.onData(this.writer.dtdAttList(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.entity = function(name, value) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLDTDEntity(this, false, name, value);\r\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.pEntity = function(name, value) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLDTDEntity(this, true, name, value);\r\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.notation = function(name, value) {\r\n      var node;\r\n      this.openCurrent();\r\n      node = new XMLDTDNotation(this, name, value);\r\n      this.onData(this.writer.dtdNotation(node, this.currentLevel + 1));\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.up = function() {\r\n      if (this.currentLevel < 0) {\r\n        throw new Error(\"The document node has no parent\");\r\n      }\r\n      if (this.currentNode) {\r\n        if (this.currentNode.children) {\r\n          this.closeNode(this.currentNode);\r\n        } else {\r\n          this.openNode(this.currentNode);\r\n        }\r\n        this.currentNode = null;\r\n      } else {\r\n        this.closeNode(this.openTags[this.currentLevel]);\r\n      }\r\n      delete this.openTags[this.currentLevel];\r\n      this.currentLevel--;\r\n      return this;\r\n    };\r\n\r\n    XMLDocumentCB.prototype.end = function() {\r\n      while (this.currentLevel >= 0) {\r\n        this.up();\r\n      }\r\n      return this.onEnd();\r\n    };\r\n\r\n    XMLDocumentCB.prototype.openCurrent = function() {\r\n      if (this.currentNode) {\r\n        this.currentNode.children = true;\r\n        return this.openNode(this.currentNode);\r\n      }\r\n    };\r\n\r\n    XMLDocumentCB.prototype.openNode = function(node) {\r\n      if (!node.isOpen) {\r\n        if (!this.root && this.currentLevel === 0 && node instanceof XMLElement) {\r\n          this.root = node;\r\n        }\r\n        this.onData(this.writer.openNode(node, this.currentLevel));\r\n        return node.isOpen = true;\r\n      }\r\n    };\r\n\r\n    XMLDocumentCB.prototype.closeNode = function(node) {\r\n      if (!node.isClosed) {\r\n        this.onData(this.writer.closeNode(node, this.currentLevel));\r\n        return node.isClosed = true;\r\n      }\r\n    };\r\n\r\n    XMLDocumentCB.prototype.onData = function(chunk) {\r\n      this.documentStarted = true;\r\n      return this.onDataCallback(chunk);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.onEnd = function() {\r\n      this.documentCompleted = true;\r\n      return this.onEndCallback();\r\n    };\r\n\r\n    XMLDocumentCB.prototype.ele = function() {\r\n      return this.element.apply(this, arguments);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.nod = function(name, attributes, text) {\r\n      return this.node(name, attributes, text);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.txt = function(value) {\r\n      return this.text(value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.dat = function(value) {\r\n      return this.cdata(value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.com = function(value) {\r\n      return this.comment(value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.ins = function(target, value) {\r\n      return this.instruction(target, value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.dec = function(version, encoding, standalone) {\r\n      return this.declaration(version, encoding, standalone);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.dtd = function(root, pubID, sysID) {\r\n      return this.doctype(root, pubID, sysID);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.e = function(name, attributes, text) {\r\n      return this.element(name, attributes, text);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.n = function(name, attributes, text) {\r\n      return this.node(name, attributes, text);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.t = function(value) {\r\n      return this.text(value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.d = function(value) {\r\n      return this.cdata(value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.c = function(value) {\r\n      return this.comment(value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.r = function(value) {\r\n      return this.raw(value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.i = function(target, value) {\r\n      return this.instruction(target, value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.att = function() {\r\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\r\n        return this.attList.apply(this, arguments);\r\n      } else {\r\n        return this.attribute.apply(this, arguments);\r\n      }\r\n    };\r\n\r\n    XMLDocumentCB.prototype.a = function() {\r\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\r\n        return this.attList.apply(this, arguments);\r\n      } else {\r\n        return this.attribute.apply(this, arguments);\r\n      }\r\n    };\r\n\r\n    XMLDocumentCB.prototype.ent = function(name, value) {\r\n      return this.entity(name, value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.pent = function(name, value) {\r\n      return this.pEntity(name, value);\r\n    };\r\n\r\n    XMLDocumentCB.prototype.not = function(name, value) {\r\n      return this.notation(name, value);\r\n    };\r\n\r\n    return XMLDocumentCB;\r\n\r\n  })();\r\n\r\n}).call(this);\r\n\r\n},{\"./Utility\":124,\"./XMLAttribute\":125,\"./XMLCData\":126,\"./XMLComment\":127,\"./XMLDTDAttList\":128,\"./XMLDTDElement\":129,\"./XMLDTDEntity\":130,\"./XMLDTDNotation\":131,\"./XMLDeclaration\":132,\"./XMLDocType\":133,\"./XMLElement\":136,\"./XMLProcessingInstruction\":138,\"./XMLRaw\":139,\"./XMLStringWriter\":141,\"./XMLStringifier\":142,\"./XMLText\":143}],136:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLAttribute, XMLElement, XMLNode, isFunction, isObject, ref,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  XMLAttribute = require('./XMLAttribute');\r\n\r\n  module.exports = XMLElement = (function(superClass) {\r\n    extend(XMLElement, superClass);\r\n\r\n    function XMLElement(parent, name, attributes) {\r\n      XMLElement.__super__.constructor.call(this, parent);\r\n      if (name == null) {\r\n        throw new Error(\"Missing element name\");\r\n      }\r\n      this.name = this.stringify.eleName(name);\r\n      this.attributes = {};\r\n      if (attributes != null) {\r\n        this.attribute(attributes);\r\n      }\r\n      if (parent.isDocument) {\r\n        this.isRoot = true;\r\n        this.documentObject = parent;\r\n        parent.rootObject = this;\r\n      }\r\n    }\r\n\r\n    XMLElement.prototype.clone = function() {\r\n      var att, attName, clonedSelf, ref1;\r\n      clonedSelf = Object.create(this);\r\n      if (clonedSelf.isRoot) {\r\n        clonedSelf.documentObject = null;\r\n      }\r\n      clonedSelf.attributes = {};\r\n      ref1 = this.attributes;\r\n      for (attName in ref1) {\r\n        if (!hasProp.call(ref1, attName)) continue;\r\n        att = ref1[attName];\r\n        clonedSelf.attributes[attName] = att.clone();\r\n      }\r\n      clonedSelf.children = [];\r\n      this.children.forEach(function(child) {\r\n        var clonedChild;\r\n        clonedChild = child.clone();\r\n        clonedChild.parent = clonedSelf;\r\n        return clonedSelf.children.push(clonedChild);\r\n      });\r\n      return clonedSelf;\r\n    };\r\n\r\n    XMLElement.prototype.attribute = function(name, value) {\r\n      var attName, attValue;\r\n      if (name != null) {\r\n        name = name.valueOf();\r\n      }\r\n      if (isObject(name)) {\r\n        for (attName in name) {\r\n          if (!hasProp.call(name, attName)) continue;\r\n          attValue = name[attName];\r\n          this.attribute(attName, attValue);\r\n        }\r\n      } else {\r\n        if (isFunction(value)) {\r\n          value = value.apply();\r\n        }\r\n        if (!this.options.skipNullAttributes || (value != null)) {\r\n          this.attributes[name] = new XMLAttribute(this, name, value);\r\n        }\r\n      }\r\n      return this;\r\n    };\r\n\r\n    XMLElement.prototype.removeAttribute = function(name) {\r\n      var attName, i, len;\r\n      if (name == null) {\r\n        throw new Error(\"Missing attribute name\");\r\n      }\r\n      name = name.valueOf();\r\n      if (Array.isArray(name)) {\r\n        for (i = 0, len = name.length; i < len; i++) {\r\n          attName = name[i];\r\n          delete this.attributes[attName];\r\n        }\r\n      } else {\r\n        delete this.attributes[name];\r\n      }\r\n      return this;\r\n    };\r\n\r\n    XMLElement.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).element(this);\r\n    };\r\n\r\n    XMLElement.prototype.att = function(name, value) {\r\n      return this.attribute(name, value);\r\n    };\r\n\r\n    XMLElement.prototype.a = function(name, value) {\r\n      return this.attribute(name, value);\r\n    };\r\n\r\n    return XMLElement;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./Utility\":124,\"./XMLAttribute\":125,\"./XMLNode\":137}],137:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLElement, XMLNode, XMLProcessingInstruction, XMLRaw, XMLText, isEmpty, isFunction, isObject, ref,\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isEmpty = ref.isEmpty;\r\n\r\n  XMLElement = null;\r\n\r\n  XMLCData = null;\r\n\r\n  XMLComment = null;\r\n\r\n  XMLDeclaration = null;\r\n\r\n  XMLDocType = null;\r\n\r\n  XMLRaw = null;\r\n\r\n  XMLText = null;\r\n\r\n  XMLProcessingInstruction = null;\r\n\r\n  module.exports = XMLNode = (function() {\r\n    function XMLNode(parent) {\r\n      this.parent = parent;\r\n      if (this.parent) {\r\n        this.options = this.parent.options;\r\n        this.stringify = this.parent.stringify;\r\n      }\r\n      this.children = [];\r\n      if (!XMLElement) {\r\n        XMLElement = require('./XMLElement');\r\n        XMLCData = require('./XMLCData');\r\n        XMLComment = require('./XMLComment');\r\n        XMLDeclaration = require('./XMLDeclaration');\r\n        XMLDocType = require('./XMLDocType');\r\n        XMLRaw = require('./XMLRaw');\r\n        XMLText = require('./XMLText');\r\n        XMLProcessingInstruction = require('./XMLProcessingInstruction');\r\n      }\r\n    }\r\n\r\n    XMLNode.prototype.element = function(name, attributes, text) {\r\n      var childNode, item, j, k, key, lastChild, len, len1, ref1, val;\r\n      lastChild = null;\r\n      if (attributes == null) {\r\n        attributes = {};\r\n      }\r\n      attributes = attributes.valueOf();\r\n      if (!isObject(attributes)) {\r\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\r\n      }\r\n      if (name != null) {\r\n        name = name.valueOf();\r\n      }\r\n      if (Array.isArray(name)) {\r\n        for (j = 0, len = name.length; j < len; j++) {\r\n          item = name[j];\r\n          lastChild = this.element(item);\r\n        }\r\n      } else if (isFunction(name)) {\r\n        lastChild = this.element(name.apply());\r\n      } else if (isObject(name)) {\r\n        for (key in name) {\r\n          if (!hasProp.call(name, key)) continue;\r\n          val = name[key];\r\n          if (isFunction(val)) {\r\n            val = val.apply();\r\n          }\r\n          if ((isObject(val)) && (isEmpty(val))) {\r\n            val = null;\r\n          }\r\n          if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\r\n            lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\r\n          } else if (!this.options.separateArrayItems && Array.isArray(val)) {\r\n            for (k = 0, len1 = val.length; k < len1; k++) {\r\n              item = val[k];\r\n              childNode = {};\r\n              childNode[key] = item;\r\n              lastChild = this.element(childNode);\r\n            }\r\n          } else if (isObject(val)) {\r\n            lastChild = this.element(key);\r\n            lastChild.element(val);\r\n          } else {\r\n            lastChild = this.element(key, val);\r\n          }\r\n        }\r\n      } else {\r\n        if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\r\n          lastChild = this.text(text);\r\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\r\n          lastChild = this.cdata(text);\r\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\r\n          lastChild = this.comment(text);\r\n        } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\r\n          lastChild = this.raw(text);\r\n        } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {\r\n          lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);\r\n        } else {\r\n          lastChild = this.node(name, attributes, text);\r\n        }\r\n      }\r\n      if (lastChild == null) {\r\n        throw new Error(\"Could not create any elements with: \" + name);\r\n      }\r\n      return lastChild;\r\n    };\r\n\r\n    XMLNode.prototype.insertBefore = function(name, attributes, text) {\r\n      var child, i, removed;\r\n      if (this.isRoot) {\r\n        throw new Error(\"Cannot insert elements at root level\");\r\n      }\r\n      i = this.parent.children.indexOf(this);\r\n      removed = this.parent.children.splice(i);\r\n      child = this.parent.element(name, attributes, text);\r\n      Array.prototype.push.apply(this.parent.children, removed);\r\n      return child;\r\n    };\r\n\r\n    XMLNode.prototype.insertAfter = function(name, attributes, text) {\r\n      var child, i, removed;\r\n      if (this.isRoot) {\r\n        throw new Error(\"Cannot insert elements at root level\");\r\n      }\r\n      i = this.parent.children.indexOf(this);\r\n      removed = this.parent.children.splice(i + 1);\r\n      child = this.parent.element(name, attributes, text);\r\n      Array.prototype.push.apply(this.parent.children, removed);\r\n      return child;\r\n    };\r\n\r\n    XMLNode.prototype.remove = function() {\r\n      var i, ref1;\r\n      if (this.isRoot) {\r\n        throw new Error(\"Cannot remove the root element\");\r\n      }\r\n      i = this.parent.children.indexOf(this);\r\n      [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref1 = [])), ref1;\r\n      return this.parent;\r\n    };\r\n\r\n    XMLNode.prototype.node = function(name, attributes, text) {\r\n      var child, ref1;\r\n      if (name != null) {\r\n        name = name.valueOf();\r\n      }\r\n      attributes || (attributes = {});\r\n      attributes = attributes.valueOf();\r\n      if (!isObject(attributes)) {\r\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\r\n      }\r\n      child = new XMLElement(this, name, attributes);\r\n      if (text != null) {\r\n        child.text(text);\r\n      }\r\n      this.children.push(child);\r\n      return child;\r\n    };\r\n\r\n    XMLNode.prototype.text = function(value) {\r\n      var child;\r\n      child = new XMLText(this, value);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.cdata = function(value) {\r\n      var child;\r\n      child = new XMLCData(this, value);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.comment = function(value) {\r\n      var child;\r\n      child = new XMLComment(this, value);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.commentBefore = function(value) {\r\n      var child, i, removed;\r\n      i = this.parent.children.indexOf(this);\r\n      removed = this.parent.children.splice(i);\r\n      child = this.parent.comment(value);\r\n      Array.prototype.push.apply(this.parent.children, removed);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.commentAfter = function(value) {\r\n      var child, i, removed;\r\n      i = this.parent.children.indexOf(this);\r\n      removed = this.parent.children.splice(i + 1);\r\n      child = this.parent.comment(value);\r\n      Array.prototype.push.apply(this.parent.children, removed);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.raw = function(value) {\r\n      var child;\r\n      child = new XMLRaw(this, value);\r\n      this.children.push(child);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.instruction = function(target, value) {\r\n      var insTarget, insValue, instruction, j, len;\r\n      if (target != null) {\r\n        target = target.valueOf();\r\n      }\r\n      if (value != null) {\r\n        value = value.valueOf();\r\n      }\r\n      if (Array.isArray(target)) {\r\n        for (j = 0, len = target.length; j < len; j++) {\r\n          insTarget = target[j];\r\n          this.instruction(insTarget);\r\n        }\r\n      } else if (isObject(target)) {\r\n        for (insTarget in target) {\r\n          if (!hasProp.call(target, insTarget)) continue;\r\n          insValue = target[insTarget];\r\n          this.instruction(insTarget, insValue);\r\n        }\r\n      } else {\r\n        if (isFunction(value)) {\r\n          value = value.apply();\r\n        }\r\n        instruction = new XMLProcessingInstruction(this, target, value);\r\n        this.children.push(instruction);\r\n      }\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.instructionBefore = function(target, value) {\r\n      var child, i, removed;\r\n      i = this.parent.children.indexOf(this);\r\n      removed = this.parent.children.splice(i);\r\n      child = this.parent.instruction(target, value);\r\n      Array.prototype.push.apply(this.parent.children, removed);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.instructionAfter = function(target, value) {\r\n      var child, i, removed;\r\n      i = this.parent.children.indexOf(this);\r\n      removed = this.parent.children.splice(i + 1);\r\n      child = this.parent.instruction(target, value);\r\n      Array.prototype.push.apply(this.parent.children, removed);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.declaration = function(version, encoding, standalone) {\r\n      var doc, xmldec;\r\n      doc = this.document();\r\n      xmldec = new XMLDeclaration(doc, version, encoding, standalone);\r\n      if (doc.children[0] instanceof XMLDeclaration) {\r\n        doc.children[0] = xmldec;\r\n      } else {\r\n        doc.children.unshift(xmldec);\r\n      }\r\n      return doc.root() || doc;\r\n    };\r\n\r\n    XMLNode.prototype.doctype = function(pubID, sysID) {\r\n      var child, doc, doctype, i, j, k, len, len1, ref1, ref2;\r\n      doc = this.document();\r\n      doctype = new XMLDocType(doc, pubID, sysID);\r\n      ref1 = doc.children;\r\n      for (i = j = 0, len = ref1.length; j < len; i = ++j) {\r\n        child = ref1[i];\r\n        if (child instanceof XMLDocType) {\r\n          doc.children[i] = doctype;\r\n          return doctype;\r\n        }\r\n      }\r\n      ref2 = doc.children;\r\n      for (i = k = 0, len1 = ref2.length; k < len1; i = ++k) {\r\n        child = ref2[i];\r\n        if (child.isRoot) {\r\n          doc.children.splice(i, 0, doctype);\r\n          return doctype;\r\n        }\r\n      }\r\n      doc.children.push(doctype);\r\n      return doctype;\r\n    };\r\n\r\n    XMLNode.prototype.up = function() {\r\n      if (this.isRoot) {\r\n        throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\r\n      }\r\n      return this.parent;\r\n    };\r\n\r\n    XMLNode.prototype.root = function() {\r\n      var node;\r\n      node = this;\r\n      while (node) {\r\n        if (node.isDocument) {\r\n          return node.rootObject;\r\n        } else if (node.isRoot) {\r\n          return node;\r\n        } else {\r\n          node = node.parent;\r\n        }\r\n      }\r\n    };\r\n\r\n    XMLNode.prototype.document = function() {\r\n      var node;\r\n      node = this;\r\n      while (node) {\r\n        if (node.isDocument) {\r\n          return node;\r\n        } else {\r\n          node = node.parent;\r\n        }\r\n      }\r\n    };\r\n\r\n    XMLNode.prototype.end = function(options) {\r\n      return this.document().end(options);\r\n    };\r\n\r\n    XMLNode.prototype.prev = function() {\r\n      var i;\r\n      i = this.parent.children.indexOf(this);\r\n      if (i < 1) {\r\n        throw new Error(\"Already at the first node\");\r\n      }\r\n      return this.parent.children[i - 1];\r\n    };\r\n\r\n    XMLNode.prototype.next = function() {\r\n      var i;\r\n      i = this.parent.children.indexOf(this);\r\n      if (i === -1 || i === this.parent.children.length - 1) {\r\n        throw new Error(\"Already at the last node\");\r\n      }\r\n      return this.parent.children[i + 1];\r\n    };\r\n\r\n    XMLNode.prototype.importDocument = function(doc) {\r\n      var clonedRoot;\r\n      clonedRoot = doc.root().clone();\r\n      clonedRoot.parent = this;\r\n      clonedRoot.isRoot = false;\r\n      this.children.push(clonedRoot);\r\n      return this;\r\n    };\r\n\r\n    XMLNode.prototype.ele = function(name, attributes, text) {\r\n      return this.element(name, attributes, text);\r\n    };\r\n\r\n    XMLNode.prototype.nod = function(name, attributes, text) {\r\n      return this.node(name, attributes, text);\r\n    };\r\n\r\n    XMLNode.prototype.txt = function(value) {\r\n      return this.text(value);\r\n    };\r\n\r\n    XMLNode.prototype.dat = function(value) {\r\n      return this.cdata(value);\r\n    };\r\n\r\n    XMLNode.prototype.com = function(value) {\r\n      return this.comment(value);\r\n    };\r\n\r\n    XMLNode.prototype.ins = function(target, value) {\r\n      return this.instruction(target, value);\r\n    };\r\n\r\n    XMLNode.prototype.doc = function() {\r\n      return this.document();\r\n    };\r\n\r\n    XMLNode.prototype.dec = function(version, encoding, standalone) {\r\n      return this.declaration(version, encoding, standalone);\r\n    };\r\n\r\n    XMLNode.prototype.dtd = function(pubID, sysID) {\r\n      return this.doctype(pubID, sysID);\r\n    };\r\n\r\n    XMLNode.prototype.e = function(name, attributes, text) {\r\n      return this.element(name, attributes, text);\r\n    };\r\n\r\n    XMLNode.prototype.n = function(name, attributes, text) {\r\n      return this.node(name, attributes, text);\r\n    };\r\n\r\n    XMLNode.prototype.t = function(value) {\r\n      return this.text(value);\r\n    };\r\n\r\n    XMLNode.prototype.d = function(value) {\r\n      return this.cdata(value);\r\n    };\r\n\r\n    XMLNode.prototype.c = function(value) {\r\n      return this.comment(value);\r\n    };\r\n\r\n    XMLNode.prototype.r = function(value) {\r\n      return this.raw(value);\r\n    };\r\n\r\n    XMLNode.prototype.i = function(target, value) {\r\n      return this.instruction(target, value);\r\n    };\r\n\r\n    XMLNode.prototype.u = function() {\r\n      return this.up();\r\n    };\r\n\r\n    XMLNode.prototype.importXMLBuilder = function(doc) {\r\n      return this.importDocument(doc);\r\n    };\r\n\r\n    return XMLNode;\r\n\r\n  })();\r\n\r\n}).call(this);\r\n\r\n},{\"./Utility\":124,\"./XMLCData\":126,\"./XMLComment\":127,\"./XMLDeclaration\":132,\"./XMLDocType\":133,\"./XMLElement\":136,\"./XMLProcessingInstruction\":138,\"./XMLRaw\":139,\"./XMLText\":143}],138:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLNode, XMLProcessingInstruction,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLProcessingInstruction = (function(superClass) {\r\n    extend(XMLProcessingInstruction, superClass);\r\n\r\n    function XMLProcessingInstruction(parent, target, value) {\r\n      XMLProcessingInstruction.__super__.constructor.call(this, parent);\r\n      if (target == null) {\r\n        throw new Error(\"Missing instruction target\");\r\n      }\r\n      this.target = this.stringify.insTarget(target);\r\n      if (value) {\r\n        this.value = this.stringify.insValue(value);\r\n      }\r\n    }\r\n\r\n    XMLProcessingInstruction.prototype.clone = function() {\r\n      return Object.create(this);\r\n    };\r\n\r\n    XMLProcessingInstruction.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).processingInstruction(this);\r\n    };\r\n\r\n    return XMLProcessingInstruction;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLNode\":137}],139:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLNode, XMLRaw,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLRaw = (function(superClass) {\r\n    extend(XMLRaw, superClass);\r\n\r\n    function XMLRaw(parent, text) {\r\n      XMLRaw.__super__.constructor.call(this, parent);\r\n      if (text == null) {\r\n        throw new Error(\"Missing raw text\");\r\n      }\r\n      this.value = this.stringify.raw(text);\r\n    }\r\n\r\n    XMLRaw.prototype.clone = function() {\r\n      return Object.create(this);\r\n    };\r\n\r\n    XMLRaw.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).raw(this);\r\n    };\r\n\r\n    return XMLRaw;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLNode\":137}],140:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStreamWriter, XMLText, XMLWriterBase,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLDeclaration = require('./XMLDeclaration');\r\n\r\n  XMLDocType = require('./XMLDocType');\r\n\r\n  XMLCData = require('./XMLCData');\r\n\r\n  XMLComment = require('./XMLComment');\r\n\r\n  XMLElement = require('./XMLElement');\r\n\r\n  XMLRaw = require('./XMLRaw');\r\n\r\n  XMLText = require('./XMLText');\r\n\r\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\r\n\r\n  XMLDTDAttList = require('./XMLDTDAttList');\r\n\r\n  XMLDTDElement = require('./XMLDTDElement');\r\n\r\n  XMLDTDEntity = require('./XMLDTDEntity');\r\n\r\n  XMLDTDNotation = require('./XMLDTDNotation');\r\n\r\n  XMLWriterBase = require('./XMLWriterBase');\r\n\r\n  module.exports = XMLStreamWriter = (function(superClass) {\r\n    extend(XMLStreamWriter, superClass);\r\n\r\n    function XMLStreamWriter(stream, options) {\r\n      XMLStreamWriter.__super__.constructor.call(this, options);\r\n      this.stream = stream;\r\n    }\r\n\r\n    XMLStreamWriter.prototype.document = function(doc) {\r\n      var child, i, j, len, len1, ref, ref1, results;\r\n      ref = doc.children;\r\n      for (i = 0, len = ref.length; i < len; i++) {\r\n        child = ref[i];\r\n        child.isLastRootNode = false;\r\n      }\r\n      doc.children[doc.children.length - 1].isLastRootNode = true;\r\n      ref1 = doc.children;\r\n      results = [];\r\n      for (j = 0, len1 = ref1.length; j < len1; j++) {\r\n        child = ref1[j];\r\n        switch (false) {\r\n          case !(child instanceof XMLDeclaration):\r\n            results.push(this.declaration(child));\r\n            break;\r\n          case !(child instanceof XMLDocType):\r\n            results.push(this.docType(child));\r\n            break;\r\n          case !(child instanceof XMLComment):\r\n            results.push(this.comment(child));\r\n            break;\r\n          case !(child instanceof XMLProcessingInstruction):\r\n            results.push(this.processingInstruction(child));\r\n            break;\r\n          default:\r\n            results.push(this.element(child));\r\n        }\r\n      }\r\n      return results;\r\n    };\r\n\r\n    XMLStreamWriter.prototype.attribute = function(att) {\r\n      return this.stream.write(' ' + att.name + '=\"' + att.value + '\"');\r\n    };\r\n\r\n    XMLStreamWriter.prototype.cdata = function(node, level) {\r\n      return this.stream.write(this.space(level) + '<![CDATA[' + node.text + ']]>' + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.comment = function(node, level) {\r\n      return this.stream.write(this.space(level) + '<!-- ' + node.text + ' -->' + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.declaration = function(node, level) {\r\n      this.stream.write(this.space(level));\r\n      this.stream.write('<?xml version=\"' + node.version + '\"');\r\n      if (node.encoding != null) {\r\n        this.stream.write(' encoding=\"' + node.encoding + '\"');\r\n      }\r\n      if (node.standalone != null) {\r\n        this.stream.write(' standalone=\"' + node.standalone + '\"');\r\n      }\r\n      this.stream.write(this.spacebeforeslash + '?>');\r\n      return this.stream.write(this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.docType = function(node, level) {\r\n      var child, i, len, ref;\r\n      level || (level = 0);\r\n      this.stream.write(this.space(level));\r\n      this.stream.write('<!DOCTYPE ' + node.root().name);\r\n      if (node.pubID && node.sysID) {\r\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\r\n      } else if (node.sysID) {\r\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\r\n      }\r\n      if (node.children.length > 0) {\r\n        this.stream.write(' [');\r\n        this.stream.write(this.endline(node));\r\n        ref = node.children;\r\n        for (i = 0, len = ref.length; i < len; i++) {\r\n          child = ref[i];\r\n          switch (false) {\r\n            case !(child instanceof XMLDTDAttList):\r\n              this.dtdAttList(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLDTDElement):\r\n              this.dtdElement(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLDTDEntity):\r\n              this.dtdEntity(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLDTDNotation):\r\n              this.dtdNotation(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLCData):\r\n              this.cdata(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLComment):\r\n              this.comment(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLProcessingInstruction):\r\n              this.processingInstruction(child, level + 1);\r\n              break;\r\n            default:\r\n              throw new Error(\"Unknown DTD node type: \" + child.constructor.name);\r\n          }\r\n        }\r\n        this.stream.write(']');\r\n      }\r\n      this.stream.write(this.spacebeforeslash + '>');\r\n      return this.stream.write(this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.element = function(node, level) {\r\n      var att, child, i, len, name, ref, ref1, space;\r\n      level || (level = 0);\r\n      space = this.space(level);\r\n      this.stream.write(space + '<' + node.name);\r\n      ref = node.attributes;\r\n      for (name in ref) {\r\n        if (!hasProp.call(ref, name)) continue;\r\n        att = ref[name];\r\n        this.attribute(att);\r\n      }\r\n      if (node.children.length === 0 || node.children.every(function(e) {\r\n        return e.value === '';\r\n      })) {\r\n        if (this.allowEmpty) {\r\n          this.stream.write('></' + node.name + '>');\r\n        } else {\r\n          this.stream.write(this.spacebeforeslash + '/>');\r\n        }\r\n      } else if (this.pretty && node.children.length === 1 && (node.children[0].value != null)) {\r\n        this.stream.write('>');\r\n        this.stream.write(node.children[0].value);\r\n        this.stream.write('</' + node.name + '>');\r\n      } else {\r\n        this.stream.write('>' + this.newline);\r\n        ref1 = node.children;\r\n        for (i = 0, len = ref1.length; i < len; i++) {\r\n          child = ref1[i];\r\n          switch (false) {\r\n            case !(child instanceof XMLCData):\r\n              this.cdata(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLComment):\r\n              this.comment(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLElement):\r\n              this.element(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLRaw):\r\n              this.raw(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLText):\r\n              this.text(child, level + 1);\r\n              break;\r\n            case !(child instanceof XMLProcessingInstruction):\r\n              this.processingInstruction(child, level + 1);\r\n              break;\r\n            default:\r\n              throw new Error(\"Unknown XML node type: \" + child.constructor.name);\r\n          }\r\n        }\r\n        this.stream.write(space + '</' + node.name + '>');\r\n      }\r\n      return this.stream.write(this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.processingInstruction = function(node, level) {\r\n      this.stream.write(this.space(level) + '<?' + node.target);\r\n      if (node.value) {\r\n        this.stream.write(' ' + node.value);\r\n      }\r\n      return this.stream.write(this.spacebeforeslash + '?>' + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.raw = function(node, level) {\r\n      return this.stream.write(this.space(level) + node.value + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.text = function(node, level) {\r\n      return this.stream.write(this.space(level) + node.value + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.dtdAttList = function(node, level) {\r\n      this.stream.write(this.space(level) + '<!ATTLIST ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType);\r\n      if (node.defaultValueType !== '#DEFAULT') {\r\n        this.stream.write(' ' + node.defaultValueType);\r\n      }\r\n      if (node.defaultValue) {\r\n        this.stream.write(' \"' + node.defaultValue + '\"');\r\n      }\r\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.dtdElement = function(node, level) {\r\n      this.stream.write(this.space(level) + '<!ELEMENT ' + node.name + ' ' + node.value);\r\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.dtdEntity = function(node, level) {\r\n      this.stream.write(this.space(level) + '<!ENTITY');\r\n      if (node.pe) {\r\n        this.stream.write(' %');\r\n      }\r\n      this.stream.write(' ' + node.name);\r\n      if (node.value) {\r\n        this.stream.write(' \"' + node.value + '\"');\r\n      } else {\r\n        if (node.pubID && node.sysID) {\r\n          this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\r\n        } else if (node.sysID) {\r\n          this.stream.write(' SYSTEM \"' + node.sysID + '\"');\r\n        }\r\n        if (node.nData) {\r\n          this.stream.write(' NDATA ' + node.nData);\r\n        }\r\n      }\r\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.dtdNotation = function(node, level) {\r\n      this.stream.write(this.space(level) + '<!NOTATION ' + node.name);\r\n      if (node.pubID && node.sysID) {\r\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\r\n      } else if (node.pubID) {\r\n        this.stream.write(' PUBLIC \"' + node.pubID + '\"');\r\n      } else if (node.sysID) {\r\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\r\n      }\r\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\r\n    };\r\n\r\n    XMLStreamWriter.prototype.endline = function(node) {\r\n      if (!node.isLastRootNode) {\r\n        return this.newline;\r\n      } else {\r\n        return '';\r\n      }\r\n    };\r\n\r\n    return XMLStreamWriter;\r\n\r\n  })(XMLWriterBase);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLCData\":126,\"./XMLComment\":127,\"./XMLDTDAttList\":128,\"./XMLDTDElement\":129,\"./XMLDTDEntity\":130,\"./XMLDTDNotation\":131,\"./XMLDeclaration\":132,\"./XMLDocType\":133,\"./XMLElement\":136,\"./XMLProcessingInstruction\":138,\"./XMLRaw\":139,\"./XMLText\":143,\"./XMLWriterBase\":144}],141:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLText, XMLWriterBase,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLDeclaration = require('./XMLDeclaration');\r\n\r\n  XMLDocType = require('./XMLDocType');\r\n\r\n  XMLCData = require('./XMLCData');\r\n\r\n  XMLComment = require('./XMLComment');\r\n\r\n  XMLElement = require('./XMLElement');\r\n\r\n  XMLRaw = require('./XMLRaw');\r\n\r\n  XMLText = require('./XMLText');\r\n\r\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\r\n\r\n  XMLDTDAttList = require('./XMLDTDAttList');\r\n\r\n  XMLDTDElement = require('./XMLDTDElement');\r\n\r\n  XMLDTDEntity = require('./XMLDTDEntity');\r\n\r\n  XMLDTDNotation = require('./XMLDTDNotation');\r\n\r\n  XMLWriterBase = require('./XMLWriterBase');\r\n\r\n  module.exports = XMLStringWriter = (function(superClass) {\r\n    extend(XMLStringWriter, superClass);\r\n\r\n    function XMLStringWriter(options) {\r\n      XMLStringWriter.__super__.constructor.call(this, options);\r\n    }\r\n\r\n    XMLStringWriter.prototype.document = function(doc) {\r\n      var child, i, len, r, ref;\r\n      this.textispresent = false;\r\n      r = '';\r\n      ref = doc.children;\r\n      for (i = 0, len = ref.length; i < len; i++) {\r\n        child = ref[i];\r\n        r += (function() {\r\n          switch (false) {\r\n            case !(child instanceof XMLDeclaration):\r\n              return this.declaration(child);\r\n            case !(child instanceof XMLDocType):\r\n              return this.docType(child);\r\n            case !(child instanceof XMLComment):\r\n              return this.comment(child);\r\n            case !(child instanceof XMLProcessingInstruction):\r\n              return this.processingInstruction(child);\r\n            default:\r\n              return this.element(child, 0);\r\n          }\r\n        }).call(this);\r\n      }\r\n      if (this.pretty && r.slice(-this.newline.length) === this.newline) {\r\n        r = r.slice(0, -this.newline.length);\r\n      }\r\n      return r;\r\n    };\r\n\r\n    XMLStringWriter.prototype.attribute = function(att) {\r\n      return ' ' + att.name + '=\"' + att.value + '\"';\r\n    };\r\n\r\n    XMLStringWriter.prototype.cdata = function(node, level) {\r\n      return this.space(level) + '<![CDATA[' + node.text + ']]>' + this.newline;\r\n    };\r\n\r\n    XMLStringWriter.prototype.comment = function(node, level) {\r\n      return this.space(level) + '<!-- ' + node.text + ' -->' + this.newline;\r\n    };\r\n\r\n    XMLStringWriter.prototype.declaration = function(node, level) {\r\n      var r;\r\n      r = this.space(level);\r\n      r += '<?xml version=\"' + node.version + '\"';\r\n      if (node.encoding != null) {\r\n        r += ' encoding=\"' + node.encoding + '\"';\r\n      }\r\n      if (node.standalone != null) {\r\n        r += ' standalone=\"' + node.standalone + '\"';\r\n      }\r\n      r += this.spacebeforeslash + '?>';\r\n      r += this.newline;\r\n      return r;\r\n    };\r\n\r\n    XMLStringWriter.prototype.docType = function(node, level) {\r\n      var child, i, len, r, ref;\r\n      level || (level = 0);\r\n      r = this.space(level);\r\n      r += '<!DOCTYPE ' + node.root().name;\r\n      if (node.pubID && node.sysID) {\r\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\r\n      } else if (node.sysID) {\r\n        r += ' SYSTEM \"' + node.sysID + '\"';\r\n      }\r\n      if (node.children.length > 0) {\r\n        r += ' [';\r\n        r += this.newline;\r\n        ref = node.children;\r\n        for (i = 0, len = ref.length; i < len; i++) {\r\n          child = ref[i];\r\n          r += (function() {\r\n            switch (false) {\r\n              case !(child instanceof XMLDTDAttList):\r\n                return this.dtdAttList(child, level + 1);\r\n              case !(child instanceof XMLDTDElement):\r\n                return this.dtdElement(child, level + 1);\r\n              case !(child instanceof XMLDTDEntity):\r\n                return this.dtdEntity(child, level + 1);\r\n              case !(child instanceof XMLDTDNotation):\r\n                return this.dtdNotation(child, level + 1);\r\n              case !(child instanceof XMLCData):\r\n                return this.cdata(child, level + 1);\r\n              case !(child instanceof XMLComment):\r\n                return this.comment(child, level + 1);\r\n              case !(child instanceof XMLProcessingInstruction):\r\n                return this.processingInstruction(child, level + 1);\r\n              default:\r\n                throw new Error(\"Unknown DTD node type: \" + child.constructor.name);\r\n            }\r\n          }).call(this);\r\n        }\r\n        r += ']';\r\n      }\r\n      r += this.spacebeforeslash + '>';\r\n      r += this.newline;\r\n      return r;\r\n    };\r\n\r\n    XMLStringWriter.prototype.element = function(node, level) {\r\n      var att, child, i, j, len, len1, name, r, ref, ref1, ref2, space, textispresentwasset;\r\n      level || (level = 0);\r\n      textispresentwasset = false;\r\n      if (this.textispresent) {\r\n        this.newline = '';\r\n        this.pretty = false;\r\n      } else {\r\n        this.newline = this.newlinedefault;\r\n        this.pretty = this.prettydefault;\r\n      }\r\n      space = this.space(level);\r\n      r = '';\r\n      r += space + '<' + node.name;\r\n      ref = node.attributes;\r\n      for (name in ref) {\r\n        if (!hasProp.call(ref, name)) continue;\r\n        att = ref[name];\r\n        r += this.attribute(att);\r\n      }\r\n      if (node.children.length === 0 || node.children.every(function(e) {\r\n        return e.value === '';\r\n      })) {\r\n        if (this.allowEmpty) {\r\n          r += '></' + node.name + '>' + this.newline;\r\n        } else {\r\n          r += this.spacebeforeslash + '/>' + this.newline;\r\n        }\r\n      } else if (this.pretty && node.children.length === 1 && (node.children[0].value != null)) {\r\n        r += '>';\r\n        r += node.children[0].value;\r\n        r += '</' + node.name + '>' + this.newline;\r\n      } else {\r\n        if (this.dontprettytextnodes) {\r\n          ref1 = node.children;\r\n          for (i = 0, len = ref1.length; i < len; i++) {\r\n            child = ref1[i];\r\n            if (child.value != null) {\r\n              this.textispresent++;\r\n              textispresentwasset = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        if (this.textispresent) {\r\n          this.newline = '';\r\n          this.pretty = false;\r\n          space = this.space(level);\r\n        }\r\n        r += '>' + this.newline;\r\n        ref2 = node.children;\r\n        for (j = 0, len1 = ref2.length; j < len1; j++) {\r\n          child = ref2[j];\r\n          r += (function() {\r\n            switch (false) {\r\n              case !(child instanceof XMLCData):\r\n                return this.cdata(child, level + 1);\r\n              case !(child instanceof XMLComment):\r\n                return this.comment(child, level + 1);\r\n              case !(child instanceof XMLElement):\r\n                return this.element(child, level + 1);\r\n              case !(child instanceof XMLRaw):\r\n                return this.raw(child, level + 1);\r\n              case !(child instanceof XMLText):\r\n                return this.text(child, level + 1);\r\n              case !(child instanceof XMLProcessingInstruction):\r\n                return this.processingInstruction(child, level + 1);\r\n              default:\r\n                throw new Error(\"Unknown XML node type: \" + child.constructor.name);\r\n            }\r\n          }).call(this);\r\n        }\r\n        if (textispresentwasset) {\r\n          this.textispresent--;\r\n        }\r\n        if (!this.textispresent) {\r\n          this.newline = this.newlinedefault;\r\n          this.pretty = this.prettydefault;\r\n        }\r\n        r += space + '</' + node.name + '>' + this.newline;\r\n      }\r\n      return r;\r\n    };\r\n\r\n    XMLStringWriter.prototype.processingInstruction = function(node, level) {\r\n      var r;\r\n      r = this.space(level) + '<?' + node.target;\r\n      if (node.value) {\r\n        r += ' ' + node.value;\r\n      }\r\n      r += this.spacebeforeslash + '?>' + this.newline;\r\n      return r;\r\n    };\r\n\r\n    XMLStringWriter.prototype.raw = function(node, level) {\r\n      return this.space(level) + node.value + this.newline;\r\n    };\r\n\r\n    XMLStringWriter.prototype.text = function(node, level) {\r\n      return this.space(level) + node.value + this.newline;\r\n    };\r\n\r\n    XMLStringWriter.prototype.dtdAttList = function(node, level) {\r\n      var r;\r\n      r = this.space(level) + '<!ATTLIST ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType;\r\n      if (node.defaultValueType !== '#DEFAULT') {\r\n        r += ' ' + node.defaultValueType;\r\n      }\r\n      if (node.defaultValue) {\r\n        r += ' \"' + node.defaultValue + '\"';\r\n      }\r\n      r += this.spacebeforeslash + '>' + this.newline;\r\n      return r;\r\n    };\r\n\r\n    XMLStringWriter.prototype.dtdElement = function(node, level) {\r\n      return this.space(level) + '<!ELEMENT ' + node.name + ' ' + node.value + this.spacebeforeslash + '>' + this.newline;\r\n    };\r\n\r\n    XMLStringWriter.prototype.dtdEntity = function(node, level) {\r\n      var r;\r\n      r = this.space(level) + '<!ENTITY';\r\n      if (node.pe) {\r\n        r += ' %';\r\n      }\r\n      r += ' ' + node.name;\r\n      if (node.value) {\r\n        r += ' \"' + node.value + '\"';\r\n      } else {\r\n        if (node.pubID && node.sysID) {\r\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\r\n        } else if (node.sysID) {\r\n          r += ' SYSTEM \"' + node.sysID + '\"';\r\n        }\r\n        if (node.nData) {\r\n          r += ' NDATA ' + node.nData;\r\n        }\r\n      }\r\n      r += this.spacebeforeslash + '>' + this.newline;\r\n      return r;\r\n    };\r\n\r\n    XMLStringWriter.prototype.dtdNotation = function(node, level) {\r\n      var r;\r\n      r = this.space(level) + '<!NOTATION ' + node.name;\r\n      if (node.pubID && node.sysID) {\r\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\r\n      } else if (node.pubID) {\r\n        r += ' PUBLIC \"' + node.pubID + '\"';\r\n      } else if (node.sysID) {\r\n        r += ' SYSTEM \"' + node.sysID + '\"';\r\n      }\r\n      r += this.spacebeforeslash + '>' + this.newline;\r\n      return r;\r\n    };\r\n\r\n    XMLStringWriter.prototype.openNode = function(node, level) {\r\n      var att, name, r, ref;\r\n      level || (level = 0);\r\n      if (node instanceof XMLElement) {\r\n        r = this.space(level) + '<' + node.name;\r\n        ref = node.attributes;\r\n        for (name in ref) {\r\n          if (!hasProp.call(ref, name)) continue;\r\n          att = ref[name];\r\n          r += this.attribute(att);\r\n        }\r\n        r += (node.children ? '>' : '/>') + this.newline;\r\n        return r;\r\n      } else {\r\n        r = this.space(level) + '<!DOCTYPE ' + node.rootNodeName;\r\n        if (node.pubID && node.sysID) {\r\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\r\n        } else if (node.sysID) {\r\n          r += ' SYSTEM \"' + node.sysID + '\"';\r\n        }\r\n        r += (node.children ? ' [' : '>') + this.newline;\r\n        return r;\r\n      }\r\n    };\r\n\r\n    XMLStringWriter.prototype.closeNode = function(node, level) {\r\n      level || (level = 0);\r\n      switch (false) {\r\n        case !(node instanceof XMLElement):\r\n          return this.space(level) + '</' + node.name + '>' + this.newline;\r\n        case !(node instanceof XMLDocType):\r\n          return this.space(level) + ']>' + this.newline;\r\n      }\r\n    };\r\n\r\n    return XMLStringWriter;\r\n\r\n  })(XMLWriterBase);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLCData\":126,\"./XMLComment\":127,\"./XMLDTDAttList\":128,\"./XMLDTDElement\":129,\"./XMLDTDEntity\":130,\"./XMLDTDNotation\":131,\"./XMLDeclaration\":132,\"./XMLDocType\":133,\"./XMLElement\":136,\"./XMLProcessingInstruction\":138,\"./XMLRaw\":139,\"./XMLText\":143,\"./XMLWriterBase\":144}],142:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLStringifier,\r\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  module.exports = XMLStringifier = (function() {\r\n    function XMLStringifier(options) {\r\n      this.assertLegalChar = bind(this.assertLegalChar, this);\r\n      var key, ref, value;\r\n      options || (options = {});\r\n      this.noDoubleEncoding = options.noDoubleEncoding;\r\n      ref = options.stringify || {};\r\n      for (key in ref) {\r\n        if (!hasProp.call(ref, key)) continue;\r\n        value = ref[key];\r\n        this[key] = value;\r\n      }\r\n    }\r\n\r\n    XMLStringifier.prototype.eleName = function(val) {\r\n      val = '' + val || '';\r\n      return this.assertLegalChar(val);\r\n    };\r\n\r\n    XMLStringifier.prototype.eleText = function(val) {\r\n      val = '' + val || '';\r\n      return this.assertLegalChar(this.elEscape(val));\r\n    };\r\n\r\n    XMLStringifier.prototype.cdata = function(val) {\r\n      val = '' + val || '';\r\n      val = val.replace(']]>', ']]]]><![CDATA[>');\r\n      return this.assertLegalChar(val);\r\n    };\r\n\r\n    XMLStringifier.prototype.comment = function(val) {\r\n      val = '' + val || '';\r\n      if (val.match(/--/)) {\r\n        throw new Error(\"Comment text cannot contain double-hypen: \" + val);\r\n      }\r\n      return this.assertLegalChar(val);\r\n    };\r\n\r\n    XMLStringifier.prototype.raw = function(val) {\r\n      return '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.attName = function(val) {\r\n      return val = '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.attValue = function(val) {\r\n      val = '' + val || '';\r\n      return this.attEscape(val);\r\n    };\r\n\r\n    XMLStringifier.prototype.insTarget = function(val) {\r\n      return '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.insValue = function(val) {\r\n      val = '' + val || '';\r\n      if (val.match(/\\?>/)) {\r\n        throw new Error(\"Invalid processing instruction value: \" + val);\r\n      }\r\n      return val;\r\n    };\r\n\r\n    XMLStringifier.prototype.xmlVersion = function(val) {\r\n      val = '' + val || '';\r\n      if (!val.match(/1\\.[0-9]+/)) {\r\n        throw new Error(\"Invalid version number: \" + val);\r\n      }\r\n      return val;\r\n    };\r\n\r\n    XMLStringifier.prototype.xmlEncoding = function(val) {\r\n      val = '' + val || '';\r\n      if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {\r\n        throw new Error(\"Invalid encoding: \" + val);\r\n      }\r\n      return val;\r\n    };\r\n\r\n    XMLStringifier.prototype.xmlStandalone = function(val) {\r\n      if (val) {\r\n        return \"yes\";\r\n      } else {\r\n        return \"no\";\r\n      }\r\n    };\r\n\r\n    XMLStringifier.prototype.dtdPubID = function(val) {\r\n      return '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.dtdSysID = function(val) {\r\n      return '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.dtdElementValue = function(val) {\r\n      return '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.dtdAttType = function(val) {\r\n      return '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.dtdAttDefault = function(val) {\r\n      if (val != null) {\r\n        return '' + val || '';\r\n      } else {\r\n        return val;\r\n      }\r\n    };\r\n\r\n    XMLStringifier.prototype.dtdEntityValue = function(val) {\r\n      return '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.dtdNData = function(val) {\r\n      return '' + val || '';\r\n    };\r\n\r\n    XMLStringifier.prototype.convertAttKey = '@';\r\n\r\n    XMLStringifier.prototype.convertPIKey = '?';\r\n\r\n    XMLStringifier.prototype.convertTextKey = '#text';\r\n\r\n    XMLStringifier.prototype.convertCDataKey = '#cdata';\r\n\r\n    XMLStringifier.prototype.convertCommentKey = '#comment';\r\n\r\n    XMLStringifier.prototype.convertRawKey = '#raw';\r\n\r\n    XMLStringifier.prototype.assertLegalChar = function(str) {\r\n      var res;\r\n      res = str.match(/[\\0\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/);\r\n      if (res) {\r\n        throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\r\n      }\r\n      return str;\r\n    };\r\n\r\n    XMLStringifier.prototype.elEscape = function(str) {\r\n      var ampregex;\r\n      ampregex = this.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\r\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r/g, '&#xD;');\r\n    };\r\n\r\n    XMLStringifier.prototype.attEscape = function(str) {\r\n      var ampregex;\r\n      ampregex = this.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\r\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;');\r\n    };\r\n\r\n    return XMLStringifier;\r\n\r\n  })();\r\n\r\n}).call(this);\r\n\r\n},{}],143:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLNode, XMLText,\r\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  XMLNode = require('./XMLNode');\r\n\r\n  module.exports = XMLText = (function(superClass) {\r\n    extend(XMLText, superClass);\r\n\r\n    function XMLText(parent, text) {\r\n      XMLText.__super__.constructor.call(this, parent);\r\n      if (text == null) {\r\n        throw new Error(\"Missing element text\");\r\n      }\r\n      this.value = this.stringify.eleText(text);\r\n    }\r\n\r\n    XMLText.prototype.clone = function() {\r\n      return Object.create(this);\r\n    };\r\n\r\n    XMLText.prototype.toString = function(options) {\r\n      return this.options.writer.set(options).text(this);\r\n    };\r\n\r\n    return XMLText;\r\n\r\n  })(XMLNode);\r\n\r\n}).call(this);\r\n\r\n},{\"./XMLNode\":137}],144:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLWriterBase,\r\n    hasProp = {}.hasOwnProperty;\r\n\r\n  module.exports = XMLWriterBase = (function() {\r\n    function XMLWriterBase(options) {\r\n      var key, ref, ref1, ref2, ref3, ref4, ref5, ref6, value;\r\n      options || (options = {});\r\n      this.pretty = options.pretty || false;\r\n      this.allowEmpty = (ref = options.allowEmpty) != null ? ref : false;\r\n      if (this.pretty) {\r\n        this.indent = (ref1 = options.indent) != null ? ref1 : '  ';\r\n        this.newline = (ref2 = options.newline) != null ? ref2 : '\\n';\r\n        this.offset = (ref3 = options.offset) != null ? ref3 : 0;\r\n        this.dontprettytextnodes = (ref4 = options.dontprettytextnodes) != null ? ref4 : 0;\r\n      } else {\r\n        this.indent = '';\r\n        this.newline = '';\r\n        this.offset = 0;\r\n        this.dontprettytextnodes = 0;\r\n      }\r\n      this.spacebeforeslash = (ref5 = options.spacebeforeslash) != null ? ref5 : '';\r\n      if (this.spacebeforeslash === true) {\r\n        this.spacebeforeslash = ' ';\r\n      }\r\n      this.newlinedefault = this.newline;\r\n      this.prettydefault = this.pretty;\r\n      ref6 = options.writer || {};\r\n      for (key in ref6) {\r\n        if (!hasProp.call(ref6, key)) continue;\r\n        value = ref6[key];\r\n        this[key] = value;\r\n      }\r\n    }\r\n\r\n    XMLWriterBase.prototype.set = function(options) {\r\n      var key, ref, value;\r\n      options || (options = {});\r\n      if (\"pretty\" in options) {\r\n        this.pretty = options.pretty;\r\n      }\r\n      if (\"allowEmpty\" in options) {\r\n        this.allowEmpty = options.allowEmpty;\r\n      }\r\n      if (this.pretty) {\r\n        this.indent = \"indent\" in options ? options.indent : '  ';\r\n        this.newline = \"newline\" in options ? options.newline : '\\n';\r\n        this.offset = \"offset\" in options ? options.offset : 0;\r\n        this.dontprettytextnodes = \"dontprettytextnodes\" in options ? options.dontprettytextnodes : 0;\r\n      } else {\r\n        this.indent = '';\r\n        this.newline = '';\r\n        this.offset = 0;\r\n        this.dontprettytextnodes = 0;\r\n      }\r\n      this.spacebeforeslash = \"spacebeforeslash\" in options ? options.spacebeforeslash : '';\r\n      if (this.spacebeforeslash === true) {\r\n        this.spacebeforeslash = ' ';\r\n      }\r\n      this.newlinedefault = this.newline;\r\n      this.prettydefault = this.pretty;\r\n      ref = options.writer || {};\r\n      for (key in ref) {\r\n        if (!hasProp.call(ref, key)) continue;\r\n        value = ref[key];\r\n        this[key] = value;\r\n      }\r\n      return this;\r\n    };\r\n\r\n    XMLWriterBase.prototype.space = function(level) {\r\n      var indent;\r\n      if (this.pretty) {\r\n        indent = (level || 0) + this.offset + 1;\r\n        if (indent > 0) {\r\n          return new Array(indent).join(this.indent);\r\n        } else {\r\n          return '';\r\n        }\r\n      } else {\r\n        return '';\r\n      }\r\n    };\r\n\r\n    return XMLWriterBase;\r\n\r\n  })();\r\n\r\n}).call(this);\r\n\r\n},{}],145:[function(require,module,exports){\r\n// Generated by CoffeeScript 1.12.7\r\n(function() {\r\n  var XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction, ref;\r\n\r\n  ref = require('./Utility'), assign = ref.assign, isFunction = ref.isFunction;\r\n\r\n  XMLDocument = require('./XMLDocument');\r\n\r\n  XMLDocumentCB = require('./XMLDocumentCB');\r\n\r\n  XMLStringWriter = require('./XMLStringWriter');\r\n\r\n  XMLStreamWriter = require('./XMLStreamWriter');\r\n\r\n  module.exports.create = function(name, xmldec, doctype, options) {\r\n    var doc, root;\r\n    if (name == null) {\r\n      throw new Error(\"Root element needs a name\");\r\n    }\r\n    options = assign({}, xmldec, doctype, options);\r\n    doc = new XMLDocument(options);\r\n    root = doc.element(name);\r\n    if (!options.headless) {\r\n      doc.declaration(options);\r\n      if ((options.pubID != null) || (options.sysID != null)) {\r\n        doc.doctype(options);\r\n      }\r\n    }\r\n    return root;\r\n  };\r\n\r\n  module.exports.begin = function(options, onData, onEnd) {\r\n    var ref1;\r\n    if (isFunction(options)) {\r\n      ref1 = [options, onData], onData = ref1[0], onEnd = ref1[1];\r\n      options = {};\r\n    }\r\n    if (onData) {\r\n      return new XMLDocumentCB(options, onData, onEnd);\r\n    } else {\r\n      return new XMLDocument(options);\r\n    }\r\n  };\r\n\r\n  module.exports.stringWriter = function(options) {\r\n    return new XMLStringWriter(options);\r\n  };\r\n\r\n  module.exports.streamWriter = function(stream, options) {\r\n    return new XMLStreamWriter(stream, options);\r\n  };\r\n\r\n}).call(this);\r\n\r\n},{\"./Utility\":124,\"./XMLDocument\":134,\"./XMLDocumentCB\":135,\"./XMLStreamWriter\":140,\"./XMLStringWriter\":141}]},{},[1])(1)\r\n});\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsImxpYi9WRVJTSU9OLmpzIiwibGliL19yZXF1aXJlZC5qcyIsImxpYi9hcGkvYW5hbHl0aWNzLmpzIiwibGliL2FwaS9hcGV4LmpzIiwibGliL2FwaS9idWxrLmpzIiwibGliL2FwaS9jaGF0dGVyLmpzIiwibGliL2FwaS9pbmRleC5qcyIsImxpYi9hcGkvbWV0YWRhdGEuanMiLCJsaWIvYXBpL3NvYXAuanMiLCJsaWIvYXBpL3N0cmVhbWluZy1leHRlbnNpb24uanMiLCJsaWIvYXBpL3N0cmVhbWluZy5qcyIsImxpYi9hcGkvdG9vbGluZy5qcyIsImxpYi9icm93c2VyL2NhbnZhcy5qcyIsImxpYi9icm93c2VyL2NsaWVudC5qcyIsImxpYi9icm93c2VyL2pzb25wLmpzIiwibGliL2Jyb3dzZXIvcmVxdWVzdC5qcyIsImxpYi9jYWNoZS5qcyIsImxpYi9jb25uZWN0aW9uLmpzIiwibGliL2NvcmUuanMiLCJsaWIvY3N2LmpzIiwibGliL2RhdGUuanMiLCJsaWIvaHR0cC1hcGkuanMiLCJsaWIvbG9nZ2VyLmpzIiwibGliL29hdXRoMi5qcyIsImxpYi9wcm9jZXNzLmpzIiwibGliL3Byb21pc2UuanMiLCJsaWIvcXVlcnkuanMiLCJsaWIvcXVpY2stYWN0aW9uLmpzIiwibGliL3JlY29yZC1zdHJlYW0uanMiLCJsaWIvcmVjb3JkLmpzIiwibGliL3JlcXVpcmUuanMiLCJsaWIvc29hcC5qcyIsImxpYi9zb2JqZWN0LmpzIiwibGliL3NvcWwtYnVpbGRlci5qcyIsImxpYi90cmFuc3BvcnQuanMiLCJub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLWFzYXAuanMiLCJub2RlX21vZHVsZXMvYXNhcC9icm93c2VyLXJhdy5qcyIsIm5vZGVfbW9kdWxlcy9iYXNlNjQtanMvaW5kZXguanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlci1yZXNvbHZlL2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2J1ZmZlci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanMiLCJub2RlX21vZHVsZXMvY3N2LXBhcnNlL2xpYi9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9jc3YtcGFyc2UvbGliL3N5bmMuanMiLCJub2RlX21vZHVsZXMvY3N2LXN0cmluZ2lmeS9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvY3N2LXN0cmluZ2lmeS9saWIvc3luYy5qcyIsIm5vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL2ZheWVfYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy9taXhpbnMvZGVmZXJyYWJsZS5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy9taXhpbnMvbG9nZ2luZy5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy9taXhpbnMvcHVibGlzaGVyLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL21peGlucy90aW1lb3V0cy5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy9wcm90b2NvbC9jaGFubmVsLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3Byb3RvY29sL2NsaWVudC5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy9wcm90b2NvbC9kaXNwYXRjaGVyLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3Byb3RvY29sL2Vycm9yLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3Byb3RvY29sL2V4dGVuc2libGUuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvcHJvdG9jb2wvZ3JhbW1hci5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy9wcm90b2NvbC9wdWJsaWNhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy9wcm90b2NvbC9zY2hlZHVsZXIuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvcHJvdG9jb2wvc3Vic2NyaXB0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3RyYW5zcG9ydC9icm93c2VyX3RyYW5zcG9ydHMuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvdHJhbnNwb3J0L2NvcnMuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvdHJhbnNwb3J0L2V2ZW50X3NvdXJjZS5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy90cmFuc3BvcnQvanNvbnAuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvdHJhbnNwb3J0L3RyYW5zcG9ydC5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy90cmFuc3BvcnQvd2ViX3NvY2tldC5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy90cmFuc3BvcnQveGhyLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3V0aWwvYXJyYXkuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvdXRpbC9icm93c2VyL2V2ZW50LmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3V0aWwvY2xhc3MuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvdXRpbC9jb25zdGFudHMuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvdXRpbC9jb29raWVzL2Jyb3dzZXJfY29va2llcy5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy91dGlsL2NvcHlfb2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3V0aWwvZXZlbnRfZW1pdHRlci5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy91dGlsL2V4dGVuZC5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy91dGlsL3Byb21pc2UuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvdXRpbC9zZXQuanMiLCJub2RlX21vZHVsZXMvZmF5ZS9zcmMvdXRpbC90b19qc29uLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3V0aWwvdXJpLmpzIiwibm9kZV9tb2R1bGVzL2ZheWUvc3JjL3V0aWwvdmFsaWRhdGVfb3B0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9mYXllL3NyYy91dGlsL3dlYnNvY2tldC9icm93c2VyX3dlYnNvY2tldC5qcyIsIm5vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvaXMtYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoLmdldC9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvY29yZS5qcyIsIm5vZGVfbW9kdWxlcy9tdWx0aXN0cmVhbS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzLW5leHRpY2stYXJncy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS9saWIvY29yZS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9taXNlL2xpYi9lczYtZXh0ZW5zaW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZGVjb2RlLmpzIiwibm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nLWVzMy9lbmNvZGUuanMiLCJub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9kdXBsZXgtYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fZHVwbGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcmVhZGFibGUuanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fd3JpdGFibGUuanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL0J1ZmZlckxpc3QuanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3kuanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL3N0cmVhbS1icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUtYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS93cml0YWJsZS1icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3NhZmUtYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3NheC9saWIvc2F4LmpzIiwibm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3N0cmluZ19kZWNvZGVyL2xpYi9zdHJpbmdfZGVjb2Rlci5qcyIsIm5vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwibm9kZV9tb2R1bGVzL3V0aWwtZGVwcmVjYXRlL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy91dGlsL3V0aWwuanMiLCJub2RlX21vZHVsZXMveG1sMmpzL2xpYi9ib20uanMiLCJub2RlX21vZHVsZXMveG1sMmpzL2xpYi9idWlsZGVyLmpzIiwibm9kZV9tb2R1bGVzL3htbDJqcy9saWIvZGVmYXVsdHMuanMiLCJub2RlX21vZHVsZXMveG1sMmpzL2xpYi9wYXJzZXIuanMiLCJub2RlX21vZHVsZXMveG1sMmpzL2xpYi9wcm9jZXNzb3JzLmpzIiwibm9kZV9tb2R1bGVzL3htbDJqcy9saWIveG1sMmpzLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1V0aWxpdHkuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MQXR0cmlidXRlLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTENEYXRhLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTENvbW1lbnQuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRFREQXR0TGlzdC5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEVERFbGVtZW50LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERUREVudGl0eS5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEVEROb3RhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEZWNsYXJhdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxEb2NUeXBlLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERvY3VtZW50LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTERvY3VtZW50Q0IuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MRWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxOb2RlLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxSYXcuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvWE1MU3RyZWFtV3JpdGVyLmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFN0cmluZ1dyaXRlci5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxTdHJpbmdpZmllci5qcyIsIm5vZGVfbW9kdWxlcy94bWxidWlsZGVyL2xpYi9YTUxUZXh0LmpzIiwibm9kZV9tb2R1bGVzL3htbGJ1aWxkZXIvbGliL1hNTFdyaXRlckJhc2UuanMiLCJub2RlX21vZHVsZXMveG1sYnVpbGRlci9saWIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbllBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzVLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMVRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQy8wQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3WUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDalNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN2TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3BwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25LQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1U0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25SQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDcEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2ozQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3pPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMvTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SkE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN4c0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMzR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4akJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDeFRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM2dCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2xZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN6TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ2hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ25OQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDaktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDbjZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM5d0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzVDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDMS9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDck5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzlxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekVBO0FBQ0E7O0FDREE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7O0FDREE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM3aERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMxa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaGJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2UkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5VUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIganNmb3JjZSA9IHJlcXVpcmUoJy4uL2NvcmUnKTtcbmpzZm9yY2UuYnJvd3NlciA9IHJlcXVpcmUoJy4vY2xpZW50Jyk7XG5yZXF1aXJlKCcuLi9hcGknKTtcbm1vZHVsZS5leHBvcnRzID0ganNmb3JjZTtcbiIsIid1c2Ugc3RyaWN0Jztcbm1vZHVsZS5leHBvcnRzID0gJzEuOS4xJztcbiIsIi8vIFRoaXMgZmlsZSBjb250ZW50IGlzIGR5bmFtaWNhbGx5IGNyZWF0ZWQgaW4gYnVpbGQgc2NyaXB0XG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0ge1xuICAnaW5oZXJpdHMnOiByZXF1aXJlKCdpbmhlcml0cycpLFxuICAndXRpbCc6IHJlcXVpcmUoJ3V0aWwnKSxcbiAgJ2V2ZW50cyc6IHJlcXVpcmUoJ2V2ZW50cycpLFxuICAnbG9kYXNoL2NvcmUnOiByZXF1aXJlKCdsb2Rhc2gvY29yZScpLFxuICAncmVhZGFibGUtc3RyZWFtJzogcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtJyksXG4gICdtdWx0aXN0cmVhbSc6IHJlcXVpcmUoJ211bHRpc3RyZWFtJyksXG4gICcuL1ZFUlNJT04nOiByZXF1aXJlKCcuL1ZFUlNJT04nKSxcbiAgJy4vY2FjaGUnOiByZXF1aXJlKCcuL2NhY2hlJyksXG4gICcuL2Nvbm5lY3Rpb24nOiByZXF1aXJlKCcuL2Nvbm5lY3Rpb24nKSxcbiAgJy4vY29yZSc6IHJlcXVpcmUoJy4vY29yZScpLFxuICAnLi9jc3YnOiByZXF1aXJlKCcuL2NzdicpLFxuICAnLi9kYXRlJzogcmVxdWlyZSgnLi9kYXRlJyksXG4gICcuL2h0dHAtYXBpJzogcmVxdWlyZSgnLi9odHRwLWFwaScpLFxuICAnLi9sb2dnZXInOiByZXF1aXJlKCcuL2xvZ2dlcicpLFxuICAnLi9vYXV0aDInOiByZXF1aXJlKCcuL29hdXRoMicpLFxuICAnLi9wcm9jZXNzJzogcmVxdWlyZSgnLi9wcm9jZXNzJyksXG4gICcuL3Byb21pc2UnOiByZXF1aXJlKCcuL3Byb21pc2UnKSxcbiAgJy4vcXVlcnknOiByZXF1aXJlKCcuL3F1ZXJ5JyksXG4gICcuL3F1aWNrLWFjdGlvbic6IHJlcXVpcmUoJy4vcXVpY2stYWN0aW9uJyksXG4gICcuL3JlY29yZC1zdHJlYW0nOiByZXF1aXJlKCcuL3JlY29yZC1zdHJlYW0nKSxcbiAgJy4vcmVjb3JkJzogcmVxdWlyZSgnLi9yZWNvcmQnKSxcbiAgJy4vc29hcCc6IHJlcXVpcmUoJy4vc29hcCcpLFxuICAnLi9zb2JqZWN0JzogcmVxdWlyZSgnLi9zb2JqZWN0JyksXG4gICcuL3NvcWwtYnVpbGRlcic6IHJlcXVpcmUoJy4vc29xbC1idWlsZGVyJyksXG4gICcuL3RyYW5zcG9ydCc6IHJlcXVpcmUoJy4vdHJhbnNwb3J0Jylcbn07IiwiLyoqXG4gKiBAZmlsZSBNYW5hZ2VzIFNhbGVzZm9yY2UgQW5hbHl0aWNzIEFQSVxuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyksXG4gICAganNmb3JjZSA9IHJlcXVpcmUoJy4uL2NvcmUnKSxcbiAgICBQcm9taXNlICA9IHJlcXVpcmUoJy4uL3Byb21pc2UnKTtcblxuLyoqXG4gKiBSZXBvcnQgaW5zdGFuY2UgdG8gcmV0cmlldmluZyBhc3luY2hyb25vdXNseSBleGVjdXRlZCByZXN1bHRcbiAqXG4gKiBAcHJvdGVjdGVkXG4gKiBAY2xhc3MgQW5hbHl0aWNzflJlcG9ydEluc3RhbmNlXG4gKiBAcGFyYW0ge0FuYWx5dGljc35SZXBvcnR9IHJlcG9ydCAtIFJlcG9ydFxuICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gUmVwb3J0IGluc3RhbmNlIGlkXG4gKi9cbnZhciBSZXBvcnRJbnN0YW5jZSA9IGZ1bmN0aW9uKHJlcG9ydCwgaWQpIHtcbiAgdGhpcy5fcmVwb3J0ID0gcmVwb3J0O1xuICB0aGlzLl9jb25uID0gcmVwb3J0Ll9jb25uO1xuICB0aGlzLmlkID0gaWQ7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHJlcG9ydCByZXN1bHQgYXN5bmNocm9ub3VzbHkgZXhlY3V0ZWRcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35SZXBvcnRJbnN0YW5jZSNyZXRyaWV2ZVxuICogQHBhcmFtIHtDYWxsYmFjay48QW5hbHl0aWNzflJlcG9ydFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFuYWx5dGljc35SZXBvcnRSZXN1bHQ+fVxuICovXG5SZXBvcnRJbnN0YW5jZS5wcm90b3R5cGUucmV0cmlldmUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgY29ubiA9IHRoaXMuX2Nvbm4sXG4gICAgICByZXBvcnQgPSB0aGlzLl9yZXBvcnQ7XG4gIHZhciB1cmwgPSBbIGNvbm4uX2Jhc2VVcmwoKSwgXCJhbmFseXRpY3NcIiwgXCJyZXBvcnRzXCIsIHJlcG9ydC5pZCwgXCJpbnN0YW5jZXNcIiwgdGhpcy5pZCBdLmpvaW4oJy8nKTtcbiAgcmV0dXJuIGNvbm4ucmVxdWVzdCh1cmwpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogUmVwb3J0IG9iamVjdCBpbiBBbmFseXRpY3MgQVBJXG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzIEFuYWx5dGljc35SZXBvcnRcbiAqIEBwYXJhbSB7Q29ubmVjdGlvbn0gY29ubiBDb25uZWN0aW9uXG4gKi9cbnZhciBSZXBvcnQgPSBmdW5jdGlvbihjb25uLCBpZCkge1xuICB0aGlzLl9jb25uID0gY29ubjtcbiAgdGhpcy5pZCA9IGlkO1xufTtcblxuLyoqXG4gKiBEZXNjcmliZSByZXBvcnQgbWV0YWRhdGFcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35SZXBvcnQjZGVzY3JpYmVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFuYWx5dGljc35SZXBvcnRNZXRhZGF0YT59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFuYWx5dGljc35SZXBvcnRNZXRhZGF0YT59XG4gKi9cblJlcG9ydC5wcm90b3R5cGUuZGVzY3JpYmUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9jb25uLl9iYXNlVXJsKCksIFwiYW5hbHl0aWNzXCIsIFwicmVwb3J0c1wiLCB0aGlzLmlkLCBcImRlc2NyaWJlXCIgXS5qb2luKCcvJyk7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QodXJsKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgQW5hbHl0aWNzflJlcG9ydCNkZXN0cm95KClcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35SZXBvcnQjZGVsZXRlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBbmFseXRpY3N+UmVwb3J0UmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QW5hbHl0aWNzflJlcG9ydFJlc3VsdD59XG4gKi9cbi8qKlxuICogU3lub255bSBvZiBBbmFseXRpY3N+UmVwb3J0I2Rlc3Ryb3koKVxuICpcbiAqIEBtZXRob2QgQW5hbHl0aWNzflJlcG9ydCNkZWxcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFuYWx5dGljc35SZXBvcnRSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBbmFseXRpY3N+UmVwb3J0UmVzdWx0Pn1cbiAqL1xuLyoqXG4gKiBEZXN0cm95IGEgcmVwb3J0XG4gKlxuICogQG1ldGhvZCBBbmFseXRpY3N+UmVwb3J0I2Rlc3Ryb3lcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFuYWx5dGljc35SZXBvcnRSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBbmFseXRpY3N+UmVwb3J0UmVzdWx0Pn1cbiAqL1xuUmVwb3J0LnByb3RvdHlwZVtcImRlbGV0ZVwiXSA9XG5SZXBvcnQucHJvdG90eXBlLmRlbCA9XG5SZXBvcnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9jb25uLl9iYXNlVXJsKCksIFwiYW5hbHl0aWNzXCIsIFwicmVwb3J0c1wiLCB0aGlzLmlkIF0uam9pbignLycpO1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHttZXRob2Q6ICdERUxFVEUnLCB1cmw6IHVybH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQ2xvbmVzIGEgZ2l2ZW4gcmVwb3J0XG4gKlxuICogQG1ldGhvZCBBbmFseXRpY3N+UmVwb3J0I2Nsb25lXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBuZXcgcmVwb3J0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBbmFseXRpY3N+UmVwb3J0UmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QW5hbHl0aWNzflJlcG9ydFJlc3VsdD59XG4gKi9cblJlcG9ydC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9jb25uLl9iYXNlVXJsKCksIFwiYW5hbHl0aWNzXCIsIFwicmVwb3J0c1wiIF0uam9pbignLycpO1xuICB1cmwgKz0gXCI/Y2xvbmVJZD1cIiArIHRoaXMuaWQ7XG4gIHZhciBkYXRhID0geyByZXBvcnRNZXRhZGF0YTogeyBuYW1lOiBuYW1lIH0gfTtcbiAgdmFyIHBhcmFtcyA9IHsgbWV0aG9kIDogJ1BPU1QnLCB1cmw6IHVybCwgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSwgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSl9O1xuXG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QocGFyYW1zKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEV4cGxhaW4gcGxhbiBmb3IgZXhlY3V0aW5nIHJlcG9ydFxuICpcbiAqIEBtZXRob2QgQW5hbHl0aWNzflJlcG9ydCNleHBsYWluXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxFeHBsYWluSW5mbz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEV4cGxhaW5JbmZvPn1cbiAqL1xuUmVwb3J0LnByb3RvdHlwZS5leHBsYWluID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHVybCA9IFwiL3F1ZXJ5Lz9leHBsYWluPVwiICsgdGhpcy5pZDtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cblxuLyoqXG4gKiBSdW4gcmVwb3J0IHN5bmNocm9ub3VzbHlcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35SZXBvcnQjZXhlY3V0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5kZXRhaWxzIC0gRmxhZyBpZiBpbmNsdWRlIGRldGFpbCBpbiByZXN1bHRcbiAqIEBwYXJhbSB7QW5hbHl0aWNzflJlcG9ydE1ldGFkYXRhfSBvcHRpb25zLm1ldGFkYXRhIC0gT3ZlcnJpZGluZyByZXBvcnQgbWV0YWRhdGFcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFuYWx5dGljc35SZXBvcnRSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBbmFseXRpY3N+UmVwb3J0UmVzdWx0Pn1cbiAqL1xuUmVwb3J0LnByb3RvdHlwZS5ydW4gPVxuUmVwb3J0LnByb3RvdHlwZS5leGVjID1cblJlcG9ydC5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoXy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICB2YXIgdXJsID0gWyB0aGlzLl9jb25uLl9iYXNlVXJsKCksIFwiYW5hbHl0aWNzXCIsIFwicmVwb3J0c1wiLCB0aGlzLmlkIF0uam9pbignLycpO1xuICB1cmwgKz0gXCI/aW5jbHVkZURldGFpbHM9XCIgKyAob3B0aW9ucy5kZXRhaWxzID8gXCJ0cnVlXCIgOiBcImZhbHNlXCIpO1xuICB2YXIgcGFyYW1zID0geyBtZXRob2QgOiBvcHRpb25zLm1ldGFkYXRhID8gJ1BPU1QnIDogJ0dFVCcsIHVybCA6IHVybCB9O1xuICBpZiAob3B0aW9ucy5tZXRhZGF0YSkge1xuICAgIHBhcmFtcy5oZWFkZXJzID0geyBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCIgfTtcbiAgICBwYXJhbXMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMubWV0YWRhdGEpO1xuICB9XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QocGFyYW1zKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG5cbi8qKlxuICogUnVuIHJlcG9ydCBhc3luY2hyb25vdXNseVxuICpcbiAqIEBtZXRob2QgQW5hbHl0aWNzflJlcG9ydCNleGVjdXRlQXN5bmNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuZGV0YWlscyAtIEZsYWcgaWYgaW5jbHVkZSBkZXRhaWwgaW4gcmVzdWx0XG4gKiBAcGFyYW0ge0FuYWx5dGljc35SZXBvcnRNZXRhZGF0YX0gb3B0aW9ucy5tZXRhZGF0YSAtIE92ZXJyaWRpbmcgcmVwb3J0IG1ldGFkYXRhXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBbmFseXRpY3N+UmVwb3J0SW5zdGFuY2VBdHRycz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFuYWx5dGljc35SZXBvcnRJbnN0YW5jZUF0dHJzPn1cbiAqL1xuUmVwb3J0LnByb3RvdHlwZS5leGVjdXRlQXN5bmMgPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKF8uaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgdmFyIHVybCA9IFsgdGhpcy5fY29ubi5fYmFzZVVybCgpLCBcImFuYWx5dGljc1wiLCBcInJlcG9ydHNcIiwgdGhpcy5pZCwgXCJpbnN0YW5jZXNcIiBdLmpvaW4oJy8nKTtcbiAgaWYgKG9wdGlvbnMuZGV0YWlscykge1xuICAgIHVybCArPSBcIj9pbmNsdWRlRGV0YWlscz10cnVlXCI7XG4gIH1cbiAgdmFyIHBhcmFtcyA9IHsgbWV0aG9kIDogJ1BPU1QnLCB1cmwgOiB1cmwsIGJvZHk6IFwiXCIgfTtcbiAgaWYgKG9wdGlvbnMubWV0YWRhdGEpIHtcbiAgICBwYXJhbXMuaGVhZGVycyA9IHsgXCJDb250ZW50LVR5cGVcIiA6IFwiYXBwbGljYXRpb24vanNvblwiIH07XG4gICAgcGFyYW1zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLm1ldGFkYXRhKTtcbiAgfVxuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHBhcmFtcykudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBHZXQgcmVwb3J0IGluc3RhbmNlIGZvciBzcGVjaWZpZWQgaW5zdGFuY2UgSURcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35SZXBvcnQjaW5zdGFuY2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIFJlcG9ydCBpbnN0YW5jZSBJRFxuICogQHJldHVybnMge0FuYWx5dGljc35SZXBvcnRJbnN0YW5jZX1cbiAqL1xuUmVwb3J0LnByb3RvdHlwZS5pbnN0YW5jZSA9IGZ1bmN0aW9uKGlkKSB7XG4gIHJldHVybiBuZXcgUmVwb3J0SW5zdGFuY2UodGhpcywgaWQpO1xufTtcblxuLyoqXG4gKiBMaXN0IHJlcG9ydCBpbnN0YW5jZXMgd2hpY2ggaGFkIGJlZW4gZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHlcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35SZXBvcnQjaW5zdGFuY2VzXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48QW5hbHl0aWNzflJlcG9ydEluc3RhbmNlQXR0cnM+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QXJyYXkuPEFuYWx5dGljc35SZXBvcnRJbnN0YW5jZUF0dHJzPj59XG4gKi9cblJlcG9ydC5wcm90b3R5cGUuaW5zdGFuY2VzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHVybCA9IFsgdGhpcy5fY29ubi5fYmFzZVVybCgpLCBcImFuYWx5dGljc1wiLCBcInJlcG9ydHNcIiwgdGhpcy5pZCwgXCJpbnN0YW5jZXNcIiBdLmpvaW4oJy8nKTtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogRGFzaGJvYXJkIG9iamVjdCBpbiB0aGUgQW5hbHl0aWNzIEFQSVxuICpcbiAqIEBwcm90ZWN0ZWRcbiAqIEBjbGFzcyBBbmFseXRpY3MtRGFzaGJvYXJkXG4gKiBAcGFyYW0ge0Nvbm5lY3Rpb259IGNvbm4gQ29ubmVjdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gVGhlIElkXG4gKi9cblxudmFyIERhc2hib2FyZCA9IGZ1bmN0aW9uKGNvbm4sIGlkKSB7XG4gIHRoaXMuX2Nvbm4gPSBjb25uO1xuICB0aGlzLmlkID0gaWQ7XG59O1xuXG4vKipcbiAqIERlc2NyaWJlIGRhc2hib2FyZCBtZXRhZGF0YVxuICpcbiAqIEBtZXRob2QgQW5hbHl0aWNzfkRhc2hib2FyZCNkZXNjcmliZVxuICogQHBhcmFtIHtDYWxsYmFjay48QW5hbHl0aWNzLURhc2hib2FyZE1ldGFkYXRhPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QW5hbHl0aWNzLURhc2hib2FyZE1ldGFkYXRhPn1cbiAqL1xuRGFzaGJvYXJkLnByb3RvdHlwZS5kZXNjcmliZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSBbIHRoaXMuX2Nvbm4uX2Jhc2VVcmwoKSwgXCJhbmFseXRpY3NcIiwgXCJkYXNoYm9hcmRzXCIsIHRoaXMuaWQsIFwiZGVzY3JpYmVcIiBdLmpvaW4oJy8nKTtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogR2V0IGRldGFpbHMgYWJvdXQgZGFzaGJvYXJkIGNvbXBvbmVudHNcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35EYXNoYm9hcmQjY29tcG9uZW50c1xuICogQHBhcmFtIHtDYWxsYmFjay48QW5hbHl0aWNzLURhc2hib2FyZENvbXBvbmVudE1ldGFkYXRhPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QW5hbHl0aWNzLURhc2hib2FyZENvbXBvbmVudE1ldGFkYXRhPn1cbiAqL1xuRGFzaGJvYXJkLnByb3RvdHlwZS5jb21wb25lbnRzID0gZnVuY3Rpb24oY29tcG9uZW50SWRzLCBjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9jb25uLl9iYXNlVXJsKCksIFwiYW5hbHl0aWNzXCIsIFwiZGFzaGJvYXJkc1wiLCB0aGlzLmlkXS5qb2luKCcvJyk7XG4gIHZhciBkYXRhID0ge307XG4gIGlmIChfLmlzRnVuY3Rpb24oY29tcG9uZW50SWRzKSkge1xuICAgIGNhbGxiYWNrID0gY29tcG9uZW50SWRzO1xuICB9IGVsc2UgaWYgKF8uaXNBcnJheShjb21wb25lbnRJZHMpKSB7XG4gICAgZGF0YS5jb21wb25lbnRJZHMgPSBjb21wb25lbnRJZHM7XG4gIH0gZWxzZSBpZiAoXy5pc1N0cmluZyhjb21wb25lbnRJZHMpKSB7XG4gICAgZGF0YS5jb21wb25lbnRJZHMgPSBbIGNvbXBvbmVudElkcyBdO1xuICB9XG4gIHZhciBwYXJhbXMgPSB7IG1ldGhvZCA6ICdQT1NUJywgdXJsIDogdXJsLCBoZWFkZXJzIDogeyBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSwgYm9keSA6IEpTT04uc3RyaW5naWZ5KGRhdGEpfTtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdChwYXJhbXMpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogR2V0IGRhc2hib2FyZCBzdGF0dXNcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35EYXNoYm9hcmQjc3RhdHVzXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBbmFseXRpY3MtRGFzaGJvYXJkU3RhdHVzTWV0YWRhdGE+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBbmFseXRpY3MtRGFzaGJvYXJkU3RhdHVzTWV0YWRhdGE+fVxuICovXG5EYXNoYm9hcmQucHJvdG90eXBlLnN0YXR1cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSBbIHRoaXMuX2Nvbm4uX2Jhc2VVcmwoKSwgXCJhbmFseXRpY3NcIiwgXCJkYXNoYm9hcmRzXCIsIHRoaXMuaWQsIFwic3RhdHVzXCIgXS5qb2luKCcvJyk7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QodXJsKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFJlZnJlc2ggYSBkYXNoYm9hcmRcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35EYXNoYm9hcmQjcmVmcmVzaFxuICogQHBhcmFtIHtDYWxsYmFjay48QW5hbHl0aWNzLURhc2hib2FyZFN0YXR1c1VybD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFuYWx5dGljcy1EYXNoYm9hcmRTdGF0dXNVcmw+fVxuICovXG5EYXNoYm9hcmQucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9jb25uLl9iYXNlVXJsKCksIFwiYW5hbHl0aWNzXCIsIFwiZGFzaGJvYXJkc1wiLCB0aGlzLmlkIF0uam9pbignLycpO1xuICB2YXIgcGFyYW1zID0geyBtZXRob2QgOiAnUFVUJywgdXJsIDogdXJsLCBib2R5OiAnJyB9O1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHBhcmFtcykudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBDbG9uZSBhIGRhc2hib2FyZFxuICpcbiAqIEBtZXRob2QgQW5hbHl0aWNzfkRhc2hib2FyZCNjbG9uZVxuICogQHBhcmFtIHtDYWxsYmFjay48QW5hbHl0aWNzLURhc2hib2FyZE1ldGFkYXRhPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QW5hbHl0aWNzLURhc2hib2FyZE1ldGFkYXRhPn1cbiAqL1xuRGFzaGJvYXJkLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKG5hbWUsIGZvbGRlcmlkLCBjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9jb25uLl9iYXNlVXJsKCksIFwiYW5hbHl0aWNzXCIsIFwiZGFzaGJvYXJkc1wiIF0uam9pbignLycpO1xuICB1cmwgKz0gXCI/Y2xvbmVJZD1cIiArIHRoaXMuaWQ7XG4gIHZhciBkYXRhID0ge307XG5cbiAgaWYgKF8uaXNPYmplY3QobmFtZSkpIHtcbiAgICBkYXRhID0gbmFtZTtcbiAgICBjYWxsYmFjayA9IGZvbGRlcmlkO1xuICB9IGVsc2Uge1xuICAgIGRhdGEubmFtZSA9IG5hbWU7XG4gICAgZGF0YS5mb2xkZXJJZCA9IGZvbGRlcmlkO1xuICB9XG4gIHZhciBwYXJhbXMgPSB7IG1ldGhvZCA6ICdQT1NUJywgdXJsIDogdXJsLCBoZWFkZXJzIDogeyBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSwgYm9keSA6IEpTT04uc3RyaW5naWZ5KGRhdGEpfTtcblxuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHBhcmFtcykudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBTeW5vbnltIG9mIEFuYWx5dGljc35EYXNoYm9hcmQjZGVzdHJveSgpXG4gKlxuICogQG1ldGhvZCBBbmFseXRpY3N+RGFzaGJvYXJkI2RlbGV0ZVxuICogQHBhcmFtIHtDYWxsYmFjay48QW5hbHl0aWNzfkRhc2hib2FyZFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFuYWx5dGljc35EYXNoYm9hcmRSZXN1bHQ+fVxuICovXG4vKipcbiAqIFN5bm9ueW0gb2YgQW5hbHl0aWNzfkRhc2hib2FyZCNkZXN0cm95KClcbiAqXG4gKiBAbWV0aG9kIEFuYWx5dGljc35EYXNoYm9hcmQjZGVsXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBbmFseXRpY3N+RGFzaGJvYXJkUmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QW5hbHl0aWNzfkRhc2hib2FyZFJlc3VsdD59XG4gKi9cbi8qKlxuICogRGVzdHJveSBhIGRhc2hib2FyZFxuICpcbiAqIEBtZXRob2QgQW5hbHl0aWNzfkRhc2hib2FyZCNkZXN0cm95XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBbmFseXRpY3N+RGFzaGJvYXJkUmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QW5hbHl0aWNzfkRhc2hib2FyZFJlc3VsdD59XG4gKi9cbkRhc2hib2FyZC5wcm90b3R5cGVbXCJkZWxldGVcIl0gPVxuRGFzaGJvYXJkLnByb3RvdHlwZS5kZWwgPVxuRGFzaGJvYXJkLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHVybCA9IFsgdGhpcy5fY29ubi5fYmFzZVVybCgpLCBcImFuYWx5dGljc1wiLCBcImRhc2hib2FyZHNcIiwgdGhpcy5pZCBdLmpvaW4oJy8nKTtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh7bWV0aG9kOiAnREVMRVRFJywgdXJsOiB1cmx9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEFQSSBjbGFzcyBmb3IgQW5hbHl0aWNzIEFQSVxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIENvbm5lY3Rpb25cbiAqL1xudmFyIEFuYWx5dGljcyA9IGZ1bmN0aW9uKGNvbm4pIHtcbiAgdGhpcy5fY29ubiA9IGNvbm47XG59O1xuXG4vKipcbiAqIEdldCByZXBvcnQgb2JqZWN0IG9mIEFuYWx5dGljcyBBUElcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBSZXBvcnQgSWRcbiAqIEByZXR1cm5zIHtBbmFseXRpY3N+UmVwb3J0fVxuICovXG5BbmFseXRpY3MucHJvdG90eXBlLnJlcG9ydCA9IGZ1bmN0aW9uKGlkKSB7XG4gIHJldHVybiBuZXcgUmVwb3J0KHRoaXMuX2Nvbm4sIGlkKTtcbn07XG5cbi8qKlxuICogR2V0IHJlY2VudCByZXBvcnQgbGlzdFxuICpcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxBbmFseXRpY3N+UmVwb3J0SW5mbz4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48QW5hbHl0aWNzflJlcG9ydEluZm8+Pn1cbiAqL1xuQW5hbHl0aWNzLnByb3RvdHlwZS5yZXBvcnRzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHVybCA9IFsgdGhpcy5fY29ubi5fYmFzZVVybCgpLCBcImFuYWx5dGljc1wiLCBcInJlcG9ydHNcIiBdLmpvaW4oJy8nKTtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogR2V0IGRhc2hib2FyZCBvYmplY3Qgb2YgQW5hbHl0aWNzIEFQSVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIERhc2hib2FyZCBJZFxuICogQHJldHVybnMge0FuYWx5dGljc35EYXNoYm9hcmR9XG4gKi9cbkFuYWx5dGljcy5wcm90b3R5cGUuZGFzaGJvYXJkID0gZnVuY3Rpb24oaWQpIHtcbiAgcmV0dXJuIG5ldyBEYXNoYm9hcmQodGhpcy5fY29ubiwgaWQpO1xufTtcblxuLyoqXG4gKiBHZXQgcmVjZW50IGRhc2hib2FyZCBsaXN0XG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPEFuYWx5dGljc35EYXNoYm9hcmRJbmZvPj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFycmF5LjxBbmFseXRpY3N+RGFzaGJvYXJkSW5mbz4+fVxuICovXG5BbmFseXRpY3MucHJvdG90eXBlLmRhc2hib2FyZHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9jb25uLl9iYXNlVXJsKCksIFwiYW5hbHl0aWNzXCIsIFwiZGFzaGJvYXJkc1wiIF0uam9pbignLycpO1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlxuICogUmVnaXN0ZXIgaG9vayBpbiBjb25uZWN0aW9uIGluc3RhbnRpYXRpb24gZm9yIGR5bmFtaWNhbGx5IGFkZGluZyB0aGlzIEFQSSBtb2R1bGUgZmVhdHVyZXNcbiAqL1xuanNmb3JjZS5vbignY29ubmVjdGlvbjpuZXcnLCBmdW5jdGlvbihjb25uKSB7XG4gIGNvbm4uYW5hbHl0aWNzID0gbmV3IEFuYWx5dGljcyhjb25uKTtcbn0pO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gQW5hbHl0aWNzO1xuIiwiLyoqXG4gKiBAZmlsZSBNYW5hZ2VzIFNhbGVzZm9yY2UgQXBleCBSRVNUIGVuZHBvaW50IGNhbGxzXG4gKiBAYXV0aG9yIFNoaW5pY2hpIFRvbWl0YSA8c2hpbmljaGkudG9taXRhQGdtYWlsLmNvbT5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBqc2ZvcmNlID0gcmVxdWlyZSgnLi4vY29yZScpO1xuXG4vKipcbiAqIEFQSSBjbGFzcyBmb3IgQXBleCBSRVNUIGVuZHBvaW50IGNhbGxcbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7Q29ubmVjdGlvbn0gY29ubiBDb25uZWN0aW9uXG4gKi9cbnZhciBBcGV4ID0gZnVuY3Rpb24oY29ubikge1xuICB0aGlzLl9jb25uID0gY29ubjtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuQXBleC5wcm90b3R5cGUuX2Jhc2VVcmwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4uaW5zdGFuY2VVcmwgKyBcIi9zZXJ2aWNlcy9hcGV4cmVzdFwiO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5BcGV4LnByb3RvdHlwZS5fY3JlYXRlUmVxdWVzdFBhcmFtcyA9IGZ1bmN0aW9uKG1ldGhvZCwgcGF0aCwgYm9keSwgb3B0aW9ucykge1xuICB2YXIgcGFyYW1zID0ge1xuICAgIG1ldGhvZDogbWV0aG9kLFxuICAgIHVybDogdGhpcy5fYmFzZVVybCgpICsgcGF0aFxuICB9LFxuICBfaGVhZGVycyA9IHt9O1xuICBpZihvcHRpb25zICYmICdvYmplY3QnID09PSB0eXBlb2Ygb3B0aW9uc1snaGVhZGVycyddKXtcbiAgICBfaGVhZGVycyA9IG9wdGlvbnNbJ2hlYWRlcnMnXTtcbiAgfVxuICBpZiAoIS9eKEdFVHxERUxFVEUpJC9pLnRlc3QobWV0aG9kKSkge1xuICAgIF9oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG4gIH1cbiAgcGFyYW1zLmhlYWRlcnMgPSBfaGVhZGVycztcbiAgaWYgKGJvZHkpIHtcbiAgICBwYXJhbXMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpO1xuICB9XG4gIHJldHVybiBwYXJhbXM7XG59O1xuXG4vKipcbiAqIENhbGwgQXBleCBSRVNUIHNlcnZpY2UgaW4gR0VUIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aCAtIFVSTCBwYXRoIHRvIEFwZXggUkVTVCBzZXJ2aWNlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEhvbGRzIGhlYWRlcnMgYW5kIG90aGVyIG1ldGEgZGF0YSBmb3IgdGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5BcGV4LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihwYXRoLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHRoaXMuX2NyZWF0ZVJlcXVlc3RQYXJhbXMoJ0dFVCcsIHBhdGgsIHVuZGVmaW5lZCwgb3B0aW9ucykpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQ2FsbCBBcGV4IFJFU1Qgc2VydmljZSBpbiBQT1NUIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aCAtIFVSTCBwYXRoIHRvIEFwZXggUkVTVCBzZXJ2aWNlXG4gKiBAcGFyYW0ge09iamVjdH0gW2JvZHldIC0gUmVxdWVzdCBib2R5XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIEhvbGRzIGhlYWRlcnMgYW5kIG90aGVyIG1ldGEgZGF0YSBmb3IgdGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5BcGV4LnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24ocGF0aCwgYm9keSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBib2R5ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBib2R5O1xuICAgIGJvZHkgPSB1bmRlZmluZWQ7XG4gICAgb3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgcGFyYW1zID0gdGhpcy5fY3JlYXRlUmVxdWVzdFBhcmFtcygnUE9TVCcsIHBhdGgsIGJvZHksIG9wdGlvbnMpO1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHBhcmFtcykudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBDYWxsIEFwZXggUkVTVCBzZXJ2aWNlIGluIFBVVCByZXF1ZXN0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggLSBVUkwgcGF0aCB0byBBcGV4IFJFU1Qgc2VydmljZVxuICogQHBhcmFtIHtPYmplY3R9IFtib2R5XSAtIFJlcXVlc3QgYm9keVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIEhvbGRzIGhlYWRlcnMgYW5kIG90aGVyIG1ldGEgZGF0YSBmb3IgdGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5BcGV4LnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbihwYXRoLCBib2R5LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIGJvZHkgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IGJvZHk7XG4gICAgYm9keSA9IHVuZGVmaW5lZDtcbiAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIHZhciBwYXJhbXMgPSB0aGlzLl9jcmVhdGVSZXF1ZXN0UGFyYW1zKCdQVVQnLCBwYXRoLCBib2R5LCBvcHRpb25zKTtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdChwYXJhbXMpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQ2FsbCBBcGV4IFJFU1Qgc2VydmljZSBpbiBQQVRDSCByZXF1ZXN0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggLSBVUkwgcGF0aCB0byBBcGV4IFJFU1Qgc2VydmljZVxuICogQHBhcmFtIHtPYmplY3R9IFtib2R5XSAtIFJlcXVlc3QgYm9keVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIEhvbGRzIGhlYWRlcnMgYW5kIG90aGVyIG1ldGEgZGF0YSBmb3IgdGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5BcGV4LnByb3RvdHlwZS5wYXRjaCA9IGZ1bmN0aW9uKHBhdGgsIGJvZHksIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgYm9keSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gYm9keTtcbiAgICBib2R5ID0gdW5kZWZpbmVkO1xuICAgIG9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gIH1cbiAgdmFyIHBhcmFtcyA9IHRoaXMuX2NyZWF0ZVJlcXVlc3RQYXJhbXMoJ1BBVENIJywgcGF0aCwgYm9keSwgb3B0aW9ucyk7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QocGFyYW1zKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgQXBleCNkZWxldGUoKVxuICpcbiAqIEBtZXRob2QgQXBleCNkZWxcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aCAtIFVSTCBwYXRoIHRvIEFwZXggUkVTVCBzZXJ2aWNlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG4vKipcbiAqIENhbGwgQXBleCBSRVNUIHNlcnZpY2UgaW4gREVMRVRFIHJlcXVlc3RcbiAqXG4gKiBAbWV0aG9kIEFwZXgjZGVsZXRlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGggLSBVUkwgcGF0aCB0byBBcGV4IFJFU1Qgc2VydmljZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIEhvbGRzIGhlYWRlcnMgYW5kIG90aGVyIG1ldGEgZGF0YSBmb3IgdGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5BcGV4LnByb3RvdHlwZS5kZWwgPVxuICBBcGV4LnByb3RvdHlwZVtcImRlbGV0ZVwiXSA9IGZ1bmN0aW9uKHBhdGgsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QodGhpcy5fY3JlYXRlUmVxdWVzdFBhcmFtcygnREVMRVRFJywgcGF0aCwgdW5kZWZpbmVkLCBvcHRpb25zKSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXG4gKiBSZWdpc3RlciBob29rIGluIGNvbm5lY3Rpb24gaW5zdGFudGlhdGlvbiBmb3IgZHluYW1pY2FsbHkgYWRkaW5nIHRoaXMgQVBJIG1vZHVsZSBmZWF0dXJlc1xuICovXG5qc2ZvcmNlLm9uKCdjb25uZWN0aW9uOm5ldycsIGZ1bmN0aW9uKGNvbm4pIHtcbiAgY29ubi5hcGV4ID0gbmV3IEFwZXgoY29ubik7XG59KTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEFwZXg7XG4iLCIvKmdsb2JhbCBwcm9jZXNzKi9cbi8qKlxuICogQGZpbGUgTWFuYWdlcyBTYWxlc2ZvcmNlIEJ1bGsgQVBJIHJlbGF0ZWQgb3BlcmF0aW9uc1xuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgICAgID0gcmVxdWlyZSgnaW5oZXJpdHMnKSxcbiAgICBzdHJlYW0gICAgICAgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0nKSxcbiAgICBEdXBsZXggICAgICAgPSBzdHJlYW0uRHVwbGV4LFxuICAgIGV2ZW50cyAgICAgICA9IHJlcXVpcmUoJ2V2ZW50cycpLFxuICAgIF8gICAgICAgICAgICA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyksXG4gICAgam9pblN0cmVhbXMgID0gcmVxdWlyZSgnbXVsdGlzdHJlYW0nKSxcbiAgICBqc2ZvcmNlICAgICAgPSByZXF1aXJlKCcuLi9jb3JlJyksXG4gICAgUmVjb3JkU3RyZWFtID0gcmVxdWlyZSgnLi4vcmVjb3JkLXN0cmVhbScpLFxuICAgIFByb21pc2UgICAgICA9IHJlcXVpcmUoJy4uL3Byb21pc2UnKSxcbiAgICBIdHRwQXBpICAgICAgPSByZXF1aXJlKCcuLi9odHRwLWFwaScpO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuLyoqXG4gKiBDbGFzcyBmb3IgQnVsayBBUEkgSm9iXG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzIEJ1bGt+Sm9iXG4gKiBAZXh0ZW5kcyBldmVudHMuRXZlbnRFbWl0dGVyXG4gKlxuICogQHBhcmFtIHtCdWxrfSBidWxrIC0gQnVsayBBUEkgb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gW3R5cGVdIC0gU09iamVjdCB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wZXJhdGlvbl0gLSBCdWxrIGxvYWQgb3BlcmF0aW9uICgnaW5zZXJ0JywgJ3VwZGF0ZScsICd1cHNlcnQnLCAnZGVsZXRlJywgb3IgJ2hhcmREZWxldGUnKVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIGJ1bGsgbG9hZGluZyBvcGVyYXRpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5leHRJZEZpZWxkXSAtIEV4dGVybmFsIElEIGZpZWxkIG5hbWUgKHVzZWQgd2hlbiB1cHNlcnQgb3BlcmF0aW9uKS5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5jb25jdXJyZW5jeU1vZGVdIC0gJ1NlcmlhbCcgb3IgJ1BhcmFsbGVsJy4gRGVmYXVsdHMgdG8gUGFyYWxsZWwuXG4gKiBAcGFyYW0ge1N0cmluZ30gW2pvYklkXSAtIEpvYiBJRCAoaWYgYWxyZWFkeSBhdmFpbGFibGUpXG4gKi9cbnZhciBKb2IgPSBmdW5jdGlvbihidWxrLCB0eXBlLCBvcGVyYXRpb24sIG9wdGlvbnMsIGpvYklkKSB7XG4gIHRoaXMuX2J1bGsgPSBidWxrO1xuICB0aGlzLnR5cGUgPSB0eXBlO1xuICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5pZCA9IGpvYklkO1xuICB0aGlzLnN0YXRlID0gdGhpcy5pZCA/ICdPcGVuJyA6ICdVbmtub3duJztcbiAgdGhpcy5fYmF0Y2hlcyA9IHt9O1xufTtcblxuaW5oZXJpdHMoSm9iLCBldmVudHMuRXZlbnRFbWl0dGVyKTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBCdWxrfkpvYkluZm9cbiAqIEBwcm9wIHtTdHJpbmd9IGlkIC0gSm9iIElEXG4gKiBAcHJvcCB7U3RyaW5nfSBvYmplY3QgLSBPYmplY3QgdHlwZSBuYW1lXG4gKiBAcHJvcCB7U3RyaW5nfSBvcGVyYXRpb24gLSBPcGVyYXRpb24gdHlwZSBvZiB0aGUgam9iXG4gKiBAcHJvcCB7U3RyaW5nfSBzdGF0ZSAtIEpvYiBzdGF0dXNcbiAqL1xuXG4vKipcbiAqIFJldHVybiBsYXRlc3Qgam9iSW5mbyBmcm9tIGNhY2hlXG4gKlxuICogQG1ldGhvZCBCdWxrfkpvYiNpbmZvXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxCdWxrfkpvYkluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxCdWxrfkpvYkluZm8+fVxuICovXG5Kb2IucHJvdG90eXBlLmluZm8gPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIC8vIGlmIGNhY2hlIGlzIG5vdCBhdmFpbGFibGUsIGNoZWNrIHRoZSBsYXRlc3RcbiAgaWYgKCF0aGlzLl9qb2JJbmZvKSB7XG4gICAgdGhpcy5fam9iSW5mbyA9IHRoaXMuY2hlY2soKTtcbiAgfVxuICByZXR1cm4gdGhpcy5fam9iSW5mby50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIE9wZW4gbmV3IGpvYiBhbmQgZ2V0IGpvYmluZm9cbiAqXG4gKiBAbWV0aG9kIEJ1bGt+Sm9iI29wZW5cbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEJ1bGt+Sm9iSW5mbz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEJ1bGt+Sm9iSW5mbz59XG4gKi9cbkpvYi5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGJ1bGsgPSB0aGlzLl9idWxrO1xuICB2YXIgbG9nZ2VyID0gYnVsay5fbG9nZ2VyO1xuXG4gIC8vIGlmIG5vdCByZXF1ZXN0ZWQgb3BlbmluZyBqb2JcbiAgaWYgKCF0aGlzLl9qb2JJbmZvKSB7XG4gICAgdmFyIG9wZXJhdGlvbiA9IHRoaXMub3BlcmF0aW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKG9wZXJhdGlvbiA9PT0gJ2hhcmRkZWxldGUnKSB7IG9wZXJhdGlvbiA9ICdoYXJkRGVsZXRlJzsgfVxuICAgIHZhciBib2R5ID0gW1xuICAgICAgJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/PicsXG4gICAgICAnPGpvYkluZm8gIHhtbG5zPVwiaHR0cDovL3d3dy5mb3JjZS5jb20vMjAwOS8wNi9hc3luY2FwaS9kYXRhbG9hZFwiPicsXG4gICAgICAgICc8b3BlcmF0aW9uPicgKyBvcGVyYXRpb24gKyAnPC9vcGVyYXRpb24+JyxcbiAgICAgICAgJzxvYmplY3Q+JyArIHRoaXMudHlwZSArICc8L29iamVjdD4nLFxuICAgICAgICAodGhpcy5vcHRpb25zLmV4dElkRmllbGQgP1xuICAgICAgICAgJzxleHRlcm5hbElkRmllbGROYW1lPicrdGhpcy5vcHRpb25zLmV4dElkRmllbGQrJzwvZXh0ZXJuYWxJZEZpZWxkTmFtZT4nIDpcbiAgICAgICAgICcnKSxcbiAgICAgICAgKHRoaXMub3B0aW9ucy5jb25jdXJyZW5jeU1vZGUgP1xuICAgICAgICAgJzxjb25jdXJyZW5jeU1vZGU+Jyt0aGlzLm9wdGlvbnMuY29uY3VycmVuY3lNb2RlKyc8L2NvbmN1cnJlbmN5TW9kZT4nIDpcbiAgICAgICAgICcnKSxcbiAgICAgICAgKHRoaXMub3B0aW9ucy5hc3NpZ25tZW50UnVsZUlkID9cbiAgICAgICAgICAnPGFzc2lnbm1lbnRSdWxlSWQ+JyArIHRoaXMub3B0aW9ucy5hc3NpZ25tZW50UnVsZUlkICsgJzwvYXNzaWdubWVudFJ1bGVJZD4nIDpcbiAgICAgICAgICAnJyksXG4gICAgICAgICc8Y29udGVudFR5cGU+Q1NWPC9jb250ZW50VHlwZT4nLFxuICAgICAgJzwvam9iSW5mbz4nXG4gICAgXS5qb2luKCcnKTtcblxuICAgIHRoaXMuX2pvYkluZm8gPSBidWxrLl9yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZCA6ICdQT1NUJyxcbiAgICAgIHBhdGggOiBcIi9qb2JcIixcbiAgICAgIGJvZHkgOiBib2R5LFxuICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIiA6IFwiYXBwbGljYXRpb24veG1sOyBjaGFyc2V0PXV0Zi04XCJcbiAgICAgIH0sXG4gICAgICByZXNwb25zZVR5cGU6IFwiYXBwbGljYXRpb24veG1sXCJcbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgc2VsZi5lbWl0KFwib3BlblwiLCByZXMuam9iSW5mbyk7XG4gICAgICBzZWxmLmlkID0gcmVzLmpvYkluZm8uaWQ7XG4gICAgICBzZWxmLnN0YXRlID0gcmVzLmpvYkluZm8uc3RhdGU7XG4gICAgICByZXR1cm4gcmVzLmpvYkluZm87XG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBzZWxmLmVtaXQoXCJlcnJvclwiLCBlcnIpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0aGlzLl9qb2JJbmZvLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGJhdGNoIGluc3RhbmNlIGluIHRoZSBqb2JcbiAqXG4gKiBAbWV0aG9kIEJ1bGt+Sm9iI2NyZWF0ZUJhdGNoXG4gKiBAcmV0dXJucyB7QnVsa35CYXRjaH1cbiAqL1xuSm9iLnByb3RvdHlwZS5jcmVhdGVCYXRjaCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYmF0Y2ggPSBuZXcgQmF0Y2godGhpcyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgYmF0Y2gub24oJ3F1ZXVlJywgZnVuY3Rpb24oKSB7XG4gICAgc2VsZi5fYmF0Y2hlc1tiYXRjaC5pZF0gPSBiYXRjaDtcbiAgfSk7XG4gIHJldHVybiBiYXRjaDtcbn07XG5cbi8qKlxuICogR2V0IGEgYmF0Y2ggaW5zdGFuY2Ugc3BlY2lmaWVkIGJ5IGdpdmVuIGJhdGNoIElEXG4gKlxuICogQG1ldGhvZCBCdWxrfkpvYiNiYXRjaFxuICogQHBhcmFtIHtTdHJpbmd9IGJhdGNoSWQgLSBCYXRjaCBJRFxuICogQHJldHVybnMge0J1bGt+QmF0Y2h9XG4gKi9cbkpvYi5wcm90b3R5cGUuYmF0Y2ggPSBmdW5jdGlvbihiYXRjaElkKSB7XG4gIHZhciBiYXRjaCA9IHRoaXMuX2JhdGNoZXNbYmF0Y2hJZF07XG4gIGlmICghYmF0Y2gpIHtcbiAgICBiYXRjaCA9IG5ldyBCYXRjaCh0aGlzLCBiYXRjaElkKTtcbiAgICB0aGlzLl9iYXRjaGVzW2JhdGNoSWRdID0gYmF0Y2g7XG4gIH1cbiAgcmV0dXJuIGJhdGNoO1xufTtcblxuLyoqXG4gKiBDaGVjayB0aGUgbGF0ZXN0IGpvYiBzdGF0dXMgZnJvbSBzZXJ2ZXJcbiAqXG4gKiBAbWV0aG9kIEJ1bGt+Sm9iI2NoZWNrXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxCdWxrfkpvYkluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxCdWxrfkpvYkluZm8+fVxuICovXG5Kb2IucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgYnVsayA9IHRoaXMuX2J1bGs7XG4gIHZhciBsb2dnZXIgPSBidWxrLl9sb2dnZXI7XG5cbiAgdGhpcy5fam9iSW5mbyA9IHRoaXMuX3dhaXRBc3NpZ24oKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBidWxrLl9yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgcGF0aCA6IFwiL2pvYi9cIiArIHNlbGYuaWQsXG4gICAgICByZXNwb25zZVR5cGU6IFwiYXBwbGljYXRpb24veG1sXCJcbiAgICB9KTtcbiAgfSkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICBsb2dnZXIuZGVidWcocmVzLmpvYkluZm8pO1xuICAgIHNlbGYuaWQgPSByZXMuam9iSW5mby5pZDtcbiAgICBzZWxmLnR5cGUgPSByZXMuam9iSW5mby5vYmplY3Q7XG4gICAgc2VsZi5vcGVyYXRpb24gPSByZXMuam9iSW5mby5vcGVyYXRpb247XG4gICAgc2VsZi5zdGF0ZSA9IHJlcy5qb2JJbmZvLnN0YXRlO1xuICAgIHJldHVybiByZXMuam9iSW5mbztcbiAgfSk7XG4gIHJldHVybiB0aGlzLl9qb2JJbmZvLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogV2FpdCB0aWxsIHRoZSBqb2IgaXMgYXNzaWduZWQgdG8gc2VydmVyXG4gKlxuICogQG1ldGhvZCBCdWxrfkpvYiNpbmZvXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxCdWxrfkpvYkluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxCdWxrfkpvYkluZm8+fVxuICovXG5Kb2IucHJvdG90eXBlLl93YWl0QXNzaWduID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuICh0aGlzLmlkID8gUHJvbWlzZS5yZXNvbHZlKHsgaWQ6IHRoaXMuaWQgfSkgOiB0aGlzLm9wZW4oKSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuXG4vKipcbiAqIExpc3QgYWxsIHJlZ2lzdGVyZWQgYmF0Y2ggaW5mbyBpbiBqb2JcbiAqXG4gKiBAbWV0aG9kIEJ1bGt+Sm9iI2xpc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxCdWxrfkJhdGNoSW5mbz4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48QnVsa35CYXRjaEluZm8+Pn1cbiAqL1xuSm9iLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgYnVsayA9IHRoaXMuX2J1bGs7XG4gIHZhciBsb2dnZXIgPSBidWxrLl9sb2dnZXI7XG5cbiAgcmV0dXJuIHRoaXMuX3dhaXRBc3NpZ24oKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBidWxrLl9yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgcGF0aCA6IFwiL2pvYi9cIiArIHNlbGYuaWQgKyBcIi9iYXRjaFwiLFxuICAgICAgcmVzcG9uc2VUeXBlOiBcImFwcGxpY2F0aW9uL3htbFwiXG4gICAgfSk7XG4gIH0pLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgbG9nZ2VyLmRlYnVnKHJlcy5iYXRjaEluZm9MaXN0LmJhdGNoSW5mbyk7XG4gICAgdmFyIGJhdGNoSW5mb0xpc3QgPSByZXMuYmF0Y2hJbmZvTGlzdDtcbiAgICBiYXRjaEluZm9MaXN0ID0gXy5pc0FycmF5KGJhdGNoSW5mb0xpc3QuYmF0Y2hJbmZvKSA/IGJhdGNoSW5mb0xpc3QuYmF0Y2hJbmZvIDogWyBiYXRjaEluZm9MaXN0LmJhdGNoSW5mbyBdO1xuICAgIHJldHVybiBiYXRjaEluZm9MaXN0O1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG5cbn07XG5cbi8qKlxuICogQ2xvc2Ugb3BlbmVkIGpvYlxuICpcbiAqIEBtZXRob2QgQnVsa35Kb2IjY2xvc2VcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEJ1bGt+Sm9iSW5mbz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEJ1bGt+Sm9iSW5mbz59XG4gKi9cbkpvYi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICByZXR1cm4gdGhpcy5fY2hhbmdlU3RhdGUoXCJDbG9zZWRcIikudGhlbihmdW5jdGlvbihqb2JJbmZvKSB7XG4gICAgc2VsZi5pZCA9IG51bGw7XG4gICAgc2VsZi5lbWl0KFwiY2xvc2VcIiwgam9iSW5mbyk7XG4gICAgcmV0dXJuIGpvYkluZm87XG4gIH0sIGZ1bmN0aW9uKGVycikge1xuICAgIHNlbGYuZW1pdChcImVycm9yXCIsIGVycik7XG4gICAgdGhyb3cgZXJyO1xuICB9KTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBzdGF0dXMgdG8gYWJvcnRcbiAqXG4gKiBAbWV0aG9kIEJ1bGt+Sm9iI2Fib3J0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxCdWxrfkpvYkluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxCdWxrfkpvYkluZm8+fVxuICovXG5Kb2IucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcmV0dXJuIHRoaXMuX2NoYW5nZVN0YXRlKFwiQWJvcnRlZFwiKS50aGVuKGZ1bmN0aW9uKGpvYkluZm8pIHtcbiAgICBzZWxmLmlkID0gbnVsbDtcbiAgICBzZWxmLmVtaXQoXCJhYm9ydFwiLCBqb2JJbmZvKTtcbiAgICByZXR1cm4gam9iSW5mbztcbiAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwgZXJyKTtcbiAgICB0aHJvdyBlcnI7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5Kb2IucHJvdG90eXBlLl9jaGFuZ2VTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlLCBjYWxsYmFjaykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBidWxrID0gdGhpcy5fYnVsaztcbiAgdmFyIGxvZ2dlciA9IGJ1bGsuX2xvZ2dlcjtcblxuICB0aGlzLl9qb2JJbmZvID0gdGhpcy5fd2FpdEFzc2lnbigpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJvZHkgPSBbXG4gICAgICAnPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+JyxcbiAgICAgICc8am9iSW5mbyB4bWxucz1cImh0dHA6Ly93d3cuZm9yY2UuY29tLzIwMDkvMDYvYXN5bmNhcGkvZGF0YWxvYWRcIj4nLFxuICAgICAgICAnPHN0YXRlPicgKyBzdGF0ZSArICc8L3N0YXRlPicsXG4gICAgICAnPC9qb2JJbmZvPidcbiAgICBdLmpvaW4oJycpO1xuICAgIHJldHVybiBidWxrLl9yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZCA6ICdQT1NUJyxcbiAgICAgIHBhdGggOiBcIi9qb2IvXCIgKyBzZWxmLmlkLFxuICAgICAgYm9keSA6IGJvZHksXG4gICAgICBoZWFkZXJzIDoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi94bWw7IGNoYXJzZXQ9dXRmLThcIlxuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlVHlwZTogXCJhcHBsaWNhdGlvbi94bWxcIlxuICAgIH0pO1xuICB9KS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIGxvZ2dlci5kZWJ1ZyhyZXMuam9iSW5mbyk7XG4gICAgc2VsZi5zdGF0ZSA9IHJlcy5qb2JJbmZvLnN0YXRlO1xuICAgIHJldHVybiByZXMuam9iSW5mbztcbiAgfSk7XG4gIHJldHVybiB0aGlzLl9qb2JJbmZvLnRoZW5DYWxsKGNhbGxiYWNrKTtcblxufTtcblxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuLyoqXG4gKiBCYXRjaCAoZXh0ZW5kcyBSZWNvcmRTdHJlYW0pXG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzIEJ1bGt+QmF0Y2hcbiAqIEBleHRlbmRzIHtzdHJlYW0uV3JpdGFibGV9XG4gKiBAaW1wbGVtZW50cyB7UHJvbWlzZS48QXJyYXkuPFJlY29yZFJlc3VsdD4+fVxuICogQHBhcmFtIHtCdWxrfkpvYn0gam9iIC0gQnVsayBqb2Igb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gW2JhdGNoSWRdIC0gQmF0Y2ggSUQgKGlmIGFscmVhZHkgYXZhaWxhYmxlKVxuICovXG52YXIgQmF0Y2ggPSBmdW5jdGlvbihqb2IsIGJhdGNoSWQpIHtcbiAgQmF0Y2guc3VwZXJfLmNhbGwodGhpcywgeyBvYmplY3RNb2RlOiB0cnVlIH0pO1xuICB0aGlzLmpvYiA9IGpvYjtcbiAgdGhpcy5pZCA9IGJhdGNoSWQ7XG4gIHRoaXMuX2J1bGsgPSBqb2IuX2J1bGs7XG4gIHRoaXMuX2RlZmVycmVkID0gUHJvbWlzZS5kZWZlcigpO1xuICB0aGlzLl9zZXR1cERhdGFTdHJlYW1zKCk7XG59O1xuXG5pbmhlcml0cyhCYXRjaCwgc3RyZWFtLldyaXRhYmxlKTtcblxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkJhdGNoLnByb3RvdHlwZS5fc2V0dXBEYXRhU3RyZWFtcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYmF0Y2ggPSB0aGlzO1xuICB2YXIgY29udmVydGVyT3B0aW9ucyA9IHsgbnVsbFZhbHVlIDogJyNOL0EnIH07XG4gIHRoaXMuX3VwbG9hZFN0cmVhbSA9IG5ldyBSZWNvcmRTdHJlYW0uU2VyaWFsaXphYmxlKCk7XG4gIHRoaXMuX3VwbG9hZERhdGFTdHJlYW0gPSB0aGlzLl91cGxvYWRTdHJlYW0uc3RyZWFtKCdjc3YnLCBjb252ZXJ0ZXJPcHRpb25zKTtcbiAgdGhpcy5fZG93bmxvYWRTdHJlYW0gPSBuZXcgUmVjb3JkU3RyZWFtLlBhcnNhYmxlKCk7XG4gIHRoaXMuX2Rvd25sb2FkRGF0YVN0cmVhbSA9IHRoaXMuX2Rvd25sb2FkU3RyZWFtLnN0cmVhbSgnY3N2JywgY29udmVydGVyT3B0aW9ucyk7XG5cbiAgdGhpcy5vbignZmluaXNoJywgZnVuY3Rpb24oKSB7XG4gICAgYmF0Y2guX3VwbG9hZFN0cmVhbS5lbmQoKTtcbiAgfSk7XG4gIHRoaXMuX3VwbG9hZERhdGFTdHJlYW0ub25jZSgncmVhZGFibGUnLCBmdW5jdGlvbigpIHtcbiAgICBiYXRjaC5qb2Iub3BlbigpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAvLyBwaXBlIHVwbG9hZCBkYXRhIHRvIGJhdGNoIEFQSSByZXF1ZXN0IHN0cmVhbVxuICAgICAgYmF0Y2guX3VwbG9hZERhdGFTdHJlYW0ucGlwZShiYXRjaC5fY3JlYXRlUmVxdWVzdFN0cmVhbSgpKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gZHVwbGV4IGRhdGEgc3RyZWFtLCBvcGVuZWQgYWNjZXNzIHRvIEFQSSBwcm9ncmFtbWVycyBieSBCYXRjaCNzdHJlYW0oKVxuICB2YXIgZGF0YVN0cmVhbSA9IHRoaXMuX2RhdGFTdHJlYW0gPSBuZXcgRHVwbGV4KCk7XG4gIGRhdGFTdHJlYW0uX3dyaXRlID0gZnVuY3Rpb24oZGF0YSwgZW5jLCBjYikge1xuICAgIGJhdGNoLl91cGxvYWREYXRhU3RyZWFtLndyaXRlKGRhdGEsIGVuYywgY2IpO1xuICB9O1xuICBkYXRhU3RyZWFtLm9uKCdmaW5pc2gnLCBmdW5jdGlvbigpIHtcbiAgICBiYXRjaC5fdXBsb2FkRGF0YVN0cmVhbS5lbmQoKTtcbiAgfSk7XG5cbiAgdGhpcy5fZG93bmxvYWREYXRhU3RyZWFtLm9uKCdyZWFkYWJsZScsIGZ1bmN0aW9uKCkge1xuICAgIGRhdGFTdHJlYW0ucmVhZCgwKTtcbiAgfSk7XG4gIHRoaXMuX2Rvd25sb2FkRGF0YVN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgZGF0YVN0cmVhbS5wdXNoKG51bGwpO1xuICB9KTtcbiAgZGF0YVN0cmVhbS5fcmVhZCA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgICB2YXIgY2h1bms7XG4gICAgd2hpbGUgKChjaHVuayA9IGJhdGNoLl9kb3dubG9hZERhdGFTdHJlYW0ucmVhZCgpKSAhPT0gbnVsbCkge1xuICAgICAgZGF0YVN0cmVhbS5wdXNoKGNodW5rKTtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIENvbm5lY3QgYmF0Y2ggQVBJIGFuZCBjcmVhdGUgc3RyZWFtIGluc3RhbmNlIG9mIHJlcXVlc3QvcmVzcG9uc2VcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybnMge3N0cmVhbS5EdXBsZXh9XG4gKi9cbkJhdGNoLnByb3RvdHlwZS5fY3JlYXRlUmVxdWVzdFN0cmVhbSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYmF0Y2ggPSB0aGlzO1xuICB2YXIgYnVsayA9IGJhdGNoLl9idWxrO1xuICB2YXIgbG9nZ2VyID0gYnVsay5fbG9nZ2VyO1xuXG4gIHJldHVybiBidWxrLl9yZXF1ZXN0KHtcbiAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgcGF0aCA6IFwiL2pvYi9cIiArIGJhdGNoLmpvYi5pZCArIFwiL2JhdGNoXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJ0ZXh0L2NzdlwiXG4gICAgfSxcbiAgICByZXNwb25zZVR5cGU6IFwiYXBwbGljYXRpb24veG1sXCJcbiAgfSwgZnVuY3Rpb24oZXJyLCByZXMpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBiYXRjaC5lbWl0KCdlcnJvcicsIGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhyZXMuYmF0Y2hJbmZvKTtcbiAgICAgIGJhdGNoLmlkID0gcmVzLmJhdGNoSW5mby5pZDtcbiAgICAgIGJhdGNoLmVtaXQoJ3F1ZXVlJywgcmVzLmJhdGNoSW5mbyk7XG4gICAgfVxuICB9KS5zdHJlYW0oKTtcbn07XG5cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgV3JpdGFibGVcbiAqXG4gKiBAb3ZlcnJpZGVcbiAqIEBwcml2YXRlXG4gKi9cbkJhdGNoLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbihyZWNvcmQsIGVuYywgY2IpIHtcbiAgcmVjb3JkID0gXy5jbG9uZShyZWNvcmQpO1xuICBpZiAodGhpcy5qb2Iub3BlcmF0aW9uID09PSBcImluc2VydFwiKSB7XG4gICAgZGVsZXRlIHJlY29yZC5JZDtcbiAgfSBlbHNlIGlmICh0aGlzLmpvYi5vcGVyYXRpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgICByZWNvcmQgPSB7IElkOiByZWNvcmQuSWQgfTtcbiAgfVxuICBkZWxldGUgcmVjb3JkLnR5cGU7XG4gIGRlbGV0ZSByZWNvcmQuYXR0cmlidXRlcztcbiAgdGhpcy5fdXBsb2FkU3RyZWFtLndyaXRlKHJlY29yZCwgZW5jLCBjYik7XG59O1xuXG4vKipcbiAqIFJldHVybnMgZHVwbGV4IHN0cmVhbSB3aGljaCBhY2NlcHRzIENTViBkYXRhIGlucHV0IGFuZCBiYXRjaCByZXN1bHQgb3V0cHV0XG4gKlxuICogQHJldHVybnMge3N0cmVhbS5EdXBsZXh9XG4gKi9cbkJhdGNoLnByb3RvdHlwZS5zdHJlYW0gPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2RhdGFTdHJlYW07XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgYmF0Y2ggb3BlcmF0aW9uXG4gKlxuICogQG1ldGhvZCBCdWxrfkJhdGNoI2V4ZWN1dGVcbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJhdGNoIG9wZXJhdGlvbi4gQWNjZXB0cyBhcnJheSBvZiByZWNvcmRzLCBDU1Ygc3RyaW5nLCBhbmQgQ1NWIGRhdGEgaW5wdXQgc3RyZWFtIGluIGluc2VydC91cGRhdGUvdXBzZXJ0L2RlbGV0ZS9oYXJkRGVsZXRlIG9wZXJhdGlvbiwgU09RTCBzdHJpbmcgaW4gcXVlcnkgb3BlcmF0aW9uLlxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPFJlY29yZFJlc3VsdD58QXJyYXkuPEJhdGNoUmVzdWx0SW5mbz4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtCdWxrfkJhdGNofVxuICovXG5CYXRjaC5wcm90b3R5cGUucnVuID1cbkJhdGNoLnByb3RvdHlwZS5leGVjID1cbkJhdGNoLnByb3RvdHlwZS5leGVjdXRlID0gZnVuY3Rpb24oaW5wdXQsIGNhbGxiYWNrKSB7XG4gIHZhciBzZWxmID0gdGhpcztcblxuICBpZiAodHlwZW9mIGlucHV0ID09PSAnZnVuY3Rpb24nKSB7IC8vIGlmIGlucHV0IGFyZ3VtZW50IGlzIG9taXR0ZWRcbiAgICBjYWxsYmFjayA9IGlucHV0O1xuICAgIGlucHV0ID0gbnVsbDtcbiAgfVxuXG4gIC8vIGlmIGJhdGNoIGlzIGFscmVhZHkgZXhlY3V0ZWRcbiAgaWYgKHRoaXMuX3Jlc3VsdCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkJhdGNoIGFscmVhZHkgZXhlY3V0ZWQuXCIpO1xuICB9XG5cbiAgdmFyIHJkZWZlcnJlZCA9IFByb21pc2UuZGVmZXIoKTtcbiAgdGhpcy5fcmVzdWx0ID0gcmRlZmVycmVkLnByb21pc2U7XG4gIHRoaXMuX3Jlc3VsdC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIHNlbGYuX2RlZmVycmVkLnJlc29sdmUocmVzKTtcbiAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgc2VsZi5fZGVmZXJyZWQucmVqZWN0KGVycik7XG4gIH0pO1xuICB0aGlzLm9uY2UoJ3Jlc3BvbnNlJywgZnVuY3Rpb24ocmVzKSB7XG4gICAgcmRlZmVycmVkLnJlc29sdmUocmVzKTtcbiAgfSk7XG4gIHRoaXMub25jZSgnZXJyb3InLCBmdW5jdGlvbihlcnIpIHtcbiAgICByZGVmZXJyZWQucmVqZWN0KGVycik7XG4gIH0pO1xuXG4gIGlmIChfLmlzT2JqZWN0KGlucHV0KSAmJiBfLmlzRnVuY3Rpb24oaW5wdXQucGlwZSkpIHsgLy8gaWYgaW5wdXQgaGFzIHN0cmVhbS5SZWFkYWJsZSBpbnRlcmZhY2VcbiAgICBpbnB1dC5waXBlKHRoaXMuX2RhdGFTdHJlYW0pO1xuICB9IGVsc2Uge1xuICAgIHZhciBkYXRhO1xuICAgIGlmIChfLmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICBfLmZvckVhY2goaW5wdXQsIGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgICBPYmplY3Qua2V5cyhyZWNvcmQpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmRba2V5XSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICByZWNvcmRba2V5XSA9IFN0cmluZyhyZWNvcmRba2V5XSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHNlbGYud3JpdGUocmVjb3JkKTtcbiAgICAgIH0pO1xuICAgICAgc2VsZi5lbmQoKTtcbiAgICB9IGVsc2UgaWYgKF8uaXNTdHJpbmcoaW5wdXQpKXtcbiAgICAgIGRhdGEgPSBpbnB1dDtcbiAgICAgIHRoaXMuX2RhdGFTdHJlYW0ud3JpdGUoZGF0YSwgJ3V0ZjgnKTtcbiAgICAgIHRoaXMuX2RhdGFTdHJlYW0uZW5kKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gcmV0dXJuIEJhdGNoIGluc3RhbmNlIGZvciBjaGFpbmluZ1xuICByZXR1cm4gdGhpcy50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFByb21pc2UvQSsgaW50ZXJmYWNlXG4gKiBodHRwOi8vcHJvbWlzZXMtYXBsdXMuZ2l0aHViLmlvL3Byb21pc2VzLXNwZWMvXG4gKlxuICogRGVsZWdhdGUgdG8gZGVmZXJyZWQgcHJvbWlzZSwgcmV0dXJuIHByb21pc2UgaW5zdGFuY2UgZm9yIGJhdGNoIHJlc3VsdFxuICpcbiAqIEBtZXRob2QgQnVsa35CYXRjaCN0aGVuXG4gKi9cbkJhdGNoLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25SZXNvbHZlZCwgb25SZWplY3QsIG9uUHJvZ3Jlc3MpIHtcbiAgcmV0dXJuIHRoaXMuX2RlZmVycmVkLnByb21pc2UudGhlbihvblJlc29sdmVkLCBvblJlamVjdCwgb25Qcm9ncmVzcyk7XG59O1xuXG4vKipcbiAqIFByb21pc2UvQSsgZXh0ZW5zaW9uXG4gKiBDYWxsIFwidGhlblwiIHVzaW5nIGdpdmVuIG5vZGUtc3R5bGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAqXG4gKiBAbWV0aG9kIEJ1bGt+QmF0Y2gjdGhlbkNhbGxcbiAqL1xuQmF0Y2gucHJvdG90eXBlLnRoZW5DYWxsID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgaWYgKF8uaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICB0aGlzLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBjYWxsYmFjayhudWxsLCByZXMpO1xuICAgICAgfSk7XG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEJ1bGt+QmF0Y2hJbmZvXG4gKiBAcHJvcCB7U3RyaW5nfSBpZCAtIEJhdGNoIElEXG4gKiBAcHJvcCB7U3RyaW5nfSBqb2JJZCAtIEpvYiBJRFxuICogQHByb3Age1N0cmluZ30gc3RhdGUgLSBCYXRjaCBzdGF0ZVxuICogQHByb3Age1N0cmluZ30gc3RhdGVNZXNzYWdlIC0gQmF0Y2ggc3RhdGUgbWVzc2FnZVxuICovXG5cbi8qKlxuICogQ2hlY2sgdGhlIGxhdGVzdCBiYXRjaCBzdGF0dXMgaW4gc2VydmVyXG4gKlxuICogQG1ldGhvZCBCdWxrfkJhdGNoI2NoZWNrXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxCdWxrfkJhdGNoSW5mbz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEJ1bGt+QmF0Y2hJbmZvPn1cbiAqL1xuQmF0Y2gucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgYnVsayA9IHRoaXMuX2J1bGs7XG4gIHZhciBsb2dnZXIgPSBidWxrLl9sb2dnZXI7XG4gIHZhciBqb2JJZCA9IHRoaXMuam9iLmlkO1xuICB2YXIgYmF0Y2hJZCA9IHRoaXMuaWQ7XG5cbiAgaWYgKCFqb2JJZCB8fCAhYmF0Y2hJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkJhdGNoIG5vdCBzdGFydGVkLlwiKTtcbiAgfVxuICByZXR1cm4gYnVsay5fcmVxdWVzdCh7XG4gICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgcGF0aCA6IFwiL2pvYi9cIiArIGpvYklkICsgXCIvYmF0Y2gvXCIgKyBiYXRjaElkLFxuICAgIHJlc3BvbnNlVHlwZTogXCJhcHBsaWNhdGlvbi94bWxcIlxuICB9KS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIGxvZ2dlci5kZWJ1ZyhyZXMuYmF0Y2hJbmZvKTtcbiAgICByZXR1cm4gcmVzLmJhdGNoSW5mbztcbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuXG4vKipcbiAqIFBvbGxpbmcgdGhlIGJhdGNoIHJlc3VsdCBhbmQgcmV0cmlldmVcbiAqXG4gKiBAbWV0aG9kIEJ1bGt+QmF0Y2gjcG9sbFxuICogQHBhcmFtIHtOdW1iZXJ9IGludGVydmFsIC0gUG9sbGluZyBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHNcbiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0IC0gUG9sbGluZyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kc1xuICovXG5CYXRjaC5wcm90b3R5cGUucG9sbCA9IGZ1bmN0aW9uKGludGVydmFsLCB0aW1lb3V0KSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGpvYklkID0gdGhpcy5qb2IuaWQ7XG4gIHZhciBiYXRjaElkID0gdGhpcy5pZDtcblxuICBpZiAoIWpvYklkIHx8ICFiYXRjaElkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQmF0Y2ggbm90IHN0YXJ0ZWQuXCIpO1xuICB9XG4gIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgdmFyIHBvbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgaWYgKHN0YXJ0VGltZSArIHRpbWVvdXQgPCBub3cpIHtcbiAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoXCJQb2xsaW5nIHRpbWUgb3V0LiBKb2IgSWQgPSBcIiArIGpvYklkICsgXCIgLCBiYXRjaCBJZCA9IFwiICsgYmF0Y2hJZCk7XG4gICAgICBlcnIubmFtZSA9ICdQb2xsaW5nVGltZW91dCc7XG4gICAgICBlcnIuam9iSWQgPSBqb2JJZDtcbiAgICAgIGVyci5iYXRjaElkID0gYmF0Y2hJZDtcbiAgICAgIHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLmNoZWNrKGZ1bmN0aW9uKGVyciwgcmVzKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHJlcy5zdGF0ZSA9PT0gXCJGYWlsZWRcIikge1xuICAgICAgICAgIGlmIChwYXJzZUludChyZXMubnVtYmVyUmVjb3Jkc1Byb2Nlc3NlZCwgMTApID4gMCkge1xuICAgICAgICAgICAgc2VsZi5yZXRyaWV2ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKHJlcy5zdGF0ZU1lc3NhZ2UpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzLnN0YXRlID09PSBcIkNvbXBsZXRlZFwiKSB7XG4gICAgICAgICAgc2VsZi5yZXRyaWV2ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuZW1pdCgncHJvZ3Jlc3MnLCByZXMpO1xuICAgICAgICAgIHNldFRpbWVvdXQocG9sbCwgaW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIHNldFRpbWVvdXQocG9sbCwgaW50ZXJ2YWwpO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBCdWxrfkJhdGNoUmVzdWx0SW5mb1xuICogQHByb3Age1N0cmluZ30gaWQgLSBCYXRjaCByZXN1bHQgSURcbiAqIEBwcm9wIHtTdHJpbmd9IGJhdGNoSWQgLSBCYXRjaCBJRCB3aGljaCBpbmNsdWRlcyB0aGlzIGJhdGNoIHJlc3VsdC5cbiAqIEBwcm9wIHtTdHJpbmd9IGpvYklkIC0gSm9iIElEIHdoaWNoIGluY2x1ZGVzIHRoaXMgYmF0Y2ggcmVzdWx0LlxuICovXG5cbi8qKlxuICogUmV0cmlldmUgYmF0Y2ggcmVzdWx0XG4gKlxuICogQG1ldGhvZCBCdWxrfkJhdGNoI3JldHJpZXZlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0PnxBcnJheS48QnVsa35CYXRjaFJlc3VsdEluZm8+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QXJyYXkuPFJlY29yZFJlc3VsdD58QXJyYXkuPEJ1bGt+QmF0Y2hSZXN1bHRJbmZvPj59XG4gKi9cbkJhdGNoLnByb3RvdHlwZS5yZXRyaWV2ZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGJ1bGsgPSB0aGlzLl9idWxrO1xuICB2YXIgam9iSWQgPSB0aGlzLmpvYi5pZDtcbiAgdmFyIGpvYiA9IHRoaXMuam9iO1xuICB2YXIgYmF0Y2hJZCA9IHRoaXMuaWQ7XG5cbiAgaWYgKCFqb2JJZCB8fCAhYmF0Y2hJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkJhdGNoIG5vdCBzdGFydGVkLlwiKTtcbiAgfVxuXG4gIHJldHVybiBqb2IuaW5mbygpLnRoZW4oZnVuY3Rpb24oam9iSW5mbykge1xuICAgIHJldHVybiBidWxrLl9yZXF1ZXN0KHtcbiAgICAgIG1ldGhvZCA6ICdHRVQnLFxuICAgICAgcGF0aCA6IFwiL2pvYi9cIiArIGpvYklkICsgXCIvYmF0Y2gvXCIgKyBiYXRjaElkICsgXCIvcmVzdWx0XCJcbiAgICB9KTtcbiAgfSkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICB2YXIgcmVzdWx0cztcbiAgICBpZiAoam9iLm9wZXJhdGlvbiA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgdmFyIGNvbm4gPSBidWxrLl9jb25uO1xuICAgICAgdmFyIHJlc3VsdElkcyA9IHJlc1sncmVzdWx0LWxpc3QnXS5yZXN1bHQ7XG4gICAgICByZXN1bHRzID0gcmVzWydyZXN1bHQtbGlzdCddLnJlc3VsdDtcbiAgICAgIHJlc3VsdHMgPSBfLm1hcChfLmlzQXJyYXkocmVzdWx0cykgPyByZXN1bHRzIDogWyByZXN1bHRzIF0sIGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIGJhdGNoSWQ6IGJhdGNoSWQsXG4gICAgICAgICAgam9iSWQ6IGpvYklkXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0cyA9IF8ubWFwKHJlcywgZnVuY3Rpb24ocmV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHJldC5JZCB8fCBudWxsLFxuICAgICAgICAgIHN1Y2Nlc3M6IHJldC5TdWNjZXNzID09PSBcInRydWVcIixcbiAgICAgICAgICBlcnJvcnM6IHJldC5FcnJvciA/IFsgcmV0LkVycm9yIF0gOiBbXVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHNlbGYuZW1pdCgncmVzcG9uc2UnLCByZXN1bHRzKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfSkuZmFpbChmdW5jdGlvbihlcnIpIHtcbiAgICBzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICB0aHJvdyBlcnI7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogRmV0Y2ggcXVlcnkgcmVzdWx0IGFzIGEgcmVjb3JkIHN0cmVhbVxuICogQHBhcmFtIHtTdHJpbmd9IHJlc3VsdElkIC0gUmVzdWx0IGlkXG4gKiBAcmV0dXJucyB7UmVjb3JkU3RyZWFtfSAtIFJlY29yZCBzdHJlYW0sIGNvbnZlcnRpYmxlIHRvIENTViBkYXRhIHN0cmVhbVxuICovXG5CYXRjaC5wcm90b3R5cGUucmVzdWx0ID0gZnVuY3Rpb24ocmVzdWx0SWQpIHtcbiAgdmFyIGpvYklkID0gdGhpcy5qb2IuaWQ7XG4gIHZhciBiYXRjaElkID0gdGhpcy5pZDtcbiAgaWYgKCFqb2JJZCB8fCAhYmF0Y2hJZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkJhdGNoIG5vdCBzdGFydGVkLlwiKTtcbiAgfVxuICB2YXIgcmVzdWx0U3RyZWFtID0gbmV3IFJlY29yZFN0cmVhbS5QYXJzYWJsZSgpO1xuICB2YXIgcmVzdWx0RGF0YVN0cmVhbSA9IHJlc3VsdFN0cmVhbS5zdHJlYW0oJ2NzdicpO1xuICB2YXIgcmVxU3RyZWFtID0gdGhpcy5fYnVsay5fcmVxdWVzdCh7XG4gICAgbWV0aG9kIDogJ0dFVCcsXG4gICAgcGF0aCA6IFwiL2pvYi9cIiArIGpvYklkICsgXCIvYmF0Y2gvXCIgKyBiYXRjaElkICsgXCIvcmVzdWx0L1wiICsgcmVzdWx0SWQsXG4gICAgcmVzcG9uc2VUeXBlOiBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiXG4gIH0pLnN0cmVhbSgpLnBpcGUocmVzdWx0RGF0YVN0cmVhbSk7XG4gIHJldHVybiByZXN1bHRTdHJlYW07XG59O1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIEJ1bGtBcGkgPSBmdW5jdGlvbigpIHtcbiAgQnVsa0FwaS5zdXBlcl8uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG5cbmluaGVyaXRzKEJ1bGtBcGksIEh0dHBBcGkpO1xuXG5CdWxrQXBpLnByb3RvdHlwZS5iZWZvcmVTZW5kID0gZnVuY3Rpb24ocmVxdWVzdCkge1xuICByZXF1ZXN0LmhlYWRlcnMgPSByZXF1ZXN0LmhlYWRlcnMgfHwge307XG4gIHJlcXVlc3QuaGVhZGVyc1tcIlgtU0ZEQy1TRVNTSU9OXCJdID0gdGhpcy5fY29ubi5hY2Nlc3NUb2tlbjtcbn07XG5cbkJ1bGtBcGkucHJvdG90eXBlLmlzU2Vzc2lvbkV4cGlyZWQgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNDAwICYmXG4gICAgLzxleGNlcHRpb25Db2RlPkludmFsaWRTZXNzaW9uSWQ8XFwvZXhjZXB0aW9uQ29kZT4vLnRlc3QocmVzcG9uc2UuYm9keSk7XG59O1xuXG5CdWxrQXBpLnByb3RvdHlwZS5oYXNFcnJvckluUmVzcG9uc2VCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuICByZXR1cm4gISFib2R5LmVycm9yO1xufTtcblxuQnVsa0FwaS5wcm90b3R5cGUucGFyc2VFcnJvciA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgcmV0dXJuIHtcbiAgICBlcnJvckNvZGU6IGJvZHkuZXJyb3IuZXhjZXB0aW9uQ29kZSxcbiAgICBtZXNzYWdlOiBib2R5LmVycm9yLmV4Y2VwdGlvbk1lc3NhZ2VcbiAgfTtcbn07XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4vKipcbiAqIENsYXNzIGZvciBCdWxrIEFQSVxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIC0gQ29ubmVjdGlvbiBvYmplY3RcbiAqL1xudmFyIEJ1bGsgPSBmdW5jdGlvbihjb25uKSB7XG4gIHRoaXMuX2Nvbm4gPSBjb25uO1xuICB0aGlzLl9sb2dnZXIgPSBjb25uLl9sb2dnZXI7XG59O1xuXG4vKipcbiAqIFBvbGxpbmcgaW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRzXG4gKiBAdHlwZSB7TnVtYmVyfVxuICovXG5CdWxrLnByb3RvdHlwZS5wb2xsSW50ZXJ2YWwgPSAxMDAwO1xuXG4vKipcbiAqIFBvbGxpbmcgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKi9cbkJ1bGsucHJvdG90eXBlLnBvbGxUaW1lb3V0ID0gMTAwMDA7XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbkJ1bGsucHJvdG90eXBlLl9yZXF1ZXN0ID0gZnVuY3Rpb24ocmVxdWVzdCwgY2FsbGJhY2spIHtcbiAgdmFyIGNvbm4gPSB0aGlzLl9jb25uO1xuICByZXF1ZXN0ID0gXy5jbG9uZShyZXF1ZXN0KTtcbiAgdmFyIGJhc2VVcmwgPSBbIGNvbm4uaW5zdGFuY2VVcmwsIFwic2VydmljZXMvYXN5bmNcIiwgY29ubi52ZXJzaW9uIF0uam9pbignLycpO1xuICByZXF1ZXN0LnVybCA9IGJhc2VVcmwgKyByZXF1ZXN0LnBhdGg7XG4gIHZhciBvcHRpb25zID0geyByZXNwb25zZVR5cGU6IHJlcXVlc3QucmVzcG9uc2VUeXBlIH07XG4gIGRlbGV0ZSByZXF1ZXN0LnBhdGg7XG4gIGRlbGV0ZSByZXF1ZXN0LnJlc3BvbnNlVHlwZTtcbiAgcmV0dXJuIG5ldyBCdWxrQXBpKHRoaXMuX2Nvbm4sIG9wdGlvbnMpLnJlcXVlc3QocmVxdWVzdCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYW5kIHN0YXJ0IGJ1bGtsb2FkIGpvYiBhbmQgYmF0Y2hcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFNPYmplY3QgdHlwZVxuICogQHBhcmFtIHtTdHJpbmd9IG9wZXJhdGlvbiAtIEJ1bGsgbG9hZCBvcGVyYXRpb24gKCdpbnNlcnQnLCAndXBkYXRlJywgJ3Vwc2VydCcsICdkZWxldGUnLCBvciAnaGFyZERlbGV0ZScpXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgYnVsayBsb2FkaW5nIG9wZXJhdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmV4dElkRmllbGRdIC0gRXh0ZXJuYWwgSUQgZmllbGQgbmFtZSAodXNlZCB3aGVuIHVwc2VydCBvcGVyYXRpb24pLlxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmNvbmN1cnJlbmN5TW9kZV0gLSAnU2VyaWFsJyBvciAnUGFyYWxsZWwnLiBEZWZhdWx0cyB0byBQYXJhbGxlbC5cbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJ1bGtsb2FkLiBBY2NlcHRzIGFycmF5IG9mIHJlY29yZHMsIENTViBzdHJpbmcsIGFuZCBDU1YgZGF0YSBpbnB1dCBzdHJlYW0gaW4gaW5zZXJ0L3VwZGF0ZS91cHNlcnQvZGVsZXRlL2hhcmREZWxldGUgb3BlcmF0aW9uLCBTT1FMIHN0cmluZyBpbiBxdWVyeSBvcGVyYXRpb24uXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0PnxBcnJheS48QnVsa35CYXRjaFJlc3VsdEluZm8+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVsa35CYXRjaH1cbiAqL1xuQnVsay5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKHR5cGUsIG9wZXJhdGlvbiwgb3B0aW9ucywgaW5wdXQsIGNhbGxiYWNrKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgaWYgKCF0eXBlIHx8ICFvcGVyYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnN1ZmZpY2llbnQgYXJndW1lbnRzLiBBdCBsZWFzdCwgJ3R5cGUnIGFuZCAnb3BlcmF0aW9uJyBhcmUgcmVxdWlyZWQuXCIpO1xuICB9XG4gIGlmICghXy5pc09iamVjdChvcHRpb25zKSB8fCBvcHRpb25zLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHsgLy8gd2hlbiBvcHRpb25zIGlzIG5vdCBwbGFpbiBoYXNoIG9iamVjdCwgaXQgaXMgb21pdHRlZFxuICAgIGNhbGxiYWNrID0gaW5wdXQ7XG4gICAgaW5wdXQgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG4gIHZhciBqb2IgPSB0aGlzLmNyZWF0ZUpvYih0eXBlLCBvcGVyYXRpb24sIG9wdGlvbnMpO1xuICBqb2Iub25jZSgnZXJyb3InLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICBpZiAoYmF0Y2gpIHtcbiAgICAgIGJhdGNoLmVtaXQoJ2Vycm9yJywgZXJyb3IpOyAvLyBwYXNzIGpvYiBlcnJvciB0byBiYXRjaFxuICAgIH1cbiAgfSk7XG4gIHZhciBiYXRjaCA9IGpvYi5jcmVhdGVCYXRjaCgpO1xuICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgIGJhdGNoID0gbnVsbDtcbiAgICBqb2IuY2xvc2UoKTtcbiAgfTtcbiAgdmFyIGNsZWFudXBPbkVycm9yID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgaWYgKGVyci5uYW1lICE9PSAnUG9sbGluZ1RpbWVvdXQnKSB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfVxuICB9O1xuICBiYXRjaC5vbigncmVzcG9uc2UnLCBjbGVhbnVwKTtcbiAgYmF0Y2gub24oJ2Vycm9yJywgY2xlYW51cE9uRXJyb3IpO1xuICBiYXRjaC5vbigncXVldWUnLCBmdW5jdGlvbigpIHsgYmF0Y2gucG9sbChzZWxmLnBvbGxJbnRlcnZhbCwgc2VsZi5wb2xsVGltZW91dCk7IH0pO1xuICByZXR1cm4gYmF0Y2guZXhlY3V0ZShpbnB1dCwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlIGJ1bGsgcXVlcnkgYW5kIGdldCByZWNvcmQgc3RyZWFtXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNvcWwgLSBTT1FMIHRvIGV4ZWN1dGUgaW4gYnVsayBqb2JcbiAqIEByZXR1cm5zIHtSZWNvcmRTdHJlYW0uUGFyc2FibGV9IC0gUmVjb3JkIHN0cmVhbSwgY29udmVydGlibGUgdG8gQ1NWIGRhdGEgc3RyZWFtXG4gKi9cbkJ1bGsucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24oc29xbCkge1xuICB2YXIgbSA9IHNvcWwucmVwbGFjZSgvXFwoW1xcc1xcU10rXFwpL2csICcnKS5tYXRjaCgvRlJPTVxccysoXFx3KykvaSk7XG4gIGlmICghbSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHNvYmplY3QgdHlwZSBmb3VuZCBpbiBxdWVyeSwgbWF5YmUgY2F1c2VkIGJ5IGludmFsaWQgU09RTC5cIik7XG4gIH1cbiAgdmFyIHR5cGUgPSBtWzFdO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciByZWNvcmRTdHJlYW0gPSBuZXcgUmVjb3JkU3RyZWFtLlBhcnNhYmxlKCk7XG4gIHZhciBkYXRhU3RyZWFtID0gcmVjb3JkU3RyZWFtLnN0cmVhbSgnY3N2Jyk7XG4gIHRoaXMubG9hZCh0eXBlLCBcInF1ZXJ5XCIsIHNvcWwpLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykge1xuICAgIHZhciBzdHJlYW1zID0gcmVzdWx0cy5tYXAoZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICByZXR1cm4gc2VsZlxuICAgICAgICAuam9iKHJlc3VsdC5qb2JJZClcbiAgICAgICAgLmJhdGNoKHJlc3VsdC5iYXRjaElkKVxuICAgICAgICAucmVzdWx0KHJlc3VsdC5pZClcbiAgICAgICAgLnN0cmVhbSgpO1xuICAgIH0pO1xuXG4gICAgam9pblN0cmVhbXMoc3RyZWFtcykucGlwZShkYXRhU3RyZWFtKTtcbiAgfSkuZmFpbChmdW5jdGlvbihlcnIpIHtcbiAgICByZWNvcmRTdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpO1xuICB9KTtcbiAgcmV0dXJuIHJlY29yZFN0cmVhbTtcbn07XG5cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgam9iIGluc3RhbmNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBvcGVyYXRpb24gLSBCdWxrIGxvYWQgb3BlcmF0aW9uICgnaW5zZXJ0JywgJ3VwZGF0ZScsICd1cHNlcnQnLCAnZGVsZXRlJywgJ2hhcmREZWxldGUnLCBvciAncXVlcnknKVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIGJ1bGsgbG9hZGluZyBvcGVyYXRpb25cbiAqIEByZXR1cm5zIHtCdWxrfkpvYn1cbiAqL1xuQnVsay5wcm90b3R5cGUuY3JlYXRlSm9iID0gZnVuY3Rpb24odHlwZSwgb3BlcmF0aW9uLCBvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgSm9iKHRoaXMsIHR5cGUsIG9wZXJhdGlvbiwgb3B0aW9ucyk7XG59O1xuXG4vKipcbiAqIEdldCBhIGpvYiBpbnN0YW5jZSBzcGVjaWZpZWQgYnkgZ2l2ZW4gam9iIElEXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGpvYklkIC0gSm9iIElEXG4gKiBAcmV0dXJucyB7QnVsa35Kb2J9XG4gKi9cbkJ1bGsucHJvdG90eXBlLmpvYiA9IGZ1bmN0aW9uKGpvYklkKSB7XG4gIHJldHVybiBuZXcgSm9iKHRoaXMsIG51bGwsIG51bGwsIG51bGwsIGpvYklkKTtcbn07XG5cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlxuICogUmVnaXN0ZXIgaG9vayBpbiBjb25uZWN0aW9uIGluc3RhbnRpYXRpb24gZm9yIGR5bmFtaWNhbGx5IGFkZGluZyB0aGlzIEFQSSBtb2R1bGUgZmVhdHVyZXNcbiAqL1xuanNmb3JjZS5vbignY29ubmVjdGlvbjpuZXcnLCBmdW5jdGlvbihjb25uKSB7XG4gIGNvbm4uYnVsayA9IG5ldyBCdWxrKGNvbm4pO1xufSk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBCdWxrO1xuIiwiLyoqXG4gKiBAZmlsZSBNYW5hZ2VzIFNhbGVzZm9yY2UgQ2hhdHRlciBSRVNUIEFQSSBjYWxsc1xuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpLFxuICAgIF8gICAgICAgPSByZXF1aXJlKCdsb2Rhc2gvY29yZScpLFxuICAgIGpzZm9yY2UgPSByZXF1aXJlKCcuLi9jb3JlJyksXG4gICAgUHJvbWlzZSA9IHJlcXVpcmUoJy4uL3Byb21pc2UnKTtcblxuLyoqXG4gKiBBUEkgY2xhc3MgZm9yIENoYXR0ZXIgUkVTVCBBUEkgY2FsbFxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIENvbm5lY3Rpb25cbiAqL1xudmFyIENoYXR0ZXIgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNvbm4pIHtcbiAgdGhpcy5fY29ubiA9IGNvbm47XG59O1xuXG4vKipcbiAqIFNlbmRpbmcgcmVxdWVzdCB0byBBUEkgZW5kcG9pbnRcbiAqIEBwcml2YXRlXG4gKi9cbkNoYXR0ZXIucHJvdG90eXBlLl9yZXF1ZXN0ID0gZnVuY3Rpb24ocGFyYW1zLCBjYWxsYmFjaykge1xuICBpZiAoL14ocHV0fHBvc3R8cGF0Y2gpJC9pLnRlc3QocGFyYW1zLm1ldGhvZCkpIHtcbiAgICBpZiAoXy5pc09iamVjdChwYXJhbXMuYm9keSkpIHtcbiAgICAgIHBhcmFtcy5oZWFkZXJzID0ge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgfTtcbiAgICAgIHBhcmFtcy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkocGFyYW1zLmJvZHkpO1xuICAgIH1cbiAgfVxuICBwYXJhbXMudXJsID0gdGhpcy5fbm9ybWFsaXplVXJsKHBhcmFtcy51cmwpO1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHBhcmFtcywgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBDb252ZXJ0IHBhdGggdG8gc2l0ZSByb290IHJlbGF0aXZlIHVybFxuICogQHByaXZhdGVcbiAqL1xuQ2hhdHRlci5wcm90b3R5cGUuX25vcm1hbGl6ZVVybCA9IGZ1bmN0aW9uKHVybCkge1xuICBpZiAodXJsLmluZGV4T2YoJy9jaGF0dGVyLycpID09PSAwIHx8IHVybC5pbmRleE9mKCcvY29ubmVjdC8nKSA9PT0gMCkge1xuICAgIHJldHVybiAnL3NlcnZpY2VzL2RhdGEvdicgKyB0aGlzLl9jb25uLnZlcnNpb24gKyB1cmw7XG4gIH0gZWxzZSBpZiAoL15cXC92W1xcZF0rXFwuW1xcZF0rXFwvLy50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gJy9zZXJ2aWNlcy9kYXRhJyArIHVybDtcbiAgfSBlbHNlIGlmICh1cmwuaW5kZXhPZignL3NlcnZpY2VzLycpICE9PSAwICYmIHVybFswXSA9PT0gJy8nKSB7XG4gICAgcmV0dXJuICcvc2VydmljZXMvZGF0YS92JyArIHRoaXMuX2Nvbm4udmVyc2lvbiArICcvY2hhdHRlcicgKyB1cmw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDaGF0dGVyflJlcXVlc3RQYXJhbXNcbiAqIEBwcm9wIHtTdHJpbmd9IG1ldGhvZCAtIEhUVFAgbWV0aG9kXG4gKiBAcHJvcCB7U3RyaW5nfSB1cmwgLSBSZXNvdXJjZSBVUkxcbiAqIEBwcm9wIHtTdHJpbmd9IFtib2R5XSAtIEhUVFAgYm9keSAoaW4gUE9TVC9QVVQvUEFUQ0ggbWV0aG9kcylcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENoYXR0ZXJ+UmVxdWVzdFJlc3VsdFxuICovXG5cbi8qKlxuICogTWFrZSBhIHJlcXVlc3QgZm9yIGNoYXR0ZXIgQVBJIHJlc291cmNlXG4gKlxuICogQHBhcmFtIHtDaGF0dGVyflJlcXVlc3RQYXJhbXN9IHBhcmFtcyAtIFBhcmFtdGVycyByZXByZXNlbnRpbmcgSFRUUCByZXF1ZXN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxDaGF0dGVyflJlcXVlc3RSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY1xuICogQHJldHVybnMge0NoYXR0ZXJ+UmVxdWVzdH1cbiAqL1xuQ2hhdHRlci5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uKHBhcmFtcywgY2FsbGJhY2spIHtcbiAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMsIHBhcmFtcykudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBNYWtlIGEgcmVzb3VyY2UgcmVxdWVzdCB0byBjaGF0dGVyIEFQSVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgLSBSZXNvdXJjZSBVUkxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcXVlcnlQYXJhbXNdIC0gUXVlcnkgcGFyYW1ldGVycyAoaW4gaGFzaCBvYmplY3QpXG4gKiBAcmV0dXJucyB7Q2hhdHRlcn5SZXNvdXJjZX1cbiAqL1xuQ2hhdHRlci5wcm90b3R5cGUucmVzb3VyY2UgPSBmdW5jdGlvbih1cmwsIHF1ZXJ5UGFyYW1zKSB7XG4gIHJldHVybiBuZXcgUmVzb3VyY2UodGhpcywgdXJsLCBxdWVyeVBhcmFtcyk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENoYXR0ZXJ+QmF0Y2hSZXF1ZXN0UmVzdWx0XG4gKiBAcHJvcCB7Qm9vbGVhbn0gaGFzRXJyb3IgLSBGbGFnIGlmIHRoZSBiYXRjaCBoYXMgb25lIG9yIG1vcmUgZXJyb3JzXG4gKiBAcHJvcCB7QXJyYXkuPE9iamVjdD59IHJlc3VsdHMgLSBCYXRjaCByZXF1ZXN0IHJlc3VsdHMgaW4gYXJyYXlcbiAqIEBwcm9wIHtOdW1iZXJ9IHJlc3VsdHMuc3RhdHVzQ29kZSAtIEhUVFAgcmVzcG9uc2Ugc3RhdHVzIGNvZGVcbiAqIEBwcm9wIHtDaGF0dGVyflJlcXVlc3RSZXN1bHR9IHJlc3VsdHMucmVzdWx0IC0gUGFyc2VkIEhUVFAgcmVzcG9uc2UgYm9keVxuICovXG5cbi8qKlxuICogTWFrZSBhIGJhdGNoIHJlcXVlc3QgdG8gY2hhdHRlciBBUElcbiAqXG4gKiBAcGFyYW1zIHtBcnJheS48Q2hhdHRlcn5SZXF1ZXN0Pn0gcmVxdWVzdHMgLSBDaGF0dGVyIEFQSSByZXF1ZXN0c1xuICogQHBhcmFtIHtDYWxsYmFjay48Q2hhdHRlcn5CYXRjaFJlcXVlc3RSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY1xuICogQHJldHVybnMge1Byb21pc2UuPENoYXR0ZXJ+QmF0Y2hSZXF1ZXN0UmVzdWx0Pn1cbiAqL1xuQ2hhdHRlci5wcm90b3R5cGUuYmF0Y2ggPSBmdW5jdGlvbihyZXF1ZXN0cywgY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgYmF0Y2hSZXF1ZXN0cyA9IFtdLCBiYXRjaERlZmVycmVkcyA9IFtdO1xuICBfLmZvckVhY2gocmVxdWVzdHMsIGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSBQcm9taXNlLmRlZmVyKCk7XG4gICAgcmVxdWVzdC5fcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XG4gICAgYmF0Y2hSZXF1ZXN0cy5wdXNoKHJlcXVlc3QuYmF0Y2hQYXJhbXMoKSk7XG4gICAgYmF0Y2hEZWZlcnJlZHMucHVzaChkZWZlcnJlZCk7XG4gIH0pO1xuICB2YXIgcGFyYW1zID0ge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogdGhpcy5fbm9ybWFsaXplVXJsKCcvY29ubmVjdC9iYXRjaCcpLFxuICAgIGJvZHk6IHtcbiAgICAgIGJhdGNoUmVxdWVzdHM6IGJhdGNoUmVxdWVzdHNcbiAgICB9XG4gIH07XG4gIHJldHVybiB0aGlzLnJlcXVlc3QocGFyYW1zKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIF8uZm9yRWFjaChyZXMucmVzdWx0cywgZnVuY3Rpb24ocmVzdWx0LCBpKSB7XG4gICAgICB2YXIgZGVmZXJyZWQgPSBiYXRjaERlZmVycmVkc1tpXTtcbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlc3VsdC5yZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQucmVzdWx0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzO1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBjaGF0dGVyIEFQSSByZXF1ZXN0XG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzIENoYXR0ZXJ+UmVxdWVzdFxuICogQGltcGxlbWVudHMge1Byb21pc2UuPENoYXR0ZXJ+UmVxdWVzdFJlc3VsdD59XG4gKiBAcGFyYW0ge0NoYXR0ZXJ9IGNoYXR0ZXIgLSBDaGF0dGVyIEFQSSBvYmplY3RcbiAqIEBwYXJhbSB7Q2hhdHRlcn5SZXF1ZXN0UGFyYW1zfSBwYXJhbXMgLSBQYXJhbXRlcnMgcmVwcmVzZW50aW5nIEhUVFAgcmVxdWVzdFxuICovXG52YXIgUmVxdWVzdCA9IGZ1bmN0aW9uKGNoYXR0ZXIsIHBhcmFtcykge1xuICB0aGlzLl9jaGF0dGVyID0gY2hhdHRlcjtcbiAgdGhpcy5fcGFyYW1zID0gcGFyYW1zO1xuICB0aGlzLl9wcm9taXNlID0gbnVsbDtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQ2hhdHRlcn5CYXRjaFJlcXVlc3RQYXJhbXNcbiAqIEBwcm9wIHtTdHJpbmd9IG1ldGhvZCAtIEhUVFAgbWV0aG9kXG4gKiBAcHJvcCB7U3RyaW5nfSB1cmwgLSBSZXNvdXJjZSBVUkxcbiAqIEBwcm9wIHtTdHJpbmd9IFtyaWNoSW5wdXRdIC0gSFRUUCBib2R5IChpbiBQT1NUL1BVVC9QQVRDSCBtZXRob2RzKVxuICovXG5cbi8qKlxuICogUmV0cmlldmUgcGFyYW1ldGVycyBpbiBiYXRjaCByZXF1ZXN0IGZvcm1cbiAqXG4gKiBAbWV0aG9kIENoYXR0ZXJ+UmVxdWVzdCNiYXRjaFBhcmFtc1xuICogQHJldHVybnMge0NoYXR0ZXJ+QmF0Y2hSZXF1ZXN0UGFyYW1zfVxuICovXG5SZXF1ZXN0LnByb3RvdHlwZS5iYXRjaFBhcmFtcyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGFyYW1zID0gdGhpcy5fcGFyYW1zO1xuICB2YXIgYmF0Y2hQYXJhbXMgPSB7XG4gICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLFxuICAgIHVybDogdGhpcy5fY2hhdHRlci5fbm9ybWFsaXplVXJsKHBhcmFtcy51cmwpXG4gIH07XG4gIGlmICh0aGlzLl9wYXJhbXMuYm9keSkge1xuICAgIGJhdGNoUGFyYW1zLnJpY2hJbnB1dCA9IHRoaXMuX3BhcmFtcy5ib2R5O1xuICB9XG4gIHJldHVybiBiYXRjaFBhcmFtcztcbn07XG5cbi8qKlxuICogUmV0cmlldmUgcGFyYW1ldGVycyBpbiBiYXRjaCByZXF1ZXN0IGZvcm1cbiAqXG4gKiBAbWV0aG9kIENoYXR0ZXJ+UmVxdWVzdCNwcm9taXNlXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48Q2hhdHRlcn5SZXF1ZXN0UmVzdWx0Pn1cbiAqL1xuUmVxdWVzdC5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fcHJvbWlzZSB8fCB0aGlzLl9jaGF0dGVyLl9yZXF1ZXN0KHRoaXMuX3BhcmFtcyk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgTm9kZS5qcyBTdHJlYW0gb2JqZWN0IGZvciByZXF1ZXN0XG4gKlxuICogQG1ldGhvZCBDaGF0dGVyflJlcXVlc3Qjc3RyZWFtXG4gKiBAcmV0dXJucyB7c3RyZWFtLlN0cmVhbX1cbiAqL1xuUmVxdWVzdC5wcm90b3R5cGUuc3RyZWFtID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB0aGlzLl9jaGF0dGVyLl9yZXF1ZXN0KHRoaXMuX3BhcmFtcykuc3RyZWFtKCk7XG59O1xuXG4vKipcbiAqIFByb21pc2UvQSsgaW50ZXJmYWNlXG4gKiBodHRwOi8vcHJvbWlzZXMtYXBsdXMuZ2l0aHViLmlvL3Byb21pc2VzLXNwZWMvXG4gKlxuICogRGVsZWdhdGUgdG8gZGVmZXJyZWQgcHJvbWlzZSwgcmV0dXJuIHByb21pc2UgaW5zdGFuY2UgZm9yIGJhdGNoIHJlc3VsdFxuICpcbiAqIEBtZXRob2QgQ2hhdHRlcn5SZXF1ZXN0I3RoZW5cbiAqL1xuUmVxdWVzdC5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKG9uUmVzb2x2ZSwgb25SZWplY3QpIHtcbiAgcmV0dXJuIHRoaXMucHJvbWlzZSgpLnRoZW4ob25SZXNvbHZlLCBvblJlamVjdCk7XG59O1xuXG4vKipcbiAqIFByb21pc2UvQSsgZXh0ZW5zaW9uXG4gKiBDYWxsIFwidGhlblwiIHVzaW5nIGdpdmVuIG5vZGUtc3R5bGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAqXG4gKiBAbWV0aG9kIENoYXR0ZXJ+UmVxdWVzdCN0aGVuQ2FsbFxuICovXG5SZXF1ZXN0LnByb3RvdHlwZS50aGVuQ2FsbCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiBfLmlzRnVuY3Rpb24oY2FsbGJhY2spID8gdGhpcy5wcm9taXNlKCkudGhlbkNhbGwoY2FsbGJhY2spIDogdGhpcztcbn07XG5cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKipcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGNoYXR0ZXIgQVBJIHJlc291cmNlXG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzIENoYXR0ZXJ+UmVzb3VyY2VcbiAqIEBleHRlbmRzIENoYXR0ZXJ+UmVxdWVzdFxuICogQHBhcmFtIHtDaGF0dGVyfSBjaGF0dGVyIC0gQ2hhdHRlciBBUEkgb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsIC0gUmVzb3VyY2UgVVJMXG4gKiBAcGFyYW0ge09iamVjdH0gW3F1ZXJ5UGFyYW1zXSAtIFF1ZXJ5IHBhcmFtZXRlcnMgKGluIGhhc2ggb2JqZWN0KVxuICovXG52YXIgUmVzb3VyY2UgPSBmdW5jdGlvbihjaGF0dGVyLCB1cmwsIHF1ZXJ5UGFyYW1zKSB7XG4gIGlmIChxdWVyeVBhcmFtcykge1xuICAgIHZhciBxc3RyaW5nID0gXy5tYXAoXy5rZXlzKHF1ZXJ5UGFyYW1zKSwgZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIG5hbWUgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeVBhcmFtc1tuYW1lXSk7XG4gICAgfSkuam9pbignJicpO1xuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA+IDAgPyAnJicgOiAnPycpICsgcXN0cmluZztcbiAgfVxuICBSZXNvdXJjZS5zdXBlcl8uY2FsbCh0aGlzLCBjaGF0dGVyLCB7IG1ldGhvZDogJ0dFVCcsIHVybDogdXJsIH0pO1xuICB0aGlzLl91cmwgPSB1cmw7XG59O1xuXG5pbmhlcml0cyhSZXNvdXJjZSwgUmVxdWVzdCk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc291cmNlXG4gKlxuICogQG1ldGhvZCBDaGF0dGVyflJlc291cmNlI2NyZWF0ZVxuICogQHBhcmFtIHtPYmplY3R9IGRhdGEgLSBEYXRhIHRvIG5ld2x5IHBvc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPENoYXR0ZXJ+UmVxdWVzdFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0NoYXR0ZXJ+UmVxdWVzdH1cbiAqL1xuUmVzb3VyY2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKGRhdGEsIGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9jaGF0dGVyLnJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogdGhpcy5fdXJsLFxuICAgIGJvZHk6IGRhdGFcbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSByZXNvdXJjZSBjb250ZW50XG4gKlxuICogQG1ldGhvZCBDaGF0dGVyflJlc291cmNlI3JldHJpZXZlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxDaGF0dGVyflJlcXVlc3RSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtDaGF0dGVyflJlcXVlc3R9XG4gKi9cblJlc291cmNlLnByb3RvdHlwZS5yZXRyaWV2ZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogVXBkYXRlIHNwZWNpZmllZCByZXNvdXJjZVxuICpcbiAqIEBtZXRob2QgQ2hhdHRlcn5SZXNvdXJjZSN1cGRhdGVcbiAqIEBwYXJhbSB7T2JlamN0fSBkYXRhIC0gRGF0YSB0byB1cGRhdGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPENoYXR0ZXJ+UmVxdWVzdFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0NoYXR0ZXJ+UmVxdWVzdH1cbiAqL1xuUmVzb3VyY2UucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKGRhdGEsIGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9jaGF0dGVyLnJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHVybDogdGhpcy5fdXJsLFxuICAgIGJvZHk6IGRhdGFcbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBTeW5vbnltIG9mIFJlc291cmNlI2RlbGV0ZSgpXG4gKlxuICogQG1ldGhvZCBDaGF0dGVyflJlc291cmNlI2RlbFxuICogQHBhcmFtIHtDYWxsYmFjay48Q2hhdHRlcn5SZXF1ZXN0UmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7Q2hhdHRlcn5SZXF1ZXN0fVxuICovXG4vKipcbiAqIERlbGV0ZSBzcGVjaWZpZWQgcmVzb3VyY2VcbiAqXG4gKiBAbWV0aG9kIENoYXR0ZXJ+UmVzb3VyY2UjZGVsZXRlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxDaGF0dGVyflJlcXVlc3RSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtDaGF0dGVyflJlcXVlc3R9XG4gKi9cblJlc291cmNlLnByb3RvdHlwZS5kZWwgPVxuUmVzb3VyY2UucHJvdG90eXBlW1wiZGVsZXRlXCJdID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2NoYXR0ZXIucmVxdWVzdCh7XG4gICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICB1cmw6IHRoaXMuX3VybFxuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcbiAqIFJlZ2lzdGVyIGhvb2sgaW4gY29ubmVjdGlvbiBpbnN0YW50aWF0aW9uIGZvciBkeW5hbWljYWxseSBhZGRpbmcgdGhpcyBBUEkgbW9kdWxlIGZlYXR1cmVzXG4gKi9cbmpzZm9yY2Uub24oJ2Nvbm5lY3Rpb246bmV3JywgZnVuY3Rpb24oY29ubikge1xuICBjb25uLmNoYXR0ZXIgPSBuZXcgQ2hhdHRlcihjb25uKTtcbn0pO1xuIiwicmVxdWlyZSgnLi9hbmFseXRpY3MnKTtcbnJlcXVpcmUoJy4vYXBleCcpO1xucmVxdWlyZSgnLi9idWxrJyk7XG5yZXF1aXJlKCcuL2NoYXR0ZXInKTtcbnJlcXVpcmUoJy4vbWV0YWRhdGEnKTtcbnJlcXVpcmUoJy4vc29hcCcpO1xucmVxdWlyZSgnLi9zdHJlYW1pbmcnKTtcbnJlcXVpcmUoJy4vdG9vbGluZycpO1xuIiwiLypnbG9iYWwgcHJvY2VzcywgQnVmZmVyICovXG4vKipcbiAqIEBmaWxlIE1hbmFnZXMgU2FsZXNmb3JjZSBNZXRhZGF0YSBBUElcbiAqIEBhdXRob3IgU2hpbmljaGkgVG9taXRhIDxzaGluaWNoaS50b21pdGFAZ21haWwuY29tPlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKSxcbiAgICBldmVudHMgID0gcmVxdWlyZSgnZXZlbnRzJyksXG4gICAgc3RyZWFtICA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbScpLFxuICAgIF8gICAgICAgPSByZXF1aXJlKCdsb2Rhc2gvY29yZScpLFxuICAgIGpzZm9yY2UgPSByZXF1aXJlKCcuLi9jb3JlJyksXG4gICAgUHJvbWlzZSA9IHJlcXVpcmUoJy4uL3Byb21pc2UnKSxcbiAgICBTT0FQICAgID0gcmVxdWlyZSgnLi4vc29hcCcpO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qKlxuICogQ2xhc3MgZm9yIFNhbGVzZm9yY2UgTWV0YWRhdGEgQVBJXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Nvbm5lY3Rpb259IGNvbm4gLSBDb25uZWN0aW9uIG9iamVjdFxuICovXG52YXIgTWV0YWRhdGEgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNvbm4pIHtcbiAgdGhpcy5fY29ubiA9IGNvbm47XG59O1xuXG5cbi8qKlxuICogUG9sbGluZyBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHNcbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS5wb2xsSW50ZXJ2YWwgPSAxMDAwO1xuXG4vKipcbiAqIFBvbGxpbmcgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS5wb2xsVGltZW91dCA9IDEwMDAwO1xuXG5cbi8qKlxuICogQ2FsbCBNZXRhZGF0YSBBUEkgU09BUCBlbmRwb2ludFxuICpcbiAqIEBwcml2YXRlXG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS5faW52b2tlID0gZnVuY3Rpb24obWV0aG9kLCBtZXNzYWdlLCBjYWxsYmFjaykge1xuICB2YXIgc29hcEVuZHBvaW50ID0gbmV3IFNPQVAodGhpcy5fY29ubiwge1xuICAgIHhtbG5zOiBcImh0dHA6Ly9zb2FwLnNmb3JjZS5jb20vMjAwNi8wNC9tZXRhZGF0YVwiLFxuICAgIGVuZHBvaW50VXJsOiB0aGlzLl9jb25uLmluc3RhbmNlVXJsICsgXCIvc2VydmljZXMvU29hcC9tL1wiICsgdGhpcy5fY29ubi52ZXJzaW9uXG4gIH0pO1xuICByZXR1cm4gc29hcEVuZHBvaW50Lmludm9rZShtZXRob2QsIG1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5yZXN1bHQ7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNZXRhZGF0YX5NZXRhZGF0YUluZm9cbiAqIEBwcm9wIHtTdHJpbmd9IGZ1bGxOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNvbXBvbmVudFxuICovXG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgYWRkcyBvbmUgb3IgbW9yZSBuZXcgbWV0YWRhdGEgY29tcG9uZW50cyB0byB0aGUgb3JnYW5pemF0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gVGhlIHR5cGUgb2YgbWV0YWRhdGEgdG8gY3JlYXRlXG4gKiBAcGFyYW0ge01ldGFkYXRhfk1ldGFkYXRhSW5mb3xBcnJheS48TWV0YWRhdGF+TWV0YWRhdGFJbmZvPn0gbWV0YWRhdGEgLSBNZXRhZGF0YSB0byBjcmVhdGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE1ldGFkYXRhfkFzeW5jUmVzdWx0fEFycmF5LjxNZXRhZGF0YX5Bc3luY1Jlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtNZXRhZGF0YX5Bc3luY1Jlc3VsdExvY2F0b3J9XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS5jcmVhdGVBc3luYyA9IGZ1bmN0aW9uKHR5cGUsIG1ldGFkYXRhLCBjYWxsYmFjaykge1xuICBpZiAoTnVtYmVyKHRoaXMuX2Nvbm4udmVyc2lvbikgPiAzMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFzeW5jIG1ldGFkYXRhIENSVUQgY2FsbHMgYXJlIG5vdCBzdXBwb3J0ZWQgb24gdmVyIDMxLjAgb3IgbGF0ZXIuXCIpO1xuICB9XG4gIHZhciBjb252ZXJ0ID0gZnVuY3Rpb24obWQpIHtcbiAgICBtZFtcIkB4c2k6dHlwZVwiXSA9IHR5cGU7XG4gICAgcmV0dXJuIG1kO1xuICB9O1xuICB2YXIgaXNBcnJheSA9IF8uaXNBcnJheShtZXRhZGF0YSk7XG4gIG1ldGFkYXRhID0gaXNBcnJheSA/IF8ubWFwKG1ldGFkYXRhLCBjb252ZXJ0KSA6IGNvbnZlcnQobWV0YWRhdGEpO1xuICB2YXIgcmVzID0gdGhpcy5faW52b2tlKFwiY3JlYXRlXCIsIHsgbWV0YWRhdGE6IG1ldGFkYXRhIH0pO1xuICByZXR1cm4gbmV3IEFzeW5jUmVzdWx0TG9jYXRvcih0aGlzLCByZXMsIGlzQXJyYXkpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWV0YWRhdGF+U2F2ZVJlc3VsdFxuICogQHByb3Age0Jvb2xlYW59IHN1Y2Nlc3MgLSBUcnVlIGlmIG1ldGFkYXRhIGlzIHN1Y2Nlc3NmdWxseSBzYXZlZFxuICogQHByb3Age1N0cmluZ30gZnVsbE5hbWUgLSBGdWxsIG5hbWUgb2YgbWV0YWRhdGEgb2JqZWN0XG4gKi9cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjb252ZXJ0VG9TYXZlUmVzdWx0KHJlc3VsdCkge1xuICB2YXIgc2F2ZVJlc3VsdCA9IF8uY2xvbmUocmVzdWx0KTtcbiAgc2F2ZVJlc3VsdC5zdWNjZXNzID0gc2F2ZVJlc3VsdC5zdWNjZXNzID09PSAndHJ1ZSc7XG4gIHJldHVybiBzYXZlUmVzdWx0O1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1ldGFkYXRhflVwc2VydFJlc3VsdFxuICogQHByb3Age0Jvb2xlYW59IHN1Y2Nlc3MgLSBUcnVlIGlmIG1ldGFkYXRhIGlzIHN1Y2Nlc3NmdWxseSBzYXZlZFxuICogQHByb3Age1N0cmluZ30gZnVsbE5hbWUgLSBGdWxsIG5hbWUgb2YgbWV0YWRhdGEgb2JqZWN0XG4gKiBAcHJvcCB7Qm9vbGVhbn0gY3JlYXRlZCAtIFRydWUgaWYgbWV0YWRhdGEgaXMgbmV3bHkgY3JlYXRlZFxuICovXG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29udmVydFRvVXBzZXJ0UmVzdWx0KHJlc3VsdCkge1xuICB2YXIgdXBzZXJ0UmVzdWx0ID0gY29udmVydFRvU2F2ZVJlc3VsdChyZXN1bHQpO1xuICB1cHNlcnRSZXN1bHQuY3JlYXRlZCA9IHVwc2VydFJlc3VsdC5jcmVhdGVkID09PSAndHJ1ZSc7XG4gIHJldHVybiB1cHNlcnRSZXN1bHQ7XG59XG5cbi8qKlxuICogU3lub255bSBvZiBNZXRhZGF0YSNjcmVhdGUoKS5cbiAqXG4gKiBAbWV0aG9kIE1ldGFkYXRhI2NyZWF0ZVN5bmNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gVGhlIHR5cGUgb2YgbWV0YWRhdGEgdG8gY3JlYXRlXG4gKiBAcGFyYW0ge01ldGFkYXRhfk1ldGFkYXRhSW5mb3xBcnJheS48TWV0YWRhdGF+TWV0YWRhdGFJbmZvPn0gbWV0YWRhdGEgLSBNZXRhZGF0YSB0byBjcmVhdGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE1ldGFkYXRhflNhdmVSZXN1bHR8QXJyYXkuPE1ldGFkYXRhflNhdmVSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TWV0YWRhdGF+U2F2ZVJlc3VsdHxBcnJheS48TWV0YWRhdGF+U2F2ZVJlc3VsdD4+fVxuICovXG4vKipcbiAqIFN5bmNocm9ub3VzbHkgYWRkcyBvbmUgb3IgbW9yZSBuZXcgbWV0YWRhdGEgY29tcG9uZW50cyB0byB0aGUgb3JnYW5pemF0aW9uLlxuICpcbiAqIEBtZXRob2QgTWV0YWRhdGEjY3JlYXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIHRvIGNyZWF0ZVxuICogQHBhcmFtIHtNZXRhZGF0YX5NZXRhZGF0YUluZm98QXJyYXkuPE1ldGFkYXRhfk1ldGFkYXRhSW5mbz59IG1ldGFkYXRhIC0gTWV0YWRhdGEgdG8gY3JlYXRlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5TYXZlUmVzdWx0fEFycmF5LjxNZXRhZGF0YX5TYXZlUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1ldGFkYXRhflNhdmVSZXN1bHR8QXJyYXkuPE1ldGFkYXRhflNhdmVSZXN1bHQ+Pn1cbiAqL1xuTWV0YWRhdGEucHJvdG90eXBlLmNyZWF0ZVN5bmMgPVxuTWV0YWRhdGEucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHR5cGUsIG1ldGFkYXRhLCBjYWxsYmFjaykge1xuICB2YXIgY29udmVydCA9IGZ1bmN0aW9uKG1kKSB7XG4gICAgbWRbXCJAeHNpOnR5cGVcIl0gPSB0eXBlO1xuICAgIHJldHVybiBtZDtcbiAgfTtcbiAgdmFyIGlzQXJyYXkgPSBfLmlzQXJyYXkobWV0YWRhdGEpO1xuICBtZXRhZGF0YSA9IGlzQXJyYXkgPyBfLm1hcChtZXRhZGF0YSwgY29udmVydCkgOiBjb252ZXJ0KG1ldGFkYXRhKTtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcImNyZWF0ZU1ldGFkYXRhXCIsIHsgbWV0YWRhdGE6IG1ldGFkYXRhIH0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykge1xuICAgIHJldHVybiBfLmlzQXJyYXkocmVzdWx0cykgPyBfLm1hcChyZXN1bHRzLCBjb252ZXJ0VG9TYXZlUmVzdWx0KSA6IGNvbnZlcnRUb1NhdmVSZXN1bHQocmVzdWx0cyk7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29udmVydFRvTWV0YWRhdGFJbmZvKHJlYykge1xuICB2YXIgbWV0YWRhdGFJbmZvID0gXy5jbG9uZShyZWMpO1xuICBkZWxldGUgbWV0YWRhdGFJbmZvLiQ7XG4gIHJldHVybiBtZXRhZGF0YUluZm87XG59XG5cbi8qKlxuICogU3lub255bSBvZiBNZXRhZGF0YSNyZWFkKClcbiAqXG4gKiBAbWV0aG9kIE1ldGFkYXRhI3JlYWRTeW5jXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIHRvIHJlYWRcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5LjxTdHJpbmc+fSBmdWxsTmFtZXMgLSBmdWxsIG5hbWUocykgb2YgbWV0YWRhdGEgb2JqZWN0cyB0byByZWFkXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5NZXRhZGF0YUluZm98QXJyYXkuPE1ldGFkYXRhfk1ldGFkYXRhSW5mbz4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48TWV0YWRhdGF+TWV0YWRhdGFJbmZvfEFycmF5LjxNZXRhZGF0YX5NZXRhZGF0YUluZm8+Pj59XG4gKi9cbi8qKlxuICogU3luY2hyb25vdXNseSByZWFkIHNwZWNpZmllZCBtZXRhZGF0YSBjb21wb25lbnRzIGluIHRoZSBvcmdhbml6YXRpb24uXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YSNyZWFkXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIHRvIHJlYWRcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5LjxTdHJpbmc+fSBmdWxsTmFtZXMgLSBmdWxsIG5hbWUocykgb2YgbWV0YWRhdGEgb2JqZWN0cyB0byByZWFkXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5NZXRhZGF0YUluZm98QXJyYXkuPE1ldGFkYXRhfk1ldGFkYXRhSW5mbz4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48TWV0YWRhdGF+TWV0YWRhdGFJbmZvfEFycmF5LjxNZXRhZGF0YX5NZXRhZGF0YUluZm8+Pj59XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS5yZWFkU3luYyA9XG5NZXRhZGF0YS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uKHR5cGUsIGZ1bGxOYW1lcywgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcInJlYWRNZXRhZGF0YVwiLCB7IHR5cGU6IHR5cGUsIGZ1bGxOYW1lczogZnVsbE5hbWVzIH0pLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgcmV0dXJuIF8uaXNBcnJheShyZXMucmVjb3JkcykgPyBfLm1hcChyZXMucmVjb3JkcywgY29udmVydFRvTWV0YWRhdGFJbmZvKSA6IGNvbnZlcnRUb01ldGFkYXRhSW5mbyhyZXMucmVjb3Jkcyk7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWV0YWRhdGF+VXBkYXRlTWV0YWRhdGFJbmZvXG4gKiBAcHJvcCB7U3RyaW5nfSBjdXJyZW50TmFtZSAtIFRoZSBBUEkgbmFtZSBvZiB0aGUgY29tcG9uZW50IG9yIGZpZWxkIGJlZm9yZSB0aGUgdXBkYXRlXG4gKiBAcHJvcCB7TWV0YWRhdGF+TWV0YWRhdGFJbmZvfSBtZXRhZGF0YSAtIEZ1bGwgc3BlY2lmaWNhdGlvbiBvZiB0aGUgY29tcG9uZW50IG9yIGZpZWxkIHlvdSB3aXNoIHRvIHVwZGF0ZVxuICovXG5cbi8qKlxuICogQXN5bmNocm9ub3VzbHkgdXBkYXRlcyBvbmUgb3IgbW9yZSBtZXRhZGF0YSBjb21wb25lbnRzIGluIHRoZSBvcmdhbml6YXRpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBUaGUgdHlwZSBvZiBtZXRhZGF0YSB0byB1cGRhdGVcbiAqIEBwYXJhbSB7TWV0YWRhdGF+VXBkYXRlTWV0YWRhdGFJbmZvfEFycmF5LjxNZXRhZGF0YX5VcGRhdGVNZXRhZGF0YUluZm8+fSB1cGRhdGVNZXRhZGF0YSAtIFVwZGF0aW5nIG1ldGFkYXRhXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5Bc3luY1Jlc3VsdHxBcnJheS48TWV0YWRhdGF+QXN5bmNSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TWV0YWRhdGF+QXN5bmNSZXN1bHRMb2NhdG9yfVxuICovXG5NZXRhZGF0YS5wcm90b3R5cGUudXBkYXRlQXN5bmMgPSBmdW5jdGlvbih0eXBlLCB1cGRhdGVNZXRhZGF0YSwgY2FsbGJhY2spIHtcbiAgaWYgKE51bWJlcih0aGlzLl9jb25uLnZlcnNpb24pID4gMzApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBc3luYyBtZXRhZGF0YSBDUlVEIGNhbGxzIGFyZSBub3Qgc3VwcG9ydGVkIG9uIHZlciAzMS4wIG9yIGxhdGVyLlwiKTtcbiAgfVxuICB2YXIgY29udmVydCA9IGZ1bmN0aW9uKHVtZCkge1xuICAgIHVtZC5tZXRhZGF0YVtcIkB4c2k6dHlwZVwiXSA9IHR5cGU7XG4gICAgcmV0dXJuIHVtZDtcbiAgfTtcbiAgdmFyIGlzQXJyYXkgPSBfLmlzQXJyYXkodXBkYXRlTWV0YWRhdGEpO1xuICB1cGRhdGVNZXRhZGF0YSA9IGlzQXJyYXkgPyBfLm1hcCh1cGRhdGVNZXRhZGF0YSwgY29udmVydCkgOiBjb252ZXJ0KHVwZGF0ZU1ldGFkYXRhKTtcbiAgdmFyIHJlcyA9IHRoaXMuX2ludm9rZShcInVwZGF0ZVwiLCB7IHVwZGF0ZU1ldGFkYXRhOiB1cGRhdGVNZXRhZGF0YSB9KTtcbiAgcmV0dXJuIG5ldyBBc3luY1Jlc3VsdExvY2F0b3IodGhpcywgcmVzLCBpc0FycmF5KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgTWV0YWRhdGEjdXBkYXRlKCkuXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YSN1cGRhdGVTeW5jXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIHRvIHVwZGF0ZVxuICogQHBhcmFtIHtNZXRhZGF0YX5NZXRhZGF0YUluZm98QXJyYXkuPE1ldGFkYXRhfk1ldGFkYXRhSW5mbz59IHVwZGF0ZU1ldGFkYXRhIC0gVXBkYXRpbmcgbWV0YWRhdGFcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE1ldGFkYXRhflNhdmVSZXN1bHR8QXJyYXkuPE1ldGFkYXRhflNhdmVSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TWV0YWRhdGF+U2F2ZVJlc3VsdHxBcnJheS48TWV0YWRhdGF+U2F2ZVJlc3VsdD4+fVxuICovXG4vKipcbiAqIFN5bmNocm9ub3VzbHkgdXBkYXRlcyBvbmUgb3IgbW9yZSBtZXRhZGF0YSBjb21wb25lbnRzIGluIHRoZSBvcmdhbml6YXRpb24uXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YSN1cGRhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gVGhlIHR5cGUgb2YgbWV0YWRhdGEgdG8gdXBkYXRlXG4gKiBAcGFyYW0ge01ldGFkYXRhfk1ldGFkYXRhSW5mb3xBcnJheS48TWV0YWRhdGF+TWV0YWRhdGFJbmZvPn0gdXBkYXRlTWV0YWRhdGEgLSBVcGRhdGluZyBtZXRhZGF0YVxuICogQHBhcmFtIHtDYWxsYmFjay48TWV0YWRhdGF+U2F2ZVJlc3VsdHxBcnJheS48TWV0YWRhdGF+U2F2ZVJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxNZXRhZGF0YX5TYXZlUmVzdWx0fEFycmF5LjxNZXRhZGF0YX5TYXZlUmVzdWx0Pj59XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS51cGRhdGVTeW5jID1cbk1ldGFkYXRhLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbih0eXBlLCBtZXRhZGF0YSwgY2FsbGJhY2spIHtcbiAgdmFyIGNvbnZlcnQgPSBmdW5jdGlvbihtZCkge1xuICAgIG1kW1wiQHhzaTp0eXBlXCJdID0gdHlwZTtcbiAgICByZXR1cm4gbWQ7XG4gIH07XG4gIHZhciBpc0FycmF5ID0gXy5pc0FycmF5KG1ldGFkYXRhKTtcbiAgbWV0YWRhdGEgPSBpc0FycmF5ID8gXy5tYXAobWV0YWRhdGEsIGNvbnZlcnQpIDogY29udmVydChtZXRhZGF0YSk7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJ1cGRhdGVNZXRhZGF0YVwiLCB7IG1ldGFkYXRhOiBtZXRhZGF0YSB9KS50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICByZXR1cm4gXy5pc0FycmF5KHJlc3VsdHMpID8gXy5tYXAocmVzdWx0cywgY29udmVydFRvU2F2ZVJlc3VsdCkgOiBjb252ZXJ0VG9TYXZlUmVzdWx0KHJlc3VsdHMpO1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgTWV0YWRhdGEjdXBzZXJ0KCkuXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YSN1cHNlcnRTeW5jXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIHRvIHVwc2VydFxuICogQHBhcmFtIHtNZXRhZGF0YX5NZXRhZGF0YUluZm98QXJyYXkuPE1ldGFkYXRhfk1ldGFkYXRhSW5mbz59IG1ldGFkYXRhIC0gVXBzZXJ0aW5nIG1ldGFkYXRhXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5VcHNlcnRSZXN1bHR8QXJyYXkuPE1ldGFkYXRhflVwc2VydFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxNZXRhZGF0YX5VcHNlcnRSZXN1bHR8QXJyYXkuPE1ldGFkYXRhflVwc2VydFJlc3VsdD4+fVxuICovXG4vKipcbiAqIFVwc2VydHMgb25lIG9yIG1vcmUgY29tcG9uZW50cyBpbiB5b3VyIG9yZ2FuaXphdGlvbidzIGRhdGEuXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YSN1cHNlcnRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gVGhlIHR5cGUgb2YgbWV0YWRhdGEgdG8gdXBzZXJ0XG4gKiBAcGFyYW0ge01ldGFkYXRhfk1ldGFkYXRhSW5mb3xBcnJheS48TWV0YWRhdGF+TWV0YWRhdGFJbmZvPn0gbWV0YWRhdGEgLSBVcHNlcnRpbmcgbWV0YWRhdGFcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE1ldGFkYXRhflVwc2VydFJlc3VsdHxBcnJheS48TWV0YWRhdGF+VXBzZXJ0UmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1ldGFkYXRhflVwc2VydFJlc3VsdHxBcnJheS48TWV0YWRhdGF+VXBzZXJ0UmVzdWx0Pj59XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS51cHNlcnRTeW5jID1cbk1ldGFkYXRhLnByb3RvdHlwZS51cHNlcnQgPSBmdW5jdGlvbih0eXBlLCBtZXRhZGF0YSwgY2FsbGJhY2spIHtcbiAgdmFyIGNvbnZlcnQgPSBmdW5jdGlvbihtZCkge1xuICAgIG1kW1wiQHhzaTp0eXBlXCJdID0gdHlwZTtcbiAgICByZXR1cm4gbWQ7XG4gIH07XG4gIHZhciBpc0FycmF5ID0gXy5pc0FycmF5KG1ldGFkYXRhKTtcbiAgbWV0YWRhdGEgPSBpc0FycmF5ID8gXy5tYXAobWV0YWRhdGEsIGNvbnZlcnQpIDogY29udmVydChtZXRhZGF0YSk7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJ1cHNlcnRNZXRhZGF0YVwiLCB7IG1ldGFkYXRhOiBtZXRhZGF0YSB9KS50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICByZXR1cm4gXy5pc0FycmF5KHJlc3VsdHMpID8gXy5tYXAocmVzdWx0cywgY29udmVydFRvVXBzZXJ0UmVzdWx0KSA6IGNvbnZlcnRUb1Vwc2VydFJlc3VsdChyZXN1bHRzKTtcbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBBc3luY2hyb25vdXNseSBkZWxldGVzIHNwZWNpZmllZCBtZXRhZGF0YSBjb21wb25lbnRzIGluIHRoZSBvcmdhbml6YXRpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBUaGUgdHlwZSBvZiBtZXRhZGF0YSB0byBkZWxldGVcbiAqIEBwYXJhbSB7U3RyaW5nfE1ldGFkYXRhfk1ldGFkYXRhSW5mb3xBcnJheS48U3RyaW5nPnxBcnJheS48TWV0YWRhdGF+TWV0YWRhdGFJbmZvPn0gbWV0YWRhdGEgLSBUaGUgZnVsbE5hbWUgb2YgbWV0YWRhdGEgb3IgbWV0YWRhdGEgaW5mbyB0byBkZWxldGUuIElmIGl0IGlzIHBhc3NlZCBpbiBmdWxsTmFtZSwgdGhlIHR5cGUgcGFyYW1ldGVyIHNob3VsZCBub3QgYmUgZW1wdHkuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5Bc3luY1Jlc3VsdHxBcnJheS48TWV0YWRhdGF+QXN5bmNSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TWV0YWRhdGF+QXN5bmNSZXN1bHRMb2NhdG9yfVxuICovXG5NZXRhZGF0YS5wcm90b3R5cGUuZGVsZXRlQXN5bmMgPSBmdW5jdGlvbih0eXBlLCBtZXRhZGF0YSwgY2FsbGJhY2spIHtcbiAgaWYgKE51bWJlcih0aGlzLl9jb25uLnZlcnNpb24pID4gMzApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBc3luYyBtZXRhZGF0YSBDUlVEIGNhbGxzIGFyZSBub3Qgc3VwcG9ydGVkIG9uIHZlciAzMS4wIG9yIGxhdGVyLlwiKTtcbiAgfVxuICB2YXIgY29udmVydCA9IGZ1bmN0aW9uKG1kKSB7XG4gICAgaWYgKF8uaXNTdHJpbmcobWQpKSB7XG4gICAgICBtZCA9IHsgZnVsbE5hbWUgOiBtZCB9O1xuICAgIH1cbiAgICBtZFtcIkB4c2k6dHlwZVwiXSA9IHR5cGU7XG4gICAgcmV0dXJuIG1kO1xuICB9O1xuICB2YXIgaXNBcnJheSA9IF8uaXNBcnJheShtZXRhZGF0YSk7XG4gIG1ldGFkYXRhID0gaXNBcnJheSA/IF8ubWFwKG1ldGFkYXRhLCBjb252ZXJ0KSA6IGNvbnZlcnQobWV0YWRhdGEpO1xuICB2YXIgcmVzID0gdGhpcy5faW52b2tlKFwiZGVsZXRlXCIsIHsgbWV0YWRhdGE6IG1ldGFkYXRhIH0pO1xuICByZXR1cm4gbmV3IEFzeW5jUmVzdWx0TG9jYXRvcih0aGlzLCByZXMsIGlzQXJyYXkpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogU3lub255bSBvZiBNZXRhZGF0YSNkZWxldGUoKS5cbiAqXG4gKiBAZGVwcmVjYXRlZFxuICogQG1ldGhvZCBNZXRhZGF0YSNkZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdHlwZV0gLSBUaGUgdHlwZSBvZiBtZXRhZGF0YSB0byBkZWxldGVcbiAqIEBwYXJhbSB7U3RyaW5nfE1ldGFkYXRhfk1ldGFkYXRhSW5mb3xBcnJheS48U3RyaW5nPnxBcnJheS48TWV0YWRhdGF+TWV0YWRhdGFJbmZvPn0gbWV0YWRhdGEgLSBUaGUgZnVsbE5hbWUgb2YgbWV0YWRhdGEgb3IgbWV0YWRhdGEgaW5mbyB0byBkZWxldGUuIElmIGl0IGlzIHBhc3NlZCBpbiBmdWxsTmFtZSwgdGhlIHR5cGUgcGFyYW1ldGVyIHNob3VsZCBub3QgYmUgZW1wdHkuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5Bc3luY1Jlc3VsdHxBcnJheS48TWV0YWRhdGF+QXN5bmNSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TWV0YWRhdGF+QXN5bmNSZXN1bHRMb2NhdG9yfVxuICovXG4vKipcbiAqIFN5bm9ueW0gb2YgTWV0YWRhdGEjZGVsZXRlKCkuXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YSNkZWxldGVTeW5jXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIHRvIGRlbGV0ZVxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXkuPFN0cmluZz59IGZ1bGxOYW1lcyAtIFRoZSBmdWxsTmFtZSBvZiBtZXRhZGF0YSB0byBkZWxldGUuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5TYXZlUmVzdWx0fEFycmF5LjxNZXRhZGF0YX5TYXZlUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1ldGFkYXRhflNhdmVSZXN1bHR8QXJyYXkuPE1ldGFkYXRhflNhdmVSZXN1bHQ+Pn1cbiAqL1xuXG4vKipcbiAqIFN5bmNocm9ub3VzbHkgZGVsZXRlcyBzcGVjaWZpZWQgbWV0YWRhdGEgY29tcG9uZW50cyBpbiB0aGUgb3JnYW5pemF0aW9uLlxuICpcbiAqIEBtZXRob2QgTWV0YWRhdGEjZGVsZXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIHRvIGRlbGV0ZVxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXkuPFN0cmluZz59IGZ1bGxOYW1lcyAtIFRoZSBmdWxsTmFtZSBvZiBtZXRhZGF0YSB0byBkZWxldGUuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5TYXZlUmVzdWx0fEFycmF5LjxNZXRhZGF0YX5TYXZlUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1ldGFkYXRhflNhdmVSZXN1bHR8QXJyYXkuPE1ldGFkYXRhflNhdmVSZXN1bHQ+Pn1cbiAqL1xuTWV0YWRhdGEucHJvdG90eXBlLmRlbCA9XG5NZXRhZGF0YS5wcm90b3R5cGUuZGVsZXRlU3luYyA9XG5NZXRhZGF0YS5wcm90b3R5cGVbXCJkZWxldGVcIl0gPSBmdW5jdGlvbih0eXBlLCBmdWxsTmFtZXMsIGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJkZWxldGVNZXRhZGF0YVwiLCB7IHR5cGU6IHR5cGUsIGZ1bGxOYW1lczogZnVsbE5hbWVzIH0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykge1xuICAgIHJldHVybiBfLmlzQXJyYXkocmVzdWx0cykgPyBfLm1hcChyZXN1bHRzLCBjb252ZXJ0VG9TYXZlUmVzdWx0KSA6IGNvbnZlcnRUb1NhdmVSZXN1bHQocmVzdWx0cyk7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogUmVuYW1lIGZ1bGxuYW1lIG9mIGEgbWV0YWRhdGEgY29tcG9uZW50IGluIHRoZSBvcmdhbml6YXRpb25cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFRoZSB0eXBlIG9mIG1ldGFkYXRhIHRvIGRlbGV0ZVxuICogQHBhcmFtIHtTdHJpbmd9IG9sZEZ1bGxOYW1lIC0gVGhlIG9yaWdpbmFsIGZ1bGxOYW1lIG9mIG1ldGFkYXRhXG4gKiBAcGFyYW0ge1N0cmluZ30gbmV3RnVsbE5hbWUgLSBUaGUgbmV3IGZ1bGxOYW1lIG9mIG1ldGFkYXRhXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5TYXZlUmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TWV0YWRhdGF+U2F2ZVJlc3VsdD59XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS5yZW5hbWUgPSBmdW5jdGlvbih0eXBlLCBvbGRGdWxsTmFtZSwgbmV3RnVsbE5hbWUsIGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJyZW5hbWVNZXRhZGF0YVwiLCB7IHR5cGU6IHR5cGUsIG9sZEZ1bGxOYW1lOiBvbGRGdWxsTmFtZSwgbmV3RnVsbE5hbWU6IG5ld0Z1bGxOYW1lIH0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgcmV0dXJuIGNvbnZlcnRUb1NhdmVSZXN1bHQocmVzdWx0KTtcbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBDaGVja3MgdGhlIHN0YXR1cyBvZiBhc3luY2hyb25vdXMgbWV0YWRhdGEgY2FsbHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheS48U3RyaW5nPn0gaWRzIC0gVGhlIGFzeW5jaHJvbm91cyBwcm9jZXNzIElEKHMpXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5Bc3luY1Jlc3VsdHxBcnJheS48TWV0YWRhdGF+QXN5bmNSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TWV0YWRhdGF+QXN5bmNSZXN1bHRMb2NhdG9yfVxuICovXG5NZXRhZGF0YS5wcm90b3R5cGUuY2hlY2tTdGF0dXMgPSBmdW5jdGlvbihpZHMsIGNhbGxiYWNrKSB7XG4gIHZhciBpc0FycmF5ID0gXy5pc0FycmF5KGlkcyk7XG4gIHZhciByZXMgPSB0aGlzLl9pbnZva2UoXCJjaGVja1N0YXR1c1wiLCB7IGFzeW5jUHJvY2Vzc0lkOiBpZHMgfSk7XG4gIHJldHVybiBuZXcgQXN5bmNSZXN1bHRMb2NhdG9yKHRoaXMsIHJlcywgaXNBcnJheSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNZXRhZGF0YX5EZXNjcmliZU1ldGFkYXRhUmVzdWx0XG4gKiBAcHJvcCB7QXJyYXkuPE9iamVjdD59IG1ldGFkYXRhT2JqZWN0cyAtIE9uZSBvciBtb3JlIG1ldGFkYXRhIGNvbXBvbmVudHMgYW5kIHRoZWlyIGF0dHJpYnV0ZXNcbiAqIEBwcm9wIHtBcnJheS48U3RyaW5nPn0gbWV0YWRhdGFPYmplY3RzLmNoaWxkWG1sTmFtZXMgLSBMaXN0IG9mIGNoaWxkIHN1Yi1jb21wb25lbnRzIGZvciB0aGlzIGNvbXBvbmVudFxuICogQHByb3Age1N0cmluZ30gbWV0YWRhdGFPYmplY3RzLmRpcmVjdG9yeU5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZGlyZWN0b3J5IGluIHRoZSAuemlwIGZpbGUgdGhhdCBjb250YWlucyB0aGlzIGNvbXBvbmVudFxuICogQHByb3Age0Jvb2xlYW59IG1ldGFkYXRhT2JqZWN0cy5pbkZvbGRlciAtIEluZGljYXRlcyB3aGV0aGVyIHRoZSBjb21wb25lbnQgaXMgaW4gYSBmb2xkZXIgb3Igbm90XG4gKiBAcHJvcCB7Qm9vbGVhbn0gbWV0YWRhdGFPYmplY3RzLm1ldGFGaWxlIC0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBhbiBhY2NvbXBhbnlpbmcgbWV0YWRhdGEgZmlsZVxuICogQHByb3Age1N0cmluZ30gbWV0YWRhdGFPYmplY3RzLnN1ZmZpeCAtIFRoZSBmaWxlIHN1ZmZpeCBmb3IgdGhpcyBjb21wb25lbnRcbiAqIEBwcm9wIHtTdHJpbmd9IG1ldGFkYXRhT2JqZWN0cy54bWxOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHJvb3QgZWxlbWVudCBpbiB0aGUgbWV0YWRhdGEgZmlsZSBmb3IgdGhpcyBjb21wb25lbnRcbiAqIEBwcm9wIHtTdHJpbmd9IG9yZ2FuaXphdGlvbk5hbWVzcGFjZSAtIFRoZSBuYW1lc3BhY2Ugb2YgdGhlIG9yZ2FuaXphdGlvblxuICogQHByb3Age0Jvb2xlYW59IHBhcnRpYWxTYXZlQWxsb3dlZCAtIEluZGljYXRlcyB3aGV0aGVyIHJvbGxiYWNrT25FcnJvciBpcyBhbGxvd2VkIG9yIG5vdFxuICogQHByb3Age0Jvb2xlYW59IHRlc3RSZXF1aXJlZCAtIEluZGljYXRlcyB3aGV0aGVyIHRlc3RzIGFyZSByZXF1aXJlZCBvciBub3RcbiAqL1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgbWV0YWRhdGEgd2hpY2ggZGVzY3JpYmVzIHlvdXIgb3JnYW5pemF0aW9uLCBpbmNsdWRpbmcgQXBleCBjbGFzc2VzIGFuZCB0cmlnZ2VycyxcbiAqIGN1c3RvbSBvYmplY3RzLCBjdXN0b20gZmllbGRzIG9uIHN0YW5kYXJkIG9iamVjdHMsIHRhYiBzZXRzIHRoYXQgZGVmaW5lIGFuIGFwcCxcbiAqIGFuZCBtYW55IG90aGVyIGNvbXBvbmVudHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IFt2ZXJzaW9uXSAtIFRoZSBBUEkgdmVyc2lvbiBmb3Igd2hpY2ggeW91IHdhbnQgbWV0YWRhdGE7IGZvciBleGFtcGxlLCAyOS4wXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5EZXNjcmliZU1ldGFkYXRhUmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TWV0YWRhdGF+RGVzY3JpYmVNZXRhZGF0YVJlc3VsdD59XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS5kZXNjcmliZSA9IGZ1bmN0aW9uKHZlcnNpb24sIGNhbGxiYWNrKSB7XG4gIGlmICghXy5pc1N0cmluZyh2ZXJzaW9uKSkge1xuICAgIGNhbGxiYWNrID0gdmVyc2lvbjtcbiAgICB2ZXJzaW9uID0gdGhpcy5fY29ubi52ZXJzaW9uO1xuICB9XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJkZXNjcmliZU1ldGFkYXRhXCIsIHsgYXNPZlZlcnNpb246IHZlcnNpb24gfSkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICByZXMubWV0YWRhdGFPYmplY3RzID0gXy5pc0FycmF5KHJlcy5tZXRhZGF0YU9iamVjdHMpID8gcmVzLm1ldGFkYXRhT2JqZWN0cyA6IFsgcmVzLm1ldGFkYXRhT2JqZWN0cyBdO1xuICAgIHJlcy5tZXRhZGF0YU9iamVjdHMgPSBfLm1hcChyZXMubWV0YWRhdGFPYmplY3RzLCBmdW5jdGlvbihtbykge1xuICAgICAgaWYgKG1vLmNoaWxkWG1sTmFtZXMpIHtcbiAgICAgICAgbW8uY2hpbGRYbWxOYW1lcyA9IF8uaXNBcnJheShtby5jaGlsZFhtbE5hbWVzKSA/IG1vLmNoaWxkWG1sTmFtZXM6IFsgbW8uY2hpbGRYbWxOYW1lcyBdO1xuICAgICAgfVxuICAgICAgbW8uaW5Gb2xkZXIgPSBtby5pbkZvbGRlciA9PT0gJ3RydWUnO1xuICAgICAgbW8ubWV0YUZpbGUgPSBtby5tZXRhRmlsZSA9PT0gJ3RydWUnO1xuICAgICAgcmV0dXJuIG1vO1xuICAgIH0pO1xuICAgIHJlcy5wYXJ0aWFsU2F2ZUFsbG93ZWQgPSByZXMucGFydGlhbFNhdmVBbGxvd2VkID09PSAndHJ1ZSc7XG4gICAgcmVzLnRlc3RSZXF1aXJlZCA9IHJlcy50ZXN0UmVxdWlyZWQgPT09ICd0cnVlJztcbiAgICByZXR1cm4gcmVzO1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1ldGFkYXRhfkxpc3RNZXRhZGF0YVF1ZXJ5XG4gKiBAcHJvcCB7U3RyaW5nfSB0eXBlIC0gVGhlIG1ldGFkYXRhIHR5cGUsIHN1Y2ggYXMgQ3VzdG9tT2JqZWN0LCBDdXN0b21GaWVsZCwgb3IgQXBleENsYXNzXG4gKiBAcHJvcCB7U3RyaW5nfSBbZm9sZGVyXSAtIFRoZSBmb2xkZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb21wb25lbnQuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNZXRhZGF0YX5GaWxlUHJvcGVydGllc1xuICogQHByb3Age1N0cmluZ30gdHlwZSAtIFRoZSBtZXRhZGF0YSB0eXBlLCBzdWNoIGFzIEN1c3RvbU9iamVjdCwgQ3VzdG9tRmllbGQsIG9yIEFwZXhDbGFzc1xuICogQHByb3Age1N0cmluZ30gY3JlYXRlZEJ5SWQgLSBJRCBvZiB0aGUgdXNlciB3aG8gY3JlYXRlZCB0aGUgZmlsZVxuICogQHByb3Age1N0cmluZ30gY3JlYXRlZEJ5TmFtZSAtIE5hbWUgb2YgdGhlIHVzZXIgd2hvIGNyZWF0ZWQgdGhlIGZpbGVcbiAqIEBwcm9wIHtTdHJpbmd9IGNyZWF0ZWREYXRlIC0gRGF0ZSBhbmQgdGltZSB3aGVuIHRoZSBmaWxlIHdhcyBjcmVhdGVkXG4gKiBAcHJvcCB7U3RyaW5nfSBmaWxlTmFtZSAtIE5hbWUgb2YgdGhlIGZpbGVcbiAqIEBwcm9wIHtTdHJpbmd9IGZ1bGxOYW1lIC0gVGhlIGZpbGUgZGV2ZWxvcGVyIG5hbWUgdXNlZCBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciBBUEkgYWNjZXNzXG4gKiBAcHJvcCB7U3RyaW5nfSBpZCAtIElEIG9mIHRoZSBmaWxlXG4gKiBAcHJvcCB7U3RyaW5nfSBsYXN0TW9kaWZpZWRCeUlkIC0gSUQgb2YgdGhlIHVzZXIgd2hvIGxhc3QgbW9kaWZpZWQgdGhlIGZpbGVcbiAqIEBwcm9wIHtTdHJpbmd9IGxhc3RNb2RpZmllZEJ5TmFtZSAtIE5hbWUgb2YgdGhlIHVzZXIgd2hvIGxhc3QgbW9kaWZpZWQgdGhlIGZpbGVcbiAqIEBwcm9wIHtTdHJpbmd9IGxhc3RNb2RpZmllZERhdGUgLSBEYXRlIGFuZCB0aW1lIHRoYXQgdGhlIGZpbGUgd2FzIGxhc3QgbW9kaWZpZWRcbiAqIEBwcm9wIHtTdHJpbmd9IFttYW5hZ2VhYmxlU3RhdGVdIC0gSW5kaWNhdGVzIHRoZSBtYW5hZ2VhYmxlIHN0YXRlIG9mIHRoZSBzcGVjaWZpZWQgY29tcG9uZW50IGlmIGl0IGlzIGNvbnRhaW5lZCBpbiBhIHBhY2thZ2VcbiAqIEBwcm9wIHtTdHJpbmd9IFtuYW1lc3BhY2VQcmVmaXhdIC0gVGhlIG5hbWVzcGFjZSBwcmVmaXggb2YgdGhlIGNvbXBvbmVudFxuICovXG5cbi8qKlxuICogUmV0cmlldmVzIHByb3BlcnR5IGluZm9ybWF0aW9uIGFib3V0IG1ldGFkYXRhIGNvbXBvbmVudHMgaW4geW91ciBvcmdhbml6YXRpb25cbiAqXG4gKiBAcGFyYW0ge01ldGFkYXRhfkxpc3RNZXRhZGF0YVF1ZXJ5fEFycmF5LjxNZXRhZGF0YX5MaXN0TWV0YWRhdGFRdWVyeT59IHF1ZXJpZXMgLSBUaGUgY3JpdGVyaWEgb2JqZWN0KHMpIHNwZWNpZmluZyBtZXRhZGF0YSB0byBsaXN0XG4gKiBAcGFyYW0ge1N0cmluZ30gW3ZlcnNpb25dIC0gVGhlIEFQSSB2ZXJzaW9uIGZvciB3aGljaCB5b3Ugd2FudCBtZXRhZGF0YTsgZm9yIGV4YW1wbGUsIDI5LjBcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxNZXRhZGF0YX5GaWxlUHJvcGVydGllcz4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48TWV0YWRhdGF+RmlsZVByb3BlcnRpZXM+Pn1cbiAqL1xuTWV0YWRhdGEucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbihxdWVyaWVzLCB2ZXJzaW9uLCBjYWxsYmFjaykge1xuICBpZiAoIV8uaXNTdHJpbmcodmVyc2lvbikpIHtcbiAgICBjYWxsYmFjayA9IHZlcnNpb247XG4gICAgdmVyc2lvbiA9IHRoaXMuX2Nvbm4udmVyc2lvbjtcbiAgfVxuICBpZiAoIV8uaXNBcnJheShxdWVyaWVzKSkge1xuICAgIHF1ZXJpZXMgPSBbIHF1ZXJpZXMgXTtcbiAgfVxuICByZXR1cm4gdGhpcy5faW52b2tlKFwibGlzdE1ldGFkYXRhXCIsIHsgcXVlcmllczogcXVlcmllcywgYXNPZlZlcnNpb246IHZlcnNpb24gfSwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNZXRhZGF0YX5SZXRyaWV2ZVJlcXVlc3RcbiAqL1xuXG4vKipcbiAqIFJldHJpZXZlcyBYTUwgZmlsZSByZXByZXNlbnRhdGlvbnMgb2YgY29tcG9uZW50cyBpbiBhbiBvcmdhbml6YXRpb25cbiAqXG4gKiBAcGFyYW0ge01ldGFkYXRhflJldHJpZXZlUmVxdWVzdH0gcmVxdWVzdCAtIE9wdGlvbnMgZm9yIGRldGVybWluaW5nIHdoaWNoIHBhY2thZ2VzIG9yIGZpbGVzIGFyZSByZXRyaWV2ZWRcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE1ldGFkYXRhfkFzeW5jUmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7TWV0YWRhdGF+UmV0cmlldmVSZXN1bHRMb2NhdG9yfVxuICovXG5NZXRhZGF0YS5wcm90b3R5cGUucmV0cmlldmUgPSBmdW5jdGlvbihyZXF1ZXN0LCBjYWxsYmFjaykge1xuICB2YXIgcmVzID0gdGhpcy5faW52b2tlKFwicmV0cmlldmVcIiwgeyByZXF1ZXN0OiByZXF1ZXN0IH0pO1xuICByZXR1cm4gbmV3IFJldHJpZXZlUmVzdWx0TG9jYXRvcih0aGlzLCByZXMpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBzdGF0dXMgb2YgZGVjbGFyYXRpdmUgbWV0YWRhdGEgY2FsbCByZXRyaWV2ZSgpIGFuZCByZXR1cm5zIHRoZSB6aXAgZmlsZSBjb250ZW50c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIEFzeW5jIHByb2Nlc3MgaWQgcmV0dXJuZWQgZnJvbSBwcmV2aW91cyByZXRyaWV2ZSByZXF1ZXN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5SZXRyaWV2ZVJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1ldGFkYXRhflJldHJpZXZlUmVzdWx0Pn1cbiAqL1xuTWV0YWRhdGEucHJvdG90eXBlLmNoZWNrUmV0cmlldmVTdGF0dXMgPSBmdW5jdGlvbihpZCwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcImNoZWNrUmV0cmlldmVTdGF0dXNcIiwgeyBhc3luY1Byb2Nlc3NJZDogaWQgfSwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBEZXBsb3kgY29tcG9uZW50cyBpbnRvIGFuIG9yZ2FuaXphdGlvbiB1c2luZyB6aXBwZWQgZmlsZSByZXByZXNlbnRhdGlvbnNcbiAqXG4gKiBAcGFyYW0ge3N0cmVhbS5TdHJlYW18QnVmZmVyfFN0cmluZ30gemlwSW5wdXQgLSBaaXBwZWQgZmlsZSBpbnB1dCBzb3VyY2UgaW4gcmVhZGFibGUgc3RyZWFtLCBiaW5hcnkgYnVmZmVyIG9yIEJhc2U2NC1lbmNvZGVkIHN0cmluZ1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgdXNlZCBpbiBkZXBsb3ltZW50XG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbG93TWlzc2luZ0ZpbGVzXSAtIFNwZWNpZmllcyB3aGV0aGVyIGEgZGVwbG95IHN1Y2NlZWRzIGV2ZW4gaWYgZmlsZXMgdGhhdCBhcmUgc3BlY2lmaWVkIGluIHBhY2thZ2UueG1sIGJ1dCBhcmUgbm90IGluIHRoZSAuemlwIGZpbGUgb3Igbm90LlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hdXRvVXBkYXRlUGFja2FnZV0gLSBJZiBhIGZpbGUgaXMgaW4gdGhlIC56aXAgZmlsZSBidXQgbm90IHNwZWNpZmllZCBpbiBwYWNrYWdlLnhtbCwgc3BlY2lmaWVzIHdoZXRoZXIgdGhlIGZpbGUgc2hvdWxkIGJlIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhlIHBhY2thZ2Ugb3Igbm90LlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5jaGVja09ubHldIC0gSW5kaWNhdGVzIHdoZXRoZXIgQXBleCBjbGFzc2VzIGFuZCB0cmlnZ2VycyBhcmUgc2F2ZWQgdG8gdGhlIG9yZ2FuaXphdGlvbiBhcyBwYXJ0IG9mIHRoZSBkZXBsb3ltZW50IChmYWxzZSkgb3Igbm90ICh0cnVlKS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaWdub3JlV2FybmluZ3NdIC0gSW5kaWNhdGVzIHdoZXRoZXIgYSB3YXJuaW5nIHNob3VsZCBhbGxvdyBhIGRlcGxveW1lbnQgdG8gY29tcGxldGUgc3VjY2Vzc2Z1bGx5ICh0cnVlKSBvciBub3QgKGZhbHNlKS4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnBlcmZvcm1SZXRyaWV2ZV0gLSBJbmRpY2F0ZXMgd2hldGhlciBhIHJldHJpZXZlKCkgY2FsbCBpcyBwZXJmb3JtZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGRlcGxveW1lbnQgKHRydWUpIG9yIG5vdCAoZmFsc2UpLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5wdXJnZU9uRGVsZXRlXSAtIElmIHRydWUsIHRoZSBkZWxldGVkIGNvbXBvbmVudHMgaW4gdGhlIGRlc3RydWN0aXZlQ2hhbmdlcy54bWwgbWFuaWZlc3QgZmlsZSBhcmVuJ3Qgc3RvcmVkIGluIHRoZSBSZWN5Y2xlIEJpbi5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMucm9sbGJhY2tPbkVycm9yXSAtIEluZGljYXRlcyB3aGV0aGVyIGFueSBmYWlsdXJlIGNhdXNlcyBhIGNvbXBsZXRlIHJvbGxiYWNrICh0cnVlKSBvciBub3QgKGZhbHNlKS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMucnVuQWxsVGVzdHNdIC0gSWYgdHJ1ZSwgYWxsIEFwZXggdGVzdHMgZGVmaW5lZCBpbiB0aGUgb3JnYW5pemF0aW9uIGFyZSBydW4uXG4gKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fSBbb3B0aW9ucy5ydW5UZXN0c10gLSBBIGxpc3Qgb2YgQXBleCB0ZXN0cyB0byBiZSBydW4gZHVyaW5nIGRlcGxveW1lbnQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNpbmdsZVBhY2thZ2VdIC0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCAuemlwIGZpbGUgcG9pbnRzIHRvIGEgZGlyZWN0b3J5IHN0cnVjdHVyZSB3aXRoIGEgc2luZ2xlIHBhY2thZ2UgKHRydWUpIG9yIGEgc2V0IG9mIHBhY2thZ2VzIChmYWxzZSkuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5Bc3luY1Jlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge01ldGFkYXRhfkRlcGxveVJlc3VsdExvY2F0b3J9XG4gKi9cbk1ldGFkYXRhLnByb3RvdHlwZS5kZXBsb3kgPSBmdW5jdGlvbih6aXBJbnB1dCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKCFvcHRpb25zIHx8IF8uaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgdmFyIGRlZmVycmVkID0gUHJvbWlzZS5kZWZlcigpO1xuICBpZiAoXy5pc09iamVjdCh6aXBJbnB1dCkgJiYgXy5pc0Z1bmN0aW9uKHppcElucHV0LnBpcGUpKSB7XG4gICAgdmFyIGJ1ZnMgPSBbXTtcbiAgICB6aXBJbnB1dC5vbignZGF0YScsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIGJ1ZnMucHVzaChkKTtcbiAgICB9KTtcbiAgICB6aXBJbnB1dC5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKEJ1ZmZlci5jb25jYXQoYnVmcykudG9TdHJpbmcoJ2Jhc2U2NCcpKTtcbiAgICB9KTtcbiAgICAvLyB6aXBJbnB1dC5yZXN1bWUoKTtcbiAgfSBlbHNlIGlmICh6aXBJbnB1dCBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgIGRlZmVycmVkLnJlc29sdmUoemlwSW5wdXQudG9TdHJpbmcoJ2Jhc2U2NCcpKTtcbiAgfSBlbHNlIGlmICh6aXBJbnB1dCBpbnN0YW5jZW9mIFN0cmluZyB8fCB0eXBlb2YgemlwSW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZGVmZXJyZWQucmVzb2x2ZSh6aXBJbnB1dCk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgXCJVbmV4cGVjdGVkIHppcElucHV0IHR5cGVcIjtcbiAgfVxuXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIHJlcyA9IGRlZmVycmVkLnByb21pc2UudGhlbihmdW5jdGlvbih6aXBDb250ZW50QjY0KSB7XG4gICAgcmV0dXJuIHNlbGYuX2ludm9rZShcImRlcGxveVwiLCB7XG4gICAgICBaaXBGaWxlOiB6aXBDb250ZW50QjY0LFxuICAgICAgRGVwbG95T3B0aW9uczogb3B0aW9uc1xuICAgIH0sIGNhbGxiYWNrKTtcbiAgfSk7XG4gIHJldHVybiBuZXcgRGVwbG95UmVzdWx0TG9jYXRvcih0aGlzLCByZXMpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQ2hlY2tzIHRoZSBzdGF0dXMgb2YgZGVjbGFyYXRpdmUgbWV0YWRhdGEgY2FsbCBkZXBsb3koKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZCAtIEFzeW5jIHByb2Nlc3MgaWQgcmV0dXJuZWQgZnJvbSBwcmV2aW91cyBkZXBsb3kgcmVxdWVzdFxuICogQHBhcmFtIHtCb29sZWFufSBbaW5jbHVkZURldGFpbHNdIC0gU2V0cyB0aGUgRGVwbG95UmVzdWx0IG9iamVjdCB0byBpbmNsdWRlIGRldGFpbHMgaW5mb3JtYXRpb24gKGRlZmF1bHQ6IGZhbHNlKVxuICogQHBhcmFtIHtDYWxsYmFjay48TWV0YWRhdGF+RGVwbG95UmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TWV0YWRhdGF+RGVwbG95UmVzdWx0Pn1cbiAqL1xuTWV0YWRhdGEucHJvdG90eXBlLmNoZWNrRGVwbG95U3RhdHVzID0gZnVuY3Rpb24oaWQsIGluY2x1ZGVEZXRhaWxzLCBjYWxsYmFjaykge1xuICBpZiAoXy5pc09iamVjdChpbmNsdWRlRGV0YWlscykgfHwgXy5pc0Jvb2xlYW4oaW5jbHVkZURldGFpbHMpKSB7XG4gICAgaW5jbHVkZURldGFpbHMgPSAhIWluY2x1ZGVEZXRhaWxzO1xuICB9IGVsc2Uge1xuICAgIGNhbGxiYWNrID0gaW5jbHVkZURldGFpbHM7XG4gICAgaW5jbHVkZURldGFpbHMgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gdGhpcy5faW52b2tlKFwiY2hlY2tEZXBsb3lTdGF0dXNcIiwge1xuICAgIGFzeW5jUHJvY2Vzc0lkOiBpZCxcbiAgICBpbmNsdWRlRGV0YWlscyA6IGluY2x1ZGVEZXRhaWxzXG4gIH0pLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgcmVzLmRvbmUgPSByZXMuZG9uZSA9PT0gJ3RydWUnO1xuICAgIHJlcy5zdWNjZXNzID0gcmVzLnN1Y2Nlc3MgPT09ICd0cnVlJztcbiAgICByZXMuY2hlY2tPbmx5ID0gcmVzLmNoZWNrT25seSA9PT0gJ3RydWUnO1xuICAgIGlmIChyZXMuaWdub3JlV2FybmluZ3MpIHtcbiAgICAgIHJlcy5pZ25vcmVXYXJuaW5ncyA9IHJlcy5pZ25vcmVXYXJuaW5ncyA9PT0gJ3RydWUnO1xuICAgIH1cbiAgICBpZiAocmVzLnJvbGxiYWNrT25FcnJvcikge1xuICAgICAgcmVzLnJvbGxiYWNrT25FcnJvciA9IHJlcy5yb2xsYmFja09uRXJyb3IgPT09ICd0cnVlJztcbiAgICB9XG4gICAgcmVzLm51bWJlckNvbXBvbmVudEVycm9ycyA9IE51bWJlcihyZXMubnVtYmVyQ29tcG9uZW50RXJyb3JzKTtcbiAgICByZXMubnVtYmVyQ29tcG9uZW50c0RlcGxveWVkID0gTnVtYmVyKHJlcy5udW1iZXJDb21wb25lbnRzRGVwbG95ZWQpO1xuICAgIHJlcy5udW1iZXJDb21wb25lbnRzVG90YWwgPSBOdW1iZXIocmVzLm51bWJlckNvbXBvbmVudHNUb3RhbCk7XG4gICAgcmVzLm51bWJlclRlc3RFcnJvcnMgPSBOdW1iZXIocmVzLm51bWJlclRlc3RFcnJvcnMpO1xuICAgIHJlcy5udW1iZXJUZXN0c0NvbXBsZXRlZCA9IE51bWJlcihyZXMubnVtYmVyVGVzdHNDb21wbGV0ZWQpO1xuICAgIHJlcy5udW1iZXJUZXN0c1RvdGFsID0gTnVtYmVyKHJlcy5udW1iZXJUZXN0c1RvdGFsKTtcblxuICAgIHJldHVybiByZXM7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWV0YWRhdGF+QXN5bmNSZXN1bHRcbiAqIEBwcm9wIHtCb29sZWFufSBkb25lIC0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGNhbGwgaGFzIGNvbXBsZXRlZCBvciBub3RcbiAqIEBwcm9wIHtTdHJpbmd9IGlkIC0gSUQgb2YgdGhlIGNvbXBvbmVudCBiZWluZyBjcmVhdGVkLCB1cGRhdGVkLCBkZWxldGVkLCBkZXBsb3llZCwgb3IgcmV0cmlldmVkXG4gKiBAcHJvcCB7U3RyaW5nfSBzdGF0ZSAtIFRoZSBzdGF0ZSBmb3VyIHBvc3NpYmxlIHZhbHVlczogUXVldWVkLCBJblByb2dyZXNzLCBDb21wbGV0ZWQsIGFuZCBFcnJvci5cbiAqIEBwcm9wIHtTdHJpbmd9IFtzdGF0dXNDb2RlXSAtIElmIGFuIGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgY3JlYXRlKCksIHVwZGF0ZSgpLCBvciBkZWxldGUoKSBjYWxsLCBhIHN0YXR1cyBjb2RlIGlzIHJldHVybmVkXG4gKiBAcHJvcCB7U3RyaW5nfSBbbWVzc2FnZV0gLSBNZXNzYWdlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0YXR1c0NvZGUgZmllbGQgcmV0dXJuZWRcbiAqL1xuXG4vKipcbiAqIFRoZSBsb2NhdG9yIGNsYXNzIGZvciBNZXRhZGF0YSBBUEkgYXN5bmNocm9ub3VzIGNhbGwgcmVzdWx0XG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzIE1ldGFkYXRhfkFzeW5jUmVzdWx0TG9jYXRvclxuICogQGV4dGVuZHMgZXZlbnRzLkV2ZW50RW1pdHRlclxuICogQGltcGxlbWVudHMgUHJvbWlzZS48TWV0YWRhdGF+QXN5bmNSZXN1bHR8QXJyYXkuPE1ldGFkYXRhfkFzeW5jUmVzdWx0Pj5cbiAqIEBwYXJhbSB7TWV0YWRhdGF9IG1ldGEgLSBNZXRhZGF0YSBBUEkgb2JqZWN0XG4gKiBAcGFyYW0ge1Byb21pc2UuPE1ldGFkYXRhfkFzeW5jUmVzdWx0fEFycmF5LjxNZXRhZGF0YX5Bc3luY1Jlc3VsdD4+fSByZXN1bHRzIC0gUHJvbWlzZSBvYmplY3QgZm9yIGFzeW5jIHJlc3VsdCBpbmZvXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtpc0FycmF5XSAtIEluZGljYXRlcyB3aGV0aGVyIHRoZSBhc3luYyByZXF1ZXN0IGlzIGdpdmVuIGluIGFycmF5IG9yIHNpbmdsZSBvYmplY3RcbiAqL1xudmFyIEFzeW5jUmVzdWx0TG9jYXRvciA9IGZ1bmN0aW9uKG1ldGEsIHJlc3VsdHMsIGlzQXJyYXkpIHtcbiAgdGhpcy5fbWV0YSA9IG1ldGE7XG4gIHRoaXMuX3Jlc3VsdHMgPSByZXN1bHRzO1xuICB0aGlzLl9pc0FycmF5ID0gaXNBcnJheTtcbn07XG5cbmluaGVyaXRzKEFzeW5jUmVzdWx0TG9jYXRvciwgZXZlbnRzLkV2ZW50RW1pdHRlcik7XG5cbi8qKlxuICogUHJvbWlzZS9BKyBpbnRlcmZhY2VcbiAqIGh0dHA6Ly9wcm9taXNlcy1hcGx1cy5naXRodWIuaW8vcHJvbWlzZXMtc3BlYy9cbiAqXG4gKiBEZWxlZ2F0ZSB0byBkZWZlcnJlZCBwcm9taXNlLCByZXR1cm4gcHJvbWlzZSBpbnN0YW5jZSBmb3IgYmF0Y2ggcmVzdWx0XG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YX5Bc3luY1Jlc3VsdExvY2F0b3IjdGhlblxuICovXG5Bc3luY1Jlc3VsdExvY2F0b3IucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbihvblJlc29sdmUsIG9uUmVqZWN0KSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcmV0dXJuIHRoaXMuX3Jlc3VsdHMudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgdmFyIGNvbnZlcnRUeXBlID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICBpZiAocmVzLiQgJiYgcmVzLiRbXCJ4c2k6bmlsXCJdID09PSAndHJ1ZScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXMuZG9uZSA9IHJlcy5kb25lID09PSAndHJ1ZSc7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gICAgcmVzdWx0cyA9IF8uaXNBcnJheShyZXN1bHRzKSA/IF8ubWFwKHJlc3VsdHMsIGNvbnZlcnRUeXBlKSA6IGNvbnZlcnRUeXBlKHJlc3VsdHMpO1xuICAgIGlmIChzZWxmLl9pc0FycmF5ICYmICFfLmlzQXJyYXkocmVzdWx0cykpIHtcbiAgICAgIHJlc3VsdHMgPSBbIHJlc3VsdHMgXTtcbiAgICB9XG4gICAgcmV0dXJuIG9uUmVzb2x2ZShyZXN1bHRzKTtcbiAgfSwgb25SZWplY3QpO1xufTtcblxuLyoqXG4gKiBQcm9taXNlL0ErIGV4dGVuc2lvblxuICogQ2FsbCBcInRoZW5cIiB1c2luZyBnaXZlbiBub2RlLXN0eWxlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YX5Bc3luY1Jlc3VsdExvY2F0b3IjdGhlbkNhbGxcbiAqL1xuQXN5bmNSZXN1bHRMb2NhdG9yLnByb3RvdHlwZS50aGVuQ2FsbCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiBfLmlzRnVuY3Rpb24oY2FsbGJhY2spID8gdGhpcy50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXMpO1xuICAgIH0pO1xuICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgfSkgOiB0aGlzO1xufTtcblxuLyoqXG4gKiBDaGVjayB0aGUgc3RhdHVzIG9mIGFzeW5jIHJlcXVlc3RcbiAqXG4gKiBAbWV0aG9kIE1ldGFkYXRhfkFzeW5jUmVzdWx0TG9jYXRvciNjaGVja1xuICogQHBhcmFtIHtDYWxsYmFjay48TWV0YWRhdGF+QXN5bmNSZXN1bHR8QXJyYXkuPE1ldGFkYXRhfkFzeW5jUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1ldGFkYXRhfkFzeW5jUmVzdWx0fEFycmF5LjxNZXRhZGF0YX5Bc3luY1Jlc3VsdD4+fVxuICovXG5Bc3luY1Jlc3VsdExvY2F0b3IucHJvdG90eXBlLmNoZWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgbWV0YSA9IHRoaXMuX21ldGE7XG4gIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykge1xuICAgIHZhciBpZHMgPSBfLmlzQXJyYXkocmVzdWx0cykgPyBfLm1hcChyZXN1bHRzLCBmdW5jdGlvbihyZXMpeyByZXR1cm4gcmVzLmlkOyB9KSA6IHJlc3VsdHMuaWQ7XG4gICAgc2VsZi5faWRzID0gaWRzO1xuICAgIHJldHVybiBtZXRhLmNoZWNrU3RhdHVzKGlkcyk7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogUG9sbGluZyB1bnRpbCBhc3luYyBjYWxsIHN0YXR1cyBiZWNvbWVzIGNvbXBsZXRlIG9yIGVycm9yXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YX5Bc3luY1Jlc3VsdExvY2F0b3IjcG9sbFxuICogQHBhcmFtIHtOdW1iZXJ9IGludGVydmFsIC0gUG9sbGluZyBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZHNcbiAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0IC0gUG9sbGluZyB0aW1lb3V0IGluIG1pbGxpc2Vjb25kc1xuICovXG5Bc3luY1Jlc3VsdExvY2F0b3IucHJvdG90eXBlLnBvbGwgPSBmdW5jdGlvbihpbnRlcnZhbCwgdGltZW91dCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgdmFyIHBvbGwgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgaWYgKHN0YXJ0VGltZSArIHRpbWVvdXQgPCBub3cpIHtcbiAgICAgIHZhciBlcnJNc2cgPSBcIlBvbGxpbmcgdGltZSBvdXQuXCI7XG4gICAgICBpZiAoc2VsZi5faWRzKSB7XG4gICAgICAgIGVyck1zZyArPSBcIiBQcm9jZXNzIElkID0gXCIgKyBzZWxmLl9pZHM7XG4gICAgICB9XG4gICAgICBzZWxmLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKGVyck1zZykpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLmNoZWNrKCkudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7XG4gICAgICB2YXIgZG9uZSA9IHRydWU7XG4gICAgICB2YXIgcmVzdWx0QXJyID0gXy5pc0FycmF5KHJlc3VsdHMpID8gcmVzdWx0cyA6IFsgcmVzdWx0cyBdO1xuICAgICAgZm9yICh2YXIgaT0wLCBsZW49cmVzdWx0QXJyLmxlbmd0aDsgaTxsZW47IGkrKykge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVzdWx0QXJyW2ldO1xuICAgICAgICBpZiAocmVzdWx0ICYmICFyZXN1bHQuZG9uZSkge1xuICAgICAgICAgIHNlbGYuZW1pdCgncHJvZ3Jlc3MnLCByZXN1bHQpO1xuICAgICAgICAgIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgc2VsZi5lbWl0KCdjb21wbGV0ZScsIHJlc3VsdHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGltZW91dChwb2xsLCBpbnRlcnZhbCk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICB9KTtcbiAgfTtcbiAgc2V0VGltZW91dChwb2xsLCBpbnRlcnZhbCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGFuZCB3YWl0IHVudGlsIHRoZSBhc3luYyByZXF1ZXN0cyBiZWNvbWUgaW4gY29tcGxldGVkIHN0YXR1c1xuICpcbiAqIEBtZXRob2QgTWV0YWRhdGF+QXN5bmNSZXN1bHRMb2NhdG9yI2NvbXBsZXRlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5Bc3luY1Jlc3VsdHxBcnJheS48TWV0YWRhdGF+QXN5bmNSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TWV0YWRhdGF+QXN5bmNSZXN1bHR8QXJyYXkuPE1ldGFkYXRhfkFzeW5jUmVzdWx0Pj59XG4gKi9cbkFzeW5jUmVzdWx0TG9jYXRvci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgZGVmZXJyZWQgPSBQcm9taXNlLmRlZmVyKCk7XG4gIHRoaXMub24oJ2NvbXBsZXRlJywgZnVuY3Rpb24ocmVzdWx0cykge1xuICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cyk7XG4gIH0pO1xuICB0aGlzLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGVycikge1xuICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xuICB9KTtcbiAgdmFyIG1ldGEgPSB0aGlzLl9tZXRhO1xuICB0aGlzLnBvbGwobWV0YS5wb2xsSW50ZXJ2YWwsIG1ldGEucG9sbFRpbWVvdXQpO1xuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qKlxuICogVGhlIGxvY2F0b3IgY2xhc3MgdG8gdHJhY2sgcmV0cmVpdmUoKSBNZXRhZGF0YSBBUEkgY2FsbCByZXN1bHRcbiAqXG4gKiBAcHJvdGVjdGVkXG4gKiBAY2xhc3MgTWV0YWRhdGF+UmV0cmlldmVSZXN1bHRMb2NhdG9yXG4gKiBAZXh0ZW5kcyBNZXRhZGF0YX5Bc3luY1Jlc3VsdExvY2F0b3JcbiAqIEBwYXJhbSB7TWV0YWRhdGF9IG1ldGEgLSBNZXRhZGF0YSBBUEkgb2JqZWN0XG4gKiBAcGFyYW0ge1Byb21pc2UuPE1ldGFkYXRhfkFzeW5jUmVzdWx0Pn0gcmVzdWx0IC0gUHJvbWlzZSBvYmplY3QgZm9yIGFzeW5jIHJlc3VsdCBvZiByZXRyaWV2ZSBjYWxsKClcbiAqL1xudmFyIFJldHJpZXZlUmVzdWx0TG9jYXRvciA9IGZ1bmN0aW9uKG1ldGEsIHJlc3VsdCkge1xuICBSZXRyaWV2ZVJlc3VsdExvY2F0b3Iuc3VwZXJfLmNhbGwodGhpcywgbWV0YSwgcmVzdWx0KTtcbn07XG5cbmluaGVyaXRzKFJldHJpZXZlUmVzdWx0TG9jYXRvciwgQXN5bmNSZXN1bHRMb2NhdG9yKTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNZXRhZGF0YX5SZXRyaWV2ZVJlc3VsdFxuICogQHByb3Age0FycmF5LjxNZXRhZGF0YX5GaWxlUHJvcGVydGllcz59IGZpbGVQcm9wZXJ0aWVzIC0gQ29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBjb21wb25lbnQgaW4gdGhlIC56aXAgZmlsZSwgYW5kIHRoZSBtYW5pZmVzdCBmaWxlIHBhY2thZ2UueG1sXG4gKiBAcHJvcCB7U3RyaW5nfSBpZCAtIElEIG9mIHRoZSBjb21wb25lbnQgYmVpbmcgcmV0cmlldmVkXG4gKiBAcHJvcCB7QXJyYXkuPE9iamVjdD59IG1lc3NhZ2VzIC0gQ29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBvZiB0aGUgcmV0cmlldmUoKSBjYWxsXG4gKiBAcHJvcCB7U3RyaW5nfSB6aXBGaWxlIC0gVGhlIHppcCBmaWxlIHJldHVybmVkIGJ5IHRoZSByZXRyaWV2ZSByZXF1ZXN0LiBCYXNlIDY0LWVuY29kZWQgYmluYXJ5IGRhdGFcbiAqL1xuXG4vKipcbiAqIENoZWNrIGFuZCB3YWl0IHVudGlsIHRoZSBhc3luYyByZXF1ZXN0IGJlY29tZXMgaW4gY29tcGxldGVkIHN0YXR1cyxcbiAqIGFuZCByZXRyaWV2ZSB0aGUgcmVzdWx0IGRhdGEuXG4gKlxuICogQG1lbXRob2QgTWV0YWRhdGF+UmV0cmlldmVSZXN1bHRMb2NhdG9yI2NvbXBsZXRlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNZXRhZGF0YX5SZXRyaWV2ZVJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1ldGFkYXRhflJldHJpZXZlUmVzdWx0Pn1cbiAqL1xuUmV0cmlldmVSZXN1bHRMb2NhdG9yLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBtZXRhID0gdGhpcy5fbWV0YTtcbiAgcmV0dXJuIFJldHJpZXZlUmVzdWx0TG9jYXRvci5zdXBlcl8ucHJvdG90eXBlLmNvbXBsZXRlLmNhbGwodGhpcykudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICByZXR1cm4gbWV0YS5jaGVja1JldHJpZXZlU3RhdHVzKHJlc3VsdC5pZCk7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSByZXRyaWV2ZWQgcmVzdWx0IHRvIE5vZGUuanMgcmVhZGFibGUgc3RyZWFtXG4gKlxuICogQG1ldGhvZCBNZXRhZGF0YX5SZXRyaWV2ZVJlc3VsdExvY2F0b3Ijc3RyZWFtXG4gKiBAcmV0dXJucyB7c3RyZWFtLlJlYWRhYmxlfVxuICovXG5SZXRyaWV2ZVJlc3VsdExvY2F0b3IucHJvdG90eXBlLnN0cmVhbSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciByZXN1bHRTdHJlYW0gPSBuZXcgc3RyZWFtLlJlYWRhYmxlKCk7XG4gIHZhciByZWFkaW5nID0gZmFsc2U7XG4gIHJlc3VsdFN0cmVhbS5fcmVhZCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChyZWFkaW5nKSB7IHJldHVybjsgfVxuICAgIHJlYWRpbmcgPSB0cnVlO1xuICAgIHNlbGYuY29tcGxldGUoZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzdWx0U3RyZWFtLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFN0cmVhbS5wdXNoKG5ldyBCdWZmZXIocmVzdWx0LnppcEZpbGUsICdiYXNlNjQnKSk7XG4gICAgICAgIHJlc3VsdFN0cmVhbS5wdXNoKG51bGwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICByZXR1cm4gcmVzdWx0U3RyZWFtO1xufTtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKipcbiAqIFRoZSBsb2NhdG9yIGNsYXNzIHRvIHRyYWNrIGRlcGxveSgpIE1ldGFkYXRhIEFQSSBjYWxsIHJlc3VsdFxuICpcbiAqIEBwcm90ZWN0ZWRcbiAqIEBjbGFzcyBNZXRhZGF0YX5EZXBsb3lSZXN1bHRMb2NhdG9yXG4gKiBAZXh0ZW5kcyBNZXRhZGF0YX5Bc3luY1Jlc3VsdExvY2F0b3JcbiAqIEBwYXJhbSB7TWV0YWRhdGF9IG1ldGEgLSBNZXRhZGF0YSBBUEkgb2JqZWN0XG4gKiBAcGFyYW0ge1Byb21pc2UuPE1ldGFkYXRhfkFzeW5jUmVzdWx0Pn0gcmVzdWx0IC0gUHJvbWlzZSBvYmplY3QgZm9yIGFzeW5jIHJlc3VsdCBvZiBkZXBsb3koKSBjYWxsXG4gKi9cbnZhciBEZXBsb3lSZXN1bHRMb2NhdG9yID0gZnVuY3Rpb24obWV0YSwgcmVzdWx0KSB7XG4gIERlcGxveVJlc3VsdExvY2F0b3Iuc3VwZXJfLmNhbGwodGhpcywgbWV0YSwgcmVzdWx0KTtcbn07XG5cbmluaGVyaXRzKERlcGxveVJlc3VsdExvY2F0b3IsIEFzeW5jUmVzdWx0TG9jYXRvcik7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWV0YWRhdGF+RGVwbG95UmVzdWx0XG4gKiBAcHJvcCB7U3RyaW5nfSBpZCAtIElEIG9mIHRoZSBjb21wb25lbnQgYmVpbmcgZGVwbG95ZWRcbiAqIEBwcm9wIHtCb29sZWFufSBjaGVja09ubHkgLSBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIGRlcGxveW1lbnQgaXMgYmVpbmcgdXNlZCB0byBjaGVjayB0aGUgdmFsaWRpdHkgb2YgdGhlIGRlcGxveWVkIGZpbGVzIHdpdGhvdXQgbWFraW5nIGFueSBjaGFuZ2VzIGluIHRoZSBvcmdhbml6YXRpb24gb3Igbm90XG4gKiBAcHJvcCB7U3RyaW5nfSBjb21wbGV0ZWREYXRlIC0gVGltZXN0YW1wIGZvciB3aGVuIHRoZSBkZXBsb3ltZW50IHByb2Nlc3MgZW5kZWRcbiAqIEBwcm9wIHtTdHJpbmd9IGNyZWF0ZWREYXRlIC0gVGltZXN0YW1wIGZvciB3aGVuIHRoZSBkZXBsb3koKSBjYWxsIHdhcyByZWNlaXZlZFxuICogQHByb3Age0FycmF5LjxPYmplY3Q+fSBbZGV0YWlsc10gLSBQcm92aWRlcyB0aGUgZGV0YWlscyBvZiBhIGRlcGxveW1lbnQgdGhhdCBpcyBpbi1wcm9ncmVzcyBvciBlbmRlZCwgaWYgaW5jbHVkZURldGFpbHMgaXMgc2V0IHRvIHRydWUgaW4gY2hlY2tEZXBsb3lTdGF0dXMoKSBjYWxsXG4gKiBAcHJvcCB7Qm9vbGVhbn0gZG9uZSAtIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzZXJ2ZXIgZmluaXNoZWQgcHJvY2Vzc2luZyB0aGUgZGVwbG95KCkgY2FsbCBmb3IgdGhlIHNwZWNpZmllZCBpZFxuICogQHByb3Age1N0cmluZ30gW2Vycm9yTWVzc2FnZV0gLSBNZXNzYWdlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHZhbHVlcyBpbiB0aGUgZXJyb3JTdGF0dXNDb2RlIGZpZWxkXG4gKiBAcHJvcCB7U3RyaW5nfSBbZXJyb3JTdGF0dXNDb2RlXSAtIElmIGFuIGVycm9yIG9jY3VycmVkIGR1cmluZyB0aGUgZGVwbG95KCkgY2FsbCwgYSBzdGF0dXMgY29kZSBpcyByZXR1cm5lZCwgYW5kIHRoZSBtZXNzYWdlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0YXR1cyBjb2RlIGlzIHJldHVybmVkIGluIHRoZSBlcnJvck1lc3NhZ2VmaWVsZFxuICogQHByb3Age0Jvb2xlYW59IFtpZ25vcmVXYXJuaW5nc10gLSBTcGVjaWZpZXMgd2hldGhlciBhIGRlcGxveW1lbnQgc2hvdWxkIGNvbnRpbnVlIGV2ZW4gaWYgdGhlIGRlcGxveW1lbnQgZ2VuZXJhdGVzIHdhcm5pbmdzXG4gKiBAcHJvcCB7U3RyaW5nfSBsYXN0TW9kaWZpZWREYXRlIC0gVGltZXN0YW1wIG9mIHRoZSBsYXN0IHVwZGF0ZSBmb3IgdGhlIGRlcGxveW1lbnQgcHJvY2Vzc1xuICogQHByb3Age051bWJlcn0gbnVtYmVyQ29tcG9uZW50RXJyb3JzIC0gVGhlIG51bWJlciBvZiBjb21wb25lbnRzIHRoYXQgZ2VuZXJhdGVkIGVycm9ycyBkdXJpbmcgdGhpcyBkZXBsb3ltZW50XG4gKiBAcHJvcCB7TnVtYmVyfSBudW1iZXJDb21wb25lbnRzRGVwbG95ZWQgLSBUaGUgbnVtYmVyIG9mIGNvbXBvbmVudHMgZGVwbG95ZWQgaW4gdGhlIGRlcGxveW1lbnQgcHJvY2Vzc1xuICogQHByb3Age051bWJlcn0gbnVtYmVyQ29tcG9uZW50c1RvdGFsIC0gVGhlIHRvdGFsIG51bWJlciBvZiBjb21wb25lbnRzIGluIHRoZSBkZXBsb3ltZW50XG4gKiBAcHJvcCB7TnVtYmVyfSBudW1iZXJUZXN0RXJyb3JzIC0gVGhlIG51bWJlciBvZiBBcGV4IHRlc3RzIHRoYXQgaGF2ZSBnZW5lcmF0ZWQgZXJyb3JzIGR1cmluZyB0aGlzIGRlcGxveW1lbnRcbiAqIEBwcm9wIHtOdW1iZXJ9IG51bWJlclRlc3RzQ29tcGxldGVkIC0gVGhlIG51bWJlciBvZiBjb21wbGV0ZWRBcGV4IHRlc3RzIGZvciB0aGlzIGRlcGxveW1lbnRcbiAqIEBwcm9wIHtOdW1iZXJ9IG51bWJlclRlc3RzVG90YWwgLSBUaGUgdG90YWwgbnVtYmVyIG9mIEFwZXggdGVzdHMgZm9yIHRoaXMgZGVwbG95bWVudFxuICogQHByb3Age0Jvb2xlYW59IFtyb2xsYmFja09uRXJyb3JdIC0gSW5kaWNhdGVzIHdoZXRoZXIgYW55IGZhaWx1cmUgY2F1c2VzIGEgY29tcGxldGUgcm9sbGJhY2sgb3Igbm90LiBEZWZhdWx0IGlzIHRydWUuXG4gKiBAcHJvcCB7U3RyaW5nfSBzdGFydERhdGUgLSBUaW1lc3RhbXAgZm9yIHdoZW4gdGhlIGRlcGxveW1lbnQgcHJvY2VzcyBiZWdhblxuICogQHByb3Age1N0cmluZ30gc3RhdHVzIC0gSW5kaWNhdGVzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkZXBsb3ltZW50XG4gKiBAcHJvcCB7Qm9vbGVhbn0gc3VjY2VzcyAtIEluZGljYXRlcyB3aGV0aGVyIHRoZSBkZXBsb3ltZW50IHdhcyBzdWNjZXNzZnVsIG9yIG5vdFxuICovXG5cbi8qKlxuICogQ2hlY2sgYW5kIHdhaXQgdW50aWwgdGhlIGFzeW5jIHJlcXVlc3QgYmVjb21lcyBpbiBjb21wbGV0ZWQgc3RhdHVzLFxuICogYW5kIHJldHJpZXZlIHRoZSByZXN1bHQgZGF0YS5cbiAqXG4gKiBAbWV0aG9kIE1ldGFkYXRhfkRlcGxveVJlc3VsdExvY2F0b3IjY29tcGxldGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE1ldGFkYXRhfkRlcGxveVJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1ldGFkYXRhfkRlcGxveVJlc3VsdD59XG4gKi9cbkRlcGxveVJlc3VsdExvY2F0b3IucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24oaW5jbHVkZURldGFpbHMsIGNhbGxiYWNrKSB7XG4gIGlmIChfLmlzRnVuY3Rpb24oaW5jbHVkZURldGFpbHMpKSB7XG4gICAgY2FsbGJhY2sgPSBpbmNsdWRlRGV0YWlscztcbiAgICBpbmNsdWRlRGV0YWlscyA9IGZhbHNlO1xuICB9XG4gIHZhciBtZXRhID0gdGhpcy5fbWV0YTtcbiAgcmV0dXJuIERlcGxveVJlc3VsdExvY2F0b3Iuc3VwZXJfLnByb3RvdHlwZS5jb21wbGV0ZS5jYWxsKHRoaXMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgcmV0dXJuIG1ldGEuY2hlY2tEZXBsb3lTdGF0dXMocmVzdWx0LmlkLCBpbmNsdWRlRGV0YWlscyk7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlxuICogUmVnaXN0ZXIgaG9vayBpbiBjb25uZWN0aW9uIGluc3RhbnRpYXRpb24gZm9yIGR5bmFtaWNhbGx5IGFkZGluZyB0aGlzIEFQSSBtb2R1bGUgZmVhdHVyZXNcbiAqL1xuanNmb3JjZS5vbignY29ubmVjdGlvbjpuZXcnLCBmdW5jdGlvbihjb25uKSB7XG4gIGNvbm4ubWV0YWRhdGEgPSBuZXcgTWV0YWRhdGEoY29ubik7XG59KTtcbiIsIi8qKlxuICogQGZpbGUgU2FsZXNmb3JjZSBTT0FQIEFQSVxuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyk7XG52YXIganNmb3JjZSA9IHJlcXVpcmUoJy4uL2NvcmUnKTtcbnZhciBTT0FQID0gcmVxdWlyZSgnLi4vc29hcCcpO1xuXG4vKipcbiAqIEFQSSBjbGFzcyBmb3IgUGFydG5lciBTT0FQIGNhbGxcbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7Q29ubmVjdGlvbn0gY29ubiAtIENvbm5lY3Rpb25cbiAqL1xudmFyIFNvYXBBcGkgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNvbm4pIHtcbiAgdGhpcy5fY29ubiA9IGNvbm47XG59O1xuXG4vKipcbiAqIENhbGwgU09BUCBBcGkgKFBhcnRuZXIpIGVuZHBvaW50XG4gKiBAcHJpdmF0ZVxuICovXG5Tb2FwQXBpLnByb3RvdHlwZS5faW52b2tlID0gZnVuY3Rpb24obWV0aG9kLCBtZXNzYWdlLCBzY2hlbWEsIGNhbGxiYWNrKSB7XG4gIHZhciBzb2FwRW5kcG9pbnQgPSBuZXcgU09BUCh0aGlzLl9jb25uLCB7XG4gICAgeG1sbnM6IFwidXJuOnBhcnRuZXIuc29hcC5zZm9yY2UuY29tXCIsXG4gICAgZW5kcG9pbnRVcmw6IHRoaXMuX2Nvbm4uaW5zdGFuY2VVcmwgKyBcIi9zZXJ2aWNlcy9Tb2FwL3UvXCIgKyB0aGlzLl9jb25uLnZlcnNpb25cbiAgfSk7XG4gIHJldHVybiBzb2FwRW5kcG9pbnQuaW52b2tlKG1ldGhvZCwgbWVzc2FnZSwgeyByZXN1bHQ6IHNjaGVtYSB9KS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIHJldHVybiByZXMucmVzdWx0O1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG5cbi8qICovXG52YXIgU2NoZW1hcyA9IHt9O1xuXG4vKipcbiAqIEB0eXBlZGVmIFNvYXBBcGl+TGVhZENvbnZlcnRcbiAqIEBwcm9wIHtTdHJpbmd9IGNvbnZlcnRlZFN0YXR1cyAtIFN0YXR1cyBvZiBjb252ZXJ0ZWQgbGVhZFxuICogQHByb3Age1N0cmluZ30gbGVhZElkIC0gTGVhZCByZWNvcmQgSWQgdG8gY29udmVydFxuICogQHByb3Age1N0cmluZ30gW2FjY291bnRJZF0gLSBBY2NvdW50IHJlY29yZCBJZCB0byBhc3NpZ24gdGhlIGNvbnZlcnRlZCByZWNvcmRcbiAqIEBwcm9wIHtTdHJpbmd9IFtjb250YWN0SWRdIC0gQ29udGFjdCByZWNvcmQgSWQgdG8gYXNzaWduIHRoZSBjb252ZXJ0ZWQgcmVjb3JkXG4gKiBAcHJvcCB7Qm9vbGVhbn0gW2RvTm90Q3JlYXRlT3Bwb3J0dW5pdHldIC0gVHJ1ZSBpZiB5b3UgZG9uJ3Qgd2FudCB0byBjcmVhdGUgYSBuZXcgb3Bwb3J0dW5pdHlcbiAqIEBwcm9wIHtTdHJpbmd9IFtvcHBvcnR1bml0eU5hbWVdIC0gTmFtZSBvZiBvcHBvcnR1bml0eSB0byBjcmVhdGVcbiAqIEBwcm9wIHtCb29sZWFufSBbb3ZlcndyaXRlTGVhZFNvdXJjZV0gLSBUcnVlIGlmIG92ZXJ3cml0aW5nIGxlYWQgc291cmNlXG4gKiBAcHJvcCB7U3RyaW5nfSBbb3duZXJJZF0gLSBPd25lciBJZFxuICogQHByb3Age0Jvb2xlYW59IFtzZW5kTm90aWZpY2F0aW9uRW1haWxdIC0gVHJ1ZSBpZiBzZW5kIG5vdGlmaWNhdGlvbiBlbWFpbFxuICovXG4vKipcbiAqIEB0eXBlZGVmIFNvYXBBcGl+TGVhZENvbnZlcnRSZXN1bHRcbiAqIEBwcm9wIHtTdHJpbmd9IGxlYWRJZCAtIExlYWQgcmVjb3JkIElkIHRvIGNvbnZlcnRcbiAqIEBwcm9wIHtTdHJpbmd9IFthY2NvdW50SWRdIC0gQWNjb3VudCByZWNvcmQgSWQgb2YgY29udmVydGVkIGxlYWRcbiAqIEBwcm9wIHtTdHJpbmd9IFtjb250YWN0SWRdIC0gQ29udGFjdCByZWNvcmQgSWQgb2YgY29udmVydGVkIGxlYWRcbiAqIEBwcm9wIHtTdHJpbmd9IFtvcHBvcnR1bml0eUlkXSAtIE9wcG9ydHVuaXR5IHJlY29yZCBJZCBjcmVhdGVkIGluIGNvbnZlcnNpb25cbiAqIEBwcm9wIHtCb29sZWFufSBzdWNjZXNzIC0gVHJ1ZSBpZiBzdWNjZXNzZnVsbHkgY29udmVydGVkXG4gKiBAcHJvcCB7QXJyYXkuPE9iamVjdD59IGVycm9ycyAtIEVycm9yXG4gKi9cbi8qKlxuICogQ29udmVydHMgYSBMZWFkIGludG8gYW4gQWNjb3VudCwgQ29udGFjdCwgb3IgKG9wdGlvbmFsbHkpIGFuIE9wcG9ydHVuaXR5LlxuICpcbiAqIEBwYXJhbSB7U29hcEFwaX5MZWFkQ29udmVydHxBcnJheS48U29hcEFwaX5MZWFkQ29udmVydD59IGxlYWRDb252ZXJ0c1xuICogQHBhcmFtIHtDYWxsYmFjay48U29hcEFwaX5MZWFkQ29udmVydFJlc3VsdHxBcnJheS48U29hcEFwaX5MZWFkQ29udmVydFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxTb2FwQXBpfkxlYWRDb252ZXJ0UmVzdWx0fEFycmF5LjxTb2FwQXBpfkxlYWRDb252ZXJ0UmVzdWx0Pj59XG4gKi9cblNvYXBBcGkucHJvdG90eXBlLmNvbnZlcnRMZWFkID0gZnVuY3Rpb24obGVhZENvbnZlcnRzLCBjYWxsYmFjaykge1xuICB2YXIgc2NoZW1hID0gXy5pc0FycmF5KGxlYWRDb252ZXJ0cykgPyBbIFNjaGVtYXMuTGVhZENvbnZlcnRSZXN1bHQgXSA6IFNjaGVtYXMuTGVhZENvbnZlcnRSZXN1bHQ7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJjb252ZXJ0TGVhZFwiLCB7IGxlYWRDb252ZXJ0czogbGVhZENvbnZlcnRzIH0sIHNjaGVtYSwgY2FsbGJhY2spO1xufTtcblNjaGVtYXMuTGVhZENvbnZlcnRSZXN1bHQgPSB7XG4gIHN1Y2Nlc3M6ICdib29sZWFuJyxcbiAgZXJyb3JzOiBbXSxcbiAgbGVhZElkOiAnc3RyaW5nJyxcbiAgYWNjb3VudElkOiAnc3RyaW5nJyxcbiAgY29udGFjdElkOiAnc3RyaW5nJyxcbiAgb3Bwb3J0dW5pdHlJZDogJ3N0cmluZydcbn07XG5cbi8qKlxuICogQHR5cGVkZWYgU29hcEFwaX5NZXJnZVJlcXVlc3RcbiAqIEBwcm9wIHtPYmplY3R9IG1hc3RlclJlY29yZCAtIFRoZSBtZXJnZSBkZXN0aW5hdGlvbiByZWNvcmRcbiAqIEBwcm9wIHtBcnJheS48U3RyaW5nPn0gcmVjb3JkVG9NZXJnZUlkcyAtIElkcyBvZiByZWNvcmRzIHRvIG1lcmdlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYgU29hcEFwaX5NZXJnZVJlc3VsdFxuICogQHByb3Age0Jvb2xlYW59IHN1Y2Nlc3MgLSBUcnVlIGlmIHN1Y2Nlc3NmdWxseSBtZXJnZWRcbiAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gZXJyb3JzIC0gRXJyb3JcbiAqIEBwcm9wIHtTdHJpbmd9IGlkIC0gSUQgb2YgdGhlIG1hc3RlciByZWNvcmRcbiAqIEBwcm9wIHtBcnJheS48U3RyaW5nPn0gbWVyZ2VkUmVjb3JkSWRzIC0gSUQgb2YgdGhlIHJlY29yZHMgdGhhdCB3ZXJlIG1lcmdlZCBpbnRvIHRoZSBtYXN0ZXIgcmVjb3JkXG4gKiBAcHJvcCB7QXJyYXkuPFN0cmluZz59IHVwZGF0ZWRSZWxhdGVkSWRzIC0gSUQgb2YgYWxsIHJlbGF0ZWQgcmVjb3JkcyB0aGF0IHdlcmUgbW92ZWQgKHJlLXBhcmVudGVkKSBhcyBhIHJlc3VsdCBvZiB0aGUgbWVyZ2VcbiAqL1xuXG4vKipcbiAqIE1lcmdlIHVwIHRvIHRocmVlIHJlY29yZHMgaW50byBvbmVcbiAqXG4gKiBAcGFyYW0ge1NvYXBBcGl+TWVyZ2VSZXF1ZXN0fEFycmF5LjxTb2FwQXBpfk1lcmdlUmVxdWVzdD59IG1lcmdlUmVxdWVzdHNcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFNvYXBBcGl+TWVyZ2VSZXN1bHR8QXJyYXkuPFNvYXBBcGl+TWVyZ2VSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48U29hcEFwaX5NZXJnZVJlc3VsdHxBcnJheS48U29hcEFwaX5NZXJnZVJlc3VsdD4+fVxuICovXG5Tb2FwQXBpLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uKG1lcmdlUmVxdWVzdHMsIGNhbGxiYWNrKSB7XG4gIHZhciBzY2hlbWEgPSBfLmlzQXJyYXkobWVyZ2VSZXF1ZXN0cykgPyBbIFNjaGVtYXMuTWVyZ2VSZXN1bHQgXSA6IFNjaGVtYXMuTWVyZ2VSZXN1bHQ7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJtZXJnZVwiLCB7IG1lcmdlUmVxdWVzdHM6IG1lcmdlUmVxdWVzdHMgfSwgc2NoZW1hLCBjYWxsYmFjayk7XG59O1xuU2NoZW1hcy5NZXJnZVJlc3VsdCA9IHtcbiAgc3VjY2VzczogJ2Jvb2xlYW4nLFxuICBlcnJvcnM6IFtdLFxuICBpZDogJ3N0cmluZycsXG4gIG1lcmdlZFJlY29yZElkczogWydzdHJpbmcnXSxcbiAgdXBkYXRlZFJlbGF0ZWRJZHM6IFsnc3RyaW5nJ11cbn07XG5cblxuLyoqXG4gKiBAdHlwZWRlZiBTb2FwQXBpfkVtcHR5UmVjeWNsZUJpblJlc3VsdFxuICogQHByb3Age1N0cmluZ30gaWQgLSBJRCBvZiBhbiBzT2JqZWN0IHRoYXQgeW91IGF0dGVtcHRlZCB0byBkZWxldGUgZnJvbSB0aGUgUmVjeWNsZSBCaW5cbiAqIEBwcm9wIHtCb29sZWFufSBzdWNjZXNzIC0gV2hldGhlciB0aGUgY2FsbCBzdWNjZWVkZWQgKHRydWUpIG9yIG5vdCAoZmFsc2UpIGZvciB0aGlzIHJlY29yZFxuICogQHByb3Age0FycmF5LjxPYmplY3Q+fSBlcnJvcnMgLSBFcnJvcnNcbiAqL1xuLyoqXG4gKiBEZWxldGUgcmVjb3JkcyBmcm9tIHRoZSByZWN5Y2xlIGJpbiBpbW1lZGlhdGVseVxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPFN0cmluZz59IGlkcyAtIFJlY29yZCBpZHMgdG8gZW1wdHkgZnJvbSByZWN5Y2xlIGJpblxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPFNvYXBBcGl+RW1wdHlSZWN5Y2xlQmluUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFycmF5LjxTb2FwQXBpfkVtcHR5UmVjeWNsZUJpblJlc3VsdD4+fVxuICovXG5Tb2FwQXBpLnByb3RvdHlwZS5lbXB0eVJlY3ljbGVCaW4gPSBmdW5jdGlvbihpZHMsIGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJlbXB0eVJlY3ljbGVCaW5cIiwgeyBpZHM6IGlkcyB9LCBbIFNjaGVtYXMuRW1wdHlSZWN5Y2xlQmluUmVzdWx0IF0sIGNhbGxiYWNrKTtcbn07XG5TY2hlbWFzLkVtcHR5UmVjeWNsZUJpblJlc3VsdCA9IHtcbiAgaWQ6ICdzdHJpbmcnLFxuICBzdWNjZXNzOiAnYm9vbGVhbicsXG4gIGVycm9yczogW11cbn07XG5cblxuLyoqXG4gKiBAdHlwZWRlZiBTb2FwQXBpfkRlc2NyaWJlVGFiU2V0UmVzdWx0XG4gKiBAcHJvcCB7U3RyaW5nfSBsYWJlbCAtIFRoZSBkaXNwbGF5IGxhYmVsIGZvciB0aGlzIHN0YW5kYXJkIG9yIGN1c3RvbSBhcHBcbiAqIEBwcm9wIHtTdHJpbmd9IGxvZ29VcmwgLSBBIGZ1bGx5IHF1YWxpZmllZCBVUkwgdG8gdGhlIGxvZ28gaW1hZ2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBzdGFuZGFyZCBvciBjdXN0b20gYXBwXG4gKiBAcHJvcCB7U3RyaW5nfSBuYW1lc3BhY2UgLSBOYW1lc3BhY2Ugb2YgYXBwbGljYXRpb24gcGFja2FnZVxuICogQHByb3Age0Jvb2xlYW59IHNlbGVjdGVkIC0gSWYgdHJ1ZSwgdGhlbiB0aGlzIHN0YW5kYXJkIG9yIGN1c3RvbSBhcHAgaXMgdGhlIHVzZXLigJlzIGN1cnJlbnRseSBzZWxlY3RlZCBhcHBcbiAqIEBwcm9wIHtBcnJheS48U29hcEFwaX5EZXNjcmliZVRhYj59IHRhYnMgLSBBbiBhcnJheSBvZiB0YWJzIHRoYXQgYXJlIGRpc3BsYXllZCBmb3IgdGhlIHNwZWNpZmllZCBzdGFuZGFyZCBhcHAgb3IgY3VzdG9tIGFwcFxuICovXG4vKipcbiAqIEB0eXBlZGVmIFNvYXBBcGl+RGVzY3JpYmVUYWJcbiAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gY29sb3JzIC0gQXJyYXkgb2YgY29sb3IgaW5mb3JtYXRpb24gdXNlZCBmb3IgYSB0YWJcbiAqIEBwcm9wIHtCb29sZWFufSBjdXN0b20gLSB0cnVlIGlmIHRoaXMgaXMgYSBjdXN0b20gdGFiXG4gKiBAcHJvcCB7U3RyaW5nfSBpY29uVXJsIC0gVGhlIFVSTCBmb3IgdGhlIG1haW4gMzIgeCAzMiBwaXhlbCBpY29uIGZvciBhIHRhYlxuICogQHByb3Age0FycmF5LjxPYmplY3Q+fSBpY29ucyAtIEFycmF5IG9mIGljb24gaW5mb3JtYXRpb24gdXNlZCBmb3IgYSB0YWJcbiAqIEBwcm9wIHtTdHJpbmd9IGxhYmVsIC0gVGhlIGRpc3BsYXkgbGFiZWwgZm9yIHRoaXMgdGFiXG4gKiBAcHJvcCB7U3RyaW5nfSBtaW5pSWNvblVybCAtIFRoZSBVUkwgZm9yIHRoZSAxNiB4IDE2IHBpeGVsIGljb24gdGhhdCByZXByZXNlbnRzIGEgdGFiXG4gKiBAcHJvcCB7U3RyaW5nfSBuYW1lIC0gVGhlIEFQSSBuYW1lIG9mIHRoZSB0YWJcbiAqIEBwcm9wIHtTdHJpbmd9IHNvYmplY3ROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHNPYmplY3QgdGhhdCBpcyBwcmltYXJpbHkgZGlzcGxheWVkIG9uIHRoaXMgdGFiXG4gKiBAcHJvcCB7U3RyaW5nfSB1cmwgLSBBIGZ1bGx5IHF1YWxpZmllZCBVUkwgZm9yIHZpZXdpbmcgdGhpcyB0YWJcbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzdGFuZGFyZCBhbmQgY3VzdG9tIGFwcHMgYXZhaWxhYmxlIHRvIHRoZSBsb2dnZWQtaW4gdXNlclxuICpcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxTb2FwQXBpfkRlc2NyaWJlVGFiU2V0UmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFycmF5LjxTb2FwQXBpfkRlc2NyaWJlVGFiU2V0UmVzdWx0Pj59XG4gKi9cblNvYXBBcGkucHJvdG90eXBlLmRlc2NyaWJlVGFicyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJkZXNjcmliZVRhYnNcIiwge30sIFsgU2NoZW1hcy5EZXNjcmliZVRhYlNldFJlc3VsdCBdLCBjYWxsYmFjayk7XG59O1xuU2NoZW1hcy5EZXNjcmliZVRhYlNldFJlc3VsdCA9IHtcbiAgbGFiZWw6ICdzdHJpbmcnLFxuICBsb2dvVXJsOiAnc3RyaW5nJyxcbiAgbmFtZXNwYWNlOiAnc3RyaW5nJyxcbiAgc2VsZWN0ZWQ6ICdib29sZWFuJyxcbiAgdGFiczogW3tcbiAgICBjb2xvcnM6IFt7XG4gICAgICB0aGVtZTogJ3N0cmluZycsXG4gICAgICBjb2xvcjogJ3N0cmluZycsXG4gICAgICBjb250ZXh0OiAnc3RyaW5nJ1xuICAgIH1dLFxuICAgIGljb25Vcmw6ICdzdHJpbmcnLFxuICAgIGljb25zOiBbe1xuICAgICAgdGhlbWU6ICdzdHJpbmcnLFxuICAgICAgaGVpZ2h0OiAnbnVtYmVyJyxcbiAgICAgIHdpZHRoOiAnbnVtYmVyJyxcbiAgICAgIHVybDogJ3N0cmluZycsXG4gICAgICBjb250ZW50VHlwZTogJ3N0cmluZydcbiAgICB9XSxcbiAgICBsYWJlbDogJ3N0cmluZycsXG4gICAgY3VzdG9tOiAnYm9vbGVhbicsXG4gICAgbWluaUljb25Vcmw6ICdzdHJpbmcnLFxuICAgIG5hbWU6ICdzdHJpbmcnLFxuICAgIHNvYmplY3ROYW1lOiAnc3RyaW5nJyxcbiAgICB1cmw6ICdzdHJpbmcnXG4gIH1dXG59O1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgY3VycmVudCBzeXN0ZW0gdGltZXN0YW1wIChDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZSAoVVRDKSB0aW1lIHpvbmUpIGZyb20gdGhlIEFQSVxuICpcbiAqIEB0eXBlZGVmIFNvYXBBcGl+U2VydmVyVGltZXN0YW1wUmVzdWx0XG4gKiBAcHJvcCB7U3RyaW5nfSB0aW1lc3RhbXAgLSBUaW1lc3RhbXBcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxTb2FwQXBpflNlcnZlclRpbWVzdGFtcFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFNvYXBBcGl+U2VydmVyVGltZXN0YW1wUmVzdWx0Pn1cbiAqL1xuU29hcEFwaS5wcm90b3R5cGUuZ2V0U2VydmVyVGltZXN0YW1wID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcImdldFNlcnZlclRpbWVzdGFtcFwiLCB7fSwgU2NoZW1hcy5HZXRTZXJ2ZXJUaW1lc3RhbXBSZXN1bHQsIGNhbGxiYWNrKTtcbn07XG5TY2hlbWFzLkdldFNlcnZlclRpbWVzdGFtcFJlc3VsdCA9IHtcbiAgdGltZXN0YW1wOiAnc3RyaW5nJ1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiBTb2FwQXBpflVzZXJJbmZvUmVzdWx0XG4gKiBAcHJvcCB7Qm9vbGVhbn0gYWNjZXNzaWJpbGl0eU1vZGVcbiAqIEBwcm9wIHtTdHJpbmd9IGN1cnJlbmN5U3ltYm9sXG4gKiBAcHJvcCB7TnVtYmVyfSBvcmdBdHRhY2htZW50RmlsZVNpemVMaW1pdFxuICogQHByb3Age1N0cmluZ30gb3JnRGVmYXVsdEN1cnJlbmN5SXNvQ29kZVxuICogQHByb3Age1N0cmluZ30gb3JnRGlzYWxsb3dIdG1sQXR0YWNobWVudHNcbiAqIEBwcm9wIHtCb29sZWFufSBvcmdIYXNQZXJzb25BY2NvdW50c1xuICogQHByb3Age1N0cmluZ30gb3JnYW5pemF0aW9uSWRcbiAqIEBwcm9wIHtCb29sZWFufSBvcmdhbml6YXRpb25NdWx0aUN1cnJlbmN5XG4gKiBAcHJvcCB7U3RyaW5nfSBvcmdhbml6YXRpb25OYW1lXG4gKiBAcHJvcCB7U3RyaW5nfSBwcm9maWxlSWRcbiAqIEBwcm9wIHtTdHJpbmd9IHJvbGVJZFxuICogQHByb3Age051bWJlcn0gc2Vzc2lvblNlY29uZHNWYWxpZFxuICogQHByb3Age1N0cmluZ30gdXNlckRlZmF1bHRDdXJyZW5jeUlzb0NvZGVcbiAqIEBwcm9wIHtTdHJpbmd9IHVzZXJFbWFpbFxuICogQHByb3Age1N0cmluZ30gdXNlckZ1bGxOYW1lXG4gKiBAcHJvcCB7U3RyaW5nfSB1c2VySWRcbiAqIEBwcm9wIHtTdHJpbmd9IHVzZXJMYW5ndWFnZVxuICogQHByb3Age1N0cmluZ30gdXNlckxvY2FsZVxuICogQHByb3Age1N0cmluZ30gdXNlck5hbWVcbiAqIEBwcm9wIHtTdHJpbmd9IHVzZXJUaW1lWm9uZVxuICogQHByb3Age1N0cmluZ30gdXNlclR5cGVcbiAqIEBwcm9wIHtTdHJpbmd9IHVzZXJVaVNraW5cbiAqL1xuLyoqXG4gKiBSZXRyaWV2ZXMgcGVyc29uYWwgaW5mb3JtYXRpb24gZm9yIHRoZSB1c2VyIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBzZXNzaW9uXG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48U29hcEFwaX5Vc2VySW5mb1Jlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFNvYXBBcGl+VXNlckluZm9SZXN1bHQ+fVxuICovXG5Tb2FwQXBpLnByb3RvdHlwZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9pbnZva2UoXCJnZXRVc2VySW5mb1wiLCB7fSwgU2NoZW1hcy5HZXRVc2VySW5mb1Jlc3VsdCwgY2FsbGJhY2spO1xufTtcblNjaGVtYXMuR2V0VXNlckluZm9SZXN1bHQgPSB7XG4gIGFjY2Vzc2liaWxpdHlNb2RlOiAnYm9vbGVhbicsXG4gIGN1cnJlbmN5U3ltYm9sOiAnc3RyaW5nJyxcbiAgb3JnQXR0YWNobWVudEZpbGVTaXplTGltaXQ6ICdudW1iZXInLFxuICBvcmdEZWZhdWx0Q3VycmVuY3lJc29Db2RlOiAnc3RyaW5nJyxcbiAgb3JnRGlzYWxsb3dIdG1sQXR0YWNobWVudHM6ICdib29sZWFuJyxcbiAgb3JnSGFzUGVyc29uQWNjb3VudHM6ICdib29sZWFuJyxcbiAgb3JnYW5pemF0aW9uSWQ6ICdzdHJpbmcnLFxuICBvcmdhbml6YXRpb25NdWx0aUN1cnJlbmN5OiAnYm9vbGVhbicsXG4gIG9yZ2FuaXphdGlvbk5hbWU6ICdzdHJpbmcnLFxuICBwcm9maWxlSWQ6ICdzdHJpbmcnLFxuICByb2xlSWQ6ICdzdHJpbmcnLFxuICBzZXNzaW9uU2Vjb25kc1ZhbGlkOiAnbnVtYmVyJyxcbiAgdXNlckRlZmF1bHRDdXJyZW5jeUlzb0NvZGU6ICdzdHJpbmcnLFxuICB1c2VyRW1haWw6ICdzdHJpbmcnLFxuICB1c2VyRnVsbE5hbWU6ICdzdHJpbmcnLFxuICB1c2VySWQ6ICdzdHJpbmcnLFxuICB1c2VyTGFuZ3VhZ2U6ICdzdHJpbmcnLFxuICB1c2VyTG9jYWxlOiAnc3RyaW5nJyxcbiAgdXNlck5hbWU6ICdzdHJpbmcnLFxuICB1c2VyVGltZVpvbmU6ICdzdHJpbmcnLFxuICB1c2VyVHlwZTogJ3N0cmluZycsXG4gIHVzZXJVaVNraW46ICdzdHJpbmcnXG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHNwZWNpZmllZCB1c2Vy4oCZcyBwYXNzd29yZCB0byB0aGUgc3BlY2lmaWVkIHZhbHVlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVzZXJJZCAtIFVzZXIgSWQgdG8gc2V0IHBhc3N3b3JkXG4gKiBAcGFyYW0ge1N0cmluZ30gcGFzc3dvcmQgLSBOZXcgcGFzc3dvcmRcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFN0cmluZz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFN0cmluZz59XG4gKi9cblNvYXBBcGkucHJvdG90eXBlLnNldFBhc3N3b3JkID0gZnVuY3Rpb24odXNlcklkLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcInNldFBhc3N3b3JkXCIsIHsgdXNlcklkOiB1c2VySWQsIHBhc3N3b3JkOiBwYXNzd29yZCB9LCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIFNvYXBBcGl+UmVzZXRQYXNzd29yZFJlc3VsdFxuICogQHByb3Age1N0cmluZ30gcGFzc3dvcmRcbiAqL1xuLyoqXG4gKiBSZXNldHMgdGhlIHNwZWNpZmllZCB1c2Vy4oCZcyBwYXNzd29yZFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VySWQgLSBVc2VyIElkIHRvIHNldCBwYXNzd29yZFxuICogQHBhcmFtIHtTdHJpbmd9IHBhc3N3b3JkIC0gTmV3IHBhc3N3b3JkXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxTb2FwQXBpflJlc2V0UGFzc3dvcmRSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxTb2FwQXBpflJlc2V0UGFzc3dvcmRSZXN1bHQ+fVxuICovXG5Tb2FwQXBpLnByb3RvdHlwZS5yZXNldFBhc3N3b3JkID0gZnVuY3Rpb24odXNlcklkLCBjYWxsYmFjaykge1xuICByZXR1cm4gdGhpcy5faW52b2tlKFwicmVzZXRQYXNzd29yZFwiLCB7IHVzZXJJZDogdXNlcklkIH0sIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQWRkcyBvbmUgb3IgbW9yZSBuZXcgcmVjb3JkcyB0byB5b3VyIG9yZ2FuaXphdGlvbuKAmXMgZGF0YVxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IHNPYmplY3RzIC0gUmVjb3JkcyB0byBpbnNlcnRcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFNvYXBBcGl+U2F2ZVJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFNvYXBBcGl+U2F2ZVJlc3VsdD59XG4gKi9cblNvYXBBcGkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHNPYmplY3RzLCBjYWxsYmFjaykge1xuICB2YXIgc2NoZW1hID0gXy5pc0FycmF5KHNPYmplY3RzKSA/IFsgU2NoZW1hcy5TYXZlUmVzdWx0IF0gOiBTY2hlbWFzLlNhdmVSZXN1bHQ7XG4gIHZhciBhcmdzID0ge1xuICAgICdAeG1sbnMnIDogJ3VybjpwYXJ0bmVyLnNvYXAuc2ZvcmNlLmNvbScsXG4gICAgJ0B4bWxuczpuczEnIDogJ3NvYmplY3QucGFydG5lci5zb2FwLnNmb3JjZS5jb20nLFxuICAgICduczE6c09iamVjdHMnIDogc09iamVjdHNcbiAgfTtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcImNyZWF0ZVwiLCBhcmdzLCBzY2hlbWEsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogVXBkYXRlcyBvbmUgb3IgbW9yZSBleGlzdGluZyByZWNvcmRzIGluIHlvdXIgb3JnYW5pemF0aW9u4oCZcyBkYXRhLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IHNPYmplY3RzIC0gUmVjb3JkcyB0byB1cGRhdGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFNvYXBBcGl+U2F2ZVJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFNvYXBBcGl+U2F2ZVJlc3VsdD59XG4gKi9cblNvYXBBcGkucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKHNPYmplY3RzLCBjYWxsYmFjaykge1xuICB2YXIgc2NoZW1hID0gXy5pc0FycmF5KHNPYmplY3RzKSA/IFsgU2NoZW1hcy5TYXZlUmVzdWx0IF0gOiBTY2hlbWFzLlNhdmVSZXN1bHQ7XG4gIHZhciBhcmdzID0ge1xuICAgICdAeG1sbnMnIDogJ3VybjpwYXJ0bmVyLnNvYXAuc2ZvcmNlLmNvbScsXG4gICAgJ0B4bWxuczpuczEnIDogJ3NvYmplY3QucGFydG5lci5zb2FwLnNmb3JjZS5jb20nLFxuICAgICduczE6c09iamVjdHMnIDogc09iamVjdHNcbiAgfTtcbiAgcmV0dXJuIHRoaXMuX2ludm9rZShcInVwZGF0ZVwiLCBhcmdzLCBzY2hlbWEsIGNhbGxiYWNrKTtcbn07XG5cblNjaGVtYXMuU2F2ZVJlc3VsdCA9IHtcbiAgc3VjY2VzczogJ2Jvb2xlYW4nLFxuICBlcnJvcnM6IFtdLFxuICBpZDogJ3N0cmluZydcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBuZXcgcmVjb3JkcyBhbmQgdXBkYXRlcyBleGlzdGluZyByZWNvcmRzIGluIHlvdXIgb3JnYW5pemF0aW9u4oCZcyBkYXRhLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IHNPYmplY3RzIC0gUmVjb3JkcyB0byB1cHNlcnRcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFNvYXBBcGl+VXBzZXJ0UmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48U29hcEFwaX5VcHNlcnRSZXN1bHQ+fVxuICovXG5Tb2FwQXBpLnByb3RvdHlwZS51cHNlcnQgPSBmdW5jdGlvbihleHRlcm5hbElkRmllbGROYW1lLCBzT2JqZWN0cywgY2FsbGJhY2spIHtcbiAgdmFyIHNjaGVtYSA9IF8uaXNBcnJheShzT2JqZWN0cykgPyBbIFNjaGVtYXMuVXBzZXJ0UmVzdWx0IF0gOiBTY2hlbWFzLlVwc2VydFJlc3VsdDtcbiAgdmFyIGFyZ3MgPSB7XG4gICAgJ0B4bWxucycgOiAndXJuOnBhcnRuZXIuc29hcC5zZm9yY2UuY29tJyxcbiAgICAnQHhtbG5zOm5zMScgOiAnc29iamVjdC5wYXJ0bmVyLnNvYXAuc2ZvcmNlLmNvbScsXG4gICAgJ25zMTpleHRlcm5hbElERmllbGROYW1lJyA6IGV4dGVybmFsSWRGaWVsZE5hbWUsXG4gICAgJ25zMTpzT2JqZWN0cycgOiBzT2JqZWN0c1xuICB9O1xuICByZXR1cm4gdGhpcy5faW52b2tlKFwidXBzZXJ0XCIsIGFyZ3MsIHNjaGVtYSwgY2FsbGJhY2spO1xufTtcblxuU2NoZW1hcy5VcHNlcnRSZXN1bHQgPSB7XG4gIGNyZWF0ZWQ6ICdib29sZWFuJyxcbiAgc3VjY2VzczogJ2Jvb2xlYW4nLFxuICBlcnJvcnM6IFtdLFxuICBpZDogJ3N0cmluZydcbn07XG5cbi8qKlxuICogRGVsZXRlcyBvbmUgb3IgbW9yZSByZWNvcmRzIGZyb20geW91ciBvcmdhbml6YXRpb27igJlzIGRhdGFcbiAqXG4gKiBAcGFyYW0ge0FycmF5LjxPYmplY3Q+fSBpZHMgLSBJZCBvZiByZWNvcmRzIHRvIGRlbGV0ZVxuICogQHBhcmFtIHtDYWxsYmFjay48U29hcEFwaX5EZWxldGVSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxTb2FwQXBpfkRlbGV0ZVJlc3VsdD59XG4gKi9cblNvYXBBcGkucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uKGlkcywgY2FsbGJhY2spIHtcbiAgdmFyIHNjaGVtYSA9IF8uaXNBcnJheShpZHMpID8gWyBTY2hlbWFzLkRlbGV0ZVJlc3VsdCBdIDogU2NoZW1hcy5EZWxldGVSZXN1bHQ7XG4gIHZhciBhcmdzID0ge1xuICAgICdAeG1sbnMnIDogJ3VybjpwYXJ0bmVyLnNvYXAuc2ZvcmNlLmNvbScsXG4gICAgJ0B4bWxuczpuczEnIDogJ3NvYmplY3QucGFydG5lci5zb2FwLnNmb3JjZS5jb20nLFxuICAgICduczE6aWRzJyA6IGlkc1xuICB9O1xuICByZXR1cm4gdGhpcy5faW52b2tlKFwiZGVsZXRlXCIsIGFyZ3MsIHNjaGVtYSwgY2FsbGJhY2spO1xufTtcblxuU2NoZW1hcy5EZWxldGVSZXN1bHQgPSB7XG4gIHN1Y2Nlc3M6ICdib29sZWFuJyxcbiAgZXJyb3JzOiBbXSxcbiAgaWQ6ICdzdHJpbmcnXG59O1xuXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLypcbiAqIFJlZ2lzdGVyIGhvb2sgaW4gY29ubmVjdGlvbiBpbnN0YW50aWF0aW9uIGZvciBkeW5hbWljYWxseSBhZGRpbmcgdGhpcyBBUEkgbW9kdWxlIGZlYXR1cmVzXG4gKi9cbmpzZm9yY2Uub24oJ2Nvbm5lY3Rpb246bmV3JywgZnVuY3Rpb24oY29ubikge1xuICBjb25uLnNvYXAgPSBuZXcgU29hcEFwaShjb25uKTtcbn0pO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gU29hcEFwaTtcbiIsIi8qKlxuICogRmF5ZSBDbGllbnQgZXh0ZW5zaW9uczogaHR0cHM6Ly9mYXllLmpjb2dsYW4uY29tL2Jyb3dzZXIvZXh0ZW5zaW9ucy5odG1sXG4gKlxuICogRm9yIHVzZSB3aXRoIFN0cmVhbWluZy5wcm90b3R5cGUuY3JlYXRlQ2xpZW50KClcbioqL1xudmFyIFN0cmVhbWluZ0V4dGVuc2lvbiA9IHt9O1xuXG4vKipcbiAqIENvbnN0cnVjdG9yIGZvciBhbiBhdXRoIGZhaWx1cmUgZGV0ZWN0b3IgZXh0ZW5zaW9uXG4gKlxuICogQmFzZWQgb24gbmV3IGZlYXR1cmUgcmVsZWFzZWQgd2l0aCBTYWxlc2ZvcmNlIFNwcmluZyAnMTg6XG4gKiBodHRwczovL3JlbGVhc2Vub3Rlcy5kb2NzLnNhbGVzZm9yY2UuY29tL2VuLXVzL3NwcmluZzE4L3JlbGVhc2Utbm90ZXMvcm5fbWVzc2FnaW5nX2NvbWV0ZF9hdXRoX3ZhbGlkYXRpb24uaHRtP2VkaXRpb249JmltcGFjdD1cbiAqXG4gKiBFeGFtcGxlIHRyaWdnZXJpbmcgZXJyb3IgbWVzc2FnZTpcbiAqXG4gKiBgYGBcbiAqIHtcbiAqICAgXCJleHRcIjp7XG4gKiAgICAgXCJzZmRjXCI6e1wiZmFpbHVyZVJlYXNvblwiOlwiNDAxOjpBdXRoZW50aWNhdGlvbiBpbnZhbGlkXCJ9LFxuICogICAgIFwicmVwbGF5XCI6dHJ1ZX0sXG4gKiAgIFwiYWR2aWNlXCI6e1wicmVjb25uZWN0XCI6XCJub25lXCJ9LFxuICogICBcImNoYW5uZWxcIjpcIi9tZXRhL2hhbmRzaGFrZVwiLFxuICogICBcImVycm9yXCI6XCI0MDM6OkhhbmRzaGFrZSBkZW5pZWRcIixcbiAqICAgXCJzdWNjZXNzZnVsXCI6ZmFsc2VcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogY29uc3QgY29ubiA9IG5ldyBqc2ZvcmNlLkNvbm5lY3Rpb24oeyDigKYgfSk7XG4gKiBcbiAqIGNvbnN0IGNoYW5uZWwgPSBcIi9ldmVudC9NeV9FdmVudF9fZVwiO1xuICogXG4gKiAvLyBFeGl0IHRoZSBOb2RlIHByb2Nlc3Mgd2hlbiBhdXRoIGZhaWxzXG4gKiBjb25zdCBleGl0Q2FsbGJhY2sgPSAoKSA9PiBwcm9jZXNzLmV4aXQoMSk7XG4gKiBjb25zdCBhdXRoRmFpbHVyZUV4dCA9IG5ldyBqc2ZvcmNlLlN0cmVhbWluZ0V4dGVuc2lvbi5BdXRoRmFpbHVyZShleGl0Q2FsbGJhY2spO1xuICogXG4gKiBjb25zdCBmYXllQ2xpZW50ID0gY29ubi5zdHJlYW1pbmcuY3JlYXRlQ2xpZW50KFsgYXV0aEZhaWx1cmVFeHQgXSk7XG4gKiBcbiAqIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGZheWVDbGllbnQuc3Vic2NyaWJlKGNoYW5uZWwsIGRhdGEgPT4ge1xuICogICBjb25zb2xlLmxvZygndG9waWMgcmVjZWl2ZWQgZGF0YScsIGRhdGEpO1xuICogfSk7XG4gKiBcbiAqIHN1YnNjcmlwdGlvbi5jYW5jZWwoKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZhaWx1cmVDYWxsYmFjayAtIEludm9rZWQgd2hlbiBhdXRoZW50aWNhdGlvbiBiZWNvbWVzIGludmFsaWRcbiAqL1xuU3RyZWFtaW5nRXh0ZW5zaW9uLkF1dGhGYWlsdXJlID0gZnVuY3Rpb24oZmFpbHVyZUNhbGxiYWNrKSB7XG4gIHRoaXMuaW5jb21pbmcgPSBmdW5jdGlvbihtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgIGlmIChcbiAgICAgIChtZXNzYWdlLmNoYW5uZWwgPT09ICcvbWV0YS9jb25uZWN0JyB8fFxuICAgICAgICBtZXNzYWdlLmNoYW5uZWwgPT09ICcvbWV0YS9oYW5kc2hha2UnKVxuICAgICAgJiYgbWVzc2FnZS5hZHZpY2VcbiAgICAgICYmIG1lc3NhZ2UuYWR2aWNlLnJlY29ubmVjdCA9PSAnbm9uZSdcbiAgICApIHtcbiAgICAgIGZhaWx1cmVDYWxsYmFjayhtZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sobWVzc2FnZSk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENvbnN0cnVjdG9yIGZvciBhIGR1cmFibGUgc3RyZWFtaW5nIHJlcGxheSBleHRlbnNpb25cbiAqXG4gKiBNb2RpZmllZCBmcm9tIG9yaWdpbmFsIFNhbGVzZm9yY2UgZGVtbyBzb3VyY2UgY29kZTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kZXZlbG9wZXJmb3JjZS9TYWxlc2ZvcmNlRHVyYWJsZVN0cmVhbWluZ0RlbW8vYmxvYi8zZDRhNTZlYWM5NTZmNzQ0YWQ2YzIyZTZhODE0MWI2ZmViNTdhYmI5L3N0YXRpY3Jlc291cmNlcy9jb21ldGRSZXBsYXlFeHRlbnNpb24ucmVzb3VyY2VcbiAqIFxuICogRXhhbXBsZSB1c2FnZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBjb25zdCBjb25uID0gbmV3IGpzZm9yY2UuQ29ubmVjdGlvbih7IOKApiB9KTtcbiAqIFxuICogY29uc3QgY2hhbm5lbCA9IFwiL2V2ZW50L015X0V2ZW50X19lXCI7XG4gKiBjb25zdCByZXBsYXlJZCA9IC0yOyAvLyAtMiBpcyBhbGwgcmV0YWluZWQgZXZlbnRzXG4gKiBcbiAqIGNvbnN0IHJlcGxheUV4dCA9IG5ldyBqc2ZvcmNlLlN0cmVhbWluZ0V4dGVuc2lvbi5SZXBsYXkoY2hhbm5lbCwgcmVwbGF5SWQpO1xuICogXG4gKiBjb25zdCBmYXllQ2xpZW50ID0gY29ubi5zdHJlYW1pbmcuY3JlYXRlQ2xpZW50KFsgcmVwbGF5RXh0IF0pO1xuICogXG4gKiBjb25zdCBzdWJzY3JpcHRpb24gPSBmYXllQ2xpZW50LnN1YnNjcmliZShjaGFubmVsLCBkYXRhID0+IHtcbiAqICAgY29uc29sZS5sb2coJ3RvcGljIHJlY2VpdmVkIGRhdGEnLCBkYXRhKTtcbiAqIH0pO1xuICogXG4gKiBzdWJzY3JpcHRpb24uY2FuY2VsKCk7XG4gKiBgYGBcbiAqL1xuU3RyZWFtaW5nRXh0ZW5zaW9uLlJlcGxheSA9IGZ1bmN0aW9uKGNoYW5uZWwsIHJlcGxheUlkKSB7XG4gIHZhciBSRVBMQVlfRlJPTV9LRVkgPSBcInJlcGxheVwiO1xuICBcbiAgdmFyIF9leHRlbnNpb25FbmFibGVkID0gcmVwbGF5SWQgIT0gbnVsbCA/IHRydWUgOiBmYWxzZTtcbiAgdmFyIF9yZXBsYXkgPSByZXBsYXlJZDtcbiAgdmFyIF9jaGFubmVsID0gY2hhbm5lbDtcblxuICB0aGlzLnNldEV4dGVuc2lvbkVuYWJsZWQgPSBmdW5jdGlvbihleHRlbnNpb25FbmFibGVkKSB7XG4gICAgX2V4dGVuc2lvbkVuYWJsZWQgPSBleHRlbnNpb25FbmFibGVkO1xuICB9XG5cbiAgdGhpcy5zZXRSZXBsYXkgPSBmdW5jdGlvbiAocmVwbGF5KSB7XG4gICAgX3JlcGxheSA9IHBhcnNlSW50KHJlcGxheSwgMTApO1xuICB9XG5cbiAgdGhpcy5zZXRDaGFubmVsID0gZnVuY3Rpb24oY2hhbm5lbCkge1xuICAgIF9jaGFubmVsID0gY2hhbm5lbDtcbiAgfVxuXG4gIHRoaXMuaW5jb21pbmcgPSBmdW5jdGlvbihtZXNzYWdlLCBjYWxsYmFjaykge1xuICAgIGlmIChtZXNzYWdlLmNoYW5uZWwgPT09ICcvbWV0YS9oYW5kc2hha2UnKSB7XG4gICAgICBpZiAobWVzc2FnZS5leHQgJiYgbWVzc2FnZS5leHRbUkVQTEFZX0ZST01fS0VZXSA9PSB0cnVlKSB7XG4gICAgICAgIF9leHRlbnNpb25FbmFibGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1lc3NhZ2UuY2hhbm5lbCA9PT0gX2NoYW5uZWwgJiYgbWVzc2FnZS5kYXRhICYmIG1lc3NhZ2UuZGF0YS5ldmVudCAmJiBtZXNzYWdlLmRhdGEuZXZlbnQucmVwbGF5SWQpIHtcbiAgICAgIF9yZXBsYXkgPSBtZXNzYWdlLmRhdGEuZXZlbnQucmVwbGF5SWQ7XG4gICAgfVxuICAgIGNhbGxiYWNrKG1lc3NhZ2UpO1xuICB9XG4gIFxuICB0aGlzLm91dGdvaW5nID0gZnVuY3Rpb24obWVzc2FnZSwgY2FsbGJhY2spIHtcbiAgICBpZiAobWVzc2FnZS5jaGFubmVsID09PSAnL21ldGEvc3Vic2NyaWJlJykge1xuICAgICAgaWYgKF9leHRlbnNpb25FbmFibGVkKSB7XG4gICAgICAgIGlmICghbWVzc2FnZS5leHQpIHsgbWVzc2FnZS5leHQgPSB7fTsgfVxuXG4gICAgICAgIHZhciByZXBsYXlGcm9tTWFwID0ge307XG4gICAgICAgIHJlcGxheUZyb21NYXBbX2NoYW5uZWxdID0gX3JlcGxheTtcblxuICAgICAgICAvLyBhZGQgXCJleHQgOiB7IFwicmVwbGF5XCIgOiB7IENIQU5ORUwgOiBSRVBMQVlfVkFMVUUgfX1cIiB0byBzdWJzY3JpYmUgbWVzc2FnZVxuICAgICAgICBtZXNzYWdlLmV4dFtSRVBMQVlfRlJPTV9LRVldID0gcmVwbGF5RnJvbU1hcDtcbiAgICAgIH1cbiAgICB9XG4gICAgY2FsbGJhY2sobWVzc2FnZSk7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmVhbWluZ0V4dGVuc2lvbjtcbiIsIi8qKlxuICogQGZpbGUgTWFuYWdlcyBTdHJlYW1pbmcgQVBJc1xuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyksXG4gICAgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpLFxuICAgIF8gPSByZXF1aXJlKCdsb2Rhc2gvY29yZScpLFxuICAgIEZheWUgICA9IHJlcXVpcmUoJ2ZheWUnKSxcbiAgICBTdHJlYW1pbmdFeHRlbnNpb24gPSByZXF1aXJlKCcuL3N0cmVhbWluZy1leHRlbnNpb24nKSxcbiAgICBqc2ZvcmNlID0gcmVxdWlyZSgnLi4vY29yZScpO1xuXG4vKipcbiAqIFN0cmVhbWluZyBBUEkgdG9waWMgY2xhc3NcbiAqXG4gKiBAY2xhc3MgU3RyZWFtaW5nflRvcGljXG4gKiBAcGFyYW0ge1N0cmVhbWluZ30gc3RlYW1pbmcgLSBTdHJlYW1pbmcgQVBJIG9iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBUb3BpYyBuYW1lXG4gKi9cbnZhciBUb3BpYyA9IGZ1bmN0aW9uKHN0cmVhbWluZywgbmFtZSkge1xuICB0aGlzLl9zdHJlYW1pbmcgPSBzdHJlYW1pbmc7XG4gIHRoaXMubmFtZSA9IG5hbWU7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0cmVhbWluZ35TdHJlYW1pbmdNZXNzYWdlXG4gKiBAcHJvcCB7T2JqZWN0fSBldmVudFxuICogQHByb3Age09iamVjdH0gZXZlbnQudHlwZSAtIEV2ZW50IHR5cGVcbiAqIEBwcm9wIHtSZWNvcmR9IHNvYmplY3QgLSBSZWNvcmQgaW5mb3JtYXRpb25cbiAqL1xuLyoqXG4gKiBTdWJzY3JpYmUgbGlzdGVuZXIgdG8gdG9waWNcbiAqXG4gKiBAbWV0aG9kIFN0cmVhbWluZ35Ub3BpYyNzdWJzY3JpYmVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFN0cmVhbWluZ35TdHJlYW1pbmdNZXNhc2dlPn0gbGlzdGVuZXIgLSBTdHJlYW1pbmcgbWVzc2FnZSBsaXN0ZW5lclxuICogQHJldHVybnMge1N1YnNjcmlwdGlvbn0gLSBGYXllIHN1YnNjcmlwdGlvbiBvYmplY3RcbiAqL1xuVG9waWMucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gIHJldHVybiB0aGlzLl9zdHJlYW1pbmcuc3Vic2NyaWJlKHRoaXMubmFtZSwgbGlzdGVuZXIpO1xufTtcblxuLyoqXG4gKiBVbnN1YnNjcmliZSBsaXN0ZW5lciBmcm9tIHRvcGljXG4gKlxuICogQG1ldGhvZCBTdHJlYW1pbmd+VG9waWMjdW5zdWJzY3JpYmVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFN0cmVhbWluZ35TdHJlYW1pbmdNZXNhc2dlPn0gbGlzdGVuZXIgLSBTdHJlYW1pbmcgbWVzc2FnZSBsaXN0ZW5lclxuICogQHJldHVybnMge1N0cmVhbWluZ35Ub3BpY31cbiAqL1xuVG9waWMucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgdGhpcy5fc3RyZWFtaW5nLnVuc3Vic2NyaWJlKHRoaXMubmFtZSwgbGlzdGVuZXIpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4vKipcbiAqIFN0cmVhbWluZyBBUEkgR2VuZXJpYyBTdHJlYW1pbmcgQ2hhbm5lbFxuICpcbiAqIEBjbGFzcyBTdHJlYW1pbmd+Q2hhbm5lbFxuICogQHBhcmFtIHtTdHJlYW1pbmd9IHN0ZWFtaW5nIC0gU3RyZWFtaW5nIEFQSSBvYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIC0gQ2hhbm5lbCBuYW1lIChzdGFydHMgd2l0aCBcIi91L1wiKVxuICovXG52YXIgQ2hhbm5lbCA9IGZ1bmN0aW9uKHN0cmVhbWluZywgbmFtZSkge1xuICB0aGlzLl9zdHJlYW1pbmcgPSBzdHJlYW1pbmc7XG4gIHRoaXMuX25hbWUgPSBuYW1lO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmUgdG8gY2hhbm5lbFxuICpcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFN0cmVhbWluZ35TdHJlYW1pbmdNZXNzYWdlPn0gbGlzdGVuZXIgLSBTdHJlYW1pbmcgbWVzc2FnZSBsaXN0ZW5lclxuICogQHJldHVybnMge1N1YnNjcmlwdGlvbn0gLSBGYXllIHN1YnNjcmlwdGlvbiBvYmplY3RcbiAqL1xuQ2hhbm5lbC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgcmV0dXJuIHRoaXMuX3N0cmVhbWluZy5zdWJzY3JpYmUodGhpcy5fbmFtZSwgbGlzdGVuZXIpO1xufTtcblxuQ2hhbm5lbC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICB0aGlzLl9zdHJlYW1pbmcudW5zdWJzY3JpYmUodGhpcy5fbmFtZSwgbGlzdGVuZXIpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkNoYW5uZWwucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihldmVudHMsIGNhbGxiYWNrKSB7XG4gIHZhciBpc0FycmF5ID0gXy5pc0FycmF5KGV2ZW50cyk7XG4gIGV2ZW50cyA9IGlzQXJyYXkgPyBldmVudHMgOiBbIGV2ZW50cyBdO1xuICB2YXIgY29ubiA9IHRoaXMuX3N0cmVhbWluZy5fY29ubjtcbiAgaWYgKCF0aGlzLl9pZCkge1xuICAgIHRoaXMuX2lkID0gY29ubi5zb2JqZWN0KCdTdHJlYW1pbmdDaGFubmVsJykuZmluZE9uZSh7IE5hbWU6IHRoaXMuX25hbWUgfSwgJ0lkJylcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlYykgeyByZXR1cm4gcmVjLklkIH0pO1xuICB9XG4gIHJldHVybiB0aGlzLl9pZC50aGVuKGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIGNoYW5uZWxVcmwgPSAnL3NvYmplY3RzL1N0cmVhbWluZ0NoYW5uZWwvJyArIGlkICsgJy9wdXNoJztcbiAgICByZXR1cm4gY29ubi5yZXF1ZXN0UG9zdChjaGFubmVsVXJsLCB7IHB1c2hFdmVudHM6IGV2ZW50cyB9KTtcbiAgfSkudGhlbihmdW5jdGlvbihyZXRzKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkgPyByZXRzIDogcmV0c1swXTtcbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogU3RyZWFtaW5nIEFQSSBjbGFzc1xuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgZXZlbnRzLkV2ZW50RW1pdHRlclxuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIC0gQ29ubmVjdGlvbiBvYmplY3RcbiAqL1xudmFyIFN0cmVhbWluZyA9IGZ1bmN0aW9uKGNvbm4pIHtcbiAgdGhpcy5fY29ubiA9IGNvbm47XG59O1xuXG5pbmhlcml0cyhTdHJlYW1pbmcsIGV2ZW50cy5FdmVudEVtaXR0ZXIpO1xuXG4vKiogQHByaXZhdGUgKiovXG5TdHJlYW1pbmcucHJvdG90eXBlLl9jcmVhdGVDbGllbnQgPSBmdW5jdGlvbihmb3JDaGFubmVsTmFtZSwgZXh0ZW5zaW9ucykge1xuICAvLyBmb3JDaGFubmVsTmFtZSBpcyBhZHZpc29yeSwgZm9yIGFuIEFQSSB3b3JrYXJvdW5kLiBJdCBkb2VzIG5vdCByZXN0cmljdCBvciBzZWxlY3QgdGhlIGNoYW5uZWwuXG4gIHZhciBuZWVkc1JlcGxheUZpeCA9IHR5cGVvZiBmb3JDaGFubmVsTmFtZSA9PT0gJ3N0cmluZycgJiYgZm9yQ2hhbm5lbE5hbWUuaW5kZXhPZignL3UvJykgPT09IDA7XG4gIHZhciBlbmRwb2ludFVybCA9IFtcbiAgICB0aGlzLl9jb25uLmluc3RhbmNlVXJsLFxuICAgIC8vIHNwZWNpYWwgZW5kcG9pbnQgXCIvY29tZXRkL3JlcGxheS94eC54XCIgaXMgb25seSBhdmFpbGFibGUgaW4gMzYuMC5cbiAgICAvLyBTZWUgaHR0cHM6Ly9yZWxlYXNlbm90ZXMuZG9jcy5zYWxlc2ZvcmNlLmNvbS9lbi11cy9zdW1tZXIxNi9yZWxlYXNlLW5vdGVzL3JuX2FwaV9zdHJlYW1pbmdfY2xhc3NpY19yZXBsYXkuaHRtXG4gICAgXCJjb21ldGRcIiArIChuZWVkc1JlcGxheUZpeCA9PT0gdHJ1ZSAmJiB0aGlzLl9jb25uLnZlcnNpb24gPT09IFwiMzYuMFwiID8gXCIvcmVwbGF5XCIgOiBcIlwiKSxcbiAgICB0aGlzLl9jb25uLnZlcnNpb25cbiAgXS5qb2luKCcvJyk7XG4gIHZhciBmYXllQ2xpZW50ID0gbmV3IEZheWUuQ2xpZW50KGVuZHBvaW50VXJsLCB7fSk7XG4gIGZheWVDbGllbnQuc2V0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ09BdXRoICcrdGhpcy5fY29ubi5hY2Nlc3NUb2tlbik7XG4gIGlmIChleHRlbnNpb25zIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBleHRlbnNpb25zLmZvckVhY2goZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG4gICAgICBmYXllQ2xpZW50LmFkZEV4dGVuc2lvbihleHRlbnNpb24pO1xuICAgIH0pO1xuICB9XG4gIGlmIChmYXllQ2xpZW50Ll9kaXNwYXRjaGVyLmdldENvbm5lY3Rpb25UeXBlcygpLmluZGV4T2YoJ2NhbGxiYWNrLXBvbGxpbmcnKSA9PT0gLTEpIHtcbiAgICAvLyBwcmV2ZW50IHN0cmVhbWluZyBBUEkgc2VydmVyIGVycm9yXG4gICAgZmF5ZUNsaWVudC5fZGlzcGF0Y2hlci5zZWxlY3RUcmFuc3BvcnQoJ2xvbmctcG9sbGluZycpO1xuICAgIGZheWVDbGllbnQuX2Rpc3BhdGNoZXIuX3RyYW5zcG9ydC5iYXRjaGluZyA9IGZhbHNlO1xuICB9XG4gIHJldHVybiBmYXllQ2xpZW50O1xufTtcblxuLyoqIEBwcml2YXRlICoqL1xuU3RyZWFtaW5nLnByb3RvdHlwZS5fZ2V0RmF5ZUNsaWVudCA9IGZ1bmN0aW9uKGNoYW5uZWxOYW1lKSB7XG4gIHZhciBpc0dlbmVyaWMgPSBjaGFubmVsTmFtZS5pbmRleE9mKCcvdS8nKSA9PT0gMDtcbiAgdmFyIGNsaWVudFR5cGUgPSBpc0dlbmVyaWMgPyAnZ2VuZXJpYycgOiAncHVzaFRvcGljJztcbiAgaWYgKCF0aGlzLl9mYXllQ2xpZW50cyB8fCAhdGhpcy5fZmF5ZUNsaWVudHNbY2xpZW50VHlwZV0pIHtcbiAgICB0aGlzLl9mYXllQ2xpZW50cyA9IHRoaXMuX2ZheWVDbGllbnRzIHx8IHt9O1xuICAgIHRoaXMuX2ZheWVDbGllbnRzW2NsaWVudFR5cGVdID0gdGhpcy5fY3JlYXRlQ2xpZW50KGNoYW5uZWxOYW1lKTtcbiAgfVxuICByZXR1cm4gdGhpcy5fZmF5ZUNsaWVudHNbY2xpZW50VHlwZV07XG59O1xuXG5cbi8qKlxuICogR2V0IG5hbWVkIHRvcGljXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBUb3BpYyBuYW1lXG4gKiBAcmV0dXJucyB7U3RyZWFtaW5nflRvcGljfVxuICovXG5TdHJlYW1pbmcucHJvdG90eXBlLnRvcGljID0gZnVuY3Rpb24obmFtZSkge1xuICB0aGlzLl90b3BpY3MgPSB0aGlzLl90b3BpY3MgfHwge307XG4gIHZhciB0b3BpYyA9IHRoaXMuX3RvcGljc1tuYW1lXSA9XG4gICAgdGhpcy5fdG9waWNzW25hbWVdIHx8IG5ldyBUb3BpYyh0aGlzLCBuYW1lKTtcbiAgcmV0dXJuIHRvcGljO1xufTtcblxuLyoqXG4gKiBHZXQgQ2hhbm5lbCBmb3IgSWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBjaGFubmVsSWQgLSBJZCBvZiBTdHJlYW1pbmdDaGFubmVsIG9iamVjdFxuICogQHJldHVybnMge1N0cmVhbWluZ35DaGFubmVsfVxuICovXG5TdHJlYW1pbmcucHJvdG90eXBlLmNoYW5uZWwgPSBmdW5jdGlvbihjaGFubmVsSWQpIHtcbiAgcmV0dXJuIG5ldyBDaGFubmVsKHRoaXMsIGNoYW5uZWxJZCk7XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZSB0b3BpYy9jaGFubmVsXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBUb3BpYyBuYW1lXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxTdHJlYW1pbmd+U3RyZWFtaW5nTWVzc2FnZT59IGxpc3RlbmVyIC0gU3RyZWFtaW5nIG1lc3NhZ2UgbGlzdGVuZXJcbiAqIEByZXR1cm5zIHtTdWJzY3JpcHRpb259IC0gRmF5ZSBzdWJzY3JpcHRpb24gb2JqZWN0XG4gKi9cblN0cmVhbWluZy5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGNoYW5uZWxOYW1lID0gbmFtZS5pbmRleE9mKCcvJykgPT09IDAgPyBuYW1lIDogJy90b3BpYy8nICsgbmFtZTtcbiAgdmFyIGZheWVDbGllbnQgPSB0aGlzLl9nZXRGYXllQ2xpZW50KGNoYW5uZWxOYW1lKTtcbiAgcmV0dXJuIGZheWVDbGllbnQuc3Vic2NyaWJlKGNoYW5uZWxOYW1lLCBsaXN0ZW5lcik7XG59O1xuXG4vKipcbiAqIFVuc3Vic2NyaWJlIHRvcGljXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgLSBUb3BpYyBuYW1lXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxTdHJlYW1pbmd+U3RyZWFtaW5nTWVzc2FnZT59IGxpc3RlbmVyIC0gU3RyZWFtaW5nIG1lc3NhZ2UgbGlzdGVuZXJcbiAqIEByZXR1cm5zIHtTdHJlYW1pbmd9XG4gKi9cblN0cmVhbWluZy5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbihuYW1lLCBsaXN0ZW5lcikge1xuICB2YXIgY2hhbm5lbE5hbWUgPSBuYW1lLmluZGV4T2YoJy8nKSA9PT0gMCA/IG5hbWUgOiAnL3RvcGljLycgKyBuYW1lO1xuICB2YXIgZmF5ZUNsaWVudCA9IHRoaXMuX2dldEZheWVDbGllbnQoY2hhbm5lbE5hbWUpO1xuICBmYXllQ2xpZW50LnVuc3Vic2NyaWJlKGNoYW5uZWxOYW1lLCBsaXN0ZW5lcik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuXG4vKipcbiAqIENyZWF0ZSBhIFN0cmVhbWluZyBjbGllbnQsIG9wdGlvbmFsbHkgd2l0aCBleHRlbnNpb25zXG4gKlxuICogU2VlIEZheWUgZG9jcyBmb3IgaW1wbGVtZW50YXRpb24gZGV0YWlsczogaHR0cHM6Ly9mYXllLmpjb2dsYW4uY29tL2Jyb3dzZXIvZXh0ZW5zaW9ucy5odG1sXG4gKlxuICogRXhhbXBsZSB1c2FnZTpcbiAqIFxuICogYGBgamF2YXNjcmlwdFxuICogLy8gRXN0YWJsaXNoIGEgU2FsZXNmb3JjZSBjb25uZWN0aW9uLiAoRGV0YWlscyBlbGlkZWQpXG4gKiBjb25zdCBjb25uID0gbmV3IGpzZm9yY2UuQ29ubmVjdGlvbih7IOKApiB9KTtcbiAqIFxuICogY29uc3QgZmF5ZUNsaWVudCA9IGNvbm4uc3RyZWFtaW5nLmNyZWF0ZUNsaWVudCgpO1xuICogXG4gKiBjb25zdCBzdWJzY3JpcHRpb24gPSBmYXllQ2xpZW50LnN1YnNjcmliZShjaGFubmVsLCBkYXRhID0+IHtcbiAqICAgY29uc29sZS5sb2coJ3RvcGljIHJlY2VpdmVkIGRhdGEnLCBkYXRhKTtcbiAqIH0pO1xuICogXG4gKiBzdWJzY3JpcHRpb24uY2FuY2VsKCk7XG4gKiBgYGBcbiAqIFxuICogRXhhbXBsZSB3aXRoIGV4dGVuc2lvbnMsIHVzaW5nIFJlcGxheSAmIEF1dGggRmFpbHVyZSBleHRlbnNpb25zIGluIGEgc2VydmVyLXNpZGUgTm9kZS5qcyBhcHA6XG4gKiBcbiAqIGBgYGphdmFzY3JpcHRcbiAqIC8vIEVzdGFibGlzaCBhIFNhbGVzZm9yY2UgY29ubmVjdGlvbi4gKERldGFpbHMgZWxpZGVkKVxuICogY29uc3QgY29ubiA9IG5ldyBqc2ZvcmNlLkNvbm5lY3Rpb24oeyDigKYgfSk7XG4gKiBcbiAqIGNvbnN0IGNoYW5uZWwgPSBcIi9ldmVudC9NeV9FdmVudF9fZVwiO1xuICogY29uc3QgcmVwbGF5SWQgPSAtMjsgLy8gLTIgaXMgYWxsIHJldGFpbmVkIGV2ZW50c1xuICogXG4gKiBjb25zdCBleGl0Q2FsbGJhY2sgPSAoKSA9PiBwcm9jZXNzLmV4aXQoMSk7XG4gKiBjb25zdCBhdXRoRmFpbHVyZUV4dCA9IG5ldyBqc2ZvcmNlLlN0cmVhbWluZ0V4dGVuc2lvbi5BdXRoRmFpbHVyZShleGl0Q2FsbGJhY2spO1xuICogXG4gKiBjb25zdCByZXBsYXlFeHQgPSBuZXcganNmb3JjZS5TdHJlYW1pbmdFeHRlbnNpb24uUmVwbGF5KGNoYW5uZWwsIHJlcGxheUlkKTtcbiAqIFxuICogY29uc3QgZmF5ZUNsaWVudCA9IGNvbm4uc3RyZWFtaW5nLmNyZWF0ZUNsaWVudChbXG4gKiAgIGF1dGhGYWlsdXJlRXh0LFxuICogICByZXBsYXlFeHRcbiAqIF0pO1xuICogXG4gKiBjb25zdCBzdWJzY3JpcHRpb24gPSBmYXllQ2xpZW50LnN1YnNjcmliZShjaGFubmVsLCBkYXRhID0+IHtcbiAqICAgY29uc29sZS5sb2coJ3RvcGljIHJlY2VpdmVkIGRhdGEnLCBkYXRhKTtcbiAqIH0pO1xuICogXG4gKiBzdWJzY3JpcHRpb24uY2FuY2VsKCk7XG4gKiBgYGBcbiAqIFxuICogQHBhcmFtIHtBcnJheX0gRXh0ZW5zaW9ucyAtIE9wdGlvbmFsLCBleHRlbnNpb25zIHRvIGFwcGx5IHRvIHRoZSBGYXllIGNsaWVudFxuICogQHJldHVybnMge0ZheWVDbGllbnR9IC0gRmF5ZSBjbGllbnQgb2JqZWN0XG4gKi9cblN0cmVhbWluZy5wcm90b3R5cGUuY3JlYXRlQ2xpZW50ID0gZnVuY3Rpb24oZXh0ZW5zaW9ucykge1xuICByZXR1cm4gdGhpcy5fY3JlYXRlQ2xpZW50KG51bGwsIGV4dGVuc2lvbnMpO1xufTtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKlxuICogUmVnaXN0ZXIgaG9vayBpbiBjb25uZWN0aW9uIGluc3RhbnRpYXRpb24gZm9yIGR5bmFtaWNhbGx5IGFkZGluZyB0aGlzIEFQSSBtb2R1bGUgZmVhdHVyZXNcbiAqL1xuanNmb3JjZS5vbignY29ubmVjdGlvbjpuZXcnLCBmdW5jdGlvbihjb25uKSB7XG4gIGNvbm4uc3RyZWFtaW5nID0gbmV3IFN0cmVhbWluZyhjb25uKTtcbn0pO1xuXG4vKlxuICogXG4gKi9cbmpzZm9yY2UuU3RyZWFtaW5nRXh0ZW5zaW9uID0gU3RyZWFtaW5nRXh0ZW5zaW9uO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmVhbWluZztcbiIsIi8qKlxuICogQGZpbGUgTWFuYWdlcyBUb29saW5nIEFQSXNcbiAqIEBhdXRob3IgU2hpbmljaGkgVG9taXRhIDxzaGluaWNoaS50b21pdGFAZ21haWwuY29tPlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGpzZm9yY2UgPSByZXF1aXJlKCcuLi9jb3JlJyksXG4gICAgXyAgICAgPSByZXF1aXJlKCdsb2Rhc2gvY29yZScpLFxuICAgIENhY2hlID0gcmVxdWlyZSgnLi4vY2FjaGUnKTtcblxuLyoqXG4gKiBBUEkgY2xhc3MgZm9yIFRvb2xpbmcgQVBJIGNhbGxcbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7Q29ubmVjdGlvbn0gY29ubiAtIENvbm5lY3Rpb25cbiAqL1xudmFyIFRvb2xpbmcgPSBmdW5jdGlvbihjb25uKSB7XG4gIHRoaXMuX2Nvbm4gPSBjb25uO1xuICB0aGlzLl9sb2dnZXIgPSBjb25uLl9sb2dnZXI7XG4gIHZhciBkZWxlZ2F0ZXMgPSBbXG4gICAgXCJxdWVyeVwiLFxuICAgIFwicXVlcnlNb3JlXCIsXG4gICAgXCJjcmVhdGVcIixcbiAgICBcImluc2VydFwiLFxuICAgIFwicmV0cmlldmVcIixcbiAgICBcInVwZGF0ZVwiLFxuICAgIFwidXBzZXJ0XCIsXG4gICAgXCJkZWxcIixcbiAgICBcImRlbGV0ZVwiLFxuICAgIFwiZGVzdHJveVwiLFxuICAgIFwiZGVzY3JpYmVcIixcbiAgICBcImRlc2NyaWJlR2xvYmFsXCIsXG4gICAgXCJzb2JqZWN0XCJcbiAgXTtcbiAgZGVsZWdhdGVzLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgdGhpc1ttZXRob2RdID0gY29ubi5jb25zdHJ1Y3Rvci5wcm90b3R5cGVbbWV0aG9kXTtcbiAgfSwgdGhpcyk7XG5cbiAgdGhpcy5jYWNoZSA9IG5ldyBDYWNoZSgpO1xuXG4gIHZhciBjYWNoZU9wdGlvbnMgPSB7XG4gICAga2V5OiBmdW5jdGlvbih0eXBlKSB7IHJldHVybiB0eXBlID8gXCJkZXNjcmliZS5cIiArIHR5cGUgOiBcImRlc2NyaWJlXCI7IH1cbiAgfTtcbiAgdGhpcy5kZXNjcmliZSQgPSB0aGlzLmNhY2hlLm1ha2VDYWNoZWFibGUodGhpcy5kZXNjcmliZSwgdGhpcywgY2FjaGVPcHRpb25zKTtcbiAgdGhpcy5kZXNjcmliZSA9IHRoaXMuY2FjaGUubWFrZVJlc3BvbnNlQ2FjaGVhYmxlKHRoaXMuZGVzY3JpYmUsIHRoaXMsIGNhY2hlT3B0aW9ucyk7XG4gIHRoaXMuZGVzY3JpYmVTT2JqZWN0JCA9IHRoaXMuZGVzY3JpYmUkO1xuICB0aGlzLmRlc2NyaWJlU09iamVjdCA9IHRoaXMuZGVzY3JpYmU7XG5cbiAgY2FjaGVPcHRpb25zID0geyBrZXk6ICdkZXNjcmliZUdsb2JhbCcgfTtcbiAgdGhpcy5kZXNjcmliZUdsb2JhbCQgPSB0aGlzLmNhY2hlLm1ha2VDYWNoZWFibGUodGhpcy5kZXNjcmliZUdsb2JhbCwgdGhpcywgY2FjaGVPcHRpb25zKTtcbiAgdGhpcy5kZXNjcmliZUdsb2JhbCA9IHRoaXMuY2FjaGUubWFrZVJlc3BvbnNlQ2FjaGVhYmxlKHRoaXMuZGVzY3JpYmVHbG9iYWwsIHRoaXMsIGNhY2hlT3B0aW9ucyk7XG5cbiAgdGhpcy5pbml0aWFsaXplKCk7XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgdG9vbGluZyBBUElcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuVG9vbGluZy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnNvYmplY3RzID0ge307XG4gIHRoaXMuY2FjaGUuY2xlYXIoKTtcbiAgdGhpcy5jYWNoZS5nZXQoJ2Rlc2NyaWJlR2xvYmFsJykucmVtb3ZlQWxsTGlzdGVuZXJzKCd2YWx1ZScpO1xuICB0aGlzLmNhY2hlLmdldCgnZGVzY3JpYmVHbG9iYWwnKS5vbigndmFsdWUnLCBfLmJpbmQoZnVuY3Rpb24ocmVzKSB7XG4gICAgaWYgKHJlcy5yZXN1bHQpIHtcbiAgICAgIHZhciB0eXBlcyA9IF8ubWFwKHJlcy5yZXN1bHQuc29iamVjdHMsIGZ1bmN0aW9uKHNvKSB7IHJldHVybiBzby5uYW1lOyB9KTtcbiAgICAgIHR5cGVzLmZvckVhY2godGhpcy5zb2JqZWN0LCB0aGlzKTtcbiAgICB9XG4gIH0sIHRoaXMpKTtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuVG9vbGluZy5wcm90b3R5cGUuX2Jhc2VVcmwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4uX2Jhc2VVcmwoKSArIFwiL3Rvb2xpbmdcIjtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuVG9vbGluZy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0LmFwcGx5KHRoaXMuX2Nvbm4sIGFyZ3VtZW50cyk7XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgcXVlcnkgYnkgdXNpbmcgU09RTFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzb3FsIC0gU09RTCBzdHJpbmdcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFF1ZXJ5UmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UXVlcnkuPFF1ZXJ5UmVzdWx0Pn1cbiAqL1xuLyoqXG4gKiBRdWVyeSBuZXh0IHJlY29yZCBzZXQgYnkgdXNpbmcgcXVlcnkgbG9jYXRvclxuICpcbiAqIEBtZXRob2QgVG9vbGluZyNxdWVyeVxuICogQHBhcmFtIHtTdHJpbmd9IGxvY2F0b3IgLSBOZXh0IHJlY29yZCBzZXQgbG9jYXRvclxuICogQHBhcmFtIHtDYWxsYmFjay48UXVlcnlSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtRdWVyeS48UXVlcnlSZXN1bHQ+fVxuICovXG4vKipcbiAqIFJldHJpZXZlIHNwZWNpZmllZCByZWNvcmRzXG4gKlxuICogQG1ldGhvZCBUb29saW5nI3F1ZXJ5TW9yZVxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5LjxTdHJpbmc+fSBpZHMgLSBBIHJlY29yZCBJRCBvciBhcnJheSBvZiByZWNvcmQgSURzXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmR8QXJyYXkuPFJlY29yZD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmR8QXJyYXkuPFJlY29yZD4+fVxuICovXG5cbi8qKlxuICogU3lub255bSBvZiBUb29saW5nI2NyZWF0ZSgpXG4gKlxuICogQG1ldGhvZCBUb29saW5nI2luc2VydFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5LjxPYmplY3Q+fSByZWNvcmRzIC0gQSByZWNvcmQgb3IgYXJyYXkgb2YgcmVjb3JkcyB0byBjcmVhdGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cbi8qKlxuICogQ3JlYXRlIHJlY29yZHNcbiAqXG4gKiBAbWV0aG9kIFRvb2xpbmcjY3JlYXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFNPYmplY3QgVHlwZVxuICogQHBhcmFtIHtSZWNvcmR8QXJyYXkuPFJlY29yZD59IHJlY29yZHMgLSBBIHJlY29yZCBvciBhcnJheSBvZiByZWNvcmRzIHRvIGNyZWF0ZVxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuXG4vKipcbiAqIFVwZGF0ZSByZWNvcmRzXG4gKlxuICogQG1ldGhvZCBUb29saW5nI3VwZGF0ZVxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEBwYXJhbSB7UmVjb3JkfEFycmF5LjxSZWNvcmQ+fSByZWNvcmRzIC0gQSByZWNvcmQgb3IgYXJyYXkgb2YgcmVjb3JkcyB0byB1cGRhdGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cblxuLyoqXG4gKiBVcHNlcnQgcmVjb3Jkc1xuICpcbiAqIEBtZXRob2QgVG9vbGluZyN1cHNlcnRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge1JlY29yZHxBcnJheS48UmVjb3JkPn0gcmVjb3JkcyAtIFJlY29yZCBvciBhcnJheSBvZiByZWNvcmRzIHRvIHVwc2VydFxuICogQHBhcmFtIHtTdHJpbmd9IGV4dElkRmllbGQgLSBFeHRlcm5hbCBJRCBmaWVsZCBuYW1lXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2tcbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fVxuICovXG5cbi8qKlxuICogU3lub255bSBvZiBUb29saW5nI2Rlc3Ryb3koKVxuICpcbiAqIEBtZXRob2QgVG9vbGluZyNkZWxldGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheS48U3RyaW5nPn0gaWRzIC0gQSBJRCBvciBhcnJheSBvZiBJRHMgdG8gZGVsZXRlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2tcbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fVxuICovXG4vKipcbiAqIFN5bm9ueW0gb2YgVG9vbGluZyNkZXN0cm95KClcbiAqXG4gKiBAbWV0aG9kIFRvb2xpbmcjZGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFNPYmplY3QgVHlwZVxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXkuPFN0cmluZz59IGlkcyAtIEEgSUQgb3IgYXJyYXkgb2YgSURzIHRvIGRlbGV0ZVxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuLyoqXG4gKiBEZWxldGUgcmVjb3Jkc1xuICpcbiAqIEBtZXRob2QgVG9vbGluZyNkZXN0cm95XG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFNPYmplY3QgVHlwZVxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXkuPFN0cmluZz59IGlkcyAtIEEgSUQgb3IgYXJyYXkgb2YgSURzIHRvIGRlbGV0ZVxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgVG9vbGluZyNkZXNjcmliZSgpXG4gKlxuICogQG1ldGhvZCBUb29saW5nI2Rlc2NyaWJlU09iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPERlc2NyaWJlU09iamVjdFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPERlc2NyaWJlU09iamVjdFJlc3VsdD59XG4gKi9cbi8qKlxuICogRGVzY3JpYmUgU09iamVjdCBtZXRhZGF0YVxuICpcbiAqIEBtZXRob2QgVG9vbGluZyNkZXNjcmliZVxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPERlc2NyaWJlU09iamVjdFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPERlc2NyaWJlU09iamVjdFJlc3VsdD59XG4gKi9cblxuLyoqXG4gKiBEZXNjcmliZSBnbG9iYWwgU09iamVjdHNcbiAqXG4gKiBAbWV0aG9kIFRvb2xpbmcjZGVzY3JpYmVHbG9iYWxcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPERlc2NyaWJlR2xvYmFsUmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48RGVzY3JpYmVHbG9iYWxSZXN1bHQ+fVxuICovXG5cbi8qKlxuICogR2V0IFNPYmplY3QgaW5zdGFuY2VcbiAqXG4gKiBAbWV0aG9kIFRvb2xpbmcjc29iamVjdFxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEByZXR1cm5zIHtTT2JqZWN0fVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVG9vbGluZ35FeGVjdXRlQW5vbnltb3VzUmVzdWx0XG4gKiBAcHJvcCB7Qm9vbGVhbn0gY29tcGlsZWQgLSBGbGFnIGlmIHRoZSBxdWVyeSBpcyBjb21waWxlZCBzdWNjZXNzZnVsbHlcbiAqIEBwcm9wIHtTdHJpbmd9IGNvbXBpbGVQcm9ibGVtIC0gRXJyb3IgcmVhc29uIGluIGNvbXBpbGF0aW9uXG4gKiBAcHJvcCB7Qm9vbGVhbn0gc3VjY2VzcyAtIEZsYWcgaWYgdGhlIGNvZGUgaXMgZXhlY3V0ZWQgc3VjY2Vzc2Z1bGx5XG4gKiBAcHJvcCB7TnVtYmVyfSBsaW5lIC0gTGluZSBudW1iZXIgZm9yIHRoZSBlcnJvclxuICogQHByb3Age051bWJlcn0gY29sdW1uIC0gQ29sdW1uIG51bWJlciBmb3IgdGhlIGVycm9yXG4gKiBAcHJvcCB7U3RyaW5nfSBleGNlcHRpb25NZXNzYWdlIC0gRXhjZXB0aW9uIG1lc3NhZ2VcbiAqIEBwcm9wIHtTdHJpbmd9IGV4Y2VwdGlvblN0YWNrVHJhY2UgLSBFeGNlcHRpb24gc3RhY2sgdHJhY2VcbiAqL1xuLyoqXG4gKiBFeGVjdXRlcyBBcGV4IGNvZGUgYW5vbnltb3VzbHlcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYm9keSAtIEFub255bW91cyBBcGV4IGNvZGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFRvb2xpbmd+RXhlY3V0ZUFub255bW91c1Jlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFRvb2xpbmd+RXhlY3V0ZUFub255bW91c1Jlc3VsdD59XG4gKi9cblRvb2xpbmcucHJvdG90eXBlLmV4ZWN1dGVBbm9ueW1vdXMgPSBmdW5jdGlvbihib2R5LCBjYWxsYmFjaykge1xuICB2YXIgdXJsID0gdGhpcy5fYmFzZVVybCgpICsgXCIvZXhlY3V0ZUFub255bW91cz9hbm9ueW1vdXNCb2R5PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGJvZHkpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlcyBBcGV4IHRlc3RzIGFzeW5jaHJvbm91c2x5XG4gKlxuICogQHBhcmFtIHtBcnJheS48U3RyaW5nPn0gY2xhc3NpZHMgLSBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBjbGFzcyBJRHNcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFRvb2xpbmd+RXhlY3V0ZUFub255bW91c1Jlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFRvb2xpbmd+RXhlY3V0ZUFub255bW91c1Jlc3VsdD59XG4gKi9cblRvb2xpbmcucHJvdG90eXBlLnJ1blRlc3RzQXN5bmNocm9ub3VzID0gZnVuY3Rpb24oY2xhc3NpZHMsIGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSB0aGlzLl9iYXNlVXJsKCkgKyBcIi9ydW5UZXN0c0FzeW5jaHJvbm91cy9cIjtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdFBvc3QodXJsLCB7Y2xhc3NpZHMgOiBjbGFzc2lkcy5qb2luKCcsJyl9LCB1bmRlZmluZWQsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogRXhlY3V0ZXMgQXBleCB0ZXN0cyBzeW5jaHJvbm91c2x5XG4gKlxuICogQHBhcmFtIHtBcnJheS48U3RyaW5nPn0gY2xhc3NuYW1lcyAtIENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIGNsYXNzIE5hbWVzXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxUb29saW5nfkV4ZWN1dGVBbm9ueW1vdXNSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxUb29saW5nfkV4ZWN1dGVBbm9ueW1vdXNSZXN1bHQ+fVxuICovXG5Ub29saW5nLnByb3RvdHlwZS5ydW5UZXN0c1N5bmNocm9ub3VzID0gZnVuY3Rpb24oY2xhc3NuYW1lcywgY2FsbGJhY2spIHtcbiAgdmFyIHVybCA9IHRoaXMuX2Jhc2VVcmwoKSArIFwiL3J1blRlc3RzU3luY2hyb25vdXMvXCI7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3RQb3N0KHVybCwge2NsYXNzbmFtZXMgOiBjbGFzc25hbWVzLmpvaW4oJywnKX0sIHVuZGVmaW5lZCwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUb29saW5nfkNvbXBsZXRpb25zUmVzdWx0XG4gKiBAcHJvcCB7T2JqZWN0fSBwdWJsaWNEZWNsYXJhdGlvbnNcbiAqL1xuLyoqXG4gKiBSZXRyaWV2ZXMgYXZhaWxhYmxlIGNvZGUgY29tcGxldGlvbnMgb2YgdGhlIHJlZmVyZW5jZWQgdHlwZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdHlwZV0gLSBjb21wbGV0aW9uIHR5cGUgKGRlZmF1bHQgJ2FwZXgnKVxuICogQHBhcmFtIHtDYWxsYmFjay48VG9vbGluZ35Db21wbGV0aW9uc1Jlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFRvb2xpbmd+Q29tcGxldGlvbnNSZXN1bHQ+fVxuICovXG5Ub29saW5nLnByb3RvdHlwZS5jb21wbGV0aW9ucyA9IGZ1bmN0aW9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gIGlmICghXy5pc1N0cmluZyh0eXBlKSkge1xuICAgIGNhbGxiYWNrID0gdHlwZTtcbiAgICB0eXBlID0gJ2FwZXgnO1xuICB9XG4gIHZhciB1cmwgPSB0aGlzLl9iYXNlVXJsKCkgKyBcIi9jb21wbGV0aW9ucz90eXBlPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHR5cGUpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qXG4gKiBSZWdpc3RlciBob29rIGluIGNvbm5lY3Rpb24gaW5zdGFudGlhdGlvbiBmb3IgZHluYW1pY2FsbHkgYWRkaW5nIHRoaXMgQVBJIG1vZHVsZSBmZWF0dXJlc1xuICovXG5qc2ZvcmNlLm9uKCdjb25uZWN0aW9uOm5ldycsIGZ1bmN0aW9uKGNvbm4pIHtcbiAgY29ubi50b29saW5nID0gbmV3IFRvb2xpbmcoY29ubik7XG59KTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFRvb2xpbmc7XG4iLCIvKmdsb2JhbCBTZmRjICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBEdXBsZXggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0nKS5EdXBsZXgsXG4gICAgXyA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyk7XG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVycyhocykge1xuICB2YXIgaGVhZGVycyA9IHt9O1xuICBocy5zcGxpdCgvXFxuLykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgdmFyIHBhaXIgPSBsaW5lLnNwbGl0KC9cXHMqOlxccyovKTtcbiAgICB2YXIgbmFtZSA9IHBhaXJbMF0udG9Mb3dlckNhc2UoKTtcbiAgICB2YXIgdmFsdWUgPSBwYWlyWzFdO1xuICAgIGhlYWRlcnNbbmFtZV0gPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiBoZWFkZXJzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuICBzdXBwb3J0ZWQ6IHR5cGVvZiBTZmRjID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgU2ZkYy5jYW52YXMgIT09ICd1bmRlZmluZWQnLFxuXG4gIGNyZWF0ZVJlcXVlc3Q6IGZ1bmN0aW9uKHNpZ25lZFJlcXVlc3QpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ocGFyYW1zLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHJlc3BvbnNlO1xuICAgICAgdmFyIHN0ciA9IG5ldyBEdXBsZXgoKTtcbiAgICAgIHN0ci5fcmVhZCA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgICAgc3RyLnB1c2gocmVzcG9uc2UuYm9keSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgYnVmcyA9IFtdO1xuICAgICAgdmFyIHNlbnQgPSBmYWxzZTtcbiAgICAgIHN0ci5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgICAgIGJ1ZnMucHVzaChjaHVuay50b1N0cmluZyhlbmNvZGluZykpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfTtcbiAgICAgIHN0ci5vbignZmluaXNoJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghc2VudCkge1xuICAgICAgICAgIHNlbmQoYnVmcy5qb2luKCcnKSk7XG4gICAgICAgICAgc2VudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKHBhcmFtcy5ib2R5IHx8IHBhcmFtcy5ib2R5ID09PSBcIlwiIHx8ICEvXihwdXR8cG9zdHxwYXRjaCkkL2kudGVzdChwYXJhbXMubWV0aG9kKSkge1xuICAgICAgICBzZW5kKHBhcmFtcy5ib2R5KTtcbiAgICAgICAgc2VudCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNlbmQoYm9keSkge1xuICAgICAgICB2YXIgc2V0dGluZ3MgPSB7XG4gICAgICAgICAgY2xpZW50OiBzaWduZWRSZXF1ZXN0LmNsaWVudCxcbiAgICAgICAgICBtZXRob2Q6IHBhcmFtcy5tZXRob2QsXG4gICAgICAgICAgZGF0YTogYm9keVxuICAgICAgICB9O1xuICAgICAgICBpZiAocGFyYW1zLmhlYWRlcnMpIHtcbiAgICAgICAgICBzZXR0aW5ncy5oZWFkZXJzID0ge307XG4gICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBwYXJhbXMuaGVhZGVycykge1xuICAgICAgICAgICAgaWYgKG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAgICAgc2V0dGluZ3MuY29udGVudFR5cGUgPSBwYXJhbXMuaGVhZGVyc1tuYW1lXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldHRpbmdzLmhlYWRlcnNbbmFtZV0gPSBwYXJhbXMuaGVhZGVyc1tuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0dGluZ3Muc3VjY2VzcyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICB2YXIgaGVhZGVycyA9IHBhcnNlSGVhZGVycyhkYXRhLnJlc3BvbnNlSGVhZGVycyk7XG4gICAgICAgICAgdmFyIGJvZHkgPSBkYXRhLnBheWxvYWQ7XG4gICAgICAgICAgaWYgKCFfLmlzU3RyaW5nKGJvZHkpKSB7XG4gICAgICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3BvbnNlID0ge1xuICAgICAgICAgICAgc3RhdHVzQ29kZSA6IGRhdGEuc3RhdHVzLFxuICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IGJvZHlcbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UsIHJlc3BvbnNlLmJvZHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdHIuZW5kKCk7XG4gICAgICAgIH07XG4gICAgICAgIHNldHRpbmdzLmZhaWx1cmUgPSBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBTZmRjLmNhbnZhcy5jbGllbnQuYWpheChwYXJhbXMudXJsLCBzZXR0aW5ncyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH07XG4gIH1cbn07XG4iLCIvKipcbiAqIEBmaWxlIEJyb3dzZXIgY2xpZW50IGNvbm5lY3Rpb24gbWFuYWdlbWVudCBjbGFzc1xuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyksXG4gICAgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpLFxuICAgIHFzID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKSxcbiAgICBfID0gcmVxdWlyZSgnbG9kYXNoL2NvcmUnKSxcbiAgICBDb25uZWN0aW9uID0gcmVxdWlyZSgnLi4vY29ubmVjdGlvbicpLFxuICAgIE9BdXRoMiA9IHJlcXVpcmUoJy4uL29hdXRoMicpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBvcHVwV2luKHVybCwgdywgaCkge1xuICB2YXIgbGVmdCA9IChzY3JlZW4ud2lkdGgvMiktKHcvMik7XG4gIHZhciB0b3AgPSAoc2NyZWVuLmhlaWdodC8yKS0oaC8yKTtcbiAgcmV0dXJuIHdpbmRvdy5vcGVuKHVybCwgbnVsbCwgJ2xvY2F0aW9uPXllcyx0b29sYmFyPW5vLHN0YXR1cz1ubyxtZW51YmFyPW5vLHdpZHRoPScrdysnLGhlaWdodD0nK2grJyx0b3A9Jyt0b3ArJyxsZWZ0PScrbGVmdCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhbGxiYWNrUmVzcG9uc2UoKSB7XG4gIHZhciByZXMgPSBjaGVja0NhbGxiYWNrUmVzcG9uc2UoKTtcbiAgdmFyIHN0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2pzZm9yY2Vfc3RhdGUnKTtcbiAgaWYgKHJlcyAmJiBzdGF0ZSAmJiByZXMuYm9keS5zdGF0ZSA9PT0gc3RhdGUpIHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnanNmb3JjZV9zdGF0ZScpO1xuICAgIHZhciBzdGF0ZXMgPSBzdGF0ZS5zcGxpdCgnLicpO1xuICAgIHZhciBwcmVmaXggPSBzdGF0ZXNbMF0sIHByb21wdFR5cGUgPSBzdGF0ZXNbMV07XG4gICAgdmFyIGNsaSA9IG5ldyBDbGllbnQocHJlZml4KTtcbiAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcbiAgICAgIGNsaS5fc3RvcmVUb2tlbnMocmVzLmJvZHkpO1xuICAgICAgbG9jYXRpb24uaGFzaCA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGkuX3N0b3JlRXJyb3IocmVzLmJvZHkpO1xuICAgIH1cbiAgICBpZiAocHJvbXB0VHlwZSA9PT0gJ3BvcHVwJykgeyB3aW5kb3cuY2xvc2UoKTsgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2hlY2tDYWxsYmFja1Jlc3BvbnNlKCkge1xuICB2YXIgcGFyYW1zO1xuICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2gpIHtcbiAgICBwYXJhbXMgPSBxcy5wYXJzZSh3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkpO1xuICAgIGlmIChwYXJhbXMuYWNjZXNzX3Rva2VuKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBib2R5OiBwYXJhbXMgfTtcbiAgICB9XG4gIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLnNlYXJjaCkge1xuICAgIHBhcmFtcyA9IHFzLnBhcnNlKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpKTtcbiAgICBpZiAocGFyYW1zLmVycm9yKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgYm9keTogcGFyYW1zIH07XG4gICAgfVxuICB9XG59XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbnZhciBjbGllbnRJZHggPSAwO1xuXG5cbi8qKlxuICogQGNsYXNzXG4gKiBAdG9kbyBhZGQgZG9jdW1lbnRcbiAqL1xudmFyIENsaWVudCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICB0aGlzLl9wcmVmaXggPSBwcmVmaXggfHwgJ2pzZm9yY2UnICsgY2xpZW50SWR4Kys7XG4gIHRoaXMuY29ubmVjdGlvbiA9IG51bGw7XG59O1xuXG5pbmhlcml0cyhDbGllbnQsIGV2ZW50cy5FdmVudEVtaXR0ZXIpO1xuXG4vKipcbiAqXG4gKi9cbkNsaWVudC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKGNvbmZpZykge1xuICBpZiAoaGFuZGxlQ2FsbGJhY2tSZXNwb25zZSgpKSB7IHJldHVybjsgfVxuICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgdGhpcy5jb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb24oY29uZmlnKTtcbiAgdmFyIHRva2VucyA9IHRoaXMuX2dldFRva2VucygpO1xuICBpZiAodG9rZW5zKSB7XG4gICAgdGhpcy5jb25uZWN0aW9uLmluaXRpYWxpemUodG9rZW5zKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuZW1pdCgnY29ubmVjdCcsIHNlbGYuY29ubmVjdGlvbik7XG4gICAgfSwgMTApO1xuICB9XG59O1xuXG4vKipcbiAqXG4gKi9cbkNsaWVudC5wcm90b3R5cGUubG9naW4gPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAoXy5pc0Z1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbigpeyB9O1xuICBfLmV4dGVuZChvcHRpb25zLCB0aGlzLmNvbmZpZyk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5fcHJvbXB0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbn07XG5cblxuQ2xpZW50LnByb3RvdHlwZS5fcHJvbXB0ID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgb2F1dGgyID0gbmV3IE9BdXRoMihvcHRpb25zKTtcbiAgdmFyIHJhbmQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMik7XG4gIHZhciBzdGF0ZSA9IFsgdGhpcy5fcHJlZml4LCBcInBvcHVwXCIsIHJhbmQgXS5qb2luKCcuJyk7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwianNmb3JjZV9zdGF0ZVwiLCBzdGF0ZSk7XG4gIHZhciBhdXRoelVybCA9IG9hdXRoMi5nZXRBdXRob3JpemF0aW9uVXJsKHtcbiAgICByZXNwb25zZV90eXBlOiAndG9rZW4nLFxuICAgIHNjb3BlIDogb3B0aW9ucy5zY29wZSxcbiAgICBzdGF0ZTogc3RhdGVcbiAgfSk7XG4gIHZhciBzaXplID0gb3B0aW9ucy5zaXplIHx8IHt9O1xuICB2YXIgcHcgPSBwb3B1cFdpbihhdXRoelVybCwgc2l6ZS53aWR0aCB8fCA5MTIsIHNpemUuaGVpZ2h0IHx8IDUxMyk7XG4gIGlmICghcHcpIHtcbiAgICBzdGF0ZSA9IFsgdGhpcy5fcHJlZml4LCBcInJlZGlyZWN0XCIsIHJhbmQgXS5qb2luKCcuJyk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJqc2ZvcmNlX3N0YXRlXCIsIHN0YXRlKTtcbiAgICBhdXRoelVybCA9IG9hdXRoMi5nZXRBdXRob3JpemF0aW9uVXJsKHtcbiAgICAgIHJlc3BvbnNlX3R5cGU6ICd0b2tlbicsXG4gICAgICBzY29wZSA6IG9wdGlvbnMuc2NvcGUsXG4gICAgICBzdGF0ZTogc3RhdGVcbiAgICB9KTtcbiAgICBsb2NhdGlvbi5ocmVmID0gYXV0aHpVcmw7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNlbGYuX3JlbW92ZVRva2VucygpO1xuICB2YXIgcGlkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghcHcgfHwgcHcuY2xvc2VkKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwocGlkKTtcbiAgICAgICAgdmFyIHRva2VucyA9IHNlbGYuX2dldFRva2VucygpO1xuICAgICAgICBpZiAodG9rZW5zKSB7XG4gICAgICAgICAgc2VsZi5jb25uZWN0aW9uLmluaXRpYWxpemUodG9rZW5zKTtcbiAgICAgICAgICBzZWxmLmVtaXQoJ2Nvbm5lY3QnLCBzZWxmLmNvbm5lY3Rpb24pO1xuICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHsgc3RhdHVzOiAnY29ubmVjdCcgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGVyciA9IHNlbGYuX2dldEVycm9yKCk7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKGVyci5lcnJvciArIFwiOiBcIiArIGVyci5lcnJvcl9kZXNjcmlwdGlvbikpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCB7IHN0YXR1czogJ2NhbmNlbCcgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7fVxuICB9LCAxMDAwKTtcbn07XG5cbi8qKlxuICpcbiAqL1xuQ2xpZW50LnByb3RvdHlwZS5pc0xvZ2dlZEluID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAhISh0aGlzLmNvbm5lY3Rpb24gJiYgdGhpcy5jb25uZWN0aW9uLmFjY2Vzc1Rva2VuKTtcbn07XG5cbi8qKlxuICpcbiAqL1xuQ2xpZW50LnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5jb25uZWN0aW9uLmxvZ291dCgpO1xuICB0aGlzLl9yZW1vdmVUb2tlbnMoKTtcbiAgdGhpcy5lbWl0KCdkaXNjb25uZWN0Jyk7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkNsaWVudC5wcm90b3R5cGUuX2dldFRva2VucyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cChcIihefDtcXFxccyopXCIrdGhpcy5fcHJlZml4K1wiX2xvZ2dlZGluPXRydWUoO3wkKVwiKTtcbiAgaWYgKGRvY3VtZW50LmNvb2tpZS5tYXRjaChyZWdleHApKSB7XG4gICAgdmFyIGlzc3VlZEF0ID0gTnVtYmVyKGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuX3ByZWZpeCsnX2lzc3VlZF9hdCcpKTtcbiAgICBpZiAoRGF0ZS5ub3coKSA8IGlzc3VlZEF0ICsgMiAqIDYwICogNjAgKiAxMDAwKSB7IC8vIDIgaG91cnNcbiAgICAgIHZhciB1c2VySW5mbztcbiAgICAgIHZhciBpZFVybCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuX3ByZWZpeCArICdfaWQnKTtcbiAgICAgIGlmIChpZFVybCkge1xuICAgICAgICB2YXIgaWRzID0gaWRVcmwuc3BsaXQoJy8nKTtcbiAgICAgICAgdXNlckluZm8gPSB7IGlkOiBpZHMucG9wKCksIG9yZ2FuaXphdGlvbklkOiBpZHMucG9wKCksIHVybDogaWRVcmwgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFjY2Vzc1Rva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9wcmVmaXggKyAnX2FjY2Vzc190b2tlbicpLFxuICAgICAgICBpbnN0YW5jZVVybDogbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5fcHJlZml4ICsgJ19pbnN0YW5jZV91cmwnKSxcbiAgICAgICAgdXNlckluZm86IHVzZXJJbmZvXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuQ2xpZW50LnByb3RvdHlwZS5fc3RvcmVUb2tlbnMgPSBmdW5jdGlvbihwYXJhbXMpIHtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5fcHJlZml4ICsgJ19hY2Nlc3NfdG9rZW4nLCBwYXJhbXMuYWNjZXNzX3Rva2VuKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5fcHJlZml4ICsgJ19pbnN0YW5jZV91cmwnLCBwYXJhbXMuaW5zdGFuY2VfdXJsKTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5fcHJlZml4ICsgJ19pc3N1ZWRfYXQnLCBwYXJhbXMuaXNzdWVkX2F0KTtcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5fcHJlZml4ICsgJ19pZCcsIHBhcmFtcy5pZCk7XG4gIGRvY3VtZW50LmNvb2tpZSA9IHRoaXMuX3ByZWZpeCArICdfbG9nZ2VkaW49dHJ1ZTsnO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5DbGllbnQucHJvdG90eXBlLl9yZW1vdmVUb2tlbnMgPSBmdW5jdGlvbigpIHtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5fcHJlZml4ICsgJ19hY2Nlc3NfdG9rZW4nKTtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5fcHJlZml4ICsgJ19pbnN0YW5jZV91cmwnKTtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5fcHJlZml4ICsgJ19pc3N1ZWRfYXQnKTtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5fcHJlZml4ICsgJ19pZCcpO1xuICBkb2N1bWVudC5jb29raWUgPSB0aGlzLl9wcmVmaXggKyAnX2xvZ2dlZGluPSc7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbkNsaWVudC5wcm90b3R5cGUuX2dldEVycm9yID0gZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgdmFyIGVyciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5fcHJlZml4ICsgJ19lcnJvcicpKTtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLl9wcmVmaXggKyAnX2Vycm9yJyk7XG4gICAgcmV0dXJuIGVycjtcbiAgfSBjYXRjaChlKSB7fVxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5DbGllbnQucHJvdG90eXBlLl9zdG9yZUVycm9yID0gZnVuY3Rpb24oZXJyKSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuX3ByZWZpeCArICdfZXJyb3InLCBKU09OLnN0cmluZ2lmeShlcnIpKTtcbn07XG5cbi8qKlxuICpcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBuZXcgQ2xpZW50KCk7XG5cbm1vZHVsZS5leHBvcnRzLkNsaWVudCA9IENsaWVudDtcbiIsIi8qZ2xvYmFsIHdpbmRvdywgZG9jdW1lbnQgKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIF9pbmRleCA9IDA7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIHN1cHBvcnRlZDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyxcblxuICBjcmVhdGVSZXF1ZXN0OiBmdW5jdGlvbihqc29ucFBhcmFtLCB0aW1lb3V0KSB7XG4gICAganNvbnBQYXJhbSA9IGpzb25wUGFyYW0gfHwgJ2NhbGxiYWNrJztcbiAgICB0aW1lb3V0ID0gdGltZW91dCB8fCAxMDAwMDtcblxuICAgIHJldHVybiBmdW5jdGlvbihwYXJhbXMsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAocGFyYW1zLm1ldGhvZC50b1VwcGVyQ2FzZSgpICE9PSAnR0VUJykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdKU09OUCBvbmx5IHN1cHBvcnRzIEdFVCByZXF1ZXN0LicpKTtcbiAgICAgIH1cbiAgICAgIHZhciBjYkZ1bmNOYW1lID0gJ19qc2ZvcmNlX2pzb25wQ2FsbGJhY2tfJyArICgrK19pbmRleCk7XG4gICAgICB2YXIgY2FsbGJhY2tzID0gd2luZG93O1xuICAgICAgdmFyIHVybCA9IHBhcmFtcy51cmw7XG4gICAgICB1cmwgKz0gdXJsLmluZGV4T2YoJz8nKT4wID8gJyYnIDogJz8nO1xuICAgICAgdXJsICs9IGpzb25wUGFyYW0gKyAnPScgKyBjYkZ1bmNOYW1lO1xuXG4gICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXG4gICAgICB2YXIgcGlkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoXCJKU09OUCBjYWxsIHRpbWUgb3V0LlwiKSk7XG4gICAgICB9LCB0aW1lb3V0KTtcblxuICAgICAgY2FsbGJhY2tzW2NiRnVuY05hbWVdID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwge1xuICAgICAgICAgIHN0YXR1c0NvZGU6IDIwMCxcbiAgICAgICAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVzKVxuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBjbGVhbnVwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChwaWQpO1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgZGVsZXRlIGNhbGxiYWNrc1tjYkZ1bmNOYW1lXTtcbiAgICAgIH07XG4gICAgfTtcblxuICB9XG5cbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgRHVwbGV4ID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtJykuRHVwbGV4O1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gvY29yZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBhcmFtcywgY2FsbGJhY2spIHtcbiAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICB4aHIub3BlbihwYXJhbXMubWV0aG9kLCBwYXJhbXMudXJsKTtcbiAgaWYgKHBhcmFtcy5oZWFkZXJzKSB7XG4gICAgZm9yICh2YXIgaGVhZGVyIGluIHBhcmFtcy5oZWFkZXJzKSB7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoZWFkZXIsIHBhcmFtcy5oZWFkZXJzW2hlYWRlcl0pO1xuICAgIH1cbiAgfVxuICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLCBcIiovKlwiKTtcbiAgdmFyIHJlc3BvbnNlO1xuICB2YXIgc3RyID0gbmV3IER1cGxleCgpO1xuICBzdHIuX3JlYWQgPSBmdW5jdGlvbihzaXplKSB7XG4gICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICBzdHIucHVzaChyZXNwb25zZS5ib2R5KTtcbiAgICB9XG4gIH07XG4gIHZhciBidWZzID0gW107XG4gIHZhciBzZW50ID0gZmFsc2U7XG4gIHN0ci5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gICAgYnVmcy5wdXNoKGNodW5rLnRvU3RyaW5nKGVuY29kaW5nID09PSBcImJ1ZmZlclwiID8gXCJiaW5hcnlcIiA6IGVuY29kaW5nKSk7XG4gICAgY2FsbGJhY2soKTtcbiAgfTtcbiAgc3RyLm9uKCdmaW5pc2gnLCBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXNlbnQpIHtcbiAgICAgIHhoci5zZW5kKGJ1ZnMuam9pbignJykpO1xuICAgICAgc2VudCA9IHRydWU7XG4gICAgfVxuICB9KTtcbiAgaWYgKHBhcmFtcy5ib2R5IHx8IHBhcmFtcy5ib2R5ID09PSBcIlwiIHx8ICEvXihwdXR8cG9zdHxwYXRjaCkkL2kudGVzdChwYXJhbXMubWV0aG9kKSkge1xuICAgIHhoci5zZW5kKHBhcmFtcy5ib2R5KTtcbiAgICBzZW50ID0gdHJ1ZTtcbiAgfVxuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICB2YXIgaGVhZGVyTmFtZXMgPSBnZXRSZXNwb25zZUhlYWRlck5hbWVzKHhocik7XG4gICAgICB2YXIgaGVhZGVycyA9IHt9O1xuICAgICAgXy5mb3JFYWNoKGhlYWRlck5hbWVzLCBmdW5jdGlvbihoZWFkZXJOYW1lKSB7XG4gICAgICAgIGlmIChoZWFkZXJOYW1lKSB7XG4gICAgICAgICAgaGVhZGVyc1toZWFkZXJOYW1lXSA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihoZWFkZXJOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgc3RhdHVzQ29kZTogeGhyLnN0YXR1cyxcbiAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgYm9keTogeGhyLnJlc3BvbnNlXG4gICAgICB9O1xuICAgICAgaWYgKCFyZXNwb25zZS5zdGF0dXNDb2RlKSB7XG4gICAgICAgIHJlc3BvbnNlLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlc3BvbnNlLmJvZHkgPSBcIkFjY2VzcyBEZWNsaW5lZFwiO1xuICAgICAgfVxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlLCByZXNwb25zZS5ib2R5KTtcbiAgICAgIH1cbiAgICAgIHN0ci5lbmQoKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBzdHI7XG59O1xuXG5mdW5jdGlvbiBnZXRSZXNwb25zZUhlYWRlck5hbWVzKHhocikge1xuICB2YXIgaGVhZGVyTGluZXMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8IFwiXCIpLnNwbGl0KC9bXFxyXFxuXSsvKTtcbiAgcmV0dXJuIF8ubWFwKGhlYWRlckxpbmVzLCBmdW5jdGlvbihoZWFkZXJMaW5lKSB7XG4gICAgcmV0dXJuIGhlYWRlckxpbmUuc3BsaXQoL1xccyo6LylbMF0udG9Mb3dlckNhc2UoKTtcbiAgfSk7XG59XG4iLCIvKipcbiAqIEBmaWxlIE1hbmFnZXMgYXN5bmNocm9ub3VzIG1ldGhvZCByZXNwb25zZSBjYWNoZVxuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyksXG4gICAgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpLFxuICAgIF8gICAgICA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyk7XG5cbi8qKlxuICogQ2xhc3MgZm9yIG1hbmFnaW5nIGNhY2hlIGVudHJ5XG4gKlxuICogQHByaXZhdGVcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgQ2FjaGVFbnRyeSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmZldGNoaW5nID0gZmFsc2U7XG59O1xuXG5pbmhlcml0cyhDYWNoZUVudHJ5LCBldmVudHMuRXZlbnRFbWl0dGVyKTtcblxuLyoqXG4gKiBHZXQgdmFsdWUgaW4gdGhlIGNhY2hlIGVudHJ5XG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48VD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsYmFja2VkIHRoZSBjYWNoZSBlbnRyeSB1cGRhdGVkXG4gKiBAcmV0dXJucyB7VHx1bmRlZmluZWR9XG4gKi9cbkNhY2hlRW50cnkucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIGlmICghY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5vbmNlKCd2YWx1ZScsIGNhbGxiYWNrKTtcbiAgICBpZiAoIV8uaXNVbmRlZmluZWQodGhpcy5fdmFsdWUpKSB7XG4gICAgICB0aGlzLmVtaXQoJ3ZhbHVlJywgdGhpcy5fdmFsdWUpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXQgdmFsdWUgaW4gdGhlIGNhY2hlIGVudHJ5XG4gKlxuICogQHBhcmFtIHtUfSBbdmFsdWVdIC0gQSB2YWx1ZSBmb3IgY2FjaGluZ1xuICovXG5DYWNoZUVudHJ5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmVtaXQoJ3ZhbHVlJywgdGhpcy5fdmFsdWUpO1xufTtcblxuLyoqXG4gKiBDbGVhciBjYWNoZWQgdmFsdWVcbiAqL1xuQ2FjaGVFbnRyeS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5mZXRjaGluZyA9IGZhbHNlO1xuICBkZWxldGUgdGhpcy5fdmFsdWU7XG59O1xuXG5cbi8qKlxuICogQ2FjaGluZyBtYW5hZ2VyIGZvciBhc3luYyBtZXRob2RzXG4gKlxuICogQGNsYXNzXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIENhY2hlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2VudHJpZXMgPSB7fTtcbn07XG5cbi8qKlxuICogcmV0cml2ZSBjYWNoZSBlbnRyeSwgb3IgY3JlYXRlIGlmIG5vdCBleGlzdHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IFtrZXldIC0gS2V5IG9mIGNhY2hlIGVudHJ5XG4gKiBAcmV0dXJucyB7Q2FjaGVFbnRyeX1cbiAqL1xuQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICBpZiAoa2V5ICYmIHRoaXMuX2VudHJpZXNba2V5XSkge1xuICAgIHJldHVybiB0aGlzLl9lbnRyaWVzW2tleV07XG4gIH0gZWxzZSB7XG4gICAgdmFyIGVudHJ5ID0gbmV3IENhY2hlRW50cnkoKTtcbiAgICB0aGlzLl9lbnRyaWVzW2tleV0gPSBlbnRyeTtcbiAgICByZXR1cm4gZW50cnk7XG4gIH1cbn07XG5cbi8qKlxuICogY2xlYXIgY2FjaGUgZW50cmllcyBwcmVmaXggbWF0Y2hpbmcgZ2l2ZW4ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gW2tleV0gLSBLZXkgcHJlZml4IG9mIGNhY2hlIGVudHJ5IHRvIGNsZWFyXG4gKi9cbkNhY2hlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKGtleSkge1xuICBmb3IgKHZhciBrIGluIHRoaXMuX2VudHJpZXMpIHtcbiAgICBpZiAoIWtleSB8fCBrLmluZGV4T2Yoa2V5KSA9PT0gMCkge1xuICAgICAgdGhpcy5fZW50cmllc1trXS5jbGVhcigpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBjcmVhdGUgYW5kIHJldHVybiBjYWNoZSBrZXkgZnJvbSBuYW1lc3BhY2UgYW5kIHNlcmlhbGl6ZWQgYXJndW1lbnRzLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGVLZXkobmFtZXNwYWNlLCBhcmdzKSB7XG4gIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJncyk7XG4gIHJldHVybiBuYW1lc3BhY2UgKyAnKCcgKyBfLm1hcChhcmdzLCBmdW5jdGlvbihhKXsgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGEpOyB9KS5qb2luKCcsJykgKyAnKSc7XG59XG5cbi8qKlxuICogRW5hYmxlIGNhY2hpbmcgZm9yIGFzeW5jIGNhbGwgZm4gdG8gaW50ZXJjZXB0IHRoZSByZXNwb25zZSBhbmQgc3RvcmUgaXQgdG8gY2FjaGUuXG4gKiBUaGUgb3JpZ2luYWwgYXN5bmMgY2FsbGwgZm4gaXMgYWx3YXlzIGludm9rZWQuXG4gKlxuICogQHByb3RlY3RlZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBGdW5jdGlvbiB0byBjb3ZlcnQgY2FjaGVhYmxlXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIFNjb3BlIG9mIGZ1bmN0aW9uIGNhbGxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSBDYWNoZWQgdmVyc2lvbiBvZiBmdW5jdGlvblxuICovXG5DYWNoZS5wcm90b3R5cGUubWFrZVJlc3BvbnNlQ2FjaGVhYmxlID0gZnVuY3Rpb24oZm4sIHNjb3BlLCBvcHRpb25zKSB7XG4gIHZhciBjYWNoZSA9IHRoaXM7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmdzLnBvcCgpO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgYXJncy5wdXNoKGNhbGxiYWNrKTtcbiAgICAgIGNhbGxiYWNrID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIGtleSA9IF8uaXNTdHJpbmcob3B0aW9ucy5rZXkpID8gb3B0aW9ucy5rZXkgOlxuICAgICAgICAgICAgICBfLmlzRnVuY3Rpb24ob3B0aW9ucy5rZXkpID8gb3B0aW9ucy5rZXkuYXBwbHkoc2NvcGUsIGFyZ3MpIDpcbiAgICAgICAgICAgICAgY3JlYXRlQ2FjaGVLZXkob3B0aW9ucy5uYW1lc3BhY2UsIGFyZ3MpO1xuICAgIHZhciBlbnRyeSA9IGNhY2hlLmdldChrZXkpO1xuICAgIGVudHJ5LmZldGNoaW5nID0gdHJ1ZTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGFyZ3MucHVzaChmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgICBlbnRyeS5zZXQoeyBlcnJvcjogZXJyLCByZXN1bHQ6IHJlc3VsdCB9KTtcbiAgICAgICAgY2FsbGJhY2soZXJyLCByZXN1bHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHZhciByZXQsIGVycm9yO1xuICAgIHRyeSB7XG4gICAgICByZXQgPSBmbi5hcHBseShzY29wZSB8fCB0aGlzLCBhcmdzKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIGVycm9yID0gZTtcbiAgICB9XG4gICAgaWYgKHJldCAmJiBfLmlzRnVuY3Rpb24ocmV0LnRoZW4pKSB7IC8vIGlmIHRoZSByZXR1cm5lZCB2YWx1ZSBpcyBwcm9taXNlXG4gICAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiByZXQudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICBlbnRyeS5zZXQoeyBlcnJvcjogdW5kZWZpbmVkLCByZXN1bHQ6IHJlc3VsdCB9KTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBlbnRyeS5zZXQoeyBlcnJvcjogZXJyLCByZXN1bHQ6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZW50cnkuc2V0KHsgZXJyb3I6IGVycm9yLCByZXN1bHQ6IHJldCB9KTtcbiAgICAgIGlmIChlcnJvcikgeyB0aHJvdyBlcnJvcjsgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gIH07XG59O1xuXG4vKipcbiAqIEVuYWJsZSBjYWNoaW5nIGZvciBhc3luYyBjYWxsIGZuIHRvIGxvb2t1cCB0aGUgcmVzcG9uc2UgY2FjaGUgZmlyc3QsIHRoZW4gaW52b2tlIG9yaWdpbmFsIGlmIG5vIGNhY2hlZCB2YWx1ZS5cbiAqXG4gKiBAcHJvdGVjdGVkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIEZ1bmN0aW9uIHRvIGNvdmVydCBjYWNoZWFibGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gU2NvcGUgb2YgZnVuY3Rpb24gY2FsbFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIENhY2hlZCB2ZXJzaW9uIG9mIGZ1bmN0aW9uXG4gKi9cbkNhY2hlLnByb3RvdHlwZS5tYWtlQ2FjaGVhYmxlID0gZnVuY3Rpb24oZm4sIHNjb3BlLCBvcHRpb25zKSB7XG4gIHZhciBjYWNoZSA9IHRoaXM7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgJGZuID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKTtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmdzLnBvcCgpO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgYXJncy5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgdmFyIGtleSA9IF8uaXNTdHJpbmcob3B0aW9ucy5rZXkpID8gb3B0aW9ucy5rZXkgOlxuICAgICAgICAgICAgICBfLmlzRnVuY3Rpb24ob3B0aW9ucy5rZXkpID8gb3B0aW9ucy5rZXkuYXBwbHkoc2NvcGUsIGFyZ3MpIDpcbiAgICAgICAgICAgICAgY3JlYXRlQ2FjaGVLZXkob3B0aW9ucy5uYW1lc3BhY2UsIGFyZ3MpO1xuICAgIHZhciBlbnRyeSA9IGNhY2hlLmdldChrZXkpO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkgeyAvLyBpZiBjYWxsYmFjayBpcyBub3QgZ2l2ZW4gaW4gbGFzdCBhcmcsIHJldHVybiBjYWNoZWQgcmVzdWx0IChpbW1lZGlhdGUpLlxuICAgICAgdmFyIHZhbHVlID0gZW50cnkuZ2V0KCk7XG4gICAgICBpZiAoIXZhbHVlKSB7IHRocm93IG5ldyBFcnJvcignRnVuY3Rpb24gY2FsbCByZXN1bHQgaXMgbm90IGNhY2hlZCB5ZXQuJyk7IH1cbiAgICAgIGlmICh2YWx1ZS5lcnJvcikgeyB0aHJvdyB2YWx1ZS5lcnJvcjsgfVxuICAgICAgcmV0dXJuIHZhbHVlLnJlc3VsdDtcbiAgICB9XG4gICAgZW50cnkuZ2V0KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBjYWxsYmFjayh2YWx1ZS5lcnJvciwgdmFsdWUucmVzdWx0KTtcbiAgICB9KTtcbiAgICBpZiAoIWVudHJ5LmZldGNoaW5nKSB7IC8vIG9ubHkgd2hlbiBubyBvdGhlciBjbGllbnQgaXMgY2FsbGluZyBmdW5jdGlvblxuICAgICAgZW50cnkuZmV0Y2hpbmcgPSB0cnVlO1xuICAgICAgYXJncy5wdXNoKGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICAgIGVudHJ5LnNldCh7IGVycm9yOiBlcnIsIHJlc3VsdDogcmVzdWx0IH0pO1xuICAgICAgfSk7XG4gICAgICBmbi5hcHBseShzY29wZSB8fCB0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH07XG4gICRmbi5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBrZXkgPSBfLmlzU3RyaW5nKG9wdGlvbnMua2V5KSA/IG9wdGlvbnMua2V5IDpcbiAgICAgICAgICAgICAgXy5pc0Z1bmN0aW9uKG9wdGlvbnMua2V5KSA/IG9wdGlvbnMua2V5LmFwcGx5KHNjb3BlLCBhcmd1bWVudHMpIDpcbiAgICAgICAgICAgICAgY3JlYXRlQ2FjaGVLZXkob3B0aW9ucy5uYW1lc3BhY2UsIGFyZ3VtZW50cyk7XG4gICAgY2FjaGUuY2xlYXIoa2V5KTtcbiAgfTtcbiAgcmV0dXJuICRmbjtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBDYWNoZTtcbiIsIi8qZ2xvYmFsIEJ1ZmZlciAqL1xuLyoqXG4gKiBAZmlsZSBDb25uZWN0aW9uIGNsYXNzIHRvIGtlZXAgdGhlIEFQSSBzZXNzaW9uIGluZm9ybWF0aW9uIGFuZCBtYW5hZ2UgcmVxdWVzdHNcbiAqIEBhdXRob3IgU2hpbmljaGkgVG9taXRhIDxzaGluaWNoaS50b21pdGFAZ21haWwuY29tPlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGV2ZW50cyAgPSByZXF1aXJlKCdldmVudHMnKSxcbiAgICBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyksXG4gICAgXyAgICAgICA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyksXG4gICAgUHJvbWlzZSA9IHJlcXVpcmUoJy4vcHJvbWlzZScpLFxuICAgIExvZ2dlciAgPSByZXF1aXJlKCcuL2xvZ2dlcicpLFxuICAgIE9BdXRoMiAgPSByZXF1aXJlKCcuL29hdXRoMicpLFxuICAgIFF1ZXJ5ICAgPSByZXF1aXJlKCcuL3F1ZXJ5JyksXG4gICAgU09iamVjdCA9IHJlcXVpcmUoJy4vc29iamVjdCcpLFxuICAgIFF1aWNrQWN0aW9uID0gcmVxdWlyZSgnLi9xdWljay1hY3Rpb24nKSxcbiAgICBIdHRwQXBpID0gcmVxdWlyZSgnLi9odHRwLWFwaScpLFxuICAgIFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0JyksXG4gICAgUHJvY2VzcyA9IHJlcXVpcmUoJy4vcHJvY2VzcycpLFxuICAgIENhY2hlICAgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgbG9naW5Vcmw6IFwiaHR0cHM6Ly9sb2dpbi5zYWxlc2ZvcmNlLmNvbVwiLFxuICBpbnN0YW5jZVVybDogXCJcIixcbiAgdmVyc2lvbjogXCI0Mi4wXCJcbn07XG5cbi8qXG4gKiBDb25zdGFudCBvZiBtYXhpbXVtIHJlY29yZHMgbnVtIGluIERNTCBvcGVyYXRpb24gKHVwZGF0ZS9kZWxldGUpXG4gKi9cbnZhciBNQVhfRE1MX0NPVU5UID0gMjAwO1xuXG5cbi8qKlxuICogQ29ubmVjdGlvbiBjbGFzcyB0byBrZWVwIHRoZSBBUEkgc2Vzc2lvbiBpbmZvcm1hdGlvbiBhbmQgbWFuYWdlIHJlcXVlc3RzXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyBldmVudHMuRXZlbnRFbWl0dGVyXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gQ29ubmVjdGlvbiBvcHRpb25zXG4gKiBAcGFyYW0ge09BdXRoMnxPYmplY3R9IFtvcHRpb25zLm9hdXRoMl0gLSBPQXV0aDIgaW5zdGFuY2Ugb3Igb3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gT0F1dGgyIGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMubG9nTGV2ZWxdIC0gT3V0cHV0IGxvZ2dpbmcgbGV2ZWwgKERFQlVHfElORk98V0FSTnxFUlJPUnxGQVRBTClcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy52ZXJzaW9uXSAtIFNhbGVzZm9yY2UgQVBJIFZlcnNpb24gKHdpdGhvdXQgXCJ2XCIgcHJlZml4KVxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heFJlcXVlc3RdIC0gTWF4IG51bWJlciBvZiByZXF1ZXN0cyBhbGxvd2VkIGluIHBhcmFsbGVsIGNhbGxcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5sb2dpblVybF0gLSBTYWxlc2ZvcmNlIExvZ2luIFNlcnZlciBVUkwgKGUuZy4gaHR0cHM6Ly9sb2dpbi5zYWxlc2ZvcmNlLmNvbS8pXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuaW5zdGFuY2VVcmxdIC0gU2FsZXNmb3JjZSBJbnN0YW5jZSBVUkwgKGUuZy4gaHR0cHM6Ly9uYTEuc2FsZXNmb3JjZS5jb20vKVxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnNlcnZlclVybF0gLSBTYWxlc2ZvcmNlIFNPQVAgc2VydmljZSBlbmRwb2ludCBVUkwgKGUuZy4gaHR0cHM6Ly9uYTEuc2FsZXNmb3JjZS5jb20vc2VydmljZXMvU29hcC91LzI4LjApXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYWNjZXNzVG9rZW5dIC0gU2FsZXNmb3JjZSBPQXV0aDIgYWNjZXNzIHRva2VuXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuc2Vzc2lvbklkXSAtIFNhbGVzZm9yY2Ugc2Vzc2lvbiBJRFxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnJlZnJlc2hUb2tlbl0gLSBTYWxlc2ZvcmNlIE9BdXRoMiByZWZyZXNoIHRva2VuXG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IFtvcHRpb25zLnNpZ25lZFJlcXVlc3RdIC0gU2FsZXNmb3JjZSBDYW52YXMgc2lnbmVkIHJlcXVlc3QgKFJhdyBCYXNlNjQgc3RyaW5nLCBKU09OIHN0cmluZywgb3IgZGVzZXJpYWxpemVkIEpTT04pXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMucHJveHlVcmxdIC0gQ3Jvc3MtZG9tYWluIHByb3h5IHNlcnZlciBVUkwsIHVzZWQgaW4gYnJvd3NlciBjbGllbnQsIG5vbiBWaXN1YWxmb3JjZSBhcHAuXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuaHR0cFByb3h5XSAtIFVSTCBvZiBIVFRQIHByb3h5IHNlcnZlciwgdXNlZCBpbiBzZXJ2ZXIgY2xpZW50LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmNhbGxPcHRpb25zXSAtIENhbGwgb3B0aW9ucyB1c2VkIGluIGVhY2ggU09BUC9SRVNUIEFQSSByZXF1ZXN0LiBTZWUgbWFudWFsLlxuICovXG52YXIgQ29ubmVjdGlvbiA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB0aGlzLl9sb2dnZXIgPSBuZXcgTG9nZ2VyKG9wdGlvbnMubG9nTGV2ZWwpO1xuXG4gIHZhciBvYXV0aDIgPSBvcHRpb25zLm9hdXRoMiB8fCB7XG4gICAgbG9naW5VcmwgOiBvcHRpb25zLmxvZ2luVXJsLFxuICAgIGNsaWVudElkIDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICBjbGllbnRTZWNyZXQgOiBvcHRpb25zLmNsaWVudFNlY3JldCxcbiAgICByZWRpcmVjdFVyaSA6IG9wdGlvbnMucmVkaXJlY3RVcmksXG4gICAgcHJveHlVcmw6IG9wdGlvbnMucHJveHlVcmwsXG4gICAgaHR0cFByb3h5OiBvcHRpb25zLmh0dHBQcm94eVxuICB9O1xuXG4gIC8qKlxuICAgKiBPQXV0aDIgb2JqZWN0XG4gICAqIEBtZW1iZXIge09BdXRoMn0gQ29ubmVjdGlvbiNvYXV0aDJcbiAgICovXG4gIHRoaXMub2F1dGgyID0gb2F1dGgyID0gb2F1dGgyIGluc3RhbmNlb2YgT0F1dGgyID8gb2F1dGgyIDogbmV3IE9BdXRoMihvYXV0aDIpO1xuXG4gIHRoaXMubG9naW5VcmwgPSBvcHRpb25zLmxvZ2luVXJsIHx8IG9hdXRoMi5sb2dpblVybCB8fCBkZWZhdWx0cy5sb2dpblVybDtcbiAgdGhpcy52ZXJzaW9uID0gb3B0aW9ucy52ZXJzaW9uIHx8IGRlZmF1bHRzLnZlcnNpb247XG4gIHRoaXMubWF4UmVxdWVzdCA9IG9wdGlvbnMubWF4UmVxdWVzdCB8fCB0aGlzLm1heFJlcXVlc3QgfHwgMTA7XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGlmIChvcHRpb25zLnByb3h5VXJsKSB7XG4gICAgdGhpcy5fdHJhbnNwb3J0ID0gbmV3IFRyYW5zcG9ydC5Qcm94eVRyYW5zcG9ydChvcHRpb25zLnByb3h5VXJsKTtcbiAgfSBlbHNlIGlmIChvcHRpb25zLmh0dHBQcm94eSkge1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG5ldyBUcmFuc3BvcnQuSHR0cFByb3h5VHJhbnNwb3J0KG9wdGlvbnMuaHR0cFByb3h5KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl90cmFuc3BvcnQgPSBuZXcgVHJhbnNwb3J0KCk7XG4gIH1cblxuICB0aGlzLmNhbGxPcHRpb25zID0gb3B0aW9ucy5jYWxsT3B0aW9ucztcblxuICAvKlxuICAgKiBGaXJlIGNvbm5lY3Rpb246bmV3IGV2ZW50IHRvIG5vdGlmeSBqc2ZvcmNlIHBsdWdpbiBtb2R1bGVzXG4gICAqL1xuICB2YXIganNmb3JjZSA9IHJlcXVpcmUoJy4vY29yZScpO1xuICBqc2ZvcmNlLmVtaXQoJ2Nvbm5lY3Rpb246bmV3JywgdGhpcyk7XG5cbiAgLyoqXG4gICAqIFN0cmVhbWluZyBBUEkgb2JqZWN0XG4gICAqIEBtZW1iZXIge1N0cmVhbWluZ30gQ29ubmVjdGlvbiNzdHJlYW1pbmdcbiAgICovXG4gIC8vIHRoaXMuc3RyZWFtaW5nID0gbmV3IFN0cmVhbWluZyh0aGlzKTtcbiAgLyoqXG4gICAqIEJ1bGsgQVBJIG9iamVjdFxuICAgKiBAbWVtYmVyIHtCdWxrfSBDb25uZWN0aW9uI2J1bGtcbiAgICovXG4gIC8vIHRoaXMuYnVsayA9IG5ldyBCdWxrKHRoaXMpO1xuICAvKipcbiAgICogVG9vbGluZyBBUEkgb2JqZWN0XG4gICAqIEBtZW1iZXIge1Rvb2xpbmd9IENvbm5lY3Rpb24jdG9vbGluZ1xuICAgKi9cbiAgLy8gdGhpcy50b29saW5nID0gbmV3IFRvb2xpbmcodGhpcyk7XG4gIC8qKlxuICAgKiBBbmFseXRpY3MgQVBJIG9iamVjdFxuICAgKiBAbWVtYmVyIHtBbmFseXRpY3N9IENvbm5lY3Rpb24jYW5hbHl0aWNzXG4gICAqL1xuICAvLyB0aGlzLmFuYWx5dGljcyA9IG5ldyBBbmFseXRpY3ModGhpcyk7XG4gIC8qKlxuICAgKiBDaGF0dGVyIEFQSSBvYmplY3RcbiAgICogQG1lbWJlciB7Q2hhdHRlcn0gQ29ubmVjdGlvbiNjaGF0dGVyXG4gICAqL1xuICAvLyB0aGlzLmNoYXR0ZXIgPSBuZXcgQ2hhdHRlcih0aGlzKTtcbiAgLyoqXG4gICAqIE1ldGFkYXRhIEFQSSBvYmplY3RcbiAgICogQG1lbWJlciB7TWV0YWRhdGF9IENvbm5lY3Rpb24jbWV0YWRhdGFcbiAgICovXG4gIC8vIHRoaXMubWV0YWRhdGEgPSBuZXcgTWV0YWRhdGEodGhpcyk7XG5cbiAgLyoqXG4gICAqIFNPQVAgQVBJIG9iamVjdFxuICAgKiBAbWVtYmVyIHtTb2FwQXBpfSBDb25uZWN0aW9uI3NvYXBcbiAgICovXG4gIC8vIHRoaXMuc29hcCA9IG5ldyBTb2FwQXBpKHRoaXMpO1xuXG4gIC8qKlxuICAgKiBBcGV4IFJFU1QgQVBJIG9iamVjdFxuICAgKiBAbWVtYmVyIHtBcGV4fSBDb25uZWN0aW9uI2FwZXhcbiAgICovXG4gIC8vIHRoaXMuYXBleCA9IG5ldyBBcGV4KHRoaXMpO1xuXG4gIC8qKlxuICAgKiBAbWVtYmVyIHtQcm9jZXNzfSBDb25uZWN0aW9uI3Byb2Nlc3NcbiAgICovXG4gIHRoaXMucHJvY2VzcyA9IG5ldyBQcm9jZXNzKHRoaXMpO1xuXG4gIC8qKlxuICAgKiBDYWNoZSBvYmplY3QgZm9yIHJlc3VsdFxuICAgKiBAbWVtYmVyIHtDYWNoZX0gQ29ubmVjdGlvbiNjYWNoZVxuICAgKi9cbiAgdGhpcy5jYWNoZSA9IG5ldyBDYWNoZSgpO1xuXG4gIC8vIEFsbG93IHRvIGRlbGVnYXRlIGNvbm5lY3Rpb24gcmVmcmVzaCB0byBvdXRlciBmdW5jdGlvblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciByZWZyZXNoRm4gPSBvcHRpb25zLnJlZnJlc2hGbjtcbiAgaWYgKCFyZWZyZXNoRm4gJiYgdGhpcy5vYXV0aDIuY2xpZW50SWQpIHtcbiAgICByZWZyZXNoRm4gPSBvYXV0aFJlZnJlc2hGbjtcbiAgfVxuICBpZiAocmVmcmVzaEZuKSB7XG4gICAgdGhpcy5fcmVmcmVzaERlbGVnYXRlID0gbmV3IEh0dHBBcGkuU2Vzc2lvblJlZnJlc2hEZWxlZ2F0ZSh0aGlzLCByZWZyZXNoRm4pO1xuICB9XG5cbiAgdmFyIGNhY2hlT3B0aW9ucyA9IHtcbiAgICBrZXk6IGZ1bmN0aW9uKHR5cGUpIHsgcmV0dXJuIHR5cGUgPyBcImRlc2NyaWJlLlwiICsgdHlwZSA6IFwiZGVzY3JpYmVcIjsgfVxuICB9O1xuICB0aGlzLmRlc2NyaWJlJCA9IHRoaXMuY2FjaGUubWFrZUNhY2hlYWJsZSh0aGlzLmRlc2NyaWJlLCB0aGlzLCBjYWNoZU9wdGlvbnMpO1xuICB0aGlzLmRlc2NyaWJlID0gdGhpcy5jYWNoZS5tYWtlUmVzcG9uc2VDYWNoZWFibGUodGhpcy5kZXNjcmliZSwgdGhpcywgY2FjaGVPcHRpb25zKTtcbiAgdGhpcy5kZXNjcmliZVNPYmplY3QkID0gdGhpcy5kZXNjcmliZSQ7XG4gIHRoaXMuZGVzY3JpYmVTT2JqZWN0ID0gdGhpcy5kZXNjcmliZTtcblxuICBjYWNoZU9wdGlvbnMgPSB7IGtleTogJ2Rlc2NyaWJlR2xvYmFsJyB9O1xuICB0aGlzLmRlc2NyaWJlR2xvYmFsJCA9IHRoaXMuY2FjaGUubWFrZUNhY2hlYWJsZSh0aGlzLmRlc2NyaWJlR2xvYmFsLCB0aGlzLCBjYWNoZU9wdGlvbnMpO1xuICB0aGlzLmRlc2NyaWJlR2xvYmFsID0gdGhpcy5jYWNoZS5tYWtlUmVzcG9uc2VDYWNoZWFibGUodGhpcy5kZXNjcmliZUdsb2JhbCwgdGhpcywgY2FjaGVPcHRpb25zKTtcblxuICB0aGlzLmluaXRpYWxpemUob3B0aW9ucyk7XG59O1xuXG5pbmhlcml0cyhDb25uZWN0aW9uLCBldmVudHMuRXZlbnRFbWl0dGVyKTtcblxuLyoqXG4gKiBJbml0aWFsaXplIGNvbm5lY3Rpb24uXG4gKlxuICogQHByb3RlY3RlZFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBJbml0aWFsaXphdGlvbiBvcHRpb25zXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuaW5zdGFuY2VVcmxdIC0gU2FsZXNmb3JjZSBJbnN0YW5jZSBVUkwgKGUuZy4gaHR0cHM6Ly9uYTEuc2FsZXNmb3JjZS5jb20vKVxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnNlcnZlclVybF0gLSBTYWxlc2ZvcmNlIFNPQVAgc2VydmljZSBlbmRwb2ludCBVUkwgKGUuZy4gaHR0cHM6Ly9uYTEuc2FsZXNmb3JjZS5jb20vc2VydmljZXMvU29hcC91LzI4LjApXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuYWNjZXNzVG9rZW5dIC0gU2FsZXNmb3JjZSBPQXV0aDIgYWNjZXNzIHRva2VuXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuc2Vzc2lvbklkXSAtIFNhbGVzZm9yY2Ugc2Vzc2lvbiBJRFxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnJlZnJlc2hUb2tlbl0gLSBTYWxlc2ZvcmNlIE9BdXRoMiByZWZyZXNoIHRva2VuXG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IFtvcHRpb25zLnNpZ25lZFJlcXVlc3RdIC0gU2FsZXNmb3JjZSBDYW52YXMgc2lnbmVkIHJlcXVlc3QgKFJhdyBCYXNlNjQgc3RyaW5nLCBKU09OIHN0cmluZywgb3IgZGVzZXJpYWxpemVkIEpTT04pXG4gKiBAcGFyYW0ge1VzZXJJbmZvfSBbb3B0aW9ucy51c2VySW5mb10gLSBMb2dnZWQgaW4gdXNlciBpbmZvcm1hdGlvblxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMuaW5zdGFuY2VVcmwgJiYgb3B0aW9ucy5zZXJ2ZXJVcmwpIHtcbiAgICBvcHRpb25zLmluc3RhbmNlVXJsID0gb3B0aW9ucy5zZXJ2ZXJVcmwuc3BsaXQoJy8nKS5zbGljZSgwLCAzKS5qb2luKCcvJyk7XG4gIH1cbiAgdGhpcy5pbnN0YW5jZVVybCA9IG9wdGlvbnMuaW5zdGFuY2VVcmwgfHwgb3B0aW9ucy5zZXJ2ZXJVcmwgfHwgdGhpcy5pbnN0YW5jZVVybCB8fCBkZWZhdWx0cy5pbnN0YW5jZVVybDtcblxuICB0aGlzLmFjY2Vzc1Rva2VuID0gb3B0aW9ucy5zZXNzaW9uSWQgfHwgb3B0aW9ucy5hY2Nlc3NUb2tlbiB8fCB0aGlzLmFjY2Vzc1Rva2VuO1xuICB0aGlzLnJlZnJlc2hUb2tlbiA9IG9wdGlvbnMucmVmcmVzaFRva2VuIHx8IHRoaXMucmVmcmVzaFRva2VuO1xuICBpZiAodGhpcy5yZWZyZXNoVG9rZW4gJiYgIXRoaXMuX3JlZnJlc2hEZWxlZ2F0ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlJlZnJlc2ggdG9rZW4gaXMgc3BlY2lmaWVkIHdpdGhvdXQgb2F1dGgyIGNsaWVudCBpbmZvcm1hdGlvbiBvciByZWZyZXNoIGZ1bmN0aW9uXCIpO1xuICB9XG5cbiAgdGhpcy5zaWduZWRSZXF1ZXN0ID0gb3B0aW9ucy5zaWduZWRSZXF1ZXN0ICYmIHBhcnNlU2lnbmVkUmVxdWVzdChvcHRpb25zLnNpZ25lZFJlcXVlc3QpO1xuICBpZiAodGhpcy5zaWduZWRSZXF1ZXN0KSB7XG4gICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHRoaXMuc2lnbmVkUmVxdWVzdC5jbGllbnQub2F1dGhUb2tlbjtcbiAgICBpZiAoVHJhbnNwb3J0LkNhbnZhc1RyYW5zcG9ydC5zdXBwb3J0ZWQpIHtcbiAgICAgIHRoaXMuX3RyYW5zcG9ydCA9IG5ldyBUcmFuc3BvcnQuQ2FudmFzVHJhbnNwb3J0KHRoaXMuc2lnbmVkUmVxdWVzdCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG9wdGlvbnMudXNlckluZm8pIHtcbiAgICB0aGlzLnVzZXJJbmZvID0gb3B0aW9ucy51c2VySW5mbztcbiAgfVxuXG4gIHRoaXMubGltaXRJbmZvID0ge307XG5cbiAgdGhpcy5zb2JqZWN0cyA9IHt9O1xuICB0aGlzLmNhY2hlLmNsZWFyKCk7XG4gIHRoaXMuY2FjaGUuZ2V0KCdkZXNjcmliZUdsb2JhbCcpLnJlbW92ZUFsbExpc3RlbmVycygndmFsdWUnKTtcbiAgdGhpcy5jYWNoZS5nZXQoJ2Rlc2NyaWJlR2xvYmFsJykub24oJ3ZhbHVlJywgXy5iaW5kKGZ1bmN0aW9uKHJlcykge1xuICAgIGlmIChyZXMucmVzdWx0KSB7XG4gICAgICB2YXIgdHlwZXMgPSBfLm1hcChyZXMucmVzdWx0LnNvYmplY3RzLCBmdW5jdGlvbihzbykgeyByZXR1cm4gc28ubmFtZTsgfSk7XG4gICAgICB0eXBlcy5mb3JFYWNoKHRoaXMuc29iamVjdCwgdGhpcyk7XG4gICAgfVxuICB9LCB0aGlzKSk7XG5cbiAgaWYgKHRoaXMudG9vbGluZykge1xuICAgIHRoaXMudG9vbGluZy5pbml0aWFsaXplKCk7XG4gIH1cblxuICB0aGlzLl9zZXNzaW9uVHlwZSA9IG9wdGlvbnMuc2Vzc2lvbklkID8gXCJzb2FwXCIgOiBcIm9hdXRoMlwiO1xuXG59O1xuXG4vKiogQHByaXZhdGUgKiovXG5mdW5jdGlvbiBvYXV0aFJlZnJlc2hGbihjb25uLCBjYWxsYmFjaykge1xuICBjb25uLm9hdXRoMi5yZWZyZXNoVG9rZW4oY29ubi5yZWZyZXNoVG9rZW4sIGZ1bmN0aW9uKGVyciwgcmVzKSB7XG4gICAgaWYgKGVycikgeyByZXR1cm4gY2FsbGJhY2soZXJyKTsgfVxuICAgIHZhciB1c2VySW5mbyA9IHBhcnNlSWRVcmwocmVzLmlkKTtcbiAgICBjb25uLmluaXRpYWxpemUoe1xuICAgICAgaW5zdGFuY2VVcmwgOiByZXMuaW5zdGFuY2VfdXJsLFxuICAgICAgYWNjZXNzVG9rZW4gOiByZXMuYWNjZXNzX3Rva2VuLFxuICAgICAgdXNlckluZm8gOiB1c2VySW5mb1xuICAgIH0pO1xuICAgIGNhbGxiYWNrKG51bGwsIHJlcy5hY2Nlc3NfdG9rZW4sIHJlcyk7XG4gIH0pO1xufVxuXG4vKiogQHByaXZhdGUgKiovXG5mdW5jdGlvbiBwYXJzZVNpZ25lZFJlcXVlc3Qoc3IpIHtcbiAgaWYgKF8uaXNTdHJpbmcoc3IpKSB7XG4gICAgaWYgKHNyWzBdID09PSAneycpIHsgLy8gbWlnaHQgYmUgSlNPTlxuICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3IpO1xuICAgIH0gZWxzZSB7IC8vIG1pZ2h0IGJlIG9yaWdpbmFsIGJhc2U2NC1lbmNvZGVkIHNpZ25lZCByZXF1ZXN0XG4gICAgICB2YXIgbXNnID0gc3Iuc3BsaXQoJy4nKS5wb3AoKTsgLy8gcmV0cmlldmUgbGF0dGVyIHBhcnRcbiAgICAgIHZhciBqc29uID0gQnVmZmVyLmZyb20obXNnLCAnYmFzZTY0JykudG9TdHJpbmcoJ3V0Zi04Jyk7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHNyO1xufVxuXG5cbi8qKiBAcHJpdmF0ZSAqKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLl9iYXNlVXJsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBbIHRoaXMuaW5zdGFuY2VVcmwsIFwic2VydmljZXMvZGF0YVwiLCBcInZcIiArIHRoaXMudmVyc2lvbiBdLmpvaW4oJy8nKTtcbn07XG5cbi8qKlxuICogQ29udmVydCBwYXRoIHRvIGFic29sdXRlIHVybFxuICogQHByaXZhdGVcbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuX25vcm1hbGl6ZVVybCA9IGZ1bmN0aW9uKHVybCkge1xuICBpZiAodXJsWzBdID09PSAnLycpIHtcbiAgICBpZiAodXJsLmluZGV4T2YoJy9zZXJ2aWNlcy8nKSA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VVcmwgKyB1cmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9iYXNlVXJsKCkgKyB1cmw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbn07XG5cbi8qKlxuICogU2VuZCBSRVNUIEFQSSByZXF1ZXN0IHdpdGggZ2l2ZW4gSFRUUCByZXF1ZXN0IGluZm8sIHdpdGggY29ubmVjdGVkIHNlc3Npb24gaW5mb3JtYXRpb24uXG4gKlxuICogRW5kcG9pbnQgVVJMIGNhbiBiZSBhYnNvbHV0ZSBVUkwgKCdodHRwczovL25hMS5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9kYXRhL3YzMi4wL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKVxuICogLCByZWxhdGl2ZSBwYXRoIGZyb20gcm9vdCAoJy9zZXJ2aWNlcy9kYXRhL3YzMi4wL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKVxuICogLCBvciByZWxhdGl2ZSBwYXRoIGZyb20gdmVyc2lvbiByb290ICgnL3NvYmplY3RzL0FjY291bnQvZGVzY3JpYmUnKS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IHJlcXVlc3QgLSBIVFRQIHJlcXVlc3Qgb2JqZWN0IG9yIFVSTCB0byBHRVQgcmVxdWVzdFxuICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3QubWV0aG9kIC0gSFRUUCBtZXRob2QgVVJMIHRvIHNlbmQgSFRUUCByZXF1ZXN0XG4gKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdC51cmwgLSBVUkwgdG8gc2VuZCBIVFRQIHJlcXVlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdC5oZWFkZXJzXSAtIEhUVFAgcmVxdWVzdCBoZWFkZXJzIGluIGhhc2ggb2JqZWN0IChrZXktdmFsdWUpXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gSFRUUCBBUEkgcmVxdWVzdCBvcHRpb25zXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24ocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSBudWxsO1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgLy8gaWYgcmVxdWVzdCBpcyBzaW1wbGUgc3RyaW5nLCByZWdhcmQgaXQgYXMgdXJsIGluIEdFVCBtZXRob2RcbiAgaWYgKF8uaXNTdHJpbmcocmVxdWVzdCkpIHtcbiAgICByZXF1ZXN0ID0geyBtZXRob2Q6ICdHRVQnLCB1cmw6IHJlcXVlc3QgfTtcbiAgfVxuICAvLyBpZiB1cmwgaXMgZ2l2ZW4gaW4gcmVsYXRpdmUgcGF0aCwgcHJlcGVuZCBiYXNlIHVybCBvciBpbnN0YW5jZSB1cmwgYmVmb3JlLlxuICByZXF1ZXN0LnVybCA9IHRoaXMuX25vcm1hbGl6ZVVybChyZXF1ZXN0LnVybCk7XG5cbiAgdmFyIGh0dHBBcGkgPSBuZXcgSHR0cEFwaSh0aGlzLCBvcHRpb25zKTtcblxuICAvLyBsb2cgYXBpIHVzYWdlIGFuZCBpdHMgcXVvdGFcbiAgaHR0cEFwaS5vbigncmVzcG9uc2UnLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgIGlmIChyZXNwb25zZS5oZWFkZXJzICYmIHJlc3BvbnNlLmhlYWRlcnNbXCJzZm9yY2UtbGltaXQtaW5mb1wiXSkge1xuICAgICAgdmFyIGFwaVVzYWdlID0gcmVzcG9uc2UuaGVhZGVyc1tcInNmb3JjZS1saW1pdC1pbmZvXCJdLm1hdGNoKC9hcGlcXC11c2FnZT0oXFxkKylcXC8oXFxkKykvKTtcbiAgICAgIGlmIChhcGlVc2FnZSkge1xuICAgICAgICBzZWxmLmxpbWl0SW5mbyA9IHtcbiAgICAgICAgICBhcGlVc2FnZToge1xuICAgICAgICAgICAgdXNlZDogcGFyc2VJbnQoYXBpVXNhZ2VbMV0sIDEwKSxcbiAgICAgICAgICAgIGxpbWl0OiBwYXJzZUludChhcGlVc2FnZVsyXSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBodHRwQXBpLnJlcXVlc3QocmVxdWVzdCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBTZW5kIEhUVFAgR0VUIHJlcXVlc3RcbiAqXG4gKiBFbmRwb2ludCBVUkwgY2FuIGJlIGFic29sdXRlIFVSTCAoJ2h0dHBzOi8vbmExLnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gKiAsIHJlbGF0aXZlIHBhdGggZnJvbSByb290ICgnL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gKiAsIG9yIHJlbGF0aXZlIHBhdGggZnJvbSB2ZXJzaW9uIHJvb3QgKCcvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgLSBFbmRwb2ludCBVUkwgdG8gcmVxdWVzdCBIVFRQIEdFVFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIEhUVFAgQVBJIHJlcXVlc3Qgb3B0aW9uc1xuICogQHBhcmFtIHtDYWxsYmFjay48T2JqZWN0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUucmVxdWVzdEdldCA9IGZ1bmN0aW9uKHVybCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgdmFyIHJlcXVlc3QgPSB7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIHVybDogdXJsXG4gIH07XG4gIHJldHVybiB0aGlzLnJlcXVlc3QocmVxdWVzdCwgb3B0aW9ucywgY2FsbGJhY2spO1xufTtcblxuXG4vKipcbiAqIFNlbmQgSFRUUCBQT1NUIHJlcXVlc3Qgd2l0aCBKU09OIGJvZHksIHdpdGggY29ubmVjdGVkIHNlc3Npb24gaW5mb3JtYXRpb25cbiAqXG4gKiBFbmRwb2ludCBVUkwgY2FuIGJlIGFic29sdXRlIFVSTCAoJ2h0dHBzOi8vbmExLnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gKiAsIHJlbGF0aXZlIHBhdGggZnJvbSByb290ICgnL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gKiAsIG9yIHJlbGF0aXZlIHBhdGggZnJvbSB2ZXJzaW9uIHJvb3QgKCcvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgLSBFbmRwb2ludCBVUkwgdG8gcmVxdWVzdCBIVFRQIFBPU1RcbiAqIEBwYXJhbSB7T2JqZWN0fSBib2R5IC0gQW55IEpTIG9iamVjdCB3aGljaCBjYW4gYmUgc2VyaWFsaXplZCB0byBKU09OXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gSFRUUCBBUEkgcmVxdWVzdCBvcHRpb25zXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5yZXF1ZXN0UG9zdCA9IGZ1bmN0aW9uKHVybCwgYm9keSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgdmFyIHJlcXVlc3QgPSB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICB1cmw6IHVybCxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH1cbiAgfTtcbiAgcmV0dXJuIHRoaXMucmVxdWVzdChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFNlbmQgSFRUUCBQVVQgcmVxdWVzdCB3aXRoIEpTT04gYm9keSwgd2l0aCBjb25uZWN0ZWQgc2Vzc2lvbiBpbmZvcm1hdGlvblxuICpcbiAqIEVuZHBvaW50IFVSTCBjYW4gYmUgYWJzb2x1dGUgVVJMICgnaHR0cHM6Ly9uYTEuc2FsZXNmb3JjZS5jb20vc2VydmljZXMvZGF0YS92MzIuMC9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJylcbiAqICwgcmVsYXRpdmUgcGF0aCBmcm9tIHJvb3QgKCcvc2VydmljZXMvZGF0YS92MzIuMC9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJylcbiAqICwgb3IgcmVsYXRpdmUgcGF0aCBmcm9tIHZlcnNpb24gcm9vdCAoJy9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJykuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybCAtIEVuZHBvaW50IFVSTCB0byByZXF1ZXN0IEhUVFAgUFVUXG4gKiBAcGFyYW0ge09iamVjdH0gYm9keSAtIEFueSBKUyBvYmplY3Qgd2hpY2ggY2FuIGJlIHNlcmlhbGl6ZWQgdG8gSlNPTlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIEhUVFAgQVBJIHJlcXVlc3Qgb3B0aW9uc1xuICogQHBhcmFtIHtDYWxsYmFjay48T2JqZWN0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUucmVxdWVzdFB1dCA9IGZ1bmN0aW9uKHVybCwgYm9keSwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgdmFyIHJlcXVlc3QgPSB7XG4gICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgIHVybDogdXJsLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxuICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfVxuICB9O1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHJlcXVlc3QsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogU2VuZCBIVFRQIFBBVENIIHJlcXVlc3Qgd2l0aCBKU09OIGJvZHlcbiAqXG4gKiBFbmRwb2ludCBVUkwgY2FuIGJlIGFic29sdXRlIFVSTCAoJ2h0dHBzOi8vbmExLnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gKiAsIHJlbGF0aXZlIHBhdGggZnJvbSByb290ICgnL3NlcnZpY2VzL2RhdGEvdjMyLjAvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpXG4gKiAsIG9yIHJlbGF0aXZlIHBhdGggZnJvbSB2ZXJzaW9uIHJvb3QgKCcvc29iamVjdHMvQWNjb3VudC9kZXNjcmliZScpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgLSBFbmRwb2ludCBVUkwgdG8gcmVxdWVzdCBIVFRQIFBBVENIXG4gKiBAcGFyYW0ge09iamVjdH0gYm9keSAtIEFueSBKUyBvYmplY3Qgd2hpY2ggY2FuIGJlIHNlcmlhbGl6ZWQgdG8gSlNPTlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIEhUVFAgQVBJIHJlcXVlc3Qgb3B0aW9uc1xuICogQHBhcmFtIHtDYWxsYmFjay48T2JqZWN0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUucmVxdWVzdFBhdGNoID0gZnVuY3Rpb24odXJsLCBib2R5LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICB2YXIgcmVxdWVzdCA9IHtcbiAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICB1cmw6IHVybCxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5KSxcbiAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH1cbiAgfTtcbiAgcmV0dXJuIHRoaXMucmVxdWVzdChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFNlbmQgSFRUUCBERUxFVEUgcmVxdWVzdFxuICpcbiAqIEVuZHBvaW50IFVSTCBjYW4gYmUgYWJzb2x1dGUgVVJMICgnaHR0cHM6Ly9uYTEuc2FsZXNmb3JjZS5jb20vc2VydmljZXMvZGF0YS92MzIuMC9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJylcbiAqICwgcmVsYXRpdmUgcGF0aCBmcm9tIHJvb3QgKCcvc2VydmljZXMvZGF0YS92MzIuMC9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJylcbiAqICwgb3IgcmVsYXRpdmUgcGF0aCBmcm9tIHZlcnNpb24gcm9vdCAoJy9zb2JqZWN0cy9BY2NvdW50L2Rlc2NyaWJlJykuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybCAtIEVuZHBvaW50IFVSTCB0byByZXF1ZXN0IEhUVFAgREVMRVRFXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gSFRUUCBBUEkgcmVxdWVzdCBvcHRpb25zXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5yZXF1ZXN0RGVsZXRlID0gZnVuY3Rpb24odXJsLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICB2YXIgcmVxdWVzdCA9IHtcbiAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgdXJsOiB1cmxcbiAgfTtcbiAgcmV0dXJuIHRoaXMucmVxdWVzdChyZXF1ZXN0LCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG5cbi8qKiBAcHJpdmF0ZSAqL1xuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG4gIGZ1bmN0aW9uIHBhZChudW1iZXIpIHtcbiAgICBpZiAobnVtYmVyIDwgMTApIHtcbiAgICAgIHJldHVybiAnMCcgKyBudW1iZXI7XG4gICAgfVxuICAgIHJldHVybiBudW1iZXI7XG4gIH1cblxuICByZXR1cm4gZGF0ZS5nZXRVVENGdWxsWWVhcigpICtcbiAgICAnLScgKyBwYWQoZGF0ZS5nZXRVVENNb250aCgpICsgMSkgK1xuICAgICctJyArIHBhZChkYXRlLmdldFVUQ0RhdGUoKSkgK1xuICAgICdUJyArIHBhZChkYXRlLmdldFVUQ0hvdXJzKCkpICtcbiAgICAnOicgKyBwYWQoZGF0ZS5nZXRVVENNaW51dGVzKCkpICtcbiAgICAnOicgKyBwYWQoZGF0ZS5nZXRVVENTZWNvbmRzKCkpICtcbiAgICAnKzAwOjAwJztcbn1cblxuXG4vKiogQHByaXZhdGUgKiovXG5mdW5jdGlvbiBwYXJzZUlkVXJsKGlkVXJsKSB7XG4gIHZhciBpZFVybHMgPSBpZFVybC5zcGxpdChcIi9cIik7XG4gIHZhciB1c2VySWQgPSBpZFVybHMucG9wKCksIG9yZ0lkID0gaWRVcmxzLnBvcCgpO1xuICByZXR1cm4ge1xuICAgIGlkOiB1c2VySWQsXG4gICAgb3JnYW5pemF0aW9uSWQ6IG9yZ0lkLFxuICAgIHVybDogaWRVcmxcbiAgfTtcbn1cblxuLyoqXG4gKiBAY2FsbGJhY2sgQ2FsbGJhY2tcbiAqIEB0eXBlIHtGdW5jdGlvbn1cbiAqIEBwYXJhbSB7RXJyb3J9IGVyciAtIENhbGxiYWNrIGVycm9yXG4gKiBAcGFyYW0ge1R9IHJlc3BvbnNlIC0gQ2FsbGJhY2sgcmVzcG9uc2VcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBRdWVyeVJlc3VsdFxuICogQHByb3Age0Jvb2xlYW59IGRvbmUgLSBGbGFnIGlmIHRoZSBxdWVyeSBpcyBmZXRjaGVkIGFsbCByZWNvcmRzIG9yIG5vdFxuICogQHByb3Age1N0cmluZ30gW25leHRSZWNvcmRzVXJsXSAtIFVSTCBsb2NhdG9yIGZvciBuZXh0IHJlY29yZCBzZXQsIChhdmFpbGFibGUgd2hlbiBkb25lID0gZmFsc2UpXG4gKiBAcHJvcCB7TnVtYmVyfSB0b3RhbFNpemUgLSBUb3RhbCBzaXplIGZvciBxdWVyeVxuICogQHByb3Age0FycmF5LjxSZWNvcmQ+fSBbcmVjb3Jkc10gLSBBcnJheSBvZiByZWNvcmRzIGZldGNoZWRcbiAqL1xuXG4vKipcbiAqIEV4ZWN1dGUgcXVlcnkgYnkgdXNpbmcgU09RTFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzb3FsIC0gU09RTCBzdHJpbmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBRdWVyeSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaGVhZGVyc10gLSBBZGRpdGlvbmFsIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHNlbnQgaW4gcXVlcnkgcmVxdWVzdFxuICogQHBhcmFtIHtDYWxsYmFjay48UXVlcnlSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtRdWVyeS48UXVlcnlSZXN1bHQ+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5xdWVyeSA9IGZ1bmN0aW9uKHNvcWwsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIHZhciBxdWVyeSA9IG5ldyBRdWVyeSh0aGlzLCBzb3FsLCBvcHRpb25zKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgcXVlcnkucnVuKGNhbGxiYWNrKTtcbiAgfVxuICByZXR1cm4gcXVlcnk7XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgcXVlcnkgYnkgdXNpbmcgU09RTCwgaW5jbHVkaW5nIGRlbGV0ZWQgcmVjb3Jkc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzb3FsIC0gU09RTCBzdHJpbmdcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBRdWVyeSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaGVhZGVyc10gLSBBZGRpdGlvbmFsIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHNlbnQgaW4gcXVlcnkgcmVxdWVzdFxuICogQHBhcmFtIHtDYWxsYmFjay48UXVlcnlSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtRdWVyeS48UXVlcnlSZXN1bHQ+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5xdWVyeUFsbCA9IGZ1bmN0aW9uKHNvcWwsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIHZhciBxdWVyeSA9IG5ldyBRdWVyeSh0aGlzLCBzb3FsLCBvcHRpb25zKTtcbiAgcXVlcnkuc2NhbkFsbCh0cnVlKTtcbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgcXVlcnkucnVuKGNhbGxiYWNrKTtcbiAgfVxuICByZXR1cm4gcXVlcnk7XG59O1xuXG4vKipcbiAqIFF1ZXJ5IG5leHQgcmVjb3JkIHNldCBieSB1c2luZyBxdWVyeSBsb2NhdG9yXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGxvY2F0b3IgLSBOZXh0IHJlY29yZCBzZXQgbG9jYXRvclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIFF1ZXJ5IG9wdGlvbnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5oZWFkZXJzXSAtIEFkZGl0aW9uYWwgSFRUUCByZXF1ZXN0IGhlYWRlcnMgc2VudCBpbiBxdWVyeSByZXF1ZXN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxRdWVyeVJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1F1ZXJ5LjxRdWVyeVJlc3VsdD59XG4gKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLnF1ZXJ5TW9yZSA9IGZ1bmN0aW9uKGxvY2F0b3IsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIHZhciBxdWVyeSA9IG5ldyBRdWVyeSh0aGlzLCB7IGxvY2F0b3I6IGxvY2F0b3IgfSwgb3B0aW9ucyk7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIHF1ZXJ5LnJ1bihjYWxsYmFjayk7XG4gIH1cbiAgcmV0dXJuIHF1ZXJ5O1xufTtcblxuLyoqIEBwcml2YXRlICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5fZW5zdXJlVmVyc2lvbiA9IGZ1bmN0aW9uKG1ham9yVmVyc2lvbikge1xuICB2YXIgdmVyc2lvbnMgPSB0aGlzLnZlcnNpb24uc3BsaXQoJy4nKTtcbiAgcmV0dXJuIHBhcnNlSW50KHZlcnNpb25zWzBdLCAxMCkgPj0gbWFqb3JWZXJzaW9uO1xufVxuXG4vKipcbiAqIFJldHJpZXZlIHNwZWNpZmllZCByZWNvcmRzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5LjxTdHJpbmc+fSBpZHMgLSBBIHJlY29yZCBJRCBvciBhcnJheSBvZiByZWNvcmQgSURzXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgcmVzdCBhcGkuXG4gKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fSBbb3B0aW9ucy5maWVsZHNdIC0gRmV0Y2hpbmcgZmllbGQgbmFtZXMgaW4gcmV0cmlldmluZyByZWNvcmRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5oZWFkZXJzXSAtIEFkZGl0aW9uYWwgSFRUUCByZXF1ZXN0IGhlYWRlcnMgc2VudCBpbiByZXRyaWV2ZSByZXF1ZXN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmR8QXJyYXkuPFJlY29yZD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmR8QXJyYXkuPFJlY29yZD4+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5yZXRyaWV2ZSA9IGZ1bmN0aW9uKHR5cGUsIGlkcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgcmV0dXJuIChcbiAgICBfLmlzQXJyYXkoaWRzKSA/XG4gICAgICAodGhpcy5fZW5zdXJlVmVyc2lvbig0MikgPyAvLyBjaGVjayB0aGUgdmVyc2lvbiB3aGV0aGVyIFNPYmplY3QgY29sbGVjdGlvbiBBUEkgaXMgc3VwcG9ydGVkICg0Mi4wKVxuICAgICAgICB0aGlzLl9yZXRyaWV2ZU1hbnkodHlwZSwgaWRzLCBvcHRpb25zKSA6XG4gICAgICAgIHRoaXMuX3JldHJpZXZlUGFyYWxsZWwodHlwZSwgaWRzLCBvcHRpb25zKSkgOlxuICAgICAgdGhpcy5fcmV0cmlldmVTaW5nbGUodHlwZSwgaWRzLCBvcHRpb25zKVxuICApLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKiBAcHJpdmF0ZSAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuX3JldHJpZXZlU2luZ2xlID0gZnVuY3Rpb24odHlwZSwgaWQsIG9wdGlvbnMpIHtcbiAgaWYgKCFpZCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0ludmFsaWQgcmVjb3JkIElELiBTcGVjaWZ5IHZhbGlkIHJlY29yZCBJRCB2YWx1ZScpKTtcbiAgfVxuICB2YXIgdXJsID0gWyB0aGlzLl9iYXNlVXJsKCksIFwic29iamVjdHNcIiwgdHlwZSwgaWQgXS5qb2luKCcvJyk7XG4gIGlmIChvcHRpb25zLmZpZWxkcykge1xuICAgIHVybCArPSAnP2ZpZWxkcz0nICsgb3B0aW9ucy5maWVsZHMuam9pbignLCcpO1xuICB9XG4gIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgdXJsOiB1cmwsXG4gICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzLFxuICB9KTtcbn07XG5cbi8qKiBAcHJpdmF0ZSAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuX3JldHJpZXZlUGFyYWxsZWwgPSBmdW5jdGlvbih0eXBlLCBpZHMsIG9wdGlvbnMpIHtcbiAgaWYgKGlkcy5sZW5ndGggPiB0aGlzLm1heFJlcXVlc3QpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiRXhjZWVkZWQgbWF4IGxpbWl0IG9mIGNvbmN1cnJlbnQgY2FsbFwiKSk7XG4gIH1cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgaWRzLm1hcChmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIHNlbGYuX3JldHJpZXZlU2luZ2xlKHR5cGUsIGlkLCBvcHRpb25zKS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWxsT3JOb25lIHx8IGVyci5lcnJvckNvZGUgIT09ICdOT1RfRk9VTkQnKSB7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSk7XG4gICAgfSlcbiAgKTtcbn07XG5cbi8qKiBAcHJpdmF0ZSAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuX3JldHJpZXZlTWFueSA9IGZ1bmN0aW9uKHR5cGUsIGlkcywgb3B0aW9ucykge1xuICBpZiAoaWRzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICB9XG4gIHZhciB1cmwgPSBbIHRoaXMuX2Jhc2VVcmwoKSwgXCJjb21wb3NpdGVcIiwgXCJzb2JqZWN0c1wiLCB0eXBlIF0uam9pbignLycpO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHJldHVybiAoXG4gICAgb3B0aW9ucy5maWVsZHMgP1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKG9wdGlvbnMuZmllbGRzKSA6XG4gICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5kZXNjcmliZSQodHlwZSwgZnVuY3Rpb24oZXJyLCBzbykge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZmllbGRzID0gc28uZmllbGRzLm1hcChmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZmllbGQubmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzb2x2ZShmaWVsZHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KVxuICApLnRoZW4oZnVuY3Rpb24oZmllbGRzKSB7XG4gICAgcmV0dXJuIHNlbGYucmVxdWVzdCh7XG4gICAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgICB1cmwgOiB1cmwsXG4gICAgICBib2R5IDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpZHMgOiBpZHMsXG4gICAgICAgIGZpZWxkcyA6IGZpZWxkc1xuICAgICAgfSksXG4gICAgICBoZWFkZXJzIDogXy5kZWZhdWx0cyhvcHRpb25zLmhlYWRlcnMgfHwge30sIHtcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIiA6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9KVxuICAgIH0pO1xuICB9KTtcbn07XG5cblxuLyoqXG4gKiBAdHlwZWRlZiBSZWNvcmRSZXN1bHRcbiAqIEBwcm9wIHtCb29sZWFufSBzdWNjZXNzIC0gVGhlIHJlc3VsdCBpcyBzdWNjZWVzc2Z1bCBvciBub3RcbiAqIEBwcm9wIHtTdHJpbmd9IFtpZF0gLSBSZWNvcmQgSURcbiAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gW2Vycm9yc10gLSBFcnJvcnMgKGF2YWlsYWJsZSB3aGVuIHN1Y2Nlc3MgPSBmYWxzZSlcbiAqL1xuXG4vKiogQHByaXZhdGUgKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLl90b1JlY29yZFJlc3VsdCA9IGZ1bmN0aW9uKGlkLCBlcnIpIHtcbiAgdmFyIGVycm9yID0ge1xuICAgIHN0YXR1c0NvZGU6IGVyci5lcnJvckNvZGUsXG4gICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgfTtcbiAgaWYgKGVyci5jb250ZW50KSB7IGVycm9yLmNvbnRlbnQgPSBlcnIuY29udGVudDsgfSAvLyBwcmVzZXJ2ZSBFeHRlcm5hbCBpZCBkdXBsaWNhdGlvbiBtZXNzYWdlXG4gIGlmIChlcnIuZmllbGRzKSB7IGVycm9yLmZpZWxkcyA9IGVyci5maWVsZHM7IH0gLy8gcHJlc2VydmUgRE1MIGV4Y2VwdGlvbiBvY2N1cnJlZCBmaWVsZHNcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICBlcnJvcnM6IFtlcnJvcl1cbiAgfTtcbiAgaWYgKGlkKSB7IHJlc3VsdC5pZCA9IGlkOyB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgQ29ubmVjdGlvbiNjcmVhdGUoKVxuICpcbiAqIEBtZXRob2QgQ29ubmVjdGlvbiNpbnNlcnRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheS48T2JqZWN0Pn0gcmVjb3JkcyAtIEEgcmVjb3JkIG9yIGFycmF5IG9mIHJlY29yZHMgdG8gY3JlYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgcmVzdCBhcGkuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbE9yTm9uZV0gLSBJZiB0cnVlLCBhbnkgZmFpbGVkIHJlY29yZHMgaW4gYSBjYWxsIGNhdXNlIGFsbCBjaGFuZ2VzIGZvciB0aGUgY2FsbCB0byBiZSByb2xsZWQgYmFja1xuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hbGxvd1JlY3Vyc2l2ZV0gLSBJZiB0cnVlLCB3aGVuIHJlY29yZHMgZ29lcyBvdmVyIHRoZSBtYXggbnVtIG9mIGNvbGxlY3Rpb24gQVBJICg9MjAwKSwgcmVjb3JkcyBhcmUgZGl2aWRlZCBpbnRvIHNldmVyYWwgY2h1bmtzIGFuZCByZXF1ZXN0ZWQgcmVjdXJzaXZlbHkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaGVhZGVyc10gLSBBZGRpdGlvbmFsIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHNlbnQgaW4gcmV0cmlldmUgcmVxdWVzdFxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuLyoqXG4gKiBDcmVhdGUgcmVjb3Jkc1xuICpcbiAqIEBtZXRob2QgQ29ubmVjdGlvbiNjcmVhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge1JlY29yZHxBcnJheS48UmVjb3JkPn0gcmVjb3JkcyAtIEEgcmVjb3JkIG9yIGFycmF5IG9mIHJlY29yZHMgdG8gY3JlYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgcmVzdCBhcGkuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbE9yTm9uZV0gLSBJZiB0cnVlLCBhbnkgZmFpbGVkIHJlY29yZHMgaW4gYSBjYWxsIGNhdXNlIGFsbCBjaGFuZ2VzIGZvciB0aGUgY2FsbCB0byBiZSByb2xsZWQgYmFja1xuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hbGxvd1JlY3Vyc2l2ZV0gLSBJZiB0cnVlLCB3aGVuIHJlY29yZHMgZ29lcyBvdmVyIHRoZSBtYXggbnVtIG9mIGNvbGxlY3Rpb24gQVBJICg9MjAwKSwgcmVjb3JkcyBhcmUgZGl2aWRlZCBpbnRvIHNldmVyYWwgY2h1bmtzIGFuZCByZXF1ZXN0ZWQgcmVjdXJzaXZlbHkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaGVhZGVyc10gLSBBZGRpdGlvbmFsIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHNlbnQgaW4gcmV0cmlldmUgcmVxdWVzdFxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuaW5zZXJ0ID1cbkNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHR5cGUsIHJlY29yZHMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICghXy5pc1N0cmluZyh0eXBlKSkge1xuICAgIC8vIHJldmVyc2Ugb3JkZXJcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHJlY29yZHM7XG4gICAgcmVjb3JkcyA9IHR5cGU7XG4gICAgdHlwZSA9IG51bGw7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgcmV0dXJuIChcbiAgICBfLmlzQXJyYXkocmVjb3JkcykgP1xuICAgICAgKHRoaXMuX2Vuc3VyZVZlcnNpb24oNDIpID8gLy8gY2hlY2sgdGhlIHZlcnNpb24gd2hldGhlciBTT2JqZWN0IGNvbGxlY3Rpb24gQVBJIGlzIHN1cHBvcnRlZCAoNDIuMClcbiAgICAgICAgdGhpcy5fY3JlYXRlTWFueSh0eXBlLCByZWNvcmRzLCBvcHRpb25zKSA6XG4gICAgICAgIHRoaXMuX2NyZWF0ZVBhcmFsbGVsKHR5cGUsIHJlY29yZHMsIG9wdGlvbnMpKSA6XG4gICAgICB0aGlzLl9jcmVhdGVTaW5nbGUodHlwZSwgcmVjb3Jkcywgb3B0aW9ucylcbiAgKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKiogQHByaXZhdGUgKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLl9jcmVhdGVTaW5nbGUgPSBmdW5jdGlvbih0eXBlLCByZWNvcmQsIG9wdGlvbnMpIHtcbiAgdmFyIHNvYmplY3RUeXBlID0gdHlwZSB8fCAocmVjb3JkLmF0dHJpYnV0ZXMgJiYgcmVjb3JkLmF0dHJpYnV0ZXMudHlwZSkgfHwgcmVjb3JkLnR5cGU7XG4gIGlmICghc29iamVjdFR5cGUpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdObyBTT2JqZWN0IFR5cGUgZGVmaW5lZCBpbiByZWNvcmQnKSk7XG4gIH1cbiAgcmVjb3JkID0gXy5jbG9uZShyZWNvcmQpO1xuICBkZWxldGUgcmVjb3JkLklkO1xuICBkZWxldGUgcmVjb3JkLnR5cGU7XG4gIGRlbGV0ZSByZWNvcmQuYXR0cmlidXRlcztcbiAgdmFyIHVybCA9IFsgdGhpcy5fYmFzZVVybCgpLCBcInNvYmplY3RzXCIsIHNvYmplY3RUeXBlIF0uam9pbignLycpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgdXJsIDogdXJsLFxuICAgIGJvZHkgOiBKU09OLnN0cmluZ2lmeShyZWNvcmQpLFxuICAgIGhlYWRlcnMgOiBfLmRlZmF1bHRzKG9wdGlvbnMuaGVhZGVycyB8fCB7fSwge1xuICAgICAgXCJDb250ZW50LVR5cGVcIiA6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSlcbiAgfSk7XG59O1xuXG4vKiogQHByaXZhdGUgKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLl9jcmVhdGVQYXJhbGxlbCA9IGZ1bmN0aW9uKHR5cGUsIHJlY29yZHMsIG9wdGlvbnMpIHtcbiAgaWYgKHJlY29yZHMubGVuZ3RoID4gdGhpcy5tYXhSZXF1ZXN0KSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkV4Y2VlZGVkIG1heCBsaW1pdCBvZiBjb25jdXJyZW50IGNhbGxcIikpO1xuICB9XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgIHJlY29yZHMubWFwKGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgcmV0dXJuIHNlbGYuX2NyZWF0ZVNpbmdsZSh0eXBlLCByZWNvcmQsIG9wdGlvbnMpLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAvLyBiZSBhd2FyZSB0aGF0IGFsbE9yTm9uZSBpbiBwYXJhbGxlbCBtb2RlIHdpbGwgbm90IHJldmVydCB0aGUgb3RoZXIgc3VjY2Vzc2Z1bCByZXF1ZXN0c1xuICAgICAgICAvLyBpdCBvbmx5IHJhaXNlcyBlcnJvciB3aGVuIG1ldCBhdCBsZWFzdCBvbmUgZmFpbGVkIHJlcXVlc3QuXG4gICAgICAgIGlmIChvcHRpb25zLmFsbE9yTm9uZSB8fCAhZXJyLmVycm9yQ29kZSkge1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdG9SZWNvcmRSZXN1bHQobnVsbCwgZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gICk7XG59O1xuXG4vKiogQHByaXZhdGUgKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLl9jcmVhdGVNYW55ID0gZnVuY3Rpb24odHlwZSwgcmVjb3Jkcywgb3B0aW9ucykge1xuICBpZiAocmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgfVxuICBpZiAocmVjb3Jkcy5sZW5ndGggPiBNQVhfRE1MX0NPVU5UICYmIG9wdGlvbnMuYWxsb3dSZWN1cnNpdmUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIHNlbGYuX2NyZWF0ZU1hbnkodHlwZSwgcmVjb3Jkcy5zbGljZSgwLCBNQVhfRE1MX0NPVU5UKSwgb3B0aW9ucykudGhlbihmdW5jdGlvbihyZXRzMSkge1xuICAgICAgcmV0dXJuIHNlbGYuX2NyZWF0ZU1hbnkodHlwZSwgcmVjb3Jkcy5zbGljZShNQVhfRE1MX0NPVU5UKSwgb3B0aW9ucykudGhlbihmdW5jdGlvbihyZXRzMikge1xuICAgICAgICByZXR1cm4gcmV0czEuY29uY2F0KHJldHMyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHJlY29yZHMgPSBfLm1hcChyZWNvcmRzLCBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICB2YXIgc29iamVjdFR5cGUgPSB0eXBlIHx8IChyZWNvcmQuYXR0cmlidXRlcyAmJiByZWNvcmQuYXR0cmlidXRlcy50eXBlKSB8fCByZWNvcmQudHlwZTtcbiAgICBpZiAoIXNvYmplY3RUeXBlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdObyBTT2JqZWN0IFR5cGUgZGVmaW5lZCBpbiByZWNvcmQnKSk7XG4gICAgfVxuICAgIHJlY29yZCA9IF8uY2xvbmUocmVjb3JkKTtcbiAgICBkZWxldGUgcmVjb3JkLklkO1xuICAgIGRlbGV0ZSByZWNvcmQudHlwZTtcbiAgICByZWNvcmQuYXR0cmlidXRlcyA9IHsgdHlwZSA6IHNvYmplY3RUeXBlIH07XG4gICAgcmV0dXJuIHJlY29yZDtcbiAgfSk7XG4gIHZhciB1cmwgPSBbIHRoaXMuX2Jhc2VVcmwoKSwgXCJjb21wb3NpdGVcIiwgXCJzb2JqZWN0c1wiIF0uam9pbignLycpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgdXJsIDogdXJsLFxuICAgIGJvZHkgOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBhbGxPck5vbmUgOiBvcHRpb25zLmFsbE9yTm9uZSB8fCBmYWxzZSxcbiAgICAgIHJlY29yZHMgOiByZWNvcmRzXG4gICAgfSksXG4gICAgaGVhZGVycyA6IF8uZGVmYXVsdHMob3B0aW9ucy5oZWFkZXJzIHx8IHt9LCB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KVxuICB9KTtcbn07XG5cbi8qKlxuICogVXBkYXRlIHJlY29yZHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFNPYmplY3QgVHlwZVxuICogQHBhcmFtIHtSZWNvcmR8QXJyYXkuPFJlY29yZD59IHJlY29yZHMgLSBBIHJlY29yZCBvciBhcnJheSBvZiByZWNvcmRzIHRvIHVwZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIHJlc3QgYXBpLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hbGxPck5vbmVdIC0gSWYgdHJ1ZSwgYW55IGZhaWxlZCByZWNvcmRzIGluIGEgY2FsbCBjYXVzZSBhbGwgY2hhbmdlcyBmb3IgdGhlIGNhbGwgdG8gYmUgcm9sbGVkIGJhY2tcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYWxsb3dSZWN1cnNpdmVdIC0gSWYgdHJ1ZSwgd2hlbiByZWNvcmRzIGdvZXMgb3ZlciB0aGUgbWF4IG51bSBvZiBjb2xsZWN0aW9uIEFQSSAoPTIwMCksIHJlY29yZHMgYXJlIGRpdmlkZWQgaW50byBzZXZlcmFsIGNodW5rcyBhbmQgcmVxdWVzdGVkIHJlY3Vyc2l2ZWx5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdIC0gQWRkaXRpb25hbCBIVFRQIHJlcXVlc3QgaGVhZGVycyBzZW50IGluIHJldHJpZXZlIHJlcXVlc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKHR5cGUsIHJlY29yZHMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICghXy5pc1N0cmluZyh0eXBlKSkge1xuICAgIC8vIHJldmVyc2Ugb3JkZXJcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHJlY29yZHM7XG4gICAgcmVjb3JkcyA9IHR5cGU7XG4gICAgdHlwZSA9IG51bGw7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgcmV0dXJuIChcbiAgICBfLmlzQXJyYXkocmVjb3JkcykgP1xuICAgICAgKHRoaXMuX2Vuc3VyZVZlcnNpb24oNDIpID8gLy8gY2hlY2sgdGhlIHZlcnNpb24gd2hldGhlciBTT2JqZWN0IGNvbGxlY3Rpb24gQVBJIGlzIHN1cHBvcnRlZCAoNDIuMClcbiAgICAgICAgdGhpcy5fdXBkYXRlTWFueSh0eXBlLCByZWNvcmRzLCBvcHRpb25zKSA6XG4gICAgICAgIHRoaXMuX3VwZGF0ZVBhcmFsbGVsKHR5cGUsIHJlY29yZHMsIG9wdGlvbnMpKSA6XG4gICAgICB0aGlzLl91cGRhdGVTaW5nbGUodHlwZSwgcmVjb3Jkcywgb3B0aW9ucylcbiAgKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKiogQHByaXZhdGUgKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVTaW5nbGUgPSBmdW5jdGlvbih0eXBlLCByZWNvcmQsIG9wdGlvbnMpIHtcbiAgdmFyIGlkID0gcmVjb3JkLklkO1xuICBpZiAoIWlkKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignUmVjb3JkIGlkIGlzIG5vdCBmb3VuZCBpbiByZWNvcmQuJykpO1xuICB9XG4gIHZhciBzb2JqZWN0VHlwZSA9IHR5cGUgfHwgKHJlY29yZC5hdHRyaWJ1dGVzICYmIHJlY29yZC5hdHRyaWJ1dGVzLnR5cGUpIHx8IHJlY29yZC50eXBlO1xuICBpZiAoIXNvYmplY3RUeXBlKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignTm8gU09iamVjdCBUeXBlIGRlZmluZWQgaW4gcmVjb3JkJykpO1xuICB9XG4gIHJlY29yZCA9IF8uY2xvbmUocmVjb3JkKTtcbiAgZGVsZXRlIHJlY29yZC5JZDtcbiAgZGVsZXRlIHJlY29yZC50eXBlO1xuICBkZWxldGUgcmVjb3JkLmF0dHJpYnV0ZXM7XG4gIHZhciB1cmwgPSBbIHRoaXMuX2Jhc2VVcmwoKSwgXCJzb2JqZWN0c1wiLCBzb2JqZWN0VHlwZSwgaWQgXS5qb2luKCcvJyk7XG4gIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgIG1ldGhvZCA6ICdQQVRDSCcsXG4gICAgdXJsIDogdXJsLFxuICAgIGJvZHkgOiBKU09OLnN0cmluZ2lmeShyZWNvcmQpLFxuICAgIGhlYWRlcnMgOiBfLmRlZmF1bHRzKG9wdGlvbnMuaGVhZGVycyB8fCB7fSwge1xuICAgICAgXCJDb250ZW50LVR5cGVcIiA6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSlcbiAgfSwge1xuICAgIG5vQ29udGVudFJlc3BvbnNlOiB7IGlkIDogaWQsIHN1Y2Nlc3MgOiB0cnVlLCBlcnJvcnMgOiBbXSB9XG4gIH0pO1xufTtcblxuLyoqIEBwcml2YXRlICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5fdXBkYXRlUGFyYWxsZWwgPSBmdW5jdGlvbih0eXBlLCByZWNvcmRzLCBvcHRpb25zKSB7XG4gIGlmIChyZWNvcmRzLmxlbmd0aCA+IHRoaXMubWF4UmVxdWVzdCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJFeGNlZWRlZCBtYXggbGltaXQgb2YgY29uY3VycmVudCBjYWxsXCIpKTtcbiAgfVxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHJldHVybiBQcm9taXNlLmFsbChcbiAgICByZWNvcmRzLm1hcChmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgIHJldHVybiBzZWxmLl91cGRhdGVTaW5nbGUodHlwZSwgcmVjb3JkLCBvcHRpb25zKS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgLy8gYmUgYXdhcmUgdGhhdCBhbGxPck5vbmUgaW4gcGFyYWxsZWwgbW9kZSB3aWxsIG5vdCByZXZlcnQgdGhlIG90aGVyIHN1Y2Nlc3NmdWwgcmVxdWVzdHNcbiAgICAgICAgLy8gaXQgb25seSByYWlzZXMgZXJyb3Igd2hlbiBtZXQgYXQgbGVhc3Qgb25lIGZhaWxlZCByZXF1ZXN0LlxuICAgICAgICBpZiAob3B0aW9ucy5hbGxPck5vbmUgfHwgIWVyci5lcnJvckNvZGUpIHtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvUmVjb3JkUmVzdWx0KHJlY29yZC5JZCwgZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gICk7XG59O1xuXG4vKiogQHByaXZhdGUgKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLl91cGRhdGVNYW55ID0gZnVuY3Rpb24odHlwZSwgcmVjb3Jkcywgb3B0aW9ucykge1xuICBpZiAocmVjb3Jkcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgfVxuICBpZiAocmVjb3Jkcy5sZW5ndGggPiBNQVhfRE1MX0NPVU5UICYmIG9wdGlvbnMuYWxsb3dSZWN1cnNpdmUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIHNlbGYuX3VwZGF0ZU1hbnkodHlwZSwgcmVjb3Jkcy5zbGljZSgwLCBNQVhfRE1MX0NPVU5UKSwgb3B0aW9ucykudGhlbihmdW5jdGlvbihyZXRzMSkge1xuICAgICAgcmV0dXJuIHNlbGYuX3VwZGF0ZU1hbnkodHlwZSwgcmVjb3Jkcy5zbGljZShNQVhfRE1MX0NPVU5UKSwgb3B0aW9ucykudGhlbihmdW5jdGlvbihyZXRzMikge1xuICAgICAgICByZXR1cm4gcmV0czEuY29uY2F0KHJldHMyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHJlY29yZHMgPSBfLm1hcChyZWNvcmRzLCBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICB2YXIgaWQgPSByZWNvcmQuSWQ7XG4gICAgaWYgKCFpZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWNvcmQgaWQgaXMgbm90IGZvdW5kIGluIHJlY29yZC4nKTtcbiAgICB9XG4gICAgdmFyIHNvYmplY3RUeXBlID0gdHlwZSB8fCAocmVjb3JkLmF0dHJpYnV0ZXMgJiYgcmVjb3JkLmF0dHJpYnV0ZXMudHlwZSkgfHwgcmVjb3JkLnR5cGU7XG4gICAgaWYgKCFzb2JqZWN0VHlwZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBTT2JqZWN0IFR5cGUgZGVmaW5lZCBpbiByZWNvcmQnKTtcbiAgICB9XG4gICAgcmVjb3JkID0gXy5jbG9uZShyZWNvcmQpO1xuICAgIGRlbGV0ZSByZWNvcmQuSWQ7XG4gICAgcmVjb3JkLmlkID0gaWQ7XG4gICAgZGVsZXRlIHJlY29yZC50eXBlO1xuICAgIHJlY29yZC5hdHRyaWJ1dGVzID0geyB0eXBlIDogc29iamVjdFR5cGUgfTtcbiAgICByZXR1cm4gcmVjb3JkO1xuICB9KTtcbiAgdmFyIHVybCA9IFsgdGhpcy5fYmFzZVVybCgpLCBcImNvbXBvc2l0ZVwiLCBcInNvYmplY3RzXCIgXS5qb2luKCcvJyk7XG4gIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgIG1ldGhvZCA6ICdQQVRDSCcsXG4gICAgdXJsIDogdXJsLFxuICAgIGJvZHkgOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBhbGxPck5vbmUgOiBvcHRpb25zLmFsbE9yTm9uZSB8fCBmYWxzZSxcbiAgICAgIHJlY29yZHMgOiByZWNvcmRzXG4gICAgfSksXG4gICAgaGVhZGVycyA6IF8uZGVmYXVsdHMob3B0aW9ucy5oZWFkZXJzIHx8IHt9LCB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9KVxuICB9KTtcbn07XG5cbi8qKlxuICogVXBzZXJ0IHJlY29yZHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZSAtIFNPYmplY3QgVHlwZVxuICogQHBhcmFtIHtSZWNvcmR8QXJyYXkuPFJlY29yZD59IHJlY29yZHMgLSBSZWNvcmQgb3IgYXJyYXkgb2YgcmVjb3JkcyB0byB1cHNlcnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHRJZEZpZWxkIC0gRXh0ZXJuYWwgSUQgZmllbGQgbmFtZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIHJlc3QgYXBpLlxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hbGxPck5vbmVdIC0gSWYgdHJ1ZSwgYW55IGZhaWxlZCByZWNvcmRzIGluIGEgY2FsbCBjYXVzZSBhbGwgY2hhbmdlcyBmb3IgdGhlIGNhbGwgdG8gYmUgcm9sbGVkIGJhY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5oZWFkZXJzXSAtIEFkZGl0aW9uYWwgSFRUUCByZXF1ZXN0IGhlYWRlcnMgc2VudCBpbiByZXRyaWV2ZSByZXF1ZXN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2tcbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS51cHNlcnQgPSBmdW5jdGlvbih0eXBlLCByZWNvcmRzLCBleHRJZEZpZWxkLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAvLyBZb3UgY2FuIG9taXQgXCJ0eXBlXCIgYXJndW1lbnQsIHdoZW4gdGhlIHJlY29yZCBpbmNsdWRlcyB0eXBlIGluZm9ybWF0aW9uLlxuICBpZiAoIV8uaXNTdHJpbmcodHlwZSkpIHtcbiAgICAvLyByZXZlcnNlIG9yZGVyXG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSBleHRJZEZpZWxkO1xuICAgIGV4dElkRmllbGQgPSByZWNvcmRzO1xuICAgIHJlY29yZHMgPSB0eXBlO1xuICAgIHR5cGUgPSBudWxsO1xuICB9XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGlzQXJyYXkgPSBfLmlzQXJyYXkocmVjb3Jkcyk7XG4gIHJlY29yZHMgPSBpc0FycmF5ID8gcmVjb3JkcyA6IFsgcmVjb3JkcyBdO1xuICBpZiAocmVjb3Jkcy5sZW5ndGggPiB0aGlzLm1heFJlcXVlc3QpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKFwiRXhjZWVkZWQgbWF4IGxpbWl0IG9mIGNvbmN1cnJlbnQgY2FsbFwiKSkudGhlbkNhbGwoY2FsbGJhY2spO1xuICB9XG4gIHJldHVybiBQcm9taXNlLmFsbChcbiAgICBfLm1hcChyZWNvcmRzLCBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgIHZhciBzb2JqZWN0VHlwZSA9IHR5cGUgfHwgKHJlY29yZC5hdHRyaWJ1dGVzICYmIHJlY29yZC5hdHRyaWJ1dGVzLnR5cGUpIHx8IHJlY29yZC50eXBlO1xuICAgICAgdmFyIGV4dElkID0gcmVjb3JkW2V4dElkRmllbGRdO1xuICAgICAgcmVjb3JkID0gXy5jbG9uZShyZWNvcmQpO1xuICAgICAgZGVsZXRlIHJlY29yZFtleHRJZEZpZWxkXTtcbiAgICAgIGRlbGV0ZSByZWNvcmQudHlwZTtcbiAgICAgIGRlbGV0ZSByZWNvcmQuYXR0cmlidXRlcztcblxuICAgICAgdmFyIHVybCA9IFsgc2VsZi5fYmFzZVVybCgpLCBcInNvYmplY3RzXCIsIHNvYmplY3RUeXBlLCBleHRJZEZpZWxkLCBleHRJZCBdLmpvaW4oJy8nKTtcbiAgICAgIHJldHVybiBzZWxmLnJlcXVlc3Qoe1xuICAgICAgICBtZXRob2QgOiAnUEFUQ0gnLFxuICAgICAgICB1cmwgOiB1cmwsXG4gICAgICAgIGJvZHkgOiBKU09OLnN0cmluZ2lmeShyZWNvcmQpLFxuICAgICAgICBoZWFkZXJzIDogXy5kZWZhdWx0cyhvcHRpb25zLmhlYWRlcnMgfHwge30sIHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiIDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgfSlcbiAgICAgIH0sIHtcbiAgICAgICAgbm9Db250ZW50UmVzcG9uc2U6IHsgc3VjY2VzcyA6IHRydWUsIGVycm9ycyA6IFtdIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIC8vIGJlIGF3YXJlIHRoYXQgYGFsbE9yTm9uZWAgb3B0aW9uIGluIHVwc2VydCBtZXRob2Qgd2lsbCBub3QgcmV2ZXJ0IHRoZSBvdGhlciBzdWNjZXNzZnVsIHJlcXVlc3RzXG4gICAgICAgIC8vIGl0IG9ubHkgcmFpc2VzIGVycm9yIHdoZW4gbWV0IGF0IGxlYXN0IG9uZSBmYWlsZWQgcmVxdWVzdC5cbiAgICAgICAgaWYgKCFpc0FycmF5IHx8IG9wdGlvbnMuYWxsT3JOb25lIHx8ICFlcnIuZXJyb3JDb2RlKSB7IHRocm93IGVycjsgfVxuICAgICAgICByZXR1cm4gdGhpcy5fdG9SZWNvcmRSZXN1bHQobnVsbCwgZXJyKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgKS50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpIHtcbiAgICByZXR1cm4gIWlzQXJyYXkgJiYgXy5pc0FycmF5KHJlc3VsdHMpID8gcmVzdWx0c1swXSA6IHJlc3VsdHM7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogU3lub255bSBvZiBDb25uZWN0aW9uI2Rlc3Ryb3koKVxuICpcbiAqIEBtZXRob2QgQ29ubmVjdGlvbiNkZWxldGVcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheS48U3RyaW5nPn0gaWRzIC0gQSBJRCBvciBhcnJheSBvZiBJRHMgdG8gZGVsZXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgcmVzdCBhcGkuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbE9yTm9uZV0gLSBJZiB0cnVlLCBhbnkgZmFpbGVkIHJlY29yZHMgaW4gYSBjYWxsIGNhdXNlIGFsbCBjaGFuZ2VzIGZvciB0aGUgY2FsbCB0byBiZSByb2xsZWQgYmFja1xuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hbGxvd1JlY3Vyc2l2ZV0gLSBJZiB0cnVlLCB3aGVuIGlkcyBnb2VzIG92ZXIgdGhlIG1heCBudW0gb2YgY29sbGVjdGlvbiBBUEkgKD0yMDApLCBpZHMgYXJlIGRpdmlkZWQgaW50byBzZXZlcmFsIGNodW5rcyBhbmQgcmVxdWVzdGVkIHJlY3Vyc2l2ZWx5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdIC0gQWRkaXRpb25hbCBIVFRQIHJlcXVlc3QgaGVhZGVycyBzZW50IGluIHJldHJpZXZlIHJlcXVlc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFja1xuICogQHJldHVybnMge1Byb21pc2UuPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cbi8qKlxuICogU3lub255bSBvZiBDb25uZWN0aW9uI2Rlc3Ryb3koKVxuICpcbiAqIEBtZXRob2QgQ29ubmVjdGlvbiNkZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheS48U3RyaW5nPn0gaWRzIC0gQSBJRCBvciBhcnJheSBvZiBJRHMgdG8gZGVsZXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgcmVzdCBhcGkuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbE9yTm9uZV0gLSBJZiB0cnVlLCBhbnkgZmFpbGVkIHJlY29yZHMgaW4gYSBjYWxsIGNhdXNlIGFsbCBjaGFuZ2VzIGZvciB0aGUgY2FsbCB0byBiZSByb2xsZWQgYmFja1xuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hbGxvd1JlY3Vyc2l2ZV0gLSBJZiB0cnVlLCB3aGVuIGlkcyBnb2VzIG92ZXIgdGhlIG1heCBudW0gb2YgY29sbGVjdGlvbiBBUEkgKD0yMDApLCBpZHMgYXJlIGRpdmlkZWQgaW50byBzZXZlcmFsIGNodW5rcyBhbmQgcmVxdWVzdGVkIHJlY3Vyc2l2ZWx5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdIC0gQWRkaXRpb25hbCBIVFRQIHJlcXVlc3QgaGVhZGVycyBzZW50IGluIHJldHJpZXZlIHJlcXVlc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFja1xuICogQHJldHVybnMge1Byb21pc2UuPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cbi8qKlxuICogRGVsZXRlIHJlY29yZHNcbiAqXG4gKiBAbWV0aG9kIENvbm5lY3Rpb24jZGVzdHJveVxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5LjxTdHJpbmc+fSBpZHMgLSBBIElEIG9yIGFycmF5IG9mIElEcyB0byBkZWxldGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIGZvciByZXN0IGFwaS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYWxsT3JOb25lXSAtIElmIHRydWUsIGFueSBmYWlsZWQgcmVjb3JkcyBpbiBhIGNhbGwgY2F1c2UgYWxsIGNoYW5nZXMgZm9yIHRoZSBjYWxsIHRvIGJlIHJvbGxlZCBiYWNrXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbG93UmVjdXJzaXZlXSAtIElmIHRydWUsIHdoZW4gaWRzIGdvZXMgb3ZlciB0aGUgbWF4IG51bSBvZiBjb2xsZWN0aW9uIEFQSSAoPTIwMCksIGlkcyBhcmUgZGl2aWRlZCBpbnRvIHNldmVyYWwgY2h1bmtzIGFuZCByZXF1ZXN0ZWQgcmVjdXJzaXZlbHkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaGVhZGVyc10gLSBBZGRpdGlvbmFsIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHNlbnQgaW4gcmV0cmlldmUgcmVxdWVzdFxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGVbXCJkZWxldGVcIl0gPVxuQ29ubmVjdGlvbi5wcm90b3R5cGUuZGVsID1cbkNvbm5lY3Rpb24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbih0eXBlLCBpZHMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHJldHVybiAoXG4gICAgXy5pc0FycmF5KGlkcykgP1xuICAgICAgKHRoaXMuX2Vuc3VyZVZlcnNpb24oNDIpID8gLy8gY2hlY2sgdGhlIHZlcnNpb24gd2hldGhlciBTT2JqZWN0IGNvbGxlY3Rpb24gQVBJIGlzIHN1cHBvcnRlZCAoNDIuMClcbiAgICAgICAgdGhpcy5fZGVzdHJveU1hbnkodHlwZSwgaWRzLCBvcHRpb25zKSA6XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lQYXJhbGxlbCh0eXBlLCBpZHMsIG9wdGlvbnMpKSA6XG4gICAgICB0aGlzLl9kZXN0cm95U2luZ2xlKHR5cGUsIGlkcywgb3B0aW9ucylcbiAgKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKiogQHByaXZhdGUgKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLl9kZXN0cm95U2luZ2xlID0gZnVuY3Rpb24odHlwZSwgaWQsIG9wdGlvbnMpIHtcbiAgdmFyIHVybCA9IFsgdGhpcy5fYmFzZVVybCgpLCBcInNvYmplY3RzXCIsIHR5cGUsIGlkIF0uam9pbignLycpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICBtZXRob2QgOiAnREVMRVRFJyxcbiAgICB1cmwgOiB1cmwsXG4gICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzIHx8IG51bGxcbiAgfSwge1xuICAgIG5vQ29udGVudFJlc3BvbnNlOiB7IGlkIDogaWQsIHN1Y2Nlc3MgOiB0cnVlLCBlcnJvcnMgOiBbXSB9XG4gIH0pO1xufTtcblxuLyoqIEBwcml2YXRlICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5fZGVzdHJveVBhcmFsbGVsID0gZnVuY3Rpb24odHlwZSwgaWRzLCBvcHRpb25zKSB7XG4gIGlmIChpZHMubGVuZ3RoID4gdGhpcy5tYXhSZXF1ZXN0KSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcIkV4Y2VlZGVkIG1heCBsaW1pdCBvZiBjb25jdXJyZW50IGNhbGxcIikpO1xuICB9XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcmV0dXJuIFByb21pc2UuYWxsKFxuICAgIGlkcy5tYXAoZnVuY3Rpb24oaWQpIHtcbiAgICAgIHJldHVybiBzZWxmLl9kZXN0cm95U2luZ2xlKHR5cGUsIGlkLCBvcHRpb25zKS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgLy8gYmUgYXdhcmUgdGhhdCBgYWxsT3JOb25lYCBvcHRpb24gaW4gcGFyYWxsZWwgbW9kZSB3aWxsIG5vdCByZXZlcnQgdGhlIG90aGVyIHN1Y2Nlc3NmdWwgcmVxdWVzdHNcbiAgICAgICAgLy8gaXQgb25seSByYWlzZXMgZXJyb3Igd2hlbiBtZXQgYXQgbGVhc3Qgb25lIGZhaWxlZCByZXF1ZXN0LlxuICAgICAgICBpZiAob3B0aW9ucy5hbGxPck5vbmUgfHwgIWVyci5lcnJvckNvZGUpIHtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvUmVjb3JkUmVzdWx0KGlkLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgKTtcbn07XG5cblxuLyoqIEBwcml2YXRlICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5fZGVzdHJveU1hbnkgPSBmdW5jdGlvbih0eXBlLCBpZHMsIG9wdGlvbnMpIHtcbiAgaWYgKGlkcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcbiAgfVxuICBpZiAoaWRzLmxlbmd0aCA+IE1BWF9ETUxfQ09VTlQgJiYgb3B0aW9ucy5hbGxvd1JlY3Vyc2l2ZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gc2VsZi5fZGVzdHJveU1hbnkodHlwZSwgaWRzLnNsaWNlKDAsIE1BWF9ETUxfQ09VTlQpLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uKHJldHMxKSB7XG4gICAgICByZXR1cm4gc2VsZi5fZGVzdHJveU1hbnkodHlwZSwgaWRzLnNsaWNlKE1BWF9ETUxfQ09VTlQpLCBvcHRpb25zKS50aGVuKGZ1bmN0aW9uKHJldHMyKSB7XG4gICAgICAgIHJldHVybiByZXRzMS5jb25jYXQocmV0czIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgdmFyIHVybCA9IFsgdGhpcy5fYmFzZVVybCgpLCBcImNvbXBvc2l0ZVwiLCBcInNvYmplY3RzP2lkcz1cIiBdLmpvaW4oJy8nKSArIGlkcy5qb2luKCcsJyk7XG4gIGlmIChvcHRpb25zLmFsbE9yTm9uZSkge1xuICAgIHVybCArPSAnJmFsbE9yTm9uZT10cnVlJztcbiAgfVxuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICBtZXRob2QgOiAnREVMRVRFJyxcbiAgICB1cmwgOiB1cmwsXG4gICAgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzIHx8IG51bGxcbiAgfSk7XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgc2VhcmNoIGJ5IFNPU0xcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc29zbCAtIFNPU0wgc3RyaW5nXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24oc29zbCwgY2FsbGJhY2spIHtcbiAgdmFyIHVybCA9IHRoaXMuX2Jhc2VVcmwoKSArIFwiL3NlYXJjaD9xPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHNvc2wpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBSZXN1bHQgcmV0dXJuZWQgYnkgZGVzY3JpYmVTT2JqZWN0IGNhbGxcbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZXNjcmliZVNPYmplY3RSZXN1bHRcbiAqL1xuLyoqXG4gKiBTeW5vbnltIG9mIENvbm5lY3Rpb24jZGVzY3JpYmUoKVxuICpcbiAqIEBtZXRob2QgQ29ubmVjdGlvbiNkZXNjcmliZVNPYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxEZXNjcmliZVNPYmplY3RSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxEZXNjcmliZVNPYmplY3RSZXN1bHQ+fVxuICovXG4vKipcbiAqIERlc2NyaWJlIFNPYmplY3QgbWV0YWRhdGFcbiAqXG4gKiBAbWV0aG9kIENvbm5lY3Rpb24jZGVzY3JpYmVcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxEZXNjcmliZVNPYmplY3RSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxEZXNjcmliZVNPYmplY3RSZXN1bHQ+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5kZXNjcmliZSA9XG5Db25uZWN0aW9uLnByb3RvdHlwZS5kZXNjcmliZVNPYmplY3QgPSBmdW5jdGlvbih0eXBlLCBjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9iYXNlVXJsKCksIFwic29iamVjdHNcIiwgdHlwZSwgXCJkZXNjcmliZVwiIF0uam9pbignLycpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuXG4vKipcbiAqIFJlc3VsdCByZXR1cm5lZCBieSBkZXNjcmliZUdsb2JhbCBjYWxsXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVzY3JpYmVHbG9iYWxSZXN1bHRcbiAqL1xuLyoqXG4gKiBEZXNjcmliZSBnbG9iYWwgU09iamVjdHNcbiAqXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxEZXNjcmliZUdsb2JhbFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPERlc2NyaWJlR2xvYmFsUmVzdWx0Pn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuZGVzY3JpYmVHbG9iYWwgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgdXJsID0gdGhpcy5fYmFzZVVybCgpICsgXCIvc29iamVjdHNcIjtcbiAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cblxuLyoqXG4gKiBHZXQgU09iamVjdCBpbnN0YW5jZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcmV0dXJucyB7U09iamVjdH1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuc29iamVjdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdGhpcy5zb2JqZWN0cyA9IHRoaXMuc29iamVjdHMgfHwge307XG4gIHZhciBzb2JqZWN0ID0gdGhpcy5zb2JqZWN0c1t0eXBlXSA9XG4gICAgdGhpcy5zb2JqZWN0c1t0eXBlXSB8fCBuZXcgU09iamVjdCh0aGlzLCB0eXBlKTtcbiAgcmV0dXJuIHNvYmplY3Q7XG59O1xuXG4vKipcbiAqIEdldCBpZGVudGl0eSBpbmZvcm1hdGlvbiBvZiBjdXJyZW50IHVzZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gSWRlbnRpdHkgY2FsbCBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaGVhZGVyc10gLSBBZGRpdGlvbmFsIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHNlbnQgaW4gaWRlbnRpdHkgcmVxdWVzdFxuICogQHBhcmFtIHtDYWxsYmFjay48SWRlbnRpdHlJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48SWRlbnRpdHlJbmZvPn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuaWRlbnRpdHkgPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBpZFVybCA9IHRoaXMudXNlckluZm8gJiYgdGhpcy51c2VySW5mby51cmw7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoXG4gICAgaWRVcmwgP1xuICAgIHsgaWRlbnRpdHk6IGlkVXJsIH0gOlxuICAgIHRoaXMucmVxdWVzdCh7IG1ldGhvZDogJ0dFVCcsIHVybDogdGhpcy5fYmFzZVVybCgpLCBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMgfSlcbiAgKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIHZhciB1cmwgPSByZXMuaWRlbnRpdHk7XG4gICAgcmV0dXJuIHNlbGYucmVxdWVzdCh7IG1ldGhvZDogJ0dFVCcsIHVybDogdXJsIH0pO1xuICB9KS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIHNlbGYudXNlckluZm8gPSB7XG4gICAgICBpZDogcmVzLnVzZXJfaWQsXG4gICAgICBvcmdhbml6YXRpb25JZDogcmVzLm9yZ2FuaXphdGlvbl9pZCxcbiAgICAgIHVybDogcmVzLmlkXG4gICAgfTtcbiAgICByZXR1cm4gcmVzO1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIFVzZXJJbmZvXG4gKiBAcHJvcCB7U3RyaW5nfSBpZCAtIFVzZXIgSURcbiAqIEBwcm9wIHtTdHJpbmd9IG9yZ2FuaXphdGlvbklkIC0gT3JnYW5pemF0aW9uIElEXG4gKiBAcHJvcCB7U3RyaW5nfSB1cmwgLSBJZGVudGl0eSBVUkwgb2YgdGhlIHVzZXJcbiAqL1xuXG4vKipcbiAqIEF1dGhvcml6ZSAodXNpbmcgb2F1dGgyIHdlYiBzZXJ2ZXIgZmxvdylcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY29kZSAtIEF1dGhvcml6YXRpb24gY29kZVxuICogQHBhcmFtIHtPYmplY3R9IFtwYXJhbXNdIC0gT3B0aW9uYWwgcGFyYW1ldGVycyB0byBzZW5kIGluIHRva2VuIHJldHJpZXZhbFxuICogQHBhcmFtIHtTdHJpbmd9IFtwYXJhbXMuY29kZV92ZXJpZmllcl0gLSBDb2RlIHZlcmlmaWVyIHZhbHVlIChSRkMgNzYzNiAtIFByb29mIEtleSBvZiBDb2RlIEV4Y2hhbmdlKVxuICogQHBhcmFtIHtDYWxsYmFjay48VXNlckluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxVc2VySW5mbz59XG4gKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLmF1dGhvcml6ZSA9IGZ1bmN0aW9uKGNvZGUsIHBhcmFtcywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IHBhcmFtcztcbiAgICBwYXJhbXMgPSB7fTtcbiAgfVxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBsb2dnZXIgPSB0aGlzLl9sb2dnZXI7XG5cbiAgcmV0dXJuIHRoaXMub2F1dGgyLnJlcXVlc3RUb2tlbihjb2RlLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgdmFyIHVzZXJJbmZvID0gcGFyc2VJZFVybChyZXMuaWQpO1xuICAgIHNlbGYuaW5pdGlhbGl6ZSh7XG4gICAgICBpbnN0YW5jZVVybCA6IHJlcy5pbnN0YW5jZV91cmwsXG4gICAgICBhY2Nlc3NUb2tlbiA6IHJlcy5hY2Nlc3NfdG9rZW4sXG4gICAgICByZWZyZXNoVG9rZW4gOiByZXMucmVmcmVzaF90b2tlbixcbiAgICAgIHVzZXJJbmZvOiB1c2VySW5mb1xuICAgIH0pO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIjxsb2dpbj4gY29tcGxldGVkLiB1c2VyIGlkID0gXCIgKyB1c2VySW5mby5pZCArIFwiLCBvcmcgaWQgPSBcIiArIHVzZXJJbmZvLm9yZ2FuaXphdGlvbklkKTtcbiAgICByZXR1cm4gdXNlckluZm87XG5cbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xuXG59O1xuXG5cbi8qKlxuICogTG9naW4gdG8gU2FsZXNmb3JjZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VybmFtZSAtIFNhbGVzZm9yY2UgdXNlcm5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXNzd29yZCAtIFNhbGVzZm9yY2UgcGFzc3dvcmQgKGFuZCBzZWN1cml0eSB0b2tlbiwgaWYgcmVxdWlyZWQpXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxVc2VySW5mbz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFVzZXJJbmZvPn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUubG9naW4gPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gIC8vIHJlZ2lzdGVyIHJlZnJlc2hEZWxlZ2F0ZSBmb3Igc2Vzc2lvbiBleHBpcmF0aW9uXG4gIHRoaXMuX3JlZnJlc2hEZWxlZ2F0ZSA9IG5ldyBIdHRwQXBpLlNlc3Npb25SZWZyZXNoRGVsZWdhdGUodGhpcywgY3JlYXRlVXNlcm5hbWVQYXNzd29yZFJlZnJlc2hGbih1c2VybmFtZSwgcGFzc3dvcmQpKTtcbiAgaWYgKHRoaXMub2F1dGgyICYmIHRoaXMub2F1dGgyLmNsaWVudElkICYmIHRoaXMub2F1dGgyLmNsaWVudFNlY3JldCkge1xuICAgIHJldHVybiB0aGlzLmxvZ2luQnlPQXV0aDIodXNlcm5hbWUsIHBhc3N3b3JkLCBjYWxsYmFjayk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMubG9naW5CeVNvYXAodXNlcm5hbWUsIHBhc3N3b3JkLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGNyZWF0ZVVzZXJuYW1lUGFzc3dvcmRSZWZyZXNoRm4odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb25uLCBjYWxsYmFjaykge1xuICAgIGNvbm4ubG9naW4odXNlcm5hbWUsIHBhc3N3b3JkLCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIGlmIChlcnIpIHsgcmV0dXJuIGNhbGxiYWNrKGVycik7IH1cbiAgICAgIGNhbGxiYWNrKG51bGwsIGNvbm4uYWNjZXNzVG9rZW4pO1xuICAgIH0pO1xuICB9O1xufVxuXG4vKipcbiAqIExvZ2luIGJ5IE9BdXRoMiB1c2VybmFtZSAmIHBhc3N3b3JkIGZsb3dcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXNlcm5hbWUgLSBTYWxlc2ZvcmNlIHVzZXJuYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gcGFzc3dvcmQgLSBTYWxlc2ZvcmNlIHBhc3N3b3JkIChhbmQgc2VjdXJpdHkgdG9rZW4sIGlmIHJlcXVpcmVkKVxuICogQHBhcmFtIHtDYWxsYmFjay48VXNlckluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxVc2VySW5mbz59XG4gKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLmxvZ2luQnlPQXV0aDIgPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQsIGNhbGxiYWNrKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGxvZ2dlciA9IHRoaXMuX2xvZ2dlcjtcbiAgcmV0dXJuIHRoaXMub2F1dGgyLmF1dGhlbnRpY2F0ZSh1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgdmFyIHVzZXJJbmZvID0gcGFyc2VJZFVybChyZXMuaWQpO1xuICAgIHNlbGYuaW5pdGlhbGl6ZSh7XG4gICAgICBpbnN0YW5jZVVybCA6IHJlcy5pbnN0YW5jZV91cmwsXG4gICAgICBhY2Nlc3NUb2tlbiA6IHJlcy5hY2Nlc3NfdG9rZW4sXG4gICAgICB1c2VySW5mbzogdXNlckluZm9cbiAgICB9KTtcbiAgICBsb2dnZXIuZGVidWcoXCI8bG9naW4+IGNvbXBsZXRlZC4gdXNlciBpZCA9IFwiICsgdXNlckluZm8uaWQgKyBcIiwgb3JnIGlkID0gXCIgKyB1c2VySW5mby5vcmdhbml6YXRpb25JZCk7XG4gICAgcmV0dXJuIHVzZXJJbmZvO1xuXG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcblxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlc2Moc3RyKSB7XG4gIHJldHVybiBzdHIgJiYgU3RyaW5nKHN0cikucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JykucmVwbGFjZSgvXCIvZywgJyZxdW90OycpO1xufVxuXG4vKipcbiAqIExvZ2luIGJ5IFNPQVAgd2ViIHNlcnZpY2UgQVBJXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVzZXJuYW1lIC0gU2FsZXNmb3JjZSB1c2VybmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHBhc3N3b3JkIC0gU2FsZXNmb3JjZSBwYXNzd29yZCAoYW5kIHNlY3VyaXR5IHRva2VuLCBpZiByZXF1aXJlZClcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFVzZXJJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48VXNlckluZm8+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5sb2dpbkJ5U29hcCA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCwgY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgbG9nZ2VyID0gdGhpcy5fbG9nZ2VyO1xuICB2YXIgYm9keSA9IFtcbiAgICAnPHNlOkVudmVsb3BlIHhtbG5zOnNlPVwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS9cIj4nLFxuICAgICAgJzxzZTpIZWFkZXIvPicsXG4gICAgICAnPHNlOkJvZHk+JyxcbiAgICAgICAgJzxsb2dpbiB4bWxucz1cInVybjpwYXJ0bmVyLnNvYXAuc2ZvcmNlLmNvbVwiPicsXG4gICAgICAgICAgJzx1c2VybmFtZT4nICsgZXNjKHVzZXJuYW1lKSArICc8L3VzZXJuYW1lPicsXG4gICAgICAgICAgJzxwYXNzd29yZD4nICsgZXNjKHBhc3N3b3JkKSArICc8L3Bhc3N3b3JkPicsXG4gICAgICAgICc8L2xvZ2luPicsXG4gICAgICAnPC9zZTpCb2R5PicsXG4gICAgJzwvc2U6RW52ZWxvcGU+J1xuICBdLmpvaW4oJycpO1xuXG4gIHZhciBzb2FwTG9naW5FbmRwb2ludCA9IFsgdGhpcy5sb2dpblVybCwgXCJzZXJ2aWNlcy9Tb2FwL3VcIiwgdGhpcy52ZXJzaW9uIF0uam9pbignLycpO1xuXG4gIHJldHVybiB0aGlzLl90cmFuc3BvcnQuaHR0cFJlcXVlc3Qoe1xuICAgIG1ldGhvZCA6ICdQT1NUJyxcbiAgICB1cmwgOiBzb2FwTG9naW5FbmRwb2ludCxcbiAgICBib2R5IDogYm9keSxcbiAgICBoZWFkZXJzIDoge1xuICAgICAgXCJDb250ZW50LVR5cGVcIiA6IFwidGV4dC94bWxcIixcbiAgICAgIFwiU09BUEFjdGlvblwiIDogJ1wiXCInXG4gICAgfVxuICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgdmFyIG07XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gNDAwKSB7XG4gICAgICBtID0gcmVzcG9uc2UuYm9keS5tYXRjaCgvPGZhdWx0c3RyaW5nPihbXjxdKyk8XFwvZmF1bHRzdHJpbmc+Lyk7XG4gICAgICB2YXIgZmF1bHRzdHJpbmcgPSBtICYmIG1bMV07XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZmF1bHRzdHJpbmcgfHwgcmVzcG9uc2UuYm9keSk7XG4gICAgfVxuICAgIGxvZ2dlci5kZWJ1ZyhcIlNPQVAgcmVzcG9uc2UgPSBcIiArIHJlc3BvbnNlLmJvZHkpO1xuICAgIG0gPSByZXNwb25zZS5ib2R5Lm1hdGNoKC88c2VydmVyVXJsPihbXjxdKyk8XFwvc2VydmVyVXJsPi8pO1xuICAgIHZhciBzZXJ2ZXJVcmwgPSBtICYmIG1bMV07XG4gICAgbSA9IHJlc3BvbnNlLmJvZHkubWF0Y2goLzxzZXNzaW9uSWQ+KFtePF0rKTxcXC9zZXNzaW9uSWQ+Lyk7XG4gICAgdmFyIHNlc3Npb25JZCA9IG0gJiYgbVsxXTtcbiAgICBtID0gcmVzcG9uc2UuYm9keS5tYXRjaCgvPHVzZXJJZD4oW148XSspPFxcL3VzZXJJZD4vKTtcbiAgICB2YXIgdXNlcklkID0gbSAmJiBtWzFdO1xuICAgIG0gPSByZXNwb25zZS5ib2R5Lm1hdGNoKC88b3JnYW5pemF0aW9uSWQ+KFtePF0rKTxcXC9vcmdhbml6YXRpb25JZD4vKTtcbiAgICB2YXIgb3JnSWQgPSBtICYmIG1bMV07XG4gICAgdmFyIGlkVXJsID0gc29hcExvZ2luRW5kcG9pbnQuc3BsaXQoJy8nKS5zbGljZSgwLCAzKS5qb2luKCcvJyk7XG4gICAgaWRVcmwgKz0gXCIvaWQvXCIgKyBvcmdJZCArIFwiL1wiICsgdXNlcklkO1xuICAgIHZhciB1c2VySW5mbyA9IHtcbiAgICAgIGlkOiB1c2VySWQsXG4gICAgICBvcmdhbml6YXRpb25JZDogb3JnSWQsXG4gICAgICB1cmw6IGlkVXJsXG4gICAgfTtcbiAgICBzZWxmLmluaXRpYWxpemUoe1xuICAgICAgc2VydmVyVXJsOiBzZXJ2ZXJVcmwuc3BsaXQoJy8nKS5zbGljZSgwLCAzKS5qb2luKCcvJyksXG4gICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZCxcbiAgICAgIHVzZXJJbmZvOiB1c2VySW5mb1xuICAgIH0pO1xuICAgIGxvZ2dlci5kZWJ1ZyhcIjxsb2dpbj4gY29tcGxldGVkLiB1c2VyIGlkID0gXCIgKyB1c2VySWQgKyBcIiwgb3JnIGlkID0gXCIgKyBvcmdJZCk7XG4gICAgcmV0dXJuIHVzZXJJbmZvO1xuXG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcblxufTtcblxuLyoqXG4gKiBMb2dvdXQgdGhlIGN1cnJlbnQgc2Vzc2lvbiBcbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXZva2VdIC0gUmV2b2tlcyBBUEkgQWNjZXNzIGlmIHNldCB0byB0cnVlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjx1bmRlZmluZWQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjx1bmRlZmluZWQ+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5sb2dvdXQgPSBmdW5jdGlvbihyZXZva2UsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgcmV2b2tlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSByZXZva2U7XG4gICAgcmV2b2tlID0gZmFsc2U7XG4gIH1cblxuICBpZiAodGhpcy5fc2Vzc2lvblR5cGUgPT09IFwib2F1dGgyXCIpIHtcbiAgICByZXR1cm4gdGhpcy5sb2dvdXRCeU9BdXRoMihyZXZva2UsIGNhbGxiYWNrKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdGhpcy5sb2dvdXRCeVNvYXAocmV2b2tlLCBjYWxsYmFjayk7XG4gIH1cbn07XG5cbi8qKlxuICogTG9nb3V0IHRoZSBjdXJyZW50IHNlc3Npb24gYnkgcmV2b2tpbmcgYWNjZXNzIHRva2VuIHZpYSBPQXV0aDIgc2Vzc2lvbiByZXZva2VcbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXZva2VdIC0gUmV2b2tlcyBBUEkgQWNjZXNzIGlmIHNldCB0byB0cnVlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjx1bmRlZmluZWQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjx1bmRlZmluZWQ+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5sb2dvdXRCeU9BdXRoMiA9IGZ1bmN0aW9uKHJldm9rZSwgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiByZXZva2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IHJldm9rZTtcbiAgICByZXZva2UgPSBmYWxzZTtcbiAgfVxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBsb2dnZXIgPSB0aGlzLl9sb2dnZXI7XG5cbiAgcmV0dXJuIHRoaXMub2F1dGgyLnJldm9rZVRva2VuKHJldm9rZSA/IHRoaXMucmVmcmVzaFRva2VuIDogdGhpcy5hY2Nlc3NUb2tlbikudGhlbihmdW5jdGlvbigpIHtcbiAgICAvLyBEZXN0cm95IHRoZSBzZXNzaW9uIGJvdW5kIHRvIHRoaXMgY29ubmVjdGlvblxuICAgIHNlbGYuYWNjZXNzVG9rZW4gPSBudWxsO1xuICAgIHNlbGYudXNlckluZm8gPSBudWxsO1xuICAgIHNlbGYucmVmcmVzaFRva2VuID0gbnVsbDtcbiAgICBzZWxmLmluc3RhbmNlVXJsID0gbnVsbDtcbiAgICBzZWxmLmNhY2hlLmNsZWFyKCk7XG5cbiAgICAvLyBub3RoaW5nIHVzZWZ1bCByZXR1cm5lZCBieSBsb2dvdXQgQVBJLCBqdXN0IHJldHVyblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0pLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cblxuLyoqXG4gKiBMb2dvdXQgdGhlIHNlc3Npb24gYnkgdXNpbmcgU09BUCB3ZWIgc2VydmljZSBBUElcbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXZva2VdIC0gUmV2b2tlcyBBUEkgQWNjZXNzIGlmIHNldCB0byB0cnVlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjx1bmRlZmluZWQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjx1bmRlZmluZWQ+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS5sb2dvdXRCeVNvYXAgPSBmdW5jdGlvbihyZXZva2UsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgcmV2b2tlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSByZXZva2U7XG4gICAgcmV2b2tlID0gZmFsc2U7XG4gIH1cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgbG9nZ2VyID0gdGhpcy5fbG9nZ2VyO1xuXG4gIHZhciBib2R5ID0gW1xuICAgICc8c2U6RW52ZWxvcGUgeG1sbnM6c2U9XCJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy9zb2FwL2VudmVsb3BlL1wiPicsXG4gICAgICAnPHNlOkhlYWRlcj4nLFxuICAgICAgICAnPFNlc3Npb25IZWFkZXIgeG1sbnM9XCJ1cm46cGFydG5lci5zb2FwLnNmb3JjZS5jb21cIj4nLFxuICAgICAgICAgICc8c2Vzc2lvbklkPicgKyBlc2MocmV2b2tlID8gdGhpcy5yZWZyZXNoVG9rZW4gOiB0aGlzLmFjY2Vzc1Rva2VuKSArICc8L3Nlc3Npb25JZD4nLFxuICAgICAgICAnPC9TZXNzaW9uSGVhZGVyPicsXG4gICAgICAnPC9zZTpIZWFkZXI+JyxcbiAgICAgICc8c2U6Qm9keT4nLFxuICAgICAgICAnPGxvZ291dCB4bWxucz1cInVybjpwYXJ0bmVyLnNvYXAuc2ZvcmNlLmNvbVwiLz4nLFxuICAgICAgJzwvc2U6Qm9keT4nLFxuICAgICc8L3NlOkVudmVsb3BlPidcbiAgXS5qb2luKCcnKTtcblxuICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0Lmh0dHBSZXF1ZXN0KHtcbiAgICBtZXRob2QgOiAnUE9TVCcsXG4gICAgdXJsIDogWyB0aGlzLmluc3RhbmNlVXJsLCBcInNlcnZpY2VzL1NvYXAvdVwiLCB0aGlzLnZlcnNpb24gXS5qb2luKCcvJyksXG4gICAgYm9keSA6IGJvZHksXG4gICAgaGVhZGVycyA6IHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCIgOiBcInRleHQveG1sXCIsXG4gICAgICBcIlNPQVBBY3Rpb25cIiA6ICdcIlwiJ1xuICAgIH1cbiAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgIGxvZ2dlci5kZWJ1ZyhcIlNPQVAgc3RhdHVzQ29kZSA9IFwiICsgcmVzcG9uc2Uuc3RhdHVzQ29kZSArIFwiLCByZXNwb25zZSA9IFwiICsgcmVzcG9uc2UuYm9keSk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gNDAwKSB7XG4gICAgICB2YXIgbSA9IHJlc3BvbnNlLmJvZHkubWF0Y2goLzxmYXVsdHN0cmluZz4oW148XSspPFxcL2ZhdWx0c3RyaW5nPi8pO1xuICAgICAgdmFyIGZhdWx0c3RyaW5nID0gbSAmJiBtWzFdO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGZhdWx0c3RyaW5nIHx8IHJlc3BvbnNlLmJvZHkpO1xuICAgIH1cblxuICAgIC8vIERlc3Ryb3kgdGhlIHNlc3Npb24gYm91bmQgdG8gdGhpcyBjb25uZWN0aW9uXG4gICAgc2VsZi5hY2Nlc3NUb2tlbiA9IG51bGw7XG4gICAgc2VsZi51c2VySW5mbyA9IG51bGw7XG4gICAgc2VsZi5yZWZyZXNoVG9rZW4gPSBudWxsO1xuICAgIHNlbGYuaW5zdGFuY2VVcmwgPSBudWxsO1xuICAgIHNlbGYuY2FjaGUuY2xlYXIoKTtcblxuICAgIC8vIG5vdGhpbmcgdXNlZnVsIHJldHVybmVkIGJ5IGxvZ291dCBBUEksIGp1c3QgcmV0dXJuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcblxuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIExpc3QgcmVjZW50bHkgdmlld2VkIHJlY29yZHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gW3R5cGVdIC0gU09iamVjdCB0eXBlXG4gKiBAcGFyYW0ge051bWJlcn0gW2xpbWl0XSAtIExpbWl0IG51bSB0byBmZXRjaFxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLnJlY2VudCA9IGZ1bmN0aW9uKHR5cGUsIGxpbWl0LCBjYWxsYmFjaykge1xuICBpZiAoIV8uaXNTdHJpbmcodHlwZSkpIHtcbiAgICBjYWxsYmFjayA9IGxpbWl0O1xuICAgIGxpbWl0ID0gdHlwZTtcbiAgICB0eXBlID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmICghXy5pc051bWJlcihsaW1pdCkpIHtcbiAgICBjYWxsYmFjayA9IGxpbWl0O1xuICAgIGxpbWl0ID0gdW5kZWZpbmVkO1xuICB9XG4gIHZhciB1cmw7XG4gIGlmICh0eXBlKSB7XG4gICAgdXJsID0gWyB0aGlzLl9iYXNlVXJsKCksIFwic29iamVjdHNcIiwgdHlwZSBdLmpvaW4oJy8nKTtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgIHJldHVybiBsaW1pdCA/IHJlcy5yZWNlbnRJdGVtcy5zbGljZSgwLCBsaW1pdCkgOiByZXMucmVjZW50SXRlbXM7XG4gICAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIHVybCA9IHRoaXMuX2Jhc2VVcmwoKSArIFwiL3JlY2VudFwiO1xuICAgIGlmIChsaW1pdCkge1xuICAgICAgdXJsICs9IFwiP2xpbWl0PVwiICsgbGltaXQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXJsKS50aGVuQ2FsbChjYWxsYmFjayk7XG4gIH1cblxufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBVcGRhdGVkUmVjb3Jkc0luZm9cbiAqIEBwcm9wIHtTdHJpbmd9IGxhdGVzdERhdGVDb3ZlcmVkIC0gVGhlIHRpbWVzdGFtcCBvZiB0aGUgbGFzdCBkYXRlIGNvdmVyZWQuXG4gKiBAcHJvcCB7QXJyYXkuPFN0cmluZz59IGlkcyAtIFVwZGF0ZWQgcmVjb3JkIElEcy5cbiAqL1xuXG4vKipcbiAqIFJldHJpZXZlIHVwZGF0ZWQgcmVjb3Jkc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCBUeXBlXG4gKiBAcGFyYW0ge1N0cmluZ3xEYXRlfSBzdGFydCAtIHN0YXJ0IGRhdGUgb3Igc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgc3RhcnQgb2YgdGhlIGludGVydmFsXG4gKiBAcGFyYW0ge1N0cmluZ3xEYXRlfSBlbmQgLSBzdGFydCBkYXRlIG9yIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGVuZCBvZiB0aGUgaW50ZXJ2YWwgbXVzdCBiZSA+IHN0YXJ0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxVcGRhdGVkUmVjb3Jkc0luZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxVcGRhdGVkUmVjb3Jkc0luZm8+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS51cGRhdGVkID0gZnVuY3Rpb24gKHR5cGUsIHN0YXJ0LCBlbmQsIGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSBbIHRoaXMuX2Jhc2VVcmwoKSwgXCJzb2JqZWN0c1wiLCB0eXBlLCBcInVwZGF0ZWRcIiBdLmpvaW4oJy8nKTtcblxuICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgIHN0YXJ0ID0gbmV3IERhdGUoc3RhcnQpO1xuICB9XG5cbiAgaWYgKHN0YXJ0IGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIHN0YXJ0ID0gZm9ybWF0RGF0ZShzdGFydCk7XG4gIH1cblxuICBpZiAoc3RhcnQpIHtcbiAgICB1cmwgKz0gXCI/c3RhcnQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoc3RhcnQpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5kID0gbmV3IERhdGUoZW5kKTtcbiAgfVxuXG4gIGlmIChlbmQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgZW5kID0gZm9ybWF0RGF0ZShlbmQpO1xuICB9XG5cbiAgaWYgKGVuZCkge1xuICAgIHVybCArPSBcIiZlbmQ9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZW5kKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLnJlcXVlc3QodXJsKS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlbGV0ZWRSZWNvcmRzSW5mb1xuICogQHByb3Age1N0cmluZ30gZWFybGllc3REYXRlQXZhaWxhYmxlIC0gVGhlIHRpbWVzdGFtcCBvZiB0aGUgZWFybGllc3QgZGF0ZSBhdmFpbGFibGVcbiAqIEBwcm9wIHtTdHJpbmd9IGxhdGVzdERhdGVDb3ZlcmVkIC0gVGhlIHRpbWVzdGFtcCBvZiB0aGUgbGFzdCBkYXRlIGNvdmVyZWRcbiAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gZGVsZXRlZFJlY29yZHMgLSBVcGRhdGVkIHJlY29yZHNcbiAqIEBwcm9wIHtTdHJpbmd9IGRlbGV0ZWRSZWNvcmRzLmlkIC0gUmVjb3JkIElEXG4gKiBAcHJvcCB7U3RyaW5nfSBkZWxldGVkUmVjb3Jkcy5kZWxldGVkRGF0ZSAtIFRoZSB0aW1lc3RhbXAgd2hlbiB0aGlzIHJlY29yZCB3YXMgZGVsZXRlZFxuICovXG5cbi8qKlxuICogUmV0cmlldmUgZGVsZXRlZCByZWNvcmRzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgLSBTT2JqZWN0IFR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfERhdGV9IHN0YXJ0IC0gc3RhcnQgZGF0ZSBvciBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBvZiB0aGUgaW50ZXJ2YWxcbiAqIEBwYXJhbSB7U3RyaW5nfERhdGV9IGVuZCAtIHN0YXJ0IGRhdGUgb3Igc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZW5kIG9mIHRoZSBpbnRlcnZhbFxuICogQHBhcmFtIHtDYWxsYmFjay48RGVsZXRlZFJlY29yZHNJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48RGVsZXRlZFJlY29yZHNJbmZvPn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUuZGVsZXRlZCA9IGZ1bmN0aW9uICh0eXBlLCBzdGFydCwgZW5kLCBjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9iYXNlVXJsKCksIFwic29iamVjdHNcIiwgdHlwZSwgXCJkZWxldGVkXCIgXS5qb2luKCcvJyk7XG5cbiAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcbiAgICBzdGFydCA9IG5ldyBEYXRlKHN0YXJ0KTtcbiAgfVxuXG4gIGlmIChzdGFydCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICBzdGFydCA9IGZvcm1hdERhdGUoc3RhcnQpO1xuICB9XG5cbiAgaWYgKHN0YXJ0KSB7XG4gICAgdXJsICs9IFwiP3N0YXJ0PVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0YXJ0KTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgIGVuZCA9IG5ldyBEYXRlKGVuZCk7XG4gIH1cblxuICBpZiAoZW5kIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgIGVuZCA9IGZvcm1hdERhdGUoZW5kKTtcbiAgfVxuXG4gIGlmIChlbmQpIHtcbiAgICB1cmwgKz0gXCImZW5kPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGVuZCk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRhYnNJbmZvIC0gU2VlIHRoZSBBUEkgZG9jdW1lbnQgZm9yIGRldGFpbCBzdHJ1Y3R1cmVcbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBsaXN0IG9mIGFsbCB0YWJzXG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48VGFic0luZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxUYWJzSW5mbz59XG4gKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLnRhYnMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgdXJsID0gWyB0aGlzLl9iYXNlVXJsKCksIFwidGFic1wiIF0uam9pbignLycpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExpbWl0c0luZm8gLSBTZWUgdGhlIEFQSSBkb2N1bWVudCBmb3IgZGV0YWlsIHN0cnVjdHVyZVxuICovXG5cbi8qKlxuICogUmV0dXJucyBjdXJyZW4gc3lzdGVtIGxpbWl0IGluIHRoZSBvcmdhbml6YXRpb25cbiAqXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxMaW1pdHNJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TGltaXRzSW5mbz59XG4gKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLmxpbWl0cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSBbIHRoaXMuX2Jhc2VVcmwoKSwgXCJsaW1pdHNcIiBdLmpvaW4oJy8nKTtcbiAgcmV0dXJuIHRoaXMucmVxdWVzdCh1cmwpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUaGVtZUluZm8gLSBTZWUgdGhlIEFQSSBkb2N1bWVudCBmb3IgZGV0YWlsIHN0cnVjdHVyZVxuICovXG5cbi8qKlxuICogUmV0dXJucyBhIHRoZW1lIGluZm9cbiAqXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxUaGVtZUluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxUaGVtZUluZm8+fVxuICovXG5Db25uZWN0aW9uLnByb3RvdHlwZS50aGVtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSBbIHRoaXMuX2Jhc2VVcmwoKSwgXCJ0aGVtZVwiIF0uam9pbignLycpO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFsbCByZWdpc3RlcmVkIGdsb2JhbCBxdWljayBhY3Rpb25zXG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPFF1aWNrQWN0aW9uflF1aWNrQWN0aW9uSW5mbz4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48UXVpY2tBY3Rpb25+UXVpY2tBY3Rpb25JbmZvPj59XG4gKi9cbkNvbm5lY3Rpb24ucHJvdG90eXBlLnF1aWNrQWN0aW9ucyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLnJlcXVlc3QoXCIvcXVpY2tBY3Rpb25zXCIpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogR2V0IHJlZmVyZW5jZSBmb3Igc3BlY2lmaWVkIGdsb2JhbCBxdWljayBhY2l0b25cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uTmFtZSAtIE5hbWUgb2YgdGhlIGdsb2JhbCBxdWljayBhY3Rpb25cbiAqIEByZXR1cm5zIHtRdWlja0FjdGlvbn1cbiAqL1xuQ29ubmVjdGlvbi5wcm90b3R5cGUucXVpY2tBY3Rpb24gPSBmdW5jdGlvbihhY3Rpb25OYW1lKSB7XG4gIHJldHVybiBuZXcgUXVpY2tBY3Rpb24odGhpcywgXCIvcXVpY2tBY3Rpb25zL1wiICsgYWN0aW9uTmFtZSk7XG59O1xuIiwiLyoqXG4gKiBAZmlsZSBKU2ZvcmNlIENvcmVcbiAqIEBhdXRob3IgU2hpbmljaGkgVG9taXRhIDxzaGluaWNoaS50b21pdGFAZ21haWwuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG5cbnZhciBqc2ZvcmNlID0gbW9kdWxlLmV4cG9ydHMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5qc2ZvcmNlLlZFUlNJT04gPSByZXF1aXJlKCcuL1ZFUlNJT04nKTtcbmpzZm9yY2UuQ29ubmVjdGlvbiA9IHJlcXVpcmUoJy4vY29ubmVjdGlvbicpO1xuanNmb3JjZS5PQXV0aDIgPSByZXF1aXJlKCcuL29hdXRoMicpO1xuanNmb3JjZS5EYXRlID0ganNmb3JjZS5TZkRhdGUgPSByZXF1aXJlKFwiLi9kYXRlXCIpO1xuanNmb3JjZS5SZWNvcmRTdHJlYW0gPSByZXF1aXJlKCcuL3JlY29yZC1zdHJlYW0nKTtcbmpzZm9yY2UuUHJvbWlzZSA9IHJlcXVpcmUoJy4vcHJvbWlzZScpO1xuanNmb3JjZS5yZXF1aXJlID0gcmVxdWlyZSgnLi9yZXF1aXJlJyk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoL2NvcmUnKSxcbiAgICBjc3ZQYXJzZSA9IHJlcXVpcmUoJ2Nzdi1wYXJzZScpLFxuICAgIGNzdlBhcnNlU3luYyA9IHJlcXVpcmUoJ2Nzdi1wYXJzZS9saWIvc3luYycpLFxuICAgIGNzdlN0cmluZ2lmeSA9IHJlcXVpcmUoJ2Nzdi1zdHJpbmdpZnknKSxcbiAgICBjc3ZTdHJpbmdpZnlTeW5jID0gcmVxdWlyZSgnY3N2LXN0cmluZ2lmeS9saWIvc3luYycpO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQ1NWKHN0ciwgb3B0aW9ucykge1xuICBvcHRpb25zID0gXy5leHRlbmQoe30sIG9wdGlvbnMsIHsgY29sdW1uczogdHJ1ZSB9KTtcbiAgcmV0dXJuIGNzdlBhcnNlU3luYyhzdHIsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHRvQ1NWKHJlY29yZHMsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7IGhlYWRlcjogdHJ1ZSB9KTtcbiAgcmV0dXJuIGNzdlN0cmluZ2lmeVN5bmMocmVjb3Jkcywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcGFyc2VDU1ZTdHJlYW0ob3B0aW9ucykge1xuICBvcHRpb25zID0gXy5leHRlbmQoe30sIG9wdGlvbnMsIHsgY29sdW1uczogdHJ1ZSB9KTtcbiAgcmV0dXJuIGNzdlBhcnNlKG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNlcmlhbGl6ZUNTVlN0cmVhbShvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgb3B0aW9ucywgeyBoZWFkZXI6IHRydWUgfSk7XG4gIHJldHVybiBjc3ZTdHJpbmdpZnkob3B0aW9ucyk7XG59XG5cblxuLyoqXG4gKiBAcHJvdGVjdGVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwYXJzZUNTVjogcGFyc2VDU1YsXG4gIHRvQ1NWOiB0b0NTVixcbiAgcGFyc2VDU1ZTdHJlYW06IHBhcnNlQ1NWU3RyZWFtLFxuICBzZXJpYWxpemVDU1ZTdHJlYW06IHNlcmlhbGl6ZUNTVlN0cmVhbVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gvY29yZScpO1xuXG4vKipcbiAqIEEgZGF0ZSBvYmplY3QgdG8ga2VlcCBTYWxlc2ZvcmNlIGRhdGUgbGl0ZXJhbFxuICpcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAc2VlIGh0dHA6Ly93d3cuc2FsZXNmb3JjZS5jb20vdXMvZGV2ZWxvcGVyL2RvY3Mvc29xbF9zb3NsL0NvbnRlbnQvc2ZvcmNlX2FwaV9jYWxsc19zb3FsX3NlbGVjdF9kYXRlZm9ybWF0cy5odG1cbiAqL1xudmFyIFNmRGF0ZSA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGl0ZXJhbCkge1xuICB0aGlzLl9saXRlcmFsID0gbGl0ZXJhbDtcbn07XG5cbi8qKlxuICogUmV0dXJucyBsaXRlcmFsIHdoZW4gY29udmVydGVkIHRvIHN0cmluZ1xuICpcbiAqIEBvdmVycmlkZVxuICovXG5TZkRhdGUucHJvdG90eXBlLnRvU3RyaW5nID1cblNmRGF0ZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl9saXRlcmFsOyB9O1xuXG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIHplcm9wYWQobikgeyByZXR1cm4gKG48MTAgPyBcIjBcIiA6IFwiXCIpICsgbjsgfVxuXG4vKipcbiAqIENvbnZlcnQgSmF2YVNjcmlwdCBkYXRlIG9iamVjdCB0byBJU084NjAxIERhdGUgZm9ybWF0IChlLmcuIDIwMTItMTAtMzEpXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfERhdGV9IGRhdGUgLSBJbnB1dCBkYXRlXG4gKiBAcmV0dXJucyB7U2ZEYXRlfSAtIFNhbGVzZm9yY2UgZGF0ZSBsaXRlcmFsIHdpdGggSVNPODYwMSBkYXRlIGZvcm1hdFxuICovXG5TZkRhdGUudG9EYXRlTGl0ZXJhbCA9IGZ1bmN0aW9uKGRhdGUpIHtcbiAgaWYgKF8uaXNOdW1iZXIoZGF0ZSkpIHtcbiAgICBkYXRlID0gbmV3IERhdGUoZGF0ZSk7XG4gIH0gZWxzZSBpZiAoXy5pc1N0cmluZyhkYXRlKSkge1xuICAgIGRhdGUgPSBTZkRhdGUucGFyc2VEYXRlKGRhdGUpO1xuICB9XG4gIHZhciB5eSA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgdmFyIG1tID0gZGF0ZS5nZXRNb250aCgpKzE7XG4gIHZhciBkZCA9IGRhdGUuZ2V0RGF0ZSgpO1xuICB2YXIgZHN0ciA9IFsgeXksIHplcm9wYWQobW0pLCB6ZXJvcGFkKGRkKSBdLmpvaW4oXCItXCIpO1xuICByZXR1cm4gbmV3IFNmRGF0ZShkc3RyKTtcbn07XG5cbi8qKlxuICogQ29udmVydCBKYXZhU2NyaXB0IGRhdGUgb2JqZWN0IHRvIElTTzg2MDEgRGF0ZVRpbWUgZm9ybWF0XG4gKiAoZS5nLiAyMDEyLTEwLTMxVDEyOjM0OjU2WilcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ8RGF0ZX0gZGF0ZSAtIElucHV0IGRhdGVcbiAqIEByZXR1cm5zIHtTZkRhdGV9IC0gU2FsZXNmb3JjZSBkYXRlIGxpdGVyYWwgd2l0aCBJU084NjAxIGRhdGV0aW1lIGZvcm1hdFxuICovXG5TZkRhdGUudG9EYXRlVGltZUxpdGVyYWwgPSBmdW5jdGlvbihkYXRlKSB7XG4gIGlmIChfLmlzTnVtYmVyKGRhdGUpKSB7XG4gICAgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuICB9IGVsc2UgaWYgKF8uaXNTdHJpbmcoZGF0ZSkpIHtcbiAgICBkYXRlID0gU2ZEYXRlLnBhcnNlRGF0ZShkYXRlKTtcbiAgfVxuICB2YXIgeXkgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7XG4gIHZhciBtbSA9IGRhdGUuZ2V0VVRDTW9udGgoKSsxO1xuICB2YXIgZGQgPSBkYXRlLmdldFVUQ0RhdGUoKTtcbiAgdmFyIGhoID0gZGF0ZS5nZXRVVENIb3VycygpO1xuICB2YXIgbWkgPSBkYXRlLmdldFVUQ01pbnV0ZXMoKTtcbiAgdmFyIHNzID0gZGF0ZS5nZXRVVENTZWNvbmRzKCk7XG4gIHZhciBkdHN0ciA9XG4gICAgWyB5eSwgemVyb3BhZChtbSksIHplcm9wYWQoZGQpIF0uam9pbihcIi1cIikgKyBcIlRcIiArXG4gICAgWyB6ZXJvcGFkKGhoKSwgemVyb3BhZChtaSksIHplcm9wYWQoc3MpIF0uam9pbihcIjpcIikgKyBcIlpcIjtcbiAgcmV0dXJuIG5ldyBTZkRhdGUoZHRzdHIpO1xufTtcblxuLyoqXG4gKiBQYXJzZSBJUzA4NjAxIGRhdGUodGltZSkgZm9ybWF0dGVkIHN0cmluZyBhbmQgcmV0dXJuIGRhdGUgaW5zdGFuY2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJucyB7RGF0ZX1cbiAqL1xuU2ZEYXRlLnBhcnNlRGF0ZSA9IGZ1bmN0aW9uKHN0cikge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciByZWdleHAgPSAvXihbXFxkXXs0fSktPyhbXFxkXXsyfSktPyhbXFxkXXsyfSkoVChbXFxkXXsyfSk6PyhbXFxkXXsyfSk6PyhbXFxkXXsyfSkoLihbXFxkXXszfSkpPyhafChbXFwrXFwtXSkoW1xcZF17Mn0pOj8oW1xcZF17Mn0pKSk/JC87XG4gIHZhciBtID0gc3RyLm1hdGNoKHJlZ2V4cCk7XG4gIGlmIChtKSB7XG4gICAgZCA9IG5ldyBEYXRlKDApO1xuICAgIGlmICghbVs0XSkge1xuICAgICAgZC5zZXRGdWxsWWVhcihwYXJzZUludChtWzFdLCAxMCkpO1xuICAgICAgZC5zZXREYXRlKHBhcnNlSW50KG1bM10sIDEwKSk7XG4gICAgICBkLnNldE1vbnRoKHBhcnNlSW50KG1bMl0sIDEwKSAtIDEpO1xuICAgICAgZC5zZXRIb3VycygwKTtcbiAgICAgIGQuc2V0TWludXRlcygwKTtcbiAgICAgIGQuc2V0U2Vjb25kcygwKTtcbiAgICAgIGQuc2V0TWlsbGlzZWNvbmRzKDApO1xuICAgIH0gZWxzZSB7XG4gICAgICBkLnNldFVUQ0Z1bGxZZWFyKHBhcnNlSW50KG1bMV0sIDEwKSk7XG4gICAgICBkLnNldFVUQ0RhdGUocGFyc2VJbnQobVszXSwgMTApKTtcbiAgICAgIGQuc2V0VVRDTW9udGgocGFyc2VJbnQobVsyXSwgMTApIC0gMSk7XG4gICAgICBkLnNldFVUQ0hvdXJzKHBhcnNlSW50KG1bNV0sIDEwKSk7XG4gICAgICBkLnNldFVUQ01pbnV0ZXMocGFyc2VJbnQobVs2XSwgMTApKTtcbiAgICAgIGQuc2V0VVRDU2Vjb25kcyhwYXJzZUludChtWzddLCAxMCkpO1xuICAgICAgZC5zZXRVVENNaWxsaXNlY29uZHMocGFyc2VJbnQobVs5XSB8fCAnMCcsIDEwKSk7XG4gICAgICBpZiAobVsxMF0gJiYgbVsxMF0gIT09ICdaJykge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQobVsxMl0sMTApICogNjAgKyBwYXJzZUludChtWzEzXSwgMTApO1xuICAgICAgICBkLnNldFRpbWUoKG1bMTFdID09PSAnKycgPyAtMSA6IDEpICogb2Zmc2V0ICogNjAgKiAxMDAwICtkLmdldFRpbWUoKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZGF0ZSBmb3JtYXQgaXMgc3BlY2lmaWVkIDogXCIgKyBzdHIpO1xuICB9XG59O1xuXG4vKlxuICogUHJlLWRlZmluZWQgU2FsZXNmb3JjZSBEYXRlIExpdGVyYWxzXG4gKi9cbnZhciBTZkRhdGVMaXRlcmFscyA9IHtcbiAgWUVTVEVSREFZOiAxLFxuICBUT0RBWTogMSxcbiAgVE9NT1JST1c6IDEsXG4gIExBU1RfV0VFSzogMSxcbiAgVEhJU19XRUVLOiAxLFxuICBORVhUX1dFRUs6IDEsXG4gIExBU1RfTU9OVEg6IDEsXG4gIFRISVNfTU9OVEg6IDEsXG4gIE5FWFRfTU9OVEg6IDEsXG4gIExBU1RfOTBfREFZUzogMSxcbiAgTkVYVF85MF9EQVlTOiAxLFxuICBMQVNUX05fREFZUzogMixcbiAgTkVYVF9OX0RBWVM6IDIsXG4gIE5FWFRfTl9XRUVLUzogMixcbiAgTEFTVF9OX1dFRUtTOiAyLFxuICBORVhUX05fTU9OVEhTOiAyLFxuICBMQVNUX05fTU9OVEhTOiAyLFxuICBUSElTX1FVQVJURVI6IDEsXG4gIExBU1RfUVVBUlRFUjogMSxcbiAgTkVYVF9RVUFSVEVSOiAxLFxuICBORVhUX05fUVVBUlRFUlM6IDIsXG4gIExBU1RfTl9RVUFSVEVSUzogMixcbiAgVEhJU19ZRUFSOiAxLFxuICBMQVNUX1lFQVI6IDEsXG4gIE5FWFRfWUVBUjogMSxcbiAgTkVYVF9OX1lFQVJTOiAyLFxuICBMQVNUX05fWUVBUlM6IDIsXG4gIFRISVNfRklTQ0FMX1FVQVJURVI6IDEsXG4gIExBU1RfRklTQ0FMX1FVQVJURVI6IDEsXG4gIE5FWFRfRklTQ0FMX1FVQVJURVI6IDEsXG4gIE5FWFRfTl9GSVNDQUxfUVVBUlRFUlM6MixcbiAgTEFTVF9OX0ZJU0NBTF9RVUFSVEVSUzoyLFxuICBUSElTX0ZJU0NBTF9ZRUFSOjEsXG4gIExBU1RfRklTQ0FMX1lFQVI6MSxcbiAgTkVYVF9GSVNDQUxfWUVBUjoxLFxuICBORVhUX05fRklTQ0FMX1lFQVJTOiAyLFxuICBMQVNUX05fRklTQ0FMX1lFQVJTOiAyXG59O1xuXG5mb3IgKHZhciBsaXRlcmFsIGluIFNmRGF0ZUxpdGVyYWxzKSB7XG4gIHZhciB0eXBlID0gU2ZEYXRlTGl0ZXJhbHNbbGl0ZXJhbF07XG4gIFNmRGF0ZVtsaXRlcmFsXSA9XG4gICB0eXBlID09PSAxID8gbmV3IFNmRGF0ZShsaXRlcmFsKSA6IGNyZWF0ZUxpdGVyYWxCdWlsZGVyKGxpdGVyYWwpO1xufVxuXG4vKiogQHByaXZhdGUgKiovXG5mdW5jdGlvbiBjcmVhdGVMaXRlcmFsQnVpbGRlcihsaXRlcmFsKSB7XG4gIHJldHVybiBmdW5jdGlvbihudW0pIHsgcmV0dXJuIG5ldyBTZkRhdGUobGl0ZXJhbCArIFwiOlwiICsgbnVtKTsgfTtcbn1cbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKSxcbiAgICBldmVudHMgPSByZXF1aXJlKCdldmVudHMnKSxcbiAgICBfID0gcmVxdWlyZSgnbG9kYXNoL2NvcmUnKSxcbiAgICBQcm9taXNlID0gcmVxdWlyZSgnLi9wcm9taXNlJyk7XG5cbi8qKlxuICogSFRUUCBiYXNlZCBBUEkgY2xhc3Mgd2l0aCBhdXRob3JpemF0aW9uIGhvb2tcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIGV2ZW50cy5FdmVudEVtaXR0ZXJcbiAqIEBwYXJhbSB7Q29ubmVjdGlvbn0gY29ubiAtIENvbm5lY3Rpb24gb2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gSHR0cCBBUEkgT3B0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnJlc3BvbnNlVHlwZV0gLSBPdmVycmlkaW5nIGNvbnRlbnQgbWltZS10eXBlIGluIHJlc3BvbnNlXG4gKiBAcGFyYW0ge1RyYW5zcG9ydH0gW29wdGlvbnMudHJhbnNwb3J0XSAtIFRyYW5zcG9ydCBmb3IgaHR0cCBhcGlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5ub0NvbnRlbnRSZXNwb25zZV0gLSBBbHRlcm5hdGl2ZSByZXNwb25zZSB3aGVuIG5vIGNvbnRlbnQgcmV0dXJuZWQgaW4gcmVzcG9uc2UgKD0gSFRUUCAyMDQpXG4gKi9cbnZhciBIdHRwQXBpID0gZnVuY3Rpb24oY29ubiwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdGhpcy5fY29ubiA9IGNvbm47XG4gIHRoaXMub24oJ3Jlc3VtZScsIGZ1bmN0aW9uKGVycikgeyBjb25uLmVtaXQoJ3Jlc3VtZScsIGVycik7IH0pO1xuICB0aGlzLl9yZXNwb25zZVR5cGUgPSBvcHRpb25zLnJlc3BvbnNlVHlwZTtcbiAgdGhpcy5fdHJhbnNwb3J0ID0gb3B0aW9ucy50cmFuc3BvcnQgfHwgY29ubi5fdHJhbnNwb3J0O1xuICB0aGlzLl9ub0NvbnRlbnRSZXNwb25zZSA9IG9wdGlvbnMubm9Db250ZW50UmVzcG9uc2U7XG59O1xuXG5pbmhlcml0cyhIdHRwQXBpLCBldmVudHMuRXZlbnRFbWl0dGVyKTtcblxuLyoqXG4gKiBDYWxsb3V0IHRvIEFQSSBlbmRwb2ludCB1c2luZyBodHRwXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJlcXVlc3QgLSBIdHRwIFJlcXVlc3Qgb2JqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdC51cmwgLSBFbmRwb2ludCBVUkwgdG8gcmVxdWVzdFxuICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3QubWV0aG9kIC0gSHR0cCBtZXRob2QgZm9yIHJlcXVlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdC5oZWFkZXJzXSAtIEh0dHAgcmVxdWVzdCBoZWFkZXJzIGluIGhhc2ggb2JqZWN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxPYmplY3Q+fSBjYWxsYmFjayAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn0gLVxuICovXG5IdHRwQXBpLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24ocmVxdWVzdCwgY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgY29ubiA9IHRoaXMuX2Nvbm47XG4gIHZhciBsb2dnZXIgPSBjb25uLl9sb2dnZXI7XG4gIHZhciByZWZyZXNoRGVsZWdhdGUgPSB0aGlzLmdldFJlZnJlc2hEZWxlZ2F0ZSgpO1xuICAvLyByZW1lbWJlciBwcmV2aW91cyBpbnN0YW5jZSB1cmwgaW4gY2FzZSBpdCBjaGFuZ2VzIGFmdGVyIGEgcmVmcmVzaFxuICB2YXIgbGFzdEluc3RhbmNlVXJsID0gY29ubi5pbnN0YW5jZVVybDtcblxuICB2YXIgZGVmZXJyZWQgPSBQcm9taXNlLmRlZmVyKCk7XG5cbiAgdmFyIG9uUmVzdW1lID0gZnVuY3Rpb24oZXJyKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgdG9rZW4gcmVmcmVzaCBoYXMgY2hhbmdlZCB0aGUgaW5zdGFuY2UgdXJsXG4gICAgaWYobGFzdEluc3RhbmNlVXJsICE9PSBjb25uLmluc3RhbmNlVXJsKXtcbiAgICAgIC8vIGlmIHRoZSBpbnN0YW5jZSB1cmwgaGFzIGNoYW5nZWRcbiAgICAgIC8vIHRoZW4gcmVwbGFjZSB0aGUgY3VycmVudCByZXF1ZXN0IHVybHMgaW5zdGFuY2UgdXJsIGZyYWdtZW50XG4gICAgICAvLyB3aXRoIHRoZSB1cGRhdGVkIGluc3RhbmNlIHVybFxuICAgICAgcmVxdWVzdC51cmwgPSByZXF1ZXN0LnVybC5yZXBsYWNlKGxhc3RJbnN0YW5jZVVybCxjb25uLmluc3RhbmNlVXJsKTtcbiAgICB9XG5cbiAgICBzZWxmLnJlcXVlc3QocmVxdWVzdCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICBpZiAocmVmcmVzaERlbGVnYXRlICYmIHJlZnJlc2hEZWxlZ2F0ZS5fcmVmcmVzaGluZykge1xuICAgIHJlZnJlc2hEZWxlZ2F0ZS5vbmNlKCdyZXN1bWUnLCBvblJlc3VtZSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UudGhlbkNhbGwoY2FsbGJhY2spO1xuICB9XG5cbiAgLy8gaG9vayBiZWZvcmUgc2VuZGluZ1xuICBzZWxmLmJlZm9yZVNlbmQocmVxdWVzdCk7XG5cbiAgc2VsZi5lbWl0KCdyZXF1ZXN0JywgcmVxdWVzdCk7XG4gIGxvZ2dlci5kZWJ1ZyhcIjxyZXF1ZXN0PiBtZXRob2Q9XCIgKyByZXF1ZXN0Lm1ldGhvZCArIFwiLCB1cmw9XCIgKyByZXF1ZXN0LnVybCk7XG4gIHZhciByZXF1ZXN0VGltZSA9IERhdGUubm93KCk7XG5cbiAgcmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5odHRwUmVxdWVzdChyZXF1ZXN0KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgdmFyIHJlc3BvbnNlVGltZSA9IERhdGUubm93KCk7XG4gICAgbG9nZ2VyLmRlYnVnKFwiZWxhcHBzZWQgdGltZSA6IFwiICsgKHJlc3BvbnNlVGltZSAtIHJlcXVlc3RUaW1lKSArIFwibXNlY1wiKTtcbiAgICBsb2dnZXIuZGVidWcoXCI8cmVzcG9uc2U+IHN0YXR1cz1cIiArIHJlc3BvbnNlLnN0YXR1c0NvZGUgKyBcIiwgdXJsPVwiICsgcmVxdWVzdC51cmwpO1xuXG4gICAgc2VsZi5lbWl0KCdyZXNwb25zZScsIHJlc3BvbnNlKTtcbiAgICAvLyBSZWZyZXNoIHRva2VuIGlmIHNlc3Npb24gaGFzIGJlZW4gZXhwaXJlZCBhbmQgcmVxdWlyZXMgYXV0aGVudGljYXRpb25cbiAgICAvLyB3aGVuIHNlc3Npb24gcmVmcmVzaCBkZWxlZ2F0ZSBpcyBhdmFpbGFibGVcbiAgICBpZiAoc2VsZi5pc1Nlc3Npb25FeHBpcmVkKHJlc3BvbnNlKSAmJiByZWZyZXNoRGVsZWdhdGUpIHtcbiAgICAgIHJlZnJlc2hEZWxlZ2F0ZS5yZWZyZXNoKHJlcXVlc3RUaW1lLCBvblJlc3VtZSk7XG4gICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgaWYgKHNlbGYuaXNFcnJvclJlc3BvbnNlKHJlc3BvbnNlKSkge1xuICAgICAgdmFyIGVyciA9IHNlbGYuZ2V0RXJyb3IocmVzcG9uc2UpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICByZXR1cm4gc2VsZi5nZXRSZXNwb25zZUJvZHkocmVzcG9uc2UpO1xuICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICB2YXIgcmVzcG9uc2VUaW1lID0gRGF0ZS5ub3coKTtcbiAgICBsb2dnZXIuZGVidWcoXCJlbGFwcHNlZCB0aW1lIDogXCIgKyAocmVzcG9uc2VUaW1lIC0gcmVxdWVzdFRpbWUpICsgXCJtc2VjXCIpO1xuICAgIGxvZ2dlci5lcnJvcihlcnIpO1xuICAgIHRocm93IGVycjtcbiAgfSlcbiAgLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQHByb3RlY3RlZFxuICovXG5IdHRwQXBpLnByb3RvdHlwZS5nZXRSZWZyZXNoRGVsZWdhdGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4uX3JlZnJlc2hEZWxlZ2F0ZTtcbn07XG5cbi8qKlxuICpcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuSHR0cEFwaS5wcm90b3R5cGUuYmVmb3JlU2VuZCA9IGZ1bmN0aW9uKHJlcXVlc3QpIHtcbiAgcmVxdWVzdC5oZWFkZXJzID0gcmVxdWVzdC5oZWFkZXJzIHx8IHt9O1xuICBpZiAodGhpcy5fY29ubi5hY2Nlc3NUb2tlbikge1xuICAgIHJlcXVlc3QuaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJCZWFyZXIgXCIgKyB0aGlzLl9jb25uLmFjY2Vzc1Rva2VuO1xuICB9XG4gIGlmICh0aGlzLl9jb25uLmNhbGxPcHRpb25zKSB7XG4gICAgdmFyIGNhbGxPcHRpb25zID0gW107XG4gICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLl9jb25uLmNhbGxPcHRpb25zKSB7XG4gICAgICBjYWxsT3B0aW9ucy5wdXNoKG5hbWUgKyBcIj1cIiArIHRoaXMuX2Nvbm4uY2FsbE9wdGlvbnNbbmFtZV0pO1xuICAgIH1cbiAgICByZXF1ZXN0LmhlYWRlcnNbXCJTZm9yY2UtQ2FsbC1PcHRpb25zXCJdID0gY2FsbE9wdGlvbnMuam9pbignLCAnKTtcbiAgfVxufTtcblxuLyoqXG4gKiBEZXRlY3QgcmVzcG9uc2UgY29udGVudCBtaW1lLXR5cGVcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuSHR0cEFwaS5wcm90b3R5cGUuZ2V0UmVzcG9uc2VDb250ZW50VHlwZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gIHJldHVybiB0aGlzLl9yZXNwb25zZVR5cGUgfHwgcmVzcG9uc2UuaGVhZGVycyAmJiByZXNwb25zZS5oZWFkZXJzW1wiY29udGVudC10eXBlXCJdO1xufTtcblxuLyoqXG4gKlxuICovXG5IdHRwQXBpLnByb3RvdHlwZS5wYXJzZVJlc3BvbnNlQm9keSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gIHZhciBjb250ZW50VHlwZSA9IHRoaXMuZ2V0UmVzcG9uc2VDb250ZW50VHlwZShyZXNwb25zZSk7XG4gIHZhciBwYXJzZUJvZHkgPSAvXih0ZXh0fGFwcGxpY2F0aW9uKVxcL3htbCg7fCQpLy50ZXN0KGNvbnRlbnRUeXBlKSA/IHBhcnNlWE1MIDpcbiAgICAgICAgIC9eYXBwbGljYXRpb25cXC9qc29uKDt8JCkvLnRlc3QoY29udGVudFR5cGUpID8gcGFyc2VKU09OIDpcbiAgICAgICAgIC9edGV4dFxcL2Nzdig7fCQpLy50ZXN0KGNvbnRlbnRUeXBlKSA/IHBhcnNlQ1NWIDpcbiAgICAgICAgIHBhcnNlVGV4dDtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcGFyc2VCb2R5KHJlc3BvbnNlLmJvZHkpO1xuICB9IGNhdGNoKGUpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UuYm9keTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgcmVzcG9uc2UgYm9keVxuICogQHByb3RlY3RlZFxuICovXG5IdHRwQXBpLnByb3RvdHlwZS5nZXRSZXNwb25zZUJvZHkgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjA0KSB7IC8vIE5vIENvbnRlbnRcbiAgICByZXR1cm4gdGhpcy5fbm9Db250ZW50UmVzcG9uc2U7XG4gIH1cbiAgdmFyIGJvZHkgPSB0aGlzLnBhcnNlUmVzcG9uc2VCb2R5KHJlc3BvbnNlKTtcbiAgdmFyIGVycjtcbiAgaWYgKHRoaXMuaGFzRXJyb3JJblJlc3BvbnNlQm9keShib2R5KSkge1xuICAgIGVyciA9IHRoaXMuZ2V0RXJyb3IocmVzcG9uc2UsIGJvZHkpO1xuICAgIHRocm93IGVycjtcbiAgfVxuICBpZiAocmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMzAwKSB7IC8vIE11bHRpcGxlIENob2ljZXNcbiAgICBlcnIgPSBuZXcgRXJyb3IoJ011bHRpcGxlIHJlY29yZHMgZm91bmQnKTtcbiAgICBlcnIubmFtZSA9IFwiTVVMVElQTEVfQ0hPSUNFU1wiO1xuICAgIGVyci5jb250ZW50ID0gYm9keTtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbiAgcmV0dXJuIGJvZHk7XG59O1xuXG4vKiogQHByaXZhdGUgKi9cbmZ1bmN0aW9uIHBhcnNlSlNPTihzdHIpIHtcbiAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcbn1cblxuLyoqIEBwcml2YXRlICovXG5mdW5jdGlvbiBwYXJzZVhNTChzdHIpIHtcbiAgdmFyIHJldCA9IHt9O1xuICByZXF1aXJlKCd4bWwyanMnKS5wYXJzZVN0cmluZyhzdHIsIHsgZXhwbGljaXRBcnJheTogZmFsc2UgfSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICByZXQgPSB7IGVycm9yOiBlcnIsIHJlc3VsdCA6IHJlc3VsdCB9O1xuICB9KTtcbiAgaWYgKHJldC5lcnJvcikgeyB0aHJvdyByZXQuZXJyb3I7IH1cbiAgcmV0dXJuIHJldC5yZXN1bHQ7XG59XG5cbi8qKiBAcHJpdmF0ZSAqL1xuZnVuY3Rpb24gcGFyc2VDU1Yoc3RyKSB7XG4gIHJldHVybiByZXF1aXJlKCcuL2NzdicpLnBhcnNlQ1NWKHN0cik7XG59XG5cbi8qKiBAcHJpdmF0ZSAqL1xuZnVuY3Rpb24gcGFyc2VUZXh0KHN0cikgeyByZXR1cm4gc3RyOyB9XG5cblxuLyoqXG4gKiBEZXRlY3Qgc2Vzc2lvbiBleHBpcnlcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuSHR0cEFwaS5wcm90b3R5cGUuaXNTZXNzaW9uRXhwaXJlZCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gIHJldHVybiByZXNwb25zZS5zdGF0dXNDb2RlID09PSA0MDE7XG59O1xuXG4vKipcbiAqIERldGVjdCBlcnJvciByZXNwb25zZVxuICogQHByb3RlY3RlZFxuICovXG5IdHRwQXBpLnByb3RvdHlwZS5pc0Vycm9yUmVzcG9uc2UgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICByZXR1cm4gcmVzcG9uc2Uuc3RhdHVzQ29kZSA+PSA0MDA7XG59O1xuXG4vKipcbiAqIERldGVjdCBlcnJvciBpbiByZXNwb25zZSBib2R5XG4gKiBAcHJvdGVjdGVkXG4gKi9cbkh0dHBBcGkucHJvdG90eXBlLmhhc0Vycm9ySW5SZXNwb25zZUJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogUGFyc2luZyBlcnJvciBtZXNzYWdlIGluIHJlc3BvbnNlXG4gKiBAcHJvdGVjdGVkXG4gKi9cbkh0dHBBcGkucHJvdG90eXBlLnBhcnNlRXJyb3IgPSBmdW5jdGlvbihib2R5KSB7XG4gIHZhciBlcnJvcnMgPSBib2R5O1xuICByZXR1cm4gXy5pc0FycmF5KGVycm9ycykgPyBlcnJvcnNbMF0gOiBlcnJvcnM7XG59O1xuXG4vKipcbiAqIEdldCBlcnJvciBtZXNzYWdlIGluIHJlc3BvbnNlXG4gKiBAcHJvdGVjdGVkXG4gKi9cbkh0dHBBcGkucHJvdG90eXBlLmdldEVycm9yID0gZnVuY3Rpb24ocmVzcG9uc2UsIGJvZHkpIHtcbiAgdmFyIGVycm9yO1xuICB0cnkge1xuICAgIGVycm9yID0gdGhpcy5wYXJzZUVycm9yKGJvZHkgfHwgdGhpcy5wYXJzZVJlc3BvbnNlQm9keShyZXNwb25zZSkpO1xuICB9IGNhdGNoKGUpIHt9XG4gIGVycm9yID0gXy5pc09iamVjdChlcnJvcikgJiYgXy5pc1N0cmluZyhlcnJvci5tZXNzYWdlKSA/IGVycm9yIDoge1xuICAgIGVycm9yQ29kZTogJ0VSUk9SX0hUVFBfJyArIHJlc3BvbnNlLnN0YXR1c0NvZGUsXG4gICAgbWVzc2FnZSA6IHJlc3BvbnNlLmJvZHlcbiAgfTtcbiAgdmFyIGVyciA9IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgZXJyLm5hbWUgPSBlcnJvci5lcnJvckNvZGU7XG4gIGZvciAodmFyIGtleSBpbiBlcnJvcikgeyBlcnJba2V5XSA9IGVycm9yW2tleV07IH1cbiAgcmV0dXJuIGVycjtcbn07XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogQHByb3RlY3RlZFxuICovXG52YXIgU2Vzc2lvblJlZnJlc2hEZWxlZ2F0ZSA9IGZ1bmN0aW9uKGNvbm4sIHJlZnJlc2hGbikge1xuICB0aGlzLl9jb25uID0gY29ubjtcbiAgdGhpcy5fcmVmcmVzaEZuID0gcmVmcmVzaEZuO1xuICB0aGlzLl9yZWZyZXNoaW5nID0gZmFsc2U7XG59O1xuXG5pbmhlcml0cyhTZXNzaW9uUmVmcmVzaERlbGVnYXRlLCBldmVudHMuRXZlbnRFbWl0dGVyKTtcblxuLyoqXG4gKiBSZWZyZXNoIGFjY2VzcyB0b2tlblxuICogQHByaXZhdGVcbiAqL1xuU2Vzc2lvblJlZnJlc2hEZWxlZ2F0ZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKHNpbmNlLCBjYWxsYmFjaykge1xuICAvLyBDYWxsYmFjayBpbW1lZGlhdGVseSBXaGVuIHJlZnJlc2hlZCBhZnRlciBkZXNpZ25hdGVkIHRpbWVcbiAgaWYgKHRoaXMuX2xhc3RSZWZyZXNoZWRBdCA+IHNpbmNlKSB7IHJldHVybiBjYWxsYmFjaygpOyB9XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGNvbm4gPSB0aGlzLl9jb25uO1xuICB2YXIgbG9nZ2VyID0gY29ubi5fbG9nZ2VyO1xuICBzZWxmLm9uY2UoJ3Jlc3VtZScsIGNhbGxiYWNrKTtcbiAgaWYgKHNlbGYuX3JlZnJlc2hpbmcpIHsgcmV0dXJuOyB9XG4gIGxvZ2dlci5kZWJ1ZyhcIjxyZWZyZXNoIHRva2VuPlwiKTtcbiAgc2VsZi5fcmVmcmVzaGluZyA9IHRydWU7XG4gIHJldHVybiBzZWxmLl9yZWZyZXNoRm4oY29ubiwgZnVuY3Rpb24oZXJyLCBhY2Nlc3NUb2tlbiwgcmVzKSB7XG4gICAgaWYgKCFlcnIpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcIkNvbm5lY3Rpb24gcmVmcmVzaCBjb21wbGV0ZWQuXCIpO1xuICAgICAgY29ubi5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgICAgY29ubi5lbWl0KFwicmVmcmVzaFwiLCBhY2Nlc3NUb2tlbiwgcmVzKTtcbiAgICB9XG4gICAgc2VsZi5fbGFzdFJlZnJlc2hlZEF0ID0gRGF0ZS5ub3coKTtcbiAgICBzZWxmLl9yZWZyZXNoaW5nID0gZmFsc2U7XG4gICAgc2VsZi5lbWl0KCdyZXN1bWUnLCBlcnIpO1xuICB9KTtcbn07XG5cblxuLyoqXG4gKlxuICovXG5IdHRwQXBpLlNlc3Npb25SZWZyZXNoRGVsZWdhdGUgPSBTZXNzaW9uUmVmcmVzaERlbGVnYXRlO1xubW9kdWxlLmV4cG9ydHMgPSBIdHRwQXBpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBwcm90ZWN0ZWRcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge1N0cmluZ3xOdW1iZXJ9IGxvZ0xldmVsIC0gTG9nIGxldmVsXG4gKi9cbnZhciBMb2dnZXIgPSBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxvZ0xldmVsKSB7XG4gIGlmICh0eXBlb2YgbG9nTGV2ZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgbG9nTGV2ZWwgPSBMb2dMZXZlbHNbbG9nTGV2ZWxdO1xuICB9XG4gIGlmICghbG9nTGV2ZWwpIHtcbiAgICBsb2dMZXZlbCA9IExvZ0xldmVscy5JTkZPO1xuICB9XG4gIHRoaXMuX2xvZ0xldmVsID0gbG9nTGV2ZWw7XG59O1xuXG4vKipcbiAqIEBtZW1iZXJvZiBMb2dnZXJcbiAqL1xudmFyIExvZ0xldmVscyA9IExvZ2dlci5Mb2dMZXZlbHMgPSB7XG4gIFwiREVCVUdcIiA6IDEsXG4gIFwiSU5GT1wiIDogMixcbiAgXCJXQVJOXCIgOiAzLFxuICBcIkVSUk9SXCIgOiA0LFxuICBcIkZBVEFMXCIgOiA1XG59O1xuXG4vKipcbiAqIE91dHB1dCBsb2dcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbGV2ZWwgLSBMb2dnaW5nIHRhcmdldCBsZXZlbFxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgLSBNZXNzYWdlIHRvIGxvZ1xuICovXG5Mb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uKGxldmVsLCBtZXNzYWdlKSB7XG4gIGlmICh0aGlzLl9sb2dMZXZlbCA8PSBsZXZlbCkge1xuICAgIGlmIChsZXZlbCA8IExvZ0xldmVscy5FUlJPUikge1xuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgfVxuICB9XG59O1xuXG5mb3IgKHZhciBsZXZlbCBpbiBMb2dMZXZlbHMpIHtcbiAgTG9nZ2VyLnByb3RvdHlwZVtsZXZlbC50b0xvd2VyQ2FzZSgpXSA9IGNyZWF0ZUxvZ2dlckZ1bmN0aW9uKExvZ0xldmVsc1tsZXZlbF0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2dnZXJGdW5jdGlvbihsZXZlbCkge1xuICByZXR1cm4gZnVuY3Rpb24obWVzc2FnZSkgeyB0aGlzLmxvZyhsZXZlbCwgbWVzc2FnZSk7IH07XG59XG4iLCIvKipcbiAqIEBmaWxlIE1hbmFnZXMgU2FsZXNmb3JjZSBPQXV0aDIgb3BlcmF0aW9uc1xuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpLFxuICAgIF8gPSByZXF1aXJlKCdsb2Rhc2gvY29yZScpLFxuICAgIFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0Jyk7XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgbG9naW5VcmwgOiBcImh0dHBzOi8vbG9naW4uc2FsZXNmb3JjZS5jb21cIlxufTtcblxuLyoqXG4gKiBPQXV0aDIgY2xhc3NcbiAqXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBPQXV0aDIgY29uZmlnIG9wdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5sb2dpblVybF0gLSBTYWxlc2ZvcmNlIGxvZ2luIHNlcnZlciBVUkxcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5hdXRoelNlcnZpY2VVcmxdIC0gT0F1dGgyIGF1dGhvcml6YXRpb24gc2VydmljZSBVUkwuIElmIG5vdCBzcGVjaWZpZWQsIGl0IGdlbmVyYXRlcyBmcm9tIGRlZmF1bHQgYnkgYWRkaW5nIHRvIGxvZ2luIHNlcnZlciBVUkwuXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMudG9rZW5TZXJ2aWNlVXJsXSAtIE9BdXRoMiB0b2tlbiBzZXJ2aWNlIFVSTC4gSWYgbm90IHNwZWNpZmllZCBpdCBnZW5lcmF0ZXMgZnJvbSBkZWZhdWx0IGJ5IGFkZGluZyB0byBsb2dpbiBzZXJ2ZXIgVVJMLlxuICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuY2xpZW50SWQgLSBPQXV0aDIgY2xpZW50IElELlxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLmNsaWVudFNlY3JldF0gLSBPQXV0aDIgY2xpZW50IHNlY3JldCAoVGhpcyBpcyBvcHRpb25hbCBmb3IgcHVibGljIGNsaWVudCkuXG4gKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5yZWRpcmVjdFVyaSAtIFVSSSB0byBiZSBjYWxsYmFja2VkIGZyb20gU2FsZXNmb3JjZSBPQXV0aDIgYXV0aG9yaXphdGlvbiBzZXJ2aWNlLlxuICovXG52YXIgT0F1dGgyID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLmF1dGh6U2VydmljZVVybCAmJiBvcHRpb25zLnRva2VuU2VydmljZVVybCkge1xuICAgIHRoaXMubG9naW5VcmwgPSBvcHRpb25zLmF1dGh6U2VydmljZVVybC5zcGxpdCgnLycpLnNsaWNlKDAsIDMpLmpvaW4oJy8nKTtcbiAgICB0aGlzLmF1dGh6U2VydmljZVVybCA9IG9wdGlvbnMuYXV0aHpTZXJ2aWNlVXJsO1xuICAgIHRoaXMudG9rZW5TZXJ2aWNlVXJsID0gb3B0aW9ucy50b2tlblNlcnZpY2VVcmw7XG4gICAgdGhpcy5yZXZva2VTZXJ2aWNlVXJsID0gb3B0aW9ucy5yZXZva2VTZXJ2aWNlVXJsO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubG9naW5VcmwgPSBvcHRpb25zLmxvZ2luVXJsIHx8IGRlZmF1bHRzLmxvZ2luVXJsO1xuICAgIHRoaXMuYXV0aHpTZXJ2aWNlVXJsID0gdGhpcy5sb2dpblVybCArIFwiL3NlcnZpY2VzL29hdXRoMi9hdXRob3JpemVcIjtcbiAgICB0aGlzLnRva2VuU2VydmljZVVybCA9IHRoaXMubG9naW5VcmwgKyBcIi9zZXJ2aWNlcy9vYXV0aDIvdG9rZW5cIjtcbiAgICB0aGlzLnJldm9rZVNlcnZpY2VVcmwgPSB0aGlzLmxvZ2luVXJsICsgXCIvc2VydmljZXMvb2F1dGgyL3Jldm9rZVwiO1xuICB9XG4gIHRoaXMuY2xpZW50SWQgPSBvcHRpb25zLmNsaWVudElkO1xuICB0aGlzLmNsaWVudFNlY3JldCA9IG9wdGlvbnMuY2xpZW50U2VjcmV0O1xuICB0aGlzLnJlZGlyZWN0VXJpID0gb3B0aW9ucy5yZWRpcmVjdFVyaTtcbiAgaWYgKG9wdGlvbnMucHJveHlVcmwpIHtcbiAgICB0aGlzLl90cmFuc3BvcnQgPSBuZXcgVHJhbnNwb3J0LlByb3h5VHJhbnNwb3J0KG9wdGlvbnMucHJveHlVcmwpO1xuICB9IGVsc2UgaWYgKG9wdGlvbnMuaHR0cFByb3h5KSB7XG4gICAgdGhpcy5fdHJhbnNwb3J0ID0gbmV3IFRyYW5zcG9ydC5IdHRwUHJveHlUcmFuc3BvcnQob3B0aW9ucy5odHRwUHJveHkpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX3RyYW5zcG9ydCA9IG5ldyBUcmFuc3BvcnQoKTtcbiAgfVxufTtcblxuXG5cbi8qKlxuICpcbiAqL1xuXy5leHRlbmQoT0F1dGgyLnByb3RvdHlwZSwgLyoqIEBsZW5kcyBPQXV0aDIucHJvdG90eXBlICoqLyB7XG5cbiAgLyoqXG4gICAqIEdldCBTYWxlc2ZvcmNlIE9BdXRoMiBhdXRob3JpemF0aW9uIHBhZ2UgVVJMIHRvIHJlZGlyZWN0IHVzZXIgYWdlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBQYXJhbWV0ZXJzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcGFyYW1zLnNjb3BlXSAtIFNjb3BlIHZhbHVlcyBpbiBzcGFjZS1zZXBhcmF0ZWQgc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcGFyYW1zLnN0YXRlXSAtIFN0YXRlIHBhcmFtZXRlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhcmFtcy5jb2RlX2NoYWxsZW5nZV0gLSBDb2RlIGNoYWxsZW5nZSB2YWx1ZSAoUkZDIDc2MzYgLSBQcm9vZiBLZXkgb2YgQ29kZSBFeGNoYW5nZSlcbiAgICogQHJldHVybnMge1N0cmluZ30gQXV0aG9yaXphdGlvbiBwYWdlIFVSTFxuICAgKi9cbiAgZ2V0QXV0aG9yaXphdGlvblVybCA6IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgIHBhcmFtcyA9IF8uZXh0ZW5kKHtcbiAgICAgIHJlc3BvbnNlX3R5cGUgOiBcImNvZGVcIixcbiAgICAgIGNsaWVudF9pZCA6IHRoaXMuY2xpZW50SWQsXG4gICAgICByZWRpcmVjdF91cmkgOiB0aGlzLnJlZGlyZWN0VXJpXG4gICAgfSwgcGFyYW1zIHx8IHt9KTtcbiAgICByZXR1cm4gdGhpcy5hdXRoelNlcnZpY2VVcmwgK1xuICAgICAgKHRoaXMuYXV0aHpTZXJ2aWNlVXJsLmluZGV4T2YoJz8nKSA+PSAwID8gXCImXCIgOiBcIj9cIikgK1xuICAgICAgcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHBhcmFtcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIFRva2VuUmVzcG9uc2VcbiAgICogQHR5cGUge09iamVjdH1cbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IGFjY2Vzc190b2tlblxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gcmVmcmVzaF90b2tlblxuICAgKi9cblxuICAvKipcbiAgICogT0F1dGgyIFJlZnJlc2ggVG9rZW4gRmxvd1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcmVmcmVzaFRva2VuIC0gUmVmcmVzaCB0b2tlblxuICAgKiBAcGFyYW0ge0NhbGxiYWNrLjxUb2tlblJlc3BvbnNlPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxUb2tlblJlc3BvbnNlPn1cbiAgICovXG4gIHJlZnJlc2hUb2tlbiA6IGZ1bmN0aW9uKHJlZnJlc2hUb2tlbiwgY2FsbGJhY2spIHtcbiAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgZ3JhbnRfdHlwZSA6IFwicmVmcmVzaF90b2tlblwiLFxuICAgICAgcmVmcmVzaF90b2tlbiA6IHJlZnJlc2hUb2tlbixcbiAgICAgIGNsaWVudF9pZCA6IHRoaXMuY2xpZW50SWRcbiAgICB9O1xuICAgIGlmICh0aGlzLmNsaWVudFNlY3JldCkge1xuICAgICAgcGFyYW1zLmNsaWVudF9zZWNyZXQgPSB0aGlzLmNsaWVudFNlY3JldDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3RQYXJhbXMocGFyYW1zLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE9BdXRoMiBXZWIgU2VydmVyIEF1dGhlbnRpY2F0aW9uIEZsb3cgKEF1dGhvcml6YXRpb24gQ29kZSlcbiAgICogQWNjZXNzIFRva2VuIFJlcXVlc3RcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNvZGUgLSBBdXRob3JpemF0aW9uIGNvZGVcbiAgICogQHBhcmFtIHtPYmplY3R9IFtwYXJhbXNdIC0gT3B0aW9uYWwgcGFyYW1ldGVycyB0byBzZW5kIGluIHRva2VuIHJldHJpZXZhbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhcmFtcy5jb2RlX3ZlcmlmaWVyXSAtIENvZGUgdmVyaWZpZXIgdmFsdWUgKFJGQyA3NjM2IC0gUHJvb2YgS2V5IG9mIENvZGUgRXhjaGFuZ2UpXG4gICAqIEBwYXJhbSB7Q2FsbGJhY2suPFRva2VuUmVzcG9uc2U+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAgICogQHJldHVybnMge1Byb21pc2UuPFRva2VuUmVzcG9uc2U+fVxuICAgKi9cbiAgcmVxdWVzdFRva2VuIDogZnVuY3Rpb24oY29kZSwgcGFyYW1zLCBjYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IHBhcmFtcztcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgIH1cbiAgICBwYXJhbXMgPSBfLmV4dGVuZCh7XG4gICAgICBncmFudF90eXBlIDogXCJhdXRob3JpemF0aW9uX2NvZGVcIixcbiAgICAgIGNvZGUgOiBjb2RlLFxuICAgICAgY2xpZW50X2lkIDogdGhpcy5jbGllbnRJZCxcbiAgICAgIHJlZGlyZWN0X3VyaSA6IHRoaXMucmVkaXJlY3RVcmlcbiAgICB9LCBwYXJhbXMgfHwge30pO1xuICAgIGlmICh0aGlzLmNsaWVudFNlY3JldCkge1xuICAgICAgcGFyYW1zLmNsaWVudF9zZWNyZXQgPSB0aGlzLmNsaWVudFNlY3JldDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Bvc3RQYXJhbXMocGFyYW1zLCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIE9BdXRoMiBVc2VybmFtZS1QYXNzd29yZCBGbG93IChSZXNvdXJjZSBPd25lciBQYXNzd29yZCBDcmVkZW50aWFscylcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJuYW1lIC0gU2FsZXNmb3JjZSB1c2VybmFtZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGFzc3dvcmQgLSBTYWxlc2ZvcmNlIHBhc3N3b3JkXG4gICAqIEBwYXJhbSB7Q2FsbGJhY2suPFRva2VuUmVzcG9uc2U+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAgICogQHJldHVybnMge1Byb21pc2UuPFRva2VuUmVzcG9uc2U+fVxuICAgKi9cbiAgYXV0aGVudGljYXRlIDogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLl9wb3N0UGFyYW1zKHtcbiAgICAgIGdyYW50X3R5cGUgOiBcInBhc3N3b3JkXCIsXG4gICAgICB1c2VybmFtZSA6IHVzZXJuYW1lLFxuICAgICAgcGFzc3dvcmQgOiBwYXNzd29yZCxcbiAgICAgIGNsaWVudF9pZCA6IHRoaXMuY2xpZW50SWQsXG4gICAgICBjbGllbnRfc2VjcmV0IDogdGhpcy5jbGllbnRTZWNyZXQsXG4gICAgICByZWRpcmVjdF91cmkgOiB0aGlzLnJlZGlyZWN0VXJpXG4gICAgfSwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBPQXV0aDIgUmV2b2tlIFNlc3Npb24gb3IgQVBJIFRva2VuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0b2tlbiAtIEFjY2VzcyBvciBSZWZyZXNoIHRva2VuIHRvIHJldm9rZS4gUGFzc2luZyBpbiB0aGUgQWNjZXNzIHRva2VuIHJldm9rZXMgdGhlIHNlc3Npb24uIFBhc3NpbmcgaW4gdGhlIFJlZnJlc2ggdG9rZW4gcmV2b2tlcyBBUEkgQWNjZXNzLlxuICAgKiBAcGFyYW0ge0NhbGxiYWNrLjx1bmRlZmluZWQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAgICogQHJldHVybnMge1Byb21pc2UuPHVuZGVmaW5lZD59XG4gICAqL1xuICByZXZva2VUb2tlbiA6IGZ1bmN0aW9uKHRva2VuLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLl90cmFuc3BvcnQuaHR0cFJlcXVlc3Qoe1xuICAgICAgbWV0aG9kIDogJ1BPU1QnLFxuICAgICAgdXJsIDogdGhpcy5yZXZva2VTZXJ2aWNlVXJsLFxuICAgICAgYm9keTogcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHsgdG9rZW46IHRva2VuIH0pLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXG4gICAgICB9XG4gICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPj0gNDAwKSB7XG4gICAgICAgIHZhciByZXMgPSBxdWVyeXN0cmluZy5wYXJzZShyZXNwb25zZS5ib2R5KTtcbiAgICAgICAgaWYgKCFyZXMgfHwgIXJlcy5lcnJvcikge1xuICAgICAgICAgIHJlcyA9IHsgZXJyb3I6IFwiRVJST1JfSFRUUF9cIityZXNwb25zZS5zdGF0dXNDb2RlLCBlcnJvcl9kZXNjcmlwdGlvbjogcmVzcG9uc2UuYm9keSB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IocmVzLmVycm9yX2Rlc2NyaXB0aW9uKTtcbiAgICAgICAgZXJyLm5hbWUgPSByZXMuZXJyb3I7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcG9zdFBhcmFtcyA6IGZ1bmN0aW9uKHBhcmFtcywgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gdGhpcy5fdHJhbnNwb3J0Lmh0dHBSZXF1ZXN0KHtcbiAgICAgIG1ldGhvZCA6ICdQT1NUJyxcbiAgICAgIHVybCA6IHRoaXMudG9rZW5TZXJ2aWNlVXJsLFxuICAgICAgYm9keSA6IHF1ZXJ5c3RyaW5nLnN0cmluZ2lmeShwYXJhbXMpLFxuICAgICAgaGVhZGVycyA6IHtcbiAgICAgICAgXCJjb250ZW50LXR5cGVcIiA6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcbiAgICAgIH1cbiAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICB2YXIgcmVzO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KTtcbiAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXNDb2RlID49IDQwMCkge1xuICAgICAgICByZXMgPSByZXMgfHwgeyBlcnJvcjogXCJFUlJPUl9IVFRQX1wiK3Jlc3BvbnNlLnN0YXR1c0NvZGUsIGVycm9yX2Rlc2NyaXB0aW9uOiByZXNwb25zZS5ib2R5IH07XG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IocmVzLmVycm9yX2Rlc2NyaXB0aW9uKTtcbiAgICAgICAgZXJyLm5hbWUgPSByZXMuZXJyb3I7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xuICB9XG5cbn0pO1xuIiwiLyoqXG4gKiBAZmlsZSBQcm9jZXNzIGNsYXNzIHRvIG1hbmFnZS9ydW4gd29ya2Zsb3cgcnVsZSBhbmQgYXBwcm92YWwgcHJvY2Vzc1xuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyksXG4gICAgUHJvbWlzZSA9IHJlcXVpcmUoJy4vcHJvbWlzZScpLFxuICAgIENvbm5lY2l0b24gPSByZXF1aXJlKCcuL2Nvbm5lY3Rpb24nKTtcblxuLyoqXG4gKiBBIGNsYXNzIHdoaWNoIG1hbmFnZXMgcHJvY2VzcyBydWxlcyBhbmQgYXBwcm92YWwgcHJvY2Vzc2VzXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Nvbm5lY3Rpb259IGNvbm4gLSBDb25uZWN0aW9uIG9iamVjdFxuICovXG52YXIgUHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY29ubikge1xuICAvKipcbiAgICogT2JqZWN0IHdoaWNoIG1hbmdhZ2VzIHByb2Nlc3MgcnVsZXNcbiAgICogQG1lbWJlciB7UHJvY2Vzc35Qcm9jZXNzUnVsZX0gUHJvY2VzcyNydWxlXG4gICAqL1xuICB0aGlzLnJ1bGUgPSBuZXcgUHJvY2Vzc1J1bGUoY29ubik7XG4gIC8qKlxuICAgKiBPYmplY3Qgd2hpY2ggbWFuZ2FnZXMgYXBwcm92YWwgcHJvY2Vzc1xuICAgKiBAbWVtYmVyIHtQcm9jZXNzfkFwcHJvdmFsUHJvY2Vzc30gUHJvY2VzcyNhcHByb3ZhbFxuICAgKi9cbiAgdGhpcy5hcHByb3ZhbCA9IG5ldyBBcHByb3ZhbFByb2Nlc3MoY29ubik7XG59O1xuXG4vKipcbiAqIEEgY2xhc3Mgd2hpY2ggbWFuYWdlcyBwcm9jZXNzICh3b3JrZmxvdykgcnVsZXNcbiAqXG4gKiBAY2xhc3MgUHJvY2Vzc35Qcm9jZXNzUnVsZVxuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIC0gQ29ubmVjdGlvbiBvYmplY3RcbiAqL1xudmFyIFByb2Nlc3NSdWxlID0gZnVuY3Rpb24oY29ubikge1xuICB0aGlzLl9jb25uID0gY29ubjtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUHJvY2Vzc35Qcm9jZXNzUnVsZURlZmluaXRpb25cbiAqIEBwcm9wIHtTdHJpbmd9IGlkIC0gSWQgb2YgYXBwcm92YWwgcHJvY2VzcyBkZWZpbml0aW9uXG4gKiBAcHJvcCB7U3RyaW5nfSBuYW1lIC0gTmFtZSBvZiBwcm9jZXNzIHJ1bGUgZGVmaW5pdGlvblxuICogQHByb3Age1N0cmluZ30gb2JqZWN0IC0gU09iamVjdCBuYW1lIHdoaWNoIHByb2Nlc3MgcnVsZSBpcyBkZWZpbmVkXG4gKi9cblxuLyoqXG4gKiBHZXQgYWxsIHByb2Nlc3MgcnVsZSBkZWZpbml0aW9ucyByZWdpc3RlcmVkIHRvIHNvYmplY3RzXG4gKlxuICogQG1ldGhvZCBQcm9jZXNzflByb2Nlc3NSdWxlI2xpc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE1hcC48U3RyaW5nLCBBcnJheS48UHJvY2Vzc35Qcm9jZXNzUnVsZURlZmluaXRpb24+Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1hcC48U3RyaW5nLCBBcnJheS48UHJvY2Vzc35Qcm9jZXNzUnVsZURlZmluaXRpb24+Pj59XG4gKi9cblByb2Nlc3NSdWxlLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdChcIi9wcm9jZXNzL3J1bGVzXCIpLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5ydWxlcztcbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFByb2Nlc3N+UHJvY2Vzc1J1bGVUcmlnZ2VyUmVzdWx0XG4gKiBAcHJvcCB7Qm9vbGVhbn0gc3VjY2VzcyAtIElzIHByb2Nlc3MgcnVsZSB0cmlnZ2VyIHN1Y2NlZWRlZCBvciBub3RcbiAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gZXJyb3JzIC0gQXJyYXkgb2YgZXJyb3JzIHJldHVybmVkIGlmIHRoZSByZXF1ZXN0IGZhaWxlZFxuICovXG5cbi8qKlxuICogVHJpZ2dlciBwcm9jZXNzIHJ1bGUgZm9yIGdpdmVuIGVudGl0aWVzXG4gKlxuICogQG1ldGhvZCBQcm9jZXNzflByb2Nlc3NSdWxlI3RyaWdnZXJcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5LjxTdHJpbmc+fSBjb250ZXh0SWRzIC0gRW50aXR5IElEKHMpIHRvIHRyaWdnZXIgd29ya2Zsb3cgcHJvY2Vzc1xuICogQHBhcmFtIHtDYWxsYmFjay48UHJvY2Vzc35Qcm9jZXNzUnVsZVRyaWdnZXJSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxQcm9jZXNzflByb2Nlc3NSdWxlVHJpZ2dlclJlc3VsdD59XG4gKi9cblByb2Nlc3NSdWxlLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oY29udGV4dElkcywgY2FsbGJhY2spIHtcbiAgY29udGV4dElkcyA9IF8uaXNBcnJheShjb250ZXh0SWRzKSA/IGNvbnRleHRJZHMgOiBbIGNvbnRleHRJZHMgXTtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICB1cmw6IFwiL3Byb2Nlc3MvcnVsZXMvXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgY29udGV4dElkczogY29udGV4dElkc1xuICAgIH0pLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEEgY2xhc3Mgd2hpY2ggbWFuYWdlcyBhcHByb3ZhbCBwcm9jZXNzZXNcbiAqXG4gKiBAY2xhc3MgUHJvY2Vzc35BcHByb3ZhbFByb2Nlc3NcbiAqIEBwYXJhbSB7Q29ubmVjdGlvbn0gY29ubiAtIENvbm5lY3Rpb24gb2JqZWN0XG4gKi9cbnZhciBBcHByb3ZhbFByb2Nlc3MgPSBmdW5jdGlvbihjb25uKSB7XG4gIHRoaXMuX2Nvbm4gPSBjb25uO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBQcm9jZXNzfkFwcHJvdmFsUHJvY2Vzc0RlZmluaXRpb25cbiAqIEBwcm9wIHtTdHJpbmd9IGlkIC0gSWQgb2YgYXBwcm92YWwgcHJvY2VzcyBkZWZpbml0aW9uXG4gKiBAcHJvcCB7U3RyaW5nfSBuYW1lIC0gTmFtZSBvZiBhcHByb3ZhbCBwcm9jZXNzIGRlZmluaXRpb25cbiAqIEBwcm9wIHtTdHJpbmd9IG9iamVjdCAtIFNPYmplY3QgbmFtZSB3aGljaCBhcHByb3ZhbCBwcm9jZXNzIGlzIGRlZmluZWRcbiAqIEBwcm9wIHtOdW1iZXJ9IHNvcnRPcmRlciAtIFByb2Nlc3Npbmcgb3JkZXIgb2YgYXBwcm92YWwgaW4gU09iamVjdFxuICovXG4vKipcbiAqIEdldCBhbGwgYXBwcm92YWwgcHJvY2VzcyBkZWZpbml0aW9ucyByZWdpc3RlcmVkIHRvIHNvYmplY3RzXG4gKlxuICogQG1ldGhvZCBQcm9jZXNzfkFwcHJvdmFsUHJvY2VzcyNsaXN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxNYXAuPFN0cmluZywgQXJyYXkuPEFwcHJvdmFsUHJvY2Vzc0RlZmluaXRpb24+Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE1hcC48U3RyaW5nLCBBcnJheS48QXBwcm92YWxQcm9jZXNzRGVmaW5pdGlvbj4+Pn1cbiAqL1xuQXBwcm92YWxQcm9jZXNzLnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdChcIi9wcm9jZXNzL2FwcHJvdmFsc1wiKS50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgIHJldHVybiByZXMuYXBwcm92YWxzO1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFByb2Nlc3N+QXBwcm92YWxQcm9jZXNzUmVxdWVzdFJlc3VsdFxuICogQHByb3Age0Jvb2xlYW59IHN1Y2Nlc3MgLSBUcnVlIGlmIHByb2Nlc3Npbmcgb3IgYXBwcm92YWwgY29tcGxldGVkIHN1Y2Nlc3NmdWxseVxuICogQHByb3Age0FycmF5LjxPYmplY3Q+fSBlcnJvcnMgLSBUaGUgc2V0IG9mIGVycm9ycyByZXR1cm5lZCBpZiB0aGUgcmVxdWVzdCBmYWlsZWRcbiAqIEBwcm9wIHtBcnJheS48U3RyaW5nPn0gYWN0b3JJZHMgLSBJRHMgb2YgdGhlIHVzZXJzIHdobyBhcmUgY3VycmVudGx5IGFzc2lnbmVkIHRvIHRoaXMgYXBwcm92YWwgc3RlcFxuICogQHByb3Age1N0cmluZ30gZW50aXR5SWQgLSBPYmplY3QgYmVpbmcgcHJvY2Vzc2VkXG4gKiBAcHJvcCB7U3RyaW5nfSBpbnN0YW5jZUlkIC0gSUQgb2YgdGhlIFByb2Nlc3NJbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIG9iamVjdCBzdWJtaXR0ZWQgZm9yIHByb2Nlc3NpbmdcbiAqIEBwcm9wIHtTdHJpbmd9IGluc3RhbmNlU3RhdHVzIC0gU3RhdHVzIG9mIHRoZSBjdXJyZW50IHByb2Nlc3MgaW5zdGFuY2UgKG5vdCBhbiBpbmRpdmlkdWFsIG9iamVjdCBidXQgdGhlIGVudGlyZSBwcm9jZXNzIGluc3RhbmNlKVxuICogQHByb3Age0FycmF5LjxTdHJpbmc+fSBuZXdXb3JrSXRlbUlkcyAtIENhc2UtaW5zZW5zaXRpdmUgSURzIHRoYXQgcG9pbnQgdG8gUHJvY2Vzc0luc3RhbmNlV29ya2l0ZW0gaXRlbXMgKHRoZSBzZXQgb2YgcGVuZGluZyBhcHByb3ZhbCByZXF1ZXN0cylcbiAqL1xuXG4vKipcbiAqIFNlbmQgYnVsayByZXF1ZXN0cyBmb3IgYXBwcm92YWwgcHJvY2Vzc1xuICpcbiAqIEBtZXRob2QgUHJvY2Vzc35BcHByb3ZhbFByb2Nlc3MjcmVxdWVzdFxuICogQHBhcmFtIHtBcnJheS48QXBwcm92YWxQcm9jZXNzUmVxdWVzdD59IHJlcXVlc3RzIC0gQXJyYXkgb2YgYXBwcm92YWwgcHJvY2VzcyByZXF1ZXN0IHRvIHNlbmRcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxBcHByb3ZhbFByb2Nlc3NSZXF1ZXN0UmVzdWx0Pj59IC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEBwYXJhbSB7UHJvbWlzZS48QXJyYXkuPEFwcHJvdmFsUHJvY2Vzc1JlcXVlc3RSZXN1bHQ+Pn1cbiAqL1xuQXBwcm92YWxQcm9jZXNzLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24ocmVxdWVzdHMsIGNhbGxiYWNrKSB7XG4gIHJlcXVlc3RzID0gcmVxdWVzdHMubWFwKGZ1bmN0aW9uKHJlcSkge1xuICAgIHJldHVybiByZXEuX3JlcXVlc3QgPyByZXEuX3JlcXVlc3QgOiByZXE7XG4gIH0pO1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICB1cmw6ICcvcHJvY2Vzcy9hcHByb3ZhbHMnLFxuICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHJlcXVlc3RzOiByZXF1ZXN0cyB9KVxuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhcHByb3ZhbCBwcm9jZXNzIHJlcXVlc3RcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5BcHByb3ZhbFByb2Nlc3MucHJvdG90eXBlLl9jcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24oYWN0aW9uVHlwZSwgY29udGV4dElkLCBjb21tZW50cywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBjb21tZW50cyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgY2FsbGJhY2sgPSBjb21tZW50cztcbiAgICBvcHRpb25zID0gbnVsbDtcbiAgICBjb21tZW50cyA9IG51bGw7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciByZXF1ZXN0ID0ge1xuICAgIGFjdGlvblR5cGU6IGFjdGlvblR5cGUsXG4gICAgY29udGV4dElkOiBjb250ZXh0SWQsXG4gICAgY29tbWVudHM6IGNvbW1lbnRzXG4gIH07XG4gIF8uZXh0ZW5kKHJlcXVlc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gbmV3IEFwcHJvdmFsUHJvY2Vzc1JlcXVlc3QodGhpcywgcmVxdWVzdCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBTdWJtaXQgYXBwcm92YWwgcmVxdWVzdCBmb3IgYW4gaXRlbVxuICpcbiAqIEBtZXRob2QgUHJvY2Vzc35BcHByb3ZhbFByb2Nlc3Mjc3VibWl0XG4gKiBAcGFyYW0ge1N0cmluZ30gY29udGV4dElkIC0gSUQgb2YgdGhlIGl0ZW0gdGhhdCBpcyBiZWluZyBhY3RlZCB1cG9uXG4gKiBAcGFyYW0ge1N0cmluZ30gW2NvbW1lbnRzXSAtIENvbW1lbnQgdG8gYWRkIHRvIHRoZSBoaXN0b3J5IHN0ZXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcmVxdWVzdFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIFJlcXVlc3QgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtBcnJheS48U3RyaW5nPn0gW29wdGlvbnMubmV4dEFwcHJvdmVySWRzXSAtIElmIHRoZSBwcm9jZXNzIHJlcXVpcmVzIHNwZWNpZmljYXRpb24gb2YgdGhlIG5leHQgYXBwcm92YWwsIHRoZSBJRCBvZiB0aGUgdXNlciB0byBiZSBhc3NpZ25lZCB0aGUgbmV4dCByZXF1ZXN0XG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMucHJvY2Vzc0RlZmluaXRpb25OYW1lT3JJZF0gLSBEZXZlbG9wZXIgbmFtZSBvciBJRCBvZiB0aGUgcHJvY2VzcyBkZWZpbml0aW9uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNraXBFbnRyeUNyaXRlcmlhXSAtIERldGVybWluZXMgd2hldGhlciB0byBldmFsdWF0ZSB0aGUgZW50cnkgY3JpdGVyaWEgZm9yIHRoZSBwcm9jZXNzICh0cnVlKSBvciBub3QgKGZhbHNlKSBpZiB0aGUgcHJvY2VzcyBkZWZpbml0aW9uIG5hbWUgb3IgSUQgaXNu4oCZdCBudWxsXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcHByb3ZhbFByb2Nlc3NSZXF1ZXN0UmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QXBwcm92YWxQcm9jZXNzUmVxdWVzdH1cbiAqL1xuQXBwcm92YWxQcm9jZXNzLnByb3RvdHlwZS5zdWJtaXQgPSBmdW5jdGlvbihjb250ZXh0SWQsIGNvbW1lbnRzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICByZXR1cm4gdGhpcy5fY3JlYXRlUmVxdWVzdChcIlN1Ym1pdFwiLCBjb250ZXh0SWQsIGNvbW1lbnRzLCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEFwcHJvdmUgYXBwcm92YWwgcmVxdWVzdCBmb3IgYW4gaXRlbVxuICpcbiAqIEBtZXRob2QgUHJvY2Vzc35BcHByb3ZhbFByb2Nlc3MjYXBwcm92ZVxuICogQHBhcmFtIHtTdHJpbmd9IHdvcmtpdGVtSWQgLSBJRCBvZiB0aGUgaXRlbSB0aGF0IGlzIGJlaW5nIGFjdGVkIHVwb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBbY29tbWVudHNdIC0gQ29tbWVudCB0byBhZGQgdG8gdGhlIGhpc3Rvcnkgc3RlcCBhc3NvY2lhdGVkIHdpdGggdGhpcyByZXF1ZXN0XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gUmVxdWVzdCBwYXJhbWV0ZXJzXG4gKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fSBbb3B0aW9ucy5uZXh0QXBwcm92ZXJJZHNdIC0gSWYgdGhlIHByb2Nlc3MgcmVxdWlyZXMgc3BlY2lmaWNhdGlvbiBvZiB0aGUgbmV4dCBhcHByb3ZhbCwgdGhlIElEIG9mIHRoZSB1c2VyIHRvIGJlIGFzc2lnbmVkIHRoZSBuZXh0IHJlcXVlc3RcbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5wcm9jZXNzRGVmaW5pdGlvbk5hbWVPcklkXSAtIERldmVsb3BlciBuYW1lIG9yIElEIG9mIHRoZSBwcm9jZXNzIGRlZmluaXRpb25cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2tpcEVudHJ5Q3JpdGVyaWFdIC0gRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIGV2YWx1YXRlIHRoZSBlbnRyeSBjcml0ZXJpYSBmb3IgdGhlIHByb2Nlc3MgKHRydWUpIG9yIG5vdCAoZmFsc2UpIGlmIHRoZSBwcm9jZXNzIGRlZmluaXRpb24gbmFtZSBvciBJRCBpc27igJl0IG51bGxcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFwcHJvdmFsUHJvY2Vzc1JlcXVlc3RSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtBcHByb3ZhbFByb2Nlc3NSZXF1ZXN0fVxuICovXG5BcHByb3ZhbFByb2Nlc3MucHJvdG90eXBlLmFwcHJvdmUgPSBmdW5jdGlvbih3b3JraXRlbUlkLCBjb21tZW50cywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2NyZWF0ZVJlcXVlc3QoXCJBcHByb3ZlXCIsIHdvcmtpdGVtSWQsIGNvbW1lbnRzLCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFJlamVjdCBhcHByb3ZhbCByZXF1ZXN0IGZvciBhbiBpdGVtXG4gKlxuICogQG1ldGhvZCBQcm9jZXNzfkFwcHJvdmFsUHJvY2VzcyNyZWplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfSB3b3JraXRlbUlkIC0gSUQgb2YgdGhlIGl0ZW0gdGhhdCBpcyBiZWluZyBhY3RlZCB1cG9uXG4gKiBAcGFyYW0ge1N0cmluZ30gW2NvbW1lbnRzXSAtIENvbW1lbnQgdG8gYWRkIHRvIHRoZSBoaXN0b3J5IHN0ZXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcmVxdWVzdFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIFJlcXVlc3QgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtBcnJheS48U3RyaW5nPn0gW29wdGlvbnMubmV4dEFwcHJvdmVySWRzXSAtIElmIHRoZSBwcm9jZXNzIHJlcXVpcmVzIHNwZWNpZmljYXRpb24gb2YgdGhlIG5leHQgYXBwcm92YWwsIHRoZSBJRCBvZiB0aGUgdXNlciB0byBiZSBhc3NpZ25lZCB0aGUgbmV4dCByZXF1ZXN0XG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMucHJvY2Vzc0RlZmluaXRpb25OYW1lT3JJZF0gLSBEZXZlbG9wZXIgbmFtZSBvciBJRCBvZiB0aGUgcHJvY2VzcyBkZWZpbml0aW9uXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNraXBFbnRyeUNyaXRlcmlhXSAtIERldGVybWluZXMgd2hldGhlciB0byBldmFsdWF0ZSB0aGUgZW50cnkgY3JpdGVyaWEgZm9yIHRoZSBwcm9jZXNzICh0cnVlKSBvciBub3QgKGZhbHNlKSBpZiB0aGUgcHJvY2VzcyBkZWZpbml0aW9uIG5hbWUgb3IgSUQgaXNu4oCZdCBudWxsXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcHByb3ZhbFByb2Nlc3NSZXF1ZXN0UmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QXBwcm92YWxQcm9jZXNzUmVxdWVzdH1cbiAqL1xuQXBwcm92YWxQcm9jZXNzLnByb3RvdHlwZS5yZWplY3QgPSBmdW5jdGlvbih3b3JraXRlbUlkLCBjb21tZW50cywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2NyZWF0ZVJlcXVlc3QoXCJSZWplY3RcIiwgd29ya2l0ZW1JZCwgY29tbWVudHMsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYXBwcm92YWwgcHJvY2VzcyByZXF1ZXN0XG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzIFByb2Nlc3N+QXBwcm92YWxQcm9jZXNzUmVxdWVzdFxuICogQGltcGxlbWVudHMge1Byb21pc2UuPFByb2Nlc3N+QXBwcm92YWxQcm9jZXNzUmVxdWVzdFJlc3VsdD59XG4gKiBAcGFyYW0ge1Byb2Nlc3N+QXBwcm92YWxQcm9jZXNzfSBwcm9jZXNzIC0gQXBwcm92YWxQcm9jZXNzXG4gKiBAcGFyYW0ge09iamVjdH0gcmVxdWVzdCAtIFJlcXVlc3QgcGFyYW1ldGVyc1xuICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3QuYWN0aW9uVHlwZSAtIFJlcHJlc2VudHMgdGhlIGtpbmQgb2YgYWN0aW9uIHRvIHRha2U6IFN1Ym1pdCwgQXBwcm92ZSwgb3IgUmVqZWN0XG4gKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdC5jb250ZXh0SWQgLSBJRCBvZiB0aGUgaXRlbSB0aGF0IGlzIGJlaW5nIGFjdGVkIHVwb25cbiAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0LmNvbW1lbnRzIC0gQ29tbWVudCB0byBhZGQgdG8gdGhlIGhpc3Rvcnkgc3RlcCBhc3NvY2lhdGVkIHdpdGggdGhpcyByZXF1ZXN0XG4gKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fSBbcmVxdWVzdC5uZXh0QXBwcm92ZXJJZHNdIC0gSWYgdGhlIHByb2Nlc3MgcmVxdWlyZXMgc3BlY2lmaWNhdGlvbiBvZiB0aGUgbmV4dCBhcHByb3ZhbCwgdGhlIElEIG9mIHRoZSB1c2VyIHRvIGJlIGFzc2lnbmVkIHRoZSBuZXh0IHJlcXVlc3RcbiAqIEBwYXJhbSB7U3RyaW5nfSBbcmVxdWVzdC5wcm9jZXNzRGVmaW5pdGlvbk5hbWVPcklkXSAtIERldmVsb3BlciBuYW1lIG9yIElEIG9mIHRoZSBwcm9jZXNzIGRlZmluaXRpb25cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JlcXVlc3Quc2tpcEVudHJ5Q3JpdGVyaWFdIC0gRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIGV2YWx1YXRlIHRoZSBlbnRyeSBjcml0ZXJpYSBmb3IgdGhlIHByb2Nlc3MgKHRydWUpIG9yIG5vdCAoZmFsc2UpIGlmIHRoZSBwcm9jZXNzIGRlZmluaXRpb24gbmFtZSBvciBJRCBpc27igJl0IG51bGxcbiAqL1xudmFyIEFwcHJvdmFsUHJvY2Vzc1JlcXVlc3QgPSBmdW5jdGlvbihwcm9jZXNzLCByZXF1ZXN0KSB7XG4gIHRoaXMuX3Byb2Nlc3MgPSBwcm9jZXNzO1xuICB0aGlzLl9yZXF1ZXN0ID0gcmVxdWVzdDtcbn07XG5cbi8qKlxuICogUHJvbWlzZS9BKyBpbnRlcmZhY2VcbiAqIGh0dHA6Ly9wcm9taXNlcy1hcGx1cy5naXRodWIuaW8vcHJvbWlzZXMtc3BlYy9cbiAqXG4gKiBAbWV0aG9kIFByb2Nlc3N+QXBwcm92YWxQcm9jZXNzUmVxdWVzdCN0aGVuXG4gKi9cbkFwcHJvdmFsUHJvY2Vzc1JlcXVlc3QucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbihvblJlc29sdmUsIG9uUmVqZWN0KSB7XG4gIGlmICghdGhpcy5fcHJvbWlzZSkge1xuICAgIHRoaXMuX3Byb21pc2UgPSB0aGlzLl9wcm9jZXNzLnJlcXVlc3QoWyB0aGlzIF0pLnRoZW4oZnVuY3Rpb24ocmV0cykge1xuICAgICAgcmV0dXJuIHJldHNbMF07XG4gICAgfSk7XG4gIH1cbiAgdGhpcy5fcHJvbWlzZS50aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpO1xufTtcblxuLyoqXG4gKiBQcm9taXNlL0ErIGV4dGVuc2lvblxuICogQ2FsbCBcInRoZW5cIiB1c2luZyBnaXZlbiBub2RlLXN0eWxlIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKlxuICogQG1ldGhvZCBQcm9jZXNzfkFwcHJvdmFsUHJvY2Vzc1JlcXVlc3QjdGhlbkNhbGxcbiAqL1xuQXBwcm92YWxQcm9jZXNzUmVxdWVzdC5wcm90b3R5cGUudGhlbkNhbGwgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2sgPyB0aGlzLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgY2FsbGJhY2sobnVsbCwgcmVzKTtcbiAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgY2FsbGJhY2soZXJyKTtcbiAgfSkgOlxuICB0aGlzO1xufTtcbiIsIi8qZ2xvYmFsIHByb2Nlc3MqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoL2NvcmUnKTtcblxuLyoqXG4gKiBAY2FsbGJhY2sgUmVzb2x2ZWRDYWxsYmFja1xuICogQHBhcmFtIHtUfSByZXN1bHQgLSBSZXNvbHZlZCB2YWx1ZVxuICogQHJldHVybnMge1N9XG4gKiBAdGVtcGxhdGUgVCxTXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgUmVqZWN0ZWRDYWxsYmFja1xuICogQHBhcmFtIHtFcnJvcn0gcmVhc29uIC0gUmVqZWN0ZWQgcmVhc29uXG4gKiBAcmV0dXJucyB7U31cbiAqIEB0ZW1wbGF0ZSBTXG4gKi9cblxuLyoqXG4gKiBAY2FsbGJhY2sgUmVzb2x2ZUNhbGxiYWNrXG4gKiBAcGFyYW0ge1R9IHJlc3VsdFxuICogQHRlbXBsYXRlIFRcbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBSZWplY3RlZENhbGxiYWNrXG4gKiBAcGFyYW0ge0Vycm9yfSByZWFzb24gLSBSZWplY3RlZCByZWFzb25cbiAqIEByZXR1cm5zIHtTfVxuICogQHRlbXBsYXRlIFNcbiAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBQcm9taXNlQ2FsbGJhY2tcbiAqIEBwYXJhbSB7UmVzb2x2ZUNhbGxiYWNrLjxUPn0gcmVzb2x2ZVxuICogQHBhcmFtIHtSZWplY3RDYWxsYmFja30gcmVqZWN0XG4gKiBAdGVtcGxhdGUgVFxuICovXG5cbi8qKlxuICogUHJvbWlzZSBjbGFzcyB3aXRoIGEgbGl0dGxlIGV4dGVuc2lvblxuICpcbiAqIEBjbGFzcyBQcm9taXNlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7UHJvbWlzZUNhbGxiYWNrLjxUPn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbnZhciBQcm9taXNlID0gcmVxdWlyZSgncHJvbWlzZS9saWIvZXM2LWV4dGVuc2lvbnMnKTtcblxuLyoqXG4gKiBUaGUgXCJ0aGVuXCIgbWV0aG9kIGZyb20gdGhlIFByb21pc2VzL0ErIHNwZWNpZmljYXRpb25cbiAqXG4gKiBAbWV0aG9kIFByb21pc2UjdGhlblxuICogQHBhcmFtIHtGdWxmaWxsZWRDYWxsYmFjay48VCwgUzE+fSBbb25GdWxmaWxsZWRdXG4gKiBAcGFyYW0ge1JlamVjdGVkQ2FsbGJhY2suPFMyPn0gW29uUmVqZWN0ZWRdXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UzF8UzI+fVxuICovXG5cbi8qKlxuICogQ2FsbCBcInRoZW5cIiB1c2luZyBnaXZlbiBub2RlLXN0eWxlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICogVGhpcyBpcyBiYXNpY2FsbHkgc2FtZSBhcyBcIm5vZGVpZnlcIiBleGNlcHQgdGhhdCBpdCBhbHdheXMgcmV0dXJuIHRoZSBvcmlnaW5hbCBwcm9taXNlXG4gKlxuICogQG1ldGhvZCBQcm9taXNlI3RoZW5DYWxsXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxUPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUudGhlbkNhbGwgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICBpZiAoXy5pc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgIHRoaXMudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlcyk7XG4gICAgICB9KTtcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQSBzdWdhciBtZXRob2QsIGVxdWl2YWxlbnQgdG8gcHJvbWlzZS50aGVuKHVuZGVmaW5lZCwgb25SZWplY3RlZCkuXG4gKlxuICogQG1ldGhvZCBQcm9taXNlI2NhdGNoXG4gKiBAcGFyYW0ge1JlamVjdGVkQ2FsbGJhY2suPFM+fSBvblJlamVjdGVkXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48Uz59XG4gKi9cblxuLyoqXG4gKiBTeW5vbnltIG9mIFByb21pc2UjY2F0Y2hcbiAqXG4gKiBAbWV0aG9kIFByb21pc2UjZmFpbFxuICogQHBhcmFtIHtSZWplY3RlZENhbGxiYWNrLjxTPn0gb25SZWplY3RlZFxuICogQHJldHVybnMge1Byb21pc2UuPFM+fVxuICovXG5Qcm9taXNlLnByb3RvdHlwZS5mYWlsID0gUHJvbWlzZS5wcm90b3R5cGVbJ2NhdGNoJ107XG5cbi8qKlxuICogUmV0dXJucyByZXNvbHZpbmcgcHJvbWlzZSB3aXRoIGdpdmVuIHJlYXNvblxuICpcbiAqIEBtZXRob2QgUHJvbWlzZS5yZXNvbHZlXG4gKiBAcGFyYW0geyp9IHJlc3VsdCAtIFJlc29sdmVkIHZhbHVlXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAqL1xuXG4vKipcbiAqIFJldHVybnMgcmVqZWN0aW5nIHByb21pc2Ugd2l0aCBnaXZlbiByZWFzb25cbiAqXG4gKiBAbWV0aG9kIFByb21pc2UucmVqZWN0XG4gKiBAcGFyYW0ge0Vycm9yfSByZWFzb24gLSBSZWplY3RpbmcgcmVhc29uXG4gKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgY29udGFpbmluZyB0aGUgZnVsZmlsbG1lbnQgdmFsdWUgb2YgZWFjaCBwcm9taXNlLFxuICogb3IgaXMgcmVqZWN0ZWQgd2l0aCB0aGUgc2FtZSByZWplY3Rpb24gcmVhc29uIGFzIHRoZSBmaXJzdCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLlxuICpcbiAqIEBtZXRob2QgUHJvbWlzZS5hbGxcbiAqIEBwYXJhbSB7QXJyYXkuPFByb21pc2UuPCo+fCo+fSBwcm9taXNlc1xuICogQHJldHVybnMge1Byb21pc2UuPEFycmF5LjwqPj59XG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIGEgZGVmZXJyZWQgb2JqZWN0XG4gKlxuICogQG1ldGhvZCBQcm9taXNlLmRlZmVyXG4gKiBAcmV0dXJucyB7RGVmZXJyZWR9XG4gKi9cblByb21pc2UuZGVmZXIgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBEZWZlcnJlZCgpO1xufTtcblxuLyoqXG4gKiBEZWZlcnJlZCBvYmplY3RcbiAqXG4gKiBAcHJvdGVjdGVkXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmFyIERlZmVycmVkID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgc2VsZi5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICBzZWxmLnJlamVjdCA9IHJlamVjdDtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJlc29sdmUgcHJvbWlzZVxuICogQG1ldGhvZCBEZWZlcnJlZCNyZXNvbHZlXG4gKiBAcGFyYW0geyp9IHJlc3VsdCAtIFJlc29sdmluZyByZXN1bHRcbiAqL1xuXG4vKipcbiAqIFJlamVjdCBwcm9taXNlXG4gKiBAbWV0aG9kIERlZmVycmVkI3JlamVjdFxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgLSBSZWplY3RpbmcgcmVhc29uXG4gKi9cblxuLyoqXG4gKlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG4iLCIvKmdsb2JhbCBwcm9jZXNzKi9cbi8qKlxuICogQGZpbGUgTWFuYWdlcyBxdWVyeSBmb3IgcmVjb3JkcyBpbiBTYWxlc2ZvcmNlXG4gKiBAYXV0aG9yIFNoaW5pY2hpIFRvbWl0YSA8c2hpbmljaGkudG9taXRhQGdtYWlsLmNvbT5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyksXG4gICAgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyksXG4gICAgc3RyZWFtID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtJyksXG4gICAgXyAgICAgID0gcmVxdWlyZSgnbG9kYXNoL2NvcmUnKSxcbiAgICBQcm9taXNlID0gcmVxdWlyZSgnLi9wcm9taXNlJyksXG4gICAgU2ZEYXRlID0gcmVxdWlyZShcIi4vZGF0ZVwiKSxcbiAgICBTT1FMQnVpbGRlciA9IHJlcXVpcmUoXCIuL3NvcWwtYnVpbGRlclwiKSxcbiAgICBSZWNvcmRTdHJlYW0gPSByZXF1aXJlKFwiLi9yZWNvcmQtc3RyZWFtXCIpO1xuXG4vKipcbiAqIFF1ZXJ5XG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyB7c3RyZWFtLlJlYWRhYmxlfVxuICogQGltcGxlbWVudHMgUHJvbWlzZS48VD5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0Nvbm5lY3Rpb259IGNvbm4gLSBDb25uZWN0aW9uIG9iamVjdFxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBjb25maWcgLSBRdWVyeSBjb25maWcgb2JqZWN0IG9yIFNPUUwgc3RyaW5nXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gRGVmYXVsdCBxdWVyeSBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmF1dG9GZXRjaF0gLSBVc2luZyBhdXRvIGZldGNoIG1vZGUgb3Igbm90XG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubWF4RmV0Y2hdIC0gTWF4IGZldGNoaW5nIHJlY29yZHMgaW4gYXV0byBmZXRjaCBtb2RlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNjYW5BbGxdIC0gSW5jbHVkaW5nIGRlbGV0ZWQgcmVjb3JkcyBmb3IgcXVlcnkgdGFyZ2V0IG9yIG5vdFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdIC0gQWRkaXRpb25hbCBIVFRQIHJlcXVlc3QgaGVhZGVycyBzZW50IGluIHF1ZXJ5IHJlcXVlc3RcbiAqL1xudmFyIFF1ZXJ5ID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjb25uLCBjb25maWcsIG9wdGlvbnMpIHtcbiAgUXVlcnkuc3VwZXJfLmNhbGwodGhpcywgeyBvYmplY3RNb2RlOiB0cnVlIH0pO1xuXG4gIHRoaXMuX2Nvbm4gPSBjb25uO1xuICBpZiAoXy5pc1N0cmluZyhjb25maWcpKSB7IC8vIGlmIHF1ZXJ5IGNvbmZpZyBpcyBzdHJpbmcsIGl0IGlzIGdpdmVuIGluIFNPUUwuXG4gICAgdGhpcy5fc29xbCA9IGNvbmZpZztcbiAgfSBlbHNlIGlmIChjb25maWcubG9jYXRvciAmJiBjb25maWcubG9jYXRvci5pbmRleE9mKFwiL1wiKSA+PSAwKSB7IC8vIGlmIGxvY2F0b3IgZ2l2ZW4gaW4gdXJsIGZvciBuZXh0IHJlY29yZHNcbiAgICB0aGlzLl9sb2NhdG9yID0gY29uZmlnLmxvY2F0b3Iuc3BsaXQoXCIvXCIpLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICB0aGlzLnNlbGVjdChjb25maWcuZmllbGRzKTtcbiAgICBpZiAoY29uZmlnLmluY2x1ZGVzKSB7XG4gICAgICB0aGlzLmluY2x1ZGUoY29uZmlnLmluY2x1ZGVzKTtcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5zb3J0KSB7XG4gICAgICB0aGlzLnNvcnQoY29uZmlnLnNvcnQpO1xuICAgIH1cbiAgfVxuICB0aGlzLl9vcHRpb25zID0gXy5kZWZhdWx0cyhvcHRpb25zIHx8IHt9LCB7XG4gICAgbWF4RmV0Y2g6IDEwMDAwLFxuICAgIGF1dG9GZXRjaDogZmFsc2UsXG4gICAgc2NhbkFsbDogZmFsc2UsXG4gICAgcmVzcG9uc2VUYXJnZXQ6IFJlc3BvbnNlVGFyZ2V0cy5RdWVyeVJlc3VsdFxuICB9KTtcbiAgdGhpcy5fZXhlY3V0ZWQgPSBmYWxzZTtcbiAgdGhpcy5fZmluaXNoZWQgPSBmYWxzZTtcbiAgdGhpcy5fY2hhaW5pbmcgPSBmYWxzZTtcblxuICB0aGlzLl9kZWZlcnJlZCA9IFByb21pc2UuZGVmZXIoKTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG59O1xuXG5pbmhlcml0cyhRdWVyeSwgc3RyZWFtLlJlYWRhYmxlKTtcblxuLyoqXG4gKiBTZWxlY3QgZmllbGRzIHRvIGluY2x1ZGUgaW4gdGhlIHJldHVybmluZyByZXN1bHRcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheS48U3RyaW5nPnxTdHJpbmd9IGZpZWxkcyAtIEZpZWxkcyB0byBmZXRjaC4gRm9ybWF0IGNhbiBiZSBpbiBKU09OIG9iamVjdCAoTW9uZ29EQi1saWtlKSwgYXJyYXkgb2YgZmllbGQgbmFtZXMsIG9yIGNvbW1hLXNlcGFyYXRlZCBmaWVsZCBuYW1lcy5cbiAqIEByZXR1cm5zIHtRdWVyeS48VD59XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbihmaWVsZHMpIHtcbiAgaWYgKHRoaXMuX3NvcWwpIHtcbiAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCBzZXQgc2VsZWN0IGZpZWxkcyBmb3IgdGhlIHF1ZXJ5IHdoaWNoIGhhcyBhbHJlYWR5IGJ1aWx0IFNPUUwuXCIpO1xuICB9XG4gIGZpZWxkcyA9IGZpZWxkcyB8fCAnKic7XG4gIGlmIChfLmlzU3RyaW5nKGZpZWxkcykpIHtcbiAgICBmaWVsZHMgPSBmaWVsZHMuc3BsaXQoL1xccyosXFxzKi8pO1xuICB9IGVsc2UgaWYgKF8uaXNPYmplY3QoZmllbGRzKSAmJiAhXy5pc0FycmF5KGZpZWxkcykpIHtcbiAgICB2YXIgX2ZpZWxkcyA9ICBbXTtcbiAgICBmb3IgKHZhciBrIGluIGZpZWxkcykge1xuICAgICAgaWYgKGZpZWxkc1trXSkgeyBfZmllbGRzLnB1c2goayk7IH1cbiAgICB9XG4gICAgZmllbGRzID0gX2ZpZWxkcztcbiAgfVxuICB0aGlzLl9jb25maWcuZmllbGRzID0gZmllbGRzO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2V0IHF1ZXJ5IGNvbmRpdGlvbnMgdG8gZmlsdGVyIHRoZSByZXN1bHQgcmVjb3Jkc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gY29uZGl0aW9ucyAtIENvbmRpdGlvbnMgaW4gSlNPTiBvYmplY3QgKE1vbmdvREItbGlrZSksIG9yIHJhdyBTT1FMIFdIRVJFIGNsYXVzZSBzdHJpbmcuXG4gKiBAcmV0dXJucyB7UXVlcnkuPFQ+fVxuICovXG5RdWVyeS5wcm90b3R5cGUud2hlcmUgPSBmdW5jdGlvbihjb25kaXRpb25zKSB7XG4gIGlmICh0aGlzLl9zb3FsKSB7XG4gICAgdGhyb3cgRXJyb3IoXCJDYW5ub3Qgc2V0IHdoZXJlIGNvbmRpdGlvbnMgZm9yIHRoZSBxdWVyeSB3aGljaCBoYXMgYWxyZWFkeSBidWlsdCBTT1FMLlwiKTtcbiAgfVxuICB0aGlzLl9jb25maWcuY29uZGl0aW9ucyA9IGNvbmRpdGlvbnM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBMaW1pdCB0aGUgcmV0dXJuaW5nIHJlc3VsdFxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBsaW1pdCAtIE1heGltdW0gbnVtYmVyIG9mIHJlY29yZHMgdGhlIHF1ZXJ5IHdpbGwgcmV0dXJuLlxuICogQHJldHVybnMge1F1ZXJ5LjxUPn1cbiAqL1xuUXVlcnkucHJvdG90eXBlLmxpbWl0ID0gZnVuY3Rpb24obGltaXQpIHtcbiAgaWYgKHRoaXMuX3NvcWwpIHtcbiAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCBzZXQgbGltaXQgZm9yIHRoZSBxdWVyeSB3aGljaCBoYXMgYWxyZWFkeSBidWlsdCBTT1FMLlwiKTtcbiAgfVxuICB0aGlzLl9jb25maWcubGltaXQgPSBsaW1pdDtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgUXVlcnkjb2Zmc2V0KClcbiAqXG4gKiBAbWV0aG9kIFF1ZXJ5I3NraXBcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgLSBPZmZzZXQgbnVtYmVyIHdoZXJlIGJlZ2lucyByZXR1cm5pbmcgcmVzdWx0cy5cbiAqIEByZXR1cm5zIHtRdWVyeS48VD59XG4gKi9cbi8qKlxuICogU2tpcCByZWNvcmRzXG4gKlxuICogQG1ldGhvZCBRdWVyeSNvZmZzZXRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgLSBPZmZzZXQgbnVtYmVyIHdoZXJlIGJlZ2lucyByZXR1cm5pbmcgcmVzdWx0cy5cbiAqIEByZXR1cm5zIHtRdWVyeS48VD59XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS5za2lwID1cblF1ZXJ5LnByb3RvdHlwZS5vZmZzZXQgPSBmdW5jdGlvbihvZmZzZXQpIHtcbiAgaWYgKHRoaXMuX3NvcWwpIHtcbiAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCBzZXQgc2tpcC9vZmZzZXQgZm9yIHRoZSBxdWVyeSB3aGljaCBoYXMgYWxyZWFkeSBidWlsdCBTT1FMLlwiKTtcbiAgfVxuICB0aGlzLl9jb25maWcub2Zmc2V0ID0gb2Zmc2V0O1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU3lub255bSBvZiBRdWVyeSNzb3J0KClcbiAqXG4gKiBAbWVtdGhvZCBRdWVyeSNvcmRlcmJ5XG4gKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IHNvcnQgLSBTb3J0aW5nIGZpZWxkIG9yIGhhc2ggb2JqZWN0IHdpdGggZmllbGQgbmFtZSBhbmQgc29yZCBkaXJlY3Rpb25cbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gW2Rpcl0gLSBTb3J0aW5nIGRpcmVjdGlvbiAoQVNDfERFU0N8MXwtMSlcbiAqIEByZXR1cm5zIHtRdWVyeS48VD59XG4gKi9cbi8qKlxuICogU2V0IHF1ZXJ5IHNvcnQgd2l0aCBkaXJlY3Rpb25cbiAqXG4gKiBAbWV0aG9kIFF1ZXJ5I3NvcnRcbiAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gc29ydCAtIFNvcnRpbmcgZmllbGQgb3IgaGFzaCBvYmplY3Qgd2l0aCBmaWVsZCBuYW1lIGFuZCBzb3JkIGRpcmVjdGlvblxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSBbZGlyXSAtIFNvcnRpbmcgZGlyZWN0aW9uIChBU0N8REVTQ3wxfC0xKVxuICogQHJldHVybnMge1F1ZXJ5LjxUPn1cbiAqL1xuUXVlcnkucHJvdG90eXBlLnNvcnQgPVxuUXVlcnkucHJvdG90eXBlLm9yZGVyYnkgPSBmdW5jdGlvbihzb3J0LCBkaXIpIHtcbiAgaWYgKHRoaXMuX3NvcWwpIHtcbiAgICB0aHJvdyBFcnJvcihcIkNhbm5vdCBzZXQgc29ydCBmb3IgdGhlIHF1ZXJ5IHdoaWNoIGhhcyBhbHJlYWR5IGJ1aWx0IFNPUUwuXCIpO1xuICB9XG4gIGlmIChfLmlzU3RyaW5nKHNvcnQpICYmIF8uaXNTdHJpbmcoZGlyKSkge1xuICAgIHNvcnQgPSBbIFsgc29ydCwgZGlyIF0gXTtcbiAgfVxuICB0aGlzLl9jb25maWcuc29ydCA9IHNvcnQ7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBJbmNsdWRlIGNoaWxkIHJlbGF0aW9uc2hpcCBxdWVyeVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjaGlsZFJlbE5hbWUgLSBDaGlsZCByZWxhdGlvbnNoaXAgbmFtZSB0byBpbmNsdWRlIGluIHF1ZXJ5IHJlc3VsdFxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBbY29uZGl0aW9uc10gLSBDb25kaXRpb25zIGluIEpTT04gb2JqZWN0IChNb25nb0RCLWxpa2UpLCBvciByYXcgU09RTCBXSEVSRSBjbGF1c2Ugc3RyaW5nLlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXkuPFN0cmluZz58U3RyaW5nfSBbZmllbGRzXSAtIEZpZWxkcyB0byBmZXRjaC4gRm9ybWF0IGNhbiBiZSBpbiBKU09OIG9iamVjdCAoTW9uZ29EQi1saWtlKSwgYXJyYXkgb2YgZmllbGQgbmFtZXMsIG9yIGNvbW1hLXNlcGFyYXRlZCBmaWVsZCBuYW1lcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25hbCBxdWVyeSBjb25maWd1bGF0aW9ucy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5saW1pdF0gLSBNYXhpbXVtIG51bWJlciBvZiByZWNvcmRzIHRoZSBxdWVyeSB3aWxsIHJldHVybi5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5vZmZzZXRdIC0gT2Zmc2V0IG51bWJlciB3aGVyZSBiZWdpbnMgcmV0dXJuaW5nIHJlc3VsdHMuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuc2tpcF0gLSBTeW5vbnltIG9mIG9wdGlvbnMub2Zmc2V0LlxuICogQHJldHVybnMge1F1ZXJ5flN1YlF1ZXJ5fVxuICovXG5RdWVyeS5wcm90b3R5cGUuaW5jbHVkZSA9IGZ1bmN0aW9uKGNoaWxkUmVsTmFtZSwgY29uZGl0aW9ucywgZmllbGRzLCBvcHRpb25zKSB7XG4gIGlmICh0aGlzLl9zb3FsKSB7XG4gICAgdGhyb3cgRXJyb3IoXCJDYW5ub3QgaW5jbHVkZSBjaGlsZCByZWxhdGlvbnNoaXAgaW50byB0aGUgcXVlcnkgd2hpY2ggaGFzIGFscmVhZHkgYnVpbHQgU09RTC5cIik7XG4gIH1cbiAgaWYgKF8uaXNPYmplY3QoY2hpbGRSZWxOYW1lKSkge1xuICAgIHZhciBpbmNsdWRlcyA9IGNoaWxkUmVsTmFtZTtcbiAgICBmb3IgKHZhciBjcm5hbWUgaW4gaW5jbHVkZXMpIHtcbiAgICAgIHZhciBjb25maWcgPSBpbmNsdWRlc1tjcm5hbWVdO1xuICAgICAgdGhpcy5pbmNsdWRlKGNybmFtZSwgY29uZmlnLmNvbmRpdGlvbnMsIGNvbmZpZy5maWVsZHMsIGNvbmZpZyk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICB2YXIgY2hpbGRDb25maWcgPSB7XG4gICAgdGFibGU6IGNoaWxkUmVsTmFtZSxcbiAgICBjb25kaXRpb25zOiBjb25kaXRpb25zLFxuICAgIGZpZWxkczogZmllbGRzLFxuICAgIGxpbWl0OiBvcHRpb25zICYmIG9wdGlvbnMubGltaXQsXG4gICAgb2Zmc2V0OiBvcHRpb25zICYmIChvcHRpb25zLm9mZnNldCB8fCBvcHRpb25zLnNraXApLFxuICAgIHNvcnQ6IG9wdGlvbnMgJiYgb3B0aW9ucy5zb3J0XG4gIH07XG4gIGlmICghXy5pc0FycmF5KHRoaXMuX2NvbmZpZy5pbmNsdWRlcykpIHRoaXMuX2NvbmZpZy5pbmNsdWRlcyA9IFtdO1xuICB0aGlzLl9jb25maWcuaW5jbHVkZXMucHVzaChjaGlsZENvbmZpZyk7XG4gIHZhciBjaGlsZFF1ZXJ5ID0gbmV3IFN1YlF1ZXJ5KHRoaXMuX2Nvbm4sIHRoaXMsIGNoaWxkQ29uZmlnKTtcbiAgdGhpcy5fY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbiB8fCBbXTtcbiAgdGhpcy5fY2hpbGRyZW4ucHVzaChjaGlsZFF1ZXJ5KTtcbiAgcmV0dXJuIGNoaWxkUXVlcnk7XG59O1xuXG5cbi8qKlxuICogU2V0dGluZyBtYXhGZXRjaCBxdWVyeSBvcHRpb25cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbWF4RmV0Y2ggLSBNYXggZmV0Y2hpbmcgcmVjb3JkcyBpbiBhdXRvIGZldGNoIG1vZGVcbiAqIEByZXR1cm5zIHtRdWVyeS48VD59XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS5tYXhGZXRjaCA9IGZ1bmN0aW9uKG1heEZldGNoKSB7XG4gIHRoaXMuX29wdGlvbnMubWF4RmV0Y2ggPSBtYXhGZXRjaDtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFN3aXRjaGluZyBhdXRvIGZldGNoIG1vZGVcbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGF1dG9GZXRjaCAtIFVzaW5nIGF1dG8gZmV0Y2ggbW9kZSBvciBub3RcbiAqIEByZXR1cm5zIHtRdWVyeS48VD59XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS5hdXRvRmV0Y2ggPSBmdW5jdGlvbihhdXRvRmV0Y2gpIHtcbiAgdGhpcy5fb3B0aW9ucy5hdXRvRmV0Y2ggPSBhdXRvRmV0Y2g7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBTZXQgZmxhZyB0byBzY2FuIGFsbCByZWNvcmRzIGluY2x1ZGluZyBkZWxldGVkIGFuZCBhcmNoaXZlZC5cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNjYW5BbGwgLSBGbGFnIHdoZXRoZXIgaW5jbHVkZSBkZWxldGVkL2FyY2hpdmVkIHJlY29yZCBvciBub3QuIERlZmF1bHQgaXMgZmFsc2UuXG4gKiBAcmV0dXJucyB7UXVlcnkuPFQ+fVxuICovXG5RdWVyeS5wcm90b3R5cGUuc2NhbkFsbCA9IGZ1bmN0aW9uKHNjYW5BbGwpIHtcbiAgdGhpcy5fb3B0aW9ucy5zY2FuQWxsID0gc2NhbkFsbDtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBSZXNwb25zZVRhcmdldHMgPSBRdWVyeS5SZXNwb25zZVRhcmdldHMgPSB7fTtcblsgXCJRdWVyeVJlc3VsdFwiLCBcIlJlY29yZHNcIiwgXCJTaW5nbGVSZWNvcmRcIiwgXCJDb3VudFwiIF0uZm9yRWFjaChmdW5jdGlvbihmKSB7XG4gIFJlc3BvbnNlVGFyZ2V0c1tmXSA9IGY7XG59KTtcblxuLyoqXG4gKiBAcHJvdGVjdGVkXG4gKiBAcGFyYW0ge1N0cmluZ30gcmVzcG9uc2VUYXJnZXQgLSBRdWVyeSByZXNwb25zZSB0YXJnZXRcbiAqIEByZXR1cm5zIHtRdWVyeS48Uz59XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS5zZXRSZXNwb25zZVRhcmdldCA9IGZ1bmN0aW9uKHJlc3BvbnNlVGFyZ2V0KSB7XG4gIGlmIChyZXNwb25zZVRhcmdldCBpbiBSZXNwb25zZVRhcmdldHMpIHtcbiAgICB0aGlzLl9vcHRpb25zLnJlc3BvbnNlVGFyZ2V0ID0gcmVzcG9uc2VUYXJnZXQ7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5cbi8qKlxuICogU3lub255bSBvZiBRdWVyeSNleGVjdXRlKClcbiAqXG4gKiBAbWV0aG9kIFF1ZXJ5I3J1blxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIFF1ZXJ5IG9wdGlvbnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuYXV0b0ZldGNoXSAtIFVzaW5nIGF1dG8gZmV0Y2ggbW9kZSBvciBub3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5tYXhGZXRjaF0gLSBNYXggZmV0Y2hpbmcgcmVjb3JkcyBpbiBhdXRvIGZldGNoIG1vZGVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuc2NhbkFsbF0gLSBJbmNsdWRpbmcgZGVsZXRlZCByZWNvcmRzIGZvciBxdWVyeSB0YXJnZXQgb3Igbm90XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaGVhZGVyc10gLSBBZGRpdGlvbmFsIEhUVFAgcmVxdWVzdCBoZWFkZXJzIHNlbnQgaW4gcXVlcnkgcmVxdWVzdFxuICogQHBhcmFtIHtDYWxsYmFjay48VD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1F1ZXJ5LjxUPn1cbiAqL1xuUXVlcnkucHJvdG90eXBlLnJ1biA9XG4vKipcbiAqIFN5bm9ueW0gb2YgUXVlcnkjZXhlY3V0ZSgpXG4gKlxuICogQG1ldGhvZCBRdWVyeSNleGVjXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gUXVlcnkgb3B0aW9uc1xuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hdXRvRmV0Y2hdIC0gVXNpbmcgYXV0byBmZXRjaCBtb2RlIG9yIG5vdFxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heEZldGNoXSAtIE1heCBmZXRjaGluZyByZWNvcmRzIGluIGF1dG8gZmV0Y2ggbW9kZVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zY2FuQWxsXSAtIEluY2x1ZGluZyBkZWxldGVkIHJlY29yZHMgZm9yIHF1ZXJ5IHRhcmdldCBvciBub3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5oZWFkZXJzXSAtIEFkZGl0aW9uYWwgSFRUUCByZXF1ZXN0IGhlYWRlcnMgc2VudCBpbiBxdWVyeSByZXF1ZXN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxUPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UXVlcnkuPFQ+fVxuICovXG5RdWVyeS5wcm90b3R5cGUuZXhlYyA9XG4vKipcbiAqIEV4ZWN1dGUgcXVlcnkgYW5kIGZldGNoIHJlY29yZHMgZnJvbSBzZXJ2ZXIuXG4gKlxuICogQG1ldGhvZCBRdWVyeSNleGVjdXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gUXVlcnkgb3B0aW9uc1xuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hdXRvRmV0Y2hdIC0gVXNpbmcgYXV0byBmZXRjaCBtb2RlIG9yIG5vdFxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm1heEZldGNoXSAtIE1heCBmZXRjaGluZyByZWNvcmRzIGluIGF1dG8gZmV0Y2ggbW9kZVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5zY2FuQWxsXSAtIEluY2x1ZGluZyBkZWxldGVkIHJlY29yZHMgZm9yIHF1ZXJ5IHRhcmdldCBvciBub3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucy5oZWFkZXJzXSAtIEFkZGl0aW9uYWwgSFRUUCByZXF1ZXN0IGhlYWRlcnMgc2VudCBpbiBxdWVyeSByZXF1ZXN0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxUPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UXVlcnkuPFQ+fVxuICovXG5RdWVyeS5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGxvZ2dlciA9IHRoaXMuX2Nvbm4uX2xvZ2dlcjtcbiAgdmFyIGRlZmVycmVkID0gdGhpcy5fZGVmZXJyZWQ7XG5cbiAgaWYgKHRoaXMuX2V4ZWN1dGVkKSB7XG4gICAgZGVmZXJyZWQucmVqZWN0KG5ldyBFcnJvcihcInJlLWV4ZWN1dGluZyBhbHJlYWR5IGV4ZWN1dGVkIHF1ZXJ5XCIpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGlmICh0aGlzLl9maW5pc2hlZCkge1xuICAgIGRlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoXCJleGVjdXRpbmcgYWxyZWFkeSBjbG9zZWQgcXVlcnlcIikpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zID0ge1xuICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyB8fCBzZWxmLl9vcHRpb25zLmhlYWRlcnMsXG4gICAgcmVzcG9uc2VUYXJnZXQ6IG9wdGlvbnMucmVzcG9uc2VUYXJnZXQgfHwgc2VsZi5fb3B0aW9ucy5yZXNwb25zZVRhcmdldCxcbiAgICBhdXRvRmV0Y2g6IG9wdGlvbnMuYXV0b0ZldGNoIHx8IHNlbGYuX29wdGlvbnMuYXV0b0ZldGNoLFxuICAgIG1heEZldGNoOiBvcHRpb25zLm1heEZldGNoIHx8IHNlbGYuX29wdGlvbnMubWF4RmV0Y2gsXG4gICAgc2NhbkFsbDogb3B0aW9ucy5zY2FuQWxsIHx8IHNlbGYuX29wdGlvbnMuc2NhbkFsbFxuICB9O1xuXG4gIC8vIGNhbGxiYWNrIGFuZCBwcm9taXNlIHJlc29sdXRpb247XG4gIHZhciBwcm9taXNlQ2FsbGJhY2sgPSBmdW5jdGlvbihlcnIsIHJlcykge1xuICAgIGlmIChfLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXMgPSBjYWxsYmFjayhlcnIsIHJlcyk7XG4gICAgICAgIGVyciA9IG51bGw7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgZXJyID0gZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVycikge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzKTtcbiAgICB9XG4gIH07XG4gIHRoaXMub25jZSgncmVzcG9uc2UnLCBmdW5jdGlvbihyZXMpIHtcbiAgICBwcm9taXNlQ2FsbGJhY2sobnVsbCwgcmVzKTtcbiAgfSk7XG4gIHRoaXMub25jZSgnZXJyb3InLCBmdW5jdGlvbihlcnIpIHtcbiAgICBwcm9taXNlQ2FsbGJhY2soZXJyKTtcbiAgfSk7XG5cbiAgLy8gY29sbGVjdCBmZXRjaGVkIHJlY29yZHMgaW4gYXJyYXlcbiAgLy8gb25seSB3aGVuIHJlc3BvbnNlIHRhcmdldCBpcyBSZWNvcmRzIGFuZFxuICAvLyBlaXRoZXIgY2FsbGJhY2sgb3IgY2hhaW5pbmcgcHJvbWlzZXMgYXJlIGF2YWlsYWJsZSB0byB0aGlzIHF1ZXJ5LlxuICB0aGlzLm9uY2UoJ2ZldGNoJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKG9wdGlvbnMucmVzcG9uc2VUYXJnZXQgPT09IFJlc3BvbnNlVGFyZ2V0cy5SZWNvcmRzICYmIChzZWxmLl9jaGFpbmluZyB8fCBjYWxsYmFjaykpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnLS0tIGNvbGxlY3RpbmcgYWxsIGZldGNoZWQgcmVjb3JkcyAtLS0nKTtcbiAgICAgIHZhciByZWNvcmRzID0gW107XG4gICAgICB2YXIgb25SZWNvcmQgPSBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgcmVjb3Jkcy5wdXNoKHJlY29yZCk7XG4gICAgICB9O1xuICAgICAgc2VsZi5vbigncmVjb3JkJywgb25SZWNvcmQpO1xuICAgICAgc2VsZi5vbmNlKCdlbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5yZW1vdmVMaXN0ZW5lcigncmVjb3JkJywgb25SZWNvcmQpO1xuICAgICAgICBzZWxmLmVtaXQoJ3Jlc3BvbnNlJywgcmVjb3Jkcywgc2VsZik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGZsYWcgdG8gcHJldmVudCByZS1leGVjdXRpb25cbiAgdGhpcy5fZXhlY3V0ZWQgPSB0cnVlO1xuXG4gIC8vIHN0YXJ0IGFjdHVhbCBxdWVyeVxuICBsb2dnZXIuZGVidWcoJz4+PiBRdWVyeSBzdGFydCA+Pj4nKTtcbiAgdGhpcy5fZXhlY3V0ZShvcHRpb25zKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgIGxvZ2dlci5kZWJ1ZygnKioqIFF1ZXJ5IGZpbmlzaGVkICoqKicpO1xuICB9KS5mYWlsKGZ1bmN0aW9uKGVycikge1xuICAgIGxvZ2dlci5kZWJ1ZygnLS0tIFF1ZXJ5IGVycm9yIC0tLScpO1xuICAgIHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpO1xuICB9KTtcblxuICAvLyByZXR1cm4gUXVlcnkgaW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5RdWVyeS5wcm90b3R5cGUuX2V4ZWN1dGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGxvZ2dlciA9IHRoaXMuX2Nvbm4uX2xvZ2dlcjtcbiAgdmFyIHJlc3BvbnNlVGFyZ2V0ID0gb3B0aW9ucy5yZXNwb25zZVRhcmdldDtcbiAgdmFyIGF1dG9GZXRjaCA9IG9wdGlvbnMuYXV0b0ZldGNoO1xuICB2YXIgbWF4RmV0Y2ggPSBvcHRpb25zLm1heEZldGNoO1xuICB2YXIgc2NhbkFsbCA9IG9wdGlvbnMuc2NhbkFsbDtcblxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFxuICAgIHNlbGYuX2xvY2F0b3IgP1xuICAgIHNlbGYuX2Nvbm4uX2Jhc2VVcmwoKSArIFwiL3F1ZXJ5L1wiICsgc2VsZi5fbG9jYXRvciA6XG4gICAgc2VsZi50b1NPUUwoKS50aGVuKGZ1bmN0aW9uKHNvcWwpIHtcbiAgICAgIHNlbGYudG90YWxGZXRjaGVkID0gMDtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhcIlNPUUwgPSBcIiArIHNvcWwpO1xuICAgICAgcmV0dXJuIHNlbGYuX2Nvbm4uX2Jhc2VVcmwoKSArIFwiL1wiICsgKHNjYW5BbGwgPyBcInF1ZXJ5QWxsXCIgOiBcInF1ZXJ5XCIpICsgXCI/cT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChzb3FsKTtcbiAgICB9KVxuICApLnRoZW4oZnVuY3Rpb24odXJsKSB7XG4gICAgcmV0dXJuIHNlbGYuX2Nvbm4ucmVxdWVzdCh7XG4gICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnNcbiAgICB9KTtcbiAgfSkudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgc2VsZi5lbWl0KFwiZmV0Y2hcIik7XG4gICAgc2VsZi50b3RhbFNpemUgPSBkYXRhLnRvdGFsU2l6ZTtcbiAgICB2YXIgcmVzO1xuICAgIHN3aXRjaChyZXNwb25zZVRhcmdldCkge1xuICAgICAgY2FzZSBSZXNwb25zZVRhcmdldHMuU2luZ2xlUmVjb3JkOlxuICAgICAgICByZXMgPSBkYXRhLnJlY29yZHMgJiYgZGF0YS5yZWNvcmRzLmxlbmd0aCA+IDAgPyBkYXRhLnJlY29yZHNbMF0gOiBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUmVzcG9uc2VUYXJnZXRzLlJlY29yZHM6XG4gICAgICAgIHJlcyA9IGRhdGEucmVjb3JkcztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJlc3BvbnNlVGFyZ2V0cy5Db3VudDpcbiAgICAgICAgcmVzID0gZGF0YS50b3RhbFNpemU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmVzID0gZGF0YTtcbiAgICB9XG4gICAgLy8gb25seSBmaXJlIHJlc3BvbnNlIGV2ZW50IHdoZW4gaXQgc2hvdWxkIGJlIG5vdGlmaWVkIHBlciBmZXRjaFxuICAgIGlmIChyZXNwb25zZVRhcmdldCAhPT0gUmVzcG9uc2VUYXJnZXRzLlJlY29yZHMpIHtcbiAgICAgIHNlbGYuZW1pdChcInJlc3BvbnNlXCIsIHJlcywgc2VsZik7XG4gICAgfVxuXG4gICAgLy8gc3RyZWFtaW5nIHJlY29yZCBpbnN0YW5jZXNcbiAgICB2YXIgbnVtUmVjb3JkcyA9IChkYXRhLnJlY29yZHMgJiYgZGF0YS5yZWNvcmRzLmxlbmd0aCkgfHwgMDtcbiAgICBmb3IgKHZhciBpPTA7IGk8bnVtUmVjb3JkczsgaSsrKSB7XG4gICAgICBpZiAoc2VsZi50b3RhbEZldGNoZWQgPj0gbWF4RmV0Y2gpIHtcbiAgICAgICAgc2VsZi5fZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHZhciByZWNvcmQgPSBkYXRhLnJlY29yZHNbaV07XG4gICAgICBzZWxmLnB1c2gocmVjb3JkKTtcbiAgICAgIHNlbGYuZW1pdCgncmVjb3JkJywgcmVjb3JkLCBzZWxmLnRvdGFsRmV0Y2hlZCsrLCBzZWxmKTtcbiAgICB9XG4gICAgaWYgKGRhdGEubmV4dFJlY29yZHNVcmwpIHtcbiAgICAgIHNlbGYuX2xvY2F0b3IgPSBkYXRhLm5leHRSZWNvcmRzVXJsLnNwbGl0KCcvJykucG9wKCk7XG4gICAgfVxuICAgIHNlbGYuX2ZpbmlzaGVkID0gc2VsZi5fZmluaXNoZWQgfHwgZGF0YS5kb25lIHx8ICFhdXRvRmV0Y2g7XG4gICAgaWYgKHNlbGYuX2ZpbmlzaGVkKSB7XG4gICAgICBzZWxmLnB1c2gobnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYuX2V4ZWN1dGUob3B0aW9ucyk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBSZWFkYWJsZSBzdHJlYW0gaW1wbGVtZW50YXRpb25cbiAqXG4gKiBAb3ZlcnJpZGVcbiAqIEBwcml2YXRlXG4gKi9cblF1ZXJ5LnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgaWYgKCF0aGlzLl9maW5pc2hlZCAmJiAhdGhpcy5fZXhlY3V0ZWQpIHtcbiAgICB0aGlzLmV4ZWN1dGUoeyBhdXRvRmV0Y2g6IHRydWUgfSk7XG4gIH1cbn07XG5cbi8qKiBAb3ZlcnJpZGUgKiovXG5RdWVyeS5wcm90b3R5cGUub24gPSBmdW5jdGlvbihlLCBmbikge1xuICBpZiAoZSA9PT0gJ3JlY29yZCcpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5vbigncmVhZGFibGUnLCBmdW5jdGlvbigpIHtcbiAgICAgIHdoaWxlKHNlbGYucmVhZCgpICE9PSBudWxsKSB7fSAvLyBkaXNjYXJkIGJ1ZmZlcmVkIHJlY29yZHNcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gUXVlcnkuc3VwZXJfLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGUsIGZuKTtcbn07XG5cbi8qKiBAb3ZlcnJpZGUgKiovXG5RdWVyeS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBRdWVyeS5wcm90b3R5cGUub247XG5cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5RdWVyeS5wcm90b3R5cGUuX2V4cGFuZEZpZWxkcyA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5fc29xbCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJDYW5ub3QgZXhwYW5kIGZpZWxkcyBmb3IgdGhlIHF1ZXJ5IHdoaWNoIGhhcyBhbHJlYWR5IGJ1aWx0IFNPUUwuXCIpKTtcbiAgfVxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBsb2dnZXIgPSBzZWxmLl9jb25uLl9sb2dnZXI7XG4gIHZhciBjb25uID0gdGhpcy5fY29ubjtcbiAgdmFyIHRhYmxlID0gdGhpcy5fY29uZmlnLnRhYmxlO1xuICB2YXIgZmllbGRzID0gdGhpcy5fY29uZmlnLmZpZWxkcyB8fCBbXTtcblxuICBsb2dnZXIuZGVidWcoJ19leHBhbmRGaWVsZHM6IHRhYmxlID0gJyArIHRhYmxlICsgJywgZmllbGRzID0gJyArIGZpZWxkcy5qb2luKCcsICcpKTtcblxuICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgIFByb21pc2UucmVzb2x2ZShzZWxmLl9wYXJlbnQgPyBmaW5kUmVsYXRpb25UYWJsZSh0YWJsZSkgOiB0YWJsZSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHRhYmxlKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgICAgICBfLm1hcChmaWVsZHMsIGZ1bmN0aW9uKGZpZWxkKSB7IHJldHVybiBleHBhbmRBc3Rlcmlza0ZpZWxkKHRhYmxlLCBmaWVsZCk7IH0pXG4gICAgICAgICkudGhlbihmdW5jdGlvbihleHBhbmRlZEZpZWxkcykge1xuICAgICAgICAgIHNlbGYuX2NvbmZpZy5maWVsZHMgPSBfLmZsYXR0ZW4oZXhwYW5kZWRGaWVsZHMpO1xuICAgICAgICB9KTtcbiAgICAgIH0pLFxuICAgIFByb21pc2UuYWxsKFxuICAgICAgXy5tYXAoc2VsZi5fY2hpbGRyZW4gfHwgW10sIGZ1bmN0aW9uKGNoaWxkUXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIGNoaWxkUXVlcnkuX2V4cGFuZEZpZWxkcygpO1xuICAgICAgfSlcbiAgICApXG4gIF0pO1xuXG4gIGZ1bmN0aW9uIGZpbmRSZWxhdGlvblRhYmxlKHJuYW1lKSB7XG4gICAgdmFyIHB0YWJsZSA9IHNlbGYuX3BhcmVudC5fY29uZmlnLnRhYmxlO1xuICAgIGxvZ2dlci5kZWJ1ZygnZmluZGluZyB0YWJsZSBmb3IgcmVsYXRpb24gXCInICsgcm5hbWUgKyAnXCIgaW4gXCInICsgcHRhYmxlICsgJ1wiLi4uJyk7XG4gICAgcmV0dXJuIGRlc2NyaWJlQ2FjaGUocHRhYmxlKS50aGVuKGZ1bmN0aW9uKHNvYmplY3QpIHtcbiAgICAgIHZhciB1cHBlclJuYW1lID0gcm5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgIHZhciBjaGlsZFJlbGF0aW9uID0gXy5maW5kKHNvYmplY3QuY2hpbGRSZWxhdGlvbnNoaXBzLCBmdW5jdGlvbihjcikge1xuICAgICAgICByZXR1cm4gKGNyLnJlbGF0aW9uc2hpcE5hbWUgfHwgJycpLnRvVXBwZXJDYXNlKCkgPT09IHVwcGVyUm5hbWU7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjaGlsZFJlbGF0aW9uID8gY2hpbGRSZWxhdGlvbi5jaGlsZFNPYmplY3QgOlxuICAgICAgICBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoXCJObyBjaGlsZCByZWxhdGlvbnNoaXAgZm91bmQ6IFwiICsgcm5hbWUgKSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXNjcmliZUNhY2hlKHRhYmxlKSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdkZXNjcmliZSBjYWNoZTogJyt0YWJsZSk7XG4gICAgdmFyIGRlZmVycmVkID0gUHJvbWlzZS5kZWZlcigpO1xuICAgIGNvbm4uZGVzY3JpYmUkKHRhYmxlLCBmdW5jdGlvbihlcnIsIHNvYmplY3QpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnLi4uIGRvbmUuJyk7XG4gICAgICBpZiAoZXJyKSB7IGRlZmVycmVkLnJlamVjdChlcnIpOyB9XG4gICAgICBlbHNlIHsgZGVmZXJyZWQucmVzb2x2ZShzb2JqZWN0KTsgfVxuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZXhwYW5kQXN0ZXJpc2tGaWVsZCh0YWJsZSwgZmllbGQpIHtcbiAgICBsb2dnZXIuZGVidWcoJ2V4cGFuZGluZyBmaWVsZCBcIicrIGZpZWxkICsgJ1wiIGluIFwiJyArIHRhYmxlICsgJ1wiLi4uJyk7XG4gICAgdmFyIGZwYXRoID0gZmllbGQuc3BsaXQoJy4nKTtcbiAgICByZXR1cm4gZnBhdGhbZnBhdGgubGVuZ3RoIC0gMV0gPT09ICcqJyA/XG4gICAgICBkZXNjcmliZUNhY2hlKHRhYmxlKS50aGVuKGZ1bmN0aW9uKHNvYmplY3QpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCd0YWJsZSAnK3RhYmxlKydoYXMgYmVlbiBkZXNjcmliZWQnKTtcbiAgICAgICAgaWYgKGZwYXRoLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB2YXIgcm5hbWUgPSBmcGF0aC5zaGlmdCgpO1xuICAgICAgICAgIHZhciByZmllbGQgPSBfLmZpbmQoc29iamVjdC5maWVsZHMsIGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgIHJldHVybiBmLnJlbGF0aW9uc2hpcE5hbWUgJiZcbiAgICAgICAgICAgICAgICAgICBmLnJlbGF0aW9uc2hpcE5hbWUudG9VcHBlckNhc2UoKSA9PT0gcm5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAocmZpZWxkKSB7XG4gICAgICAgICAgICB2YXIgcnRhYmxlID0gcmZpZWxkLnJlZmVyZW5jZVRvLmxlbmd0aCA9PT0gMSA/IHJmaWVsZC5yZWZlcmVuY2VUb1swXSA6ICdOYW1lJztcbiAgICAgICAgICAgIHJldHVybiBleHBhbmRBc3Rlcmlza0ZpZWxkKHJ0YWJsZSwgZnBhdGguam9pbignLicpKS50aGVuKGZ1bmN0aW9uKGZwYXRocykge1xuICAgICAgICAgICAgICByZXR1cm4gXy5tYXAoZnBhdGhzLCBmdW5jdGlvbihmcGF0aCkgeyByZXR1cm4gcm5hbWUgKyAnLicgKyBmcGF0aDsgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gXy5tYXAoc29iamVjdC5maWVsZHMsIGZ1bmN0aW9uKGYpIHsgcmV0dXJuIGYubmFtZTsgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pIDpcbiAgICAgIFByb21pc2UucmVzb2x2ZShbIGZpZWxkIF0pO1xuICB9XG59O1xuXG4vKipcbiAqIEV4cGxhaW4gcGxhbiBmb3IgZXhlY3V0aW5nIHF1ZXJ5XG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48RXhwbGFpbkluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxFeHBsYWluSW5mbz59XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS5leHBsYWluID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgbG9nZ2VyID0gdGhpcy5fY29ubi5fbG9nZ2VyO1xuICByZXR1cm4gc2VsZi50b1NPUUwoKS50aGVuKGZ1bmN0aW9uKHNvcWwpIHtcbiAgICBsb2dnZXIuZGVidWcoXCJTT1FMID0gXCIgKyBzb3FsKTtcbiAgICB2YXIgdXJsID0gXCIvcXVlcnkvP2V4cGxhaW49XCIgKyBlbmNvZGVVUklDb21wb25lbnQoc29xbCk7XG4gICAgcmV0dXJuIHNlbGYuX2Nvbm4ucmVxdWVzdCh1cmwpO1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFJldHVybiBTT1FMIGV4cHJlc3Npb24gZm9yIHRoZSBxdWVyeVxuICpcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFN0cmluZz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFN0cmluZz59XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS50b1NPUUwgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoc2VsZi5fc29xbCB8fFxuICAgIHNlbGYuX2V4cGFuZEZpZWxkcygpLnRoZW4oZnVuY3Rpb24oKSB7IHJldHVybiBTT1FMQnVpbGRlci5jcmVhdGVTT1FMKHNlbGYuX2NvbmZpZyk7IH0pXG4gICkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgZGF0YSBzdHJlYW0gb2YgcXVlcmllZCByZWNvcmRzLlxuICogQXV0b21hdGljYWxseSByZXN1bWUgcXVlcnkgaWYgcGF1c2VkLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdHlwZV0gLSBUeXBlIG9mIG91dGdvaW5nIGRhdGEgZm9ybWF0LiBDdXJyZW50bHkgJ2NzdicgaXMgZGVmYXVsdCB2YWx1ZSBhbmQgdGhlIG9ubHkgc3VwcG9ydGVkLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgcGFzc2VkIHRvIGNvbnZlcnRlclxuICogQHJldHVybnMge3N0cmVhbS5SZWFkYWJsZX1cbiAqL1xuUXVlcnkucHJvdG90eXBlLnN0cmVhbSA9IFJlY29yZFN0cmVhbS5TZXJpYWxpemFibGUucHJvdG90eXBlLnN0cmVhbTtcblxuLyoqXG4gKiBHZXQgcmVjb3JkIHN0cmVhbSBvZiBxdWVyaWVkIHJlY29yZHMgYXBwbHlpbmcgdGhlIGdpdmVuIG1hcHBpbmcgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1JlY29yZE1hcEZ1bmN0aW9ufSBmbiAtIFJlY29yZCBtYXBwaW5nIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UmVjb3JkU3RyZWFtLlNlcmlhbGl6YWJsZX1cbiAqL1xuUXVlcnkucHJvdG90eXBlLm1hcCA9IFJlY29yZFN0cmVhbS5wcm90b3R5cGUubWFwO1xuXG4vKipcbiAqIEdldCByZWNvcmQgc3RyZWFtIG9mIHF1ZXJpZWQgcmVjb3JkcywgYXBwbHlpbmcgdGhlIGdpdmVuIGZpbHRlciBmdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7UmVjb3JkRmlsdGVyRnVuY3Rpb259IGZuIC0gUmVjb3JkIGZpbHRlcmluZyBmdW5jdGlvblxuICogQHJldHVybnMge1JlY29yZFN0cmVhbS5TZXJpYWxpemFibGV9XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS5maWx0ZXIgPSBSZWNvcmRTdHJlYW0ucHJvdG90eXBlLm1hcDtcblxuLypcbiAqIERlZmF1bHQgdGhyZXNob2xkIG51bSBvZiBidWxrIEFQSSBzd2l0Y2hpbmdcbiAqL1xudmFyIERFRkFVTFRfQlVMS19USFJFU0hPTEQgPSAyMDA7XG5cbi8qKlxuICogU3lub255bSBvZiBRdWVyeSNkZXN0cm95KClcbiAqXG4gKiBAbWV0aG9kIFF1ZXJ5I2RlbGV0ZVxuICogQHBhcmFtIHtTdHJpbmd9IFt0eXBlXSAtIFNPYmplY3QgdHlwZS4gUmVxdWlyZWQgZm9yIFNPUUwgYmFzZWQgcXVlcnkgb2JqZWN0LlxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cbi8qKlxuICogU3lub255bSBvZiBRdWVyeSNkZXN0cm95KClcbiAqXG4gKiBAbWV0aG9kIFF1ZXJ5I2RlbFxuICogQHBhcmFtIHtTdHJpbmd9IFt0eXBlXSAtIFNPYmplY3QgdHlwZS4gUmVxdWlyZWQgZm9yIFNPUUwgYmFzZWQgcXVlcnkgb2JqZWN0LlxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cbi8qKlxuICogRGVsZXRlIHF1ZXJpZWQgcmVjb3Jkc1xuICpcbiAqIEBtZXRob2QgUXVlcnkjZGVzdHJveVxuICogQHBhcmFtIHtTdHJpbmd9IFt0eXBlXSAtIFNPYmplY3QgdHlwZS4gUmVxdWlyZWQgZm9yIFNPUUwgYmFzZWQgcXVlcnkgb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE1hc3MgZGVsZXRlIG9wZXJhdGlvbiBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbG93QnVsa10gLSBBbGxvdyBzd2l0Y2hpbmcgdG8gQnVsayBBUEkgd2hlbiB0aGUgbnVtIG9mIHF1ZXJpZWQgcmVjb3JkcyByZWFjaGVkIHRvIGNlcnRhaW4gdGhyZXNob2xkLiBEZWZhdWx0IGlzIHRydWUuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuYnVsa1RocmVzaG9sZF0gLSBUaHJlc2hvbGQgbnVtIHRvIHN3aXRjaCB0byB1c2UgQnVsayBBUEkgaW5zdGVhZCBvZiB1c3VhbCBgU09iamVjdCNkZWxldGUoKWAgY2FsbC4gRGVmYXVsdCB2YWx1ZSBpcyAyMDAgYWZ0ZXIgQVBJIHZlciA0Mi4wLCBhbmQgMC41ICogYG1heFJlcXVlc3RgIGJlZm9yZSBBUEkgdmVyIDQyLjAuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuUXVlcnkucHJvdG90eXBlW1wiZGVsZXRlXCJdID1cblF1ZXJ5LnByb3RvdHlwZS5kZWwgPVxuUXVlcnkucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbih0eXBlLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIHR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IHR5cGU7XG4gICAgb3B0aW9ucyA9IHt9O1xuICAgIHR5cGUgPSBudWxsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JyAmJiB0eXBlICE9PSBudWxsKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB0eXBlO1xuICAgIHR5cGUgPSBudWxsO1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB0eXBlID0gdHlwZSB8fCAodGhpcy5fY29uZmlnICYmIHRoaXMuX2NvbmZpZy50YWJsZSk7XG4gIGlmICghdHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlNPUUwgYmFzZWQgcXVlcnkgbmVlZHMgU09iamVjdCB0eXBlIGluZm9ybWF0aW9uIHRvIGJ1bGsgZGVsZXRlLlwiKTtcbiAgfVxuICAvLyBTZXQgdGhlIHRocmVzaG9sZCBudW1iZXIgdG8gcGFzcyB0byBidWxrIEFQSVxuICB2YXIgdGhyZXNob2xkTnVtID1cbiAgICBvcHRpb25zLmFsbG93QnVsayA9PT0gZmFsc2UgP1xuICAgICAgLTEgOlxuICAgIHR5cGVvZiBvcHRpb25zLmJ1bGtUaHJlc2hvbGQgPT09ICdudW1iZXInID9cbiAgICAgIG9wdGlvbnMuYnVsa1RocmVzaG9sZCA6XG4gICAgICAvLyBkZXRlcm1pbmUgdGhyZXNob2xkIGlmIHRoZSBjb25uZWN0aW9uIHZlcnNpb24gc3VwcG9ydHMgU09iamVjdCBjb2xsZWN0aW9uIEFQSSBvciBub3RcbiAgICAgICh0aGlzLl9jb25uLl9lbnN1cmVWZXJzaW9uKDQyKSA/IERFRkFVTFRfQlVMS19USFJFU0hPTEQgOiB0aGlzLl9jb25uLm1heFJlcXVlc3QgLyAyKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlY29yZHMgPSBbXTtcbiAgICB2YXIgYmF0Y2ggPSBudWxsO1xuICAgIHZhciBoYW5kbGVSZWNvcmQgPSBmdW5jdGlvbihyZWMpIHtcbiAgICAgIGlmICghcmVjLklkKSB7XG4gICAgICAgIHNlbGYuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ1F1ZXJpZWQgcmVjb3JkIGRvZXMgbm90IGluY2x1ZGUgU2FsZXNmb3JjZSByZWNvcmQgSUQuJykpXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciByZWNvcmQgPSB7IElkOiByZWMuSWQgfTtcbiAgICAgIGlmIChiYXRjaCkge1xuICAgICAgICBiYXRjaC53cml0ZShyZWNvcmQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVjb3Jkcy5wdXNoKHJlY29yZCk7XG4gICAgICAgIGlmICh0aHJlc2hvbGROdW0gPCAwIHx8IHJlY29yZHMubGVuZ3RoID4gdGhyZXNob2xkTnVtKSB7XG4gICAgICAgICAgLy8gVXNlIGJ1bGsgZGVsZXRlIGluc3RlYWQgb2YgU09iamVjdCBSRVNUIEFQSVxuICAgICAgICAgIGJhdGNoID1cbiAgICAgICAgICAgIHNlbGYuX2Nvbm4uc29iamVjdCh0eXBlKS5kZWxldGVCdWxrKClcbiAgICAgICAgICAgICAgLm9uKCdyZXNwb25zZScsIHJlc29sdmUpXG4gICAgICAgICAgICAgIC5vbignZXJyb3InLCByZWplY3QpO1xuICAgICAgICAgIHJlY29yZHMuZm9yRWFjaChmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgICAgIGJhdGNoLndyaXRlKHJlY29yZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVjb3JkcyA9IFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgaGFuZGxlRW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoYmF0Y2gpIHtcbiAgICAgICAgYmF0Y2guZW5kKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgaWRzID0gcmVjb3Jkcy5tYXAoZnVuY3Rpb24gKHJlY29yZCkgeyByZXR1cm4gcmVjb3JkLklkOyB9KTtcbiAgICAgICAgc2VsZi5fY29ubi5zb2JqZWN0KHR5cGUpLmRlc3Ryb3koaWRzLCB7IGFsbG93UmVjdXJzaXZlOiB0cnVlIH0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHNlbGYub24oJ2RhdGEnLCBoYW5kbGVSZWNvcmQpXG4gICAgICAub24oJ2VuZCcsIGhhbmRsZUVuZClcbiAgICAgIC5vbignZXJyb3InLCByZWplY3QpO1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSBxdWVyaWVkIHJlY29yZHMsIHVzaW5nIGdpdmVuIG1hcHBpbmcgZnVuY3Rpb24vb2JqZWN0XG4gKlxuICogQHBhcmFtIHtSZWNvcmR8UmVjb3JkTWFwRnVuY3Rpb259IG1hcHBpbmcgLSBNYXBwaW5nIHJlY29yZCBvciByZWNvcmQgbWFwcGluZyBmdW5jdGlvblxuICogQHBhcmFtIHtTdHJpbmd9IFt0eXBlXSAtIFNPYmplY3QgdHlwZS4gUmVxdWlyZWQgZm9yIFNPUUwgYmFzZWQgcXVlcnkgb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE1hc3MgdXBkYXRlIG9wZXJhdGlvbiBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmFsbG93QnVsa10gLSBBbGxvdyBzd2l0Y2hpbmcgdG8gQnVsayBBUEkgd2hlbiB0aGUgbnVtIG9mIHF1ZXJpZWQgcmVjb3JkcyByZWFjaGVkIHRvIGNlcnRhaW4gdGhyZXNob2xkLiBEZWZhdWx0IGlzIHRydWUuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMuYnVsa1RocmVzaG9sZF0gLSBUaHJlc2hvbGQgbnVtIHRvIHN3aXRjaCB0byB1c2UgQnVsayBBUEkgaW5zdGVhZCBvZiB1c3VhbCBgU09iamVjdCNkZWxldGUoKWAgY2FsbC4gRGVmYXVsdCB2YWx1ZSBpcyAyMDAgYWZ0ZXIgQVBJIHZlciA0Mi4wLCBhbmQgMC41ICogYG1heFJlcXVlc3RgIGJlZm9yZSBBUEkgdmVyIDQyLjAuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuUXVlcnkucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKG1hcHBpbmcsIHR5cGUsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgdHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gdHlwZTtcbiAgICBvcHRpb25zID0ge307XG4gICAgdHlwZSA9IG51bGw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnICYmIHR5cGUgIT09IG51bGwpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHR5cGU7XG4gICAgdHlwZSA9IG51bGw7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHR5cGUgPSB0eXBlIHx8ICh0aGlzLl9jb25maWcgJiYgdGhpcy5fY29uZmlnLnRhYmxlKTtcbiAgaWYgKCF0eXBlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU09RTCBiYXNlZCBxdWVyeSBuZWVkcyBTT2JqZWN0IHR5cGUgaW5mb3JtYXRpb24gdG8gYnVsayB1cGRhdGUuXCIpO1xuICB9XG4gIHZhciB1cGRhdGVTdHJlYW0gPSBfLmlzRnVuY3Rpb24obWFwcGluZykgPyBSZWNvcmRTdHJlYW0ubWFwKG1hcHBpbmcpIDogUmVjb3JkU3RyZWFtLnJlY29yZE1hcFN0cmVhbShtYXBwaW5nKTtcbiAgLy8gU2V0IHRoZSB0aHJlc2hvbGQgbnVtYmVyIHRvIHBhc3MgdG8gYnVsayBBUElcbiAgdmFyIHRocmVzaG9sZE51bSA9XG4gICAgb3B0aW9ucy5hbGxvd0J1bGsgPT09IGZhbHNlID9cbiAgICAgIC0xIDpcbiAgICB0eXBlb2Ygb3B0aW9ucy5idWxrVGhyZXNob2xkID09PSAnbnVtYmVyJyA/XG4gICAgICBvcHRpb25zLmJ1bGtUaHJlc2hvbGQgOlxuICAgICAgLy8gZGV0ZXJtaW5lIHRocmVzaG9sZCBpZiB0aGUgY29ubmVjdGlvbiB2ZXJzaW9uIHN1cHBvcnRzIFNPYmplY3QgY29sbGVjdGlvbiBBUEkgb3Igbm90XG4gICAgICAodGhpcy5fY29ubi5fZW5zdXJlVmVyc2lvbig0MikgPyBERUZBVUxUX0JVTEtfVEhSRVNIT0xEIDogdGhpcy5fY29ubi5tYXhSZXF1ZXN0IC8gMik7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZWNvcmRzID0gW107XG4gICAgdmFyIGJhdGNoID0gbnVsbDtcbiAgICB2YXIgaGFuZGxlUmVjb3JkID0gZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICBpZiAoYmF0Y2gpIHtcbiAgICAgICAgYmF0Y2gud3JpdGUocmVjb3JkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlY29yZHMucHVzaChyZWNvcmQpO1xuICAgICAgICBpZiAodGhyZXNob2xkTnVtIDwgMCB8fCByZWNvcmRzLmxlbmd0aCA+IHRocmVzaG9sZE51bSkge1xuICAgICAgICAgIC8vIFVzZSBidWxrIHVwZGF0ZSBpbnN0ZWFkIG9mIFNPYmplY3QgUkVTVCBBUElcbiAgICAgICAgICBiYXRjaCA9XG4gICAgICAgICAgICBzZWxmLl9jb25uLnNvYmplY3QodHlwZSkudXBkYXRlQnVsaygpXG4gICAgICAgICAgICAgIC5vbigncmVzcG9uc2UnLCByZXNvbHZlKVxuICAgICAgICAgICAgICAub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgICAgICByZWNvcmRzLmZvckVhY2goZnVuY3Rpb24ocmVjb3JkKSB7XG4gICAgICAgICAgICBiYXRjaC53cml0ZShyZWNvcmQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlY29yZHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGhhbmRsZUVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGJhdGNoKSB7XG4gICAgICAgIGJhdGNoLmVuZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5fY29ubi5zb2JqZWN0KHR5cGUpLnVwZGF0ZShyZWNvcmRzLCB7IGFsbG93UmVjdXJzaXZlOiB0cnVlIH0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHNlbGYub24oJ2Vycm9yJywgcmVqZWN0KVxuICAgICAgLnBpcGUodXBkYXRlU3RyZWFtKVxuICAgICAgLm9uKCdkYXRhJywgaGFuZGxlUmVjb3JkKVxuICAgICAgLm9uKCdlbmQnLCBoYW5kbGVFbmQpXG4gICAgICAub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgfSkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBQcm9taXNlL0ErIGludGVyZmFjZVxuICogaHR0cDovL3Byb21pc2VzLWFwbHVzLmdpdGh1Yi5pby9wcm9taXNlcy1zcGVjL1xuICpcbiAqIERlbGVnYXRlIHRvIGRlZmVycmVkIHByb21pc2UsIHJldHVybiBwcm9taXNlIGluc3RhbmNlIGZvciBxdWVyeSByZXN1bHRcbiAqXG4gKiBAcGFyYW0ge0Z1bGZpbGxlZENhbGxiYWNrLjxULCBTMT59IFtvbkZ1bGZpbGxlZF1cbiAqIEBwYXJhbSB7UmVqZWN0ZWRDYWxsYmFjay48UzI+fSBbb25SZWplY3RlZF1cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxTMXxTMj59XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25SZXNvbHZlZCwgb25SZWplY3QpIHtcbiAgdGhpcy5fY2hhaW5pbmcgPSB0cnVlO1xuICBpZiAoIXRoaXMuX2ZpbmlzaGVkICYmICF0aGlzLl9leGVjdXRlZCkgeyB0aGlzLmV4ZWN1dGUoKTsgfVxuICByZXR1cm4gdGhpcy5fZGVmZXJyZWQucHJvbWlzZS50aGVuLmFwcGx5KHRoaXMuX2RlZmVycmVkLnByb21pc2UsIGFyZ3VtZW50cyk7XG59O1xuXG4vKipcbiAqIFByb21pc2UvQSsgZXh0ZW5zaW9uXG4gKiBDYWxsIFwidGhlblwiIHVzaW5nIGdpdmVuIG5vZGUtc3R5bGUgY2FsbGJhY2sgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxUPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UXVlcnl9XG4gKi9cblF1ZXJ5LnByb3RvdHlwZS50aGVuQ2FsbCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIGlmIChfLmlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgdGhpcy50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzKTtcbiAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogU3ViUXVlcnkgb2JqZWN0IGZvciByZXByZXNlbnRpbmcgY2hpbGQgcmVsYXRpb25zaGlwIHF1ZXJ5XG4gKlxuICogQHByb3RlY3RlZFxuICogQGNsYXNzIFF1ZXJ5flN1YlF1ZXJ5XG4gKiBAZXh0ZW5kcyBRdWVyeVxuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIC0gQ29ubmVjdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7UXVlcnl9IHBhcmVudCAtIFBhcmVudCBxdWVyeSBvYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgLSBTdWIgcXVlcnkgY29uZmlndXJhdGlvblxuICovXG52YXIgU3ViUXVlcnkgPSBmdW5jdGlvbihjb25uLCBwYXJlbnQsIGNvbmZpZykge1xuICBTdWJRdWVyeS5zdXBlcl8uY2FsbCh0aGlzLCBjb25uLCBjb25maWcpO1xuICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG59O1xuXG5pbmhlcml0cyhTdWJRdWVyeSwgUXVlcnkpO1xuXG4vKipcbiAqIEBtZXRob2QgUXVlcnl+U3ViUXVlcnkjaW5jbHVkZVxuICogQG92ZXJyaWRlXG4gKi9cblN1YlF1ZXJ5LnByb3RvdHlwZS5pbmNsdWRlID0gZnVuY3Rpb24oKSB7XG4gIHRocm93IG5ldyBFcnJvcihcIk5vdCBhbGxvd2VkIHRvIGluY2x1ZGUgYW5vdGhlciBzdWJxdWVyeSBpbiBzdWJxdWVyeS5cIik7XG59O1xuXG4vKipcbiAqIEJhY2sgdGhlIGNvbnRleHQgdG8gcGFyZW50IHF1ZXJ5IG9iamVjdFxuICpcbiAqIEBtZXRob2QgUXVlcnl+U3ViUXVlcnkjZW5kXG4gKiBAcmV0dXJucyB7UXVlcnl9XG4gKi9cblN1YlF1ZXJ5LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX3BhcmVudDtcbn07XG5cbi8qKlxuICogSWYgZXhlY3V0ZSBpcyBjYWxsZWQgaW4gc3VicXVlcnkgY29udGV4dCwgZGVsZWdhdGUgaXQgdG8gcGFyZW50IHF1ZXJ5IG9iamVjdFxuICpcbiAqIEBtZXRob2QgUXVlcnl+U3ViUXVlcnkjZXhlY3V0ZVxuICogQG92ZXJyaWRlXG4gKi9cblN1YlF1ZXJ5LnByb3RvdHlwZS5ydW4gPVxuU3ViUXVlcnkucHJvdG90eXBlLmV4ZWMgPVxuU3ViUXVlcnkucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX3BhcmVudC5leGVjdXRlLmFwcGx5KHRoaXMuX3BhcmVudCwgYXJndW1lbnRzKTtcbn07XG4iLCIvKipcbiAqIEBmaWxlIFJlcHJlc2VudHMgU2FsZXNmb3JjZSBRdWlja0FjdGlvblxuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5cbi8qKlxuICogQSBjbGFzcyBmb3IgcXVpY2sgYWN0aW9uXG4gKlxuICogQHByb3RlY3RlZFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBRdWlja0FjdGlvbiA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY29ubiwgcGF0aCkge1xuICB0aGlzLl9jb25uID0gY29ubjtcbiAgdGhpcy5fcGF0aCA9IHBhdGg7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFF1aWNrQWN0aW9uflF1aWNrQWN0aW9uSW5mb1xuICogQHByb3Age1N0cmluZ30gdHlwZSAtIFR5cGUgb2YgdGhlIGFjdGlvbiAoZS5nLiBDcmVhdGUsIFVwZGF0ZSwgUG9zdCwgTG9nQUNhbGwpXG4gKiBAcHJvcCB7U3RyaW5nfSBuYW1lIC0gTmFtZSBvZiB0aGUgYWN0aW9uXG4gKiBAcHJvcCB7U3RyaW5nfSBsYWJlbCAtIExhYmVsIG9mIHRoZSBhY3Rpb25cbiAqIEBwcm9wIHtPYmplY3R9IHVybHMgLSBFbmRwb2ludCBVUkwgaW5mb3JtYXRpb24gb2YgdGhlIGFjdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtRdWlja0FjdGlvbn5RdWlja0FjdGlvbkluZm99IFF1aWNrQWN0aW9uflF1aWNrQWN0aW9uRGVzY3JpdmVJbmZvXG4gKiBAcHJvcCB7U3RyaW5nfSBjb250ZXh0U29iamVjdFR5cGUgLSBPYmplY3QgdHlwZSB1c2VkIGZvciB0aGUgYWN0aW9uXG4gKiBAcHJvcCB7U3RyaW5nfSB0YXJnZXRTb2JqZWN0VHlwZSAtIE9iamVjdCB0eXBlIG9mIHRoZSBhY3Rpb24gdG8gdGFyZ2V0XG4gKiBAcHJvcCB7U3RyaW5nfSB0YXJnZXRQYXJlbnRGaWVsZCAtIEZpZWxkIG5hbWUgaW4gdGhlIHRhcmdldCBvYmplY3Qgd2hpY2ggcmVmZXJzIHBhcmVudChjb250ZXh0KSBvYmplY3QgcmVjb3JkIElELlxuICogQHByb3Age1N0cmluZ30gdGFyZ2V0UmVjb3JkVHlwZUlkIC0gUmVjb3JkIHR5cGUgb2YgdGhlIHRhcmdldGVkIHJlY29yZFxuICogQHByb3Age09iamVjdH0gbGF5b3V0IC0gTGF5b3V0IHNlY3Rpb25zIHRoYXQgY29tcHJpc2UgYW4gYWN0aW9uXG4gKi9cblxuLyoqXG4gKiBEZXNjcmliZSB0aGUgYWN0aW9uJ3MgaW5mb3JtYXRpb24gKGluY2x1ZGluZyBsYXlvdXQsIGV0Yy4pXG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48UXVpY2tBY3Rpb25+UXVpY2tBY3Rpb25EZXNjcml2ZUluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxRdWlja0FjdGlvbn5RdWlja0FjdGlvbkRlc2NyaXZlSW5mbz59XG4gKi9cblF1aWNrQWN0aW9uLnByb3RvdHlwZS5kZXNjcmliZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSB0aGlzLl9wYXRoICsgXCIvZGVzY3JpYmVcIjtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgZGVmYXVsdCBmaWVsZCB2YWx1ZXMgaW4gdGhlIGFjdGlvbiAoZm9yIGdpdmVuIHJlY29yZCwgaWYgc3BlY2lmaWVkKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBbY29udGV4dElkXSAtIElEIG9mIHJlY29yZCB0byBnZXQgZGVmYXVsdCB2YWx1ZXMgc3BlY2lmaWMgdG8gdGhlIHJlY29yZFxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkPn1cbiAqL1xuUXVpY2tBY3Rpb24ucHJvdG90eXBlLmRlZmF1bHRWYWx1ZXMgPSBmdW5jdGlvbihjb250ZXh0SWQsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgY29udGV4dElkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBjb250ZXh0SWQ7XG4gICAgY29udGV4dElkID0gbnVsbDtcbiAgfVxuICB2YXIgdXJsID0gdGhpcy5fcGF0aCArIFwiL2RlZmF1bHRWYWx1ZXNcIjtcbiAgaWYgKGNvbnRleHRJZCkge1xuICAgIHVybCArPSBcIi9cIiArIGNvbnRleHRJZDtcbiAgfVxuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHVybCkudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBRdWlja0FjdGlvbn5RdWlja0FjdGlvblJlc3VsdFxuICogQHBhcmFtIHtTdHJpbmd9IGlkIC0gUmVjb3JkIGlkIG9mIHRoZSBhY3Rpb24gcmVzdWx0XG4gKiBAcGFyYW0ge0FycmF5LjxTdHJpbmc+fSBmZWVkSXRlbUlkcyAtIExpc3Qgb2YgSURzIGZvciBmZWVkIGl0ZW1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gc3VjY2VzcyAtIFRydWUgaWYgdGhlIGFjdGlvbiBzdWNjZXNzZnVsbHkgY29tcGxldGVkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGNyZWF0ZWQgLSBUcnVlIGlmIHRoZSBhY3Rpb24geWllbGRzIGEgbmV3IHJlY29yZFxuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRleHRJZCAtIENvbnRleHQgcmVjb3JkIElEIG9mIHRoZSBhY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IGVycm9ycyAtIEVycm9ycyBpZiB0aGUgYWN0aW9uIGZhaWxlZFxuICovXG5cbi8qKlxuICogRXhlY3V0ZSB0aGUgYWN0aW9uIGZvciBnaXZlbiBjb250ZXh0IElkIGFuZCByZWNvcmQgaW5mb3JtYXRpb25cbiAqIFxuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRleHRJZCAtIENvbnRleHQgcmVjb3JkIElEIG9mIHRoZSBhY3Rpb25cbiAqIEBwYXJhbSB7UmVjb3JkfSByZWNvcmQgLSBJbnB1dCByZWNvcmQgaW5mb3JtYXRpb24gZm9yIHRoZSBhY3Rpb25cbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFF1aWNrQWN0aW9uflF1aWNrQWN0aW9uUmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UXVpY2tBY3Rpb25+UXVpY2tBY3Rpb25SZXN1bHQ+fVxuICovXG5RdWlja0FjdGlvbi5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uKGNvbnRleHRJZCwgcmVjb3JkLCBjYWxsYmFjaykge1xuICB2YXIgYm9keSA9IHtcbiAgICBjb250ZXh0SWQ6IGNvbnRleHRJZCxcbiAgICByZWNvcmQ6IHJlY29yZFxuICB9O1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0UG9zdCh0aGlzLl9wYXRoLCBib2R5KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuIiwiLyoqXG4gKiBAZmlsZSBSZXByZXNlbnRzIHN0cmVhbSB0aGF0IGhhbmRsZXMgU2FsZXNmb3JjZSByZWNvcmQgYXMgc3RyZWFtIGRhdGFcbiAqIEBhdXRob3IgU2hpbmljaGkgVG9taXRhIDxzaGluaWNoaS50b21pdGFAZ21haWwuY29tPlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGV2ZW50cyA9IHJlcXVpcmUoJ2V2ZW50cycpLFxuICAgIHN0cmVhbSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbScpLFxuICAgIER1cGxleCA9IHN0cmVhbS5EdXBsZXgsXG4gICAgVHJhbnNmb3JtID0gc3RyZWFtLlRyYW5zZm9ybSxcbiAgICBQYXNzVGhyb3VnaCA9IHN0cmVhbS5QYXNzVGhyb3VnaCxcbiAgICBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyksXG4gICAgXyAgICAgID0gcmVxdWlyZSgnbG9kYXNoL2NvcmUnKSxcbiAgICBDU1YgICAgPSByZXF1aXJlKCcuL2NzdicpO1xuXG5cbi8qKlxuICogQ2xhc3MgZm9yIFJlY29yZCBTdHJlYW1cbiAqXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgc3RyZWFtLlRyYW5zZm9ybVxuICovXG52YXIgUmVjb3JkU3RyZWFtID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgUmVjb3JkU3RyZWFtLnN1cGVyXy5jYWxsKHRoaXMsIHsgb2JqZWN0TW9kZTogdHJ1ZSB9KTtcbn07XG5cbmluaGVyaXRzKFJlY29yZFN0cmVhbSwgVHJhbnNmb3JtKTtcblxuXG4vKlxuICogQG92ZXJyaWRlXG4gKi9cblJlY29yZFN0cmVhbS5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uKHJlY29yZCwgZW5jLCBjYWxsYmFjaykge1xuICB0aGlzLmVtaXQoJ3JlY29yZCcsIHJlY29yZCk7XG4gIHRoaXMucHVzaChyZWNvcmQpO1xuICBjYWxsYmFjaygpO1xufTtcblxuLyoqXG4gKiBHZXQgcmVjb3JkIHN0cmVhbSBvZiBxdWVyaWVkIHJlY29yZHMgYXBwbHlpbmcgdGhlIGdpdmVuIG1hcHBpbmcgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1JlY29yZE1hcEZ1bmN0aW9ufSBmbiAtIFJlY29yZCBtYXBwaW5nIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UmVjb3JkU3RyZWFtfVxuICovXG5SZWNvcmRTdHJlYW0ucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKGZuKSB7XG4gIHJldHVybiB0aGlzLnBpcGUoUmVjb3JkU3RyZWFtLm1hcChmbikpO1xufTtcblxuLyoqXG4gKiBHZXQgcmVjb3JkIHN0cmVhbSBvZiBxdWVyaWVkIHJlY29yZHMsIGFwcGx5aW5nIHRoZSBnaXZlbiBmaWx0ZXIgZnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge1JlY29yZEZpbHRlckZ1bmN0aW9ufSBmbiAtIFJlY29yZCBmaWx0ZXJpbmcgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtSZWNvcmRTdHJlYW19XG4gKi9cblJlY29yZFN0cmVhbS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgcmV0dXJuIHRoaXMucGlwZShSZWNvcmRTdHJlYW0uZmlsdGVyKGZuKSk7XG59O1xuXG5cbi8qKlxuICogQGNsYXNzIFJlY29yZFN0cmVhbS5TZXJpYWxpemFibGVcbiAqIEBleHRlbmRzIHtSZWNvcmRTdHJlYW19XG4gKi9cbnZhciBTZXJpYWxpemFibGUgPSBSZWNvcmRTdHJlYW0uU2VyaWFsaXphYmxlID0gZnVuY3Rpb24oKSB7XG4gIFNlcmlhbGl6YWJsZS5zdXBlcl8uY2FsbCh0aGlzKTtcbiAgdGhpcy5fZGF0YVN0cmVhbSA9IG51bGw7XG59O1xuXG5pbmhlcml0cyhTZXJpYWxpemFibGUsIFJlY29yZFN0cmVhbSk7XG5cbi8qKlxuICogQ3JlYXRlIHJlYWRhYmxlIGRhdGEgc3RyZWFtIHdoaWNoIGVtaXRzIHNlcmlhbGl6ZWQgcmVjb3JkIGRhdGFcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gW3R5cGVdIC0gVHlwZSBvZiBvdXRnb2luZyBkYXRhIGZvcm1hdC4gQ3VycmVudGx5ICdjc3YnIGlzIGRlZmF1bHQgdmFsdWUgYW5kIHRoZSBvbmx5IHN1cHBvcnRlZC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIHBhc3NlZCB0byBjb252ZXJ0ZXJcbiAqIEByZXR1cm5zIHtzdHJlYW0uUmVhZGFibGV9XG4qL1xuU2VyaWFsaXphYmxlLnByb3RvdHlwZS5zdHJlYW0gPSBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7XG4gIHR5cGUgPSB0eXBlIHx8ICdjc3YnO1xuICB2YXIgY29udmVydGVyID0gRGF0YVN0cmVhbUNvbnZlcnRlcnNbdHlwZV07XG4gIGlmICghY29udmVydGVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb252ZXJ0aW5nIFsnICsgdHlwZSArICddIGRhdGEgc3RyZWFtIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gIH1cbiAgaWYgKCF0aGlzLl9kYXRhU3RyZWFtKSB7XG4gICAgdGhpcy5fZGF0YVN0cmVhbSA9IG5ldyBQYXNzVGhyb3VnaCgpO1xuICAgIHRoaXMucGlwZShjb252ZXJ0ZXIuc2VyaWFsaXplKG9wdGlvbnMpKVxuICAgICAgLnBpcGUodGhpcy5fZGF0YVN0cmVhbSk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2RhdGFTdHJlYW07XG59O1xuXG5cbi8qKlxuICogQGNsYXNzIFJlY29yZFN0cmVhbS5QYXJzYWJsZVxuICogQGV4dGVuZHMge1JlY29yZFN0cmVhbX1cbiAqL1xudmFyIFBhcnNhYmxlID0gUmVjb3JkU3RyZWFtLlBhcnNhYmxlID0gZnVuY3Rpb24oKSB7XG4gIFBhcnNhYmxlLnN1cGVyXy5jYWxsKHRoaXMpO1xuICB0aGlzLl9kYXRhU3RyZWFtID0gbnVsbDtcbn07XG5cbmluaGVyaXRzKFBhcnNhYmxlLCBSZWNvcmRTdHJlYW0pO1xuXG4vKipcbiAqIENyZWF0ZSB3cml0YWJsZSBkYXRhIHN0cmVhbSB3aGljaCBhY2NlcHRzIHNlcmlhbGl6ZWQgcmVjb3JkIGRhdGFcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gW3R5cGVdIC0gVHlwZSBvZiBvdXRnb2luZyBkYXRhIGZvcm1hdC4gQ3VycmVudGx5ICdjc3YnIGlzIGRlZmF1bHQgdmFsdWUgYW5kIHRoZSBvbmx5IHN1cHBvcnRlZC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIHBhc3NlZCB0byBjb252ZXJ0ZXJcbiAqIEByZXR1cm5zIHtzdHJlYW0uUmVhZGFibGV9XG4qL1xuUGFyc2FibGUucHJvdG90eXBlLnN0cmVhbSA9IGZ1bmN0aW9uKHR5cGUsIG9wdGlvbnMpIHtcbiAgdHlwZSA9IHR5cGUgfHwgJ2Nzdic7XG4gIHZhciBjb252ZXJ0ZXIgPSBEYXRhU3RyZWFtQ29udmVydGVyc1t0eXBlXTtcbiAgaWYgKCFjb252ZXJ0ZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnZlcnRpbmcgWycgKyB0eXBlICsgJ10gZGF0YSBzdHJlYW0gaXMgbm90IHN1cHBvcnRlZC4nKTtcbiAgfVxuICBpZiAoIXRoaXMuX2RhdGFTdHJlYW0pIHtcbiAgICB0aGlzLl9kYXRhU3RyZWFtID0gbmV3IFBhc3NUaHJvdWdoKCk7XG4gICAgdGhpcy5fcGFyc2VyU3RyZWFtID0gY29udmVydGVyLnBhcnNlKG9wdGlvbnMpLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGVycm9yKSB7IHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7IH0pO1xuICAgIHRoaXMuX3BhcnNlclN0cmVhbS5waXBlKHRoaXMpLnBpcGUobmV3IFBhc3NUaHJvdWdoKHsgb2JqZWN0TW9kZTogdHJ1ZSwgaGlnaFdhdGVyTWFyazogKCA1MDAgKiAxMDAwICkgfSkpO1xuICB9XG4gIHJldHVybiB0aGlzLl9kYXRhU3RyZWFtO1xufTtcblxuXG4vKiBAb3ZlcnJpZGUgKi9cblBhcnNhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2LCBmbikge1xuICBpZiAoZXYgPT09ICdyZWFkYWJsZScgfHwgZXYgPT09ICdyZWNvcmQnKSB7XG4gICAgdGhpcy5fZGF0YVN0cmVhbS5waXBlKHRoaXMuX3BhcnNlclN0cmVhbSk7XG4gIH1cbiAgcmV0dXJuIFBhcnNhYmxlLnN1cGVyXy5wcm90b3R5cGUub24uY2FsbCh0aGlzLCBldiwgZm4pO1xufTtcblxuLyogQG92ZXJyaWRlICovXG5QYXJzYWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBQYXJzYWJsZS5wcm90b3R5cGUub247XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vKipcbiAqIEBjYWxsYmFjayBSZWNvcmRNYXBGdW5jdGlvblxuICogQHBhcmFtIHtSZWNvcmR9IHJlY29yZCAtIFNvdXJjZSByZWNvcmQgdG8gbWFwXG4gKiBAcmV0dXJucyB7UmVjb3JkfVxuICovXG5cbi8qKlxuICogQ3JlYXRlIGEgcmVjb3JkIHN0cmVhbSB3aGljaCBtYXBzIHJlY29yZHMgYW5kIHBhc3MgdGhlbSB0byBkb3duc3RyZWFtXG4gKlxuICogQHBhcmFtIHtSZWNvcmRNYXBGdW5jdGlvbn0gZm4gLSBSZWNvcmQgbWFwcGluZyBmdW5jdGlvblxuICogQHJldHVybnMge1JlY29yZFN0cmVhbS5TZXJpYWxpemFibGV9XG4gKi9cblJlY29yZFN0cmVhbS5tYXAgPSBmdW5jdGlvbihmbikge1xuICB2YXIgbWFwU3RyZWFtID0gbmV3IFJlY29yZFN0cmVhbS5TZXJpYWxpemFibGUoKTtcbiAgbWFwU3RyZWFtLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihyZWNvcmQsIGVuYywgY2FsbGJhY2spIHtcbiAgICB2YXIgcmVjID0gZm4ocmVjb3JkKSB8fCByZWNvcmQ7IC8vIGlmIG5vdCByZXR1cm5lZCByZWNvcmQsIHVzZSBzYW1lIHJlY29yZFxuICAgIHRoaXMucHVzaChyZWMpO1xuICAgIGNhbGxiYWNrKCk7XG4gIH07XG4gIHJldHVybiBtYXBTdHJlYW07XG59O1xuXG4vKipcbiAqIENyZWF0ZSBtYXBwaW5nIHN0cmVhbSB1c2luZyBnaXZlbiByZWNvcmQgdGVtcGxhdGVcbiAqXG4gKiBAcGFyYW0ge1JlY29yZH0gcmVjb3JkIC0gTWFwcGluZyByZWNvcmQgb2JqZWN0LiBJbiBtYXBwaW5nIGZpZWxkIHZhbHVlLCB0ZW1sYXRlIG5vdGF0aW9uIGNhbiBiZSB1c2VkIHRvIHJlZmVyIGZpZWxkIHZhbHVlIGluIHNvdXJjZSByZWNvcmQsIGlmIG5vZXZhbCBwYXJhbSBpcyBub3QgdHJ1ZS5cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW25vZXZhbF0gLSBEaXNhYmxlIHRlbXBsYXRlIGV2YWx1YXRpb24gaW4gbWFwcGluZyByZWNvcmQuXG4gKiBAcmV0dXJucyB7UmVjb3JkU3RyZWFtLlNlcmlhbGl6YWJsZX1cbiAqL1xuUmVjb3JkU3RyZWFtLnJlY29yZE1hcFN0cmVhbSA9IGZ1bmN0aW9uKHJlY29yZCwgbm9ldmFsKSB7XG4gIHJldHVybiBSZWNvcmRTdHJlYW0ubWFwKGZ1bmN0aW9uKHJlYykge1xuICAgIHZhciBtYXBwZWQgPSB7IElkOiByZWMuSWQgfTtcbiAgICBmb3IgKHZhciBwcm9wIGluIHJlY29yZCkge1xuICAgICAgbWFwcGVkW3Byb3BdID0gbm9ldmFsID8gcmVjb3JkW3Byb3BdIDogZXZhbE1hcHBpbmcocmVjb3JkW3Byb3BdLCByZWMpO1xuICAgIH1cbiAgICByZXR1cm4gbWFwcGVkO1xuICB9KTtcblxuICBmdW5jdGlvbiBldmFsTWFwcGluZyh2YWx1ZSwgbWFwcGluZykge1xuICAgIGlmIChfLmlzU3RyaW5nKHZhbHVlKSkge1xuICAgICAgdmFyIG0gPSAvXlxcJFxceyhcXHcrKVxcfSQvLmV4ZWModmFsdWUpO1xuICAgICAgaWYgKG0pIHsgcmV0dXJuIG1hcHBpbmdbbVsxXV07IH1cbiAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9cXCRcXHsoXFx3KylcXH0vZywgZnVuY3Rpb24oJDAsIHByb3ApIHtcbiAgICAgICAgdmFyIHYgPSBtYXBwaW5nW3Byb3BdO1xuICAgICAgICByZXR1cm4gXy5pc051bGwodikgfHwgXy5pc1VuZGVmaW5lZCh2KSA/IFwiXCIgOiBTdHJpbmcodik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBAY2FsbGJhY2sgUmVjb3JkRmlsdGVyRnVuY3Rpb25cbiAqIEBwYXJhbSB7UmVjb3JkfSByZWNvcmQgLSBTb3VyY2UgcmVjb3JkIHRvIGZpbHRlclxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKi9cblxuLyoqXG4gKiBDcmVhdGUgYSByZWNvcmQgc3RyZWFtIHdoaWNoIGZpbHRlcnMgcmVjb3JkcyBhbmQgcGFzcyB0aGVtIHRvIGRvd25zdHJlYW1cbiAqXG4gKiBAcGFyYW0ge1JlY29yZEZpbHRlckZ1bmN0aW9ufSBmbiAtIFJlY29yZCBmaWx0ZXJpbmcgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtSZWNvcmRTdHJlYW0uU2VyaWFsaXphYmxlfVxuICovXG5SZWNvcmRTdHJlYW0uZmlsdGVyID0gZnVuY3Rpb24oZm4pIHtcbiAgdmFyIGZpbHRlclN0cmVhbSA9IG5ldyBSZWNvcmRTdHJlYW0uU2VyaWFsaXphYmxlKCk7XG4gIGZpbHRlclN0cmVhbS5fdHJhbnNmb3JtID0gZnVuY3Rpb24ocmVjb3JkLCBlbmMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGZuKHJlY29yZCkpIHsgdGhpcy5wdXNoKHJlY29yZCk7IH1cbiAgICBjYWxsYmFjaygpO1xuICB9O1xuICByZXR1cm4gZmlsdGVyU3RyZWFtO1xufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjb252ZXJ0UmVjb3JkRm9yU2VyaWFsaXphdGlvbihyZWNvcmQsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHJlY29yZCkucmVkdWNlKGZ1bmN0aW9uKHJlYywga2V5KSB7XG4gICAgdmFyIHZhbHVlID0gcmVjW2tleV07XG4gICAgdmFyIHQgPSB0eXBlb2YgdmFsdWU7XG4gICAgdmFyIHVyZWMgPSB7fTtcbiAgICBpZiAoa2V5ID09PSAnYXR0cmlidXRlcycpIHsgLy8gJ2F0dHJpYnV0ZXMnIHByb3Agd2lsbCBiZSBpZ25vcmVkXG4gICAgICByZWMgPSBfLmV4dGVuZCh7fSwgcmVjKTtcbiAgICAgIGRlbGV0ZSByZWNba2V5XTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMubnVsbFZhbHVlICYmIHZhbHVlID09PSBudWxsKSB7XG4gICAgICB1cmVjW2tleV0gPSBvcHRpb25zLm51bGxWYWx1ZTtcbiAgICAgIHJlYyA9IF8uZXh0ZW5kKHt9LCByZWMsIHVyZWMpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgdmFyIHByZWNvcmQgPSBjb252ZXJ0UmVjb3JkRm9yU2VyaWFsaXphdGlvbih2YWx1ZSwgb3B0aW9ucyk7XG4gICAgICByZWMgPSBPYmplY3Qua2V5cyhwcmVjb3JkKS5yZWR1Y2UoZnVuY3Rpb24ocHJlYywgcGtleSkge1xuICAgICAgICBwcmVjW2tleSArICcuJyArIHBrZXldID0gcHJlY29yZFtwa2V5XTtcbiAgICAgICAgcmV0dXJuIHByZWM7XG4gICAgICB9LCBfLmV4dGVuZCh7fSwgcmVjKSk7XG4gICAgfVxuICAgIHJldHVybiByZWM7XG4gIH0sIHJlY29yZCk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGlwZWxpbmVTdHJlYW0oczEsIHMyKSB7XG4gIHZhciBwaXBlbGluZSA9IG5ldyBQYXNzVGhyb3VnaCgpO1xuICBwaXBlbGluZS5vbigncGlwZScsIGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgIHNvdXJjZS51bnBpcGUocGlwZWxpbmUpO1xuICAgIHNvdXJjZS5waXBlKHMxKS5waXBlKHMyKTtcbiAgfSk7XG4gIHBpcGVsaW5lLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHMyLnBpcGUoZGVzdCwgb3B0aW9ucyk7XG4gIH07XG4gIHJldHVybiBwaXBlbGluZTtcbn1cblxuLyoqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKiovXG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIENTVlN0cmVhbUNvbnZlcnRlciA9IHtcbiAgc2VyaWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgcmV0dXJuIGNyZWF0ZVBpcGVsaW5lU3RyZWFtKFxuICAgICAgUmVjb3JkU3RyZWFtLm1hcChmdW5jdGlvbihyZWNvcmQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRSZWNvcmRGb3JTZXJpYWxpemF0aW9uKHJlY29yZCwgb3B0aW9ucyk7XG4gICAgICB9KSxcbiAgICAgIENTVi5zZXJpYWxpemVDU1ZTdHJlYW0ob3B0aW9ucylcbiAgICApO1xuICB9LFxuICBwYXJzZTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBDU1YucGFyc2VDU1ZTdHJlYW0ob3B0aW9ucyk7XG4gIH1cbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xudmFyIERhdGFTdHJlYW1Db252ZXJ0ZXJzID0gUmVjb3JkU3RyZWFtLkRhdGFTdHJlYW1Db252ZXJ0ZXJzID0ge1xuICBjc3Y6IENTVlN0cmVhbUNvbnZlcnRlclxufTtcbiIsIi8qKlxuICogQGZpbGUgUmVwcmVzZW50cyBTYWxlc2ZvcmNlIHJlY29yZCBpbmZvcm1hdGlvblxuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyk7XG5cbi8qKlxuICogQSBzaW1wbGUgaGFzaCBvYmplY3QgaW5jbHVkaW5nIHJlY29yZCBmaWVsZCBpbmZvcm1hdGlvblxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFJlY29yZFxuICovXG5cbi8qKlxuICogUmVtb3RlIHJlZmVyZW5jZSB0byByZWNvcmQgaW5mb3JtYXRpb25cbiAqXG4gKiBAcHJvdGVjdGVkXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIC0gQ29ubmVjdGlvbiBvYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIC0gU09iamVjdCB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBSZWNvcmQgSURcbiAqL1xudmFyIFJlY29yZFJlZmVyZW5jZSA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY29ubiwgdHlwZSwgaWQpIHtcbiAgdGhpcy5fY29ubiA9IGNvbm47XG4gIHRoaXMudHlwZSA9IHR5cGU7XG4gIHRoaXMuaWQgPSBpZDtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgcmVjb3JkIGZpZWxkIGluZm9ybWF0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIHJlc3QgYXBpLlxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkPn1cbiAqL1xuUmVjb3JkUmVmZXJlbmNlLnByb3RvdHlwZS5yZXRyaWV2ZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmV0cmlldmUodGhpcy50eXBlLCB0aGlzLmlkLCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSByZWNvcmQgZmllbGQgaW5mb3JtYXRpb25cbiAqXG4gKiBAcGFyYW0ge1JlY29yZH0gcmVjb3JkIC0gQSBSZWNvcmQgd2hpY2ggaW5jbHVkZXMgZmllbGRzIHRvIHVwZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIHJlc3QgYXBpLlxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0Pn1cbiAqL1xuUmVjb3JkUmVmZXJlbmNlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihyZWNvcmQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgcmVjb3JkID0gXy5jbG9uZShyZWNvcmQpO1xuICByZWNvcmQuSWQgPSB0aGlzLmlkO1xuICByZXR1cm4gdGhpcy5fY29ubi51cGRhdGUodGhpcy50eXBlLCByZWNvcmQsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogU3lub255bSBvZiBSZWNvcmQjZGVzdHJveSgpXG4gKlxuICogQG1ldGhvZCBSZWNvcmRSZWZlcmVuY2UjZGVsZXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgcmVzdCBhcGkuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHQ+fVxuICovXG5SZWNvcmRSZWZlcmVuY2UucHJvdG90eXBlW1wiZGVsZXRlXCJdID1cbi8qKlxuICogU3lub255bSBvZiBSZWNvcmQjZGVzdHJveSgpXG4gKlxuICogQG1ldGhvZCBSZWNvcmRSZWZlcmVuY2UjZGVsXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHQ+fVxuICovXG5SZWNvcmRSZWZlcmVuY2UucHJvdG90eXBlLmRlbCA9XG4vKipcbiAqIERlbGV0ZSByZWNvcmQgZmllbGRcbiAqXG4gKiBAbWV0aG9kIFJlY29yZFJlZmVyZW5jZSNkZXN0cm95XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgcmVzdCBhcGkuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHQ+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHQ+fVxuICovXG5SZWNvcmRSZWZlcmVuY2UucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIHJldHVybiB0aGlzLl9jb25uLmRlc3Ryb3kodGhpcy50eXBlLCB0aGlzLmlkLCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEdldCBibG9iIGZpZWxkIGFzIHN0cmVhbVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmaWVsZE5hbWUgLSBCbG9iIGZpZWxkIG5hbWVcbiAqIEByZXR1cm5zIHtzdHJlYW0uU3RyZWFtfVxuICovXG5SZWNvcmRSZWZlcmVuY2UucHJvdG90eXBlLmJsb2IgPSBmdW5jdGlvbihmaWVsZE5hbWUpIHtcbiAgdmFyIHVybCA9IFsgdGhpcy5fY29ubi5fYmFzZVVybCgpLCAnc29iamVjdHMnLCB0aGlzLnR5cGUsIHRoaXMuaWQsIGZpZWxkTmFtZSBdLmpvaW4oJy8nKTtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwpLnN0cmVhbSgpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHJlcXVpcmVkID0gcmVxdWlyZSgnLi9fcmVxdWlyZWQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihuYW1lKSB7XG4gIGlmIChuYW1lID09PSAnLi9qc2ZvcmNlJyB8fCBuYW1lID09PSAnanNmb3JjZScpIHtcbiAgICBuYW1lID0gJy4vY29yZSc7XG4gIH1cbiAgdmFyIG0gPSByZXF1aXJlZFtuYW1lXTtcbiAgaWYgKHR5cGVvZiBtID09PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyBuYW1lICsgXCInXCIpO1xuICB9XG4gIHJldHVybiBtO1xufTtcbiIsIi8qKlxuICogQGZpbGUgTWFuYWdlcyBtZXRob2QgY2FsbCB0byBTT0FQIGVuZHBvaW50XG4gKiBAYXV0aG9yIFNoaW5pY2hpIFRvbWl0YSA8c2hpbmljaGkudG9taXRhQGdtYWlsLmNvbT5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyksXG4gICAgXyA9IHJlcXVpcmUoJ2xvZGFzaC9jb3JlJyksXG4gICAgeG1sMmpzID0gcmVxdWlyZSgneG1sMmpzJyksXG4gICAgSHR0cEFwaSA9IHJlcXVpcmUoJy4vaHR0cC1hcGknKTtcblxuXG4vKipcbiAqIENsYXNzIGZvciBTT0FQIGVuZHBvaW50IG9mIFNhbGVzZm9yY2VcbiAqXG4gKiBAcHJvdGVjdGVkXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIC0gQ29ubmVjdGlvbiBpbnN0YW5jZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBTT0FQIGVuZHBvaW50IHNldHRpbmcgb3B0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMuZW5kcG9pbnRVcmwgLSBTT0FQIGVuZHBvaW50IFVSTFxuICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnhtbG5zXSAtIFhNTCBuYW1lc3BhY2UgZm9yIG1ldGhvZCBjYWxsIChkZWZhdWx0IGlzIFwidXJuOnBhcnRuZXIuc29hcC5zZm9yY2UuY29tXCIpXG4gKi9cbnZhciBTT0FQID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjb25uLCBvcHRpb25zKSB7XG4gIFNPQVAuc3VwZXJfLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIHRoaXMuX2VuZHBvaW50VXJsID0gb3B0aW9ucy5lbmRwb2ludFVybDtcbiAgdGhpcy5feG1sbnMgPSBvcHRpb25zLnhtbG5zIHx8ICd1cm46cGFydG5lci5zb2FwLnNmb3JjZS5jb20nO1xufTtcblxuaW5oZXJpdHMoU09BUCwgSHR0cEFwaSk7XG5cbi8qKlxuICogSW52b2tlIFNPQVAgY2FsbCB1c2luZyBtZXRob2QgYW5kIGFyZ3VtZW50c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2QgLSBNZXRob2QgbmFtZVxuICogQHBhcmFtIHtPYmplY3R9IGFyZ3MgLSBBcmd1bWVudHMgZm9yIHRoZSBtZXRob2QgY2FsbFxuICogQHBhcmFtIHtPYmplY3R9IFtzY2hlbWFdIC0gU2NoZW1hIGRlZmluaXRpb24gb2YgcmVzcG9uc2UgbWVzc2FnZVxuICogQHBhcmFtIHtDYWxsYmFjay48T2JqZWN0Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn1cbiAqL1xuU09BUC5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24obWV0aG9kLCBhcmdzLCBzY2hlbWEsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2Ygc2NoZW1hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBzY2hlbWE7XG4gICAgc2NoZW1hID0gbnVsbDtcbiAgfVxuICB2YXIgbWVzc2FnZSA9IHt9O1xuICBtZXNzYWdlW21ldGhvZF0gPSBhcmdzO1xuICByZXR1cm4gdGhpcy5yZXF1ZXN0KHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICB1cmw6IHRoaXMuX2VuZHBvaW50VXJsLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICdDb250ZW50LVR5cGUnOiAndGV4dC94bWwnLFxuICAgICAgJ1NPQVBBY3Rpb24nOiAnXCJcIidcbiAgICB9LFxuICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgfSkudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICByZXR1cm4gc2NoZW1hID8gY29udmVydFR5cGUocmVzLCBzY2hlbWEpIDogcmVzO1xuICB9KS50aGVuQ2FsbChjYWxsYmFjayk7XG59O1xuXG4vKiBAcHJpdmF0ZSAqL1xuZnVuY3Rpb24gY29udmVydFR5cGUodmFsdWUsIHNjaGVtYSkge1xuICBpZiAoXy5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS5tYXAoZnVuY3Rpb24odikge1xuICAgICAgcmV0dXJuIGNvbnZlcnRUeXBlKHYsIHNjaGVtYSAmJiBzY2hlbWFbMF0pXG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoXy5pc09iamVjdCh2YWx1ZSkpIHtcbiAgICBpZiAodmFsdWUuJCAmJiB2YWx1ZS4kWyd4c2k6bmlsJ10gPT09ICd0cnVlJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIGlmIChfLmlzQXJyYXkoc2NoZW1hKSkge1xuICAgICAgcmV0dXJuIFsgY29udmVydFR5cGUodmFsdWUsIHNjaGVtYVswXSkgXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG8gPSB7fTtcbiAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgICBvW2tleV0gPSBjb252ZXJ0VHlwZSh2YWx1ZVtrZXldLCBzY2hlbWEgJiYgc2NoZW1hW2tleV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG87XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChfLmlzQXJyYXkoc2NoZW1hKSkge1xuICAgICAgcmV0dXJuIFsgY29udmVydFR5cGUodmFsdWUsIHNjaGVtYVswXSkgXTtcbiAgICB9IGVsc2UgaWYgKF8uaXNPYmplY3Qoc2NoZW1hKSkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2goc2NoZW1hKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSk7XG4gICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqIEBvdmVycmlkZSAqKi9cblNPQVAucHJvdG90eXBlLmJlZm9yZVNlbmQgPSBmdW5jdGlvbihyZXF1ZXN0KSB7XG4gIHJlcXVlc3QuYm9keSA9IHRoaXMuX2NyZWF0ZUVudmVsb3BlKHJlcXVlc3QubWVzc2FnZSk7XG59O1xuXG4vKiogQG92ZXJyaWRlICoqL1xuU09BUC5wcm90b3R5cGUuaXNTZXNzaW9uRXhwaXJlZCA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gIHJldHVybiByZXNwb25zZS5zdGF0dXNDb2RlID09PSA1MDAgJiZcbiAgICAvPGZhdWx0Y29kZT5bYS16QS1aXSs6SU5WQUxJRF9TRVNTSU9OX0lEPFxcL2ZhdWx0Y29kZT4vLnRlc3QocmVzcG9uc2UuYm9keSk7XG59O1xuXG4vKiogQG92ZXJyaWRlICoqL1xuU09BUC5wcm90b3R5cGUucGFyc2VFcnJvciA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgdmFyIGVycm9yID0gbG9va3VwVmFsdWUoYm9keSwgWyAvOkVudmVsb3BlJC8sIC86Qm9keSQvLCAvOkZhdWx0JC8gXSk7XG4gIHJldHVybiB7XG4gICAgZXJyb3JDb2RlOiBlcnJvci5mYXVsdGNvZGUsXG4gICAgbWVzc2FnZTogZXJyb3IuZmF1bHRzdHJpbmdcbiAgfTtcbn07XG5cbi8qKiBAb3ZlcnJpZGUgKiovXG5TT0FQLnByb3RvdHlwZS5nZXRSZXNwb25zZUJvZHkgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICB2YXIgYm9keSA9IFNPQVAuc3VwZXJfLnByb3RvdHlwZS5nZXRSZXNwb25zZUJvZHkuY2FsbCh0aGlzLCByZXNwb25zZSk7XG4gIHJldHVybiBsb29rdXBWYWx1ZShib2R5LCBbIC86RW52ZWxvcGUkLywgLzpCb2R5JC8sIC8uKy8gXSk7XG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGxvb2t1cFZhbHVlKG9iaiwgcHJvcFJlZ0V4cHMpIHtcbiAgdmFyIHJlZ2V4cCA9IHByb3BSZWdFeHBzLnNoaWZ0KCk7XG4gIGlmICghcmVnZXhwKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBlbHNlIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgaWYgKHJlZ2V4cC50ZXN0KHByb3ApKSB7XG4gICAgICAgIHJldHVybiBsb29rdXBWYWx1ZShvYmpbcHJvcF0sIHByb3BSZWdFeHBzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB0b1hNTChuYW1lLCB2YWx1ZSkge1xuICBpZiAoXy5pc09iamVjdChuYW1lKSkge1xuICAgIHZhbHVlID0gbmFtZTtcbiAgICBuYW1lID0gbnVsbDtcbiAgfVxuICBpZiAoXy5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBfLm1hcCh2YWx1ZSwgZnVuY3Rpb24odikgeyByZXR1cm4gdG9YTUwobmFtZSwgdik7IH0pLmpvaW4oJycpO1xuICB9IGVsc2Uge1xuICAgIHZhciBhdHRycyA9IFtdO1xuICAgIHZhciBlbGVtcyA9IFtdO1xuICAgIGlmIChfLmlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgZm9yICh2YXIgayBpbiB2YWx1ZSkge1xuICAgICAgICB2YXIgdiA9IHZhbHVlW2tdO1xuICAgICAgICBpZiAoa1swXSA9PT0gJ0AnKSB7XG4gICAgICAgICAgayA9IGsuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgIGF0dHJzLnB1c2goayArICc9XCInICsgdiArICdcIicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1zLnB1c2godG9YTUwoaywgdikpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IGVsZW1zLmpvaW4oJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcbiAgICAgICAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcbiAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxuICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpXG4gICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgLnJlcGxhY2UoLycvZywgJyZhcG9zOycpO1xuICAgIH1cbiAgICB2YXIgc3RhcnRUYWcgPSBuYW1lID8gJzwnICsgbmFtZSArIChhdHRycy5sZW5ndGggPiAwID8gJyAnICsgYXR0cnMuam9pbignICcpIDogJycpICsgJz4nIDogJyc7XG4gICAgdmFyIGVuZFRhZyA9IG5hbWUgPyAnPC8nICsgbmFtZSArICc+JyA6ICcnO1xuICAgIHJldHVybiAgc3RhcnRUYWcgKyB2YWx1ZSArIGVuZFRhZztcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblNPQVAucHJvdG90eXBlLl9jcmVhdGVFbnZlbG9wZSA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgdmFyIGhlYWRlciA9IHt9O1xuICB2YXIgY29ubiA9IHRoaXMuX2Nvbm47XG4gIGlmIChjb25uLmFjY2Vzc1Rva2VuKSB7XG4gICAgaGVhZGVyLlNlc3Npb25IZWFkZXIgPSB7IHNlc3Npb25JZDogdGhpcy5fY29ubi5hY2Nlc3NUb2tlbiB9O1xuICB9XG4gIGlmIChjb25uLmNhbGxPcHRpb25zKSB7XG4gICAgaGVhZGVyLkNhbGxPcHRpb25zID0gY29ubi5jYWxsT3B0aW9ucztcbiAgfVxuICByZXR1cm4gW1xuICAgICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz4nLFxuICAgICc8c29hcGVudjpFbnZlbG9wZSB4bWxuczpzb2FwZW52PVwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS9cIicsXG4gICAgJyB4bWxuczp4c2Q9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYVwiJyxcbiAgICAnIHhtbG5zOnhzaT1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlXCI+JyxcbiAgICAnPHNvYXBlbnY6SGVhZGVyIHhtbG5zPVwiJyArIHRoaXMuX3htbG5zICsgJ1wiPicsXG4gICAgdG9YTUwoaGVhZGVyKSxcbiAgICAnPC9zb2FwZW52OkhlYWRlcj4nLFxuICAgICc8c29hcGVudjpCb2R5IHhtbG5zPVwiJyArIHRoaXMuX3htbG5zICsgJ1wiPicsXG4gICAgdG9YTUwobWVzc2FnZSksXG4gICAgJzwvc29hcGVudjpCb2R5PicsXG4gICAgJzwvc29hcGVudjpFbnZlbG9wZT4nXG4gIF0uam9pbignJyk7XG59O1xuIiwiLyoqXG4gKiBAZmlsZSBSZXByZXNlbnRzIFNhbGVzZm9yY2UgU09iamVjdFxuICogQGF1dGhvciBTaGluaWNoaSBUb21pdGEgPHNoaW5pY2hpLnRvbWl0YUBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgXyAgICAgID0gcmVxdWlyZSgnbG9kYXNoL2NvcmUnKSxcbiAgICBSZWNvcmQgPSByZXF1aXJlKCcuL3JlY29yZCcpLFxuICAgIFF1ZXJ5ICA9IHJlcXVpcmUoJy4vcXVlcnknKSxcbiAgICBDYWNoZSAgPSByZXF1aXJlKCcuL2NhY2hlJyksXG4gICAgUXVpY2tBY3Rpb24gPSByZXF1aXJlKCcuL3F1aWNrLWFjdGlvbicpO1xuXG4vKipcbiAqIEEgY2xhc3MgZm9yIG9yZ2FuaXppbmcgYWxsIFNPYmplY3QgYWNjZXNzXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBTT2JqZWN0ID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjb25uLCB0eXBlKSB7XG4gIHRoaXMuX2Nvbm4gPSBjb25uO1xuICB0aGlzLnR5cGUgPSB0eXBlO1xuICB2YXIgY2FjaGVPcHRpb25zID0geyBrZXk6IFwiZGVzY3JpYmUuXCIgKyB0aGlzLnR5cGUgfTtcbiAgdGhpcy5kZXNjcmliZSQgPSBjb25uLmNhY2hlLm1ha2VDYWNoZWFibGUodGhpcy5kZXNjcmliZSwgdGhpcywgY2FjaGVPcHRpb25zKTtcbiAgdGhpcy5kZXNjcmliZSA9IGNvbm4uY2FjaGUubWFrZVJlc3BvbnNlQ2FjaGVhYmxlKHRoaXMuZGVzY3JpYmUsIHRoaXMsIGNhY2hlT3B0aW9ucyk7XG5cbiAgY2FjaGVPcHRpb25zID0geyBrZXk6IFwibGF5b3V0cy5cIiArIHRoaXMudHlwZSB9O1xuICB0aGlzLmxheW91dHMkID0gY29ubi5jYWNoZS5tYWtlQ2FjaGVhYmxlKHRoaXMubGF5b3V0cywgdGhpcywgY2FjaGVPcHRpb25zKTtcbiAgdGhpcy5sYXlvdXRzID0gY29ubi5jYWNoZS5tYWtlUmVzcG9uc2VDYWNoZWFibGUodGhpcy5sYXlvdXRzLCB0aGlzLCBjYWNoZU9wdGlvbnMpO1xuXG4gIGNhY2hlT3B0aW9ucyA9IHsga2V5OiBcImNvbXBhY3RMYXlvdXRzLlwiICsgdGhpcy50eXBlIH07XG4gIHRoaXMuY29tcGFjdExheW91dHMkID0gY29ubi5jYWNoZS5tYWtlQ2FjaGVhYmxlKHRoaXMuY29tcGFjdExheW91dHMsIHRoaXMsIGNhY2hlT3B0aW9ucyk7XG4gIHRoaXMuY29tcGFjdExheW91dHMgPSBjb25uLmNhY2hlLm1ha2VSZXNwb25zZUNhY2hlYWJsZSh0aGlzLmNvbXBhY3RMYXlvdXRzLCB0aGlzLCBjYWNoZU9wdGlvbnMpO1xuXG4gIGNhY2hlT3B0aW9ucyA9IHsga2V5OiBcImFwcHJvdmFsTGF5b3V0cy5cIiArIHRoaXMudHlwZSB9O1xuICB0aGlzLmFwcHJvdmFsTGF5b3V0cyQgPSBjb25uLmNhY2hlLm1ha2VDYWNoZWFibGUodGhpcy5hcHByb3ZhbExheW91dHMsIHRoaXMsIGNhY2hlT3B0aW9ucyk7XG4gIHRoaXMuYXBwcm92YWxMYXlvdXRzID0gY29ubi5jYWNoZS5tYWtlUmVzcG9uc2VDYWNoZWFibGUodGhpcy5hcHByb3ZhbExheW91dHMsIHRoaXMsIGNhY2hlT3B0aW9ucyk7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgU09iamVjdCNjcmVhdGUoKVxuICpcbiAqIEBtZXRob2QgU09iamVjdCNpbnNlcnRcbiAqIEBwYXJhbSB7UmVjb3JkfEFycmF5LjxSZWNvcmQ+fSByZWNvcmRzIC0gQSByZWNvcmQgb3IgYXJyYXkgb2YgcmVjb3JkcyB0byBjcmVhdGVcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cbi8qKlxuICogQ3JlYXRlIHJlY29yZHNcbiAqXG4gKiBAbWV0aG9kIFNPYmplY3QjY3JlYXRlXG4gKiBAcGFyYW0ge1JlY29yZHxBcnJheS48UmVjb3JkPn0gcmVjb3JkcyAtIEEgcmVjb3JkIG9yIGFycmF5IG9mIHJlY29yZHMgdG8gY3JlYXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBmb3IgcmVzdCBhcGkuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fVxuICovXG5TT2JqZWN0LnByb3RvdHlwZS5pbnNlcnQgPVxuU09iamVjdC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24ocmVjb3Jkcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICByZXR1cm4gdGhpcy5fY29ubi5jcmVhdGUodGhpcy50eXBlLCByZWNvcmRzLCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHNwZWNpZmllZCByZWNvcmRzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXkuPFN0cmluZz59IGlkcyAtIEEgcmVjb3JkIElEIG9yIGFycmF5IG9mIHJlY29yZCBJRHNcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIGZvciByZXN0IGFwaS5cbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZHxBcnJheS48UmVjb3JkPj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFJlY29yZHxBcnJheS48UmVjb3JkPj59XG4gKi9cblNPYmplY3QucHJvdG90eXBlLnJldHJpZXZlID0gZnVuY3Rpb24oaWRzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIHJldHVybiB0aGlzLl9jb25uLnJldHJpZXZlKHRoaXMudHlwZSwgaWRzLCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSByZWNvcmRzXG4gKlxuICogQHBhcmFtIHtSZWNvcmR8QXJyYXkuPFJlY29yZD59IHJlY29yZHMgLSBBIHJlY29yZCBvciBhcnJheSBvZiByZWNvcmRzIHRvIHVwZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIHJlc3QgYXBpLlxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuU09iamVjdC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24ocmVjb3Jkcywgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICByZXR1cm4gdGhpcy5fY29ubi51cGRhdGUodGhpcy50eXBlLCByZWNvcmRzLCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFVwc2VydCByZWNvcmRzXG4gKlxuICogQHBhcmFtIHtSZWNvcmR8QXJyYXkuPFJlY29yZD59IHJlY29yZHMgLSBSZWNvcmQgb3IgYXJyYXkgb2YgcmVjb3JkcyB0byB1cHNlcnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHRJZEZpZWxkIC0gRXh0ZXJuYWwgSUQgZmllbGQgbmFtZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIHJlc3QgYXBpLlxuICogQHBhcmFtIHtDYWxsYmFjay48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48UmVjb3JkUmVzdWx0fEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn1cbiAqL1xuU09iamVjdC5wcm90b3R5cGUudXBzZXJ0ID0gZnVuY3Rpb24ocmVjb3JkcywgZXh0SWRGaWVsZCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICByZXR1cm4gdGhpcy5fY29ubi51cHNlcnQodGhpcy50eXBlLCByZWNvcmRzLCBleHRJZEZpZWxkLCBvcHRpb25zLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgU09iamVjdCNkZXN0cm95KClcbiAqXG4gKiBAbWV0aG9kIFNPYmplY3QjZGVsZXRlXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheS48U3RyaW5nPn0gaWRzIC0gQSBJRCBvciBhcnJheSBvZiBJRHMgdG8gZGVsZXRlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fVxuICovXG4vKipcbiAqIFN5bm9ueW0gb2YgU09iamVjdCNkZXN0cm95KClcbiAqXG4gKiBAbWV0aG9kIFNPYmplY3QjZGVsXG4gKiBAcGFyYW0ge1N0cmluZ3xBcnJheS48U3RyaW5nPn0gaWRzIC0gQSBJRCBvciBhcnJheSBvZiBJRHMgdG8gZGVsZXRlXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxSZWNvcmRSZXN1bHR8QXJyYXkuPFJlY29yZFJlc3VsdD4+fVxuICovXG4vKipcbiAqIERlbGV0ZSByZWNvcmRzXG4gKlxuICogQG1ldGhvZCBTT2JqZWN0I2Rlc3Ryb3lcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5LjxTdHJpbmc+fSBpZHMgLSBBIElEIG9yIGFycmF5IG9mIElEcyB0byBkZWxldGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBPcHRpb25zIGZvciByZXN0IGFwaS5cbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFJlY29yZFJlc3VsdHxBcnJheS48UmVjb3JkUmVzdWx0Pj59XG4gKi9cblNPYmplY3QucHJvdG90eXBlW1wiZGVsZXRlXCJdID1cblNPYmplY3QucHJvdG90eXBlLmRlbCA9XG5TT2JqZWN0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oaWRzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIHJldHVybiB0aGlzLl9jb25uLmRlc3Ryb3kodGhpcy50eXBlLCBpZHMsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogRGVzY3JpYmUgU09iamVjdCBtZXRhZGF0YVxuICpcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPERlc2NyaWJlU09iamVjdFJlc3VsdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPERlc2NyaWJlU09iamVjdFJlc3VsdD59XG4gKi9cblNPYmplY3QucHJvdG90eXBlLmRlc2NyaWJlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4uZGVzY3JpYmUodGhpcy50eXBlLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEdldCByZWNvcmQgcmVwcmVzZW50YXRpb24gaW5zdGFuY2UgYnkgZ2l2ZW4gaWRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBBIHJlY29yZCBJRFxuICogQHJldHVybnMge1JlY29yZFJlZmVyZW5jZX1cbiAqL1xuU09iamVjdC5wcm90b3R5cGUucmVjb3JkID0gZnVuY3Rpb24oaWQpIHtcbiAgcmV0dXJuIG5ldyBSZWNvcmQodGhpcy5fY29ubiwgdGhpcy50eXBlLCBpZCk7XG59O1xuXG4vKipcbiAqIEZpbmQgYW5kIGZldGNoIHJlY29yZHMgd2hpY2ggbWF0Y2hlcyBnaXZlbiBjb25kaXRpb25zXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBbY29uZGl0aW9uc10gLSBDb25kaXRpb25zIGluIEpTT04gb2JqZWN0IChNb25nb0RCLWxpa2UpLCBvciByYXcgU09RTCBXSEVSRSBjbGF1c2Ugc3RyaW5nLlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXkuPFN0cmluZz58U3RyaW5nfSBbZmllbGRzXSAtIEZpZWxkcyB0byBmZXRjaC4gRm9ybWF0IGNhbiBiZSBpbiBKU09OIG9iamVjdCAoTW9uZ29EQi1saWtlKSwgYXJyYXkgb2YgZmllbGQgbmFtZXMsIG9yIGNvbW1hLXNlcGFyYXRlZCBmaWVsZCBuYW1lcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBRdWVyeSBvcHRpb25zLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLmxpbWl0XSAtIE1heGltdW0gbnVtYmVyIG9mIHJlY29yZHMgdGhlIHF1ZXJ5IHdpbGwgcmV0dXJuLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLm9mZnNldF0gLSBPZmZzZXQgbnVtYmVyIHdoZXJlIGJlZ2lucyByZXR1cm5pbmcgcmVzdWx0cy5cbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5za2lwXSAtIFN5bm9ueW0gb2Ygb3B0aW9ucy5vZmZzZXQuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkPj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1F1ZXJ5LjxBcnJheS48UmVjb3JkPj59XG4gKi9cblNPYmplY3QucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbihjb25kaXRpb25zLCBmaWVsZHMsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICh0eXBlb2YgY29uZGl0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gY29uZGl0aW9ucztcbiAgICBjb25kaXRpb25zID0ge307XG4gICAgZmllbGRzID0gbnVsbDtcbiAgICBvcHRpb25zID0gbnVsbDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZmllbGRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBmaWVsZHM7XG4gICAgZmllbGRzID0gbnVsbDtcbiAgICBvcHRpb25zID0gbnVsbDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICBvcHRpb25zID0gbnVsbDtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBmaWVsZHM6IGZpZWxkcyxcbiAgICBpbmNsdWRlczogb3B0aW9ucy5pbmNsdWRlcyxcbiAgICB0YWJsZTogdGhpcy50eXBlLFxuICAgIGNvbmRpdGlvbnM6IGNvbmRpdGlvbnMsXG4gICAgbGltaXQ6IG9wdGlvbnMubGltaXQsXG4gICAgc29ydDogb3B0aW9ucy5zb3J0LFxuICAgIG9mZnNldDogb3B0aW9ucy5vZmZzZXQgfHwgb3B0aW9ucy5za2lwXG4gIH07XG4gIHZhciBxdWVyeSA9IG5ldyBRdWVyeSh0aGlzLl9jb25uLCBjb25maWcsIG9wdGlvbnMpO1xuICBxdWVyeS5zZXRSZXNwb25zZVRhcmdldChRdWVyeS5SZXNwb25zZVRhcmdldHMuUmVjb3Jkcyk7XG4gIGlmIChjYWxsYmFjaykgeyBxdWVyeS5ydW4oY2FsbGJhY2spOyB9XG4gIHJldHVybiBxdWVyeTtcbn07XG5cbi8qKlxuICogRmV0Y2ggb25lIHJlY29yZCB3aGljaCBtYXRjaGVzIGdpdmVuIGNvbmRpdGlvbnNcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IFtjb25kaXRpb25zXSAtIENvbmRpdGlvbnMgaW4gSlNPTiBvYmplY3QgKE1vbmdvREItbGlrZSksIG9yIHJhdyBTT1FMIFdIRVJFIGNsYXVzZSBzdHJpbmcuXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheS48U3RyaW5nPnxTdHJpbmd9IFtmaWVsZHNdIC0gRmllbGRzIHRvIGZldGNoLiBGb3JtYXQgY2FuIGJlIGluIEpTT04gb2JqZWN0IChNb25nb0RCLWxpa2UpLCBhcnJheSBvZiBmaWVsZCBuYW1lcywgb3IgY29tbWEtc2VwYXJhdGVkIGZpZWxkIG5hbWVzLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIFF1ZXJ5IG9wdGlvbnMuXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMubGltaXRdIC0gTWF4aW11bSBudW1iZXIgb2YgcmVjb3JkcyB0aGUgcXVlcnkgd2lsbCByZXR1cm4uXG4gKiBAcGFyYW0ge051bWJlcn0gW29wdGlvbnMub2Zmc2V0XSAtIE9mZnNldCBudW1iZXIgd2hlcmUgYmVnaW5zIHJldHVybmluZyByZXN1bHRzLlxuICogQHBhcmFtIHtOdW1iZXJ9IFtvcHRpb25zLnNraXBdIC0gU3lub255bSBvZiBvcHRpb25zLm9mZnNldC5cbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFJlY29yZD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1F1ZXJ5LjxSZWNvcmQ+fVxuICovXG5TT2JqZWN0LnByb3RvdHlwZS5maW5kT25lID0gZnVuY3Rpb24oY29uZGl0aW9ucywgZmllbGRzLCBvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIGNvbmRpdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IGNvbmRpdGlvbnM7XG4gICAgY29uZGl0aW9ucyA9IHt9O1xuICAgIGZpZWxkcyA9IG51bGw7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNhbGxiYWNrID0gZmllbGRzO1xuICAgIGZpZWxkcyA9IG51bGw7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH1cbiAgb3B0aW9ucyA9IF8uZXh0ZW5kKG9wdGlvbnMgfHwge30sIHsgbGltaXQ6IDEgfSk7XG4gIHZhciBxdWVyeSA9IHRoaXMuZmluZChjb25kaXRpb25zLCBmaWVsZHMsIG9wdGlvbnMpO1xuICBxdWVyeS5zZXRSZXNwb25zZVRhcmdldChRdWVyeS5SZXNwb25zZVRhcmdldHMuU2luZ2xlUmVjb3JkKTtcbiAgaWYgKGNhbGxiYWNrKSB7IHF1ZXJ5LnJ1bihjYWxsYmFjayk7IH1cbiAgcmV0dXJuIHF1ZXJ5O1xufTtcblxuLyoqXG4gKiBGaW5kIGFuZCBmZXRjaCByZWNvcmRzIG9ubHkgYnkgc3BlY2lmeWluZyBmaWVsZHMgdG8gZmV0Y2guXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXkuPFN0cmluZz58U3RyaW5nfSBbZmllbGRzXSAtIEZpZWxkcyB0byBmZXRjaC4gRm9ybWF0IGNhbiBiZSBpbiBKU09OIG9iamVjdCAoTW9uZ29EQi1saWtlKSwgYXJyYXkgb2YgZmllbGQgbmFtZXMsIG9yIGNvbW1hLXNlcGFyYXRlZCBmaWVsZCBuYW1lcy5cbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxSZWNvcmQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UXVlcnkuPEFycmF5LjxSZWNvcmQ+Pn1cbiAqL1xuU09iamVjdC5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oZmllbGRzLCBjYWxsYmFjaykge1xuICByZXR1cm4gdGhpcy5maW5kKG51bGwsIGZpZWxkcywgbnVsbCwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBDb3VudCBudW0gb2YgcmVjb3JkcyB3aGljaCBtYXRjaGVzIGdpdmVuIGNvbmRpdGlvbnNcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IFtjb25kaXRpb25zXSAtIENvbmRpdGlvbnMgaW4gSlNPTiBvYmplY3QgKE1vbmdvREItbGlrZSksIG9yIHJhdyBTT1FMIFdIRVJFIGNsYXVzZSBzdHJpbmcuXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxOdW1iZXI+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtRdWVyeS48TnVtYmVyPn1cbiAqL1xuU09iamVjdC5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbihjb25kaXRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIGNvbmRpdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IGNvbmRpdGlvbnM7XG4gICAgY29uZGl0aW9ucyA9IHt9O1xuICB9XG4gIHZhciBxdWVyeSA9IHRoaXMuZmluZChjb25kaXRpb25zLCB7IFwiY291bnQoKVwiIDogdHJ1ZSB9KTtcbiAgcXVlcnkuc2V0UmVzcG9uc2VUYXJnZXQoXCJDb3VudFwiKTtcbiAgaWYgKGNhbGxiYWNrKSB7IHF1ZXJ5LnJ1bihjYWxsYmFjayk7IH1cbiAgcmV0dXJuIHF1ZXJ5O1xufTtcblxuXG4vKipcbiAqIENhbGwgQnVsayNsb2FkKCkgdG8gZXhlY3V0ZSBidWxrbG9hZCwgcmV0dXJuaW5nIGJhdGNoIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBvcGVyYXRpb24gLSBCdWxrIGxvYWQgb3BlcmF0aW9uICgnaW5zZXJ0JywgJ3VwZGF0ZScsICd1cHNlcnQnLCAnZGVsZXRlJywgb3IgJ2hhcmREZWxldGUnKVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIE9wdGlvbnMgZm9yIGJ1bGsgbG9hZGluZyBvcGVyYXRpb25cbiAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5leHRJZEZpZWxkXSAtIEV4dGVybmFsIElEIGZpZWxkIG5hbWUgKHVzZWQgd2hlbiB1cHNlcnQgb3BlcmF0aW9uKS5cbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJ1bGtsb2FkLiBBY2NlcHRzIGFycmF5IG9mIHJlY29yZHMsIENTdiBzdHJpbmcsIGFuZCBDU1YgZGF0YSBpbnB1dCBzdHJlYW0uXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0J1bGt+QmF0Y2h9XG4gKi9cblNPYmplY3QucHJvdG90eXBlLmJ1bGtsb2FkID0gZnVuY3Rpb24ob3BlcmF0aW9uLCBvcHRpb25zLCBpbnB1dCwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4uYnVsay5sb2FkKHRoaXMudHlwZSwgb3BlcmF0aW9uLCBvcHRpb25zLCBpbnB1dCwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBTeW5vbnltIG9mIFNPYmplY3QjY3JlYXRlQnVsaygpXG4gKlxuICogQG1ldGhvZCBTT2JqZWN0I2luc2VydEJ1bGtcbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJ1bGsgaW5zZXJ0LiBBY2NlcHRzIGFycmF5IG9mIHJlY29yZHMsIENTdiBzdHJpbmcsIGFuZCBDU1YgZGF0YSBpbnB1dCBzdHJlYW0uXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0J1bGt+QmF0Y2h9XG4gKi9cbi8qKlxuICogQnVsa2x5IGluc2VydCBpbnB1dCBkYXRhIHVzaW5nIGJ1bGsgQVBJXG4gKlxuICogQG1ldGhvZCBTT2JqZWN0I2NyZWF0ZUJ1bGtcbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJ1bGsgaW5zZXJ0LiBBY2NlcHRzIGFycmF5IG9mIHJlY29yZHMsIENTdiBzdHJpbmcsIGFuZCBDU1YgZGF0YSBpbnB1dCBzdHJlYW0uXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0J1bGt+QmF0Y2h9XG4gKi9cblNPYmplY3QucHJvdG90eXBlLmluc2VydEJ1bGsgPVxuU09iamVjdC5wcm90b3R5cGUuY3JlYXRlQnVsayA9IGZ1bmN0aW9uKGlucHV0LCBjYWxsYmFjaykge1xuICByZXR1cm4gdGhpcy5idWxrbG9hZChcImluc2VydFwiLCBpbnB1dCwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBCdWxrbHkgdXBkYXRlIHJlY29yZHMgYnkgaW5wdXQgZGF0YSB1c2luZyBidWxrIEFQSVxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJ1bGsgdXBkYXRlIEFjY2VwdHMgYXJyYXkgb2YgcmVjb3JkcywgQ1N2IHN0cmluZywgYW5kIENTViBkYXRhIGlucHV0IHN0cmVhbS5cbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVsa35CYXRjaH1cbiAqL1xuU09iamVjdC5wcm90b3R5cGUudXBkYXRlQnVsayA9IGZ1bmN0aW9uKGlucHV0LCBjYWxsYmFjaykge1xuICByZXR1cm4gdGhpcy5idWxrbG9hZChcInVwZGF0ZVwiLCBpbnB1dCwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBCdWxrbHkgdXBzZXJ0IHJlY29yZHMgYnkgaW5wdXQgZGF0YSB1c2luZyBidWxrIEFQSVxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJ1bGsgdXBzZXJ0LiBBY2NlcHRzIGFycmF5IG9mIHJlY29yZHMsIENTdiBzdHJpbmcsIGFuZCBDU1YgZGF0YSBpbnB1dCBzdHJlYW0uXG4gKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMuZXh0SWRGaWVsZF0gLSBFeHRlcm5hbCBJRCBmaWVsZCBuYW1lXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0J1bGt+QmF0Y2h9XG4gKi9cblNPYmplY3QucHJvdG90eXBlLnVwc2VydEJ1bGsgPSBmdW5jdGlvbihpbnB1dCwgZXh0SWRGaWVsZCwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuYnVsa2xvYWQoXCJ1cHNlcnRcIiwgeyBleHRJZEZpZWxkOiBleHRJZEZpZWxkIH0sIGlucHV0LCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgU09iamVjdCNkZXN0cm95QnVsaygpXG4gKlxuICogQG1ldGhvZCBTT2JqZWN0I2RlbGV0ZUJ1bGtcbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJ1bGsgZGVsZXRlLiBBY2NlcHRzIGFycmF5IG9mIHJlY29yZHMsIENTdiBzdHJpbmcsIGFuZCBDU1YgZGF0YSBpbnB1dCBzdHJlYW0uXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0J1bGt+QmF0Y2h9XG4gKi9cbi8qKlxuICogQnVsa2x5IGRlbGV0ZSByZWNvcmRzIHNwZWNpZmllZCBieSBpbnB1dCBkYXRhIHVzaW5nIGJ1bGsgQVBJXG4gKlxuICogQG1ldGhvZCBTT2JqZWN0I2Rlc3Ryb3lCdWxrXG4gKiBAcGFyYW0ge0FycmF5LjxSZWNvcmQ+fHN0cmVhbS5TdHJlYW18U3RyaW5nfSBbaW5wdXRdIC0gSW5wdXQgc291cmNlIGZvciBidWxrIGRlbGV0ZS4gQWNjZXB0cyBhcnJheSBvZiByZWNvcmRzLCBDU3Ygc3RyaW5nLCBhbmQgQ1NWIGRhdGEgaW5wdXQgc3RyZWFtLlxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPFJlY29yZFJlc3VsdD4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtCdWxrfkJhdGNofVxuICovXG5TT2JqZWN0LnByb3RvdHlwZS5kZWxldGVCdWxrID1cblNPYmplY3QucHJvdG90eXBlLmRlc3Ryb3lCdWxrID0gZnVuY3Rpb24oaW5wdXQsIGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLmJ1bGtsb2FkKFwiZGVsZXRlXCIsIGlucHV0LCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFN5bm9ueW0gb2YgU09iamVjdCNkZXN0cm95SGFyZEJ1bGsoKVxuICpcbiAqIEBtZXRob2QgU09iamVjdCNkZWxldGVIYXJkQnVsa1xuICogQHBhcmFtIHtBcnJheS48UmVjb3JkPnxzdHJlYW0uU3RyZWFtfFN0cmluZ30gW2lucHV0XSAtIElucHV0IHNvdXJjZSBmb3IgYnVsayBkZWxldGUuIEFjY2VwdHMgYXJyYXkgb2YgcmVjb3JkcywgQ1N2IHN0cmluZywgYW5kIENTViBkYXRhIGlucHV0IHN0cmVhbS5cbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7QnVsa35CYXRjaH1cbiAqL1xuLyoqXG4gKiBCdWxrbHkgaGFyZCBkZWxldGUgcmVjb3JkcyBzcGVjaWZpZWQgaW4gaW5wdXQgZGF0YSB1c2luZyBidWxrIEFQSVxuICpcbiAqIEBtZXRob2QgU09iamVjdCNkZXN0cm95SGFyZEJ1bGtcbiAqIEBwYXJhbSB7QXJyYXkuPFJlY29yZD58c3RyZWFtLlN0cmVhbXxTdHJpbmd9IFtpbnB1dF0gLSBJbnB1dCBzb3VyY2UgZm9yIGJ1bGsgZGVsZXRlLiBBY2NlcHRzIGFycmF5IG9mIHJlY29yZHMsIENTdiBzdHJpbmcsIGFuZCBDU1YgZGF0YSBpbnB1dCBzdHJlYW0uXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxBcnJheS48UmVjb3JkUmVzdWx0Pj59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge0J1bGt+QmF0Y2h9XG4gKi9cblNPYmplY3QucHJvdG90eXBlLmRlbGV0ZUhhcmRCdWxrID1cblNPYmplY3QucHJvdG90eXBlLmRlc3Ryb3lIYXJkQnVsayA9IGZ1bmN0aW9uKGlucHV0LCBjYWxsYmFjaykge1xuICByZXR1cm4gdGhpcy5idWxrbG9hZChcImhhcmREZWxldGVcIiwgaW5wdXQsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgcmVjZW50bHkgYWNjZXNzZWQgcmVjb3Jkc1xuICpcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPEFycmF5LjxSZWNvcmRSZXN1bHQ+Pn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QXJyYXkuPFJlY29yZFJlc3VsdD4+fVxuICovXG5TT2JqZWN0LnByb3RvdHlwZS5yZWNlbnQgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVjZW50KHRoaXMudHlwZSwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgdXBkYXRlZCByZWNvcmRzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8RGF0ZX0gc3RhcnQgLSBzdGFydCBkYXRlIG9yIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHN0YXJ0IG9mIHRoZSBpbnRlcnZhbFxuICogQHBhcmFtIHtTdHJpbmd8RGF0ZX0gZW5kIC0gc3RhcnQgZGF0ZSBvciBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBlbmQgb2YgdGhlIGludGVydmFsLCBtdXN0IGJlID4gc3RhcnRcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPFVwZGF0ZWRSZWNvcmRzSW5mbz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPFVwZGF0ZWRSZWNvcmRzSW5mbz59XG4gKi9cblNPYmplY3QucHJvdG90eXBlLnVwZGF0ZWQgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCwgY2FsbGJhY2spIHtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4udXBkYXRlZCh0aGlzLnR5cGUsIHN0YXJ0LCBlbmQsIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIGRlbGV0ZWQgcmVjb3Jkc1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfERhdGV9IHN0YXJ0IC0gc3RhcnQgZGF0ZSBvciBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBvZiB0aGUgaW50ZXJ2YWxcbiAqIEBwYXJhbSB7U3RyaW5nfERhdGV9IGVuZCAtIHN0YXJ0IGRhdGUgb3Igc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZW5kIG9mIHRoZSBpbnRlcnZhbCwgbXVzdCBiZSA+IHN0YXJ0XG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxEZWxldGVkUmVjb3Jkc0luZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxEZWxldGVkUmVjb3Jkc0luZm8+fVxuICovXG5TT2JqZWN0LnByb3RvdHlwZS5kZWxldGVkID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQsIGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9jb25uLmRlbGV0ZWQodGhpcy50eXBlLCBzdGFydCwgZW5kLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExheW91dEluZm9cbiAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gbGF5b3V0cyAtIEFycmF5IG9mIGxheW91dHNcbiAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gcmVjb3JkVHlwZU1hcHBpbmdzIC0gQXJyYXkgb2YgcmVjb3JkIHR5cGUgbWFwcGluZ3NcbiAqL1xuLyoqXG4gKiBEZXNjcmliZSBsYXlvdXQgaW5mb3JtYXRpb24gZm9yIFNPYmplY3RcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gW2xheW91dE5hbWVdIC0gTmFtZSBvZiBuYW1lZCBsYXlvdXQuIChlLmcuIFVzZXJBbHQgaW4gVXNlciBTT2JqZWN0KVxuICogQHBhcmFtIHtDYWxsYmFjay48TGF5b3V0SW5mbz59IFtjYWxsYmFja10gLSBDYWxsYmFjayBmdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPExheW91dEluZm8+fVxuICovXG5TT2JqZWN0LnByb3RvdHlwZS5sYXlvdXRzID0gZnVuY3Rpb24obGF5b3V0TmFtZSwgY2FsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBsYXlvdXROYW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2FsbGJhY2sgPSBsYXlvdXROYW1lO1xuICAgIGxheW91dE5hbWUgPSBudWxsO1xuICB9XG4gIHZhciB1cmwgPSBcIi9zb2JqZWN0cy9cIiArIHRoaXMudHlwZSArIFwiL2Rlc2NyaWJlL1wiICsgKGxheW91dE5hbWUgPyBcIm5hbWVkTGF5b3V0cy9cIitsYXlvdXROYW1lIDogXCJsYXlvdXRzXCIpO1xuICByZXR1cm4gdGhpcy5fY29ubi5yZXF1ZXN0KHVybCwgY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDb21wYWN0TGF5b3V0SW5mb1xuICogQHByb3Age0FycmF5LjxPYmplY3Q+fSBjb21wYWN0TGF5b3V0cyAtIEFycmF5IG9mIGNvbXBhY3QgbGF5b3V0c1xuICogQHByb3Age1N0cmluZ30gZGVmYXVsdENvbXBhY3RMYXlvdXRJZCAtIElEIG9mIGRlZmF1bHQgY29tcGFjdCBsYXlvdXRcbiAqIEBwcm9wIHtBcnJheS48T2JqZWN0Pn0gcmVjb3JkVHlwZUNvbXBhY3RMYXlvdXRNYXBwaW5ncyAtIEFycmF5IG9mIHJlY29yZCB0eXBlIG1hcHBpbmdzXG4gKi9cbi8qKlxuICogRGVzY3JpYmUgY29tcGFjdCBsYXlvdXQgaW5mb3JtYXRpb24gZGVmaW5lZCBmb3IgU09iamVjdFxuICpcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPENvbXBhY3RMYXlvdXRJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48Q29tcGFjdExheW91dEluZm8+fVxuICovXG5TT2JqZWN0LnByb3RvdHlwZS5jb21wYWN0TGF5b3V0cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSBcIi9zb2JqZWN0cy9cIiArIHRoaXMudHlwZSArIFwiL2Rlc2NyaWJlL2NvbXBhY3RMYXlvdXRzXCI7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QodXJsLCBjYWxsYmFjayk7XG59O1xuXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQXBwcm92YWxMYXlvdXRJbmZvXG4gKiBAcHJvcCB7QXJyYXkuPE9iamVjdD59IGFwcHJvdmFsTGF5b3V0cyAtIEFycmF5IG9mIGFwcHJvdmFsIGxheW91dHNcbiAqL1xuLyoqXG4gKiBEZXNjcmliZSBjb21wYWN0IGxheW91dCBpbmZvcm1hdGlvbiBkZWZpbmVkIGZvciBTT2JqZWN0XG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48QXBwcm92YWxMYXlvdXRJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48QXBwcm92YWxMYXlvdXRJbmZvPn1cbiAqL1xuU09iamVjdC5wcm90b3R5cGUuYXBwcm92YWxMYXlvdXRzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHVybCA9IFwiL3NvYmplY3RzL1wiICsgdGhpcy50eXBlICsgXCIvZGVzY3JpYmUvYXBwcm92YWxMYXlvdXRzXCI7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QodXJsLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGxpc3Qgb2YgbGlzdCB2aWV3cyBmb3IgdGhlIFNPYmplY3RcbiAqXG4gKiBAcGFyYW0ge0NhbGxiYWNrLjxMaXN0Vmlld3NJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TGlzdFZpZXdzSW5mbz59XG4gKi9cblNPYmplY3QucHJvdG90eXBlLmxpc3R2aWV3cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSB0aGlzLl9jb25uLl9iYXNlVXJsKCkgKyAnL3NvYmplY3RzLycgKyB0aGlzLnR5cGUgKyAnL2xpc3R2aWV3cyc7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QodXJsLCBjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGxpc3QgdmlldyBpbmZvIGluIHNwZWNpZmVkIHZpZXcgaWRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBMaXN0IHZpZXcgSURcbiAqIEByZXR1cm5zIHtMaXN0Vmlld31cbiAqL1xuU09iamVjdC5wcm90b3R5cGUubGlzdHZpZXcgPSBmdW5jdGlvbihpZCkge1xuICByZXR1cm4gbmV3IExpc3RWaWV3KHRoaXMuX2Nvbm4sIHRoaXMudHlwZSwgaWQpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFsbCByZWdpc3RlcmVkIHF1aWNrIGFjdGlvbnMgZm9yIHRoZSBTT2JqZWN0XG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48QXJyYXkuPFF1aWNrQWN0aW9uflF1aWNrQWN0aW9uSW5mbz4+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxBcnJheS48UXVpY2tBY3Rpb25+UXVpY2tBY3Rpb25JbmZvPj59XG4gKi9cblNPYmplY3QucHJvdG90eXBlLnF1aWNrQWN0aW9ucyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QoXCIvc29iamVjdHMvXCIgKyB0aGlzLnR5cGUgKyBcIi9xdWlja0FjdGlvbnNcIikudGhlbkNhbGwoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBHZXQgcmVmZXJlbmNlIGZvciBzcGVjaWZpZWQgcXVpY2sgYWNpdG9uIGluIHRoZSBTT2JqZWN0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvbk5hbWUgLSBOYW1lIG9mIHRoZSBxdWljayBhY3Rpb25cbiAqIEByZXR1cm5zIHtRdWlja0FjdGlvbn1cbiAqL1xuU09iamVjdC5wcm90b3R5cGUucXVpY2tBY3Rpb24gPSBmdW5jdGlvbihhY3Rpb25OYW1lKSB7XG4gIHJldHVybiBuZXcgUXVpY2tBY3Rpb24odGhpcy5fY29ubiwgXCIvc29iamVjdHMvXCIgKyB0aGlzLnR5cGUgKyBcIi9xdWlja0FjdGlvbnMvXCIgKyBhY3Rpb25OYW1lKTtcbn07XG5cblxuLyoqXG4gKiBBIGNsYXNzIGZvciBvcmdhbml6aW5nIGxpc3QgdmlldyBpbmZvcm1hdGlvblxuICpcbiAqIEBwcm90ZWN0ZWRcbiAqIEBjbGFzcyBMaXN0Vmlld1xuICogQHBhcmFtIHtDb25uZWN0aW9ufSBjb25uIC0gQ29ubmVjdGlvbiBpbnN0YW5jZVxuICogQHBhcmFtIHtTT2JqZWN0fSB0eXBlIC0gU09iamVjdCB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaWQgLSBMaXN0IHZpZXcgSURcbiAqL1xudmFyIExpc3RWaWV3ID0gZnVuY3Rpb24oY29ubiwgdHlwZSwgaWQpIHtcbiAgdGhpcy5fY29ubiA9IGNvbm47XG4gIHRoaXMudHlwZSA9IHR5cGU7XG4gIHRoaXMuaWQgPSBpZDtcbn07XG5cbi8qKlxuICogRXhlY3V0ZXMgcXVlcnkgZm9yIHRoZSBsaXN0IHZpZXcgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBkYXRhIGFuZCBwcmVzZW50YXRpb24gaW5mb3JtYXRpb24uXG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48TGlzdFZpZXdSZXN1bHRJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TGlzdFZpZXdSZXN1bHRJbmZvPn1cbiAqL1xuTGlzdFZpZXcucHJvdG90eXBlLnJlc3VsdHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICB2YXIgdXJsID0gIHRoaXMuX2Nvbm4uX2Jhc2VVcmwoKSArICcvc29iamVjdHMvJyArIHRoaXMudHlwZSArICcvbGlzdHZpZXdzLycgKyB0aGlzLmlkICsgJy9yZXN1bHRzJztcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwsIGNhbGxiYWNrKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm5zIGRldGFpbGVkIGluZm9ybWF0aW9uIGFib3V0IGEgbGlzdCB2aWV3XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIElkZW50aXR5IGNhbGwgb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmhlYWRlcnNdIC0gQWRkaXRpb25hbCBIVFRQIHJlcXVlc3QgaGVhZGVycyBzZW50IGluIGlkZW50aXR5IHJlcXVlc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPExpc3RWaWV3RGVzY3JpYmVJbmZvPn0gW2NhbGxiYWNrXSAtIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48TGlzdFZpZXdEZXNjcmliZUluZm8+fVxuICovXG5MaXN0Vmlldy5wcm90b3R5cGUuZGVzY3JpYmUgPSBmdW5jdGlvbihvcHRpb25zLCBjYWxsYmFjaykge1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdXJsID0gIHRoaXMuX2Nvbm4uX2Jhc2VVcmwoKSArICcvc29iamVjdHMvJyArIHRoaXMudHlwZSArICcvbGlzdHZpZXdzLycgKyB0aGlzLmlkICsgJy9kZXNjcmliZSc7XG4gIHJldHVybiB0aGlzLl9jb25uLnJlcXVlc3QoeyBtZXRob2Q6ICdHRVQnLCB1cmw6IHVybCwgaGVhZGVyczogb3B0aW9ucy5oZWFkZXJzIH0sIGNhbGxiYWNrKTtcbn07XG5cbi8qKlxuICogRXhwbGFpbiBwbGFuIGZvciBleGVjdXRpbmcgbGlzdCB2aWV3XG4gKlxuICogQHBhcmFtIHtDYWxsYmFjay48RXhwbGFpbkluZm8+fSBbY2FsbGJhY2tdIC0gQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxFeHBsYWluSW5mbz59XG4gKi9cbkxpc3RWaWV3LnByb3RvdHlwZS5leHBsYWluID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIHVybCA9IFwiL3F1ZXJ5Lz9leHBsYWluPVwiICsgdGhpcy5pZDtcbiAgcmV0dXJuIHRoaXMuX2Nvbm4ucmVxdWVzdCh1cmwsIGNhbGxiYWNrKTtcbn07XG4iLCIvKipcbiAqIEBmaWxlIENyZWF0ZSBhbmQgYnVpbGQgU09RTCBzdHJpbmcgZnJvbSBjb25maWd1cmF0aW9uXG4gKiBAYXV0aG9yIFNoaW5pY2hpIFRvbWl0YSA8c2hpbmljaGkudG9taXRhQGdtYWlsLmNvbT5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfICAgICAgPSByZXF1aXJlKCdsb2Rhc2gvY29yZScpLFxuICAgIFNmRGF0ZSA9IHJlcXVpcmUoXCIuL2RhdGVcIik7XG5cblxuLyoqXG4gKiBDcmVhdGUgU09RTFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlU09RTChxdWVyeSkge1xuICB2YXIgc29xbCA9IFtcbiAgICBcIlNFTEVDVCBcIixcbiAgICBjcmVhdGVGaWVsZHNDbGF1c2UocXVlcnkuZmllbGRzLCBxdWVyeS5pbmNsdWRlcyksXG4gICAgXCIgRlJPTSBcIixcbiAgICBxdWVyeS50YWJsZVxuICBdLmpvaW4oXCJcIik7XG4gIHZhciBjb25kID0gY3JlYXRlQ29uZGl0aW9uQ2xhdXNlKHF1ZXJ5LmNvbmRpdGlvbnMpO1xuICBpZiAoY29uZCkge1xuICAgIHNvcWwgKz0gXCIgV0hFUkUgXCIgKyBjb25kO1xuICB9XG4gIHZhciBvcmRlcmJ5ID0gY3JlYXRlT3JkZXJCeUNsYXVzZShxdWVyeS5zb3J0KTtcbiAgaWYgKG9yZGVyYnkpIHtcbiAgICBzb3FsICs9IFwiIE9SREVSIEJZIFwiICsgb3JkZXJieTtcbiAgfVxuICBpZiAocXVlcnkubGltaXQpIHtcbiAgICBzb3FsICs9IFwiIExJTUlUIFwiICsgcXVlcnkubGltaXQ7XG4gIH1cbiAgaWYgKHF1ZXJ5Lm9mZnNldCkge1xuICAgIHNvcWwgKz0gXCIgT0ZGU0VUIFwiICsgcXVlcnkub2Zmc2V0O1xuICB9XG4gIHJldHVybiBzb3FsO1xufVxuXG4vKiogQHByaXZhdGUgKiovXG5mdW5jdGlvbiBjcmVhdGVGaWVsZHNDbGF1c2UoZmllbGRzLCBjaGlsZFF1ZXJpZXMpIHtcbiAgY2hpbGRRdWVyaWVzID0gXy5tYXAoXy52YWx1ZXMoY2hpbGRRdWVyaWVzIHx8IHt9KSwgZnVuY3Rpb24oY3F1ZXJ5KSB7XG4gICAgcmV0dXJuICcoJyArIGNyZWF0ZVNPUUwoY3F1ZXJ5KSArICcpJztcbiAgfSk7XG4gIHJldHVybiAoZmllbGRzIHx8IFsgXCJJZFwiIF0pLmNvbmNhdChjaGlsZFF1ZXJpZXMpLmpvaW4oJywgJyk7XG59XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGNyZWF0ZUNvbmRpdGlvbkNsYXVzZShjb25kaXRpb25zLCBvcGVyYXRvciwgZGVwdGgpIHtcbiAgaWYgKF8uaXNTdHJpbmcoY29uZGl0aW9ucykpIHtcbiAgICByZXR1cm4gY29uZGl0aW9ucztcbiAgfVxuICBjb25kaXRpb25zID0gY29uZGl0aW9ucyB8fCBbXTtcbiAgb3BlcmF0b3IgPSBvcGVyYXRvciB8fCBcIkFORFwiO1xuICBkZXB0aCA9IGRlcHRoIHx8IDA7XG4gIGlmICghaXNBcnJheShjb25kaXRpb25zKSkgeyAvLyBpZiBwYXNzZWQgaW4gaGFzaCBvYmplY3RcbiAgICBjb25kaXRpb25zID0gXy5rZXlzKGNvbmRpdGlvbnMpLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleToga2V5LFxuICAgICAgICB2YWx1ZTogY29uZGl0aW9uc1trZXldXG4gICAgICB9O1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGNvbmRpdGlvbnMgPSBjb25kaXRpb25zLm1hcChmdW5jdGlvbihjb25kKSB7XG4gICAgICB2YXIgY29uZHMgPSBbXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBjb25kKSB7XG4gICAgICAgIGNvbmRzLnB1c2goe1xuICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgIHZhbHVlOiBjb25kW2tleV1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29uZHMubGVuZ3RoPjEgPyBjb25kcyA6IGNvbmRzWzBdO1xuICAgIH0pO1xuICB9XG4gIGNvbmRpdGlvbnMgPSBjb25kaXRpb25zLm1hcChmdW5jdGlvbihjb25kKSB7XG4gICAgdmFyIGQgPSBkZXB0aCsxLCBvcDtcbiAgICBzd2l0Y2ggKGNvbmQua2V5KSB7XG4gICAgICBjYXNlIFwiJG9yXCIgOlxuICAgICAgY2FzZSBcIiRhbmRcIiA6XG4gICAgICBjYXNlIFwiJG5vdFwiIDpcbiAgICAgICAgaWYgKG9wZXJhdG9yICE9PSBcIk5PVFwiICYmIGNvbmRpdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgZCA9IGRlcHRoOyAvLyBub3QgY2hhbmdlIHRyZWUgZGVwdGhcbiAgICAgICAgfVxuICAgICAgICBvcCA9IGNvbmQua2V5ID09PSBcIiRvclwiID8gXCJPUlwiIDpcbiAgICAgICAgICAgICBjb25kLmtleSA9PT0gXCIkYW5kXCIgPyBcIkFORFwiIDpcbiAgICAgICAgICAgICBcIk5PVFwiO1xuICAgICAgICByZXR1cm4gY3JlYXRlQ29uZGl0aW9uQ2xhdXNlKGNvbmQudmFsdWUsIG9wLCBkKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBjcmVhdGVGaWVsZEV4cHJlc3Npb24oY29uZC5rZXksIGNvbmQudmFsdWUpO1xuICAgIH1cbiAgfSkuZmlsdGVyKGZ1bmN0aW9uKGV4cHIpIHsgcmV0dXJuIGV4cHI7IH0pO1xuXG4gIHZhciBwYXJlbjtcbiAgaWYgKG9wZXJhdG9yID09PSAnTk9UJykge1xuICAgIHBhcmVuID0gZGVwdGggPiAwO1xuICAgIHJldHVybiAocGFyZW4gPyBcIihcIiA6IFwiXCIpICsgXCJOT1QgXCIgKyBjb25kaXRpb25zWzBdICsgKHBhcmVuID8gXCIpXCIgOiBcIlwiKTtcbiAgfSBlbHNlIHtcbiAgICBwYXJlbiA9IGRlcHRoID4gMCAmJiBjb25kaXRpb25zLmxlbmd0aCA+IDE7XG4gICAgcmV0dXJuIChwYXJlbiA/IFwiKFwiIDogXCJcIikgKyBjb25kaXRpb25zLmpvaW4oXCIgXCIrb3BlcmF0b3IrXCIgXCIpICsgKHBhcmVuID8gXCIpXCIgOiBcIlwiKTtcbiAgfVxufVxuXG52YXIgb3BNYXAgPSB7XG4gIFwiPVwiICAgICA6IFwiPVwiLFxuICBcIiRlcVwiICAgOiBcIj1cIixcbiAgXCIhPVwiICAgIDogXCIhPVwiLFxuICBcIiRuZVwiICAgOiBcIiE9XCIsXG4gIFwiPlwiICAgICA6IFwiPlwiLFxuICBcIiRndFwiICAgOiBcIj5cIixcbiAgXCI8XCIgICAgIDogXCI8XCIsXG4gIFwiJGx0XCIgICA6IFwiPFwiLFxuICBcIj49XCIgICAgOiBcIj49XCIsXG4gIFwiJGd0ZVwiICA6IFwiPj1cIixcbiAgXCI8PVwiICAgIDogXCI8PVwiLFxuICBcIiRsdGVcIiAgOiBcIjw9XCIsXG4gIFwiJGxpa2VcIiA6IFwiTElLRVwiLFxuICBcIiRubGlrZVwiIDogXCJOT1QgTElLRVwiLFxuICBcIiRpblwiICAgOiBcIklOXCIsXG4gIFwiJG5pblwiICA6IFwiTk9UIElOXCIsXG4gIFwiJGluY2x1ZGVzXCIgOiBcIklOQ0xVREVTXCIsXG4gIFwiJGV4Y2x1ZGVzXCIgOiBcIkVYQ0xVREVTXCIsXG4gIFwiJGV4aXN0c1wiIDogXCJFWElTVFNcIlxufTtcblxuLyoqIEBwcml2YXRlICoqL1xuZnVuY3Rpb24gY3JlYXRlRmllbGRFeHByZXNzaW9uKGZpZWxkLCB2YWx1ZSkge1xuICB2YXIgb3AgPSBcIiRlcVwiO1xuXG4gIC8vIEFzc3VtZSB0aGUgYCRpbmAgb3BlcmF0b3IgaWYgdmFsdWUgaXMgYW4gYXJyYXkgYW5kIG5vbmUgd2FzIHN1cHBsaWVkLlxuICBpZiAoXy5pc0FycmF5KHZhbHVlKSkgeyBvcCA9IFwiJGluXCI7IH1cbiAgLy8gT3RoZXJ3aXNlLCBpZiBhbiBvYmplY3Qgd2FzIHBhc3NlZCB0aGVuIHByb2Nlc3MgdGhlIHN1cHBsaWVkIG9wcy5cbiAgZWxzZSBpZiAoXy5pc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgX3ZhbHVlO1xuICAgIGZvciAodmFyIGsgaW4gdmFsdWUpIHtcbiAgICAgIGlmIChrWzBdID09PSBcIiRcIikge1xuICAgICAgICBvcCA9IGs7XG4gICAgICAgIHZhbHVlID0gdmFsdWVba107XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB2YXIgc2ZvcCA9IG9wTWFwW29wXTtcbiAgaWYgKCFzZm9wIHx8IF8uaXNVbmRlZmluZWQodmFsdWUpKSB7IHJldHVybiBudWxsOyB9XG4gIHZhciB2YWx1ZUV4cHIgPSBjcmVhdGVWYWx1ZUV4cHJlc3Npb24odmFsdWUpO1xuICBpZiAoXy5pc1VuZGVmaW5lZCh2YWx1ZUV4cHIpKSB7IHJldHVybiBudWxsOyB9XG4gIHN3aXRjaCAoc2ZvcCkge1xuICAgIGNhc2UgXCJOT1QgTElLRVwiOlxuICAgICAgcmV0dXJuIFwiKFwiICsgWyBcIk5PVFwiLCBmaWVsZCwgJ0xJS0UnLCB2YWx1ZUV4cHIgXS5qb2luKFwiIFwiKSArIFwiKVwiO1xuICAgIGNhc2UgXCJFWElTVFNcIjpcbiAgICAgIHJldHVybiBbIGZpZWxkLCB2YWx1ZSA/IFwiIT1cIiA6IFwiPVwiLCBcIm51bGxcIiBdLmpvaW4oXCIgXCIpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gWyBmaWVsZCwgc2ZvcCwgdmFsdWVFeHByIF0uam9pbihcIiBcIik7XG4gIH1cbn1cblxuLyoqIEBwcml2YXRlICoqL1xuZnVuY3Rpb24gY3JlYXRlVmFsdWVFeHByZXNzaW9uKHZhbHVlKSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiAwID9cbiAgICAgICAgICAgXCIoXCIgKyB2YWx1ZS5tYXAoY3JlYXRlVmFsdWVFeHByZXNzaW9uKS5qb2luKFwiLCBcIikgKyBcIilcIiA6XG4gICAgICAgICAgIHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodmFsdWUgaW5zdGFuY2VvZiBTZkRhdGUpIHtcbiAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgfVxuICBpZiAoXy5pc1N0cmluZyh2YWx1ZSkpIHtcbiAgICByZXR1cm4gXCInXCIgKyBlc2NhcGVTT1FMU3RyaW5nKHZhbHVlKSArIFwiJ1wiO1xuICB9XG4gIGlmIChfLmlzTnVtYmVyKHZhbHVlKSkge1xuICAgIHJldHVybiAodmFsdWUpLnRvU3RyaW5nKCk7XG4gIH1cbiAgaWYgKF8uaXNOdWxsKHZhbHVlKSkge1xuICAgIHJldHVybiBcIm51bGxcIjtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGVzY2FwZVNPUUxTdHJpbmcoc3RyKSB7XG4gIHJldHVybiBTdHJpbmcoc3RyIHx8ICcnKS5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIik7XG59XG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGlzQXJyYXkoYSkge1xuICByZXR1cm4gXy5pc09iamVjdChhKSAmJiBfLmlzRnVuY3Rpb24oYS5wb3ApO1xufVxuXG5cbi8qKiBAcHJpdmF0ZSAqKi9cbmZ1bmN0aW9uIGNyZWF0ZU9yZGVyQnlDbGF1c2Uoc29ydCkge1xuICBzb3J0ID0gc29ydCB8fCBbXTtcbiAgaWYgKF8uaXNTdHJpbmcoc29ydCkpIHtcbiAgICBpZiAoLyx8XFxzKyhhc2N8ZGVzYylcXHMqJC8udGVzdChzb3J0KSkge1xuICAgICAgLy8gbXVzdCBiZSBzcGVjaWZpZWQgaW4gcHVyZSBcIm9yZGVyIGJ5XCIgY2xhdXNlLiBSZXR1cm4gcmF3IGNvbmZpZy5cbiAgICAgIHJldHVybiBzb3J0O1xuICAgIH1cbiAgICAvLyBzb3J0IG9yZGVyIGluIG1vbmdvb3NlLXN0eWxlIGV4cHJlc3Npb24uXG4gICAgLy8gZS5nLiBcIkZpZWxkQSAtRmllbGRCXCIgPT4gXCJPUkRFUiBCWSBGaWVsZEEgQVNDLCBGaWVsZEIgREVTQ1wiXG4gICAgc29ydCA9IHNvcnQuc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgIHZhciBkaXIgPSBcIkFTQ1wiOyAvLyBhc2NlbmRpbmdcbiAgICAgIHZhciBmbGFnID0gZmllbGRbMF07XG4gICAgICBpZiAoZmxhZyA9PT0gJy0nKSB7XG4gICAgICAgIGRpciA9IFwiREVTQ1wiO1xuICAgICAgICBmaWVsZCA9IGZpZWxkLnN1YnN0cmluZygxKTtcbiAgICAgIH0gZWxzZSBpZiAoZmxhZyA9PT0gJysnKSB7XG4gICAgICAgIGZpZWxkID0gZmllbGQuc3Vic3RyaW5nKDEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFsgZmllbGQsIGRpciBdO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKCFpc0FycmF5KHNvcnQpKSB7XG4gICAgc29ydCA9IF8ua2V5cyhzb3J0KS5tYXAoZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgIHZhciBkaXIgPSBzb3J0W2ZpZWxkXTtcbiAgICAgIHJldHVybiBbIGZpZWxkLCBkaXIgXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gc29ydC5tYXAoZnVuY3Rpb24ocykge1xuICAgIHZhciBmaWVsZCA9IHNbMF0sIGRpciA9IHNbMV07XG4gICAgc3dpdGNoIChTdHJpbmcoZGlyKSkge1xuICAgICAgY2FzZSBcIkRFU0NcIjpcbiAgICAgIGNhc2UgXCJkZXNjXCI6XG4gICAgICBjYXNlIFwiZGVzY2VuZGluZ1wiOlxuICAgICAgY2FzZSBcIi1cIjpcbiAgICAgIGNhc2UgXCItMVwiOlxuICAgICAgICBkaXIgPSBcIkRFU0NcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBkaXIgPSBcIkFTQ1wiO1xuICAgIH1cbiAgICByZXR1cm4gZmllbGQgKyBcIiBcIiArIGRpcjtcbiAgfSkuam9pbihcIiwgXCIpO1xufVxuXG5cbmV4cG9ydHMuY3JlYXRlU09RTCA9IGNyZWF0ZVNPUUw7XG4iLCIvKmdsb2JhbCBwcm9jZXNzLCBTZmRjICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKSxcbiAgICBQcm9taXNlID0gcmVxdWlyZSgnLi9wcm9taXNlJyk7XG5cbi8qICovXG5cbnZhciByZXF1ZXN0ID0gcmVxdWlyZSgncmVxdWVzdCcpLFxuICAgIGNhbnZhcyA9IHJlcXVpcmUoJy4vYnJvd3Nlci9jYW52YXMnKSxcbiAgICBqc29ucCA9IHJlcXVpcmUoJy4vYnJvd3Nlci9qc29ucCcpO1xuXG4vLyBzZXQgb3B0aW9ucyBpZiBkZWZhdWx0cyBzZXR0aW5nIGlzIGF2YWlsYWJsZSBpbiByZXF1ZXN0LCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluIHhociBtb2R1bGUuXG5pZiAocmVxdWVzdC5kZWZhdWx0cykge1xuICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgZm9sbG93QWxsUmVkaXJlY3RzOiB0cnVlXG4gIH07XG4gIGlmIChwcm9jZXNzLmVudi5IVFRQX1BST1hZKSB7XG4gICAgZGVmYXVsdHMucHJveHkgPSBwcm9jZXNzLmVudi5IVFRQX1BST1hZO1xuICB9XG4gIGlmIChwYXJzZUludChwcm9jZXNzLmVudi5IVFRQX1RJTUVPVVQpKSB7XG4gICAgZGVmYXVsdHMudGltZW91dCA9IHBhcnNlSW50KHByb2Nlc3MuZW52LkhUVFBfVElNRU9VVCk7XG4gIH1cbiAgcmVxdWVzdCA9IHJlcXVlc3QuZGVmYXVsdHMoZGVmYXVsdHMpO1xufVxuXG52YXIgYmFzZVVybDtcbmlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTE9DQVRJT05fQkFTRV9VUkwgfHwgXCJcIjtcbn0gZWxzZSB7XG4gIHZhciBhcGlIb3N0ID0gbm9ybWFsaXplQXBpSG9zdCh3aW5kb3cubG9jYXRpb24uaG9zdCk7XG4gIGJhc2VVcmwgPSBhcGlIb3N0ID8gXCJodHRwczovL1wiICsgYXBpSG9zdCA6IFwiXCI7XG59XG5cbi8qKlxuICogQWRkIHN0cmVhbSgpIG1ldGhvZCB0byBwcm9taXNlIChhbmQgZm9sbG93aW5nIHByb21pc2UgY2hhaW4pLCB0byBhY2Nlc3Mgb3JpZ2luYWwgcmVxdWVzdCBzdHJlYW0uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzdHJlYW1pZnkocHJvbWlzZSwgZmFjdG9yeSkge1xuICB2YXIgX3RoZW4gPSBwcm9taXNlLnRoZW47XG4gIHByb21pc2UudGhlbiA9IGZ1bmN0aW9uKCkge1xuICAgIGZhY3RvcnkoKTtcbiAgICB2YXIgbmV3UHJvbWlzZSA9IF90aGVuLmFwcGx5KHByb21pc2UsIGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHN0cmVhbWlmeShuZXdQcm9taXNlLCBmYWN0b3J5KTtcbiAgfTtcbiAgcHJvbWlzZS5zdHJlYW0gPSBmYWN0b3J5O1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLyoqXG4gKiBOb3JtYXJpemUgU2FsZXNmb3JjZSBBUEkgaG9zdCBuYW1lXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVBcGlIb3N0KGFwaUhvc3QpIHtcbiAgdmFyIG0gPSAvKFxcdyspXFwuKHZpc3VhbFxcLmZvcmNlfHNhbGVzZm9yY2UpXFwuY29tJC8uZXhlYyhhcGlIb3N0KTtcbiAgaWYgKG0pIHtcbiAgICBhcGlIb3N0ID0gbVsxXSArIFwiLnNhbGVzZm9yY2UuY29tXCI7XG4gIH1cbiAgcmV0dXJuIGFwaUhvc3Q7XG59XG5cbi8qKlxuICogQ2xhc3MgZm9yIEhUVFAgcmVxdWVzdCB0cmFuc3BvcnRcbiAqXG4gKiBAY2xhc3NcbiAqIEBwcm90ZWN0ZWRcbiAqL1xudmFyIFRyYW5zcG9ydCA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7fTtcblxuLyoqXG4gKiBNYWtlIEhUVFAgcmVxdWVzdCwgcmV0dXJucyBwcm9taXNlIGluc3RlYWQgb2Ygc3RyZWFtXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIEhUVFAgcmVxdWVzdFxuICogQHBhcmFtIHtDYWxsYmFjay48T2JqZWN0Pn0gW2NhbGxiYWNrXSAtIENhbGJhY2sgRnVuY3Rpb25cbiAqIEByZXR1cm5zIHtQcm9taXNlLjxPYmplY3Q+fVxuICovXG5UcmFuc3BvcnQucHJvdG90eXBlLmh0dHBSZXF1ZXN0ID0gZnVuY3Rpb24ocGFyYW1zLCBjYWxsYmFjaykge1xuICB2YXIgZGVmZXJyZWQgPSBQcm9taXNlLmRlZmVyKCk7XG4gIHZhciByZXE7XG4gIHZhciBodHRwUmVxdWVzdCA9IHRoaXMuX2dldEh0dHBSZXF1ZXN0TW9kdWxlKCk7XG4gIHZhciBjcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCFyZXEpIHtcbiAgICAgIHJlcSA9IGh0dHBSZXF1ZXN0KHBhcmFtcywgZnVuY3Rpb24oZXJyLCByZXNwb25zZSkge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVxO1xuICB9O1xuICByZXR1cm4gc3RyZWFtaWZ5KGRlZmVycmVkLnByb21pc2UsIGNyZWF0ZVJlcXVlc3QpLnRoZW5DYWxsKGNhbGxiYWNrKTtcbn07XG5cbi8qKiBAcHJvdGVjdGVkICoqL1xuVHJhbnNwb3J0LnByb3RvdHlwZS5fZ2V0SHR0cFJlcXVlc3RNb2R1bGUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJlcXVlc3Q7XG59O1xuXG5cbi8qKlxuICogQ2xhc3MgZm9yIEpTT05QIHJlcXVlc3QgdHJhbnNwb3J0XG4gKiBAY2xhc3MgVHJhbnNwb3J0fkpzb25wVHJhbnNwb3J0XG4gKiBAcHJvdGVjdGVkXG4gKiBAZXh0ZW5kcyBUcmFuc3BvcnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBqc29ucFBhcmFtIC0gQ2FsbGJhY2sgcGFyYW1ldGVyIG5hbWUgZm9yIEpTT05QIGludm9rYXRpb24uXG4gKi9cbnZhciBKc29ucFRyYW5zcG9ydCA9IFRyYW5zcG9ydC5Kc29ucFRyYW5zcG9ydCA9IGZ1bmN0aW9uKGpzb25wUGFyYW0pIHtcbiAgdGhpcy5fanNvbnBQYXJhbSA9IGpzb25wUGFyYW07XG59O1xuXG5pbmhlcml0cyhKc29ucFRyYW5zcG9ydCwgVHJhbnNwb3J0KTtcblxuLyoqIEBwcm90ZWN0ZWQgKiovXG5Kc29ucFRyYW5zcG9ydC5wcm90b3R5cGUuX2dldEh0dHBSZXF1ZXN0TW9kdWxlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBqc29ucC5jcmVhdGVSZXF1ZXN0KHRoaXMuX2pzb25wUGFyYW0pO1xufTtcblxuSnNvbnBUcmFuc3BvcnQuc3VwcG9ydGVkID0ganNvbnAuc3VwcG9ydGVkO1xuXG5cbi8qKlxuICogQ2xhc3MgZm9yIFNmZGMgQ2FudmFzIHJlcXVlc3QgdHJhbnNwb3J0XG4gKiBAY2xhc3MgVHJhbnNwb3J0fkNhbnZhc1RyYW5zcG9ydFxuICogQHByb3RlY3RlZFxuICogQGV4dGVuZHMgVHJhbnNwb3J0XG4gKiBAcGFyYW0ge09iamVjdH0gc2lnbmVkUmVxdWVzdCAtIFBhcnNlZCBzaWduZWQgcmVxdWVzdCBvYmplY3RcbiAqL1xudmFyIENhbnZhc1RyYW5zcG9ydCA9IFRyYW5zcG9ydC5DYW52YXNUcmFuc3BvcnQgPSBmdW5jdGlvbihzaWduZWRSZXF1ZXN0KSB7XG4gIHRoaXMuX3NpZ25lZFJlcXVlc3QgPSBzaWduZWRSZXF1ZXN0O1xufTtcblxuaW5oZXJpdHMoQ2FudmFzVHJhbnNwb3J0LCBUcmFuc3BvcnQpO1xuXG4vKiogQHByb3RlY3RlZCAqKi9cbkNhbnZhc1RyYW5zcG9ydC5wcm90b3R5cGUuX2dldEh0dHBSZXF1ZXN0TW9kdWxlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBjYW52YXMuY3JlYXRlUmVxdWVzdCh0aGlzLl9zaWduZWRSZXF1ZXN0KTtcbn07XG5cbkNhbnZhc1RyYW5zcG9ydC5zdXBwb3J0ZWQgPSBjYW52YXMuc3VwcG9ydGVkO1xuXG5cbi8qKlxuICogQ2xhc3MgZm9yIEhUVFAgcmVxdWVzdCB0cmFuc3BvcnQgdXNpbmcgQUpBWCBwcm94eSBzZXJ2aWNlXG4gKlxuICogQGNsYXNzIFRyYW5zcG9ydH5Qcm94eVRyYW5zcG9ydFxuICogQHByb3RlY3RlZFxuICogQGV4dGVuZHMgVHJhbnNwb3J0XG4gKiBAcGFyYW0ge1N0cmluZ30gcHJveHlVcmwgLSBBSkFYIFByb3h5IHNlcnZlciBVUkxcbiAqL1xudmFyIFByb3h5VHJhbnNwb3J0ID0gVHJhbnNwb3J0LlByb3h5VHJhbnNwb3J0ID0gZnVuY3Rpb24ocHJveHlVcmwpIHtcbiAgdGhpcy5fcHJveHlVcmwgPSBwcm94eVVybDtcbn07XG5cbmluaGVyaXRzKFByb3h5VHJhbnNwb3J0LCBUcmFuc3BvcnQpO1xuXG4vKipcbiAqIE1ha2UgSFRUUCByZXF1ZXN0IHZpYSBBSkFYIHByb3h5XG4gKlxuICogQG1ldGhvZCBUcmFuc3BvcnR+UHJveHlUcmFuc3BvcnQjaHR0cFJlcXVlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBIVFRQIHJlcXVlc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE9iamVjdD59IFtjYWxsYmFja10gLSBDYWxiYWNrIEZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7UHJvbWlzZS48T2JqZWN0Pn1cbiAqL1xuUHJveHlUcmFuc3BvcnQucHJvdG90eXBlLmh0dHBSZXF1ZXN0ID0gZnVuY3Rpb24ocGFyYW1zLCBjYWxsYmFjaykge1xuICB2YXIgdXJsID0gcGFyYW1zLnVybDtcbiAgaWYgKHVybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuICAgIHVybCA9IGJhc2VVcmwgKyB1cmw7XG4gIH1cbiAgdmFyIHByb3h5UGFyYW1zID0ge1xuICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCxcbiAgICB1cmw6IHRoaXMuX3Byb3h5VXJsICsgJz8nICsgRGF0ZS5ub3coKSArIFwiLlwiICsgKFwiXCIgKyBNYXRoLnJhbmRvbSgpKS5zdWJzdHJpbmcoMiksXG4gICAgaGVhZGVyczoge1xuICAgICAgJ3NhbGVzZm9yY2Vwcm94eS1lbmRwb2ludCc6IHVybFxuICAgIH1cbiAgfTtcbiAgaWYgKHBhcmFtcy5ib2R5IHx8IHBhcmFtcy5ib2R5ID09PSBcIlwiKSB7XG4gICAgcHJveHlQYXJhbXMuYm9keSA9IHBhcmFtcy5ib2R5O1xuICB9XG4gIGlmIChwYXJhbXMuaGVhZGVycykge1xuICAgIGZvciAodmFyIG5hbWUgaW4gcGFyYW1zLmhlYWRlcnMpIHtcbiAgICAgIHByb3h5UGFyYW1zLmhlYWRlcnNbbmFtZV0gPSBwYXJhbXMuaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFByb3h5VHJhbnNwb3J0LnN1cGVyXy5wcm90b3R5cGUuaHR0cFJlcXVlc3QuY2FsbCh0aGlzLCBwcm94eVBhcmFtcywgY2FsbGJhY2spO1xufTtcblxuXG4vKipcbiAqIENsYXNzIGZvciBIVFRQIHJlcXVlc3QgdHJhbnNwb3J0IHVzaW5nIGEgcHJveHkgc2VydmVyXG4gKlxuICogQGNsYXNzIFRyYW5zcG9ydH5IdHRwUHJveHlUcmFuc3BvcnRcbiAqIEBwcm90ZWN0ZWRcbiAqIEBleHRlbmRzIFRyYW5zcG9ydFxuICogQHBhcmFtIHtTdHJpbmd9IGh0dHBQcm94eSAtIFVSTCBvZiB0aGUgSFRUUCBwcm94eSBzZXJ2ZXJcbiAqL1xudmFyIEh0dHBQcm94eVRyYW5zcG9ydCA9IFRyYW5zcG9ydC5IdHRwUHJveHlUcmFuc3BvcnQgPSBmdW5jdGlvbihodHRwUHJveHkpIHtcbiAgdGhpcy5faHR0cFByb3h5ID0gaHR0cFByb3h5O1xufTtcblxuaW5oZXJpdHMoSHR0cFByb3h5VHJhbnNwb3J0LCBUcmFuc3BvcnQpO1xuXG4vKipcbiAqIE1ha2UgSFRUUCByZXF1ZXN0IHZpYSBwcm94eSBzZXJ2ZXJcbiAqXG4gKiBAbWV0aG9kIFRyYW5zcG9ydH5IdHRwUHJveHlUcmFuc3BvcnQjaHR0cFJlcXVlc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBIVFRQIHJlcXVlc3RcbiAqIEBwYXJhbSB7Q2FsbGJhY2suPE9iamVjdD59IFtjYWxsYmFja10gLSBDYWxsYmFjayBGdW5jdGlvblxuICogQHJldHVybnMge1Byb21pc2UuPE9iamVjdD59XG4gKi9cbkh0dHBQcm94eVRyYW5zcG9ydC5wcm90b3R5cGUuaHR0cFJlcXVlc3QgPSBmdW5jdGlvbihwYXJhbXMsIGNhbGxiYWNrKSB7XG4gIHZhciB1cmwgPSBwYXJhbXMudXJsO1xuICBpZiAodXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG4gICAgdXJsID0gYmFzZVVybCArIHVybDtcbiAgfVxuICB2YXIgcHJveHlQYXJhbXMgPSB7XG4gICAgbWV0aG9kOiBwYXJhbXMubWV0aG9kLFxuICAgIHVybDogcGFyYW1zLnVybCxcbiAgICBwcm94eTogdGhpcy5faHR0cFByb3h5LFxuICAgIGhlYWRlcnM6IHt9XG4gIH07XG4gIGlmIChwYXJhbXMuYm9keSB8fCBwYXJhbXMuYm9keSA9PT0gXCJcIikge1xuICAgIHByb3h5UGFyYW1zLmJvZHkgPSBwYXJhbXMuYm9keTtcbiAgfVxuICBpZiAocGFyYW1zLmhlYWRlcnMpIHtcbiAgICBmb3IgKHZhciBuYW1lIGluIHBhcmFtcy5oZWFkZXJzKSB7XG4gICAgICBwcm94eVBhcmFtcy5oZWFkZXJzW25hbWVdID0gcGFyYW1zLmhlYWRlcnNbbmFtZV07XG4gICAgfVxuICB9XG4gIHJldHVybiBIdHRwUHJveHlUcmFuc3BvcnQuc3VwZXJfLnByb3RvdHlwZS5odHRwUmVxdWVzdC5jYWxsKHRoaXMsIHByb3h5UGFyYW1zLCBjYWxsYmFjayk7XG59O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vIHJhd0FzYXAgcHJvdmlkZXMgZXZlcnl0aGluZyB3ZSBuZWVkIGV4Y2VwdCBleGNlcHRpb24gbWFuYWdlbWVudC5cbnZhciByYXdBc2FwID0gcmVxdWlyZShcIi4vcmF3XCIpO1xuLy8gUmF3VGFza3MgYXJlIHJlY3ljbGVkIHRvIHJlZHVjZSBHQyBjaHVybi5cbnZhciBmcmVlVGFza3MgPSBbXTtcbi8vIFdlIHF1ZXVlIGVycm9ycyB0byBlbnN1cmUgdGhleSBhcmUgdGhyb3duIGluIHJpZ2h0IG9yZGVyIChGSUZPKS5cbi8vIEFycmF5LWFzLXF1ZXVlIGlzIGdvb2QgZW5vdWdoIGhlcmUsIHNpbmNlIHdlIGFyZSBqdXN0IGRlYWxpbmcgd2l0aCBleGNlcHRpb25zLlxudmFyIHBlbmRpbmdFcnJvcnMgPSBbXTtcbnZhciByZXF1ZXN0RXJyb3JUaHJvdyA9IHJhd0FzYXAubWFrZVJlcXVlc3RDYWxsRnJvbVRpbWVyKHRocm93Rmlyc3RFcnJvcik7XG5cbmZ1bmN0aW9uIHRocm93Rmlyc3RFcnJvcigpIHtcbiAgICBpZiAocGVuZGluZ0Vycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgcGVuZGluZ0Vycm9ycy5zaGlmdCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDYWxscyBhIHRhc2sgYXMgc29vbiBhcyBwb3NzaWJsZSBhZnRlciByZXR1cm5pbmcsIGluIGl0cyBvd24gZXZlbnQsIHdpdGggcHJpb3JpdHlcbiAqIG92ZXIgb3RoZXIgZXZlbnRzIGxpa2UgYW5pbWF0aW9uLCByZWZsb3csIGFuZCByZXBhaW50LiBBbiBlcnJvciB0aHJvd24gZnJvbSBhblxuICogZXZlbnQgd2lsbCBub3QgaW50ZXJydXB0LCBub3IgZXZlbiBzdWJzdGFudGlhbGx5IHNsb3cgZG93biB0aGUgcHJvY2Vzc2luZyBvZlxuICogb3RoZXIgZXZlbnRzLCBidXQgd2lsbCBiZSByYXRoZXIgcG9zdHBvbmVkIHRvIGEgbG93ZXIgcHJpb3JpdHkgZXZlbnQuXG4gKiBAcGFyYW0ge3tjYWxsfX0gdGFzayBBIGNhbGxhYmxlIG9iamVjdCwgdHlwaWNhbGx5IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBub1xuICogYXJndW1lbnRzLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGFzYXA7XG5mdW5jdGlvbiBhc2FwKHRhc2spIHtcbiAgICB2YXIgcmF3VGFzaztcbiAgICBpZiAoZnJlZVRhc2tzLmxlbmd0aCkge1xuICAgICAgICByYXdUYXNrID0gZnJlZVRhc2tzLnBvcCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJhd1Rhc2sgPSBuZXcgUmF3VGFzaygpO1xuICAgIH1cbiAgICByYXdUYXNrLnRhc2sgPSB0YXNrO1xuICAgIHJhd0FzYXAocmF3VGFzayk7XG59XG5cbi8vIFdlIHdyYXAgdGFza3Mgd2l0aCByZWN5Y2xhYmxlIHRhc2sgb2JqZWN0cy4gIEEgdGFzayBvYmplY3QgaW1wbGVtZW50c1xuLy8gYGNhbGxgLCBqdXN0IGxpa2UgYSBmdW5jdGlvbi5cbmZ1bmN0aW9uIFJhd1Rhc2soKSB7XG4gICAgdGhpcy50YXNrID0gbnVsbDtcbn1cblxuLy8gVGhlIHNvbGUgcHVycG9zZSBvZiB3cmFwcGluZyB0aGUgdGFzayBpcyB0byBjYXRjaCB0aGUgZXhjZXB0aW9uIGFuZCByZWN5Y2xlXG4vLyB0aGUgdGFzayBvYmplY3QgYWZ0ZXIgaXRzIHNpbmdsZSB1c2UuXG5SYXdUYXNrLnByb3RvdHlwZS5jYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHRoaXMudGFzay5jYWxsKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGFzYXAub25lcnJvcikge1xuICAgICAgICAgICAgLy8gVGhpcyBob29rIGV4aXN0cyBwdXJlbHkgZm9yIHRlc3RpbmcgcHVycG9zZXMuXG4gICAgICAgICAgICAvLyBJdHMgbmFtZSB3aWxsIGJlIHBlcmlvZGljYWxseSByYW5kb21pemVkIHRvIGJyZWFrIGFueSBjb2RlIHRoYXRcbiAgICAgICAgICAgIC8vIGRlcGVuZHMgb24gaXRzIGV4aXN0ZW5jZS5cbiAgICAgICAgICAgIGFzYXAub25lcnJvcihlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJbiBhIHdlYiBicm93c2VyLCBleGNlcHRpb25zIGFyZSBub3QgZmF0YWwuIEhvd2V2ZXIsIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBzbG93aW5nIGRvd24gdGhlIHF1ZXVlIG9mIHBlbmRpbmcgdGFza3MsIHdlIHJldGhyb3cgdGhlIGVycm9yIGluIGFcbiAgICAgICAgICAgIC8vIGxvd2VyIHByaW9yaXR5IHR1cm4uXG4gICAgICAgICAgICBwZW5kaW5nRXJyb3JzLnB1c2goZXJyb3IpO1xuICAgICAgICAgICAgcmVxdWVzdEVycm9yVGhyb3coKTtcbiAgICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIGZyZWVUYXNrc1tmcmVlVGFza3MubGVuZ3RoXSA9IHRoaXM7XG4gICAgfVxufTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vLyBVc2UgdGhlIGZhc3Rlc3QgbWVhbnMgcG9zc2libGUgdG8gZXhlY3V0ZSBhIHRhc2sgaW4gaXRzIG93biB0dXJuLCB3aXRoXG4vLyBwcmlvcml0eSBvdmVyIG90aGVyIGV2ZW50cyBpbmNsdWRpbmcgSU8sIGFuaW1hdGlvbiwgcmVmbG93LCBhbmQgcmVkcmF3XG4vLyBldmVudHMgaW4gYnJvd3NlcnMuXG4vL1xuLy8gQW4gZXhjZXB0aW9uIHRocm93biBieSBhIHRhc2sgd2lsbCBwZXJtYW5lbnRseSBpbnRlcnJ1cHQgdGhlIHByb2Nlc3Npbmcgb2Zcbi8vIHN1YnNlcXVlbnQgdGFza3MuIFRoZSBoaWdoZXIgbGV2ZWwgYGFzYXBgIGZ1bmN0aW9uIGVuc3VyZXMgdGhhdCBpZiBhblxuLy8gZXhjZXB0aW9uIGlzIHRocm93biBieSBhIHRhc2ssIHRoYXQgdGhlIHRhc2sgcXVldWUgd2lsbCBjb250aW51ZSBmbHVzaGluZyBhc1xuLy8gc29vbiBhcyBwb3NzaWJsZSwgYnV0IGlmIHlvdSB1c2UgYHJhd0FzYXBgIGRpcmVjdGx5LCB5b3UgYXJlIHJlc3BvbnNpYmxlIHRvXG4vLyBlaXRoZXIgZW5zdXJlIHRoYXQgbm8gZXhjZXB0aW9ucyBhcmUgdGhyb3duIGZyb20geW91ciB0YXNrLCBvciB0byBtYW51YWxseVxuLy8gY2FsbCBgcmF3QXNhcC5yZXF1ZXN0Rmx1c2hgIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24uXG5tb2R1bGUuZXhwb3J0cyA9IHJhd0FzYXA7XG5mdW5jdGlvbiByYXdBc2FwKHRhc2spIHtcbiAgICBpZiAoIXF1ZXVlLmxlbmd0aCkge1xuICAgICAgICByZXF1ZXN0Rmx1c2goKTtcbiAgICAgICAgZmx1c2hpbmcgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBFcXVpdmFsZW50IHRvIHB1c2gsIGJ1dCBhdm9pZHMgYSBmdW5jdGlvbiBjYWxsLlxuICAgIHF1ZXVlW3F1ZXVlLmxlbmd0aF0gPSB0YXNrO1xufVxuXG52YXIgcXVldWUgPSBbXTtcbi8vIE9uY2UgYSBmbHVzaCBoYXMgYmVlbiByZXF1ZXN0ZWQsIG5vIGZ1cnRoZXIgY2FsbHMgdG8gYHJlcXVlc3RGbHVzaGAgYXJlXG4vLyBuZWNlc3NhcnkgdW50aWwgdGhlIG5leHQgYGZsdXNoYCBjb21wbGV0ZXMuXG52YXIgZmx1c2hpbmcgPSBmYWxzZTtcbi8vIGByZXF1ZXN0Rmx1c2hgIGlzIGFuIGltcGxlbWVudGF0aW9uLXNwZWNpZmljIG1ldGhvZCB0aGF0IGF0dGVtcHRzIHRvIGtpY2tcbi8vIG9mZiBhIGBmbHVzaGAgZXZlbnQgYXMgcXVpY2tseSBhcyBwb3NzaWJsZS4gYGZsdXNoYCB3aWxsIGF0dGVtcHQgdG8gZXhoYXVzdFxuLy8gdGhlIGV2ZW50IHF1ZXVlIGJlZm9yZSB5aWVsZGluZyB0byB0aGUgYnJvd3NlcidzIG93biBldmVudCBsb29wLlxudmFyIHJlcXVlc3RGbHVzaDtcbi8vIFRoZSBwb3NpdGlvbiBvZiB0aGUgbmV4dCB0YXNrIHRvIGV4ZWN1dGUgaW4gdGhlIHRhc2sgcXVldWUuIFRoaXMgaXNcbi8vIHByZXNlcnZlZCBiZXR3ZWVuIGNhbGxzIHRvIGBmbHVzaGAgc28gdGhhdCBpdCBjYW4gYmUgcmVzdW1lZCBpZlxuLy8gYSB0YXNrIHRocm93cyBhbiBleGNlcHRpb24uXG52YXIgaW5kZXggPSAwO1xuLy8gSWYgYSB0YXNrIHNjaGVkdWxlcyBhZGRpdGlvbmFsIHRhc2tzIHJlY3Vyc2l2ZWx5LCB0aGUgdGFzayBxdWV1ZSBjYW4gZ3Jvd1xuLy8gdW5ib3VuZGVkLiBUbyBwcmV2ZW50IG1lbW9yeSBleGhhdXN0aW9uLCB0aGUgdGFzayBxdWV1ZSB3aWxsIHBlcmlvZGljYWxseVxuLy8gdHJ1bmNhdGUgYWxyZWFkeS1jb21wbGV0ZWQgdGFza3MuXG52YXIgY2FwYWNpdHkgPSAxMDI0O1xuXG4vLyBUaGUgZmx1c2ggZnVuY3Rpb24gcHJvY2Vzc2VzIGFsbCB0YXNrcyB0aGF0IGhhdmUgYmVlbiBzY2hlZHVsZWQgd2l0aFxuLy8gYHJhd0FzYXBgIHVubGVzcyBhbmQgdW50aWwgb25lIG9mIHRob3NlIHRhc2tzIHRocm93cyBhbiBleGNlcHRpb24uXG4vLyBJZiBhIHRhc2sgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgYGZsdXNoYCBlbnN1cmVzIHRoYXQgaXRzIHN0YXRlIHdpbGwgcmVtYWluXG4vLyBjb25zaXN0ZW50IGFuZCB3aWxsIHJlc3VtZSB3aGVyZSBpdCBsZWZ0IG9mZiB3aGVuIGNhbGxlZCBhZ2Fpbi5cbi8vIEhvd2V2ZXIsIGBmbHVzaGAgZG9lcyBub3QgbWFrZSBhbnkgYXJyYW5nZW1lbnRzIHRvIGJlIGNhbGxlZCBhZ2FpbiBpZiBhblxuLy8gZXhjZXB0aW9uIGlzIHRocm93bi5cbmZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHdoaWxlIChpbmRleCA8IHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gaW5kZXg7XG4gICAgICAgIC8vIEFkdmFuY2UgdGhlIGluZGV4IGJlZm9yZSBjYWxsaW5nIHRoZSB0YXNrLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSB3aWxsXG4gICAgICAgIC8vIGJlZ2luIGZsdXNoaW5nIG9uIHRoZSBuZXh0IHRhc2sgdGhlIHRhc2sgdGhyb3dzIGFuIGVycm9yLlxuICAgICAgICBpbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgcXVldWVbY3VycmVudEluZGV4XS5jYWxsKCk7XG4gICAgICAgIC8vIFByZXZlbnQgbGVha2luZyBtZW1vcnkgZm9yIGxvbmcgY2hhaW5zIG9mIHJlY3Vyc2l2ZSBjYWxscyB0byBgYXNhcGAuXG4gICAgICAgIC8vIElmIHdlIGNhbGwgYGFzYXBgIHdpdGhpbiB0YXNrcyBzY2hlZHVsZWQgYnkgYGFzYXBgLCB0aGUgcXVldWUgd2lsbFxuICAgICAgICAvLyBncm93LCBidXQgdG8gYXZvaWQgYW4gTyhuKSB3YWxrIGZvciBldmVyeSB0YXNrIHdlIGV4ZWN1dGUsIHdlIGRvbid0XG4gICAgICAgIC8vIHNoaWZ0IHRhc2tzIG9mZiB0aGUgcXVldWUgYWZ0ZXIgdGhleSBoYXZlIGJlZW4gZXhlY3V0ZWQuXG4gICAgICAgIC8vIEluc3RlYWQsIHdlIHBlcmlvZGljYWxseSBzaGlmdCAxMDI0IHRhc2tzIG9mZiB0aGUgcXVldWUuXG4gICAgICAgIGlmIChpbmRleCA+IGNhcGFjaXR5KSB7XG4gICAgICAgICAgICAvLyBNYW51YWxseSBzaGlmdCBhbGwgdmFsdWVzIHN0YXJ0aW5nIGF0IHRoZSBpbmRleCBiYWNrIHRvIHRoZVxuICAgICAgICAgICAgLy8gYmVnaW5uaW5nIG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIGZvciAodmFyIHNjYW4gPSAwLCBuZXdMZW5ndGggPSBxdWV1ZS5sZW5ndGggLSBpbmRleDsgc2NhbiA8IG5ld0xlbmd0aDsgc2NhbisrKSB7XG4gICAgICAgICAgICAgICAgcXVldWVbc2Nhbl0gPSBxdWV1ZVtzY2FuICsgaW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUubGVuZ3RoIC09IGluZGV4O1xuICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgaW5kZXggPSAwO1xuICAgIGZsdXNoaW5nID0gZmFsc2U7XG59XG5cbi8vIGByZXF1ZXN0Rmx1c2hgIGlzIGltcGxlbWVudGVkIHVzaW5nIGEgc3RyYXRlZ3kgYmFzZWQgb24gZGF0YSBjb2xsZWN0ZWQgZnJvbVxuLy8gZXZlcnkgYXZhaWxhYmxlIFNhdWNlTGFicyBTZWxlbml1bSB3ZWIgZHJpdmVyIHdvcmtlciBhdCB0aW1lIG9mIHdyaXRpbmcuXG4vLyBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xbUctNVVZR3VwNXF4R2RFTVdraFA2QldDejA1M05VYjJFMVFvVVRVMTZ1QS9lZGl0I2dpZD03ODM3MjQ1OTNcblxuLy8gU2FmYXJpIDYgYW5kIDYuMSBmb3IgZGVza3RvcCwgaVBhZCwgYW5kIGlQaG9uZSBhcmUgdGhlIG9ubHkgYnJvd3NlcnMgdGhhdFxuLy8gaGF2ZSBXZWJLaXRNdXRhdGlvbk9ic2VydmVyIGJ1dCBub3QgdW4tcHJlZml4ZWQgTXV0YXRpb25PYnNlcnZlci5cbi8vIE11c3QgdXNlIGBnbG9iYWxgIG9yIGBzZWxmYCBpbnN0ZWFkIG9mIGB3aW5kb3dgIHRvIHdvcmsgaW4gYm90aCBmcmFtZXMgYW5kIHdlYlxuLy8gd29ya2Vycy4gYGdsb2JhbGAgaXMgYSBwcm92aXNpb24gb2YgQnJvd3NlcmlmeSwgTXIsIE1ycywgb3IgTW9wLlxuXG4vKiBnbG9iYWxzIHNlbGYgKi9cbnZhciBzY29wZSA9IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiBzZWxmO1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gc2NvcGUuTXV0YXRpb25PYnNlcnZlciB8fCBzY29wZS5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuXG4vLyBNdXRhdGlvbk9ic2VydmVycyBhcmUgZGVzaXJhYmxlIGJlY2F1c2UgdGhleSBoYXZlIGhpZ2ggcHJpb3JpdHkgYW5kIHdvcmtcbi8vIHJlbGlhYmx5IGV2ZXJ5d2hlcmUgdGhleSBhcmUgaW1wbGVtZW50ZWQuXG4vLyBUaGV5IGFyZSBpbXBsZW1lbnRlZCBpbiBhbGwgbW9kZXJuIGJyb3dzZXJzLlxuLy9cbi8vIC0gQW5kcm9pZCA0LTQuM1xuLy8gLSBDaHJvbWUgMjYtMzRcbi8vIC0gRmlyZWZveCAxNC0yOVxuLy8gLSBJbnRlcm5ldCBFeHBsb3JlciAxMVxuLy8gLSBpUGFkIFNhZmFyaSA2LTcuMVxuLy8gLSBpUGhvbmUgU2FmYXJpIDctNy4xXG4vLyAtIFNhZmFyaSA2LTdcbmlmICh0eXBlb2YgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJlcXVlc3RGbHVzaCA9IG1ha2VSZXF1ZXN0Q2FsbEZyb21NdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcblxuLy8gTWVzc2FnZUNoYW5uZWxzIGFyZSBkZXNpcmFibGUgYmVjYXVzZSB0aGV5IGdpdmUgZGlyZWN0IGFjY2VzcyB0byB0aGUgSFRNTFxuLy8gdGFzayBxdWV1ZSwgYXJlIGltcGxlbWVudGVkIGluIEludGVybmV0IEV4cGxvcmVyIDEwLCBTYWZhcmkgNS4wLTEsIGFuZCBPcGVyYVxuLy8gMTEtMTIsIGFuZCBpbiB3ZWIgd29ya2VycyBpbiBtYW55IGVuZ2luZXMuXG4vLyBBbHRob3VnaCBtZXNzYWdlIGNoYW5uZWxzIHlpZWxkIHRvIGFueSBxdWV1ZWQgcmVuZGVyaW5nIGFuZCBJTyB0YXNrcywgdGhleVxuLy8gd291bGQgYmUgYmV0dGVyIHRoYW4gaW1wb3NpbmcgdGhlIDRtcyBkZWxheSBvZiB0aW1lcnMuXG4vLyBIb3dldmVyLCB0aGV5IGRvIG5vdCB3b3JrIHJlbGlhYmx5IGluIEludGVybmV0IEV4cGxvcmVyIG9yIFNhZmFyaS5cblxuLy8gSW50ZXJuZXQgRXhwbG9yZXIgMTAgaXMgdGhlIG9ubHkgYnJvd3NlciB0aGF0IGhhcyBzZXRJbW1lZGlhdGUgYnV0IGRvZXNcbi8vIG5vdCBoYXZlIE11dGF0aW9uT2JzZXJ2ZXJzLlxuLy8gQWx0aG91Z2ggc2V0SW1tZWRpYXRlIHlpZWxkcyB0byB0aGUgYnJvd3NlcidzIHJlbmRlcmVyLCBpdCB3b3VsZCBiZVxuLy8gcHJlZmVycmFibGUgdG8gZmFsbGluZyBiYWNrIHRvIHNldFRpbWVvdXQgc2luY2UgaXQgZG9lcyBub3QgaGF2ZVxuLy8gdGhlIG1pbmltdW0gNG1zIHBlbmFsdHkuXG4vLyBVbmZvcnR1bmF0ZWx5IHRoZXJlIGFwcGVhcnMgdG8gYmUgYSBidWcgaW4gSW50ZXJuZXQgRXhwbG9yZXIgMTAgTW9iaWxlIChhbmRcbi8vIERlc2t0b3AgdG8gYSBsZXNzZXIgZXh0ZW50KSB0aGF0IHJlbmRlcnMgYm90aCBzZXRJbW1lZGlhdGUgYW5kXG4vLyBNZXNzYWdlQ2hhbm5lbCB1c2VsZXNzIGZvciB0aGUgcHVycG9zZXMgb2YgQVNBUC5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS9pc3N1ZXMvMzk2XG5cbi8vIFRpbWVycyBhcmUgaW1wbGVtZW50ZWQgdW5pdmVyc2FsbHkuXG4vLyBXZSBmYWxsIGJhY2sgdG8gdGltZXJzIGluIHdvcmtlcnMgaW4gbW9zdCBlbmdpbmVzLCBhbmQgaW4gZm9yZWdyb3VuZFxuLy8gY29udGV4dHMgaW4gdGhlIGZvbGxvd2luZyBicm93c2Vycy5cbi8vIEhvd2V2ZXIsIG5vdGUgdGhhdCBldmVuIHRoaXMgc2ltcGxlIGNhc2UgcmVxdWlyZXMgbnVhbmNlcyB0byBvcGVyYXRlIGluIGFcbi8vIGJyb2FkIHNwZWN0cnVtIG9mIGJyb3dzZXJzLlxuLy9cbi8vIC0gRmlyZWZveCAzLTEzXG4vLyAtIEludGVybmV0IEV4cGxvcmVyIDYtOVxuLy8gLSBpUGFkIFNhZmFyaSA0LjNcbi8vIC0gTHlueCAyLjguN1xufSBlbHNlIHtcbiAgICByZXF1ZXN0Rmx1c2ggPSBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXIoZmx1c2gpO1xufVxuXG4vLyBgcmVxdWVzdEZsdXNoYCByZXF1ZXN0cyB0aGF0IHRoZSBoaWdoIHByaW9yaXR5IGV2ZW50IHF1ZXVlIGJlIGZsdXNoZWQgYXNcbi8vIHNvb24gYXMgcG9zc2libGUuXG4vLyBUaGlzIGlzIHVzZWZ1bCB0byBwcmV2ZW50IGFuIGVycm9yIHRocm93biBpbiBhIHRhc2sgZnJvbSBzdGFsbGluZyB0aGUgZXZlbnRcbi8vIHF1ZXVlIGlmIHRoZSBleGNlcHRpb24gaGFuZGxlZCBieSBOb2RlLmpz4oCZc1xuLy8gYHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiKWAgb3IgYnkgYSBkb21haW4uXG5yYXdBc2FwLnJlcXVlc3RGbHVzaCA9IHJlcXVlc3RGbHVzaDtcblxuLy8gVG8gcmVxdWVzdCBhIGhpZ2ggcHJpb3JpdHkgZXZlbnQsIHdlIGluZHVjZSBhIG11dGF0aW9uIG9ic2VydmVyIGJ5IHRvZ2dsaW5nXG4vLyB0aGUgdGV4dCBvZiBhIHRleHQgbm9kZSBiZXR3ZWVuIFwiMVwiIGFuZCBcIi0xXCIuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdENhbGxGcm9tTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjaykge1xuICAgIHZhciB0b2dnbGUgPSAxO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihjYWxsYmFjayk7XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHtjaGFyYWN0ZXJEYXRhOiB0cnVlfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuICAgICAgICB0b2dnbGUgPSAtdG9nZ2xlO1xuICAgICAgICBub2RlLmRhdGEgPSB0b2dnbGU7XG4gICAgfTtcbn1cblxuLy8gVGhlIG1lc3NhZ2UgY2hhbm5lbCB0ZWNobmlxdWUgd2FzIGRpc2NvdmVyZWQgYnkgTWFsdGUgVWJsIGFuZCB3YXMgdGhlXG4vLyBvcmlnaW5hbCBmb3VuZGF0aW9uIGZvciB0aGlzIGxpYnJhcnkuXG4vLyBodHRwOi8vd3d3Lm5vbmJsb2NraW5nLmlvLzIwMTEvMDYvd2luZG93bmV4dHRpY2suaHRtbFxuXG4vLyBTYWZhcmkgNi4wLjUgKGF0IGxlYXN0KSBpbnRlcm1pdHRlbnRseSBmYWlscyB0byBjcmVhdGUgbWVzc2FnZSBwb3J0cyBvbiBhXG4vLyBwYWdlJ3MgZmlyc3QgbG9hZC4gVGhhbmtmdWxseSwgdGhpcyB2ZXJzaW9uIG9mIFNhZmFyaSBzdXBwb3J0c1xuLy8gTXV0YXRpb25PYnNlcnZlcnMsIHNvIHdlIGRvbid0IG5lZWQgdG8gZmFsbCBiYWNrIGluIHRoYXQgY2FzZS5cblxuLy8gZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbU1lc3NhZ2VDaGFubmVsKGNhbGxiYWNrKSB7XG4vLyAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbi8vICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGNhbGxiYWNrO1xuLy8gICAgIHJldHVybiBmdW5jdGlvbiByZXF1ZXN0Q2FsbCgpIHtcbi8vICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbi8vICAgICB9O1xuLy8gfVxuXG4vLyBGb3IgcmVhc29ucyBleHBsYWluZWQgYWJvdmUsIHdlIGFyZSBhbHNvIHVuYWJsZSB0byB1c2UgYHNldEltbWVkaWF0ZWBcbi8vIHVuZGVyIGFueSBjaXJjdW1zdGFuY2VzLlxuLy8gRXZlbiBpZiB3ZSB3ZXJlLCB0aGVyZSBpcyBhbm90aGVyIGJ1ZyBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMC5cbi8vIEl0IGlzIG5vdCBzdWZmaWNpZW50IHRvIGFzc2lnbiBgc2V0SW1tZWRpYXRlYCB0byBgcmVxdWVzdEZsdXNoYCBiZWNhdXNlXG4vLyBgc2V0SW1tZWRpYXRlYCBtdXN0IGJlIGNhbGxlZCAqYnkgbmFtZSogYW5kIHRoZXJlZm9yZSBtdXN0IGJlIHdyYXBwZWQgaW4gYVxuLy8gY2xvc3VyZS5cbi8vIE5ldmVyIGZvcmdldC5cblxuLy8gZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbVNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuLy8gICAgIHJldHVybiBmdW5jdGlvbiByZXF1ZXN0Q2FsbCgpIHtcbi8vICAgICAgICAgc2V0SW1tZWRpYXRlKGNhbGxiYWNrKTtcbi8vICAgICB9O1xuLy8gfVxuXG4vLyBTYWZhcmkgNi4wIGhhcyBhIHByb2JsZW0gd2hlcmUgdGltZXJzIHdpbGwgZ2V0IGxvc3Qgd2hpbGUgdGhlIHVzZXIgaXNcbi8vIHNjcm9sbGluZy4gVGhpcyBwcm9ibGVtIGRvZXMgbm90IGltcGFjdCBBU0FQIGJlY2F1c2UgU2FmYXJpIDYuMCBzdXBwb3J0c1xuLy8gbXV0YXRpb24gb2JzZXJ2ZXJzLCBzbyB0aGF0IGltcGxlbWVudGF0aW9uIGlzIHVzZWQgaW5zdGVhZC5cbi8vIEhvd2V2ZXIsIGlmIHdlIGV2ZXIgZWxlY3QgdG8gdXNlIHRpbWVycyBpbiBTYWZhcmksIHRoZSBwcmV2YWxlbnQgd29yay1hcm91bmRcbi8vIGlzIHRvIGFkZCBhIHNjcm9sbCBldmVudCBsaXN0ZW5lciB0aGF0IGNhbGxzIGZvciBhIGZsdXNoLlxuXG4vLyBgc2V0VGltZW91dGAgZG9lcyBub3QgY2FsbCB0aGUgcGFzc2VkIGNhbGxiYWNrIGlmIHRoZSBkZWxheSBpcyBsZXNzIHRoYW5cbi8vIGFwcHJveGltYXRlbHkgNyBpbiB3ZWIgd29ya2VycyBpbiBGaXJlZm94IDggdGhyb3VnaCAxOCwgYW5kIHNvbWV0aW1lcyBub3Rcbi8vIGV2ZW4gdGhlbi5cblxuZnVuY3Rpb24gbWFrZVJlcXVlc3RDYWxsRnJvbVRpbWVyKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHJlcXVlc3RDYWxsKCkge1xuICAgICAgICAvLyBXZSBkaXNwYXRjaCBhIHRpbWVvdXQgd2l0aCBhIHNwZWNpZmllZCBkZWxheSBvZiAwIGZvciBlbmdpbmVzIHRoYXRcbiAgICAgICAgLy8gY2FuIHJlbGlhYmx5IGFjY29tbW9kYXRlIHRoYXQgcmVxdWVzdC4gVGhpcyB3aWxsIHVzdWFsbHkgYmUgc25hcHBlZFxuICAgICAgICAvLyB0byBhIDQgbWlsaXNlY29uZCBkZWxheSwgYnV0IG9uY2Ugd2UncmUgZmx1c2hpbmcsIHRoZXJlJ3Mgbm8gZGVsYXlcbiAgICAgICAgLy8gYmV0d2VlbiBldmVudHMuXG4gICAgICAgIHZhciB0aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChoYW5kbGVUaW1lciwgMCk7XG4gICAgICAgIC8vIEhvd2V2ZXIsIHNpbmNlIHRoaXMgdGltZXIgZ2V0cyBmcmVxdWVudGx5IGRyb3BwZWQgaW4gRmlyZWZveFxuICAgICAgICAvLyB3b3JrZXJzLCB3ZSBlbmxpc3QgYW4gaW50ZXJ2YWwgaGFuZGxlIHRoYXQgd2lsbCB0cnkgdG8gZmlyZVxuICAgICAgICAvLyBhbiBldmVudCAyMCB0aW1lcyBwZXIgc2Vjb25kIHVudGlsIGl0IHN1Y2NlZWRzLlxuICAgICAgICB2YXIgaW50ZXJ2YWxIYW5kbGUgPSBzZXRJbnRlcnZhbChoYW5kbGVUaW1lciwgNTApO1xuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVRpbWVyKCkge1xuICAgICAgICAgICAgLy8gV2hpY2hldmVyIHRpbWVyIHN1Y2NlZWRzIHdpbGwgY2FuY2VsIGJvdGggdGltZXJzIGFuZFxuICAgICAgICAgICAgLy8gZXhlY3V0ZSB0aGUgY2FsbGJhY2suXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZSk7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSGFuZGxlKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vLyBUaGlzIGlzIGZvciBgYXNhcC5qc2Agb25seS5cbi8vIEl0cyBuYW1lIHdpbGwgYmUgcGVyaW9kaWNhbGx5IHJhbmRvbWl6ZWQgdG8gYnJlYWsgYW55IGNvZGUgdGhhdCBkZXBlbmRzIG9uXG4vLyBpdHMgZXhpc3RlbmNlLlxucmF3QXNhcC5tYWtlUmVxdWVzdENhbGxGcm9tVGltZXIgPSBtYWtlUmVxdWVzdENhbGxGcm9tVGltZXI7XG5cbi8vIEFTQVAgd2FzIG9yaWdpbmFsbHkgYSBuZXh0VGljayBzaGltIGluY2x1ZGVkIGluIFEuIFRoaXMgd2FzIGZhY3RvcmVkIG91dFxuLy8gaW50byB0aGlzIEFTQVAgcGFja2FnZS4gSXQgd2FzIGxhdGVyIGFkYXB0ZWQgdG8gUlNWUCB3aGljaCBtYWRlIGZ1cnRoZXJcbi8vIGFtZW5kbWVudHMuIFRoZXNlIGRlY2lzaW9ucywgcGFydGljdWxhcmx5IHRvIG1hcmdpbmFsaXplIE1lc3NhZ2VDaGFubmVsIGFuZFxuLy8gdG8gY2FwdHVyZSB0aGUgTXV0YXRpb25PYnNlcnZlciBpbXBsZW1lbnRhdGlvbiBpbiBhIGNsb3N1cmUsIHdlcmUgaW50ZWdyYXRlZFxuLy8gYmFjayBpbnRvIEFTQVAgcHJvcGVyLlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3RpbGRlaW8vcnN2cC5qcy9ibG9iL2NkZGY3MjMyNTQ2YTljZjg1ODUyNGI3NWNkZTZmOWVkZjcyNjIwYTcvbGliL3JzdnAvYXNhcC5qc1xuIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gZ2V0TGVucyAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9pc3N1ZXMvNDJcbiAgdmFyIHZhbGlkTGVuID0gYjY0LmluZGV4T2YoJz0nKVxuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuXG4gICAgPyAwXG4gICAgOiA0IC0gKHZhbGlkTGVuICUgNClcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG59XG5cbi8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblxuICB2YXIgY3VyQnl0ZSA9IDBcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwXG4gICAgPyB2YWxpZExlbiAtIDRcbiAgICA6IHZhbGlkTGVuXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfFxuICAgICAgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDIpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID1cbiAgICAgICgodWludDhbaV0gPDwgMTYpICYgMHhGRjAwMDApICtcbiAgICAgICgodWludDhbaSArIDFdIDw8IDgpICYgMHhGRjAwKSArXG4gICAgICAodWludDhbaSArIDJdICYgMHhGRilcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayhcbiAgICAgIHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aClcbiAgICApKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXSArXG4gICAgICAnPT0nXG4gICAgKVxuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDEwXSArXG4gICAgICBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl0gK1xuICAgICAgJz0nXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG4iLCIiLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxudmFyIEtfTUFYX0xFTkdUSCA9IDB4N2ZmZmZmZmZcbmV4cG9ydHMua01heExlbmd0aCA9IEtfTUFYX0xFTkdUSFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBQcmludCB3YXJuaW5nIGFuZCByZWNvbW1lbmQgdXNpbmcgYGJ1ZmZlcmAgdjQueCB3aGljaCBoYXMgYW4gT2JqZWN0XG4gKiAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBXZSByZXBvcnQgdGhhdCB0aGUgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBpZiB0aGUgYXJlIG5vdCBzdWJjbGFzc2FibGVcbiAqIHVzaW5nIF9fcHJvdG9fXy4gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWBcbiAqIChTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOCkuIElFIDEwIGxhY2tzIHN1cHBvcnRcbiAqIGZvciBfX3Byb3RvX18gYW5kIGhhcyBhIGJ1Z2d5IHR5cGVkIGFycmF5IGltcGxlbWVudGF0aW9uLlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICBjb25zb2xlLmVycm9yKFxuICAgICdUaGlzIGJyb3dzZXIgbGFja3MgdHlwZWQgYXJyYXkgKFVpbnQ4QXJyYXkpIHN1cHBvcnQgd2hpY2ggaXMgcmVxdWlyZWQgYnkgJyArXG4gICAgJ2BidWZmZXJgIHY1LnguIFVzZSBgYnVmZmVyYCB2NC54IGlmIHlvdSByZXF1aXJlIG9sZCBicm93c2VyIHN1cHBvcnQuJ1xuICApXG59XG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgLy8gQ2FuIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkP1xuICB0cnkge1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuICAgIGFyci5fX3Byb3RvX18gPSB7X19wcm90b19fOiBVaW50OEFycmF5LnByb3RvdHlwZSwgZm9vOiBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9fVxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSwgJ3BhcmVudCcsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyXG4gIH1cbn0pXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIucHJvdG90eXBlLCAnb2Zmc2V0Jywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5ieXRlT2Zmc2V0XG4gIH1cbn0pXG5cbmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAobGVuZ3RoKSB7XG4gIGlmIChsZW5ndGggPiBLX01BWF9MRU5HVEgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKVxuICB9XG4gIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlXG4gIHZhciBidWYgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG4gIGJ1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIHJldHVybiBidWZcbn1cblxuLyoqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcbiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcbiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cbiAqL1xuXG5mdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZydcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGFsbG9jVW5zYWZlKGFyZylcbiAgfVxuICByZXR1cm4gZnJvbShhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTdcbmlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJlxuICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywge1xuICAgIHZhbHVlOiBudWxsLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSlcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbmZ1bmN0aW9uIGZyb20gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxuICB9XG5cbiAgaWYgKGlzQXJyYXlCdWZmZXIodmFsdWUpIHx8ICh2YWx1ZSAmJiBpc0FycmF5QnVmZmVyKHZhbHVlLmJ1ZmZlcikpKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcbiAgfVxuXG4gIHJldHVybiBmcm9tT2JqZWN0KHZhbHVlKVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG4gKiBpZiB2YWx1ZSBpcyBhIG51bWJlci5cbiAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSlcbiAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuICogQnVmZmVyLmZyb20oYnVmZmVyKVxuICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pXG4gKiovXG5CdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBmcm9tKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbi8vIE5vdGU6IENoYW5nZSBwcm90b3R5cGUgKmFmdGVyKiBCdWZmZXIuZnJvbSBpcyBkZWZpbmVkIHRvIHdvcmthcm91bmQgQ2hyb21lIGJ1Zzpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvMTQ4XG5CdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG5CdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxuXG5mdW5jdGlvbiBhc3NlcnRTaXplIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgbnVtYmVyJylcbiAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsb2MgKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgaWYgKHNpemUgPD0gMCkge1xuICAgIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSlcbiAgfVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT25seSBwYXkgYXR0ZW50aW9uIHRvIGVuY29kaW5nIGlmIGl0J3MgYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBwcmV2ZW50cyBhY2NpZGVudGFsbHkgc2VuZGluZyBpbiBhIG51bWJlciB0aGF0IHdvdWxkXG4gICAgLy8gYmUgaW50ZXJwcmV0dGVkIGFzIGEgc3RhcnQgb2Zmc2V0LlxuICAgIHJldHVybiB0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnXG4gICAgICA/IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgICAgOiBjcmVhdGVCdWZmZXIoc2l6ZSkuZmlsbChmaWxsKVxuICB9XG4gIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSlcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXG4gKiovXG5CdWZmZXIuYWxsb2MgPSBmdW5jdGlvbiAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGFsbG9jKHNpemUsIGZpbGwsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBhbGxvY1Vuc2FmZSAoc2l6ZSkge1xuICBhc3NlcnRTaXplKHNpemUpXG4gIHJldHVybiBjcmVhdGVCdWZmZXIoc2l6ZSA8IDAgPyAwIDogY2hlY2tlZChzaXplKSB8IDApXG59XG5cbi8qKlxuICogRXF1aXZhbGVudCB0byBCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqICovXG5CdWZmZXIuYWxsb2NVbnNhZmUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSlcbn1cbi8qKlxuICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICByZXR1cm4gYWxsb2NVbnNhZmUoc2l6ZSlcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICB9XG5cbiAgaWYgKCFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gIH1cblxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdmFyIGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW5ndGgpXG5cbiAgdmFyIGFjdHVhbCA9IGJ1Zi53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuXG4gIGlmIChhY3R1YWwgIT09IGxlbmd0aCkge1xuICAgIC8vIFdyaXRpbmcgYSBoZXggc3RyaW5nLCBmb3IgZXhhbXBsZSwgdGhhdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMgd2lsbFxuICAgIC8vIGNhdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGZpcnN0IGludmFsaWQgY2hhcmFjdGVyIHRvIGJlIGlnbm9yZWQuIChlLmcuXG4gICAgLy8gJ2FieHhjZCcgd2lsbCBiZSB0cmVhdGVkIGFzICdhYicpXG4gICAgYnVmID0gYnVmLnNsaWNlKDAsIGFjdHVhbClcbiAgfVxuXG4gIHJldHVybiBidWZcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAoYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB2YXIgYnVmID0gY3JlYXRlQnVmZmVyKGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIGJ1ZltpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKGJ5dGVPZmZzZXQgPCAwIHx8IGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0KSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wib2Zmc2V0XCIgaXMgb3V0c2lkZSBvZiBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmIChhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCArIChsZW5ndGggfHwgMCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJsZW5ndGhcIiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgdmFyIGJ1ZlxuICBpZiAoYnl0ZU9mZnNldCA9PT0gdW5kZWZpbmVkICYmIGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYnVmID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcbiAgfSBlbHNlIHtcbiAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2VcbiAgYnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0IChvYmopIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmopKSB7XG4gICAgdmFyIGxlbiA9IGNoZWNrZWQob2JqLmxlbmd0aCkgfCAwXG4gICAgdmFyIGJ1ZiA9IGNyZWF0ZUJ1ZmZlcihsZW4pXG5cbiAgICBpZiAoYnVmLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGJ1ZlxuICAgIH1cblxuICAgIG9iai5jb3B5KGJ1ZiwgMCwgMCwgbGVuKVxuICAgIHJldHVybiBidWZcbiAgfVxuXG4gIGlmIChvYmopIHtcbiAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KG9iaikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9iai5sZW5ndGggIT09ICdudW1iZXInIHx8IG51bWJlcklzTmFOKG9iai5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIoMClcbiAgICAgIH1cbiAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKG9iailcbiAgICB9XG5cbiAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIEFycmF5LmlzQXJyYXkob2JqLmRhdGEpKSB7XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZShvYmouZGF0YSlcbiAgICB9XG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBvciBBcnJheS1saWtlIE9iamVjdC4nKVxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwgS19NQVhfTEVOR1RIYCBoZXJlIGJlY2F1c2UgdGhhdCBmYWlscyB3aGVuXG4gIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxuICBpZiAobGVuZ3RoID49IEtfTUFYX0xFTkdUSCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICdzaXplOiAweCcgKyBLX01BWF9MRU5HVEgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAobGVuZ3RoKSB7XG4gIGlmICgrbGVuZ3RoICE9IGxlbmd0aCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGVxZXFlcVxuICAgIGxlbmd0aCA9IDBcbiAgfVxuICByZXR1cm4gQnVmZmVyLmFsbG9jKCtsZW5ndGgpXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiBiICE9IG51bGwgJiYgYi5faXNCdWZmZXIgPT09IHRydWVcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgIHggPSBhW2ldXG4gICAgICB5ID0gYltpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnbGF0aW4xJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkobGlzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYnVmID0gbGlzdFtpXVxuICAgIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoYnVmKSkge1xuICAgICAgYnVmID0gQnVmZmVyLmZyb20oYnVmKVxuICAgIH1cbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICAgIH1cbiAgICBidWYuY29weShidWZmZXIsIHBvcylcbiAgICBwb3MgKz0gYnVmLmxlbmd0aFxuICB9XG4gIHJldHVybiBidWZmZXJcbn1cblxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG4gIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoc3RyaW5nKSB8fCBpc0FycmF5QnVmZmVyKHN0cmluZykpIHtcbiAgICByZXR1cm4gc3RyaW5nLmJ5dGVMZW5ndGhcbiAgfVxuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xuICB9XG5cbiAgdmFyIGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKGxlbiA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBVc2UgYSBmb3IgbG9vcCB0byBhdm9pZCByZWN1cnNpb25cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgLy8gTm8gbmVlZCB0byB2ZXJpZnkgdGhhdCBcInRoaXMubGVuZ3RoIDw9IE1BWF9VSU5UMzJcIiBzaW5jZSBpdCdzIGEgcmVhZC1vbmx5XG4gIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXG5cbiAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXG4gIC8vIHRvIHRoZWlyIHVwcGVyL2xvd2VyIGJvdW5kcyBpZiB0aGUgdmFsdWUgcGFzc2VkIGlzIG91dCBvZiByYW5nZS5cbiAgLy8gdW5kZWZpbmVkIGlzIGhhbmRsZWQgc3BlY2lhbGx5IGFzIHBlciBFQ01BLTI2MiA2dGggRWRpdGlvbixcbiAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkIHx8IHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXG4gIC8vIGNvZXJjaW9uIGZhaWwgYmVsb3cuXG4gIGlmIChzdGFydCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcbiAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKGVuZCA8PSAwKSB7XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvLyBGb3JjZSBjb2Vyc2lvbiB0byB1aW50MzIuIFRoaXMgd2lsbCBhbHNvIGNvZXJjZSBmYWxzZXkvTmFOIHZhbHVlcyB0byAwLlxuICBlbmQgPj4+PSAwXG4gIHN0YXJ0ID4+Pj0gMFxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG4vLyBUaGlzIHByb3BlcnR5IGlzIHVzZWQgYnkgYEJ1ZmZlci5pc0J1ZmZlcmAgKGFuZCB0aGUgYGlzLWJ1ZmZlcmAgbnBtIHBhY2thZ2UpXG4vLyB0byBkZXRlY3QgYSBCdWZmZXIgaW5zdGFuY2UuIEl0J3Mgbm90IHBvc3NpYmxlIHRvIHVzZSBgaW5zdGFuY2VvZiBCdWZmZXJgXG4vLyByZWxpYWJseSBpbiBhIGJyb3dzZXJpZnkgY29udGV4dCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG11bHRpcGxlIGRpZmZlcmVudFxuLy8gY29waWVzIG9mIHRoZSAnYnVmZmVyJyBwYWNrYWdlIGluIHVzZS4gVGhpcyBtZXRob2Qgd29ya3MgZXZlbiBmb3IgQnVmZmVyXG4vLyBpbnN0YW5jZXMgdGhhdCB3ZXJlIGNyZWF0ZWQgZnJvbSBhbm90aGVyIGNvcHkgb2YgdGhlIGBidWZmZXJgIHBhY2thZ2UuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2lzc3Vlcy8xNTRcbkJ1ZmZlci5wcm90b3R5cGUuX2lzQnVmZmVyID0gdHJ1ZVxuXG5mdW5jdGlvbiBzd2FwIChiLCBuLCBtKSB7XG4gIHZhciBpID0gYltuXVxuICBiW25dID0gYlttXVxuICBiW21dID0gaVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAxNiA9IGZ1bmN0aW9uIHN3YXAxNiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgMiAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMTYtYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDEpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwMzIgPSBmdW5jdGlvbiBzd2FwMzIgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDQgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDMyLWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDY0ID0gZnVuY3Rpb24gc3dhcDY0ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSA4ICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA2NC1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgNylcbiAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcbiAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcbiAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmcgPSBCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nXG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIH1cblxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMFxuICB9XG4gIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG4gICAgcmV0dXJuIC0xXG4gIH1cbiAgaWYgKHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBzdGFydCA+Pj49IDBcbiAgZW5kID4+Pj0gMFxuICB0aGlzU3RhcnQgPj4+PSAwXG4gIHRoaXNFbmQgPj4+PSAwXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblxuICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcbiAgdmFyIHkgPSBlbmQgLSBzdGFydFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZClcbiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG4gICAgICB4ID0gdGhpc0NvcHlbaV1cbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuLy8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC5cbi8vXG4vLyBBcmd1bWVudHM6XG4vLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaFxuLy8gLSB2YWwgLSBhIHN0cmluZywgQnVmZmVyLCBvciBudW1iZXJcbi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuLy8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmdcbi8vIC0gZGlyIC0gdHJ1ZSBmb3IgaW5kZXhPZiwgZmFsc2UgZm9yIGxhc3RJbmRleE9mXG5mdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG4gIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldFxuICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG4gICAgYnl0ZU9mZnNldCA9IDBcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7XG4gICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIH1cbiAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuICBpZiAobnVtYmVySXNOYU4oYnl0ZU9mZnNldCkpIHtcbiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcbiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG4gICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcbiAgICBlbHNlIHJldHVybiAtMVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuICAgIGlmICh0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGRpcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcbn1cblxuZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICB2YXIgaW5kZXhTaXplID0gMVxuICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aFxuICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXG4gIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fFxuICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG4gICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9XG4gICAgICBpbmRleFNpemUgPSAyXG4gICAgICBhcnJMZW5ndGggLz0gMlxuICAgICAgdmFsTGVuZ3RoIC89IDJcbiAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkge1xuICAgIGlmIChpbmRleFNpemUgPT09IDEpIHtcbiAgICAgIHJldHVybiBidWZbaV1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSlcbiAgICB9XG4gIH1cblxuICB2YXIgaVxuICBpZiAoZGlyKSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG4gICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleFxuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGhcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7XG4gICAgICAgICAgZm91bmQgPSBmYWxzZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAobnVtYmVySXNOYU4ocGFyc2VkKSkgcmV0dXJuIGlcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG4gIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggPj4+IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdCdWZmZXIud3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0WywgbGVuZ3RoXSkgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCdcbiAgICApXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyAoYnl0ZXNbaSArIDFdICogMjU2KSlcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuXG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcbiAgICBzdGFydCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuXG4gICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICB2YXIgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKVxuICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZVxuICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcbiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgdGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiYnVmZmVyXCIgYXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlciBpbnN0YW5jZScpXG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50TEUgPSBmdW5jdGlvbiB3cml0ZUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsICg4ICogYnl0ZUxlbmd0aCkgLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IDBcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpIC0gMV0gIT09IDApIHtcbiAgICAgIHN1YiA9IDFcbiAgICB9XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFID0gZnVuY3Rpb24gd3JpdGVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCAoOCAqIGJ5dGVMZW5ndGgpIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSArIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGFyZ2V0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgc2hvdWxkIGJlIGEgQnVmZmVyJylcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBVc2UgYnVpbHQtaW4gd2hlbiBhdmFpbGFibGUsIG1pc3NpbmcgZnJvbSBJRTExXG4gICAgdGhpcy5jb3B5V2l0aGluKHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKVxuICB9IGVsc2UgaWYgKHRoaXMgPT09IHRhcmdldCAmJiBzdGFydCA8IHRhcmdldFN0YXJ0ICYmIHRhcmdldFN0YXJ0IDwgZW5kKSB7XG4gICAgLy8gZGVzY2VuZGluZyBjb3B5IGZyb20gZW5kXG4gICAgZm9yICh2YXIgaSA9IGxlbiAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcbiAgICAgIHRhcmdldCxcbiAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCksXG4gICAgICB0YXJnZXRTdGFydFxuICAgIClcbiAgfVxuXG4gIHJldHVybiBsZW5cbn1cblxuLy8gVXNhZ2U6XG4vLyAgICBidWZmZXIuZmlsbChudW1iZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKGJ1ZmZlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXG5CdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWwsIHN0YXJ0LCBlbmQsIGVuY29kaW5nKSB7XG4gIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IHN0YXJ0XG4gICAgICBzdGFydCA9IDBcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW5kID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBlbmRcbiAgICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gICAgfVxuICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2VuY29kaW5nIG11c3QgYmUgYSBzdHJpbmcnKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJyAmJiAhQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgfVxuICAgIGlmICh2YWwubGVuZ3RoID09PSAxKSB7XG4gICAgICB2YXIgY29kZSA9IHZhbC5jaGFyQ29kZUF0KDApXG4gICAgICBpZiAoKGVuY29kaW5nID09PSAndXRmOCcgJiYgY29kZSA8IDEyOCkgfHxcbiAgICAgICAgICBlbmNvZGluZyA9PT0gJ2xhdGluMScpIHtcbiAgICAgICAgLy8gRmFzdCBwYXRoOiBJZiBgdmFsYCBmaXRzIGludG8gYSBzaW5nbGUgYnl0ZSwgdXNlIHRoYXQgbnVtZXJpYyB2YWx1ZS5cbiAgICAgICAgdmFsID0gY29kZVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDI1NVxuICB9XG5cbiAgLy8gSW52YWxpZCByYW5nZXMgYXJlIG5vdCBzZXQgdG8gYSBkZWZhdWx0LCBzbyBjYW4gcmFuZ2UgY2hlY2sgZWFybHkuXG4gIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBzdGFydCA9IHN0YXJ0ID4+PiAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcblxuICBpZiAoIXZhbCkgdmFsID0gMFxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICAgIHRoaXNbaV0gPSB2YWxcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIGJ5dGVzID0gQnVmZmVyLmlzQnVmZmVyKHZhbClcbiAgICAgID8gdmFsXG4gICAgICA6IG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZylcbiAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG4gICAgaWYgKGxlbiA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIHZhbHVlIFwiJyArIHZhbCArXG4gICAgICAgICdcIiBpcyBpbnZhbGlkIGZvciBhcmd1bWVudCBcInZhbHVlXCInKVxuICAgIH1cbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5kIC0gc3RhcnQ7ICsraSkge1xuICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXisvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHRha2VzIGVxdWFsIHNpZ25zIGFzIGVuZCBvZiB0aGUgQmFzZTY0IGVuY29kaW5nXG4gIHN0ciA9IHN0ci5zcGxpdCgnPScpWzBdXG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHIudHJpbSgpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuLy8gQXJyYXlCdWZmZXJzIGZyb20gYW5vdGhlciBjb250ZXh0IChpLmUuIGFuIGlmcmFtZSkgZG8gbm90IHBhc3MgdGhlIGBpbnN0YW5jZW9mYCBjaGVja1xuLy8gYnV0IHRoZXkgc2hvdWxkIGJlIHRyZWF0ZWQgYXMgdmFsaWQuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE2NlxuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlciAob2JqKSB7XG4gIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fFxuICAgIChvYmogIT0gbnVsbCAmJiBvYmouY29uc3RydWN0b3IgIT0gbnVsbCAmJiBvYmouY29uc3RydWN0b3IubmFtZSA9PT0gJ0FycmF5QnVmZmVyJyAmJlxuICAgICAgdHlwZW9mIG9iai5ieXRlTGVuZ3RoID09PSAnbnVtYmVyJylcbn1cblxuZnVuY3Rpb24gbnVtYmVySXNOYU4gKG9iaikge1xuICByZXR1cm4gb2JqICE9PSBvYmogLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWNvbXBhcmVcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuXG5mdW5jdGlvbiBpc0FycmF5KGFyZykge1xuICBpZiAoQXJyYXkuaXNBcnJheSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblxuZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXI7XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG52YXIgUGFyc2VyLCBTdHJpbmdEZWNvZGVyLCBpc09iakxpdGVyYWwsIHN0cmVhbSwgdXRpbDtcblxuc3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJyk7XG5cbnV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cblN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2RlcicpLlN0cmluZ0RlY29kZXI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBjYWxsYmFjaywgY2FsbGVkLCBjaHVua3MsIGRhdGEsIGVyciwgb3B0aW9ucywgcGFyc2VyO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMykge1xuICAgIGRhdGEgPSBhcmd1bWVudHNbMF07XG4gICAgb3B0aW9ucyA9IGFyZ3VtZW50c1sxXTtcbiAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1syXTtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgY2FsbGJhY2sgYXJndW1lbnQ6IFwiICsgKEpTT04uc3RyaW5naWZ5KGNhbGxiYWNrKSkpO1xuICAgIH1cbiAgICBpZiAoISh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHwgQnVmZmVyLmlzQnVmZmVyKGFyZ3VtZW50c1swXSkpKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soRXJyb3IoXCJJbnZhbGlkIGRhdGEgYXJndW1lbnQ6IFwiICsgKEpTT04uc3RyaW5naWZ5KGRhdGEpKSkpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnIHx8IEJ1ZmZlci5pc0J1ZmZlcihhcmd1bWVudHNbMF0pKSB7XG4gICAgICBkYXRhID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSBpZiAoaXNPYmpMaXRlcmFsKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGVyciA9IFwiSW52YWxpZCBmaXJzdCBhcmd1bWVudDogXCIgKyAoSlNPTi5zdHJpbmdpZnkoYXJndW1lbnRzWzBdKSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1sxXTtcbiAgICB9IGVsc2UgaWYgKGlzT2JqTGl0ZXJhbChhcmd1bWVudHNbMV0pKSB7XG4gICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBlcnIgPSAnSW52YWxpZCBhcmd1bWVudHM6IGdvdCBvcHRpb25zIHR3aWNlIGFzIGZpcnN0IGFuZCBzZWNvbmQgYXJndW1lbnRzJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVyciA9IFwiSW52YWxpZCBmaXJzdCBhcmd1bWVudDogXCIgKyAoSlNPTi5zdHJpbmdpZnkoYXJndW1lbnRzWzFdKSk7XG4gICAgfVxuICAgIGlmIChlcnIpIHtcbiAgICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoZXJyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhFcnJvcihlcnIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcbiAgICB9XG4gIH1cbiAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICBwYXJzZXIgPSBuZXcgUGFyc2VyKG9wdGlvbnMpO1xuICBpZiAoZGF0YSAhPSBudWxsKSB7XG4gICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbigpIHtcbiAgICAgIHBhcnNlci53cml0ZShkYXRhKTtcbiAgICAgIHJldHVybiBwYXJzZXIuZW5kKCk7XG4gICAgfSk7XG4gIH1cbiAgaWYgKGNhbGxiYWNrKSB7XG4gICAgY2FsbGVkID0gZmFsc2U7XG4gICAgY2h1bmtzID0gb3B0aW9ucy5vYmpuYW1lID8ge30gOiBbXTtcbiAgICBwYXJzZXIub24oJ3JlYWRhYmxlJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2h1bmssIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICB3aGlsZSAoY2h1bmsgPSBwYXJzZXIucmVhZCgpKSB7XG4gICAgICAgIGlmIChvcHRpb25zLm9iam5hbWUpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goY2h1bmtzW2NodW5rWzBdXSA9IGNodW5rWzFdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goY2h1bmtzLnB1c2goY2h1bmspKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSk7XG4gICAgcGFyc2VyLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGVycikge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgIH0pO1xuICAgIHBhcnNlci5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgY2h1bmtzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcGFyc2VyO1xufTtcblxuUGFyc2VyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICB2YXIgYmFzZSwgYmFzZTEsIGJhc2UxMCwgYmFzZTExLCBiYXNlMTIsIGJhc2UxMywgYmFzZTE0LCBiYXNlMTUsIGJhc2UxNiwgYmFzZTIsIGJhc2UzLCBiYXNlNCwgYmFzZTUsIGJhc2U2LCBiYXNlNywgYmFzZTgsIGJhc2U5LCBrLCB2O1xuICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG4gIHRoaXMub3B0aW9ucyA9IHt9O1xuICBmb3IgKGsgaW4gb3B0aW9ucykge1xuICAgIHYgPSBvcHRpb25zW2tdO1xuICAgIHRoaXMub3B0aW9uc1trXSA9IHY7XG4gIH1cbiAgdGhpcy5vcHRpb25zLm9iamVjdE1vZGUgPSB0cnVlO1xuICBzdHJlYW0uVHJhbnNmb3JtLmNhbGwodGhpcywgdGhpcy5vcHRpb25zKTtcbiAgaWYgKChiYXNlID0gdGhpcy5vcHRpb25zKS5yb3dEZWxpbWl0ZXIgPT0gbnVsbCkge1xuICAgIGJhc2Uucm93RGVsaW1pdGVyID0gbnVsbDtcbiAgfVxuICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5yb3dEZWxpbWl0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciA9IFt0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyXTtcbiAgfVxuICBpZiAoKGJhc2UxID0gdGhpcy5vcHRpb25zKS5kZWxpbWl0ZXIgPT0gbnVsbCkge1xuICAgIGJhc2UxLmRlbGltaXRlciA9ICcsJztcbiAgfVxuICBpZiAodGhpcy5vcHRpb25zLnF1b3RlICE9PSB2b2lkIDAgJiYgIXRoaXMub3B0aW9ucy5xdW90ZSkge1xuICAgIHRoaXMub3B0aW9ucy5xdW90ZSA9ICcnO1xuICB9XG4gIGlmICgoYmFzZTIgPSB0aGlzLm9wdGlvbnMpLnF1b3RlID09IG51bGwpIHtcbiAgICBiYXNlMi5xdW90ZSA9ICdcIic7XG4gIH1cbiAgaWYgKChiYXNlMyA9IHRoaXMub3B0aW9ucykuZXNjYXBlID09IG51bGwpIHtcbiAgICBiYXNlMy5lc2NhcGUgPSAnXCInO1xuICB9XG4gIGlmICgoYmFzZTQgPSB0aGlzLm9wdGlvbnMpLmNvbHVtbnMgPT0gbnVsbCkge1xuICAgIGJhc2U0LmNvbHVtbnMgPSBudWxsO1xuICB9XG4gIGlmICgoYmFzZTUgPSB0aGlzLm9wdGlvbnMpLmNvbW1lbnQgPT0gbnVsbCkge1xuICAgIGJhc2U1LmNvbW1lbnQgPSAnJztcbiAgfVxuICBpZiAoKGJhc2U2ID0gdGhpcy5vcHRpb25zKS5vYmpuYW1lID09IG51bGwpIHtcbiAgICBiYXNlNi5vYmpuYW1lID0gZmFsc2U7XG4gIH1cbiAgaWYgKChiYXNlNyA9IHRoaXMub3B0aW9ucykudHJpbSA9PSBudWxsKSB7XG4gICAgYmFzZTcudHJpbSA9IGZhbHNlO1xuICB9XG4gIGlmICgoYmFzZTggPSB0aGlzLm9wdGlvbnMpLmx0cmltID09IG51bGwpIHtcbiAgICBiYXNlOC5sdHJpbSA9IGZhbHNlO1xuICB9XG4gIGlmICgoYmFzZTkgPSB0aGlzLm9wdGlvbnMpLnJ0cmltID09IG51bGwpIHtcbiAgICBiYXNlOS5ydHJpbSA9IGZhbHNlO1xuICB9XG4gIGlmICgoYmFzZTEwID0gdGhpcy5vcHRpb25zKS5hdXRvX3BhcnNlID09IG51bGwpIHtcbiAgICBiYXNlMTAuYXV0b19wYXJzZSA9IGZhbHNlO1xuICB9XG4gIGlmICgoYmFzZTExID0gdGhpcy5vcHRpb25zKS5hdXRvX3BhcnNlX2RhdGUgPT0gbnVsbCkge1xuICAgIGJhc2UxMS5hdXRvX3BhcnNlX2RhdGUgPSBmYWxzZTtcbiAgfVxuICBpZiAodGhpcy5vcHRpb25zLmF1dG9fcGFyc2VfZGF0ZSA9PT0gdHJ1ZSkge1xuICAgIHRoaXMub3B0aW9ucy5hdXRvX3BhcnNlX2RhdGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIG07XG4gICAgICBtID0gRGF0ZS5wYXJzZSh2YWx1ZSk7XG4gICAgICBpZiAoIWlzTmFOKG0pKSB7XG4gICAgICAgIHZhbHVlID0gbmV3IERhdGUobSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgfVxuICBpZiAoKGJhc2UxMiA9IHRoaXMub3B0aW9ucykucmVsYXggPT0gbnVsbCkge1xuICAgIGJhc2UxMi5yZWxheCA9IGZhbHNlO1xuICB9XG4gIGlmICgoYmFzZTEzID0gdGhpcy5vcHRpb25zKS5yZWxheF9jb2x1bW5fY291bnQgPT0gbnVsbCkge1xuICAgIGJhc2UxMy5yZWxheF9jb2x1bW5fY291bnQgPSBmYWxzZTtcbiAgfVxuICBpZiAoKGJhc2UxNCA9IHRoaXMub3B0aW9ucykuc2tpcF9lbXB0eV9saW5lcyA9PSBudWxsKSB7XG4gICAgYmFzZTE0LnNraXBfZW1wdHlfbGluZXMgPSBmYWxzZTtcbiAgfVxuICBpZiAoKGJhc2UxNSA9IHRoaXMub3B0aW9ucykubWF4X2xpbWl0X29uX2RhdGFfcmVhZCA9PSBudWxsKSB7XG4gICAgYmFzZTE1Lm1heF9saW1pdF9vbl9kYXRhX3JlYWQgPSAxMjgwMDA7XG4gIH1cbiAgaWYgKChiYXNlMTYgPSB0aGlzLm9wdGlvbnMpLnNraXBfbGluZXNfd2l0aF9lbXB0eV92YWx1ZXMgPT0gbnVsbCkge1xuICAgIGJhc2UxNi5za2lwX2xpbmVzX3dpdGhfZW1wdHlfdmFsdWVzID0gZmFsc2U7XG4gIH1cbiAgdGhpcy5saW5lcyA9IDA7XG4gIHRoaXMuY291bnQgPSAwO1xuICB0aGlzLnNraXBwZWRfbGluZV9jb3VudCA9IDA7XG4gIHRoaXMuZW1wdHlfbGluZV9jb3VudCA9IDA7XG4gIHRoaXMuaXNfaW50ID0gL14oXFwtfFxcKyk/KFsxLTldK1swLTldKikkLztcbiAgdGhpcy5pc19mbG9hdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSAtIHBhcnNlRmxvYXQodmFsdWUpICsgMSkgPj0gMDtcbiAgfTtcbiAgdGhpcy5fID0ge1xuICAgIGRlY29kZXI6IG5ldyBTdHJpbmdEZWNvZGVyKCksXG4gICAgcXVvdGluZzogZmFsc2UsXG4gICAgY29tbWVudGluZzogZmFsc2UsXG4gICAgZmllbGQ6IG51bGwsXG4gICAgbmV4dENoYXI6IG51bGwsXG4gICAgY2xvc2luZ1F1b3RlOiAwLFxuICAgIGxpbmU6IFtdLFxuICAgIGNodW5rczogW10sXG4gICAgcmF3QnVmOiAnJyxcbiAgICBidWY6ICcnLFxuICAgIHJvd0RlbGltaXRlckxlbmd0aDogdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciA/IE1hdGgubWF4LmFwcGx5KE1hdGgsIHRoaXMub3B0aW9ucy5yb3dEZWxpbWl0ZXIubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgIHJldHVybiB2Lmxlbmd0aDtcbiAgICB9KSkgOiB2b2lkIDBcbiAgfTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG51dGlsLmluaGVyaXRzKFBhcnNlciwgc3RyZWFtLlRyYW5zZm9ybSk7XG5cbm1vZHVsZS5leHBvcnRzLlBhcnNlciA9IFBhcnNlcjtcblxuUGFyc2VyLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICB2YXIgZXJyO1xuICBpZiAoY2h1bmsgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICBjaHVuayA9IHRoaXMuXy5kZWNvZGVyLndyaXRlKGNodW5rKTtcbiAgfVxuICBlcnIgPSB0aGlzLl9fd3JpdGUoY2h1bmssIGZhbHNlKTtcbiAgaWYgKGVycikge1xuICAgIHJldHVybiB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgfVxuICByZXR1cm4gY2FsbGJhY2soKTtcbn07XG5cblBhcnNlci5wcm90b3R5cGUuX2ZsdXNoID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIGVycjtcbiAgZXJyID0gdGhpcy5fX3dyaXRlKHRoaXMuXy5kZWNvZGVyLmVuZCgpLCB0cnVlKTtcbiAgaWYgKGVycikge1xuICAgIHJldHVybiB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgfVxuICBpZiAodGhpcy5fLnF1b3RpbmcpIHtcbiAgICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKFwiUXVvdGVkIGZpZWxkIG5vdCB0ZXJtaW5hdGVkIGF0IGxpbmUgXCIgKyAodGhpcy5saW5lcyArIDEpKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICh0aGlzLl8ubGluZS5sZW5ndGggPiAwKSB7XG4gICAgZXJyID0gdGhpcy5fX3B1c2godGhpcy5fLmxpbmUpO1xuICAgIGlmIChlcnIpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhlcnIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2FsbGJhY2soKTtcbn07XG5cblBhcnNlci5wcm90b3R5cGUuX19wdXNoID0gZnVuY3Rpb24obGluZSkge1xuICB2YXIgY2FsbF9jb2x1bW5fdWRmLCBjb2x1bW5zLCBlcnIsIGZpZWxkLCBpLCBqLCBsZW4sIGxpbmVBc0NvbHVtbnMsIHJhd0J1ZiwgcmVmLCByb3c7XG4gIGlmICh0aGlzLm9wdGlvbnMuc2tpcF9saW5lc193aXRoX2VtcHR5X3ZhbHVlcyAmJiBsaW5lLmpvaW4oJycpLnRyaW0oKSA9PT0gJycpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcm93ID0gbnVsbDtcbiAgaWYgKHRoaXMub3B0aW9ucy5jb2x1bW5zID09PSB0cnVlKSB7XG4gICAgdGhpcy5vcHRpb25zLmNvbHVtbnMgPSBsaW5lO1xuICAgIHJhd0J1ZiA9ICcnO1xuICAgIHJldHVybjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmNvbHVtbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYWxsX2NvbHVtbl91ZGYgPSBmdW5jdGlvbihmbiwgbGluZSkge1xuICAgICAgdmFyIGNvbHVtbnMsIGVycjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbHVtbnMgPSBmbi5jYWxsKG51bGwsIGxpbmUpO1xuICAgICAgICByZXR1cm4gW251bGwsIGNvbHVtbnNdO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXJyID0gZXJyb3I7XG4gICAgICAgIHJldHVybiBbZXJyXTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJlZiA9IGNhbGxfY29sdW1uX3VkZih0aGlzLm9wdGlvbnMuY29sdW1ucywgbGluZSksIGVyciA9IHJlZlswXSwgY29sdW1ucyA9IHJlZlsxXTtcbiAgICBpZiAoZXJyKSB7XG4gICAgICByZXR1cm4gZXJyO1xuICAgIH1cbiAgICB0aGlzLm9wdGlvbnMuY29sdW1ucyA9IGNvbHVtbnM7XG4gICAgcmF3QnVmID0gJyc7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghdGhpcy5fLmxpbmVfbGVuZ3RoICYmIGxpbmUubGVuZ3RoID4gMCkge1xuICAgIHRoaXMuXy5saW5lX2xlbmd0aCA9IHRoaXMub3B0aW9ucy5jb2x1bW5zID8gdGhpcy5vcHRpb25zLmNvbHVtbnMubGVuZ3RoIDogbGluZS5sZW5ndGg7XG4gIH1cbiAgaWYgKGxpbmUubGVuZ3RoID09PSAxICYmIGxpbmVbMF0gPT09ICcnKSB7XG4gICAgdGhpcy5lbXB0eV9saW5lX2NvdW50Kys7XG4gIH0gZWxzZSBpZiAobGluZS5sZW5ndGggIT09IHRoaXMuXy5saW5lX2xlbmd0aCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMucmVsYXhfY29sdW1uX2NvdW50KSB7XG4gICAgICB0aGlzLmNvdW50Kys7XG4gICAgICB0aGlzLnNraXBwZWRfbGluZV9jb3VudCsrO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNvbHVtbnMgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIEVycm9yKFwiTnVtYmVyIG9mIGNvbHVtbnMgb24gbGluZSBcIiArIHRoaXMubGluZXMgKyBcIiBkb2VzIG5vdCBtYXRjaCBoZWFkZXJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBFcnJvcihcIk51bWJlciBvZiBjb2x1bW5zIGlzIGluY29uc2lzdGVudCBvbiBsaW5lIFwiICsgdGhpcy5saW5lcyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRoaXMuY291bnQrKztcbiAgfVxuICBpZiAodGhpcy5vcHRpb25zLmNvbHVtbnMgIT0gbnVsbCkge1xuICAgIGxpbmVBc0NvbHVtbnMgPSB7fTtcbiAgICBmb3IgKGkgPSBqID0gMCwgbGVuID0gbGluZS5sZW5ndGg7IGogPCBsZW47IGkgPSArK2opIHtcbiAgICAgIGZpZWxkID0gbGluZVtpXTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29sdW1uc1tpXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBsaW5lQXNDb2x1bW5zW3RoaXMub3B0aW9ucy5jb2x1bW5zW2ldXSA9IGZpZWxkO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLm9iam5hbWUpIHtcbiAgICAgIHJvdyA9IFtsaW5lQXNDb2x1bW5zW3RoaXMub3B0aW9ucy5vYmpuYW1lXSwgbGluZUFzQ29sdW1uc107XG4gICAgfSBlbHNlIHtcbiAgICAgIHJvdyA9IGxpbmVBc0NvbHVtbnM7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJvdyA9IGxpbmU7XG4gIH1cbiAgaWYgKHRoaXMuY291bnQgPCB0aGlzLm9wdGlvbnMuZnJvbSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAodGhpcy5jb3VudCA+IHRoaXMub3B0aW9ucy50bykge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAodGhpcy5vcHRpb25zLnJhdykge1xuICAgIHRoaXMucHVzaCh7XG4gICAgICByYXc6IHRoaXMuXy5yYXdCdWYsXG4gICAgICByb3c6IHJvd1xuICAgIH0pO1xuICAgIHRoaXMuXy5yYXdCdWYgPSAnJztcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnB1c2gocm93KTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cblBhcnNlci5wcm90b3R5cGUuX193cml0ZSA9IGZ1bmN0aW9uKGNoYXJzLCBlbmQpIHtcbiAgdmFyIGFyZU5leHRDaGFyc0RlbGltaXRlciwgYXJlTmV4dENoYXJzUm93RGVsaW1pdGVycywgYXV0b19wYXJzZSwgY2hhciwgZXJyLCBlc2NhcGVJc1F1b3RlLCBpLCBpc0RlbGltaXRlciwgaXNFc2NhcGUsIGlzTmV4dENoYXJBQ29tbWVudCwgaXNRdW90ZSwgaXNSb3dEZWxpbWl0ZXIsIGlzUm93RGVsaW1pdGVyTGVuZ3RoLCBpc19mbG9hdCwgaXNfaW50LCBsLCBsdHJpbSwgbmV4dENoYXJQb3MsIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgcmVmNCwgcmVmNSwgcmVtYWluaW5nQnVmZmVyLCByb3dEZWxpbWl0ZXIsIHJ0cmltLCB3YXNDb21tZW50aW5nO1xuICBpc19pbnQgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgX3RoaXMuaXNfaW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5pc19pbnQodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmlzX2ludC50ZXN0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSh0aGlzKTtcbiAgaXNfZmxvYXQgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgX3RoaXMuaXNfZmxvYXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmlzX2Zsb2F0KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5pc19mbG9hdC50ZXN0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSh0aGlzKTtcbiAgYXV0b19wYXJzZSA9IChmdW5jdGlvbihfdGhpcykge1xuICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKCFfdGhpcy5vcHRpb25zLmF1dG9fcGFyc2UpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBfdGhpcy5vcHRpb25zLmF1dG9fcGFyc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm9wdGlvbnMuYXV0b19wYXJzZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNfaW50KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNfZmxvYXQodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzLm9wdGlvbnMuYXV0b19wYXJzZV9kYXRlKSB7XG4gICAgICAgIHZhbHVlID0gX3RoaXMub3B0aW9ucy5hdXRvX3BhcnNlX2RhdGUodmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH0pKHRoaXMpO1xuICBsdHJpbSA9IHRoaXMub3B0aW9ucy50cmltIHx8IHRoaXMub3B0aW9ucy5sdHJpbTtcbiAgcnRyaW0gPSB0aGlzLm9wdGlvbnMudHJpbSB8fCB0aGlzLm9wdGlvbnMucnRyaW07XG4gIGNoYXJzID0gdGhpcy5fLmJ1ZiArIGNoYXJzO1xuICBsID0gY2hhcnMubGVuZ3RoO1xuICBpID0gMDtcbiAgaWYgKHRoaXMubGluZXMgPT09IDAgJiYgMHhGRUZGID09PSBjaGFycy5jaGFyQ29kZUF0KDApKSB7XG4gICAgaSsrO1xuICB9XG4gIHdoaWxlIChpIDwgbCkge1xuICAgIGlmICghZW5kKSB7XG4gICAgICByZW1haW5pbmdCdWZmZXIgPSBjaGFycy5zdWJzdHIoaSwgbCAtIGkpO1xuICAgICAgaWYgKCghdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciAmJiBpICsgMyA+IGwpIHx8ICghdGhpcy5fLmNvbW1lbnRpbmcgJiYgbCAtIGkgPCB0aGlzLm9wdGlvbnMuY29tbWVudC5sZW5ndGggJiYgdGhpcy5vcHRpb25zLmNvbW1lbnQuc3Vic3RyKDAsIGwgLSBpKSA9PT0gcmVtYWluaW5nQnVmZmVyKSB8fCAodGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciAmJiBsIC0gaSA8IHRoaXMuXy5yb3dEZWxpbWl0ZXJMZW5ndGggJiYgdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlci5zb21lKGZ1bmN0aW9uKHJkKSB7XG4gICAgICAgIHJldHVybiByZC5zdWJzdHIoMCwgbCAtIGkpID09PSByZW1haW5pbmdCdWZmZXI7XG4gICAgICB9KSkgfHwgKHRoaXMub3B0aW9ucy5yb3dEZWxpbWl0ZXIgJiYgdGhpcy5fLnF1b3RpbmcgJiYgbCAtIGkgPCAodGhpcy5vcHRpb25zLnF1b3RlLmxlbmd0aCArIHRoaXMuXy5yb3dEZWxpbWl0ZXJMZW5ndGgpICYmIHRoaXMub3B0aW9ucy5yb3dEZWxpbWl0ZXIuc29tZSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJkKSB7XG4gICAgICAgICAgcmV0dXJuIChfdGhpcy5vcHRpb25zLnF1b3RlICsgcmQpLnN1YnN0cigwLCBsIC0gaSkgPT09IHJlbWFpbmluZ0J1ZmZlcjtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpKSkgfHwgKGwgLSBpIDw9IHRoaXMub3B0aW9ucy5kZWxpbWl0ZXIubGVuZ3RoICYmIHRoaXMub3B0aW9ucy5kZWxpbWl0ZXIuc3Vic3RyKDAsIGwgLSBpKSA9PT0gcmVtYWluaW5nQnVmZmVyKSB8fCAobCAtIGkgPD0gdGhpcy5vcHRpb25zLmVzY2FwZS5sZW5ndGggJiYgdGhpcy5vcHRpb25zLmVzY2FwZS5zdWJzdHIoMCwgbCAtIGkpID09PSByZW1haW5pbmdCdWZmZXIpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBjaGFyID0gdGhpcy5fLm5leHRDaGFyID8gdGhpcy5fLm5leHRDaGFyIDogY2hhcnMuY2hhckF0KGkpO1xuICAgIHRoaXMuXy5uZXh0Q2hhciA9IGwgPiBpICsgMSA/IGNoYXJzLmNoYXJBdChpICsgMSkgOiAnJztcbiAgICBpZiAodGhpcy5vcHRpb25zLnJhdykge1xuICAgICAgdGhpcy5fLnJhd0J1ZiArPSBjaGFyO1xuICAgIH1cbiAgICBpZiAodGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciA9PSBudWxsKSB7XG4gICAgICBuZXh0Q2hhclBvcyA9IGk7XG4gICAgICByb3dEZWxpbWl0ZXIgPSBudWxsO1xuICAgICAgaWYgKCF0aGlzLl8ucXVvdGluZyAmJiAoY2hhciA9PT0gJ1xcbicgfHwgY2hhciA9PT0gJ1xccicpKSB7XG4gICAgICAgIHJvd0RlbGltaXRlciA9IGNoYXI7XG4gICAgICAgIG5leHRDaGFyUG9zICs9IDE7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuXy5xdW90aW5nICYmIGNoYXIgPT09IHRoaXMub3B0aW9ucy5xdW90ZSAmJiAoKHJlZiA9IHRoaXMuXy5uZXh0Q2hhcikgPT09ICdcXG4nIHx8IHJlZiA9PT0gJ1xccicpKSB7XG4gICAgICAgIHJvd0RlbGltaXRlciA9IHRoaXMuXy5uZXh0Q2hhcjtcbiAgICAgICAgbmV4dENoYXJQb3MgKz0gMjtcbiAgICAgICAgaWYgKHRoaXMucmF3KSB7XG4gICAgICAgICAgcmF3QnVmICs9IHRoaXMuXy5uZXh0Q2hhcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHJvd0RlbGltaXRlcikge1xuICAgICAgICBpZiAocm93RGVsaW1pdGVyID09PSAnXFxyJyAmJiBjaGFycy5jaGFyQXQobmV4dENoYXJQb3MpID09PSAnXFxuJykge1xuICAgICAgICAgIHJvd0RlbGltaXRlciArPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyID0gW3Jvd0RlbGltaXRlcl07XG4gICAgICAgIHRoaXMuXy5yb3dEZWxpbWl0ZXJMZW5ndGggPSByb3dEZWxpbWl0ZXIubGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuXy5jb21tZW50aW5nICYmIGNoYXIgPT09IHRoaXMub3B0aW9ucy5lc2NhcGUpIHtcbiAgICAgIGVzY2FwZUlzUXVvdGUgPSB0aGlzLm9wdGlvbnMuZXNjYXBlID09PSB0aGlzLm9wdGlvbnMucXVvdGU7XG4gICAgICBpc0VzY2FwZSA9IHRoaXMuXy5uZXh0Q2hhciA9PT0gdGhpcy5vcHRpb25zLmVzY2FwZTtcbiAgICAgIGlzUXVvdGUgPSB0aGlzLl8ubmV4dENoYXIgPT09IHRoaXMub3B0aW9ucy5xdW90ZTtcbiAgICAgIGlmICghKGVzY2FwZUlzUXVvdGUgJiYgKHRoaXMuXy5maWVsZCA9PSBudWxsKSAmJiAhdGhpcy5fLnF1b3RpbmcpICYmIChpc0VzY2FwZSB8fCBpc1F1b3RlKSkge1xuICAgICAgICBpKys7XG4gICAgICAgIGNoYXIgPSB0aGlzLl8ubmV4dENoYXI7XG4gICAgICAgIHRoaXMuXy5uZXh0Q2hhciA9IGNoYXJzLmNoYXJBdChpICsgMSk7XG4gICAgICAgIGlmICh0aGlzLl8uZmllbGQgPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuXy5maWVsZCA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuXy5maWVsZCArPSBjaGFyO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJhdykge1xuICAgICAgICAgIHRoaXMuXy5yYXdCdWYgKz0gY2hhcjtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuXy5jb21tZW50aW5nICYmIGNoYXIgPT09IHRoaXMub3B0aW9ucy5xdW90ZSkge1xuICAgICAgaWYgKHRoaXMuXy5xdW90aW5nKSB7XG4gICAgICAgIGFyZU5leHRDaGFyc1Jvd0RlbGltaXRlcnMgPSB0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyICYmIHRoaXMub3B0aW9ucy5yb3dEZWxpbWl0ZXIuc29tZShmdW5jdGlvbihyZCkge1xuICAgICAgICAgIHJldHVybiBjaGFycy5zdWJzdHIoaSArIDEsIHJkLmxlbmd0aCkgPT09IHJkO1xuICAgICAgICB9KTtcbiAgICAgICAgYXJlTmV4dENoYXJzRGVsaW1pdGVyID0gY2hhcnMuc3Vic3RyKGkgKyAxLCB0aGlzLm9wdGlvbnMuZGVsaW1pdGVyLmxlbmd0aCkgPT09IHRoaXMub3B0aW9ucy5kZWxpbWl0ZXI7XG4gICAgICAgIGlzTmV4dENoYXJBQ29tbWVudCA9IHRoaXMuXy5uZXh0Q2hhciA9PT0gdGhpcy5vcHRpb25zLmNvbW1lbnQ7XG4gICAgICAgIGlmICh0aGlzLl8ubmV4dENoYXIgJiYgIWFyZU5leHRDaGFyc1Jvd0RlbGltaXRlcnMgJiYgIWFyZU5leHRDaGFyc0RlbGltaXRlciAmJiAhaXNOZXh0Q2hhckFDb21tZW50KSB7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZWxheCkge1xuICAgICAgICAgICAgdGhpcy5fLnF1b3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLl8uZmllbGQpIHtcbiAgICAgICAgICAgICAgdGhpcy5fLmZpZWxkID0gXCJcIiArIHRoaXMub3B0aW9ucy5xdW90ZSArIHRoaXMuXy5maWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEVycm9yKFwiSW52YWxpZCBjbG9zaW5nIHF1b3RlIGF0IGxpbmUgXCIgKyAodGhpcy5saW5lcyArIDEpICsgXCI7IGZvdW5kIFwiICsgKEpTT04uc3RyaW5naWZ5KHRoaXMuXy5uZXh0Q2hhcikpICsgXCIgaW5zdGVhZCBvZiBkZWxpbWl0ZXIgXCIgKyAoSlNPTi5zdHJpbmdpZnkodGhpcy5vcHRpb25zLmRlbGltaXRlcikpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fLnF1b3RpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl8uY2xvc2luZ1F1b3RlID0gdGhpcy5vcHRpb25zLnF1b3RlLmxlbmd0aDtcbiAgICAgICAgICBpKys7XG4gICAgICAgICAgaWYgKGVuZCAmJiBpID09PSBsKSB7XG4gICAgICAgICAgICB0aGlzLl8ubGluZS5wdXNoKGF1dG9fcGFyc2UodGhpcy5fLmZpZWxkIHx8ICcnKSk7XG4gICAgICAgICAgICB0aGlzLl8uZmllbGQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghdGhpcy5fLmZpZWxkKSB7XG4gICAgICAgIHRoaXMuXy5xdW90aW5nID0gdHJ1ZTtcbiAgICAgICAgaSsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoKHRoaXMuXy5maWVsZCAhPSBudWxsKSAmJiAhdGhpcy5vcHRpb25zLnJlbGF4KSB7XG4gICAgICAgIHJldHVybiBFcnJvcihcIkludmFsaWQgb3BlbmluZyBxdW90ZSBhdCBsaW5lIFwiICsgKHRoaXMubGluZXMgKyAxKSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlzUm93RGVsaW1pdGVyID0gdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciAmJiB0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyLnNvbWUoZnVuY3Rpb24ocmQpIHtcbiAgICAgIHJldHVybiBjaGFycy5zdWJzdHIoaSwgcmQubGVuZ3RoKSA9PT0gcmQ7XG4gICAgfSk7XG4gICAgaWYgKGlzUm93RGVsaW1pdGVyIHx8IChlbmQgJiYgaSA9PT0gbCAtIDEpKSB7XG4gICAgICB0aGlzLmxpbmVzKys7XG4gICAgfVxuICAgIHdhc0NvbW1lbnRpbmcgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuXy5jb21tZW50aW5nICYmICF0aGlzLl8ucXVvdGluZyAmJiB0aGlzLm9wdGlvbnMuY29tbWVudCAmJiBjaGFycy5zdWJzdHIoaSwgdGhpcy5vcHRpb25zLmNvbW1lbnQubGVuZ3RoKSA9PT0gdGhpcy5vcHRpb25zLmNvbW1lbnQpIHtcbiAgICAgIHRoaXMuXy5jb21tZW50aW5nID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuXy5jb21tZW50aW5nICYmIGlzUm93RGVsaW1pdGVyKSB7XG4gICAgICB3YXNDb21tZW50aW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuXy5jb21tZW50aW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGlzRGVsaW1pdGVyID0gY2hhcnMuc3Vic3RyKGksIHRoaXMub3B0aW9ucy5kZWxpbWl0ZXIubGVuZ3RoKSA9PT0gdGhpcy5vcHRpb25zLmRlbGltaXRlcjtcbiAgICBpZiAoIXRoaXMuXy5jb21tZW50aW5nICYmICF0aGlzLl8ucXVvdGluZyAmJiAoaXNEZWxpbWl0ZXIgfHwgaXNSb3dEZWxpbWl0ZXIpKSB7XG4gICAgICBpZiAoaXNSb3dEZWxpbWl0ZXIpIHtcbiAgICAgICAgaXNSb3dEZWxpbWl0ZXJMZW5ndGggPSB0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyLmZpbHRlcihmdW5jdGlvbihyZCkge1xuICAgICAgICAgIHJldHVybiBjaGFycy5zdWJzdHIoaSwgcmQubGVuZ3RoKSA9PT0gcmQ7XG4gICAgICAgIH0pWzBdLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChpc1Jvd0RlbGltaXRlciAmJiB0aGlzLl8ubGluZS5sZW5ndGggPT09IDAgJiYgKHRoaXMuXy5maWVsZCA9PSBudWxsKSkge1xuICAgICAgICBpZiAod2FzQ29tbWVudGluZyB8fCB0aGlzLm9wdGlvbnMuc2tpcF9lbXB0eV9saW5lcykge1xuICAgICAgICAgIGkgKz0gaXNSb3dEZWxpbWl0ZXJMZW5ndGg7XG4gICAgICAgICAgdGhpcy5fLm5leHRDaGFyID0gY2hhcnMuY2hhckF0KGkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocnRyaW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLl8uY2xvc2luZ1F1b3RlKSB7XG4gICAgICAgICAgdGhpcy5fLmZpZWxkID0gKHJlZjEgPSB0aGlzLl8uZmllbGQpICE9IG51bGwgPyByZWYxLnRyaW1SaWdodCgpIDogdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl8ubGluZS5wdXNoKGF1dG9fcGFyc2UodGhpcy5fLmZpZWxkIHx8ICcnKSk7XG4gICAgICB0aGlzLl8uY2xvc2luZ1F1b3RlID0gMDtcbiAgICAgIHRoaXMuXy5maWVsZCA9IG51bGw7XG4gICAgICBpZiAoaXNEZWxpbWl0ZXIpIHtcbiAgICAgICAgaSArPSB0aGlzLm9wdGlvbnMuZGVsaW1pdGVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fLm5leHRDaGFyID0gY2hhcnMuY2hhckF0KGkpO1xuICAgICAgICBpZiAoZW5kICYmICF0aGlzLl8ubmV4dENoYXIpIHtcbiAgICAgICAgICBpc1Jvd0RlbGltaXRlciA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fLmxpbmUucHVzaCgnJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc1Jvd0RlbGltaXRlcikge1xuICAgICAgICBlcnIgPSB0aGlzLl9fcHVzaCh0aGlzLl8ubGluZSk7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gZXJyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuXy5saW5lID0gW107XG4gICAgICAgIGkgKz0gaXNSb3dEZWxpbWl0ZXJMZW5ndGg7XG4gICAgICAgIHRoaXMuXy5uZXh0Q2hhciA9IGNoYXJzLmNoYXJBdChpKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghdGhpcy5fLmNvbW1lbnRpbmcgJiYgIXRoaXMuXy5xdW90aW5nICYmIChjaGFyID09PSAnICcgfHwgY2hhciA9PT0gJ1xcdCcpKSB7XG4gICAgICBpZiAodGhpcy5fLmZpZWxkID09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fLmZpZWxkID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAoIShsdHJpbSAmJiAhdGhpcy5fLmZpZWxkKSkge1xuICAgICAgICB0aGlzLl8uZmllbGQgKz0gY2hhcjtcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9IGVsc2UgaWYgKCF0aGlzLl8uY29tbWVudGluZykge1xuICAgICAgaWYgKHRoaXMuXy5maWVsZCA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuXy5maWVsZCA9ICcnO1xuICAgICAgfVxuICAgICAgdGhpcy5fLmZpZWxkICs9IGNoYXI7XG4gICAgICBpKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGkrKztcbiAgICB9XG4gICAgaWYgKCF0aGlzLl8uY29tbWVudGluZyAmJiAoKHJlZjIgPSB0aGlzLl8uZmllbGQpICE9IG51bGwgPyByZWYyLmxlbmd0aCA6IHZvaWQgMCkgPiB0aGlzLm9wdGlvbnMubWF4X2xpbWl0X29uX2RhdGFfcmVhZCkge1xuICAgICAgcmV0dXJuIEVycm9yKFwiRmllbGQgZXhjZWVkcyBtYXhfbGltaXRfb25fZGF0YV9yZWFkIHNldHRpbmcgKFwiICsgdGhpcy5vcHRpb25zLm1heF9saW1pdF9vbl9kYXRhX3JlYWQgKyBcIikgXCIgKyAoSlNPTi5zdHJpbmdpZnkodGhpcy5vcHRpb25zLmRlbGltaXRlcikpKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLl8uY29tbWVudGluZyAmJiAoKHJlZjMgPSB0aGlzLl8ubGluZSkgIT0gbnVsbCA/IHJlZjMubGVuZ3RoIDogdm9pZCAwKSA+IHRoaXMub3B0aW9ucy5tYXhfbGltaXRfb25fZGF0YV9yZWFkKSB7XG4gICAgICByZXR1cm4gRXJyb3IoXCJSb3cgZGVsaW1pdGVyIG5vdCBmb3VuZCBpbiB0aGUgZmlsZSBcIiArIChKU09OLnN0cmluZ2lmeSh0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyKSkpO1xuICAgIH1cbiAgfVxuICBpZiAoZW5kKSB7XG4gICAgaWYgKHRoaXMuXy5maWVsZCAhPSBudWxsKSB7XG4gICAgICBpZiAocnRyaW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLl8uY2xvc2luZ1F1b3RlKSB7XG4gICAgICAgICAgdGhpcy5fLmZpZWxkID0gKHJlZjQgPSB0aGlzLl8uZmllbGQpICE9IG51bGwgPyByZWY0LnRyaW1SaWdodCgpIDogdm9pZCAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl8ubGluZS5wdXNoKGF1dG9fcGFyc2UodGhpcy5fLmZpZWxkIHx8ICcnKSk7XG4gICAgICB0aGlzLl8uZmllbGQgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoKChyZWY1ID0gdGhpcy5fLmZpZWxkKSAhPSBudWxsID8gcmVmNS5sZW5ndGggOiB2b2lkIDApID4gdGhpcy5vcHRpb25zLm1heF9saW1pdF9vbl9kYXRhX3JlYWQpIHtcbiAgICAgIHJldHVybiBFcnJvcihcIkRlbGltaXRlciBub3QgZm91bmQgaW4gdGhlIGZpbGUgXCIgKyAoSlNPTi5zdHJpbmdpZnkodGhpcy5vcHRpb25zLmRlbGltaXRlcikpKTtcbiAgICB9XG4gICAgaWYgKGwgPT09IDApIHtcbiAgICAgIHRoaXMubGluZXMrKztcbiAgICB9XG4gICAgaWYgKHRoaXMuXy5saW5lLmxlbmd0aCA+IHRoaXMub3B0aW9ucy5tYXhfbGltaXRfb25fZGF0YV9yZWFkKSB7XG4gICAgICByZXR1cm4gRXJyb3IoXCJSb3cgZGVsaW1pdGVyIG5vdCBmb3VuZCBpbiB0aGUgZmlsZSBcIiArIChKU09OLnN0cmluZ2lmeSh0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyKSkpO1xuICAgIH1cbiAgfVxuICB0aGlzLl8uYnVmID0gY2hhcnMuc3Vic3RyKGkpO1xuICByZXR1cm4gbnVsbDtcbn07XG5cbmlzT2JqTGl0ZXJhbCA9IGZ1bmN0aW9uKF9vYmopIHtcbiAgdmFyIF90ZXN0O1xuICBfdGVzdCA9IF9vYmo7XG4gIGlmICh0eXBlb2YgX29iaiAhPT0gJ29iamVjdCcgfHwgX29iaiA9PT0gbnVsbCB8fCBBcnJheS5pc0FycmF5KF9vYmopKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoZnVuY3Rpb24oKSB7XG4gICAgICB3aGlsZSAoIWZhbHNlKSB7XG4gICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoX3Rlc3QgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoX3Rlc3QpKSA9PT0gbnVsbCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKF9vYmogPT09IF90ZXN0KTtcbiAgICB9KSgpO1xuICB9XG59O1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbnZhciBTdHJpbmdEZWNvZGVyLCBwYXJzZTtcblxuU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyJykuU3RyaW5nRGVjb2RlcjtcblxucGFyc2UgPSByZXF1aXJlKCcuL2luZGV4Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGF0YSwgb3B0aW9ucykge1xuICB2YXIgZGVjb2RlciwgZXJyLCBwYXJzZXIsIHJlY29yZHM7XG4gIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgcmVjb3JkcyA9IG9wdGlvbnMub2JqbmFtZSA/IHt9IDogW107XG4gIGlmIChkYXRhIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKCk7XG4gICAgZGF0YSA9IGRlY29kZXIud3JpdGUoZGF0YSk7XG4gIH1cbiAgcGFyc2VyID0gbmV3IHBhcnNlLlBhcnNlcihvcHRpb25zKTtcbiAgcGFyc2VyLnB1c2ggPSBmdW5jdGlvbihyZWNvcmQpIHtcbiAgICBpZiAob3B0aW9ucy5vYmpuYW1lKSB7XG4gICAgICByZXR1cm4gcmVjb3Jkc1tyZWNvcmRbMF1dID0gcmVjb3JkWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVjb3Jkcy5wdXNoKHJlY29yZCk7XG4gICAgfVxuICB9O1xuICBlcnIgPSBwYXJzZXIuX193cml0ZShkYXRhLCBmYWxzZSk7XG4gIGlmIChlcnIpIHtcbiAgICB0aHJvdyBlcnI7XG4gIH1cbiAgaWYgKGRhdGEgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICBlcnIgPSBwYXJzZXIuX193cml0ZShkYXRhLmVuZCgpLCB0cnVlKTtcbiAgICBpZiAoZXJyKSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG4gIHBhcnNlci5fZmx1c2goKGZ1bmN0aW9uKCkge30pKTtcbiAgcmV0dXJuIHJlY29yZHM7XG59O1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbnZhciBTdHJpbmdpZmllciwgZ2V0LCBzdHJlYW0sIHV0aWw7XG5cbnN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpO1xuXG51dGlsID0gcmVxdWlyZSgndXRpbCcpO1xuXG5nZXQgPSByZXF1aXJlKCdsb2Rhc2guZ2V0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBjYWxsYmFjaywgY2h1bmtzLCBkYXRhLCBvcHRpb25zLCBzdHJpbmdpZmllcjtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcbiAgICBkYXRhID0gYXJndW1lbnRzWzBdO1xuICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMV07XG4gICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbMl07XG4gIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGRhdGEgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMF07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1sxXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgZGF0YSA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1swXTtcbiAgICB9XG4gIH1cbiAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuICBzdHJpbmdpZmllciA9IG5ldyBTdHJpbmdpZmllcihvcHRpb25zKTtcbiAgaWYgKGRhdGEpIHtcbiAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGQsIGosIGxlbjtcbiAgICAgIGZvciAoaiA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgZCA9IGRhdGFbal07XG4gICAgICAgIHN0cmluZ2lmaWVyLndyaXRlKGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0cmluZ2lmaWVyLmVuZCgpO1xuICAgIH0pO1xuICB9XG4gIGlmIChjYWxsYmFjaykge1xuICAgIGNodW5rcyA9IFtdO1xuICAgIHN0cmluZ2lmaWVyLm9uKCdyZWFkYWJsZScsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNodW5rLCByZXN1bHRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgd2hpbGUgKGNodW5rID0gc3RyaW5naWZpZXIucmVhZCgpKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChjaHVua3MucHVzaChjaHVuaykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSk7XG4gICAgc3RyaW5naWZpZXIub24oJ2Vycm9yJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZXJyKTtcbiAgICB9KTtcbiAgICBzdHJpbmdpZmllci5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgY2h1bmtzLmpvaW4oJycpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gc3RyaW5naWZpZXI7XG59O1xuXG5TdHJpbmdpZmllciA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgdmFyIGJhc2UsIGJhc2UxLCBiYXNlMTAsIGJhc2UxMSwgYmFzZTEyLCBiYXNlMTMsIGJhc2UyLCBiYXNlMywgYmFzZTQsIGJhc2U1LCBiYXNlNiwgYmFzZTcsIGJhc2U4LCBiYXNlOSwgaywgb3B0aW9ucywgdjtcbiAgaWYgKG9wdHMgPT0gbnVsbCkge1xuICAgIG9wdHMgPSB7fTtcbiAgfVxuICBvcHRpb25zID0ge307XG4gIGZvciAoayBpbiBvcHRzKSB7XG4gICAgdiA9IG9wdHNba107XG4gICAgb3B0aW9uc1trXSA9IHY7XG4gIH1cbiAgc3RyZWFtLlRyYW5zZm9ybS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICBpZiAoKGJhc2UgPSB0aGlzLm9wdGlvbnMpLmRlbGltaXRlciA9PSBudWxsKSB7XG4gICAgYmFzZS5kZWxpbWl0ZXIgPSAnLCc7XG4gIH1cbiAgaWYgKChiYXNlMSA9IHRoaXMub3B0aW9ucykucXVvdGUgPT0gbnVsbCkge1xuICAgIGJhc2UxLnF1b3RlID0gJ1wiJztcbiAgfVxuICBpZiAoKGJhc2UyID0gdGhpcy5vcHRpb25zKS5xdW90ZWQgPT0gbnVsbCkge1xuICAgIGJhc2UyLnF1b3RlZCA9IGZhbHNlO1xuICB9XG4gIGlmICgoYmFzZTMgPSB0aGlzLm9wdGlvbnMpLnF1b3RlZEVtcHR5ID09IG51bGwpIHtcbiAgICBiYXNlMy5xdW90ZWRFbXB0eSA9IHZvaWQgMDtcbiAgfVxuICBpZiAoKGJhc2U0ID0gdGhpcy5vcHRpb25zKS5xdW90ZWRTdHJpbmcgPT0gbnVsbCkge1xuICAgIGJhc2U0LnF1b3RlZFN0cmluZyA9IGZhbHNlO1xuICB9XG4gIGlmICgoYmFzZTUgPSB0aGlzLm9wdGlvbnMpLmVvZiA9PSBudWxsKSB7XG4gICAgYmFzZTUuZW9mID0gdHJ1ZTtcbiAgfVxuICBpZiAoKGJhc2U2ID0gdGhpcy5vcHRpb25zKS5lc2NhcGUgPT0gbnVsbCkge1xuICAgIGJhc2U2LmVzY2FwZSA9ICdcIic7XG4gIH1cbiAgaWYgKChiYXNlNyA9IHRoaXMub3B0aW9ucykuY29sdW1ucyA9PSBudWxsKSB7XG4gICAgYmFzZTcuY29sdW1ucyA9IG51bGw7XG4gIH1cbiAgaWYgKChiYXNlOCA9IHRoaXMub3B0aW9ucykuaGVhZGVyID09IG51bGwpIHtcbiAgICBiYXNlOC5oZWFkZXIgPSBmYWxzZTtcbiAgfVxuICBpZiAoKGJhc2U5ID0gdGhpcy5vcHRpb25zKS5mb3JtYXR0ZXJzID09IG51bGwpIHtcbiAgICBiYXNlOS5mb3JtYXR0ZXJzID0ge307XG4gIH1cbiAgaWYgKChiYXNlMTAgPSB0aGlzLm9wdGlvbnMuZm9ybWF0dGVycykuZGF0ZSA9PSBudWxsKSB7XG4gICAgYmFzZTEwLmRhdGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuICcnICsgdmFsdWUuZ2V0VGltZSgpO1xuICAgIH07XG4gIH1cbiAgaWYgKChiYXNlMTEgPSB0aGlzLm9wdGlvbnMuZm9ybWF0dGVycykuYm9vbCA9PSBudWxsKSB7XG4gICAgYmFzZTExLmJvb2wgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiAnMSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBpZiAoKGJhc2UxMiA9IHRoaXMub3B0aW9ucy5mb3JtYXR0ZXJzKS5vYmplY3QgPT0gbnVsbCkge1xuICAgIGJhc2UxMi5vYmplY3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICB9O1xuICB9XG4gIGlmICgoYmFzZTEzID0gdGhpcy5vcHRpb25zKS5yb3dEZWxpbWl0ZXIgPT0gbnVsbCkge1xuICAgIGJhc2UxMy5yb3dEZWxpbWl0ZXIgPSAnXFxuJztcbiAgfVxuICBpZiAodGhpcy5jb3VudFdyaXRlbiA9PSBudWxsKSB7XG4gICAgdGhpcy5jb3VudFdyaXRlbiA9IDA7XG4gIH1cbiAgc3dpdGNoICh0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyKSB7XG4gICAgY2FzZSAnYXV0byc6XG4gICAgICB0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyID0gbnVsbDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3VuaXgnOlxuICAgICAgdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciA9IFwiXFxuXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdtYWMnOlxuICAgICAgdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciA9IFwiXFxyXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd3aW5kb3dzJzpcbiAgICAgIHRoaXMub3B0aW9ucy5yb3dEZWxpbWl0ZXIgPSBcIlxcclxcblwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndW5pY29kZSc6XG4gICAgICB0aGlzLm9wdGlvbnMucm93RGVsaW1pdGVyID0gXCJcXHUyMDI4XCI7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG51dGlsLmluaGVyaXRzKFN0cmluZ2lmaWVyLCBzdHJlYW0uVHJhbnNmb3JtKTtcblxubW9kdWxlLmV4cG9ydHMuU3RyaW5naWZpZXIgPSBTdHJpbmdpZmllcjtcblxuU3RyaW5naWZpZXIucHJvdG90eXBlLmhlYWRlcnMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGssIGxhYmVsLCBsYWJlbHM7XG4gIGlmICghdGhpcy5vcHRpb25zLmhlYWRlcikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoIXRoaXMub3B0aW9ucy5jb2x1bW5zKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxhYmVscyA9IHRoaXMub3B0aW9ucy5jb2x1bW5zO1xuICBpZiAodHlwZW9mIGxhYmVscyA9PT0gJ29iamVjdCcpIHtcbiAgICBsYWJlbHMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoayBpbiBsYWJlbHMpIHtcbiAgICAgICAgbGFiZWwgPSBsYWJlbHNba107XG4gICAgICAgIHJlc3VsdHMucHVzaChsYWJlbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KSgpO1xuICB9XG4gIGlmICh0aGlzLm9wdGlvbnMuZW9mKSB7XG4gICAgbGFiZWxzID0gdGhpcy5zdHJpbmdpZnkobGFiZWxzKSArIHRoaXMub3B0aW9ucy5yb3dEZWxpbWl0ZXI7XG4gIH0gZWxzZSB7XG4gICAgbGFiZWxzID0gdGhpcy5zdHJpbmdpZnkobGFiZWxzKTtcbiAgfVxuICByZXR1cm4gc3RyZWFtLlRyYW5zZm9ybS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLCBsYWJlbHMpO1xufTtcblxuU3RyaW5naWZpZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2FsbGJhY2spIHtcbiAgaWYgKHRoaXMuY291bnRXcml0ZW4gPT09IDApIHtcbiAgICB0aGlzLmhlYWRlcnMoKTtcbiAgfVxuICByZXR1cm4gc3RyZWFtLlRyYW5zZm9ybS5wcm90b3R5cGUuZW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xuXG5TdHJpbmdpZmllci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG4gIHZhciBiYXNlLCBlLCBwcmVzZXJ2ZTtcbiAgaWYgKGNodW5rID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJlc2VydmUgPSB0eXBlb2YgY2h1bmsgIT09ICdvYmplY3QnO1xuICBpZiAoIXByZXNlcnZlKSB7XG4gICAgaWYgKHRoaXMuY291bnRXcml0ZW4gPT09IDAgJiYgIUFycmF5LmlzQXJyYXkoY2h1bmspKSB7XG4gICAgICBpZiAoKGJhc2UgPSB0aGlzLm9wdGlvbnMpLmNvbHVtbnMgPT0gbnVsbCkge1xuICAgICAgICBiYXNlLmNvbHVtbnMgPSBPYmplY3Qua2V5cyhjaHVuayk7XG4gICAgICB9XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB0aGlzLmVtaXQoJ3JlY29yZCcsIGNodW5rLCB0aGlzLmNvdW50V3JpdGVuKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZSA9IGVycm9yO1xuICAgICAgcmV0dXJuIHRoaXMuZW1pdCgnZXJyb3InLCBlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5lb2YpIHtcbiAgICAgIGNodW5rID0gdGhpcy5zdHJpbmdpZnkoY2h1bmspICsgdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY2h1bmsgPSB0aGlzLnN0cmluZ2lmeShjaHVuayk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhlYWRlciB8fCB0aGlzLmNvdW50V3JpdGVuKSB7XG4gICAgICAgIGNodW5rID0gdGhpcy5vcHRpb25zLnJvd0RlbGltaXRlciArIGNodW5rO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAodHlwZW9mIGNodW5rID09PSAnbnVtYmVyJykge1xuICAgIGNodW5rID0gXCJcIiArIGNodW5rO1xuICB9XG4gIGlmICh0aGlzLmNvdW50V3JpdGVuID09PSAwKSB7XG4gICAgdGhpcy5oZWFkZXJzKCk7XG4gIH1cbiAgaWYgKCFwcmVzZXJ2ZSkge1xuICAgIHRoaXMuY291bnRXcml0ZW4rKztcbiAgfVxuICByZXR1cm4gc3RyZWFtLlRyYW5zZm9ybS5wcm90b3R5cGUud3JpdGUuY2FsbCh0aGlzLCBjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKTtcbn07XG5cblN0cmluZ2lmaWVyLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICB0aGlzLnB1c2goY2h1bmspO1xuICByZXR1cm4gY2FsbGJhY2soKTtcbn07XG5cblN0cmluZ2lmaWVyLnByb3RvdHlwZS5zdHJpbmdpZnkgPSBmdW5jdGlvbihsaW5lKSB7XG4gIHZhciBfbGluZSwgY29sdW1uLCBjb2x1bW5zLCBjb250YWluc0VzY2FwZSwgY29udGFpbnNMaW5lYnJlYWssIGNvbnRhaW5zUXVvdGUsIGNvbnRhaW5zZGVsaW1pdGVyLCBkZWxpbWl0ZXIsIGVzY2FwZSwgZmllbGQsIGksIGosIGwsIG5ld0xpbmUsIHF1b3RlLCByZWYsIHJlZjEsIHJlZ2V4cCwgc2hvdWxkUXVvdGUsIHZhbHVlO1xuICBpZiAodHlwZW9mIGxpbmUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGxpbmU7XG4gIH1cbiAgY29sdW1ucyA9IHRoaXMub3B0aW9ucy5jb2x1bW5zO1xuICBpZiAodHlwZW9mIGNvbHVtbnMgPT09ICdvYmplY3QnICYmIGNvbHVtbnMgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoY29sdW1ucykpIHtcbiAgICBjb2x1bW5zID0gT2JqZWN0LmtleXMoY29sdW1ucyk7XG4gIH1cbiAgZGVsaW1pdGVyID0gdGhpcy5vcHRpb25zLmRlbGltaXRlcjtcbiAgcXVvdGUgPSB0aGlzLm9wdGlvbnMucXVvdGU7XG4gIGVzY2FwZSA9IHRoaXMub3B0aW9ucy5lc2NhcGU7XG4gIGlmICghQXJyYXkuaXNBcnJheShsaW5lKSkge1xuICAgIF9saW5lID0gW107XG4gICAgaWYgKGNvbHVtbnMpIHtcbiAgICAgIGZvciAoaSA9IGogPSAwLCByZWYgPSBjb2x1bW5zLmxlbmd0aDsgMCA8PSByZWYgPyBqIDwgcmVmIDogaiA+IHJlZjsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7XG4gICAgICAgIGNvbHVtbiA9IGNvbHVtbnNbaV07XG4gICAgICAgIHZhbHVlID0gZ2V0KGxpbmUsIGNvbHVtbik7XG4gICAgICAgIF9saW5lW2ldID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsdWUgPT09IG51bGwpID8gJycgOiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb2x1bW4gaW4gbGluZSkge1xuICAgICAgICBfbGluZS5wdXNoKGxpbmVbY29sdW1uXSk7XG4gICAgICB9XG4gICAgfVxuICAgIGxpbmUgPSBfbGluZTtcbiAgICBfbGluZSA9IG51bGw7XG4gIH0gZWxzZSBpZiAoY29sdW1ucykge1xuICAgIGxpbmUuc3BsaWNlKGNvbHVtbnMubGVuZ3RoKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShsaW5lKSkge1xuICAgIG5ld0xpbmUgPSAnJztcbiAgICBmb3IgKGkgPSBsID0gMCwgcmVmMSA9IGxpbmUubGVuZ3RoOyAwIDw9IHJlZjEgPyBsIDwgcmVmMSA6IGwgPiByZWYxOyBpID0gMCA8PSByZWYxID8gKytsIDogLS1sKSB7XG4gICAgICBmaWVsZCA9IGxpbmVbaV07XG4gICAgICBpZiAodHlwZW9mIGZpZWxkID09PSAnc3RyaW5nJykge1xuXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBmaWVsZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgZmllbGQgPSAnJyArIGZpZWxkO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZmllbGQgPT09ICdib29sZWFuJykge1xuICAgICAgICBmaWVsZCA9IHRoaXMub3B0aW9ucy5mb3JtYXR0ZXJzLmJvb2woZmllbGQpO1xuICAgICAgfSBlbHNlIGlmIChmaWVsZCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgZmllbGQgPSB0aGlzLm9wdGlvbnMuZm9ybWF0dGVycy5kYXRlKGZpZWxkKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGZpZWxkID09PSAnb2JqZWN0JyAmJiBmaWVsZCAhPT0gbnVsbCkge1xuICAgICAgICBmaWVsZCA9IHRoaXMub3B0aW9ucy5mb3JtYXR0ZXJzLm9iamVjdChmaWVsZCk7XG4gICAgICB9XG4gICAgICBpZiAoZmllbGQpIHtcbiAgICAgICAgY29udGFpbnNkZWxpbWl0ZXIgPSBmaWVsZC5pbmRleE9mKGRlbGltaXRlcikgPj0gMDtcbiAgICAgICAgY29udGFpbnNRdW90ZSA9IGZpZWxkLmluZGV4T2YocXVvdGUpID49IDA7XG4gICAgICAgIGNvbnRhaW5zRXNjYXBlID0gZmllbGQuaW5kZXhPZihlc2NhcGUpID49IDAgJiYgKGVzY2FwZSAhPT0gcXVvdGUpO1xuICAgICAgICBjb250YWluc0xpbmVicmVhayA9IGZpZWxkLmluZGV4T2YoJ1xccicpID49IDAgfHwgZmllbGQuaW5kZXhPZignXFxuJykgPj0gMDtcbiAgICAgICAgc2hvdWxkUXVvdGUgPSBjb250YWluc1F1b3RlIHx8IGNvbnRhaW5zZGVsaW1pdGVyIHx8IGNvbnRhaW5zTGluZWJyZWFrIHx8IHRoaXMub3B0aW9ucy5xdW90ZWQgfHwgKHRoaXMub3B0aW9ucy5xdW90ZWRTdHJpbmcgJiYgdHlwZW9mIGxpbmVbaV0gPT09ICdzdHJpbmcnKTtcbiAgICAgICAgaWYgKHNob3VsZFF1b3RlICYmIGNvbnRhaW5zRXNjYXBlKSB7XG4gICAgICAgICAgcmVnZXhwID0gZXNjYXBlID09PSAnXFxcXCcgPyBuZXcgUmVnRXhwKGVzY2FwZSArIGVzY2FwZSwgJ2cnKSA6IG5ldyBSZWdFeHAoZXNjYXBlLCAnZycpO1xuICAgICAgICAgIGZpZWxkID0gZmllbGQucmVwbGFjZShyZWdleHAsIGVzY2FwZSArIGVzY2FwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRhaW5zUXVvdGUpIHtcbiAgICAgICAgICByZWdleHAgPSBuZXcgUmVnRXhwKHF1b3RlLCAnZycpO1xuICAgICAgICAgIGZpZWxkID0gZmllbGQucmVwbGFjZShyZWdleHAsIGVzY2FwZSArIHF1b3RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkUXVvdGUpIHtcbiAgICAgICAgICBmaWVsZCA9IHF1b3RlICsgZmllbGQgKyBxdW90ZTtcbiAgICAgICAgfVxuICAgICAgICBuZXdMaW5lICs9IGZpZWxkO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMucXVvdGVkRW1wdHkgfHwgKCh0aGlzLm9wdGlvbnMucXVvdGVkRW1wdHkgPT0gbnVsbCkgJiYgbGluZVtpXSA9PT0gJycgJiYgdGhpcy5vcHRpb25zLnF1b3RlZFN0cmluZykpIHtcbiAgICAgICAgbmV3TGluZSArPSBxdW90ZSArIHF1b3RlO1xuICAgICAgfVxuICAgICAgaWYgKGkgIT09IGxpbmUubGVuZ3RoIC0gMSkge1xuICAgICAgICBuZXdMaW5lICs9IGRlbGltaXRlcjtcbiAgICAgIH1cbiAgICB9XG4gICAgbGluZSA9IG5ld0xpbmU7XG4gIH1cbiAgcmV0dXJuIGxpbmU7XG59O1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbnZhciBTdHJpbmdEZWNvZGVyLCBzdHJpbmdpZnk7XG5cblN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2RlcicpLlN0cmluZ0RlY29kZXI7XG5cbnN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vaW5kZXgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihyZWNvcmRzLCBvcHRpb25zKSB7XG4gIHZhciBkYXRhLCBkZWNvZGVyLCBpLCBsZW4sIHJlY29yZCwgc3RyaW5naWZpZXI7XG4gIGlmIChvcHRpb25zID09IG51bGwpIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgZGF0YSA9IFtdO1xuICBpZiAocmVjb3JkcyBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgIGRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcigpO1xuICAgIHJlY29yZHMgPSBkZWNvZGVyLndyaXRlKHJlY29yZHMpO1xuICB9XG4gIHN0cmluZ2lmaWVyID0gbmV3IHN0cmluZ2lmeS5TdHJpbmdpZmllcihvcHRpb25zKTtcbiAgc3RyaW5naWZpZXIucHVzaCA9IGZ1bmN0aW9uKHJlY29yZCkge1xuICAgIGlmIChyZWNvcmQpIHtcbiAgICAgIHJldHVybiBkYXRhLnB1c2gocmVjb3JkLnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgfTtcbiAgZm9yIChpID0gMCwgbGVuID0gcmVjb3Jkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHJlY29yZCA9IHJlY29yZHNbaV07XG4gICAgc3RyaW5naWZpZXIud3JpdGUocmVjb3JkKTtcbiAgfVxuICBzdHJpbmdpZmllci5lbmQoKTtcbiAgcmV0dXJuIGRhdGEuam9pbignJyk7XG59O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciBvYmplY3RDcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IG9iamVjdENyZWF0ZVBvbHlmaWxsXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IG9iamVjdEtleXNQb2x5ZmlsbFxudmFyIGJpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCB8fCBmdW5jdGlvbkJpbmRQb2x5ZmlsbFxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcywgJ19ldmVudHMnKSkge1xuICAgIHRoaXMuX2V2ZW50cyA9IG9iamVjdENyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG52YXIgaGFzRGVmaW5lUHJvcGVydHk7XG50cnkge1xuICB2YXIgbyA9IHt9O1xuICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgJ3gnLCB7IHZhbHVlOiAwIH0pO1xuICBoYXNEZWZpbmVQcm9wZXJ0eSA9IG8ueCA9PT0gMDtcbn0gY2F0Y2ggKGVycikgeyBoYXNEZWZpbmVQcm9wZXJ0eSA9IGZhbHNlIH1cbmlmIChoYXNEZWZpbmVQcm9wZXJ0eSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgICAvLyBjaGVjayB3aGV0aGVyIHRoZSBpbnB1dCBpcyBhIHBvc2l0aXZlIG51bWJlciAod2hvc2UgdmFsdWUgaXMgemVybyBvclxuICAgICAgLy8gZ3JlYXRlciBhbmQgbm90IGEgTmFOKS5cbiAgICAgIGlmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyB8fCBhcmcgPCAwIHx8IGFyZyAhPT0gYXJnKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gICAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG59XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIHNldE1heExpc3RlbmVycyhuKSB7XG4gIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJuXCIgYXJndW1lbnQgbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uICRnZXRNYXhMaXN0ZW5lcnModGhhdCkge1xuICBpZiAodGhhdC5fbWF4TGlzdGVuZXJzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICByZXR1cm4gdGhhdC5fbWF4TGlzdGVuZXJzO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmdldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uIGdldE1heExpc3RlbmVycygpIHtcbiAgcmV0dXJuICRnZXRNYXhMaXN0ZW5lcnModGhpcyk7XG59O1xuXG4vLyBUaGVzZSBzdGFuZGFsb25lIGVtaXQqIGZ1bmN0aW9ucyBhcmUgdXNlZCB0byBvcHRpbWl6ZSBjYWxsaW5nIG9mIGV2ZW50XG4vLyBoYW5kbGVycyBmb3IgZmFzdCBjYXNlcyBiZWNhdXNlIGVtaXQoKSBpdHNlbGYgb2Z0ZW4gaGFzIGEgdmFyaWFibGUgbnVtYmVyIG9mXG4vLyBhcmd1bWVudHMgYW5kIGNhbiBiZSBkZW9wdGltaXplZCBiZWNhdXNlIG9mIHRoYXQuIFRoZXNlIGZ1bmN0aW9ucyBhbHdheXMgaGF2ZVxuLy8gdGhlIHNhbWUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhbmQgdGh1cyBkbyBub3QgZ2V0IGRlb3B0aW1pemVkLCBzbyB0aGUgY29kZVxuLy8gaW5zaWRlIHRoZW0gY2FuIGV4ZWN1dGUgZmFzdGVyLlxuZnVuY3Rpb24gZW1pdE5vbmUoaGFuZGxlciwgaXNGbiwgc2VsZikge1xuICBpZiAoaXNGbilcbiAgICBoYW5kbGVyLmNhbGwoc2VsZik7XG4gIGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBsaXN0ZW5lcnNbaV0uY2FsbChzZWxmKTtcbiAgfVxufVxuZnVuY3Rpb24gZW1pdE9uZShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEpO1xuICB9XG59XG5mdW5jdGlvbiBlbWl0VHdvKGhhbmRsZXIsIGlzRm4sIHNlbGYsIGFyZzEsIGFyZzIpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5jYWxsKHNlbGYsIGFyZzEsIGFyZzIpO1xuICBlbHNlIHtcbiAgICB2YXIgbGVuID0gaGFuZGxlci5sZW5ndGg7XG4gICAgdmFyIGxpc3RlbmVycyA9IGFycmF5Q2xvbmUoaGFuZGxlciwgbGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKVxuICAgICAgbGlzdGVuZXJzW2ldLmNhbGwoc2VsZiwgYXJnMSwgYXJnMik7XG4gIH1cbn1cbmZ1bmN0aW9uIGVtaXRUaHJlZShoYW5kbGVyLCBpc0ZuLCBzZWxmLCBhcmcxLCBhcmcyLCBhcmczKSB7XG4gIGlmIChpc0ZuKVxuICAgIGhhbmRsZXIuY2FsbChzZWxmLCBhcmcxLCBhcmcyLCBhcmczKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5jYWxsKHNlbGYsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRNYW55KGhhbmRsZXIsIGlzRm4sIHNlbGYsIGFyZ3MpIHtcbiAgaWYgKGlzRm4pXG4gICAgaGFuZGxlci5hcHBseShzZWxmLCBhcmdzKTtcbiAgZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseShzZWxmLCBhcmdzKTtcbiAgfVxufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGV2ZW50cztcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICBpZiAoZXZlbnRzKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT0gbnVsbCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKVxuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdVbmhhbmRsZWQgXCJlcnJvclwiIGV2ZW50LiAoJyArIGVyICsgJyknKTtcbiAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKCFoYW5kbGVyKVxuICAgIHJldHVybiBmYWxzZTtcblxuICB2YXIgaXNGbiA9IHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nO1xuICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBzd2l0Y2ggKGxlbikge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgIGNhc2UgMTpcbiAgICAgIGVtaXROb25lKGhhbmRsZXIsIGlzRm4sIHRoaXMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgZW1pdE9uZShoYW5kbGVyLCBpc0ZuLCB0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgZW1pdFR3byhoYW5kbGVyLCBpc0ZuLCB0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBlbWl0VGhyZWUoaGFuZGxlciwgaXNGbiwgdGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0sIGFyZ3VtZW50c1szXSk7XG4gICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgIGRlZmF1bHQ6XG4gICAgICBhcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuICAgICAgZm9yIChpID0gMTsgaSA8IGxlbjsgaSsrKVxuICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGVtaXRNYW55KGhhbmRsZXIsIGlzRm4sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoIWV2ZW50cykge1xuICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzID0gb2JqZWN0Q3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIpIHtcbiAgICAgIHRhcmdldC5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKCFleGlzdGluZykge1xuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gICAgKyt0YXJnZXQuX2V2ZW50c0NvdW50O1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPVxuICAgICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgICBpZiAocHJlcGVuZCkge1xuICAgICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgaWYgKCFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIG0gPSAkZ2V0TWF4TGlzdGVuZXJzKHRhcmdldCk7XG4gICAgICBpZiAobSAmJiBtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtKSB7XG4gICAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAgIHZhciB3ID0gbmV3IEVycm9yKCdQb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICcgK1xuICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyBcIicgKyBTdHJpbmcodHlwZSkgKyAnXCIgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgJ2FkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byAnICtcbiAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdC4nKTtcbiAgICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICAgIHcuZW1pdHRlciA9IHRhcmdldDtcbiAgICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlID09PSAnb2JqZWN0JyAmJiBjb25zb2xlLndhcm4pIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJyVzOiAlcycsIHcubmFtZSwgdy5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBhZGRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5wcmVwZW5kTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgdHJ1ZSk7XG4gICAgfTtcblxuZnVuY3Rpb24gb25jZVdyYXBwZXIoKSB7XG4gIGlmICghdGhpcy5maXJlZCkge1xuICAgIHRoaXMudGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHRoaXMudHlwZSwgdGhpcy53cmFwRm4pO1xuICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCwgYXJndW1lbnRzWzBdKTtcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY2FsbCh0aGlzLnRhcmdldCwgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pO1xuICAgICAgY2FzZSAzOlxuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0LCBhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSxcbiAgICAgICAgICAgIGFyZ3VtZW50c1syXSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKVxuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIHRoaXMubGlzdGVuZXIuYXBwbHkodGhpcy50YXJnZXQsIGFyZ3MpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcbiAgdmFyIHdyYXBwZWQgPSBiaW5kLmNhbGwob25jZVdyYXBwZXIsIHN0YXRlKTtcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgIHRoaXMucHJlcGVuZExpc3RlbmVyKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuLy8gRW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmIGFuZCBvbmx5IGlmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgbGlzdCwgZXZlbnRzLCBwb3NpdGlvbiwgaSwgb3JpZ2luYWxMaXN0ZW5lcjtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoIWV2ZW50cylcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGxpc3QgPSBldmVudHNbdHlwZV07XG4gICAgICBpZiAoIWxpc3QpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gb2JqZWN0Q3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG5cbiAgICAgICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKVxuICAgICAgICAgIGV2ZW50c1t0eXBlXSA9IGxpc3RbMF07XG5cbiAgICAgICAgaWYgKGV2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoIWV2ZW50cylcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmICghZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gb2JqZWN0Q3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0pIHtcbiAgICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IG9iamVjdENyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gb2JqZWN0S2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gb2JqZWN0Q3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICBsaXN0ZW5lcnMgPSBldmVudHNbdHlwZV07XG5cbiAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXJzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgICAgIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmICghZXZlbnRzKVxuICAgIHJldHVybiBbXTtcblxuICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcbiAgaWYgKCFldmxpc3RlbmVyKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgPyB1bndyYXBMaXN0ZW5lcnMoZXZsaXN0ZW5lcikgOiBhcnJheUNsb25lKGV2bGlzdGVuZXIsIGV2bGlzdGVuZXIubGVuZ3RoKTtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbiBsaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCB0cnVlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmF3TGlzdGVuZXJzID0gZnVuY3Rpb24gcmF3TGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5saXN0ZW5lckNvdW50ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbGlzdGVuZXJDb3VudC5jYWxsKGVtaXR0ZXIsIHR5cGUpO1xuICB9XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBsaXN0ZW5lckNvdW50O1xuZnVuY3Rpb24gbGlzdGVuZXJDb3VudCh0eXBlKSB7XG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG5cbiAgaWYgKGV2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3Qub3duS2V5cyh0aGlzLl9ldmVudHMpIDogW107XG59O1xuXG4vLyBBYm91dCAxLjV4IGZhc3RlciB0aGFuIHRoZSB0d28tYXJnIHZlcnNpb24gb2YgQXJyYXkjc3BsaWNlKCkuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICh2YXIgaSA9IGluZGV4LCBrID0gaSArIDEsIG4gPSBsaXN0Lmxlbmd0aDsgayA8IG47IGkgKz0gMSwgayArPSAxKVxuICAgIGxpc3RbaV0gPSBsaXN0W2tdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiBhcnJheUNsb25lKGFyciwgbikge1xuICB2YXIgY29weSA9IG5ldyBBcnJheShuKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpXG4gICAgY29weVtpXSA9IGFycltpXTtcbiAgcmV0dXJuIGNvcHk7XG59XG5cbmZ1bmN0aW9uIHVud3JhcExpc3RlbmVycyhhcnIpIHtcbiAgdmFyIHJldCA9IG5ldyBBcnJheShhcnIubGVuZ3RoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXQubGVuZ3RoOyArK2kpIHtcbiAgICByZXRbaV0gPSBhcnJbaV0ubGlzdGVuZXIgfHwgYXJyW2ldO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIG9iamVjdENyZWF0ZVBvbHlmaWxsKHByb3RvKSB7XG4gIHZhciBGID0gZnVuY3Rpb24oKSB7fTtcbiAgRi5wcm90b3R5cGUgPSBwcm90bztcbiAgcmV0dXJuIG5ldyBGO1xufVxuZnVuY3Rpb24gb2JqZWN0S2V5c1BvbHlmaWxsKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrIGluIG9iaikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGspKSB7XG4gICAga2V5cy5wdXNoKGspO1xuICB9XG4gIHJldHVybiBrO1xufVxuZnVuY3Rpb24gZnVuY3Rpb25CaW5kUG9seWZpbGwoY29udGV4dCkge1xuICB2YXIgZm4gPSB0aGlzO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmbi5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICB9O1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29uc3RhbnRzID0gcmVxdWlyZSgnLi91dGlsL2NvbnN0YW50cycpLFxuICAgIExvZ2dpbmcgICA9IHJlcXVpcmUoJy4vbWl4aW5zL2xvZ2dpbmcnKTtcblxudmFyIEZheWUgPSB7XG4gIFZFUlNJT046ICAgIGNvbnN0YW50cy5WRVJTSU9OLFxuXG4gIENsaWVudDogICAgIHJlcXVpcmUoJy4vcHJvdG9jb2wvY2xpZW50JyksXG4gIFNjaGVkdWxlcjogIHJlcXVpcmUoJy4vcHJvdG9jb2wvc2NoZWR1bGVyJylcbn07XG5cbkxvZ2dpbmcud3JhcHBlciA9IEZheWU7XG5cbm1vZHVsZS5leHBvcnRzID0gRmF5ZTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFByb21pc2UgICA9IHJlcXVpcmUoJy4uL3V0aWwvcHJvbWlzZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdGhlbjogZnVuY3Rpb24oY2FsbGJhY2ssIGVycmJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKCF0aGlzLl9wcm9taXNlKVxuICAgICAgdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLl9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgc2VsZi5fcmVqZWN0ICA9IHJlamVjdDtcbiAgICAgIH0pO1xuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gdGhpcy5fcHJvbWlzZS50aGVuKGNhbGxiYWNrLCBlcnJiYWNrKTtcbiAgfSxcblxuICBjYWxsYmFjazogZnVuY3Rpb24oY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7IGNhbGxiYWNrLmNhbGwoY29udGV4dCwgdmFsdWUpIH0pO1xuICB9LFxuXG4gIGVycmJhY2s6IGZ1bmN0aW9uKGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBmdW5jdGlvbihyZWFzb24pIHsgY2FsbGJhY2suY2FsbChjb250ZXh0LCByZWFzb24pIH0pO1xuICB9LFxuXG4gIHRpbWVvdXQ6IGZ1bmN0aW9uKHNlY29uZHMsIG1lc3NhZ2UpIHtcbiAgICB0aGlzLnRoZW4oKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5fdGltZXIgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuX3JlamVjdChtZXNzYWdlKTtcbiAgICB9LCBzZWNvbmRzICogMTAwMCk7XG4gIH0sXG5cbiAgc2V0RGVmZXJyZWRTdGF0dXM6IGZ1bmN0aW9uKHN0YXR1cywgdmFsdWUpIHtcbiAgICBpZiAodGhpcy5fdGltZXIpIGdsb2JhbC5jbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xuXG4gICAgdGhpcy50aGVuKCk7XG5cbiAgICBpZiAoc3RhdHVzID09PSAnc3VjY2VlZGVkJylcbiAgICAgIHRoaXMuX3Jlc29sdmUodmFsdWUpO1xuICAgIGVsc2UgaWYgKHN0YXR1cyA9PT0gJ2ZhaWxlZCcpXG4gICAgICB0aGlzLl9yZWplY3QodmFsdWUpO1xuICAgIGVsc2VcbiAgICAgIGRlbGV0ZSB0aGlzLl9wcm9taXNlO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdG9KU09OID0gcmVxdWlyZSgnLi4vdXRpbC90b19qc29uJyk7XG5cbnZhciBMb2dnaW5nID0ge1xuICBMT0dfTEVWRUxTOiB7XG4gICAgZmF0YWw6ICA0LFxuICAgIGVycm9yOiAgMyxcbiAgICB3YXJuOiAgIDIsXG4gICAgaW5mbzogICAxLFxuICAgIGRlYnVnOiAgMFxuICB9LFxuXG4gIHdyaXRlTG9nOiBmdW5jdGlvbihtZXNzYWdlQXJncywgbGV2ZWwpIHtcbiAgICB2YXIgbG9nZ2VyID0gTG9nZ2luZy5sb2dnZXIgfHwgKExvZ2dpbmcud3JhcHBlciB8fCBMb2dnaW5nKS5sb2dnZXI7XG4gICAgaWYgKCFsb2dnZXIpIHJldHVybjtcblxuICAgIHZhciBhcmdzICAgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkobWVzc2FnZUFyZ3MpLFxuICAgICAgICBiYW5uZXIgPSAnW0ZheWUnLFxuICAgICAgICBrbGFzcyAgPSB0aGlzLmNsYXNzTmFtZSxcblxuICAgICAgICBtZXNzYWdlID0gYXJncy5zaGlmdCgpLnJlcGxhY2UoL1xcPy9nLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRvSlNPTihhcmdzLnNoaWZ0KCkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gJ1tPYmplY3RdJztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgaWYgKGtsYXNzKSBiYW5uZXIgKz0gJy4nICsga2xhc3M7XG4gICAgYmFubmVyICs9ICddICc7XG5cbiAgICBpZiAodHlwZW9mIGxvZ2dlcltsZXZlbF0gPT09ICdmdW5jdGlvbicpXG4gICAgICBsb2dnZXJbbGV2ZWxdKGJhbm5lciArIG1lc3NhZ2UpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiBsb2dnZXIgPT09ICdmdW5jdGlvbicpXG4gICAgICBsb2dnZXIoYmFubmVyICsgbWVzc2FnZSk7XG4gIH1cbn07XG5cbmZvciAodmFyIGtleSBpbiBMb2dnaW5nLkxPR19MRVZFTFMpXG4gIChmdW5jdGlvbihsZXZlbCkge1xuICAgIExvZ2dpbmdbbGV2ZWxdID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLndyaXRlTG9nKGFyZ3VtZW50cywgbGV2ZWwpO1xuICAgIH07XG4gIH0pKGtleSk7XG5cbm1vZHVsZS5leHBvcnRzID0gTG9nZ2luZztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV4dGVuZCAgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvZXh0ZW5kJyksXG4gICAgRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnLi4vdXRpbC9ldmVudF9lbWl0dGVyJyk7XG5cbnZhciBQdWJsaXNoZXIgPSB7XG4gIGNvdW50TGlzdGVuZXJzOiBmdW5jdGlvbihldmVudFR5cGUpIHtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lcnMoZXZlbnRUeXBlKS5sZW5ndGg7XG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24oZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCkge1xuICAgIHZhciBzbGljZSAgID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICAgICAgICBoYW5kbGVyID0gZnVuY3Rpb24oKSB7IGxpc3RlbmVyLmFwcGx5KGNvbnRleHQsIHNsaWNlLmNhbGwoYXJndW1lbnRzKSkgfTtcblxuICAgIHRoaXMuX2xpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycyB8fCBbXTtcbiAgICB0aGlzLl9saXN0ZW5lcnMucHVzaChbZXZlbnRUeXBlLCBsaXN0ZW5lciwgY29udGV4dCwgaGFuZGxlcl0pO1xuICAgIHJldHVybiB0aGlzLm9uKGV2ZW50VHlwZSwgaGFuZGxlcik7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbihldmVudFR5cGUsIGxpc3RlbmVyLCBjb250ZXh0KSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzIHx8IFtdO1xuICAgIHZhciBuID0gdGhpcy5fbGlzdGVuZXJzLmxlbmd0aCwgdHVwbGU7XG5cbiAgICB3aGlsZSAobi0tKSB7XG4gICAgICB0dXBsZSA9IHRoaXMuX2xpc3RlbmVyc1tuXTtcbiAgICAgIGlmICh0dXBsZVswXSAhPT0gZXZlbnRUeXBlKSBjb250aW51ZTtcbiAgICAgIGlmIChsaXN0ZW5lciAmJiAodHVwbGVbMV0gIT09IGxpc3RlbmVyIHx8IHR1cGxlWzJdICE9PSBjb250ZXh0KSkgY29udGludWU7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMuc3BsaWNlKG4sIDEpO1xuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudFR5cGUsIHR1cGxlWzNdKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4dGVuZChQdWJsaXNoZXIsIEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xuUHVibGlzaGVyLnRyaWdnZXIgPSBQdWJsaXNoZXIuZW1pdDtcblxubW9kdWxlLmV4cG9ydHMgPSBQdWJsaXNoZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGRUaW1lb3V0OiBmdW5jdGlvbihuYW1lLCBkZWxheSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB0aGlzLl90aW1lb3V0cyA9IHRoaXMuX3RpbWVvdXRzIHx8IHt9O1xuICAgIGlmICh0aGlzLl90aW1lb3V0cy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgcmV0dXJuO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLl90aW1lb3V0c1tuYW1lXSA9IGdsb2JhbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgZGVsZXRlIHNlbGYuX3RpbWVvdXRzW25hbWVdO1xuICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0KTtcbiAgICB9LCAxMDAwICogZGVsYXkpO1xuICB9LFxuXG4gIHJlbW92ZVRpbWVvdXQ6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB0aGlzLl90aW1lb3V0cyA9IHRoaXMuX3RpbWVvdXRzIHx8IHt9O1xuICAgIHZhciB0aW1lb3V0ID0gdGhpcy5fdGltZW91dHNbbmFtZV07XG4gICAgaWYgKCF0aW1lb3V0KSByZXR1cm47XG4gICAgZ2xvYmFsLmNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICBkZWxldGUgdGhpcy5fdGltZW91dHNbbmFtZV07XG4gIH0sXG5cbiAgcmVtb3ZlQWxsVGltZW91dHM6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3RpbWVvdXRzID0gdGhpcy5fdGltZW91dHMgfHwge307XG4gICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLl90aW1lb3V0cykgdGhpcy5yZW1vdmVUaW1lb3V0KG5hbWUpO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2xhc3MgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9jbGFzcycpLFxuICAgIGV4dGVuZCAgICA9IHJlcXVpcmUoJy4uL3V0aWwvZXh0ZW5kJyksXG4gICAgUHVibGlzaGVyID0gcmVxdWlyZSgnLi4vbWl4aW5zL3B1Ymxpc2hlcicpLFxuICAgIEdyYW1tYXIgICA9IHJlcXVpcmUoJy4vZ3JhbW1hcicpO1xuXG52YXIgQ2hhbm5lbCA9IENsYXNzKHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24obmFtZSkge1xuICAgIHRoaXMuaWQgPSB0aGlzLm5hbWUgPSBuYW1lO1xuICB9LFxuXG4gIHB1c2g6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICB0aGlzLnRyaWdnZXIoJ21lc3NhZ2UnLCBtZXNzYWdlKTtcbiAgfSxcblxuICBpc1VudXNlZDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY291bnRMaXN0ZW5lcnMoJ21lc3NhZ2UnKSA9PT0gMDtcbiAgfVxufSk7XG5cbmV4dGVuZChDaGFubmVsLnByb3RvdHlwZSwgUHVibGlzaGVyKTtcblxuZXh0ZW5kKENoYW5uZWwsIHtcbiAgSEFORFNIQUtFOiAgICAnL21ldGEvaGFuZHNoYWtlJyxcbiAgQ09OTkVDVDogICAgICAnL21ldGEvY29ubmVjdCcsXG4gIFNVQlNDUklCRTogICAgJy9tZXRhL3N1YnNjcmliZScsXG4gIFVOU1VCU0NSSUJFOiAgJy9tZXRhL3Vuc3Vic2NyaWJlJyxcbiAgRElTQ09OTkVDVDogICAnL21ldGEvZGlzY29ubmVjdCcsXG5cbiAgTUVUQTogICAgICAgICAnbWV0YScsXG4gIFNFUlZJQ0U6ICAgICAgJ3NlcnZpY2UnLFxuXG4gIGV4cGFuZDogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBzZWdtZW50cyA9IHRoaXMucGFyc2UobmFtZSksXG4gICAgICAgIGNoYW5uZWxzID0gWycvKionLCBuYW1lXTtcblxuICAgIHZhciBjb3B5ID0gc2VnbWVudHMuc2xpY2UoKTtcbiAgICBjb3B5W2NvcHkubGVuZ3RoIC0gMV0gPSAnKic7XG4gICAgY2hhbm5lbHMucHVzaCh0aGlzLnVucGFyc2UoY29weSkpO1xuXG4gICAgZm9yICh2YXIgaSA9IDEsIG4gPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGNvcHkgPSBzZWdtZW50cy5zbGljZSgwLCBpKTtcbiAgICAgIGNvcHkucHVzaCgnKionKTtcbiAgICAgIGNoYW5uZWxzLnB1c2godGhpcy51bnBhcnNlKGNvcHkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2hhbm5lbHM7XG4gIH0sXG5cbiAgaXNWYWxpZDogZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBHcmFtbWFyLkNIQU5ORUxfTkFNRS50ZXN0KG5hbWUpIHx8XG4gICAgICAgICAgIEdyYW1tYXIuQ0hBTk5FTF9QQVRURVJOLnRlc3QobmFtZSk7XG4gIH0sXG5cbiAgcGFyc2U6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZChuYW1lKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIG5hbWUuc3BsaXQoJy8nKS5zbGljZSgxKTtcbiAgfSxcblxuICB1bnBhcnNlOiBmdW5jdGlvbihzZWdtZW50cykge1xuICAgIHJldHVybiAnLycgKyBzZWdtZW50cy5qb2luKCcvJyk7XG4gIH0sXG5cbiAgaXNNZXRhOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIHNlZ21lbnRzID0gdGhpcy5wYXJzZShuYW1lKTtcbiAgICByZXR1cm4gc2VnbWVudHMgPyAoc2VnbWVudHNbMF0gPT09IHRoaXMuTUVUQSkgOiBudWxsO1xuICB9LFxuXG4gIGlzU2VydmljZTogZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBzZWdtZW50cyA9IHRoaXMucGFyc2UobmFtZSk7XG4gICAgcmV0dXJuIHNlZ21lbnRzID8gKHNlZ21lbnRzWzBdID09PSB0aGlzLlNFUlZJQ0UpIDogbnVsbDtcbiAgfSxcblxuICBpc1N1YnNjcmliYWJsZTogZnVuY3Rpb24obmFtZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKG5hbWUpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gIXRoaXMuaXNNZXRhKG5hbWUpICYmICF0aGlzLmlzU2VydmljZShuYW1lKTtcbiAgfSxcblxuICBTZXQ6IENsYXNzKHtcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2NoYW5uZWxzID0ge307XG4gICAgfSxcblxuICAgIGdldEtleXM6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGtleXMgPSBbXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9jaGFubmVscykga2V5cy5wdXNoKGtleSk7XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBkZWxldGUgdGhpcy5fY2hhbm5lbHNbbmFtZV07XG4gICAgfSxcblxuICAgIGhhc1N1YnNjcmlwdGlvbjogZnVuY3Rpb24obmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoYW5uZWxzLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgIH0sXG5cbiAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uKG5hbWVzLCBzdWJzY3JpcHRpb24pIHtcbiAgICAgIHZhciBuYW1lO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIG4gPSBuYW1lcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgbmFtZSA9IG5hbWVzW2ldO1xuICAgICAgICB2YXIgY2hhbm5lbCA9IHRoaXMuX2NoYW5uZWxzW25hbWVdID0gdGhpcy5fY2hhbm5lbHNbbmFtZV0gfHwgbmV3IENoYW5uZWwobmFtZSk7XG4gICAgICAgIGNoYW5uZWwuYmluZCgnbWVzc2FnZScsIHN1YnNjcmlwdGlvbik7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihuYW1lLCBzdWJzY3JpcHRpb24pIHtcbiAgICAgIHZhciBjaGFubmVsID0gdGhpcy5fY2hhbm5lbHNbbmFtZV07XG4gICAgICBpZiAoIWNoYW5uZWwpIHJldHVybiBmYWxzZTtcbiAgICAgIGNoYW5uZWwudW5iaW5kKCdtZXNzYWdlJywgc3Vic2NyaXB0aW9uKTtcblxuICAgICAgaWYgKGNoYW5uZWwuaXNVbnVzZWQoKSkge1xuICAgICAgICB0aGlzLnJlbW92ZShuYW1lKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGRpc3RyaWJ1dGVNZXNzYWdlOiBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICB2YXIgY2hhbm5lbHMgPSBDaGFubmVsLmV4cGFuZChtZXNzYWdlLmNoYW5uZWwpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGNoYW5uZWxzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IHRoaXMuX2NoYW5uZWxzW2NoYW5uZWxzW2ldXTtcbiAgICAgICAgaWYgKGNoYW5uZWwpIGNoYW5uZWwudHJpZ2dlcignbWVzc2FnZScsIG1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSlcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENoYW5uZWw7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBhc2FwICAgICAgICAgICAgPSByZXF1aXJlKCdhc2FwJyksXG4gICAgQ2xhc3MgICAgICAgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9jbGFzcycpLFxuICAgIFByb21pc2UgICAgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvcHJvbWlzZScpLFxuICAgIFVSSSAgICAgICAgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvdXJpJyksXG4gICAgYXJyYXkgICAgICAgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9hcnJheScpLFxuICAgIGJyb3dzZXIgICAgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvYnJvd3NlcicpLFxuICAgIGNvbnN0YW50cyAgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvY29uc3RhbnRzJyksXG4gICAgZXh0ZW5kICAgICAgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9leHRlbmQnKSxcbiAgICB2YWxpZGF0ZU9wdGlvbnMgPSByZXF1aXJlKCcuLi91dGlsL3ZhbGlkYXRlX29wdGlvbnMnKSxcbiAgICBEZWZlcnJhYmxlICAgICAgPSByZXF1aXJlKCcuLi9taXhpbnMvZGVmZXJyYWJsZScpLFxuICAgIExvZ2dpbmcgICAgICAgICA9IHJlcXVpcmUoJy4uL21peGlucy9sb2dnaW5nJyksXG4gICAgUHVibGlzaGVyICAgICAgID0gcmVxdWlyZSgnLi4vbWl4aW5zL3B1Ymxpc2hlcicpLFxuICAgIENoYW5uZWwgICAgICAgICA9IHJlcXVpcmUoJy4vY2hhbm5lbCcpLFxuICAgIERpc3BhdGNoZXIgICAgICA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hlcicpLFxuICAgIEVycm9yICAgICAgICAgICA9IHJlcXVpcmUoJy4vZXJyb3InKSxcbiAgICBFeHRlbnNpYmxlICAgICAgPSByZXF1aXJlKCcuL2V4dGVuc2libGUnKSxcbiAgICBQdWJsaWNhdGlvbiAgICAgPSByZXF1aXJlKCcuL3B1YmxpY2F0aW9uJyksXG4gICAgU3Vic2NyaXB0aW9uICAgID0gcmVxdWlyZSgnLi9zdWJzY3JpcHRpb24nKTtcblxudmFyIENsaWVudCA9IENsYXNzKHsgY2xhc3NOYW1lOiAnQ2xpZW50JyxcbiAgVU5DT05ORUNURUQ6ICAgICAgICAxLFxuICBDT05ORUNUSU5HOiAgICAgICAgIDIsXG4gIENPTk5FQ1RFRDogICAgICAgICAgMyxcbiAgRElTQ09OTkVDVEVEOiAgICAgICA0LFxuXG4gIEhBTkRTSEFLRTogICAgICAgICAgJ2hhbmRzaGFrZScsXG4gIFJFVFJZOiAgICAgICAgICAgICAgJ3JldHJ5JyxcbiAgTk9ORTogICAgICAgICAgICAgICAnbm9uZScsXG5cbiAgQ09OTkVDVElPTl9USU1FT1VUOiA2MCxcblxuICBERUZBVUxUX0VORFBPSU5UOiAgICcvYmF5ZXV4JyxcbiAgSU5URVJWQUw6ICAgICAgICAgICAwLFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKGVuZHBvaW50LCBvcHRpb25zKSB7XG4gICAgdGhpcy5pbmZvKCdOZXcgY2xpZW50IGNyZWF0ZWQgZm9yID8nLCBlbmRwb2ludCk7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICB2YWxpZGF0ZU9wdGlvbnMob3B0aW9ucywgWydpbnRlcnZhbCcsICd0aW1lb3V0JywgJ2VuZHBvaW50cycsICdwcm94eScsICdyZXRyeScsICdzY2hlZHVsZXInLCAnd2Vic29ja2V0RXh0ZW5zaW9ucycsICd0bHMnLCAnY2EnXSk7XG5cbiAgICB0aGlzLl9jaGFubmVscyAgID0gbmV3IENoYW5uZWwuU2V0KCk7XG4gICAgdGhpcy5fZGlzcGF0Y2hlciA9IERpc3BhdGNoZXIuY3JlYXRlKHRoaXMsIGVuZHBvaW50IHx8IHRoaXMuREVGQVVMVF9FTkRQT0lOVCwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLl9tZXNzYWdlSWQgPSAwO1xuICAgIHRoaXMuX3N0YXRlICAgICA9IHRoaXMuVU5DT05ORUNURUQ7XG5cbiAgICB0aGlzLl9yZXNwb25zZUNhbGxiYWNrcyA9IHt9O1xuXG4gICAgdGhpcy5fYWR2aWNlID0ge1xuICAgICAgcmVjb25uZWN0OiB0aGlzLlJFVFJZLFxuICAgICAgaW50ZXJ2YWw6ICAxMDAwICogKG9wdGlvbnMuaW50ZXJ2YWwgfHwgdGhpcy5JTlRFUlZBTCksXG4gICAgICB0aW1lb3V0OiAgIDEwMDAgKiAob3B0aW9ucy50aW1lb3V0ICB8fCB0aGlzLkNPTk5FQ1RJT05fVElNRU9VVClcbiAgICB9O1xuICAgIHRoaXMuX2Rpc3BhdGNoZXIudGltZW91dCA9IHRoaXMuX2FkdmljZS50aW1lb3V0IC8gMTAwMDtcblxuICAgIHRoaXMuX2Rpc3BhdGNoZXIuYmluZCgnbWVzc2FnZScsIHRoaXMuX3JlY2VpdmVNZXNzYWdlLCB0aGlzKTtcblxuICAgIGlmIChicm93c2VyLkV2ZW50ICYmIGdsb2JhbC5vbmJlZm9yZXVubG9hZCAhPT0gdW5kZWZpbmVkKVxuICAgICAgYnJvd3Nlci5FdmVudC5vbihnbG9iYWwsICdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGFycmF5LmluZGV4T2YodGhpcy5fZGlzcGF0Y2hlci5fZGlzYWJsZWQsICdhdXRvZGlzY29ubmVjdCcpIDwgMClcbiAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH0sIHRoaXMpO1xuICB9LFxuXG4gIGFkZFdlYnNvY2tldEV4dGVuc2lvbjogZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rpc3BhdGNoZXIuYWRkV2Vic29ja2V0RXh0ZW5zaW9uKGV4dGVuc2lvbik7XG4gIH0sXG5cbiAgZGlzYWJsZTogZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgIHJldHVybiB0aGlzLl9kaXNwYXRjaGVyLmRpc2FibGUoZmVhdHVyZSk7XG4gIH0sXG5cbiAgc2V0SGVhZGVyOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9kaXNwYXRjaGVyLnNldEhlYWRlcihuYW1lLCB2YWx1ZSk7XG4gIH0sXG5cbiAgLy8gUmVxdWVzdFxuICAvLyBNVVNUIGluY2x1ZGU6ICAqIGNoYW5uZWxcbiAgLy8gICAgICAgICAgICAgICAgKiB2ZXJzaW9uXG4gIC8vICAgICAgICAgICAgICAgICogc3VwcG9ydGVkQ29ubmVjdGlvblR5cGVzXG4gIC8vIE1BWSBpbmNsdWRlOiAgICogbWluaW11bVZlcnNpb25cbiAgLy8gICAgICAgICAgICAgICAgKiBleHRcbiAgLy8gICAgICAgICAgICAgICAgKiBpZFxuICAvL1xuICAvLyBTdWNjZXNzIFJlc3BvbnNlICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYWlsZWQgUmVzcG9uc2VcbiAgLy8gTVVTVCBpbmNsdWRlOiAgKiBjaGFubmVsICAgICAgICAgICAgICAgICAgICAgTVVTVCBpbmNsdWRlOiAgKiBjaGFubmVsXG4gIC8vICAgICAgICAgICAgICAgICogdmVyc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogc3VjY2Vzc2Z1bFxuICAvLyAgICAgICAgICAgICAgICAqIHN1cHBvcnRlZENvbm5lY3Rpb25UeXBlcyAgICAgICAgICAgICAgICAgICAqIGVycm9yXG4gIC8vICAgICAgICAgICAgICAgICogY2xpZW50SWQgICAgICAgICAgICAgICAgICAgIE1BWSBpbmNsdWRlOiAgICogc3VwcG9ydGVkQ29ubmVjdGlvblR5cGVzXG4gIC8vICAgICAgICAgICAgICAgICogc3VjY2Vzc2Z1bCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYWR2aWNlXG4gIC8vIE1BWSBpbmNsdWRlOiAgICogbWluaW11bVZlcnNpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogdmVyc2lvblxuICAvLyAgICAgICAgICAgICAgICAqIGFkdmljZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIG1pbmltdW1WZXJzaW9uXG4gIC8vICAgICAgICAgICAgICAgICogZXh0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZXh0XG4gIC8vICAgICAgICAgICAgICAgICogaWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogaWRcbiAgLy8gICAgICAgICAgICAgICAgKiBhdXRoU3VjY2Vzc2Z1bFxuICBoYW5kc2hha2U6IGZ1bmN0aW9uKGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgaWYgKHRoaXMuX2FkdmljZS5yZWNvbm5lY3QgPT09IHRoaXMuTk9ORSkgcmV0dXJuO1xuICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gdGhpcy5VTkNPTk5FQ1RFRCkgcmV0dXJuO1xuXG4gICAgdGhpcy5fc3RhdGUgPSB0aGlzLkNPTk5FQ1RJTkc7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdGhpcy5pbmZvKCdJbml0aWF0aW5nIGhhbmRzaGFrZSB3aXRoID8nLCBVUkkuc3RyaW5naWZ5KHRoaXMuX2Rpc3BhdGNoZXIuZW5kcG9pbnQpKTtcbiAgICB0aGlzLl9kaXNwYXRjaGVyLnNlbGVjdFRyYW5zcG9ydChjb25zdGFudHMuTUFOREFUT1JZX0NPTk5FQ1RJT05fVFlQRVMpO1xuXG4gICAgdGhpcy5fc2VuZE1lc3NhZ2Uoe1xuICAgICAgY2hhbm5lbDogICAgICAgICAgICAgICAgICBDaGFubmVsLkhBTkRTSEFLRSxcbiAgICAgIHZlcnNpb246ICAgICAgICAgICAgICAgICAgY29uc3RhbnRzLkJBWUVVWF9WRVJTSU9OLFxuICAgICAgc3VwcG9ydGVkQ29ubmVjdGlvblR5cGVzOiB0aGlzLl9kaXNwYXRjaGVyLmdldENvbm5lY3Rpb25UeXBlcygpXG5cbiAgICB9LCB7fSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcblxuICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3NmdWwpIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSB0aGlzLkNPTk5FQ1RFRDtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2hlci5jbGllbnRJZCAgPSByZXNwb25zZS5jbGllbnRJZDtcblxuICAgICAgICB0aGlzLl9kaXNwYXRjaGVyLnNlbGVjdFRyYW5zcG9ydChyZXNwb25zZS5zdXBwb3J0ZWRDb25uZWN0aW9uVHlwZXMpO1xuXG4gICAgICAgIHRoaXMuaW5mbygnSGFuZHNoYWtlIHN1Y2Nlc3NmdWw6ID8nLCB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkKTtcblxuICAgICAgICB0aGlzLnN1YnNjcmliZSh0aGlzLl9jaGFubmVscy5nZXRLZXlzKCksIHRydWUpO1xuICAgICAgICBpZiAoY2FsbGJhY2spIGFzYXAoZnVuY3Rpb24oKSB7IGNhbGxiYWNrLmNhbGwoY29udGV4dCkgfSk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW5mbygnSGFuZHNoYWtlIHVuc3VjY2Vzc2Z1bCcpO1xuICAgICAgICBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHsgc2VsZi5oYW5kc2hha2UoY2FsbGJhY2ssIGNvbnRleHQpIH0sIHRoaXMuX2Rpc3BhdGNoZXIucmV0cnkgKiAxMDAwKTtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSB0aGlzLlVOQ09OTkVDVEVEO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9LFxuXG4gIC8vIFJlcXVlc3QgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXNwb25zZVxuICAvLyBNVVNUIGluY2x1ZGU6ICAqIGNoYW5uZWwgICAgICAgICAgICAgTVVTVCBpbmNsdWRlOiAgKiBjaGFubmVsXG4gIC8vICAgICAgICAgICAgICAgICogY2xpZW50SWQgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHN1Y2Nlc3NmdWxcbiAgLy8gICAgICAgICAgICAgICAgKiBjb25uZWN0aW9uVHlwZSAgICAgICAgICAgICAgICAgICAgICogY2xpZW50SWRcbiAgLy8gTUFZIGluY2x1ZGU6ICAgKiBleHQgICAgICAgICAgICAgICAgIE1BWSBpbmNsdWRlOiAgICogZXJyb3JcbiAgLy8gICAgICAgICAgICAgICAgKiBpZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYWR2aWNlXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGV4dFxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBpZFxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB0aW1lc3RhbXBcbiAgY29ubmVjdDogZnVuY3Rpb24oY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICBpZiAodGhpcy5fYWR2aWNlLnJlY29ubmVjdCA9PT0gdGhpcy5OT05FKSByZXR1cm47XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSB0aGlzLkRJU0NPTk5FQ1RFRCkgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSB0aGlzLlVOQ09OTkVDVEVEKVxuICAgICAgcmV0dXJuIHRoaXMuaGFuZHNoYWtlKGZ1bmN0aW9uKCkgeyB0aGlzLmNvbm5lY3QoY2FsbGJhY2ssIGNvbnRleHQpIH0sIHRoaXMpO1xuXG4gICAgdGhpcy5jYWxsYmFjayhjYWxsYmFjaywgY29udGV4dCk7XG4gICAgaWYgKHRoaXMuX3N0YXRlICE9PSB0aGlzLkNPTk5FQ1RFRCkgcmV0dXJuO1xuXG4gICAgdGhpcy5pbmZvKCdDYWxsaW5nIGRlZmVycmVkIGFjdGlvbnMgZm9yID8nLCB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkKTtcbiAgICB0aGlzLnNldERlZmVycmVkU3RhdHVzKCdzdWNjZWVkZWQnKTtcbiAgICB0aGlzLnNldERlZmVycmVkU3RhdHVzKCd1bmtub3duJyk7XG5cbiAgICBpZiAodGhpcy5fY29ubmVjdFJlcXVlc3QpIHJldHVybjtcbiAgICB0aGlzLl9jb25uZWN0UmVxdWVzdCA9IHRydWU7XG5cbiAgICB0aGlzLmluZm8oJ0luaXRpYXRpbmcgY29ubmVjdGlvbiBmb3IgPycsIHRoaXMuX2Rpc3BhdGNoZXIuY2xpZW50SWQpO1xuXG4gICAgdGhpcy5fc2VuZE1lc3NhZ2Uoe1xuICAgICAgY2hhbm5lbDogICAgICAgIENoYW5uZWwuQ09OTkVDVCxcbiAgICAgIGNsaWVudElkOiAgICAgICB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkLFxuICAgICAgY29ubmVjdGlvblR5cGU6IHRoaXMuX2Rpc3BhdGNoZXIuY29ubmVjdGlvblR5cGVcblxuICAgIH0sIHt9LCB0aGlzLl9jeWNsZUNvbm5lY3Rpb24sIHRoaXMpO1xuICB9LFxuXG4gIC8vIFJlcXVlc3QgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZXNwb25zZVxuICAvLyBNVVNUIGluY2x1ZGU6ICAqIGNoYW5uZWwgICAgICAgICAgICAgTVVTVCBpbmNsdWRlOiAgKiBjaGFubmVsXG4gIC8vICAgICAgICAgICAgICAgICogY2xpZW50SWQgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHN1Y2Nlc3NmdWxcbiAgLy8gTUFZIGluY2x1ZGU6ICAgKiBleHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogY2xpZW50SWRcbiAgLy8gICAgICAgICAgICAgICAgKiBpZCAgICAgICAgICAgICAgICAgIE1BWSBpbmNsdWRlOiAgICogZXJyb3JcbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZXh0XG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGlkXG4gIGRpc2Nvbm5lY3Q6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gdGhpcy5DT05ORUNURUQpIHJldHVybjtcbiAgICB0aGlzLl9zdGF0ZSA9IHRoaXMuRElTQ09OTkVDVEVEO1xuXG4gICAgdGhpcy5pbmZvKCdEaXNjb25uZWN0aW5nID8nLCB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkKTtcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQdWJsaWNhdGlvbigpO1xuXG4gICAgdGhpcy5fc2VuZE1lc3NhZ2Uoe1xuICAgICAgY2hhbm5lbDogIENoYW5uZWwuRElTQ09OTkVDVCxcbiAgICAgIGNsaWVudElkOiB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkXG5cbiAgICB9LCB7fSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzZnVsKSB7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoZXIuY2xvc2UoKTtcbiAgICAgICAgcHJvbWlzZS5zZXREZWZlcnJlZFN0YXR1cygnc3VjY2VlZGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9taXNlLnNldERlZmVycmVkU3RhdHVzKCdmYWlsZWQnLCBFcnJvci5wYXJzZShyZXNwb25zZS5lcnJvcikpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuXG4gICAgdGhpcy5pbmZvKCdDbGVhcmluZyBjaGFubmVsIGxpc3RlbmVycyBmb3IgPycsIHRoaXMuX2Rpc3BhdGNoZXIuY2xpZW50SWQpO1xuICAgIHRoaXMuX2NoYW5uZWxzID0gbmV3IENoYW5uZWwuU2V0KCk7XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbiAgfSxcblxuICAvLyBSZXF1ZXN0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVzcG9uc2VcbiAgLy8gTVVTVCBpbmNsdWRlOiAgKiBjaGFubmVsICAgICAgICAgICAgIE1VU1QgaW5jbHVkZTogICogY2hhbm5lbFxuICAvLyAgICAgICAgICAgICAgICAqIGNsaWVudElkICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBzdWNjZXNzZnVsXG4gIC8vICAgICAgICAgICAgICAgICogc3Vic2NyaXB0aW9uICAgICAgICAgICAgICAgICAgICAgICAqIGNsaWVudElkXG4gIC8vIE1BWSBpbmNsdWRlOiAgICogZXh0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHN1YnNjcmlwdGlvblxuICAvLyAgICAgICAgICAgICAgICAqIGlkICAgICAgICAgICAgICAgICAgTUFZIGluY2x1ZGU6ICAgKiBlcnJvclxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBhZHZpY2VcbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogZXh0XG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGlkXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHRpbWVzdGFtcFxuICBzdWJzY3JpYmU6IGZ1bmN0aW9uKGNoYW5uZWwsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgaWYgKGNoYW5uZWwgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgIHJldHVybiBhcnJheS5tYXAoY2hhbm5lbCwgZnVuY3Rpb24oYykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmUoYywgY2FsbGJhY2ssIGNvbnRleHQpO1xuICAgICAgfSwgdGhpcyk7XG5cbiAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzLCBjaGFubmVsLCBjYWxsYmFjaywgY29udGV4dCksXG4gICAgICAgIGZvcmNlICAgICAgICA9IChjYWxsYmFjayA9PT0gdHJ1ZSksXG4gICAgICAgIGhhc1N1YnNjcmliZSA9IHRoaXMuX2NoYW5uZWxzLmhhc1N1YnNjcmlwdGlvbihjaGFubmVsKTtcblxuICAgIGlmIChoYXNTdWJzY3JpYmUgJiYgIWZvcmNlKSB7XG4gICAgICB0aGlzLl9jaGFubmVscy5zdWJzY3JpYmUoW2NoYW5uZWxdLCBzdWJzY3JpcHRpb24pO1xuICAgICAgc3Vic2NyaXB0aW9uLnNldERlZmVycmVkU3RhdHVzKCdzdWNjZWVkZWQnKTtcbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfVxuXG4gICAgdGhpcy5jb25uZWN0KGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5pbmZvKCdDbGllbnQgPyBhdHRlbXB0aW5nIHRvIHN1YnNjcmliZSB0byA/JywgdGhpcy5fZGlzcGF0Y2hlci5jbGllbnRJZCwgY2hhbm5lbCk7XG4gICAgICBpZiAoIWZvcmNlKSB0aGlzLl9jaGFubmVscy5zdWJzY3JpYmUoW2NoYW5uZWxdLCBzdWJzY3JpcHRpb24pO1xuXG4gICAgICB0aGlzLl9zZW5kTWVzc2FnZSh7XG4gICAgICAgIGNoYW5uZWw6ICAgICAgQ2hhbm5lbC5TVUJTQ1JJQkUsXG4gICAgICAgIGNsaWVudElkOiAgICAgdGhpcy5fZGlzcGF0Y2hlci5jbGllbnRJZCxcbiAgICAgICAgc3Vic2NyaXB0aW9uOiBjaGFubmVsXG5cbiAgICAgIH0sIHt9LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3NmdWwpIHtcbiAgICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGVmZXJyZWRTdGF0dXMoJ2ZhaWxlZCcsIEVycm9yLnBhcnNlKHJlc3BvbnNlLmVycm9yKSk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2NoYW5uZWxzLnVuc3Vic2NyaWJlKGNoYW5uZWwsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2hhbm5lbHMgPSBbXS5jb25jYXQocmVzcG9uc2Uuc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgdGhpcy5pbmZvKCdTdWJzY3JpcHRpb24gYWNrbm93bGVkZ2VkIGZvciA/IHRvID8nLCB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkLCBjaGFubmVscyk7XG4gICAgICAgIHN1YnNjcmlwdGlvbi5zZXREZWZlcnJlZFN0YXR1cygnc3VjY2VlZGVkJyk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9LCB0aGlzKTtcblxuICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gIH0sXG5cbiAgLy8gUmVxdWVzdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlc3BvbnNlXG4gIC8vIE1VU1QgaW5jbHVkZTogICogY2hhbm5lbCAgICAgICAgICAgICBNVVNUIGluY2x1ZGU6ICAqIGNoYW5uZWxcbiAgLy8gICAgICAgICAgICAgICAgKiBjbGllbnRJZCAgICAgICAgICAgICAgICAgICAgICAgICAgICogc3VjY2Vzc2Z1bFxuICAvLyAgICAgICAgICAgICAgICAqIHN1YnNjcmlwdGlvbiAgICAgICAgICAgICAgICAgICAgICAgKiBjbGllbnRJZFxuICAvLyBNQVkgaW5jbHVkZTogICAqIGV4dCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBzdWJzY3JpcHRpb25cbiAgLy8gICAgICAgICAgICAgICAgKiBpZCAgICAgICAgICAgICAgICAgIE1BWSBpbmNsdWRlOiAgICogZXJyb3JcbiAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogYWR2aWNlXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGV4dFxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBpZFxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiB0aW1lc3RhbXBcbiAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uKGNoYW5uZWwsIHN1YnNjcmlwdGlvbikge1xuICAgIGlmIChjaGFubmVsIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICByZXR1cm4gYXJyYXkubWFwKGNoYW5uZWwsIGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5zdWJzY3JpYmUoYywgc3Vic2NyaXB0aW9uKTtcbiAgICAgIH0sIHRoaXMpO1xuXG4gICAgdmFyIGRlYWQgPSB0aGlzLl9jaGFubmVscy51bnN1YnNjcmliZShjaGFubmVsLCBzdWJzY3JpcHRpb24pO1xuICAgIGlmICghZGVhZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5jb25uZWN0KGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5pbmZvKCdDbGllbnQgPyBhdHRlbXB0aW5nIHRvIHVuc3Vic2NyaWJlIGZyb20gPycsIHRoaXMuX2Rpc3BhdGNoZXIuY2xpZW50SWQsIGNoYW5uZWwpO1xuXG4gICAgICB0aGlzLl9zZW5kTWVzc2FnZSh7XG4gICAgICAgIGNoYW5uZWw6ICAgICAgQ2hhbm5lbC5VTlNVQlNDUklCRSxcbiAgICAgICAgY2xpZW50SWQ6ICAgICB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkLFxuICAgICAgICBzdWJzY3JpcHRpb246IGNoYW5uZWxcblxuICAgICAgfSwge30sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2Vzc2Z1bCkgcmV0dXJuO1xuXG4gICAgICAgIHZhciBjaGFubmVscyA9IFtdLmNvbmNhdChyZXNwb25zZS5zdWJzY3JpcHRpb24pO1xuICAgICAgICB0aGlzLmluZm8oJ1Vuc3Vic2NyaXB0aW9uIGFja25vd2xlZGdlZCBmb3IgPyBmcm9tID8nLCB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkLCBjaGFubmVscyk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9LCB0aGlzKTtcbiAgfSxcblxuICAvLyBSZXF1ZXN0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVzcG9uc2VcbiAgLy8gTVVTVCBpbmNsdWRlOiAgKiBjaGFubmVsICAgICAgICAgICAgIE1VU1QgaW5jbHVkZTogICogY2hhbm5lbFxuICAvLyAgICAgICAgICAgICAgICAqIGRhdGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBzdWNjZXNzZnVsXG4gIC8vIE1BWSBpbmNsdWRlOiAgICogY2xpZW50SWQgICAgICAgICAgICBNQVkgaW5jbHVkZTogICAqIGlkXG4gIC8vICAgICAgICAgICAgICAgICogaWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGVycm9yXG4gIC8vICAgICAgICAgICAgICAgICogZXh0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGV4dFxuICBwdWJsaXNoOiBmdW5jdGlvbihjaGFubmVsLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgdmFsaWRhdGVPcHRpb25zKG9wdGlvbnMgfHwge30sIFsnYXR0ZW1wdHMnLCAnZGVhZGxpbmUnXSk7XG4gICAgdmFyIHB1YmxpY2F0aW9uID0gbmV3IFB1YmxpY2F0aW9uKCk7XG5cbiAgICB0aGlzLmNvbm5lY3QoZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmluZm8oJ0NsaWVudCA/IHF1ZXVlaW5nIHB1Ymxpc2hlZCBtZXNzYWdlIHRvID86ID8nLCB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkLCBjaGFubmVsLCBkYXRhKTtcblxuICAgICAgdGhpcy5fc2VuZE1lc3NhZ2Uoe1xuICAgICAgICBjaGFubmVsOiAgY2hhbm5lbCxcbiAgICAgICAgZGF0YTogICAgIGRhdGEsXG4gICAgICAgIGNsaWVudElkOiB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkXG5cbiAgICAgIH0sIG9wdGlvbnMsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzZnVsKVxuICAgICAgICAgIHB1YmxpY2F0aW9uLnNldERlZmVycmVkU3RhdHVzKCdzdWNjZWVkZWQnKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHB1YmxpY2F0aW9uLnNldERlZmVycmVkU3RhdHVzKCdmYWlsZWQnLCBFcnJvci5wYXJzZShyZXNwb25zZS5lcnJvcikpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSwgdGhpcyk7XG5cbiAgICByZXR1cm4gcHVibGljYXRpb247XG4gIH0sXG5cbiAgX3NlbmRNZXNzYWdlOiBmdW5jdGlvbihtZXNzYWdlLCBvcHRpb25zLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIG1lc3NhZ2UuaWQgPSB0aGlzLl9nZW5lcmF0ZU1lc3NhZ2VJZCgpO1xuXG4gICAgdmFyIHRpbWVvdXQgPSB0aGlzLl9hZHZpY2UudGltZW91dFxuICAgICAgICAgICAgICAgID8gMS4yICogdGhpcy5fYWR2aWNlLnRpbWVvdXQgLyAxMDAwXG4gICAgICAgICAgICAgICAgOiAxLjIgKiB0aGlzLl9kaXNwYXRjaGVyLnJldHJ5O1xuXG4gICAgdGhpcy5waXBlVGhyb3VnaEV4dGVuc2lvbnMoJ291dGdvaW5nJywgbWVzc2FnZSwgbnVsbCwgZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgaWYgKCFtZXNzYWdlKSByZXR1cm47XG4gICAgICBpZiAoY2FsbGJhY2spIHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW21lc3NhZ2UuaWRdID0gW2NhbGxiYWNrLCBjb250ZXh0XTtcbiAgICAgIHRoaXMuX2Rpc3BhdGNoZXIuc2VuZE1lc3NhZ2UobWVzc2FnZSwgdGltZW91dCwgb3B0aW9ucyB8fCB7fSk7XG4gICAgfSwgdGhpcyk7XG4gIH0sXG5cbiAgX2dlbmVyYXRlTWVzc2FnZUlkOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgKz0gMTtcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkID49IE1hdGgucG93KDIsMzIpKSB0aGlzLl9tZXNzYWdlSWQgPSAwO1xuICAgIHJldHVybiB0aGlzLl9tZXNzYWdlSWQudG9TdHJpbmcoMzYpO1xuICB9LFxuXG4gIF9yZWNlaXZlTWVzc2FnZTogZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIHZhciBpZCA9IG1lc3NhZ2UuaWQsIGNhbGxiYWNrO1xuXG4gICAgaWYgKG1lc3NhZ2Uuc3VjY2Vzc2Z1bCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjYWxsYmFjayA9IHRoaXMuX3Jlc3BvbnNlQ2FsbGJhY2tzW2lkXTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9yZXNwb25zZUNhbGxiYWNrc1tpZF07XG4gICAgfVxuXG4gICAgdGhpcy5waXBlVGhyb3VnaEV4dGVuc2lvbnMoJ2luY29taW5nJywgbWVzc2FnZSwgbnVsbCwgZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgaWYgKCFtZXNzYWdlKSByZXR1cm47XG4gICAgICBpZiAobWVzc2FnZS5hZHZpY2UpIHRoaXMuX2hhbmRsZUFkdmljZShtZXNzYWdlLmFkdmljZSk7XG4gICAgICB0aGlzLl9kZWxpdmVyTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2tbMF0uY2FsbChjYWxsYmFja1sxXSwgbWVzc2FnZSk7XG4gICAgfSwgdGhpcyk7XG4gIH0sXG5cbiAgX2hhbmRsZUFkdmljZTogZnVuY3Rpb24oYWR2aWNlKSB7XG4gICAgZXh0ZW5kKHRoaXMuX2FkdmljZSwgYWR2aWNlKTtcbiAgICB0aGlzLl9kaXNwYXRjaGVyLnRpbWVvdXQgPSB0aGlzLl9hZHZpY2UudGltZW91dCAvIDEwMDA7XG5cbiAgICBpZiAodGhpcy5fYWR2aWNlLnJlY29ubmVjdCA9PT0gdGhpcy5IQU5EU0hBS0UgJiYgdGhpcy5fc3RhdGUgIT09IHRoaXMuRElTQ09OTkVDVEVEKSB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHRoaXMuVU5DT05ORUNURUQ7XG4gICAgICB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkID0gbnVsbDtcbiAgICAgIHRoaXMuX2N5Y2xlQ29ubmVjdGlvbigpO1xuICAgIH1cbiAgfSxcblxuICBfZGVsaXZlck1lc3NhZ2U6IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICBpZiAoIW1lc3NhZ2UuY2hhbm5lbCB8fCBtZXNzYWdlLmRhdGEgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgIHRoaXMuaW5mbygnQ2xpZW50ID8gY2FsbGluZyBsaXN0ZW5lcnMgZm9yID8gd2l0aCA/JywgdGhpcy5fZGlzcGF0Y2hlci5jbGllbnRJZCwgbWVzc2FnZS5jaGFubmVsLCBtZXNzYWdlLmRhdGEpO1xuICAgIHRoaXMuX2NoYW5uZWxzLmRpc3RyaWJ1dGVNZXNzYWdlKG1lc3NhZ2UpO1xuICB9LFxuXG4gIF9jeWNsZUNvbm5lY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9jb25uZWN0UmVxdWVzdCkge1xuICAgICAgdGhpcy5fY29ubmVjdFJlcXVlc3QgPSBudWxsO1xuICAgICAgdGhpcy5pbmZvKCdDbG9zZWQgY29ubmVjdGlvbiBmb3IgPycsIHRoaXMuX2Rpc3BhdGNoZXIuY2xpZW50SWQpO1xuICAgIH1cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgZ2xvYmFsLnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IHNlbGYuY29ubmVjdCgpIH0sIHRoaXMuX2FkdmljZS5pbnRlcnZhbCk7XG4gIH1cbn0pO1xuXG5leHRlbmQoQ2xpZW50LnByb3RvdHlwZSwgRGVmZXJyYWJsZSk7XG5leHRlbmQoQ2xpZW50LnByb3RvdHlwZSwgUHVibGlzaGVyKTtcbmV4dGVuZChDbGllbnQucHJvdG90eXBlLCBMb2dnaW5nKTtcbmV4dGVuZChDbGllbnQucHJvdG90eXBlLCBFeHRlbnNpYmxlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDbGllbnQ7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBDbGFzcyAgICAgPSByZXF1aXJlKCcuLi91dGlsL2NsYXNzJyksXG4gICAgVVJJICAgICAgID0gcmVxdWlyZSgnLi4vdXRpbC91cmknKSxcbiAgICBjb29raWVzICAgPSByZXF1aXJlKCcuLi91dGlsL2Nvb2tpZXMnKSxcbiAgICBleHRlbmQgICAgPSByZXF1aXJlKCcuLi91dGlsL2V4dGVuZCcpLFxuICAgIExvZ2dpbmcgICA9IHJlcXVpcmUoJy4uL21peGlucy9sb2dnaW5nJyksXG4gICAgUHVibGlzaGVyID0gcmVxdWlyZSgnLi4vbWl4aW5zL3B1Ymxpc2hlcicpLFxuICAgIFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4uL3RyYW5zcG9ydCcpLFxuICAgIFNjaGVkdWxlciA9IHJlcXVpcmUoJy4vc2NoZWR1bGVyJyk7XG5cbnZhciBEaXNwYXRjaGVyID0gQ2xhc3MoeyBjbGFzc05hbWU6ICdEaXNwYXRjaGVyJyxcbiAgTUFYX1JFUVVFU1RfU0laRTogMjA0OCxcbiAgREVGQVVMVF9SRVRSWTogICAgNSxcblxuICBVUDogICAxLFxuICBET1dOOiAyLFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNsaWVudCwgZW5kcG9pbnQsIG9wdGlvbnMpIHtcbiAgICB0aGlzLl9jbGllbnQgICAgID0gY2xpZW50O1xuICAgIHRoaXMuZW5kcG9pbnQgICAgPSBVUkkucGFyc2UoZW5kcG9pbnQpO1xuICAgIHRoaXMuX2FsdGVybmF0ZXMgPSBvcHRpb25zLmVuZHBvaW50cyB8fCB7fTtcblxuICAgIHRoaXMuY29va2llcyAgICAgID0gY29va2llcy5Db29raWVKYXIgJiYgbmV3IGNvb2tpZXMuQ29va2llSmFyKCk7XG4gICAgdGhpcy5fZGlzYWJsZWQgICAgPSBbXTtcbiAgICB0aGlzLl9lbnZlbG9wZXMgICA9IHt9O1xuICAgIHRoaXMuaGVhZGVycyAgICAgID0ge307XG4gICAgdGhpcy5yZXRyeSAgICAgICAgPSBvcHRpb25zLnJldHJ5IHx8IHRoaXMuREVGQVVMVF9SRVRSWTtcbiAgICB0aGlzLl9zY2hlZHVsZXIgICA9IG9wdGlvbnMuc2NoZWR1bGVyIHx8IFNjaGVkdWxlcjtcbiAgICB0aGlzLl9zdGF0ZSAgICAgICA9IDA7XG4gICAgdGhpcy50cmFuc3BvcnRzICAgPSB7fTtcbiAgICB0aGlzLndzRXh0ZW5zaW9ucyA9IFtdO1xuXG4gICAgdGhpcy5wcm94eSA9IG9wdGlvbnMucHJveHkgfHwge307XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9wcm94eSA9PT0gJ3N0cmluZycpIHRoaXMuX3Byb3h5ID0ge29yaWdpbjogdGhpcy5fcHJveHl9O1xuXG4gICAgdmFyIGV4dHMgPSBvcHRpb25zLndlYnNvY2tldEV4dGVuc2lvbnM7XG4gICAgaWYgKGV4dHMpIHtcbiAgICAgIGV4dHMgPSBbXS5jb25jYXQoZXh0cyk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGV4dHMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuICAgICAgICB0aGlzLmFkZFdlYnNvY2tldEV4dGVuc2lvbihleHRzW2ldKTtcbiAgICB9XG5cbiAgICB0aGlzLnRscyA9IG9wdGlvbnMudGxzIHx8IHt9O1xuICAgIHRoaXMudGxzLmNhID0gdGhpcy50bHMuY2EgfHwgb3B0aW9ucy5jYTtcblxuICAgIGZvciAodmFyIHR5cGUgaW4gdGhpcy5fYWx0ZXJuYXRlcylcbiAgICAgIHRoaXMuX2FsdGVybmF0ZXNbdHlwZV0gPSBVUkkucGFyc2UodGhpcy5fYWx0ZXJuYXRlc1t0eXBlXSk7XG5cbiAgICB0aGlzLm1heFJlcXVlc3RTaXplID0gdGhpcy5NQVhfUkVRVUVTVF9TSVpFO1xuICB9LFxuXG4gIGVuZHBvaW50Rm9yOiBmdW5jdGlvbihjb25uZWN0aW9uVHlwZSkge1xuICAgIHJldHVybiB0aGlzLl9hbHRlcm5hdGVzW2Nvbm5lY3Rpb25UeXBlXSB8fCB0aGlzLmVuZHBvaW50O1xuICB9LFxuXG4gIGFkZFdlYnNvY2tldEV4dGVuc2lvbjogZnVuY3Rpb24oZXh0ZW5zaW9uKSB7XG4gICAgdGhpcy53c0V4dGVuc2lvbnMucHVzaChleHRlbnNpb24pO1xuICB9LFxuXG4gIGRpc2FibGU6IGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICB0aGlzLl9kaXNhYmxlZC5wdXNoKGZlYXR1cmUpO1xuICB9LFxuXG4gIHNldEhlYWRlcjogZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLmhlYWRlcnNbbmFtZV0gPSB2YWx1ZTtcbiAgfSxcblxuICBjbG9zZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRyYW5zcG9ydCA9IHRoaXMuX3RyYW5zcG9ydDtcbiAgICBkZWxldGUgdGhpcy5fdHJhbnNwb3J0O1xuICAgIGlmICh0cmFuc3BvcnQpIHRyYW5zcG9ydC5jbG9zZSgpO1xuICB9LFxuXG4gIGdldENvbm5lY3Rpb25UeXBlczogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFRyYW5zcG9ydC5nZXRDb25uZWN0aW9uVHlwZXMoKTtcbiAgfSxcblxuICBzZWxlY3RUcmFuc3BvcnQ6IGZ1bmN0aW9uKHRyYW5zcG9ydFR5cGVzKSB7XG4gICAgVHJhbnNwb3J0LmdldCh0aGlzLCB0cmFuc3BvcnRUeXBlcywgdGhpcy5fZGlzYWJsZWQsIGZ1bmN0aW9uKHRyYW5zcG9ydCkge1xuICAgICAgdGhpcy5kZWJ1ZygnU2VsZWN0ZWQgPyB0cmFuc3BvcnQgZm9yID8nLCB0cmFuc3BvcnQuY29ubmVjdGlvblR5cGUsIFVSSS5zdHJpbmdpZnkodHJhbnNwb3J0LmVuZHBvaW50KSk7XG5cbiAgICAgIGlmICh0cmFuc3BvcnQgPT09IHRoaXMuX3RyYW5zcG9ydCkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuX3RyYW5zcG9ydCkgdGhpcy5fdHJhbnNwb3J0LmNsb3NlKCk7XG5cbiAgICAgIHRoaXMuX3RyYW5zcG9ydCA9IHRyYW5zcG9ydDtcbiAgICAgIHRoaXMuY29ubmVjdGlvblR5cGUgPSB0cmFuc3BvcnQuY29ubmVjdGlvblR5cGU7XG4gICAgfSwgdGhpcyk7XG4gIH0sXG5cbiAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uKG1lc3NhZ2UsIHRpbWVvdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHZhciBpZCAgICAgICA9IG1lc3NhZ2UuaWQsXG4gICAgICAgIGF0dGVtcHRzID0gb3B0aW9ucy5hdHRlbXB0cyxcbiAgICAgICAgZGVhZGxpbmUgPSBvcHRpb25zLmRlYWRsaW5lICYmIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgKG9wdGlvbnMuZGVhZGxpbmUgKiAxMDAwKSxcbiAgICAgICAgZW52ZWxvcGUgPSB0aGlzLl9lbnZlbG9wZXNbaWRdLFxuICAgICAgICBzY2hlZHVsZXI7XG5cbiAgICBpZiAoIWVudmVsb3BlKSB7XG4gICAgICBzY2hlZHVsZXIgPSBuZXcgdGhpcy5fc2NoZWR1bGVyKG1lc3NhZ2UsIHt0aW1lb3V0OiB0aW1lb3V0LCBpbnRlcnZhbDogdGhpcy5yZXRyeSwgYXR0ZW1wdHM6IGF0dGVtcHRzLCBkZWFkbGluZTogZGVhZGxpbmV9KTtcbiAgICAgIGVudmVsb3BlICA9IHRoaXMuX2VudmVsb3Blc1tpZF0gPSB7bWVzc2FnZTogbWVzc2FnZSwgc2NoZWR1bGVyOiBzY2hlZHVsZXJ9O1xuICAgIH1cblxuICAgIHRoaXMuX3NlbmRFbnZlbG9wZShlbnZlbG9wZSk7XG4gIH0sXG5cbiAgX3NlbmRFbnZlbG9wZTogZnVuY3Rpb24oZW52ZWxvcGUpIHtcbiAgICBpZiAoIXRoaXMuX3RyYW5zcG9ydCkgcmV0dXJuO1xuICAgIGlmIChlbnZlbG9wZS5yZXF1ZXN0IHx8IGVudmVsb3BlLnRpbWVyKSByZXR1cm47XG5cbiAgICB2YXIgbWVzc2FnZSAgID0gZW52ZWxvcGUubWVzc2FnZSxcbiAgICAgICAgc2NoZWR1bGVyID0gZW52ZWxvcGUuc2NoZWR1bGVyLFxuICAgICAgICBzZWxmICAgICAgPSB0aGlzO1xuXG4gICAgaWYgKCFzY2hlZHVsZXIuaXNEZWxpdmVyYWJsZSgpKSB7XG4gICAgICBzY2hlZHVsZXIuYWJvcnQoKTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9lbnZlbG9wZXNbbWVzc2FnZS5pZF07XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZW52ZWxvcGUudGltZXIgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuaGFuZGxlRXJyb3IobWVzc2FnZSk7XG4gICAgfSwgc2NoZWR1bGVyLmdldFRpbWVvdXQoKSAqIDEwMDApO1xuXG4gICAgc2NoZWR1bGVyLnNlbmQoKTtcbiAgICBlbnZlbG9wZS5yZXF1ZXN0ID0gdGhpcy5fdHJhbnNwb3J0LnNlbmRNZXNzYWdlKG1lc3NhZ2UpO1xuICB9LFxuXG4gIGhhbmRsZVJlc3BvbnNlOiBmdW5jdGlvbihyZXBseSkge1xuICAgIHZhciBlbnZlbG9wZSA9IHRoaXMuX2VudmVsb3Blc1tyZXBseS5pZF07XG5cbiAgICBpZiAocmVwbHkuc3VjY2Vzc2Z1bCAhPT0gdW5kZWZpbmVkICYmIGVudmVsb3BlKSB7XG4gICAgICBlbnZlbG9wZS5zY2hlZHVsZXIuc3VjY2VlZCgpO1xuICAgICAgZGVsZXRlIHRoaXMuX2VudmVsb3Blc1tyZXBseS5pZF07XG4gICAgICBnbG9iYWwuY2xlYXJUaW1lb3V0KGVudmVsb3BlLnRpbWVyKTtcbiAgICB9XG5cbiAgICB0aGlzLnRyaWdnZXIoJ21lc3NhZ2UnLCByZXBseSk7XG5cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IHRoaXMuVVApIHJldHVybjtcbiAgICB0aGlzLl9zdGF0ZSA9IHRoaXMuVVA7XG4gICAgdGhpcy5fY2xpZW50LnRyaWdnZXIoJ3RyYW5zcG9ydDp1cCcpO1xuICB9LFxuXG4gIGhhbmRsZUVycm9yOiBmdW5jdGlvbihtZXNzYWdlLCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgZW52ZWxvcGUgPSB0aGlzLl9lbnZlbG9wZXNbbWVzc2FnZS5pZF0sXG4gICAgICAgIHJlcXVlc3QgID0gZW52ZWxvcGUgJiYgZW52ZWxvcGUucmVxdWVzdCxcbiAgICAgICAgc2VsZiAgICAgPSB0aGlzO1xuXG4gICAgaWYgKCFyZXF1ZXN0KSByZXR1cm47XG5cbiAgICByZXF1ZXN0LnRoZW4oZnVuY3Rpb24ocmVxKSB7XG4gICAgICBpZiAocmVxICYmIHJlcS5hYm9ydCkgcmVxLmFib3J0KCk7XG4gICAgfSk7XG5cbiAgICB2YXIgc2NoZWR1bGVyID0gZW52ZWxvcGUuc2NoZWR1bGVyO1xuICAgIHNjaGVkdWxlci5mYWlsKCk7XG5cbiAgICBnbG9iYWwuY2xlYXJUaW1lb3V0KGVudmVsb3BlLnRpbWVyKTtcbiAgICBlbnZlbG9wZS5yZXF1ZXN0ID0gZW52ZWxvcGUudGltZXIgPSBudWxsO1xuXG4gICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgdGhpcy5fc2VuZEVudmVsb3BlKGVudmVsb3BlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW52ZWxvcGUudGltZXIgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgZW52ZWxvcGUudGltZXIgPSBudWxsO1xuICAgICAgICBzZWxmLl9zZW5kRW52ZWxvcGUoZW52ZWxvcGUpO1xuICAgICAgfSwgc2NoZWR1bGVyLmdldEludGVydmFsKCkgKiAxMDAwKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IHRoaXMuRE9XTikgcmV0dXJuO1xuICAgIHRoaXMuX3N0YXRlID0gdGhpcy5ET1dOO1xuICAgIHRoaXMuX2NsaWVudC50cmlnZ2VyKCd0cmFuc3BvcnQ6ZG93bicpO1xuICB9XG59KTtcblxuRGlzcGF0Y2hlci5jcmVhdGUgPSBmdW5jdGlvbihjbGllbnQsIGVuZHBvaW50LCBvcHRpb25zKSB7XG4gIHJldHVybiBuZXcgRGlzcGF0Y2hlcihjbGllbnQsIGVuZHBvaW50LCBvcHRpb25zKTtcbn07XG5cbmV4dGVuZChEaXNwYXRjaGVyLnByb3RvdHlwZSwgUHVibGlzaGVyKTtcbmV4dGVuZChEaXNwYXRjaGVyLnByb3RvdHlwZSwgTG9nZ2luZyk7XG5cbm1vZHVsZS5leHBvcnRzID0gRGlzcGF0Y2hlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIENsYXNzICAgPSByZXF1aXJlKCcuLi91dGlsL2NsYXNzJyksXG4gICAgR3JhbW1hciA9IHJlcXVpcmUoJy4vZ3JhbW1hcicpO1xuXG52YXIgRXJyb3IgPSBDbGFzcyh7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNvZGUsIHBhcmFtcywgbWVzc2FnZSkge1xuICAgIHRoaXMuY29kZSAgICA9IGNvZGU7XG4gICAgdGhpcy5wYXJhbXMgID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocGFyYW1zKTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB9LFxuXG4gIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb2RlICsgJzonICtcbiAgICAgICAgICAgdGhpcy5wYXJhbXMuam9pbignLCcpICsgJzonICtcbiAgICAgICAgICAgdGhpcy5tZXNzYWdlO1xuICB9XG59KTtcblxuRXJyb3IucGFyc2UgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICcnO1xuICBpZiAoIUdyYW1tYXIuRVJST1IudGVzdChtZXNzYWdlKSkgcmV0dXJuIG5ldyBFcnJvcihudWxsLCBbXSwgbWVzc2FnZSk7XG5cbiAgdmFyIHBhcnRzICAgPSBtZXNzYWdlLnNwbGl0KCc6JyksXG4gICAgICBjb2RlICAgID0gcGFyc2VJbnQocGFydHNbMF0pLFxuICAgICAgcGFyYW1zICA9IHBhcnRzWzFdLnNwbGl0KCcsJyksXG4gICAgICBtZXNzYWdlID0gcGFydHNbMl07XG5cbiAgcmV0dXJuIG5ldyBFcnJvcihjb2RlLCBwYXJhbXMsIG1lc3NhZ2UpO1xufTtcblxuLy8gaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2NvbWV0ZC93aWtpL0JheWV1eENvZGVzXG52YXIgZXJyb3JzID0ge1xuICB2ZXJzaW9uTWlzbWF0Y2g6ICBbMzAwLCAnVmVyc2lvbiBtaXNtYXRjaCddLFxuICBjb25udHlwZU1pc21hdGNoOiBbMzAxLCAnQ29ubmVjdGlvbiB0eXBlcyBub3Qgc3VwcG9ydGVkJ10sXG4gIGV4dE1pc21hdGNoOiAgICAgIFszMDIsICdFeHRlbnNpb24gbWlzbWF0Y2gnXSxcbiAgYmFkUmVxdWVzdDogICAgICAgWzQwMCwgJ0JhZCByZXF1ZXN0J10sXG4gIGNsaWVudFVua25vd246ICAgIFs0MDEsICdVbmtub3duIGNsaWVudCddLFxuICBwYXJhbWV0ZXJNaXNzaW5nOiBbNDAyLCAnTWlzc2luZyByZXF1aXJlZCBwYXJhbWV0ZXInXSxcbiAgY2hhbm5lbEZvcmJpZGRlbjogWzQwMywgJ0ZvcmJpZGRlbiBjaGFubmVsJ10sXG4gIGNoYW5uZWxVbmtub3duOiAgIFs0MDQsICdVbmtub3duIGNoYW5uZWwnXSxcbiAgY2hhbm5lbEludmFsaWQ6ICAgWzQwNSwgJ0ludmFsaWQgY2hhbm5lbCddLFxuICBleHRVbmtub3duOiAgICAgICBbNDA2LCAnVW5rbm93biBleHRlbnNpb24nXSxcbiAgcHVibGlzaEZhaWxlZDogICAgWzQwNywgJ0ZhaWxlZCB0byBwdWJsaXNoJ10sXG4gIHNlcnZlckVycm9yOiAgICAgIFs1MDAsICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXVxufTtcblxuZm9yICh2YXIgbmFtZSBpbiBlcnJvcnMpXG4gIChmdW5jdGlvbihuYW1lKSB7XG4gICAgRXJyb3JbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoZXJyb3JzW25hbWVdWzBdLCBhcmd1bWVudHMsIGVycm9yc1tuYW1lXVsxXSkudG9TdHJpbmcoKTtcbiAgICB9O1xuICB9KShuYW1lKTtcblxubW9kdWxlLmV4cG9ydHMgPSBFcnJvcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV4dGVuZCAgPSByZXF1aXJlKCcuLi91dGlsL2V4dGVuZCcpLFxuICAgIExvZ2dpbmcgPSByZXF1aXJlKCcuLi9taXhpbnMvbG9nZ2luZycpO1xuXG52YXIgRXh0ZW5zaWJsZSA9IHtcbiAgYWRkRXh0ZW5zaW9uOiBmdW5jdGlvbihleHRlbnNpb24pIHtcbiAgICB0aGlzLl9leHRlbnNpb25zID0gdGhpcy5fZXh0ZW5zaW9ucyB8fCBbXTtcbiAgICB0aGlzLl9leHRlbnNpb25zLnB1c2goZXh0ZW5zaW9uKTtcbiAgICBpZiAoZXh0ZW5zaW9uLmFkZGVkKSBleHRlbnNpb24uYWRkZWQodGhpcyk7XG4gIH0sXG5cbiAgcmVtb3ZlRXh0ZW5zaW9uOiBmdW5jdGlvbihleHRlbnNpb24pIHtcbiAgICBpZiAoIXRoaXMuX2V4dGVuc2lvbnMpIHJldHVybjtcbiAgICB2YXIgaSA9IHRoaXMuX2V4dGVuc2lvbnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGlmICh0aGlzLl9leHRlbnNpb25zW2ldICE9PSBleHRlbnNpb24pIGNvbnRpbnVlO1xuICAgICAgdGhpcy5fZXh0ZW5zaW9ucy5zcGxpY2UoaSwxKTtcbiAgICAgIGlmIChleHRlbnNpb24ucmVtb3ZlZCkgZXh0ZW5zaW9uLnJlbW92ZWQodGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIHBpcGVUaHJvdWdoRXh0ZW5zaW9uczogZnVuY3Rpb24oc3RhZ2UsIG1lc3NhZ2UsIHJlcXVlc3QsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgdGhpcy5kZWJ1ZygnUGFzc2luZyB0aHJvdWdoID8gZXh0ZW5zaW9uczogPycsIHN0YWdlLCBtZXNzYWdlKTtcblxuICAgIGlmICghdGhpcy5fZXh0ZW5zaW9ucykgcmV0dXJuIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgbWVzc2FnZSk7XG4gICAgdmFyIGV4dGVuc2lvbnMgPSB0aGlzLl9leHRlbnNpb25zLnNsaWNlKCk7XG5cbiAgICB2YXIgcGlwZSA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgbWVzc2FnZSk7XG5cbiAgICAgIHZhciBleHRlbnNpb24gPSBleHRlbnNpb25zLnNoaWZ0KCk7XG4gICAgICBpZiAoIWV4dGVuc2lvbikgcmV0dXJuIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgbWVzc2FnZSk7XG5cbiAgICAgIHZhciBmbiA9IGV4dGVuc2lvbltzdGFnZV07XG4gICAgICBpZiAoIWZuKSByZXR1cm4gcGlwZShtZXNzYWdlKTtcblxuICAgICAgaWYgKGZuLmxlbmd0aCA+PSAzKSBleHRlbnNpb25bc3RhZ2VdKG1lc3NhZ2UsIHJlcXVlc3QsIHBpcGUpO1xuICAgICAgZWxzZSAgICAgICAgICAgICAgICBleHRlbnNpb25bc3RhZ2VdKG1lc3NhZ2UsIHBpcGUpO1xuICAgIH07XG4gICAgcGlwZShtZXNzYWdlKTtcbiAgfVxufTtcblxuZXh0ZW5kKEV4dGVuc2libGUsIExvZ2dpbmcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV4dGVuc2libGU7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBDSEFOTkVMX05BTUU6ICAgICAvXlxcLygoKChbYS16XXxbQS1aXSl8WzAtOV0pfChcXC18XFxffFxcIXxcXH58XFwofFxcKXxcXCR8XFxAKSkpKyhcXC8oKCgoW2Etel18W0EtWl0pfFswLTldKXwoXFwtfFxcX3xcXCF8XFx+fFxcKHxcXCl8XFwkfFxcQCkpKSspKiQvLFxuICBDSEFOTkVMX1BBVFRFUk46ICAvXihcXC8oKCgoW2Etel18W0EtWl0pfFswLTldKXwoXFwtfFxcX3xcXCF8XFx+fFxcKHxcXCl8XFwkfFxcQCkpKSspKlxcL1xcKnsxLDJ9JC8sXG4gIEVSUk9SOiAgICAgICAgICAgIC9eKFswLTldWzAtOV1bMC05XTooKCgoW2Etel18W0EtWl0pfFswLTldKXwoXFwtfFxcX3xcXCF8XFx+fFxcKHxcXCl8XFwkfFxcQCl8IHxcXC98XFwqfFxcLikpKigsKCgoKFthLXpdfFtBLVpdKXxbMC05XSl8KFxcLXxcXF98XFwhfFxcfnxcXCh8XFwpfFxcJHxcXEApfCB8XFwvfFxcKnxcXC4pKSopKjooKCgoW2Etel18W0EtWl0pfFswLTldKXwoXFwtfFxcX3xcXCF8XFx+fFxcKHxcXCl8XFwkfFxcQCl8IHxcXC98XFwqfFxcLikpKnxbMC05XVswLTldWzAtOV06OigoKChbYS16XXxbQS1aXSl8WzAtOV0pfChcXC18XFxffFxcIXxcXH58XFwofFxcKXxcXCR8XFxAKXwgfFxcL3xcXCp8XFwuKSkqKSQvLFxuICBWRVJTSU9OOiAgICAgICAgICAvXihbMC05XSkrKFxcLigoW2Etel18W0EtWl0pfFswLTldKSgoKChbYS16XXxbQS1aXSl8WzAtOV0pfFxcLXxcXF8pKSopKiQvXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2xhc3MgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvY2xhc3MnKSxcbiAgICBEZWZlcnJhYmxlID0gcmVxdWlyZSgnLi4vbWl4aW5zL2RlZmVycmFibGUnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBDbGFzcyhEZWZlcnJhYmxlKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV4dGVuZCA9IHJlcXVpcmUoJy4uL3V0aWwvZXh0ZW5kJyk7XG5cbnZhciBTY2hlZHVsZXIgPSBmdW5jdGlvbihtZXNzYWdlLCBvcHRpb25zKSB7XG4gIHRoaXMubWVzc2FnZSAgPSBtZXNzYWdlO1xuICB0aGlzLm9wdGlvbnMgID0gb3B0aW9ucztcbiAgdGhpcy5hdHRlbXB0cyA9IDA7XG59O1xuXG5leHRlbmQoU2NoZWR1bGVyLnByb3RvdHlwZSwge1xuICBnZXRUaW1lb3V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRpbWVvdXQ7XG4gIH0sXG5cbiAgZ2V0SW50ZXJ2YWw6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaW50ZXJ2YWw7XG4gIH0sXG5cbiAgaXNEZWxpdmVyYWJsZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGF0dGVtcHRzID0gdGhpcy5vcHRpb25zLmF0dGVtcHRzLFxuICAgICAgICBtYWRlICAgICA9IHRoaXMuYXR0ZW1wdHMsXG4gICAgICAgIGRlYWRsaW5lID0gdGhpcy5vcHRpb25zLmRlYWRsaW5lLFxuICAgICAgICBub3cgICAgICA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgaWYgKGF0dGVtcHRzICE9PSB1bmRlZmluZWQgJiYgbWFkZSA+PSBhdHRlbXB0cylcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChkZWFkbGluZSAhPT0gdW5kZWZpbmVkICYmIG5vdyA+IGRlYWRsaW5lKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgc2VuZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5hdHRlbXB0cyArPSAxO1xuICB9LFxuXG4gIHN1Y2NlZWQ6IGZ1bmN0aW9uKCkge30sXG5cbiAgZmFpbDogZnVuY3Rpb24oKSB7fSxcblxuICBhYm9ydDogZnVuY3Rpb24oKSB7fVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU2NoZWR1bGVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2xhc3MgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvY2xhc3MnKSxcbiAgICBleHRlbmQgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9leHRlbmQnKSxcbiAgICBEZWZlcnJhYmxlID0gcmVxdWlyZSgnLi4vbWl4aW5zL2RlZmVycmFibGUnKTtcblxudmFyIFN1YnNjcmlwdGlvbiA9IENsYXNzKHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oY2xpZW50LCBjaGFubmVscywgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB0aGlzLl9jbGllbnQgICAgPSBjbGllbnQ7XG4gICAgdGhpcy5fY2hhbm5lbHMgID0gY2hhbm5lbHM7XG4gICAgdGhpcy5fY2FsbGJhY2sgID0gY2FsbGJhY2s7XG4gICAgdGhpcy5fY29udGV4dCAgID0gY29udGV4dDtcbiAgICB0aGlzLl9jYW5jZWxsZWQgPSBmYWxzZTtcbiAgfSxcblxuICB3aXRoQ2hhbm5lbDogZnVuY3Rpb24oY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB0aGlzLl93aXRoQ2hhbm5lbCA9IFtjYWxsYmFjaywgY29udGV4dF07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG5cbiAgYXBwbHk6IGZ1bmN0aW9uKGNvbnRleHQsIGFyZ3MpIHtcbiAgICB2YXIgbWVzc2FnZSA9IGFyZ3NbMF07XG5cbiAgICBpZiAodGhpcy5fY2FsbGJhY2spXG4gICAgICB0aGlzLl9jYWxsYmFjay5jYWxsKHRoaXMuX2NvbnRleHQsIG1lc3NhZ2UuZGF0YSk7XG5cbiAgICBpZiAodGhpcy5fd2l0aENoYW5uZWwpXG4gICAgICB0aGlzLl93aXRoQ2hhbm5lbFswXS5jYWxsKHRoaXMuX3dpdGhDaGFubmVsWzFdLCBtZXNzYWdlLmNoYW5uZWwsIG1lc3NhZ2UuZGF0YSk7XG4gIH0sXG5cbiAgY2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fY2FuY2VsbGVkKSByZXR1cm47XG4gICAgdGhpcy5fY2xpZW50LnVuc3Vic2NyaWJlKHRoaXMuX2NoYW5uZWxzLCB0aGlzKTtcbiAgICB0aGlzLl9jYW5jZWxsZWQgPSB0cnVlO1xuICB9LFxuXG4gIHVuc3Vic2NyaWJlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNhbmNlbCgpO1xuICB9XG59KTtcblxuZXh0ZW5kKFN1YnNjcmlwdGlvbi5wcm90b3R5cGUsIERlZmVycmFibGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN1YnNjcmlwdGlvbjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0Jyk7XG5cblRyYW5zcG9ydC5yZWdpc3Rlcignd2Vic29ja2V0JywgcmVxdWlyZSgnLi93ZWJfc29ja2V0JykpO1xuVHJhbnNwb3J0LnJlZ2lzdGVyKCdldmVudHNvdXJjZScsIHJlcXVpcmUoJy4vZXZlbnRfc291cmNlJykpO1xuVHJhbnNwb3J0LnJlZ2lzdGVyKCdsb25nLXBvbGxpbmcnLCByZXF1aXJlKCcuL3hocicpKTtcblRyYW5zcG9ydC5yZWdpc3RlcignY3Jvc3Mtb3JpZ2luLWxvbmctcG9sbGluZycsIHJlcXVpcmUoJy4vY29ycycpKTtcblRyYW5zcG9ydC5yZWdpc3RlcignY2FsbGJhY2stcG9sbGluZycsIHJlcXVpcmUoJy4vanNvbnAnKSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNwb3J0O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2xhc3MgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9jbGFzcycpLFxuICAgIFNldCAgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvc2V0JyksXG4gICAgVVJJICAgICAgID0gcmVxdWlyZSgnLi4vdXRpbC91cmknKSxcbiAgICBleHRlbmQgICAgPSByZXF1aXJlKCcuLi91dGlsL2V4dGVuZCcpLFxuICAgIHRvSlNPTiAgICA9IHJlcXVpcmUoJy4uL3V0aWwvdG9fanNvbicpLFxuICAgIFRyYW5zcG9ydCA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0Jyk7XG5cbnZhciBDT1JTID0gZXh0ZW5kKENsYXNzKFRyYW5zcG9ydCwge1xuICBlbmNvZGU6IGZ1bmN0aW9uKG1lc3NhZ2VzKSB7XG4gICAgcmV0dXJuICdtZXNzYWdlPScgKyBlbmNvZGVVUklDb21wb25lbnQodG9KU09OKG1lc3NhZ2VzKSk7XG4gIH0sXG5cbiAgcmVxdWVzdDogZnVuY3Rpb24obWVzc2FnZXMpIHtcbiAgICB2YXIgeGhyQ2xhc3MgPSBnbG9iYWwuWERvbWFpblJlcXVlc3QgPyBYRG9tYWluUmVxdWVzdCA6IFhNTEh0dHBSZXF1ZXN0LFxuICAgICAgICB4aHIgICAgICA9IG5ldyB4aHJDbGFzcygpLFxuICAgICAgICBpZCAgICAgICA9ICsrQ09SUy5faWQsXG4gICAgICAgIGhlYWRlcnMgID0gdGhpcy5fZGlzcGF0Y2hlci5oZWFkZXJzLFxuICAgICAgICBzZWxmICAgICA9IHRoaXMsXG4gICAgICAgIGtleTtcblxuICAgIHhoci5vcGVuKCdQT1NUJywgVVJJLnN0cmluZ2lmeSh0aGlzLmVuZHBvaW50KSwgdHJ1ZSk7XG5cbiAgICBpZiAoeGhyLnNldFJlcXVlc3RIZWFkZXIpIHtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdQcmFnbWEnLCAnbm8tY2FjaGUnKTtcbiAgICAgIGZvciAoa2V5IGluIGhlYWRlcnMpIHtcbiAgICAgICAgaWYgKCFoZWFkZXJzLmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIGhlYWRlcnNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNsZWFuVXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgheGhyKSByZXR1cm4gZmFsc2U7XG4gICAgICBDT1JTLl9wZW5kaW5nLnJlbW92ZShpZCk7XG4gICAgICB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSB4aHIub250aW1lb3V0ID0geGhyLm9ucHJvZ3Jlc3MgPSBudWxsO1xuICAgICAgeGhyID0gbnVsbDtcbiAgICB9O1xuXG4gICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlcGxpZXM7XG4gICAgICB0cnkgeyByZXBsaWVzID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSB9IGNhdGNoIChlcnJvcikge31cblxuICAgICAgY2xlYW5VcCgpO1xuXG4gICAgICBpZiAocmVwbGllcylcbiAgICAgICAgc2VsZi5fcmVjZWl2ZShyZXBsaWVzKTtcbiAgICAgIGVsc2VcbiAgICAgICAgc2VsZi5faGFuZGxlRXJyb3IobWVzc2FnZXMpO1xuICAgIH07XG5cbiAgICB4aHIub25lcnJvciA9IHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNsZWFuVXAoKTtcbiAgICAgIHNlbGYuX2hhbmRsZUVycm9yKG1lc3NhZ2VzKTtcbiAgICB9O1xuXG4gICAgeGhyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgaWYgKHhockNsYXNzID09PSBnbG9iYWwuWERvbWFpblJlcXVlc3QpXG4gICAgICBDT1JTLl9wZW5kaW5nLmFkZCh7aWQ6IGlkLCB4aHI6IHhocn0pO1xuXG4gICAgeGhyLnNlbmQodGhpcy5lbmNvZGUobWVzc2FnZXMpKTtcbiAgICByZXR1cm4geGhyO1xuICB9XG59KSwge1xuICBfaWQ6ICAgICAgMCxcbiAgX3BlbmRpbmc6IG5ldyBTZXQoKSxcblxuICBpc1VzYWJsZTogZnVuY3Rpb24oZGlzcGF0Y2hlciwgZW5kcG9pbnQsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgaWYgKFVSSS5pc1NhbWVPcmlnaW4oZW5kcG9pbnQpKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgZmFsc2UpO1xuXG4gICAgaWYgKGdsb2JhbC5YRG9tYWluUmVxdWVzdClcbiAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKGNvbnRleHQsIGVuZHBvaW50LnByb3RvY29sID09PSBsb2NhdGlvbi5wcm90b2NvbCk7XG5cbiAgICBpZiAoZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICByZXR1cm4gY2FsbGJhY2suY2FsbChjb250ZXh0LCB4aHIud2l0aENyZWRlbnRpYWxzICE9PSB1bmRlZmluZWQpO1xuICAgIH1cbiAgICByZXR1cm4gY2FsbGJhY2suY2FsbChjb250ZXh0LCBmYWxzZSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENPUlM7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBDbGFzcyAgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9jbGFzcycpLFxuICAgIFVSSSAgICAgICAgPSByZXF1aXJlKCcuLi91dGlsL3VyaScpLFxuICAgIGNvcHlPYmplY3QgPSByZXF1aXJlKCcuLi91dGlsL2NvcHlfb2JqZWN0JyksXG4gICAgZXh0ZW5kICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvZXh0ZW5kJyksXG4gICAgRGVmZXJyYWJsZSA9IHJlcXVpcmUoJy4uL21peGlucy9kZWZlcnJhYmxlJyksXG4gICAgVHJhbnNwb3J0ICA9IHJlcXVpcmUoJy4vdHJhbnNwb3J0JyksXG4gICAgWEhSICAgICAgICA9IHJlcXVpcmUoJy4veGhyJyk7XG5cbnZhciBFdmVudFNvdXJjZSA9IGV4dGVuZChDbGFzcyhUcmFuc3BvcnQsIHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oZGlzcGF0Y2hlciwgZW5kcG9pbnQpIHtcbiAgICBUcmFuc3BvcnQucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCh0aGlzLCBkaXNwYXRjaGVyLCBlbmRwb2ludCk7XG4gICAgaWYgKCFnbG9iYWwuRXZlbnRTb3VyY2UpIHJldHVybiB0aGlzLnNldERlZmVycmVkU3RhdHVzKCdmYWlsZWQnKTtcblxuICAgIHRoaXMuX3hociA9IG5ldyBYSFIoZGlzcGF0Y2hlciwgZW5kcG9pbnQpO1xuXG4gICAgZW5kcG9pbnQgPSBjb3B5T2JqZWN0KGVuZHBvaW50KTtcbiAgICBlbmRwb2ludC5wYXRobmFtZSArPSAnLycgKyBkaXNwYXRjaGVyLmNsaWVudElkO1xuXG4gICAgdmFyIHNvY2tldCA9IG5ldyBnbG9iYWwuRXZlbnRTb3VyY2UoVVJJLnN0cmluZ2lmeShlbmRwb2ludCkpLFxuICAgICAgICBzZWxmICAgPSB0aGlzO1xuXG4gICAgc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5fZXZlckNvbm5lY3RlZCA9IHRydWU7XG4gICAgICBzZWxmLnNldERlZmVycmVkU3RhdHVzKCdzdWNjZWVkZWQnKTtcbiAgICB9O1xuXG4gICAgc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChzZWxmLl9ldmVyQ29ubmVjdGVkKSB7XG4gICAgICAgIHNlbGYuX2hhbmRsZUVycm9yKFtdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuc2V0RGVmZXJyZWRTdGF0dXMoJ2ZhaWxlZCcpO1xuICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgcmVwbGllcztcbiAgICAgIHRyeSB7IHJlcGxpZXMgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpIH0gY2F0Y2ggKGVycm9yKSB7fVxuXG4gICAgICBpZiAocmVwbGllcylcbiAgICAgICAgc2VsZi5fcmVjZWl2ZShyZXBsaWVzKTtcbiAgICAgIGVsc2VcbiAgICAgICAgc2VsZi5faGFuZGxlRXJyb3IoW10pO1xuICAgIH07XG5cbiAgICB0aGlzLl9zb2NrZXQgPSBzb2NrZXQ7XG4gIH0sXG5cbiAgY2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5fc29ja2V0KSByZXR1cm47XG4gICAgdGhpcy5fc29ja2V0Lm9ub3BlbiA9IHRoaXMuX3NvY2tldC5vbmVycm9yID0gdGhpcy5fc29ja2V0Lm9ubWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5fc29ja2V0LmNsb3NlKCk7XG4gICAgZGVsZXRlIHRoaXMuX3NvY2tldDtcbiAgfSxcblxuICBpc1VzYWJsZTogZnVuY3Rpb24oY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB0aGlzLmNhbGxiYWNrKGZ1bmN0aW9uKCkgeyBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHRydWUpIH0pO1xuICAgIHRoaXMuZXJyYmFjayhmdW5jdGlvbigpIHsgY2FsbGJhY2suY2FsbChjb250ZXh0LCBmYWxzZSkgfSk7XG4gIH0sXG5cbiAgZW5jb2RlOiBmdW5jdGlvbihtZXNzYWdlcykge1xuICAgIHJldHVybiB0aGlzLl94aHIuZW5jb2RlKG1lc3NhZ2VzKTtcbiAgfSxcblxuICByZXF1ZXN0OiBmdW5jdGlvbihtZXNzYWdlcykge1xuICAgIHJldHVybiB0aGlzLl94aHIucmVxdWVzdChtZXNzYWdlcyk7XG4gIH1cblxufSksIHtcbiAgaXNVc2FibGU6IGZ1bmN0aW9uKGRpc3BhdGNoZXIsIGVuZHBvaW50LCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHZhciBpZCA9IGRpc3BhdGNoZXIuY2xpZW50SWQ7XG4gICAgaWYgKCFpZCkgcmV0dXJuIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgZmFsc2UpO1xuXG4gICAgWEhSLmlzVXNhYmxlKGRpc3BhdGNoZXIsIGVuZHBvaW50LCBmdW5jdGlvbih1c2FibGUpIHtcbiAgICAgIGlmICghdXNhYmxlKSByZXR1cm4gY2FsbGJhY2suY2FsbChjb250ZXh0LCBmYWxzZSk7XG4gICAgICB0aGlzLmNyZWF0ZShkaXNwYXRjaGVyLCBlbmRwb2ludCkuaXNVc2FibGUoY2FsbGJhY2ssIGNvbnRleHQpO1xuICAgIH0sIHRoaXMpO1xuICB9LFxuXG4gIGNyZWF0ZTogZnVuY3Rpb24oZGlzcGF0Y2hlciwgZW5kcG9pbnQpIHtcbiAgICB2YXIgc29ja2V0cyA9IGRpc3BhdGNoZXIudHJhbnNwb3J0cy5ldmVudHNvdXJjZSA9IGRpc3BhdGNoZXIudHJhbnNwb3J0cy5ldmVudHNvdXJjZSB8fCB7fSxcbiAgICAgICAgaWQgICAgICA9IGRpc3BhdGNoZXIuY2xpZW50SWQ7XG5cbiAgICB2YXIgdXJsID0gY29weU9iamVjdChlbmRwb2ludCk7XG4gICAgdXJsLnBhdGhuYW1lICs9ICcvJyArIChpZCB8fCAnJyk7XG4gICAgdXJsID0gVVJJLnN0cmluZ2lmeSh1cmwpO1xuXG4gICAgc29ja2V0c1t1cmxdID0gc29ja2V0c1t1cmxdIHx8IG5ldyB0aGlzKGRpc3BhdGNoZXIsIGVuZHBvaW50KTtcbiAgICByZXR1cm4gc29ja2V0c1t1cmxdO1xuICB9XG59KTtcblxuZXh0ZW5kKEV2ZW50U291cmNlLnByb3RvdHlwZSwgRGVmZXJyYWJsZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRTb3VyY2U7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBDbGFzcyAgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9jbGFzcycpLFxuICAgIFVSSSAgICAgICAgPSByZXF1aXJlKCcuLi91dGlsL3VyaScpLFxuICAgIGNvcHlPYmplY3QgPSByZXF1aXJlKCcuLi91dGlsL2NvcHlfb2JqZWN0JyksXG4gICAgZXh0ZW5kICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvZXh0ZW5kJyksXG4gICAgdG9KU09OICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvdG9fanNvbicpLFxuICAgIFRyYW5zcG9ydCAgPSByZXF1aXJlKCcuL3RyYW5zcG9ydCcpO1xuXG52YXIgSlNPTlAgPSBleHRlbmQoQ2xhc3MoVHJhbnNwb3J0LCB7XG4gZW5jb2RlOiBmdW5jdGlvbihtZXNzYWdlcykge1xuICAgIHZhciB1cmwgPSBjb3B5T2JqZWN0KHRoaXMuZW5kcG9pbnQpO1xuICAgIHVybC5xdWVyeS5tZXNzYWdlID0gdG9KU09OKG1lc3NhZ2VzKTtcbiAgICB1cmwucXVlcnkuanNvbnAgICA9ICdfX2pzb25wJyArIEpTT05QLl9jYkNvdW50ICsgJ19fJztcbiAgICByZXR1cm4gVVJJLnN0cmluZ2lmeSh1cmwpO1xuICB9LFxuXG4gIHJlcXVlc3Q6IGZ1bmN0aW9uKG1lc3NhZ2VzKSB7XG4gICAgdmFyIGhlYWQgICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0sXG4gICAgICAgIHNjcmlwdCAgICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpLFxuICAgICAgICBjYWxsYmFja05hbWUgPSBKU09OUC5nZXRDYWxsYmFja05hbWUoKSxcbiAgICAgICAgZW5kcG9pbnQgICAgID0gY29weU9iamVjdCh0aGlzLmVuZHBvaW50KSxcbiAgICAgICAgc2VsZiAgICAgICAgID0gdGhpcztcblxuICAgIGVuZHBvaW50LnF1ZXJ5Lm1lc3NhZ2UgPSB0b0pTT04obWVzc2FnZXMpO1xuICAgIGVuZHBvaW50LnF1ZXJ5Lmpzb25wICAgPSBjYWxsYmFja05hbWU7XG5cbiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFnbG9iYWxbY2FsbGJhY2tOYW1lXSkgcmV0dXJuIGZhbHNlO1xuICAgICAgZ2xvYmFsW2NhbGxiYWNrTmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICB0cnkgeyBkZWxldGUgZ2xvYmFsW2NhbGxiYWNrTmFtZV0gfSBjYXRjaCAoZXJyb3IpIHt9XG4gICAgICBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgIH07XG5cbiAgICBnbG9iYWxbY2FsbGJhY2tOYW1lXSA9IGZ1bmN0aW9uKHJlcGxpZXMpIHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICAgIHNlbGYuX3JlY2VpdmUocmVwbGllcyk7XG4gICAgfTtcblxuICAgIHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgc2NyaXB0LnNyYyAgPSBVUkkuc3RyaW5naWZ5KGVuZHBvaW50KTtcbiAgICBoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cbiAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYW51cCgpO1xuICAgICAgc2VsZi5faGFuZGxlRXJyb3IobWVzc2FnZXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge2Fib3J0OiBjbGVhbnVwfTtcbiAgfVxufSksIHtcbiAgX2NiQ291bnQ6IDAsXG5cbiAgZ2V0Q2FsbGJhY2tOYW1lOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9jYkNvdW50ICs9IDE7XG4gICAgcmV0dXJuICdfX2pzb25wJyArIHRoaXMuX2NiQ291bnQgKyAnX18nO1xuICB9LFxuXG4gIGlzVXNhYmxlOiBmdW5jdGlvbihkaXNwYXRjaGVyLCBlbmRwb2ludCwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHRydWUpO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBKU09OUDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIENsYXNzICAgID0gcmVxdWlyZSgnLi4vdXRpbC9jbGFzcycpLFxuICAgIENvb2tpZSAgID0gcmVxdWlyZSgnLi4vdXRpbC9jb29raWVzJykuQ29va2llLFxuICAgIFByb21pc2UgID0gcmVxdWlyZSgnLi4vdXRpbC9wcm9taXNlJyksXG4gICAgVVJJICAgICAgPSByZXF1aXJlKCcuLi91dGlsL3VyaScpLFxuICAgIGFycmF5ICAgID0gcmVxdWlyZSgnLi4vdXRpbC9hcnJheScpLFxuICAgIGV4dGVuZCAgID0gcmVxdWlyZSgnLi4vdXRpbC9leHRlbmQnKSxcbiAgICBMb2dnaW5nICA9IHJlcXVpcmUoJy4uL21peGlucy9sb2dnaW5nJyksXG4gICAgVGltZW91dHMgPSByZXF1aXJlKCcuLi9taXhpbnMvdGltZW91dHMnKSxcbiAgICBDaGFubmVsICA9IHJlcXVpcmUoJy4uL3Byb3RvY29sL2NoYW5uZWwnKTtcblxudmFyIFRyYW5zcG9ydCA9IGV4dGVuZChDbGFzcyh7IGNsYXNzTmFtZTogJ1RyYW5zcG9ydCcsXG4gIERFRkFVTFRfUE9SVFM6IHsnaHR0cDonOiA4MCwgJ2h0dHBzOic6IDQ0MywgJ3dzOic6IDgwLCAnd3NzOic6IDQ0M30sXG4gIE1BWF9ERUxBWTogICAgIDAsXG5cbiAgYmF0Y2hpbmc6ICB0cnVlLFxuXG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uKGRpc3BhdGNoZXIsIGVuZHBvaW50KSB7XG4gICAgdGhpcy5fZGlzcGF0Y2hlciA9IGRpc3BhdGNoZXI7XG4gICAgdGhpcy5lbmRwb2ludCAgICA9IGVuZHBvaW50O1xuICAgIHRoaXMuX291dGJveCAgICAgPSBbXTtcbiAgICB0aGlzLl9wcm94eSAgICAgID0gZXh0ZW5kKHt9LCB0aGlzLl9kaXNwYXRjaGVyLnByb3h5KTtcblxuICAgIGlmICghdGhpcy5fcHJveHkub3JpZ2luKVxuICAgICAgdGhpcy5fcHJveHkub3JpZ2luID0gdGhpcy5fZmluZFByb3h5KCk7XG4gIH0sXG5cbiAgY2xvc2U6IGZ1bmN0aW9uKCkge30sXG5cbiAgZW5jb2RlOiBmdW5jdGlvbihtZXNzYWdlcykge1xuICAgIHJldHVybiAnJztcbiAgfSxcblxuICBzZW5kTWVzc2FnZTogZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIHRoaXMuZGVidWcoJ0NsaWVudCA/IHNlbmRpbmcgbWVzc2FnZSB0byA/OiA/JyxcbiAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoZXIuY2xpZW50SWQsIFVSSS5zdHJpbmdpZnkodGhpcy5lbmRwb2ludCksIG1lc3NhZ2UpO1xuXG4gICAgaWYgKCF0aGlzLmJhdGNoaW5nKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMucmVxdWVzdChbbWVzc2FnZV0pKTtcblxuICAgIHRoaXMuX291dGJveC5wdXNoKG1lc3NhZ2UpO1xuICAgIHRoaXMuX2ZsdXNoTGFyZ2VCYXRjaCgpO1xuXG4gICAgaWYgKG1lc3NhZ2UuY2hhbm5lbCA9PT0gQ2hhbm5lbC5IQU5EU0hBS0UpXG4gICAgICByZXR1cm4gdGhpcy5fcHVibGlzaCgwLjAxKTtcblxuICAgIGlmIChtZXNzYWdlLmNoYW5uZWwgPT09IENoYW5uZWwuQ09OTkVDVClcbiAgICAgIHRoaXMuX2Nvbm5lY3RNZXNzYWdlID0gbWVzc2FnZTtcblxuICAgIHJldHVybiB0aGlzLl9wdWJsaXNoKHRoaXMuTUFYX0RFTEFZKTtcbiAgfSxcblxuICBfbWFrZVByb21pc2U6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHRoaXMuX3JlcXVlc3RQcm9taXNlID0gdGhpcy5fcmVxdWVzdFByb21pc2UgfHwgbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgc2VsZi5fcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9LFxuXG4gIF9wdWJsaXNoOiBmdW5jdGlvbihkZWxheSkge1xuICAgIHRoaXMuX21ha2VQcm9taXNlKCk7XG5cbiAgICB0aGlzLmFkZFRpbWVvdXQoJ3B1Ymxpc2gnLCBkZWxheSwgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLl9mbHVzaCgpO1xuICAgICAgZGVsZXRlIHRoaXMuX3JlcXVlc3RQcm9taXNlO1xuICAgIH0sIHRoaXMpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3RQcm9taXNlO1xuICB9LFxuXG4gIF9mbHVzaDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5yZW1vdmVUaW1lb3V0KCdwdWJsaXNoJyk7XG5cbiAgICBpZiAodGhpcy5fb3V0Ym94Lmxlbmd0aCA+IDEgJiYgdGhpcy5fY29ubmVjdE1lc3NhZ2UpXG4gICAgICB0aGlzLl9jb25uZWN0TWVzc2FnZS5hZHZpY2UgPSB7dGltZW91dDogMH07XG5cbiAgICB0aGlzLl9yZXNvbHZlUHJvbWlzZSh0aGlzLnJlcXVlc3QodGhpcy5fb3V0Ym94KSk7XG5cbiAgICB0aGlzLl9jb25uZWN0TWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5fb3V0Ym94ID0gW107XG4gIH0sXG5cbiAgX2ZsdXNoTGFyZ2VCYXRjaDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmluZyA9IHRoaXMuZW5jb2RlKHRoaXMuX291dGJveCk7XG4gICAgaWYgKHN0cmluZy5sZW5ndGggPCB0aGlzLl9kaXNwYXRjaGVyLm1heFJlcXVlc3RTaXplKSByZXR1cm47XG4gICAgdmFyIGxhc3QgPSB0aGlzLl9vdXRib3gucG9wKCk7XG5cbiAgICB0aGlzLl9tYWtlUHJvbWlzZSgpO1xuICAgIHRoaXMuX2ZsdXNoKCk7XG5cbiAgICBpZiAobGFzdCkgdGhpcy5fb3V0Ym94LnB1c2gobGFzdCk7XG4gIH0sXG5cbiAgX3JlY2VpdmU6IGZ1bmN0aW9uKHJlcGxpZXMpIHtcbiAgICBpZiAoIXJlcGxpZXMpIHJldHVybjtcbiAgICByZXBsaWVzID0gW10uY29uY2F0KHJlcGxpZXMpO1xuXG4gICAgdGhpcy5kZWJ1ZygnQ2xpZW50ID8gcmVjZWl2ZWQgZnJvbSA/IHZpYSA/OiA/JyxcbiAgICAgICAgICAgICAgIHRoaXMuX2Rpc3BhdGNoZXIuY2xpZW50SWQsIFVSSS5zdHJpbmdpZnkodGhpcy5lbmRwb2ludCksIHRoaXMuY29ubmVjdGlvblR5cGUsIHJlcGxpZXMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSByZXBsaWVzLmxlbmd0aDsgaSA8IG47IGkrKylcbiAgICAgIHRoaXMuX2Rpc3BhdGNoZXIuaGFuZGxlUmVzcG9uc2UocmVwbGllc1tpXSk7XG4gIH0sXG5cbiAgX2hhbmRsZUVycm9yOiBmdW5jdGlvbihtZXNzYWdlcywgaW1tZWRpYXRlKSB7XG4gICAgbWVzc2FnZXMgPSBbXS5jb25jYXQobWVzc2FnZXMpO1xuXG4gICAgdGhpcy5kZWJ1ZygnQ2xpZW50ID8gZmFpbGVkIHRvIHNlbmQgdG8gPyB2aWEgPzogPycsXG4gICAgICAgICAgICAgICB0aGlzLl9kaXNwYXRjaGVyLmNsaWVudElkLCBVUkkuc3RyaW5naWZ5KHRoaXMuZW5kcG9pbnQpLCB0aGlzLmNvbm5lY3Rpb25UeXBlLCBtZXNzYWdlcyk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IG1lc3NhZ2VzLmxlbmd0aDsgaSA8IG47IGkrKylcbiAgICAgIHRoaXMuX2Rpc3BhdGNoZXIuaGFuZGxlRXJyb3IobWVzc2FnZXNbaV0pO1xuICB9LFxuXG4gIF9nZXRDb29raWVzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgY29va2llcyA9IHRoaXMuX2Rpc3BhdGNoZXIuY29va2llcyxcbiAgICAgICAgdXJsICAgICA9IFVSSS5zdHJpbmdpZnkodGhpcy5lbmRwb2ludCk7XG5cbiAgICBpZiAoIWNvb2tpZXMpIHJldHVybiAnJztcblxuICAgIHJldHVybiBhcnJheS5tYXAoY29va2llcy5nZXRDb29raWVzU3luYyh1cmwpLCBmdW5jdGlvbihjb29raWUpIHtcbiAgICAgIHJldHVybiBjb29raWUuY29va2llU3RyaW5nKCk7XG4gICAgfSkuam9pbignOyAnKTtcbiAgfSxcblxuICBfc3RvcmVDb29raWVzOiBmdW5jdGlvbihzZXRDb29raWUpIHtcbiAgICB2YXIgY29va2llcyA9IHRoaXMuX2Rpc3BhdGNoZXIuY29va2llcyxcbiAgICAgICAgdXJsICAgICA9IFVSSS5zdHJpbmdpZnkodGhpcy5lbmRwb2ludCksXG4gICAgICAgIGNvb2tpZTtcblxuICAgIGlmICghc2V0Q29va2llIHx8ICFjb29raWVzKSByZXR1cm47XG4gICAgc2V0Q29va2llID0gW10uY29uY2F0KHNldENvb2tpZSk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IHNldENvb2tpZS5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIGNvb2tpZSA9IENvb2tpZS5wYXJzZShzZXRDb29raWVbaV0pO1xuICAgICAgY29va2llcy5zZXRDb29raWVTeW5jKGNvb2tpZSwgdXJsKTtcbiAgICB9XG4gIH0sXG5cbiAgX2ZpbmRQcm94eTogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIHZhciBwcm90b2NvbCA9IHRoaXMuZW5kcG9pbnQucHJvdG9jb2w7XG4gICAgaWYgKCFwcm90b2NvbCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIHZhciBuYW1lICAgPSBwcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKS50b0xvd2VyQ2FzZSgpICsgJ19wcm94eScsXG4gICAgICAgIHVwY2FzZSA9IG5hbWUudG9VcHBlckNhc2UoKSxcbiAgICAgICAgZW52ICAgID0gcHJvY2Vzcy5lbnYsXG4gICAgICAgIGtleXMsIHByb3h5O1xuXG4gICAgaWYgKG5hbWUgPT09ICdodHRwX3Byb3h5JyAmJiBlbnYuUkVRVUVTVF9NRVRIT0QpIHtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyhlbnYpLmZpbHRlcihmdW5jdGlvbihrKSB7IHJldHVybiAvXmh0dHBfcHJveHkkL2kudGVzdChrKSB9KTtcbiAgICAgIGlmIChrZXlzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpZiAoa2V5c1swXSA9PT0gbmFtZSAmJiBlbnZbdXBjYXNlXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgIHByb3h5ID0gZW52W25hbWVdO1xuICAgICAgfSBlbHNlIGlmIChrZXlzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcHJveHkgPSBlbnZbbmFtZV07XG4gICAgICB9XG4gICAgICBwcm94eSA9IHByb3h5IHx8IGVudlsnQ0dJXycgKyB1cGNhc2VdO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm94eSA9IGVudltuYW1lXSB8fCBlbnZbdXBjYXNlXTtcbiAgICAgIGlmIChwcm94eSAmJiAhZW52W25hbWVdKVxuICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSAnICsgdXBjYXNlICtcbiAgICAgICAgICAgICAgICAgICAgICcgaXMgZGlzY291cmFnZWQuIFVzZSAnICsgbmFtZSArICcuJyk7XG4gICAgfVxuICAgIHJldHVybiBwcm94eTtcbiAgfVxuXG59KSwge1xuICBnZXQ6IGZ1bmN0aW9uKGRpc3BhdGNoZXIsIGFsbG93ZWQsIGRpc2FibGVkLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHZhciBlbmRwb2ludCA9IGRpc3BhdGNoZXIuZW5kcG9pbnQ7XG5cbiAgICBhcnJheS5hc3luY0VhY2godGhpcy5fdHJhbnNwb3J0cywgZnVuY3Rpb24ocGFpciwgcmVzdW1lKSB7XG4gICAgICB2YXIgY29ublR5cGUgICAgID0gcGFpclswXSwga2xhc3MgPSBwYWlyWzFdLFxuICAgICAgICAgIGNvbm5FbmRwb2ludCA9IGRpc3BhdGNoZXIuZW5kcG9pbnRGb3IoY29ublR5cGUpO1xuXG4gICAgICBpZiAoYXJyYXkuaW5kZXhPZihkaXNhYmxlZCwgY29ublR5cGUpID49IDApXG4gICAgICAgIHJldHVybiByZXN1bWUoKTtcblxuICAgICAgaWYgKGFycmF5LmluZGV4T2YoYWxsb3dlZCwgY29ublR5cGUpIDwgMCkge1xuICAgICAgICBrbGFzcy5pc1VzYWJsZShkaXNwYXRjaGVyLCBjb25uRW5kcG9pbnQsIGZ1bmN0aW9uKCkge30pO1xuICAgICAgICByZXR1cm4gcmVzdW1lKCk7XG4gICAgICB9XG5cbiAgICAgIGtsYXNzLmlzVXNhYmxlKGRpc3BhdGNoZXIsIGNvbm5FbmRwb2ludCwgZnVuY3Rpb24oaXNVc2FibGUpIHtcbiAgICAgICAgaWYgKCFpc1VzYWJsZSkgcmV0dXJuIHJlc3VtZSgpO1xuICAgICAgICB2YXIgdHJhbnNwb3J0ID0ga2xhc3MuaGFzT3duUHJvcGVydHkoJ2NyZWF0ZScpID8ga2xhc3MuY3JlYXRlKGRpc3BhdGNoZXIsIGNvbm5FbmRwb2ludCkgOiBuZXcga2xhc3MoZGlzcGF0Y2hlciwgY29ubkVuZHBvaW50KTtcbiAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCB0cmFuc3BvcnQpO1xuICAgICAgfSk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGEgdXNhYmxlIGNvbm5lY3Rpb24gdHlwZSBmb3IgJyArIFVSSS5zdHJpbmdpZnkoZW5kcG9pbnQpKTtcbiAgICB9KTtcbiAgfSxcblxuICByZWdpc3RlcjogZnVuY3Rpb24odHlwZSwga2xhc3MpIHtcbiAgICB0aGlzLl90cmFuc3BvcnRzLnB1c2goW3R5cGUsIGtsYXNzXSk7XG4gICAga2xhc3MucHJvdG90eXBlLmNvbm5lY3Rpb25UeXBlID0gdHlwZTtcbiAgfSxcblxuICBnZXRDb25uZWN0aW9uVHlwZXM6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBhcnJheS5tYXAodGhpcy5fdHJhbnNwb3J0cywgZnVuY3Rpb24odCkgeyByZXR1cm4gdFswXSB9KTtcbiAgfSxcblxuICBfdHJhbnNwb3J0czogW11cbn0pO1xuXG5leHRlbmQoVHJhbnNwb3J0LnByb3RvdHlwZSwgTG9nZ2luZyk7XG5leHRlbmQoVHJhbnNwb3J0LnByb3RvdHlwZSwgVGltZW91dHMpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRyYW5zcG9ydDtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIENsYXNzICAgICAgPSByZXF1aXJlKCcuLi91dGlsL2NsYXNzJyksXG4gICAgUHJvbWlzZSAgICA9IHJlcXVpcmUoJy4uL3V0aWwvcHJvbWlzZScpLFxuICAgIFNldCAgICAgICAgPSByZXF1aXJlKCcuLi91dGlsL3NldCcpLFxuICAgIFVSSSAgICAgICAgPSByZXF1aXJlKCcuLi91dGlsL3VyaScpLFxuICAgIGJyb3dzZXIgICAgPSByZXF1aXJlKCcuLi91dGlsL2Jyb3dzZXInKSxcbiAgICBjb3B5T2JqZWN0ID0gcmVxdWlyZSgnLi4vdXRpbC9jb3B5X29iamVjdCcpLFxuICAgIGV4dGVuZCAgICAgPSByZXF1aXJlKCcuLi91dGlsL2V4dGVuZCcpLFxuICAgIHRvSlNPTiAgICAgPSByZXF1aXJlKCcuLi91dGlsL3RvX2pzb24nKSxcbiAgICB3cyAgICAgICAgID0gcmVxdWlyZSgnLi4vdXRpbC93ZWJzb2NrZXQnKSxcbiAgICBEZWZlcnJhYmxlID0gcmVxdWlyZSgnLi4vbWl4aW5zL2RlZmVycmFibGUnKSxcbiAgICBUcmFuc3BvcnQgID0gcmVxdWlyZSgnLi90cmFuc3BvcnQnKTtcblxudmFyIFdlYlNvY2tldCA9IGV4dGVuZChDbGFzcyhUcmFuc3BvcnQsIHtcbiAgVU5DT05ORUNURUQ6ICAxLFxuICBDT05ORUNUSU5HOiAgIDIsXG4gIENPTk5FQ1RFRDogICAgMyxcblxuICBiYXRjaGluZzogICAgIGZhbHNlLFxuXG4gIGlzVXNhYmxlOiBmdW5jdGlvbihjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHRoaXMuY2FsbGJhY2soZnVuY3Rpb24oKSB7IGNhbGxiYWNrLmNhbGwoY29udGV4dCwgdHJ1ZSkgfSk7XG4gICAgdGhpcy5lcnJiYWNrKGZ1bmN0aW9uKCkgeyBjYWxsYmFjay5jYWxsKGNvbnRleHQsIGZhbHNlKSB9KTtcbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgfSxcblxuICByZXF1ZXN0OiBmdW5jdGlvbihtZXNzYWdlcykge1xuICAgIHRoaXMuX3BlbmRpbmcgPSB0aGlzLl9wZW5kaW5nIHx8IG5ldyBTZXQoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IG1lc3NhZ2VzLmxlbmd0aDsgaSA8IG47IGkrKykgdGhpcy5fcGVuZGluZy5hZGQobWVzc2FnZXNbaV0pO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHNlbGYuY2FsbGJhY2soZnVuY3Rpb24oc29ja2V0KSB7XG4gICAgICAgIGlmICghc29ja2V0IHx8IHNvY2tldC5yZWFkeVN0YXRlICE9PSAxKSByZXR1cm47XG4gICAgICAgIHNvY2tldC5zZW5kKHRvSlNPTihtZXNzYWdlcykpO1xuICAgICAgICByZXNvbHZlKHNvY2tldCk7XG4gICAgICB9KTtcblxuICAgICAgc2VsZi5jb25uZWN0KCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCkgeyBwcm9taXNlLnRoZW4oZnVuY3Rpb24od3MpIHsgd3MuY2xvc2UoKSB9KSB9XG4gICAgfTtcbiAgfSxcblxuICBjb25uZWN0OiBmdW5jdGlvbigpIHtcbiAgICBpZiAoV2ViU29ja2V0Ll91bmxvYWRlZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5fc3RhdGUgPSB0aGlzLl9zdGF0ZSB8fCB0aGlzLlVOQ09OTkVDVEVEO1xuICAgIGlmICh0aGlzLl9zdGF0ZSAhPT0gdGhpcy5VTkNPTk5FQ1RFRCkgcmV0dXJuO1xuICAgIHRoaXMuX3N0YXRlID0gdGhpcy5DT05ORUNUSU5HO1xuXG4gICAgdmFyIHNvY2tldCA9IHRoaXMuX2NyZWF0ZVNvY2tldCgpO1xuICAgIGlmICghc29ja2V0KSByZXR1cm4gdGhpcy5zZXREZWZlcnJlZFN0YXR1cygnZmFpbGVkJyk7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBzb2NrZXQub25vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoc29ja2V0LmhlYWRlcnMpIHNlbGYuX3N0b3JlQ29va2llcyhzb2NrZXQuaGVhZGVyc1snc2V0LWNvb2tpZSddKTtcbiAgICAgIHNlbGYuX3NvY2tldCA9IHNvY2tldDtcbiAgICAgIHNlbGYuX3N0YXRlID0gc2VsZi5DT05ORUNURUQ7XG4gICAgICBzZWxmLl9ldmVyQ29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgIHNlbGYuX3BpbmcoKTtcbiAgICAgIHNlbGYuc2V0RGVmZXJyZWRTdGF0dXMoJ3N1Y2NlZWRlZCcsIHNvY2tldCk7XG4gICAgfTtcblxuICAgIHZhciBjbG9zZWQgPSBmYWxzZTtcbiAgICBzb2NrZXQub25jbG9zZSA9IHNvY2tldC5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoY2xvc2VkKSByZXR1cm47XG4gICAgICBjbG9zZWQgPSB0cnVlO1xuXG4gICAgICB2YXIgd2FzQ29ubmVjdGVkID0gKHNlbGYuX3N0YXRlID09PSBzZWxmLkNPTk5FQ1RFRCk7XG4gICAgICBzb2NrZXQub25vcGVuID0gc29ja2V0Lm9uY2xvc2UgPSBzb2NrZXQub25lcnJvciA9IHNvY2tldC5vbm1lc3NhZ2UgPSBudWxsO1xuXG4gICAgICBkZWxldGUgc2VsZi5fc29ja2V0O1xuICAgICAgc2VsZi5fc3RhdGUgPSBzZWxmLlVOQ09OTkVDVEVEO1xuICAgICAgc2VsZi5yZW1vdmVUaW1lb3V0KCdwaW5nJyk7XG5cbiAgICAgIHZhciBwZW5kaW5nID0gc2VsZi5fcGVuZGluZyA/IHNlbGYuX3BlbmRpbmcudG9BcnJheSgpIDogW107XG4gICAgICBkZWxldGUgc2VsZi5fcGVuZGluZztcblxuICAgICAgaWYgKHdhc0Nvbm5lY3RlZCB8fCBzZWxmLl9ldmVyQ29ubmVjdGVkKSB7XG4gICAgICAgIHNlbGYuc2V0RGVmZXJyZWRTdGF0dXMoJ3Vua25vd24nKTtcbiAgICAgICAgc2VsZi5faGFuZGxlRXJyb3IocGVuZGluZywgd2FzQ29ubmVjdGVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuc2V0RGVmZXJyZWRTdGF0dXMoJ2ZhaWxlZCcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBzb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHZhciByZXBsaWVzO1xuICAgICAgdHJ5IHsgcmVwbGllcyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgfSBjYXRjaCAoZXJyb3IpIHt9XG5cbiAgICAgIGlmICghcmVwbGllcykgcmV0dXJuO1xuXG4gICAgICByZXBsaWVzID0gW10uY29uY2F0KHJlcGxpZXMpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbiA9IHJlcGxpZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGlmIChyZXBsaWVzW2ldLnN1Y2Nlc3NmdWwgPT09IHVuZGVmaW5lZCkgY29udGludWU7XG4gICAgICAgIHNlbGYuX3BlbmRpbmcucmVtb3ZlKHJlcGxpZXNbaV0pO1xuICAgICAgfVxuICAgICAgc2VsZi5fcmVjZWl2ZShyZXBsaWVzKTtcbiAgICB9O1xuICB9LFxuXG4gIGNsb3NlOiBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX3NvY2tldCkgcmV0dXJuO1xuICAgIHRoaXMuX3NvY2tldC5jbG9zZSgpO1xuICB9LFxuXG4gIF9jcmVhdGVTb2NrZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB1cmwgICAgICAgID0gV2ViU29ja2V0LmdldFNvY2tldFVybCh0aGlzLmVuZHBvaW50KSxcbiAgICAgICAgaGVhZGVycyAgICA9IHRoaXMuX2Rpc3BhdGNoZXIuaGVhZGVycyxcbiAgICAgICAgZXh0ZW5zaW9ucyA9IHRoaXMuX2Rpc3BhdGNoZXIud3NFeHRlbnNpb25zLFxuICAgICAgICBjb29raWUgICAgID0gdGhpcy5fZ2V0Q29va2llcygpLFxuICAgICAgICB0bHMgICAgICAgID0gdGhpcy5fZGlzcGF0Y2hlci50bHMsXG4gICAgICAgIG9wdGlvbnMgICAgPSB7ZXh0ZW5zaW9uczogZXh0ZW5zaW9ucywgaGVhZGVyczogaGVhZGVycywgcHJveHk6IHRoaXMuX3Byb3h5LCB0bHM6IHRsc307XG5cbiAgICBpZiAoY29va2llICE9PSAnJykgb3B0aW9ucy5oZWFkZXJzWydDb29raWUnXSA9IGNvb2tpZTtcblxuICAgIHJldHVybiB3cy5jcmVhdGUodXJsLCBbXSwgb3B0aW9ucyk7XG4gIH0sXG5cbiAgX3Bpbmc6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5fc29ja2V0IHx8IHRoaXMuX3NvY2tldC5yZWFkeVN0YXRlICE9PSAxKSByZXR1cm47XG4gICAgdGhpcy5fc29ja2V0LnNlbmQoJ1tdJyk7XG4gICAgdGhpcy5hZGRUaW1lb3V0KCdwaW5nJywgdGhpcy5fZGlzcGF0Y2hlci50aW1lb3V0IC8gMiwgdGhpcy5fcGluZywgdGhpcyk7XG4gIH1cblxufSksIHtcbiAgUFJPVE9DT0xTOiB7XG4gICAgJ2h0dHA6JzogICd3czonLFxuICAgICdodHRwczonOiAnd3NzOidcbiAgfSxcblxuICBjcmVhdGU6IGZ1bmN0aW9uKGRpc3BhdGNoZXIsIGVuZHBvaW50KSB7XG4gICAgdmFyIHNvY2tldHMgPSBkaXNwYXRjaGVyLnRyYW5zcG9ydHMud2Vic29ja2V0ID0gZGlzcGF0Y2hlci50cmFuc3BvcnRzLndlYnNvY2tldCB8fCB7fTtcbiAgICBzb2NrZXRzW2VuZHBvaW50LmhyZWZdID0gc29ja2V0c1tlbmRwb2ludC5ocmVmXSB8fCBuZXcgdGhpcyhkaXNwYXRjaGVyLCBlbmRwb2ludCk7XG4gICAgcmV0dXJuIHNvY2tldHNbZW5kcG9pbnQuaHJlZl07XG4gIH0sXG5cbiAgZ2V0U29ja2V0VXJsOiBmdW5jdGlvbihlbmRwb2ludCkge1xuICAgIGVuZHBvaW50ID0gY29weU9iamVjdChlbmRwb2ludCk7XG4gICAgZW5kcG9pbnQucHJvdG9jb2wgPSB0aGlzLlBST1RPQ09MU1tlbmRwb2ludC5wcm90b2NvbF07XG4gICAgcmV0dXJuIFVSSS5zdHJpbmdpZnkoZW5kcG9pbnQpO1xuICB9LFxuXG4gIGlzVXNhYmxlOiBmdW5jdGlvbihkaXNwYXRjaGVyLCBlbmRwb2ludCwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICB0aGlzLmNyZWF0ZShkaXNwYXRjaGVyLCBlbmRwb2ludCkuaXNVc2FibGUoY2FsbGJhY2ssIGNvbnRleHQpO1xuICB9XG59KTtcblxuZXh0ZW5kKFdlYlNvY2tldC5wcm90b3R5cGUsIERlZmVycmFibGUpO1xuXG5pZiAoYnJvd3Nlci5FdmVudCAmJiBnbG9iYWwub25iZWZvcmV1bmxvYWQgIT09IHVuZGVmaW5lZClcbiAgYnJvd3Nlci5FdmVudC5vbihnbG9iYWwsICdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbigpIHsgV2ViU29ja2V0Ll91bmxvYWRlZCA9IHRydWUgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gV2ViU29ja2V0O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2xhc3MgICAgID0gcmVxdWlyZSgnLi4vdXRpbC9jbGFzcycpLFxuICAgIFVSSSAgICAgICA9IHJlcXVpcmUoJy4uL3V0aWwvdXJpJyksXG4gICAgYnJvd3NlciAgID0gcmVxdWlyZSgnLi4vdXRpbC9icm93c2VyJyksXG4gICAgZXh0ZW5kICAgID0gcmVxdWlyZSgnLi4vdXRpbC9leHRlbmQnKSxcbiAgICB0b0pTT04gICAgPSByZXF1aXJlKCcuLi91dGlsL3RvX2pzb24nKSxcbiAgICBUcmFuc3BvcnQgPSByZXF1aXJlKCcuL3RyYW5zcG9ydCcpO1xuXG52YXIgWEhSID0gZXh0ZW5kKENsYXNzKFRyYW5zcG9ydCwge1xuICBlbmNvZGU6IGZ1bmN0aW9uKG1lc3NhZ2VzKSB7XG4gICAgcmV0dXJuIHRvSlNPTihtZXNzYWdlcyk7XG4gIH0sXG5cbiAgcmVxdWVzdDogZnVuY3Rpb24obWVzc2FnZXMpIHtcbiAgICB2YXIgaHJlZiA9IHRoaXMuZW5kcG9pbnQuaHJlZixcbiAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgIHhocjtcblxuICAgIC8vIFByZWZlciBYTUxIdHRwUmVxdWVzdCBvdmVyIEFjdGl2ZVhPYmplY3QgaWYgdGhleSBib3RoIGV4aXN0XG4gICAgaWYgKGdsb2JhbC5YTUxIdHRwUmVxdWVzdCkge1xuICAgICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgfSBlbHNlIGlmIChnbG9iYWwuQWN0aXZlWE9iamVjdCkge1xuICAgICAgeGhyID0gbmV3IEFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxIVFRQJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVFcnJvcihtZXNzYWdlcyk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oJ1BPU1QnLCBocmVmLCB0cnVlKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignUHJhZ21hJywgJ25vLWNhY2hlJyk7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtUmVxdWVzdGVkLVdpdGgnLCAnWE1MSHR0cFJlcXVlc3QnKTtcblxuICAgIHZhciBoZWFkZXJzID0gdGhpcy5fZGlzcGF0Y2hlci5oZWFkZXJzO1xuICAgIGZvciAodmFyIGtleSBpbiBoZWFkZXJzKSB7XG4gICAgICBpZiAoIWhlYWRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkgY29udGludWU7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIGhlYWRlcnNba2V5XSk7XG4gICAgfVxuXG4gICAgdmFyIGFib3J0ID0gZnVuY3Rpb24oKSB7IHhoci5hYm9ydCgpIH07XG4gICAgaWYgKGdsb2JhbC5vbmJlZm9yZXVubG9hZCAhPT0gdW5kZWZpbmVkKVxuICAgICAgYnJvd3Nlci5FdmVudC5vbihnbG9iYWwsICdiZWZvcmV1bmxvYWQnLCBhYm9ydCk7XG5cbiAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXhociB8fCB4aHIucmVhZHlTdGF0ZSAhPT0gNCkgcmV0dXJuO1xuXG4gICAgICB2YXIgcmVwbGllcyAgICA9IG51bGwsXG4gICAgICAgICAgc3RhdHVzICAgICA9IHhoci5zdGF0dXMsXG4gICAgICAgICAgdGV4dCAgICAgICA9IHhoci5yZXNwb25zZVRleHQsXG4gICAgICAgICAgc3VjY2Vzc2Z1bCA9IChzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCkgfHwgc3RhdHVzID09PSAzMDQgfHwgc3RhdHVzID09PSAxMjIzO1xuXG4gICAgICBpZiAoZ2xvYmFsLm9uYmVmb3JldW5sb2FkICE9PSB1bmRlZmluZWQpXG4gICAgICAgIGJyb3dzZXIuRXZlbnQuZGV0YWNoKGdsb2JhbCwgJ2JlZm9yZXVubG9hZCcsIGFib3J0KTtcblxuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge307XG4gICAgICB4aHIgPSBudWxsO1xuXG4gICAgICBpZiAoIXN1Y2Nlc3NmdWwpIHJldHVybiBzZWxmLl9oYW5kbGVFcnJvcihtZXNzYWdlcyk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcGxpZXMgPSBKU09OLnBhcnNlKHRleHQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHt9XG5cbiAgICAgIGlmIChyZXBsaWVzKVxuICAgICAgICBzZWxmLl9yZWNlaXZlKHJlcGxpZXMpO1xuICAgICAgZWxzZVxuICAgICAgICBzZWxmLl9oYW5kbGVFcnJvcihtZXNzYWdlcyk7XG4gICAgfTtcblxuICAgIHhoci5zZW5kKHRoaXMuZW5jb2RlKG1lc3NhZ2VzKSk7XG4gICAgcmV0dXJuIHhocjtcbiAgfVxufSksIHtcbiAgaXNVc2FibGU6IGZ1bmN0aW9uKGRpc3BhdGNoZXIsIGVuZHBvaW50LCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHZhciB1c2FibGUgPSAobmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZScpXG4gICAgICAgICAgICAgIHx8IFVSSS5pc1NhbWVPcmlnaW4oZW5kcG9pbnQpO1xuXG4gICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCB1c2FibGUpO1xuICB9XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBYSFI7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb21tb25FbGVtZW50OiBmdW5jdGlvbihsaXN0YSwgbGlzdGIpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGxpc3RhLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgaWYgKHRoaXMuaW5kZXhPZihsaXN0YiwgbGlzdGFbaV0pICE9PSAtMSlcbiAgICAgICAgcmV0dXJuIGxpc3RhW2ldO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICBpbmRleE9mOiBmdW5jdGlvbihsaXN0LCBuZWVkbGUpIHtcbiAgICBpZiAobGlzdC5pbmRleE9mKSByZXR1cm4gbGlzdC5pbmRleE9mKG5lZWRsZSk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IGxpc3QubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbmVlZGxlKSByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9LFxuXG4gIG1hcDogZnVuY3Rpb24ob2JqZWN0LCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIGlmIChvYmplY3QubWFwKSByZXR1cm4gb2JqZWN0Lm1hcChjYWxsYmFjaywgY29udGV4dCk7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbiA9IG9iamVjdC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgcmVzdWx0LnB1c2goY2FsbGJhY2suY2FsbChjb250ZXh0IHx8IG51bGwsIG9iamVjdFtpXSwgaSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgIGlmICghb2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xuICAgICAgICByZXN1bHQucHVzaChjYWxsYmFjay5jYWxsKGNvbnRleHQgfHwgbnVsbCwga2V5LCBvYmplY3Rba2V5XSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuXG4gIGZpbHRlcjogZnVuY3Rpb24oYXJyYXksIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgaWYgKGFycmF5LmZpbHRlcikgcmV0dXJuIGFycmF5LmZpbHRlcihjYWxsYmFjaywgY29udGV4dCk7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gYXJyYXkubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAoY2FsbGJhY2suY2FsbChjb250ZXh0IHx8IG51bGwsIGFycmF5W2ldLCBpKSlcbiAgICAgICAgcmVzdWx0LnB1c2goYXJyYXlbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuXG4gIGFzeW5jRWFjaDogZnVuY3Rpb24obGlzdCwgaXRlcmF0b3IsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgdmFyIG4gICAgICAgPSBsaXN0Lmxlbmd0aCxcbiAgICAgICAgaSAgICAgICA9IC0xLFxuICAgICAgICBjYWxscyAgID0gMCxcbiAgICAgICAgbG9vcGluZyA9IGZhbHNlO1xuXG4gICAgdmFyIGl0ZXJhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNhbGxzIC09IDE7XG4gICAgICBpICs9IDE7XG4gICAgICBpZiAoaSA9PT0gbikgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoY29udGV4dCk7XG4gICAgICBpdGVyYXRvcihsaXN0W2ldLCByZXN1bWUpO1xuICAgIH07XG5cbiAgICB2YXIgbG9vcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGxvb3BpbmcpIHJldHVybjtcbiAgICAgIGxvb3BpbmcgPSB0cnVlO1xuICAgICAgd2hpbGUgKGNhbGxzID4gMCkgaXRlcmF0ZSgpO1xuICAgICAgbG9vcGluZyA9IGZhbHNlO1xuICAgIH07XG5cbiAgICB2YXIgcmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICBjYWxscyArPSAxO1xuICAgICAgbG9vcCgpO1xuICAgIH07XG4gICAgcmVzdW1lKCk7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudCA9IHtcbiAgX3JlZ2lzdHJ5OiBbXSxcblxuICBvbjogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnROYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHZhciB3cmFwcGVkID0gZnVuY3Rpb24oKSB7IGNhbGxiYWNrLmNhbGwoY29udGV4dCkgfTtcblxuICAgIGlmIChlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIpXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB3cmFwcGVkLCBmYWxzZSk7XG4gICAgZWxzZVxuICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCB3cmFwcGVkKTtcblxuICAgIHRoaXMuX3JlZ2lzdHJ5LnB1c2goe1xuICAgICAgX2VsZW1lbnQ6ICAgZWxlbWVudCxcbiAgICAgIF90eXBlOiAgICAgIGV2ZW50TmFtZSxcbiAgICAgIF9jYWxsYmFjazogIGNhbGxiYWNrLFxuICAgICAgX2NvbnRleHQ6ICAgICBjb250ZXh0LFxuICAgICAgX2hhbmRsZXI6ICAgd3JhcHBlZFxuICAgIH0pO1xuICB9LFxuXG4gIGRldGFjaDogZnVuY3Rpb24oZWxlbWVudCwgZXZlbnROYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHZhciBpID0gdGhpcy5fcmVnaXN0cnkubGVuZ3RoLCByZWdpc3RlcjtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZWdpc3RlciA9IHRoaXMuX3JlZ2lzdHJ5W2ldO1xuXG4gICAgICBpZiAoKGVsZW1lbnQgICAgJiYgZWxlbWVudCAgICAhPT0gcmVnaXN0ZXIuX2VsZW1lbnQpICB8fFxuICAgICAgICAgIChldmVudE5hbWUgICYmIGV2ZW50TmFtZSAgIT09IHJlZ2lzdGVyLl90eXBlKSAgICAgfHxcbiAgICAgICAgICAoY2FsbGJhY2sgICAmJiBjYWxsYmFjayAgICE9PSByZWdpc3Rlci5fY2FsbGJhY2spIHx8XG4gICAgICAgICAgKGNvbnRleHQgICAgJiYgY29udGV4dCAgICAhPT0gcmVnaXN0ZXIuX2NvbnRleHQpKVxuICAgICAgICBjb250aW51ZTtcblxuICAgICAgaWYgKHJlZ2lzdGVyLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIpXG4gICAgICAgIHJlZ2lzdGVyLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIocmVnaXN0ZXIuX3R5cGUsIHJlZ2lzdGVyLl9oYW5kbGVyLCBmYWxzZSk7XG4gICAgICBlbHNlXG4gICAgICAgIHJlZ2lzdGVyLl9lbGVtZW50LmRldGFjaEV2ZW50KCdvbicgKyByZWdpc3Rlci5fdHlwZSwgcmVnaXN0ZXIuX2hhbmRsZXIpO1xuXG4gICAgICB0aGlzLl9yZWdpc3RyeS5zcGxpY2UoaSwxKTtcbiAgICAgIHJlZ2lzdGVyID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbmlmIChnbG9iYWwub251bmxvYWQgIT09IHVuZGVmaW5lZClcbiAgRXZlbnQub24oZ2xvYmFsLCAndW5sb2FkJywgRXZlbnQuZGV0YWNoLCBFdmVudCk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBFdmVudDogRXZlbnRcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBleHRlbmQgPSByZXF1aXJlKCcuL2V4dGVuZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBhcmVudCwgbWV0aG9kcykge1xuICBpZiAodHlwZW9mIHBhcmVudCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIG1ldGhvZHMgPSBwYXJlbnQ7XG4gICAgcGFyZW50ICA9IE9iamVjdDtcbiAgfVxuXG4gIHZhciBrbGFzcyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5pbml0aWFsaXplKSByZXR1cm4gdGhpcztcbiAgICByZXR1cm4gdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgfTtcblxuICB2YXIgYnJpZGdlID0gZnVuY3Rpb24oKSB7fTtcbiAgYnJpZGdlLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XG5cbiAga2xhc3MucHJvdG90eXBlID0gbmV3IGJyaWRnZSgpO1xuICBleHRlbmQoa2xhc3MucHJvdG90eXBlLCBtZXRob2RzKTtcblxuICByZXR1cm4ga2xhc3M7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFZFUlNJT046ICAgICAgICAgICcxLjIuNCcsXG5cbiAgQkFZRVVYX1ZFUlNJT046ICAgJzEuMCcsXG4gIElEX0xFTkdUSDogICAgICAgIDE2MCxcbiAgSlNPTlBfQ0FMTEJBQ0s6ICAgJ2pzb25wY2FsbGJhY2snLFxuICBDT05ORUNUSU9OX1RZUEVTOiBbJ2xvbmctcG9sbGluZycsICdjcm9zcy1vcmlnaW4tbG9uZy1wb2xsaW5nJywgJ2NhbGxiYWNrLXBvbGxpbmcnLCAnd2Vic29ja2V0JywgJ2V2ZW50c291cmNlJywgJ2luLXByb2Nlc3MnXSxcblxuICBNQU5EQVRPUllfQ09OTkVDVElPTl9UWVBFUzogWydsb25nLXBvbGxpbmcnLCAnY2FsbGJhY2stcG9sbGluZycsICdpbi1wcm9jZXNzJ11cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge307XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBjb3B5T2JqZWN0ID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gIHZhciBjbG9uZSwgaSwga2V5O1xuICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBjbG9uZSA9IFtdO1xuICAgIGkgPSBvYmplY3QubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIGNsb25lW2ldID0gY29weU9iamVjdChvYmplY3RbaV0pO1xuICAgIHJldHVybiBjbG9uZTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0Jykge1xuICAgIGNsb25lID0gKG9iamVjdCA9PT0gbnVsbCkgPyBudWxsIDoge307XG4gICAgZm9yIChrZXkgaW4gb2JqZWN0KSBjbG9uZVtrZXldID0gY29weU9iamVjdChvYmplY3Rba2V5XSk7XG4gICAgcmV0dXJuIGNsb25lO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY29weU9iamVjdDtcbiIsIi8qXG5Db3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkgb2ZcbnRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW5cbnRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG9cbnVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzXG5vZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG9cbnNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG5TT0ZUV0FSRS5cbiovXG5cbnZhciBpc0FycmF5ID0gdHlwZW9mIEFycmF5LmlzQXJyYXkgPT09ICdmdW5jdGlvbidcbiAgICA/IEFycmF5LmlzQXJyYXlcbiAgICA6IGZ1bmN0aW9uICh4cykge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHhzKSA9PT0gJ1tvYmplY3QgQXJyYXldJ1xuICAgIH1cbjtcbmZ1bmN0aW9uIGluZGV4T2YgKHhzLCB4KSB7XG4gICAgaWYgKHhzLmluZGV4T2YpIHJldHVybiB4cy5pbmRleE9mKHgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHggPT09IHhzW2ldKSByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7fVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzQXJyYXkodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpXG4gICAge1xuICAgICAgaWYgKGFyZ3VtZW50c1sxXSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGFyZ3VtZW50c1sxXTsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuY2F1Z2h0LCB1bnNwZWNpZmllZCAnZXJyb3InIGV2ZW50LlwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIGZhbHNlO1xuICB2YXIgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgaWYgKCFoYW5kbGVyKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09ICdmdW5jdGlvbicpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcblxuICB9IGVsc2UgaWYgKGlzQXJyYXkoaGFuZGxlcikpIHtcbiAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcblxuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLy8gRXZlbnRFbWl0dGVyIGlzIGRlZmluZWQgaW4gc3JjL25vZGVfZXZlbnRzLmNjXG4vLyBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQoKSBpcyBhbHNvIGRlZmluZWQgdGhlcmUuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCdmdW5jdGlvbicgIT09IHR5cGVvZiBsaXN0ZW5lcikge1xuICAgIHRocm93IG5ldyBFcnJvcignYWRkTGlzdGVuZXIgb25seSB0YWtlcyBpbnN0YW5jZXMgb2YgRnVuY3Rpb24nKTtcbiAgfVxuXG4gIGlmICghdGhpcy5fZXZlbnRzKSB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09IFwibmV3TGlzdGVuZXJzXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyc1wiLlxuICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh0aGlzLl9ldmVudHNbdHlwZV0pKSB7XG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHNlbGYub24odHlwZSwgZnVuY3Rpb24gZygpIHtcbiAgICBzZWxmLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICgnZnVuY3Rpb24nICE9PSB0eXBlb2YgbGlzdGVuZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlbW92ZUxpc3RlbmVyIG9ubHkgdGFrZXMgaW5zdGFuY2VzIG9mIEZ1bmN0aW9uJyk7XG4gIH1cblxuICAvLyBkb2VzIG5vdCB1c2UgbGlzdGVuZXJzKCksIHNvIG5vIHNpZGUgZWZmZWN0IG9mIGNyZWF0aW5nIF9ldmVudHNbdHlwZV1cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSkgcmV0dXJuIHRoaXM7XG5cbiAgdmFyIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzQXJyYXkobGlzdCkpIHtcbiAgICB2YXIgaSA9IGluZGV4T2YobGlzdCwgbGlzdGVuZXIpO1xuICAgIGlmIChpIDwgMCkgcmV0dXJuIHRoaXM7XG4gICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgaWYgKGxpc3QubGVuZ3RoID09IDApXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICB9IGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSA9PT0gbGlzdGVuZXIpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGRvZXMgbm90IHVzZSBsaXN0ZW5lcnMoKSwgc28gbm8gc2lkZSBlZmZlY3Qgb2YgY3JlYXRpbmcgX2V2ZW50c1t0eXBlXVxuICBpZiAodHlwZSAmJiB0aGlzLl9ldmVudHMgJiYgdGhpcy5fZXZlbnRzW3R5cGVdKSB0aGlzLl9ldmVudHNbdHlwZV0gPSBudWxsO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAoIXRoaXMuX2V2ZW50cykgdGhpcy5fZXZlbnRzID0ge307XG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKSB0aGlzLl9ldmVudHNbdHlwZV0gPSBbXTtcbiAgaWYgKCFpc0FycmF5KHRoaXMuX2V2ZW50c1t0eXBlXSkpIHtcbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgfVxuICByZXR1cm4gdGhpcy5fZXZlbnRzW3R5cGVdO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkZXN0LCBzb3VyY2UsIG92ZXJ3cml0ZSkge1xuICBpZiAoIXNvdXJjZSkgcmV0dXJuIGRlc3Q7XG4gIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICBpZiAoIXNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSBjb250aW51ZTtcbiAgICBpZiAoZGVzdC5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIG92ZXJ3cml0ZSA9PT0gZmFsc2UpIGNvbnRpbnVlO1xuICAgIGlmIChkZXN0W2tleV0gIT09IHNvdXJjZVtrZXldKVxuICAgICAgZGVzdFtrZXldID0gc291cmNlW2tleV07XG4gIH1cbiAgcmV0dXJuIGRlc3Q7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNhcCA9IHJlcXVpcmUoJ2FzYXAnKTtcblxudmFyIFBFTkRJTkcgICA9IDAsXG4gICAgRlVMRklMTEVEID0gMSxcbiAgICBSRUpFQ1RFRCAgPSAyO1xuXG52YXIgUkVUVVJOID0gZnVuY3Rpb24oeCkgeyByZXR1cm4geCB9LFxuICAgIFRIUk9XICA9IGZ1bmN0aW9uKHgpIHsgdGhyb3cgIHggfTtcblxudmFyIFByb21pc2UgPSBmdW5jdGlvbih0YXNrKSB7XG4gIHRoaXMuX3N0YXRlICAgICAgID0gUEVORElORztcbiAgdGhpcy5fb25GdWxmaWxsZWQgPSBbXTtcbiAgdGhpcy5fb25SZWplY3RlZCAgPSBbXTtcblxuICBpZiAodHlwZW9mIHRhc2sgIT09ICdmdW5jdGlvbicpIHJldHVybjtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIHRhc2soZnVuY3Rpb24odmFsdWUpICB7IHJlc29sdmUoc2VsZiwgdmFsdWUpIH0sXG4gICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IHJlamVjdChzZWxmLCByZWFzb24pIH0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHZhciBuZXh0ID0gbmV3IFByb21pc2UoKTtcbiAgcmVnaXN0ZXJPbkZ1bGZpbGxlZCh0aGlzLCBvbkZ1bGZpbGxlZCwgbmV4dCk7XG4gIHJlZ2lzdGVyT25SZWplY3RlZCh0aGlzLCBvblJlamVjdGVkLCBuZXh0KTtcbiAgcmV0dXJuIG5leHQ7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZVsnY2F0Y2gnXSA9IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpIHtcbiAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcbn07XG5cbnZhciByZWdpc3Rlck9uRnVsZmlsbGVkID0gZnVuY3Rpb24ocHJvbWlzZSwgb25GdWxmaWxsZWQsIG5leHQpIHtcbiAgaWYgKHR5cGVvZiBvbkZ1bGZpbGxlZCAhPT0gJ2Z1bmN0aW9uJykgb25GdWxmaWxsZWQgPSBSRVRVUk47XG4gIHZhciBoYW5kbGVyID0gZnVuY3Rpb24odmFsdWUpIHsgaW52b2tlKG9uRnVsZmlsbGVkLCB2YWx1ZSwgbmV4dCkgfTtcblxuICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICBwcm9taXNlLl9vbkZ1bGZpbGxlZC5wdXNoKGhhbmRsZXIpO1xuICB9IGVsc2UgaWYgKHByb21pc2UuX3N0YXRlID09PSBGVUxGSUxMRUQpIHtcbiAgICBoYW5kbGVyKHByb21pc2UuX3ZhbHVlKTtcbiAgfVxufTtcblxudmFyIHJlZ2lzdGVyT25SZWplY3RlZCA9IGZ1bmN0aW9uKHByb21pc2UsIG9uUmVqZWN0ZWQsIG5leHQpIHtcbiAgaWYgKHR5cGVvZiBvblJlamVjdGVkICE9PSAnZnVuY3Rpb24nKSBvblJlamVjdGVkID0gVEhST1c7XG4gIHZhciBoYW5kbGVyID0gZnVuY3Rpb24ocmVhc29uKSB7IGludm9rZShvblJlamVjdGVkLCByZWFzb24sIG5leHQpIH07XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgcHJvbWlzZS5fb25SZWplY3RlZC5wdXNoKGhhbmRsZXIpO1xuICB9IGVsc2UgaWYgKHByb21pc2UuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIGhhbmRsZXIocHJvbWlzZS5fcmVhc29uKTtcbiAgfVxufTtcblxudmFyIGludm9rZSA9IGZ1bmN0aW9uKGZuLCB2YWx1ZSwgbmV4dCkge1xuICBhc2FwKGZ1bmN0aW9uKCkgeyBfaW52b2tlKGZuLCB2YWx1ZSwgbmV4dCkgfSk7XG59O1xuXG52YXIgX2ludm9rZSA9IGZ1bmN0aW9uKGZuLCB2YWx1ZSwgbmV4dCkge1xuICB2YXIgb3V0Y29tZTtcblxuICB0cnkge1xuICAgIG91dGNvbWUgPSBmbih2YWx1ZSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlamVjdChuZXh0LCBlcnJvcik7XG4gIH1cblxuICBpZiAob3V0Y29tZSA9PT0gbmV4dCkge1xuICAgIHJlamVjdChuZXh0LCBuZXcgVHlwZUVycm9yKCdSZWN1cnNpdmUgcHJvbWlzZSBjaGFpbiBkZXRlY3RlZCcpKTtcbiAgfSBlbHNlIHtcbiAgICByZXNvbHZlKG5leHQsIG91dGNvbWUpO1xuICB9XG59O1xuXG52YXIgcmVzb2x2ZSA9IGZ1bmN0aW9uKHByb21pc2UsIHZhbHVlKSB7XG4gIHZhciBjYWxsZWQgPSBmYWxzZSwgdHlwZSwgdGhlbjtcblxuICB0cnkge1xuICAgIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgdGhlbiA9IHZhbHVlICE9PSBudWxsICYmICh0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnKSAmJiB2YWx1ZS50aGVuO1xuXG4gICAgaWYgKHR5cGVvZiB0aGVuICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cbiAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICghKGNhbGxlZCBeIChjYWxsZWQgPSB0cnVlKSkpIHJldHVybjtcbiAgICAgIHJlc29sdmUocHJvbWlzZSwgdik7XG4gICAgfSwgZnVuY3Rpb24ocikge1xuICAgICAgaWYgKCEoY2FsbGVkIF4gKGNhbGxlZCA9IHRydWUpKSkgcmV0dXJuO1xuICAgICAgcmVqZWN0KHByb21pc2UsIHIpO1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmICghKGNhbGxlZCBeIChjYWxsZWQgPSB0cnVlKSkpIHJldHVybjtcbiAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICB9XG59O1xuXG52YXIgZnVsZmlsbCA9IGZ1bmN0aW9uKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykgcmV0dXJuO1xuXG4gIHByb21pc2UuX3N0YXRlICAgICAgPSBGVUxGSUxMRUQ7XG4gIHByb21pc2UuX3ZhbHVlICAgICAgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fb25SZWplY3RlZCA9IFtdO1xuXG4gIHZhciBvbkZ1bGZpbGxlZCA9IHByb21pc2UuX29uRnVsZmlsbGVkLCBmbjtcbiAgd2hpbGUgKGZuID0gb25GdWxmaWxsZWQuc2hpZnQoKSkgZm4odmFsdWUpO1xufTtcblxudmFyIHJlamVjdCA9IGZ1bmN0aW9uKHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHJldHVybjtcblxuICBwcm9taXNlLl9zdGF0ZSAgICAgICA9IFJFSkVDVEVEO1xuICBwcm9taXNlLl9yZWFzb24gICAgICA9IHJlYXNvbjtcbiAgcHJvbWlzZS5fb25GdWxmaWxsZWQgPSBbXTtcblxuICB2YXIgb25SZWplY3RlZCA9IHByb21pc2UuX29uUmVqZWN0ZWQsIGZuO1xuICB3aGlsZSAoZm4gPSBvblJlamVjdGVkLnNoaWZ0KCkpIGZuKHJlYXNvbik7XG59O1xuXG5Qcm9taXNlLnJlc29sdmUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7IHJlc29sdmUodmFsdWUpIH0pO1xufTtcblxuUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkgeyByZWplY3QocmVhc29uKSB9KTtcbn07XG5cblByb21pc2UuYWxsID0gZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBsaXN0ID0gW10sIG4gPSBwcm9taXNlcy5sZW5ndGgsIGk7XG5cbiAgICBpZiAobiA9PT0gMCkgcmV0dXJuIHJlc29sdmUobGlzdCk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgaSsrKSAoZnVuY3Rpb24ocHJvbWlzZSwgaSkge1xuICAgICAgUHJvbWlzZS5yZXNvbHZlKHByb21pc2UpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgbGlzdFtpXSA9IHZhbHVlO1xuICAgICAgICBpZiAoLS1uID09PSAwKSByZXNvbHZlKGxpc3QpO1xuICAgICAgfSwgcmVqZWN0KTtcbiAgICB9KShwcm9taXNlc1tpXSwgaSk7XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yYWNlID0gZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gcHJvbWlzZXMubGVuZ3RoOyBpIDwgbjsgaSsrKVxuICAgICAgUHJvbWlzZS5yZXNvbHZlKHByb21pc2VzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gIH0pO1xufTtcblxuUHJvbWlzZS5kZWZlcnJlZCA9IFByb21pc2UucGVuZGluZyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdHVwbGUgPSB7fTtcblxuICB0dXBsZS5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdHVwbGUucmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgdHVwbGUucmVqZWN0ICA9IHJlamVjdDtcbiAgfSk7XG4gIHJldHVybiB0dXBsZTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIENsYXNzID0gcmVxdWlyZSgnLi9jbGFzcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENsYXNzKHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5faW5kZXggPSB7fTtcbiAgfSxcblxuICBhZGQ6IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB2YXIga2V5ID0gKGl0ZW0uaWQgIT09IHVuZGVmaW5lZCkgPyBpdGVtLmlkIDogaXRlbTtcbiAgICBpZiAodGhpcy5faW5kZXguaGFzT3duUHJvcGVydHkoa2V5KSkgcmV0dXJuIGZhbHNlO1xuICAgIHRoaXMuX2luZGV4W2tleV0gPSBpdGVtO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIGZvckVhY2g6IGZ1bmN0aW9uKGJsb2NrLCBjb250ZXh0KSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuX2luZGV4KSB7XG4gICAgICBpZiAodGhpcy5faW5kZXguaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgYmxvY2suY2FsbChjb250ZXh0LCB0aGlzLl9pbmRleFtrZXldKTtcbiAgICB9XG4gIH0sXG5cbiAgaXNFbXB0eTogZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuX2luZGV4KSB7XG4gICAgICBpZiAodGhpcy5faW5kZXguaGFzT3duUHJvcGVydHkoa2V5KSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcblxuICBtZW1iZXI6IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5faW5kZXgpIHtcbiAgICAgIGlmICh0aGlzLl9pbmRleFtrZXldID09PSBpdGVtKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24oaXRlbSkge1xuICAgIHZhciBrZXkgPSAoaXRlbS5pZCAhPT0gdW5kZWZpbmVkKSA/IGl0ZW0uaWQgOiBpdGVtO1xuICAgIHZhciByZW1vdmVkID0gdGhpcy5faW5kZXhba2V5XTtcbiAgICBkZWxldGUgdGhpcy5faW5kZXhba2V5XTtcbiAgICByZXR1cm4gcmVtb3ZlZDtcbiAgfSxcblxuICB0b0FycmF5OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgeyBhcnJheS5wdXNoKGl0ZW0pIH0pO1xuICAgIHJldHVybiBhcnJheTtcbiAgfVxufSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIGh0dHA6Ly9hc3NhbmthLm5ldC9jb250ZW50L3RlY2gvMjAwOS8wOS8wMi9qc29uMi1qcy12cy1wcm90b3R5cGUvXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmplY3QsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gKHRoaXNba2V5XSBpbnN0YW5jZW9mIEFycmF5KSA/IHRoaXNba2V5XSA6IHZhbHVlO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc1VSSTogZnVuY3Rpb24odXJpKSB7XG4gICAgcmV0dXJuIHVyaSAmJiB1cmkucHJvdG9jb2wgJiYgdXJpLmhvc3QgJiYgdXJpLnBhdGg7XG4gIH0sXG5cbiAgaXNTYW1lT3JpZ2luOiBmdW5jdGlvbih1cmkpIHtcbiAgICByZXR1cm4gdXJpLnByb3RvY29sID09PSBsb2NhdGlvbi5wcm90b2NvbCAmJlxuICAgICAgICAgICB1cmkuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lICYmXG4gICAgICAgICAgIHVyaS5wb3J0ICAgICA9PT0gbG9jYXRpb24ucG9ydDtcbiAgfSxcblxuICBwYXJzZTogZnVuY3Rpb24odXJsKSB7XG4gICAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSByZXR1cm4gdXJsO1xuICAgIHZhciB1cmkgPSB7fSwgcGFydHMsIHF1ZXJ5LCBwYWlycywgaSwgbiwgZGF0YTtcblxuICAgIHZhciBjb25zdW1lID0gZnVuY3Rpb24obmFtZSwgcGF0dGVybikge1xuICAgICAgdXJsID0gdXJsLnJlcGxhY2UocGF0dGVybiwgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgICAgdXJpW25hbWVdID0gbWF0Y2g7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH0pO1xuICAgICAgdXJpW25hbWVdID0gdXJpW25hbWVdIHx8ICcnO1xuICAgIH07XG5cbiAgICBjb25zdW1lKCdwcm90b2NvbCcsIC9eW2Etel0rXFw6L2kpO1xuICAgIGNvbnN1bWUoJ2hvc3QnLCAgICAgL15cXC9cXC9bXlxcL1xcPyNdKy8pO1xuXG4gICAgaWYgKCEvXlxcLy8udGVzdCh1cmwpICYmICF1cmkuaG9zdClcbiAgICAgIHVybCA9IGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1teXFwvXSokLywgJycpICsgdXJsO1xuXG4gICAgY29uc3VtZSgncGF0aG5hbWUnLCAvXlteXFw/I10qLyk7XG4gICAgY29uc3VtZSgnc2VhcmNoJywgICAvXlxcP1teI10qLyk7XG4gICAgY29uc3VtZSgnaGFzaCcsICAgICAvXiMuKi8pO1xuXG4gICAgdXJpLnByb3RvY29sID0gdXJpLnByb3RvY29sIHx8IGxvY2F0aW9uLnByb3RvY29sO1xuXG4gICAgaWYgKHVyaS5ob3N0KSB7XG4gICAgICB1cmkuaG9zdCAgICAgPSB1cmkuaG9zdC5zdWJzdHIoMik7XG4gICAgICBwYXJ0cyAgICAgICAgPSB1cmkuaG9zdC5zcGxpdCgnOicpO1xuICAgICAgdXJpLmhvc3RuYW1lID0gcGFydHNbMF07XG4gICAgICB1cmkucG9ydCAgICAgPSBwYXJ0c1sxXSB8fCAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgdXJpLmhvc3QgICAgID0gbG9jYXRpb24uaG9zdDtcbiAgICAgIHVyaS5ob3N0bmFtZSA9IGxvY2F0aW9uLmhvc3RuYW1lO1xuICAgICAgdXJpLnBvcnQgICAgID0gbG9jYXRpb24ucG9ydDtcbiAgICB9XG5cbiAgICB1cmkucGF0aG5hbWUgPSB1cmkucGF0aG5hbWUgfHwgJy8nO1xuICAgIHVyaS5wYXRoID0gdXJpLnBhdGhuYW1lICsgdXJpLnNlYXJjaDtcblxuICAgIHF1ZXJ5ID0gdXJpLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpO1xuICAgIHBhaXJzID0gcXVlcnkgPyBxdWVyeS5zcGxpdCgnJicpIDogW107XG4gICAgZGF0YSAgPSB7fTtcblxuICAgIGZvciAoaSA9IDAsIG4gPSBwYWlycy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHBhcnRzID0gcGFpcnNbaV0uc3BsaXQoJz0nKTtcbiAgICAgIGRhdGFbZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzBdIHx8ICcnKV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFydHNbMV0gfHwgJycpO1xuICAgIH1cblxuICAgIHVyaS5xdWVyeSA9IGRhdGE7XG5cbiAgICB1cmkuaHJlZiA9IHRoaXMuc3RyaW5naWZ5KHVyaSk7XG4gICAgcmV0dXJuIHVyaTtcbiAgfSxcblxuICBzdHJpbmdpZnk6IGZ1bmN0aW9uKHVyaSkge1xuICAgIHZhciBzdHJpbmcgPSB1cmkucHJvdG9jb2wgKyAnLy8nICsgdXJpLmhvc3RuYW1lO1xuICAgIGlmICh1cmkucG9ydCkgc3RyaW5nICs9ICc6JyArIHVyaS5wb3J0O1xuICAgIHN0cmluZyArPSB1cmkucGF0aG5hbWUgKyB0aGlzLnF1ZXJ5U3RyaW5nKHVyaS5xdWVyeSkgKyAodXJpLmhhc2ggfHwgJycpO1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH0sXG5cbiAgcXVlcnlTdHJpbmc6IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgdmFyIHBhaXJzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIHF1ZXJ5KSB7XG4gICAgICBpZiAoIXF1ZXJ5Lmhhc093blByb3BlcnR5KGtleSkpIGNvbnRpbnVlO1xuICAgICAgcGFpcnMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeVtrZXldKSk7XG4gICAgfVxuICAgIGlmIChwYWlycy5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgICByZXR1cm4gJz8nICsgcGFpcnMuam9pbignJicpO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXJyYXkgPSByZXF1aXJlKCcuL2FycmF5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3B0aW9ucywgdmFsaWRLZXlzKSB7XG4gIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7XG4gICAgaWYgKGFycmF5LmluZGV4T2YodmFsaWRLZXlzLCBrZXkpIDwgMClcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5yZWNvZ25pemVkIG9wdGlvbjogJyArIGtleSk7XG4gIH1cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBXUyA9IGdsb2JhbC5Nb3pXZWJTb2NrZXQgfHwgZ2xvYmFsLldlYlNvY2tldDtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZTogZnVuY3Rpb24odXJsLCBwcm90b2NvbHMsIG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIFdTICE9PSAnZnVuY3Rpb24nKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gbmV3IFdTKHVybCk7XG4gIH1cbn07XG4iLCJleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IChtICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKCh2YWx1ZSAqIGMpIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG4iLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cbiIsIi8qIVxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlclxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cblxuLy8gVGhlIF9pc0J1ZmZlciBjaGVjayBpcyBmb3IgU2FmYXJpIDUtNyBzdXBwb3J0LCBiZWNhdXNlIGl0J3MgbWlzc2luZ1xuLy8gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiAoaXNCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSB8fCAhIW9iai5faXNCdWZmZXIpXG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyIChvYmopIHtcbiAgcmV0dXJuICEhb2JqLmNvbnN0cnVjdG9yICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iailcbn1cblxuLy8gRm9yIE5vZGUgdjAuMTAgc3VwcG9ydC4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseS5cbmZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxufVxuIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScsXG4gICAgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUlzRGVlcFByb3AgPSAvXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXFxcXXxcXFxcLikqP1xcMSlcXF0vLFxuICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLyxcbiAgICByZUxlYWRpbmdEb3QgPSAvXlxcLi8sXG4gICAgcmVQcm9wTmFtZSA9IC9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXFxcXXxcXFxcLikqPylcXDIpXFxdfCg/PSg/OlxcLnxcXFtcXF0pKD86XFwufFxcW1xcXXwkKSkvZztcblxuLyoqXG4gKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgXG4gKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXBhdHRlcm5zKS5cbiAqL1xudmFyIHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggYmFja3NsYXNoZXMgaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVFc2NhcGVDaGFyID0gL1xcXFwoXFxcXCk/L2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpKS4gKi9cbnZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldFZhbHVlKG9iamVjdCwga2V5KSB7XG4gIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QgaW4gSUUgPCA5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNIb3N0T2JqZWN0KHZhbHVlKSB7XG4gIC8vIE1hbnkgaG9zdCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIHRoYXQgY2FuIGNvZXJjZSB0byBzdHJpbmdzXG4gIC8vIGRlc3BpdGUgaGF2aW5nIGltcHJvcGVybHkgZGVmaW5lZCBgdG9TdHJpbmdgIG1ldGhvZHMuXG4gIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gISEodmFsdWUgKyAnJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSxcbiAgICBmdW5jUHJvdG8gPSBGdW5jdGlvbi5wcm90b3R5cGUsXG4gICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovXG52YXIgY29yZUpzRGF0YSA9IHJvb3RbJ19fY29yZS1qc19zaGFyZWRfXyddO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xudmFyIG1hc2tTcmNLZXkgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciB1aWQgPSAvW14uXSskLy5leGVjKGNvcmVKc0RhdGEgJiYgY29yZUpzRGF0YS5rZXlzICYmIGNvcmVKc0RhdGEua2V5cy5JRV9QUk9UTyB8fCAnJyk7XG4gIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcbn0oKSk7XG5cbi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmdW5jVG9TdHJpbmcgPSBmdW5jUHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xudmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcbiAgZnVuY1RvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UocmVSZWdFeHBDaGFyLCAnXFxcXCQmJylcbiAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4pO1xuXG4vKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cbnZhciBTeW1ib2wgPSByb290LlN5bWJvbCxcbiAgICBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyksXG4gICAgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG4vKiogVXNlZCB0byBjb252ZXJ0IHN5bWJvbHMgdG8gcHJpbWl0aXZlcyBhbmQgc3RyaW5ncy4gKi9cbnZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG4gICAgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnRvU3RyaW5nIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gSGFzaChlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgSGFzaFxuICovXG5mdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuYXRpdmVDcmVhdGUgPyBuYXRpdmVDcmVhdGUobnVsbCkgOiB7fTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtPYmplY3R9IGhhc2ggVGhlIGhhc2ggdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hEZWxldGUoa2V5KSB7XG4gIHJldHVybiB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG59XG5cbi8qKlxuICogR2V0cyB0aGUgaGFzaCB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBoYXNoR2V0KGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIGlmIChuYXRpdmVDcmVhdGUpIHtcbiAgICB2YXIgcmVzdWx0ID0gZGF0YVtrZXldO1xuICAgIHJldHVybiByZXN1bHQgPT09IEhBU0hfVU5ERUZJTkVEID8gdW5kZWZpbmVkIDogcmVzdWx0O1xuICB9XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgaGFzaCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzaEhhcyhrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICByZXR1cm4gbmF0aXZlQ3JlYXRlID8gZGF0YVtrZXldICE9PSB1bmRlZmluZWQgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgaGFzaCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGhhc2ggaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIGRhdGFba2V5XSA9IChuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgPyBIQVNIX1VOREVGSU5FRCA6IHZhbHVlO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYEhhc2hgLlxuSGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7XG5IYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBoYXNoRGVsZXRlO1xuSGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDtcbkhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7XG5IYXNoLnByb3RvdHlwZS5zZXQgPSBoYXNoU2V0O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gbGlzdCBjYWNoZSBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIExpc3RDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gW107XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcbiAgICBkYXRhLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIHNwbGljZS5jYWxsKGRhdGEsIGluZGV4LCAxKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIHJldHVybiBpbmRleCA8IDAgPyB1bmRlZmluZWQgOiBkYXRhW2luZGV4XVsxXTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGFzc29jSW5kZXhPZih0aGlzLl9fZGF0YV9fLCBrZXkpID4gLTE7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbGlzdCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgZGF0YS5wdXNoKFtrZXksIHZhbHVlXSk7XG4gIH0gZWxzZSB7XG4gICAgZGF0YVtpbmRleF1bMV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuXG5MaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG5MaXN0Q2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IGxpc3RDYWNoZURlbGV0ZTtcbkxpc3RDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbGlzdENhY2hlR2V0O1xuTGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG5MaXN0Q2FjaGUucHJvdG90eXBlLnNldCA9IGxpc3RDYWNoZVNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSB7XG4gICAgJ2hhc2gnOiBuZXcgSGFzaCxcbiAgICAnbWFwJzogbmV3IChNYXAgfHwgTGlzdENhY2hlKSxcbiAgICAnc3RyaW5nJzogbmV3IEhhc2hcbiAgfTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlRGVsZXRlKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpWydkZWxldGUnXShrZXkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG1hcCB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVHZXQoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuZ2V0KGtleSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbWFwIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuaGFzKGtleSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbWFwIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVTZXQoa2V5LCB2YWx1ZSkge1xuICBnZXRNYXBEYXRhKHRoaXMsIGtleSkuc2V0KGtleSwgdmFsdWUpO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYE1hcENhY2hlYC5cbk1hcENhY2hlLnByb3RvdHlwZS5jbGVhciA9IG1hcENhY2hlQ2xlYXI7XG5NYXBDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbWFwQ2FjaGVEZWxldGU7XG5NYXBDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbWFwQ2FjaGVHZXQ7XG5NYXBDYWNoZS5wcm90b3R5cGUuaGFzID0gbWFwQ2FjaGVIYXM7XG5NYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwQ2FjaGVTZXQ7XG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7Kn0ga2V5IFRoZSBrZXkgdG8gc2VhcmNoIGZvci5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGFzc29jSW5kZXhPZihhcnJheSwga2V5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChlcShhcnJheVtsZW5ndGhdWzBdLCBrZXkpKSB7XG4gICAgICByZXR1cm4gbGVuZ3RoO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZ2V0YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZmF1bHQgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCkge1xuICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXG4gIHZhciBpbmRleCA9IDAsXG4gICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcbiAgICBvYmplY3QgPSBvYmplY3RbdG9LZXkocGF0aFtpbmRleCsrXSldO1xuICB9XG4gIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBwYXR0ZXJuID0gKGlzRnVuY3Rpb24odmFsdWUpIHx8IGlzSG9zdE9iamVjdCh2YWx1ZSkpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3RvcjtcbiAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvU3RyaW5nYCB3aGljaCBkb2Vzbid0IGNvbnZlcnQgbnVsbGlzaFxuICogdmFsdWVzIHRvIGVtcHR5IHN0cmluZ3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICAvLyBFeGl0IGVhcmx5IGZvciBzdHJpbmdzIHRvIGF2b2lkIGEgcGVyZm9ybWFuY2UgaGl0IGluIHNvbWUgZW52aXJvbm1lbnRzLlxuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gc3ltYm9sVG9TdHJpbmcgPyBzeW1ib2xUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICB9XG4gIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG4gIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDYXN0cyBgdmFsdWVgIHRvIGEgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNhc3QgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gY2FzdFBhdGgodmFsdWUpIHtcbiAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdUb1BhdGgodmFsdWUpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGRhdGEgZm9yIGBtYXBgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hcCBkYXRhLlxuICovXG5mdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG4gIHZhciBkYXRhID0gbWFwLl9fZGF0YV9fO1xuICByZXR1cm4gaXNLZXlhYmxlKGtleSlcbiAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuICAgIDogZGF0YS5tYXA7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShvYmplY3QsIGtleSk7XG4gIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5IGtleXMgb24uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXkodmFsdWUsIG9iamVjdCkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicgfHxcbiAgICAgIHZhbHVlID09IG51bGwgfHwgaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIHJlSXNQbGFpblByb3AudGVzdCh2YWx1ZSkgfHwgIXJlSXNEZWVwUHJvcC50ZXN0KHZhbHVlKSB8fFxuICAgIChvYmplY3QgIT0gbnVsbCAmJiB2YWx1ZSBpbiBPYmplY3Qob2JqZWN0KSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHVzZSBhcyB1bmlxdWUgb2JqZWN0IGtleS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleWFibGUodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAodHlwZSA9PSAnc3RyaW5nJyB8fCB0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicpXG4gICAgPyAodmFsdWUgIT09ICdfX3Byb3RvX18nKVxuICAgIDogKHZhbHVlID09PSBudWxsKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGZ1bmNgIGlzIG1hc2tlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG4gIHJldHVybiAhIW1hc2tTcmNLZXkgJiYgKG1hc2tTcmNLZXkgaW4gZnVuYyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHN0cmluZ2AgdG8gYSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqL1xudmFyIHN0cmluZ1RvUGF0aCA9IG1lbW9pemUoZnVuY3Rpb24oc3RyaW5nKSB7XG4gIHN0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7XG5cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBpZiAocmVMZWFkaW5nRG90LnRlc3Qoc3RyaW5nKSkge1xuICAgIHJlc3VsdC5wdXNoKCcnKTtcbiAgfVxuICBzdHJpbmcucmVwbGFjZShyZVByb3BOYW1lLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3RyaW5nKSB7XG4gICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0pO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcga2V5IGlmIGl0J3Mgbm90IGEgc3RyaW5nIG9yIHN5bWJvbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtzdHJpbmd8c3ltYm9sfSBSZXR1cm5zIHRoZSBrZXkuXG4gKi9cbmZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG4gIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG4gKi9cbmZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcbiAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG1lbW9pemVzIHRoZSByZXN1bHQgb2YgYGZ1bmNgLiBJZiBgcmVzb2x2ZXJgIGlzXG4gKiBwcm92aWRlZCwgaXQgZGV0ZXJtaW5lcyB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHQgYmFzZWQgb24gdGhlXG4gKiBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLiBCeSBkZWZhdWx0LCB0aGUgZmlyc3QgYXJndW1lbnRcbiAqIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSBtYXAgY2FjaGUga2V5LiBUaGUgYGZ1bmNgXG4gKiBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogVGhlIGNhY2hlIGlzIGV4cG9zZWQgYXMgdGhlIGBjYWNoZWAgcHJvcGVydHkgb24gdGhlIG1lbW9pemVkXG4gKiBmdW5jdGlvbi4gSXRzIGNyZWF0aW9uIG1heSBiZSBjdXN0b21pemVkIGJ5IHJlcGxhY2luZyB0aGUgYF8ubWVtb2l6ZS5DYWNoZWBcbiAqIGNvbnN0cnVjdG9yIHdpdGggb25lIHdob3NlIGluc3RhbmNlcyBpbXBsZW1lbnQgdGhlXG4gKiBbYE1hcGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXByb3BlcnRpZXMtb2YtdGhlLW1hcC1wcm90b3R5cGUtb2JqZWN0KVxuICogbWV0aG9kIGludGVyZmFjZSBvZiBgZGVsZXRlYCwgYGdldGAsIGBoYXNgLCBhbmQgYHNldGAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzb2x2ZXJdIFRoZSBmdW5jdGlvbiB0byByZXNvbHZlIHRoZSBjYWNoZSBrZXkuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXplZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6IDIgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2MnOiAzLCAnZCc6IDQgfTtcbiAqXG4gKiB2YXIgdmFsdWVzID0gXy5tZW1vaXplKF8udmFsdWVzKTtcbiAqIHZhbHVlcyhvYmplY3QpO1xuICogLy8gPT4gWzEsIDJdXG4gKlxuICogdmFsdWVzKG90aGVyKTtcbiAqIC8vID0+IFszLCA0XVxuICpcbiAqIG9iamVjdC5hID0gMjtcbiAqIHZhbHVlcyhvYmplY3QpO1xuICogLy8gPT4gWzEsIDJdXG4gKlxuICogLy8gTW9kaWZ5IHRoZSByZXN1bHQgY2FjaGUuXG4gKiB2YWx1ZXMuY2FjaGUuc2V0KG9iamVjdCwgWydhJywgJ2InXSk7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsnYScsICdiJ11cbiAqXG4gKiAvLyBSZXBsYWNlIGBfLm1lbW9pemUuQ2FjaGVgLlxuICogXy5tZW1vaXplLkNhY2hlID0gV2Vha01hcDtcbiAqL1xuZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJyB8fCAocmVzb2x2ZXIgJiYgdHlwZW9mIHJlc29sdmVyICE9ICdmdW5jdGlvbicpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHZhciBtZW1vaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBrZXkgPSByZXNvbHZlciA/IHJlc29sdmVyLmFwcGx5KHRoaXMsIGFyZ3MpIDogYXJnc1swXSxcbiAgICAgICAgY2FjaGUgPSBtZW1vaXplZC5jYWNoZTtcblxuICAgIGlmIChjYWNoZS5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIGNhY2hlLmdldChrZXkpO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICBtZW1vaXplZC5jYWNoZSA9IGNhY2hlLnNldChrZXksIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgbWVtb2l6ZWQuY2FjaGUgPSBuZXcgKG1lbW9pemUuQ2FjaGUgfHwgTWFwQ2FjaGUpO1xuICByZXR1cm4gbWVtb2l6ZWQ7XG59XG5cbi8vIEFzc2lnbiBjYWNoZSB0byBgXy5tZW1vaXplYC5cbm1lbW9pemUuQ2FjaGUgPSBNYXBDYWNoZTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhXG4gKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICpcbiAqIF8uZXEob2JqZWN0LCBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoJ2EnLCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEoJ2EnLCBPYmplY3QoJ2EnKSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoTmFOLCBOYU4pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNGdW5jdGlvbihfKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gU2FmYXJpIDgtOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBhbmQgb3RoZXIgY29uc3RydWN0b3JzLlxuICB2YXIgdGFnID0gaXNPYmplY3QodmFsdWUpID8gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9TdHJpbmcobnVsbCk7XG4gKiAvLyA9PiAnJ1xuICpcbiAqIF8udG9TdHJpbmcoLTApO1xuICogLy8gPT4gJy0wJ1xuICpcbiAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcbiAqIC8vID0+ICcxLDIsMydcbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXNcbiAqIGB1bmRlZmluZWRgLCB0aGUgYGRlZmF1bHRWYWx1ZWAgaXMgcmV0dXJuZWQgaW4gaXRzIHBsYWNlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy43LjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBmb3IgYHVuZGVmaW5lZGAgcmVzb2x2ZWQgdmFsdWVzLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuICpcbiAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuICogLy8gPT4gJ2RlZmF1bHQnXG4gKi9cbmZ1bmN0aW9uIGdldChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG4gIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXQ7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBMb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBjb3JlIC1vIC4vZGlzdC9sb2Rhc2guY29yZS5qc2BcbiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanMuZm91bmRhdGlvbi8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cbjsoZnVuY3Rpb24oKSB7XG5cbiAgLyoqIFVzZWQgYXMgYSBzYWZlIHJlZmVyZW5jZSBmb3IgYHVuZGVmaW5lZGAgaW4gcHJlLUVTNSBlbnZpcm9ubWVudHMuICovXG4gIHZhciB1bmRlZmluZWQ7XG5cbiAgLyoqIFVzZWQgYXMgdGhlIHNlbWFudGljIHZlcnNpb24gbnVtYmVyLiAqL1xuICB2YXIgVkVSU0lPTiA9ICc0LjE3LjEwJztcblxuICAvKiogRXJyb3IgbWVzc2FnZSBjb25zdGFudHMuICovXG4gIHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbiAgLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgdmFsdWUgY29tcGFyaXNvbnMuICovXG4gIHZhciBDT01QQVJFX1BBUlRJQUxfRkxBRyA9IDEsXG4gICAgICBDT01QQVJFX1VOT1JERVJFRF9GTEFHID0gMjtcblxuICAvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBmdW5jdGlvbiBtZXRhZGF0YS4gKi9cbiAgdmFyIFdSQVBfQklORF9GTEFHID0gMSxcbiAgICAgIFdSQVBfUEFSVElBTF9GTEFHID0gMzI7XG5cbiAgLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG4gIHZhciBJTkZJTklUWSA9IDEgLyAwLFxuICAgICAgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbiAgLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuICB2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgICAgYXN5bmNUYWcgPSAnW29iamVjdCBBc3luY0Z1bmN0aW9uXScsXG4gICAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyxcbiAgICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgICBwcm94eVRhZyA9ICdbb2JqZWN0IFByb3h5XScsXG4gICAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXG4gIC8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycy4gKi9cbiAgdmFyIHJlVW5lc2NhcGVkSHRtbCA9IC9bJjw+XCInXS9nLFxuICAgICAgcmVIYXNVbmVzY2FwZWRIdG1sID0gUmVnRXhwKHJlVW5lc2NhcGVkSHRtbC5zb3VyY2UpO1xuXG4gIC8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbiAgdmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuICAvKiogVXNlZCB0byBtYXAgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLiAqL1xuICB2YXIgaHRtbEVzY2FwZXMgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiMzOTsnXG4gIH07XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbiAgdmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4gIC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG4gIHZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4gIC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xuICB2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuICAvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGV4cG9ydHNgLiAqL1xuICB2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cbiAgLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBtb2R1bGVgLiAqL1xuICB2YXIgZnJlZU1vZHVsZSA9IGZyZWVFeHBvcnRzICYmIHR5cGVvZiBtb2R1bGUgPT0gJ29iamVjdCcgJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBBcHBlbmRzIHRoZSBlbGVtZW50cyBvZiBgdmFsdWVzYCB0byBgYXJyYXlgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBhcHBlbmQuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgKi9cbiAgZnVuY3Rpb24gYXJyYXlQdXNoKGFycmF5LCB2YWx1ZXMpIHtcbiAgICBhcnJheS5wdXNoLmFwcGx5KGFycmF5LCB2YWx1ZXMpO1xuICAgIHJldHVybiBhcnJheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maW5kSW5kZXhgIGFuZCBgXy5maW5kTGFzdEluZGV4YCB3aXRob3V0XG4gICAqIHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgsIGZyb21SaWdodCkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICAgIGluZGV4ID0gZnJvbUluZGV4ICsgKGZyb21SaWdodCA/IDEgOiAtMSk7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlPZmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVByb3BlcnR5T2Yob2JqZWN0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5yZWR1Y2VgIGFuZCBgXy5yZWR1Y2VSaWdodGAsIHdpdGhvdXQgc3VwcG9ydFxuICAgKiBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcywgd2hpY2ggaXRlcmF0ZXMgb3ZlciBgY29sbGVjdGlvbmAgdXNpbmcgYGVhY2hGdW5jYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0geyp9IGFjY3VtdWxhdG9yIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluaXRBY2N1bSBTcGVjaWZ5IHVzaW5nIHRoZSBmaXJzdCBvciBsYXN0IGVsZW1lbnQgb2ZcbiAgICogIGBjb2xsZWN0aW9uYCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBgY29sbGVjdGlvbmAuXG4gICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VSZWR1Y2UoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yLCBpbml0QWNjdW0sIGVhY2hGdW5jKSB7XG4gICAgZWFjaEZ1bmMoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgICBhY2N1bXVsYXRvciA9IGluaXRBY2N1bVxuICAgICAgICA/IChpbml0QWNjdW0gPSBmYWxzZSwgdmFsdWUpXG4gICAgICAgIDogaXRlcmF0ZWUoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnZhbHVlc2AgYW5kIGBfLnZhbHVlc0luYCB3aGljaCBjcmVhdGVzIGFuXG4gICAqIGFycmF5IG9mIGBvYmplY3RgIHByb3BlcnR5IHZhbHVlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm9wZXJ0eSBuYW1lc1xuICAgKiBvZiBgcHJvcHNgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBnZXQgdmFsdWVzIGZvci5cbiAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVZhbHVlcyhvYmplY3QsIHByb3BzKSB7XG4gICAgcmV0dXJuIGJhc2VNYXAocHJvcHMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9iamVjdFtrZXldO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgYF8uZXNjYXBlYCB0byBjb252ZXJ0IGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAgICovXG4gIHZhciBlc2NhcGVIdG1sQ2hhciA9IGJhc2VQcm9wZXJ0eU9mKGh0bWxFc2NhcGVzKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuICAgIH07XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG4gIHZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLFxuICAgICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4gIC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuICB2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuICAvKiogVXNlZCB0byBnZW5lcmF0ZSB1bmlxdWUgSURzLiAqL1xuICB2YXIgaWRDb3VudGVyID0gMDtcblxuICAvKipcbiAgICogVXNlZCB0byByZXNvbHZlIHRoZVxuICAgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAgICogb2YgdmFsdWVzLlxuICAgKi9cbiAgdmFyIG5hdGl2ZU9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbiAgLyoqIFVzZWQgdG8gcmVzdG9yZSB0aGUgb3JpZ2luYWwgYF9gIHJlZmVyZW5jZSBpbiBgXy5ub0NvbmZsaWN0YC4gKi9cbiAgdmFyIG9sZERhc2ggPSByb290Ll87XG5cbiAgLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG4gIHZhciBvYmplY3RDcmVhdGUgPSBPYmplY3QuY3JlYXRlLFxuICAgICAgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuICAvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG4gIHZhciBuYXRpdmVJc0Zpbml0ZSA9IHJvb3QuaXNGaW5pdGUsXG4gICAgICBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KSxcbiAgICAgIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIG9iamVjdCB3aGljaCB3cmFwcyBgdmFsdWVgIHRvIGVuYWJsZSBpbXBsaWNpdCBtZXRob2RcbiAgICogY2hhaW4gc2VxdWVuY2VzLiBNZXRob2RzIHRoYXQgb3BlcmF0ZSBvbiBhbmQgcmV0dXJuIGFycmF5cywgY29sbGVjdGlvbnMsXG4gICAqIGFuZCBmdW5jdGlvbnMgY2FuIGJlIGNoYWluZWQgdG9nZXRoZXIuIE1ldGhvZHMgdGhhdCByZXRyaWV2ZSBhIHNpbmdsZSB2YWx1ZVxuICAgKiBvciBtYXkgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlIHdpbGwgYXV0b21hdGljYWxseSBlbmQgdGhlIGNoYWluIHNlcXVlbmNlXG4gICAqIGFuZCByZXR1cm4gdGhlIHVud3JhcHBlZCB2YWx1ZS4gT3RoZXJ3aXNlLCB0aGUgdmFsdWUgbXVzdCBiZSB1bndyYXBwZWRcbiAgICogd2l0aCBgXyN2YWx1ZWAuXG4gICAqXG4gICAqIEV4cGxpY2l0IGNoYWluIHNlcXVlbmNlcywgd2hpY2ggbXVzdCBiZSB1bndyYXBwZWQgd2l0aCBgXyN2YWx1ZWAsIG1heSBiZVxuICAgKiBlbmFibGVkIHVzaW5nIGBfLmNoYWluYC5cbiAgICpcbiAgICogVGhlIGV4ZWN1dGlvbiBvZiBjaGFpbmVkIG1ldGhvZHMgaXMgbGF6eSwgdGhhdCBpcywgaXQncyBkZWZlcnJlZCB1bnRpbFxuICAgKiBgXyN2YWx1ZWAgaXMgaW1wbGljaXRseSBvciBleHBsaWNpdGx5IGNhbGxlZC5cbiAgICpcbiAgICogTGF6eSBldmFsdWF0aW9uIGFsbG93cyBzZXZlcmFsIG1ldGhvZHMgdG8gc3VwcG9ydCBzaG9ydGN1dCBmdXNpb24uXG4gICAqIFNob3J0Y3V0IGZ1c2lvbiBpcyBhbiBvcHRpbWl6YXRpb24gdG8gbWVyZ2UgaXRlcmF0ZWUgY2FsbHM7IHRoaXMgYXZvaWRzXG4gICAqIHRoZSBjcmVhdGlvbiBvZiBpbnRlcm1lZGlhdGUgYXJyYXlzIGFuZCBjYW4gZ3JlYXRseSByZWR1Y2UgdGhlIG51bWJlciBvZlxuICAgKiBpdGVyYXRlZSBleGVjdXRpb25zLiBTZWN0aW9ucyBvZiBhIGNoYWluIHNlcXVlbmNlIHF1YWxpZnkgZm9yIHNob3J0Y3V0XG4gICAqIGZ1c2lvbiBpZiB0aGUgc2VjdGlvbiBpcyBhcHBsaWVkIHRvIGFuIGFycmF5IGFuZCBpdGVyYXRlZXMgYWNjZXB0IG9ubHlcbiAgICogb25lIGFyZ3VtZW50LiBUaGUgaGV1cmlzdGljIGZvciB3aGV0aGVyIGEgc2VjdGlvbiBxdWFsaWZpZXMgZm9yIHNob3J0Y3V0XG4gICAqIGZ1c2lvbiBpcyBzdWJqZWN0IHRvIGNoYW5nZS5cbiAgICpcbiAgICogQ2hhaW5pbmcgaXMgc3VwcG9ydGVkIGluIGN1c3RvbSBidWlsZHMgYXMgbG9uZyBhcyB0aGUgYF8jdmFsdWVgIG1ldGhvZCBpc1xuICAgKiBkaXJlY3RseSBvciBpbmRpcmVjdGx5IGluY2x1ZGVkIGluIHRoZSBidWlsZC5cbiAgICpcbiAgICogSW4gYWRkaXRpb24gdG8gbG9kYXNoIG1ldGhvZHMsIHdyYXBwZXJzIGhhdmUgYEFycmF5YCBhbmQgYFN0cmluZ2AgbWV0aG9kcy5cbiAgICpcbiAgICogVGhlIHdyYXBwZXIgYEFycmF5YCBtZXRob2RzIGFyZTpcbiAgICogYGNvbmNhdGAsIGBqb2luYCwgYHBvcGAsIGBwdXNoYCwgYHNoaWZ0YCwgYHNvcnRgLCBgc3BsaWNlYCwgYW5kIGB1bnNoaWZ0YFxuICAgKlxuICAgKiBUaGUgd3JhcHBlciBgU3RyaW5nYCBtZXRob2RzIGFyZTpcbiAgICogYHJlcGxhY2VgIGFuZCBgc3BsaXRgXG4gICAqXG4gICAqIFRoZSB3cmFwcGVyIG1ldGhvZHMgdGhhdCBzdXBwb3J0IHNob3J0Y3V0IGZ1c2lvbiBhcmU6XG4gICAqIGBhdGAsIGBjb21wYWN0YCwgYGRyb3BgLCBgZHJvcFJpZ2h0YCwgYGRyb3BXaGlsZWAsIGBmaWx0ZXJgLCBgZmluZGAsXG4gICAqIGBmaW5kTGFzdGAsIGBoZWFkYCwgYGluaXRpYWxgLCBgbGFzdGAsIGBtYXBgLCBgcmVqZWN0YCwgYHJldmVyc2VgLCBgc2xpY2VgLFxuICAgKiBgdGFpbGAsIGB0YWtlYCwgYHRha2VSaWdodGAsIGB0YWtlUmlnaHRXaGlsZWAsIGB0YWtlV2hpbGVgLCBhbmQgYHRvQXJyYXlgXG4gICAqXG4gICAqIFRoZSBjaGFpbmFibGUgd3JhcHBlciBtZXRob2RzIGFyZTpcbiAgICogYGFmdGVyYCwgYGFyeWAsIGBhc3NpZ25gLCBgYXNzaWduSW5gLCBgYXNzaWduSW5XaXRoYCwgYGFzc2lnbldpdGhgLCBgYXRgLFxuICAgKiBgYmVmb3JlYCwgYGJpbmRgLCBgYmluZEFsbGAsIGBiaW5kS2V5YCwgYGNhc3RBcnJheWAsIGBjaGFpbmAsIGBjaHVua2AsXG4gICAqIGBjb21taXRgLCBgY29tcGFjdGAsIGBjb25jYXRgLCBgY29uZm9ybXNgLCBgY29uc3RhbnRgLCBgY291bnRCeWAsIGBjcmVhdGVgLFxuICAgKiBgY3VycnlgLCBgZGVib3VuY2VgLCBgZGVmYXVsdHNgLCBgZGVmYXVsdHNEZWVwYCwgYGRlZmVyYCwgYGRlbGF5YCxcbiAgICogYGRpZmZlcmVuY2VgLCBgZGlmZmVyZW5jZUJ5YCwgYGRpZmZlcmVuY2VXaXRoYCwgYGRyb3BgLCBgZHJvcFJpZ2h0YCxcbiAgICogYGRyb3BSaWdodFdoaWxlYCwgYGRyb3BXaGlsZWAsIGBleHRlbmRgLCBgZXh0ZW5kV2l0aGAsIGBmaWxsYCwgYGZpbHRlcmAsXG4gICAqIGBmbGF0TWFwYCwgYGZsYXRNYXBEZWVwYCwgYGZsYXRNYXBEZXB0aGAsIGBmbGF0dGVuYCwgYGZsYXR0ZW5EZWVwYCxcbiAgICogYGZsYXR0ZW5EZXB0aGAsIGBmbGlwYCwgYGZsb3dgLCBgZmxvd1JpZ2h0YCwgYGZyb21QYWlyc2AsIGBmdW5jdGlvbnNgLFxuICAgKiBgZnVuY3Rpb25zSW5gLCBgZ3JvdXBCeWAsIGBpbml0aWFsYCwgYGludGVyc2VjdGlvbmAsIGBpbnRlcnNlY3Rpb25CeWAsXG4gICAqIGBpbnRlcnNlY3Rpb25XaXRoYCwgYGludmVydGAsIGBpbnZlcnRCeWAsIGBpbnZva2VNYXBgLCBgaXRlcmF0ZWVgLCBga2V5QnlgLFxuICAgKiBga2V5c2AsIGBrZXlzSW5gLCBgbWFwYCwgYG1hcEtleXNgLCBgbWFwVmFsdWVzYCwgYG1hdGNoZXNgLCBgbWF0Y2hlc1Byb3BlcnR5YCxcbiAgICogYG1lbW9pemVgLCBgbWVyZ2VgLCBgbWVyZ2VXaXRoYCwgYG1ldGhvZGAsIGBtZXRob2RPZmAsIGBtaXhpbmAsIGBuZWdhdGVgLFxuICAgKiBgbnRoQXJnYCwgYG9taXRgLCBgb21pdEJ5YCwgYG9uY2VgLCBgb3JkZXJCeWAsIGBvdmVyYCwgYG92ZXJBcmdzYCxcbiAgICogYG92ZXJFdmVyeWAsIGBvdmVyU29tZWAsIGBwYXJ0aWFsYCwgYHBhcnRpYWxSaWdodGAsIGBwYXJ0aXRpb25gLCBgcGlja2AsXG4gICAqIGBwaWNrQnlgLCBgcGxhbnRgLCBgcHJvcGVydHlgLCBgcHJvcGVydHlPZmAsIGBwdWxsYCwgYHB1bGxBbGxgLCBgcHVsbEFsbEJ5YCxcbiAgICogYHB1bGxBbGxXaXRoYCwgYHB1bGxBdGAsIGBwdXNoYCwgYHJhbmdlYCwgYHJhbmdlUmlnaHRgLCBgcmVhcmdgLCBgcmVqZWN0YCxcbiAgICogYHJlbW92ZWAsIGByZXN0YCwgYHJldmVyc2VgLCBgc2FtcGxlU2l6ZWAsIGBzZXRgLCBgc2V0V2l0aGAsIGBzaHVmZmxlYCxcbiAgICogYHNsaWNlYCwgYHNvcnRgLCBgc29ydEJ5YCwgYHNwbGljZWAsIGBzcHJlYWRgLCBgdGFpbGAsIGB0YWtlYCwgYHRha2VSaWdodGAsXG4gICAqIGB0YWtlUmlnaHRXaGlsZWAsIGB0YWtlV2hpbGVgLCBgdGFwYCwgYHRocm90dGxlYCwgYHRocnVgLCBgdG9BcnJheWAsXG4gICAqIGB0b1BhaXJzYCwgYHRvUGFpcnNJbmAsIGB0b1BhdGhgLCBgdG9QbGFpbk9iamVjdGAsIGB0cmFuc2Zvcm1gLCBgdW5hcnlgLFxuICAgKiBgdW5pb25gLCBgdW5pb25CeWAsIGB1bmlvbldpdGhgLCBgdW5pcWAsIGB1bmlxQnlgLCBgdW5pcVdpdGhgLCBgdW5zZXRgLFxuICAgKiBgdW5zaGlmdGAsIGB1bnppcGAsIGB1bnppcFdpdGhgLCBgdXBkYXRlYCwgYHVwZGF0ZVdpdGhgLCBgdmFsdWVzYCxcbiAgICogYHZhbHVlc0luYCwgYHdpdGhvdXRgLCBgd3JhcGAsIGB4b3JgLCBgeG9yQnlgLCBgeG9yV2l0aGAsIGB6aXBgLFxuICAgKiBgemlwT2JqZWN0YCwgYHppcE9iamVjdERlZXBgLCBhbmQgYHppcFdpdGhgXG4gICAqXG4gICAqIFRoZSB3cmFwcGVyIG1ldGhvZHMgdGhhdCBhcmUgKipub3QqKiBjaGFpbmFibGUgYnkgZGVmYXVsdCBhcmU6XG4gICAqIGBhZGRgLCBgYXR0ZW1wdGAsIGBjYW1lbENhc2VgLCBgY2FwaXRhbGl6ZWAsIGBjZWlsYCwgYGNsYW1wYCwgYGNsb25lYCxcbiAgICogYGNsb25lRGVlcGAsIGBjbG9uZURlZXBXaXRoYCwgYGNsb25lV2l0aGAsIGBjb25mb3Jtc1RvYCwgYGRlYnVycmAsXG4gICAqIGBkZWZhdWx0VG9gLCBgZGl2aWRlYCwgYGVhY2hgLCBgZWFjaFJpZ2h0YCwgYGVuZHNXaXRoYCwgYGVxYCwgYGVzY2FwZWAsXG4gICAqIGBlc2NhcGVSZWdFeHBgLCBgZXZlcnlgLCBgZmluZGAsIGBmaW5kSW5kZXhgLCBgZmluZEtleWAsIGBmaW5kTGFzdGAsXG4gICAqIGBmaW5kTGFzdEluZGV4YCwgYGZpbmRMYXN0S2V5YCwgYGZpcnN0YCwgYGZsb29yYCwgYGZvckVhY2hgLCBgZm9yRWFjaFJpZ2h0YCxcbiAgICogYGZvckluYCwgYGZvckluUmlnaHRgLCBgZm9yT3duYCwgYGZvck93blJpZ2h0YCwgYGdldGAsIGBndGAsIGBndGVgLCBgaGFzYCxcbiAgICogYGhhc0luYCwgYGhlYWRgLCBgaWRlbnRpdHlgLCBgaW5jbHVkZXNgLCBgaW5kZXhPZmAsIGBpblJhbmdlYCwgYGludm9rZWAsXG4gICAqIGBpc0FyZ3VtZW50c2AsIGBpc0FycmF5YCwgYGlzQXJyYXlCdWZmZXJgLCBgaXNBcnJheUxpa2VgLCBgaXNBcnJheUxpa2VPYmplY3RgLFxuICAgKiBgaXNCb29sZWFuYCwgYGlzQnVmZmVyYCwgYGlzRGF0ZWAsIGBpc0VsZW1lbnRgLCBgaXNFbXB0eWAsIGBpc0VxdWFsYCxcbiAgICogYGlzRXF1YWxXaXRoYCwgYGlzRXJyb3JgLCBgaXNGaW5pdGVgLCBgaXNGdW5jdGlvbmAsIGBpc0ludGVnZXJgLCBgaXNMZW5ndGhgLFxuICAgKiBgaXNNYXBgLCBgaXNNYXRjaGAsIGBpc01hdGNoV2l0aGAsIGBpc05hTmAsIGBpc05hdGl2ZWAsIGBpc05pbGAsIGBpc051bGxgLFxuICAgKiBgaXNOdW1iZXJgLCBgaXNPYmplY3RgLCBgaXNPYmplY3RMaWtlYCwgYGlzUGxhaW5PYmplY3RgLCBgaXNSZWdFeHBgLFxuICAgKiBgaXNTYWZlSW50ZWdlcmAsIGBpc1NldGAsIGBpc1N0cmluZ2AsIGBpc1VuZGVmaW5lZGAsIGBpc1R5cGVkQXJyYXlgLFxuICAgKiBgaXNXZWFrTWFwYCwgYGlzV2Vha1NldGAsIGBqb2luYCwgYGtlYmFiQ2FzZWAsIGBsYXN0YCwgYGxhc3RJbmRleE9mYCxcbiAgICogYGxvd2VyQ2FzZWAsIGBsb3dlckZpcnN0YCwgYGx0YCwgYGx0ZWAsIGBtYXhgLCBgbWF4QnlgLCBgbWVhbmAsIGBtZWFuQnlgLFxuICAgKiBgbWluYCwgYG1pbkJ5YCwgYG11bHRpcGx5YCwgYG5vQ29uZmxpY3RgLCBgbm9vcGAsIGBub3dgLCBgbnRoYCwgYHBhZGAsXG4gICAqIGBwYWRFbmRgLCBgcGFkU3RhcnRgLCBgcGFyc2VJbnRgLCBgcG9wYCwgYHJhbmRvbWAsIGByZWR1Y2VgLCBgcmVkdWNlUmlnaHRgLFxuICAgKiBgcmVwZWF0YCwgYHJlc3VsdGAsIGByb3VuZGAsIGBydW5JbkNvbnRleHRgLCBgc2FtcGxlYCwgYHNoaWZ0YCwgYHNpemVgLFxuICAgKiBgc25ha2VDYXNlYCwgYHNvbWVgLCBgc29ydGVkSW5kZXhgLCBgc29ydGVkSW5kZXhCeWAsIGBzb3J0ZWRMYXN0SW5kZXhgLFxuICAgKiBgc29ydGVkTGFzdEluZGV4QnlgLCBgc3RhcnRDYXNlYCwgYHN0YXJ0c1dpdGhgLCBgc3R1YkFycmF5YCwgYHN0dWJGYWxzZWAsXG4gICAqIGBzdHViT2JqZWN0YCwgYHN0dWJTdHJpbmdgLCBgc3R1YlRydWVgLCBgc3VidHJhY3RgLCBgc3VtYCwgYHN1bUJ5YCxcbiAgICogYHRlbXBsYXRlYCwgYHRpbWVzYCwgYHRvRmluaXRlYCwgYHRvSW50ZWdlcmAsIGB0b0pTT05gLCBgdG9MZW5ndGhgLFxuICAgKiBgdG9Mb3dlcmAsIGB0b051bWJlcmAsIGB0b1NhZmVJbnRlZ2VyYCwgYHRvU3RyaW5nYCwgYHRvVXBwZXJgLCBgdHJpbWAsXG4gICAqIGB0cmltRW5kYCwgYHRyaW1TdGFydGAsIGB0cnVuY2F0ZWAsIGB1bmVzY2FwZWAsIGB1bmlxdWVJZGAsIGB1cHBlckNhc2VgLFxuICAgKiBgdXBwZXJGaXJzdGAsIGB2YWx1ZWAsIGFuZCBgd29yZHNgXG4gICAqXG4gICAqIEBuYW1lIF9cbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBjYXRlZ29yeSBTZXFcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gd3JhcCBpbiBhIGBsb2Rhc2hgIGluc3RhbmNlLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgYGxvZGFzaGAgd3JhcHBlciBpbnN0YW5jZS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogZnVuY3Rpb24gc3F1YXJlKG4pIHtcbiAgICogICByZXR1cm4gbiAqIG47XG4gICAqIH1cbiAgICpcbiAgICogdmFyIHdyYXBwZWQgPSBfKFsxLCAyLCAzXSk7XG4gICAqXG4gICAqIC8vIFJldHVybnMgYW4gdW53cmFwcGVkIHZhbHVlLlxuICAgKiB3cmFwcGVkLnJlZHVjZShfLmFkZCk7XG4gICAqIC8vID0+IDZcbiAgICpcbiAgICogLy8gUmV0dXJucyBhIHdyYXBwZWQgdmFsdWUuXG4gICAqIHZhciBzcXVhcmVzID0gd3JhcHBlZC5tYXAoc3F1YXJlKTtcbiAgICpcbiAgICogXy5pc0FycmF5KHNxdWFyZXMpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBfLmlzQXJyYXkoc3F1YXJlcy52YWx1ZSgpKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKi9cbiAgZnVuY3Rpb24gbG9kYXNoKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgTG9kYXNoV3JhcHBlclxuICAgICAgPyB2YWx1ZVxuICAgICAgOiBuZXcgTG9kYXNoV3JhcHBlcih2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFzc2lnbmluZ1xuICAgKiBwcm9wZXJ0aWVzIHRvIHRoZSBjcmVhdGVkIG9iamVjdC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgKi9cbiAgdmFyIGJhc2VDcmVhdGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gb2JqZWN0KCkge31cbiAgICByZXR1cm4gZnVuY3Rpb24ocHJvdG8pIHtcbiAgICAgIGlmICghaXNPYmplY3QocHJvdG8pKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChvYmplY3RDcmVhdGUpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdENyZWF0ZShwcm90byk7XG4gICAgICB9XG4gICAgICBvYmplY3QucHJvdG90eXBlID0gcHJvdG87XG4gICAgICB2YXIgcmVzdWx0ID0gbmV3IG9iamVjdDtcbiAgICAgIG9iamVjdC5wcm90b3R5cGUgPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH0oKSk7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGNvbnN0cnVjdG9yIGZvciBjcmVhdGluZyBgbG9kYXNoYCB3cmFwcGVyIG9iamVjdHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NoYWluQWxsXSBFbmFibGUgZXhwbGljaXQgbWV0aG9kIGNoYWluIHNlcXVlbmNlcy5cbiAgICovXG4gIGZ1bmN0aW9uIExvZGFzaFdyYXBwZXIodmFsdWUsIGNoYWluQWxsKSB7XG4gICAgdGhpcy5fX3dyYXBwZWRfXyA9IHZhbHVlO1xuICAgIHRoaXMuX19hY3Rpb25zX18gPSBbXTtcbiAgICB0aGlzLl9fY2hhaW5fXyA9ICEhY2hhaW5BbGw7XG4gIH1cblxuICBMb2Rhc2hXcmFwcGVyLnByb3RvdHlwZSA9IGJhc2VDcmVhdGUobG9kYXNoLnByb3RvdHlwZSk7XG4gIExvZGFzaFdyYXBwZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTG9kYXNoV3JhcHBlcjtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIEFzc2lnbnMgYHZhbHVlYCB0byBga2V5YCBvZiBgb2JqZWN0YCBpZiB0aGUgZXhpc3RpbmcgdmFsdWUgaXMgbm90IGVxdWl2YWxlbnRcbiAgICogdXNpbmcgW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gbW9kaWZ5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGFzc2lnbi5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gYXNzaWduLlxuICAgKi9cbiAgZnVuY3Rpb24gYXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV07XG4gICAgaWYgKCEoaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkgJiYgZXEob2JqVmFsdWUsIHZhbHVlKSkgfHxcbiAgICAgICAgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkpIHtcbiAgICAgIGJhc2VBc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgYXNzaWduVmFsdWVgIGFuZCBgYXNzaWduTWVyZ2VWYWx1ZWAgd2l0aG91dFxuICAgKiB2YWx1ZSBjaGVja3MuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBtb2RpZnkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gYXNzaWduLlxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBhc3NpZ24uXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlQXNzaWduVmFsdWUob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gICAgb2JqZWN0W2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kZWxheWAgYW5kIGBfLmRlZmVyYCB3aGljaCBhY2NlcHRzIGBhcmdzYFxuICAgKiB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVsYXkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGludm9jYXRpb24uXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAgICogQHJldHVybnMge251bWJlcnxPYmplY3R9IFJldHVybnMgdGhlIHRpbWVyIGlkIG9yIHRpbWVvdXQgb2JqZWN0LlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZURlbGF5KGZ1bmMsIHdhaXQsIGFyZ3MpIHtcbiAgICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICAgIH1cbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpOyB9LCB3YWl0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JFYWNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHJldHVybnMge0FycmF5fE9iamVjdH0gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gICAqL1xuICB2YXIgYmFzZUVhY2ggPSBjcmVhdGVCYXNlRWFjaChiYXNlRm9yT3duKTtcblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZXZlcnlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBwYXNzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gICAqICBlbHNlIGBmYWxzZWBcbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VFdmVyeShjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIHJlc3VsdCA9ICEhcHJlZGljYXRlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgbWV0aG9kcyBsaWtlIGBfLm1heGAgYW5kIGBfLm1pbmAgd2hpY2ggYWNjZXB0cyBhXG4gICAqIGBjb21wYXJhdG9yYCB0byBkZXRlcm1pbmUgdGhlIGV4dHJlbXVtIHZhbHVlLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgaXRlcmF0ZWUgaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJhdG9yIFRoZSBjb21wYXJhdG9yIHVzZWQgdG8gY29tcGFyZSB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBleHRyZW11bSB2YWx1ZS5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VFeHRyZW11bShhcnJheSwgaXRlcmF0ZWUsIGNvbXBhcmF0b3IpIHtcbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgICBjdXJyZW50ID0gaXRlcmF0ZWUodmFsdWUpO1xuXG4gICAgICBpZiAoY3VycmVudCAhPSBudWxsICYmIChjb21wdXRlZCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IChjdXJyZW50ID09PSBjdXJyZW50ICYmICFmYWxzZSlcbiAgICAgICAgICAgIDogY29tcGFyYXRvcihjdXJyZW50LCBjb21wdXRlZClcbiAgICAgICAgICApKSB7XG4gICAgICAgIHZhciBjb21wdXRlZCA9IGN1cnJlbnQsXG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maWx0ZXJgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmlsdGVyZWQgYXJyYXkuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlRmlsdGVyKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSkge1xuICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mbGF0dGVuYCB3aXRoIHN1cHBvcnQgZm9yIHJlc3RyaWN0aW5nIGZsYXR0ZW5pbmcuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBmbGF0dGVuLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVwdGggVGhlIG1heGltdW0gcmVjdXJzaW9uIGRlcHRoLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtwcmVkaWNhdGU9aXNGbGF0dGVuYWJsZV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBbaXNTdHJpY3RdIFJlc3RyaWN0IHRvIHZhbHVlcyB0aGF0IHBhc3MgYHByZWRpY2F0ZWAgY2hlY2tzLlxuICAgKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0PVtdXSBUaGUgaW5pdGlhbCByZXN1bHQgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VGbGF0dGVuKGFycmF5LCBkZXB0aCwgcHJlZGljYXRlLCBpc1N0cmljdCwgcmVzdWx0KSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICAgIHByZWRpY2F0ZSB8fCAocHJlZGljYXRlID0gaXNGbGF0dGVuYWJsZSk7XG4gICAgcmVzdWx0IHx8IChyZXN1bHQgPSBbXSk7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaW5kZXhdO1xuICAgICAgaWYgKGRlcHRoID4gMCAmJiBwcmVkaWNhdGUodmFsdWUpKSB7XG4gICAgICAgIGlmIChkZXB0aCA+IDEpIHtcbiAgICAgICAgICAvLyBSZWN1cnNpdmVseSBmbGF0dGVuIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgICAgIGJhc2VGbGF0dGVuKHZhbHVlLCBkZXB0aCAtIDEsIHByZWRpY2F0ZSwgaXNTdHJpY3QsIHJlc3VsdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXJyYXlQdXNoKHJlc3VsdCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFpc1N0cmljdCkge1xuICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgYmFzZUZvck93bmAgd2hpY2ggaXRlcmF0ZXMgb3ZlciBgb2JqZWN0YFxuICAgKiBwcm9wZXJ0aWVzIHJldHVybmVkIGJ5IGBrZXlzRnVuY2AgYW5kIGludm9rZXMgYGl0ZXJhdGVlYCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAgICogSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgKi9cbiAgdmFyIGJhc2VGb3IgPSBjcmVhdGVCYXNlRm9yKCk7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvck93bmAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUZvck93bihvYmplY3QsIGl0ZXJhdGVlKSB7XG4gICAgcmV0dXJuIG9iamVjdCAmJiBiYXNlRm9yKG9iamVjdCwgaXRlcmF0ZWUsIGtleXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZ1bmN0aW9uc2Agd2hpY2ggY3JlYXRlcyBhbiBhcnJheSBvZlxuICAgKiBgb2JqZWN0YCBmdW5jdGlvbiBwcm9wZXJ0eSBuYW1lcyBmaWx0ZXJlZCBmcm9tIGBwcm9wc2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gZmlsdGVyLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGZ1bmN0aW9uIG5hbWVzLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUZ1bmN0aW9ucyhvYmplY3QsIHByb3BzKSB7XG4gICAgcmV0dXJuIGJhc2VGaWx0ZXIocHJvcHMsIGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIGlzRnVuY3Rpb24ob2JqZWN0W2tleV0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgIHdpdGhvdXQgZmFsbGJhY2tzIGZvciBidWdneSBlbnZpcm9ubWVudHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUdldFRhZyh2YWx1ZSkge1xuICAgIHJldHVybiBvYmplY3RUb1N0cmluZyh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZ3RgIHdoaWNoIGRvZXNuJ3QgY29lcmNlIGFyZ3VtZW50cy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgZ3JlYXRlciB0aGFuIGBvdGhlcmAsXG4gICAqICBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlR3QodmFsdWUsIG90aGVyKSB7XG4gICAgcmV0dXJuIHZhbHVlID4gb3RoZXI7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNBcmd1bWVudHNgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICAgKi9cbiAgdmFyIGJhc2VJc0FyZ3VtZW50cyA9IG5vb3A7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRGF0ZWAgd2l0aG91dCBOb2RlLmpzIG9wdGltaXphdGlvbnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGRhdGUgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlSXNEYXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gZGF0ZVRhZztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zXG4gICAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy5cbiAgICogIDEgLSBVbm9yZGVyZWQgY29tcGFyaXNvblxuICAgKiAgMiAtIFBhcnRpYWwgY29tcGFyaXNvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSB7XG4gICAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdExpa2UodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gICAgfVxuICAgIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBiYXNlSXNFcXVhbCwgc3RhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAgICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICAgKiByZWZlcmVuY2VzIHRvIGJlIGNvbXBhcmVkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spIHtcbiAgICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG4gICAgICAgIG9ialRhZyA9IG9iaklzQXJyID8gYXJyYXlUYWcgOiBiYXNlR2V0VGFnKG9iamVjdCksXG4gICAgICAgIG90aFRhZyA9IG90aElzQXJyID8gYXJyYXlUYWcgOiBiYXNlR2V0VGFnKG90aGVyKTtcblxuICAgIG9ialRhZyA9IG9ialRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb2JqVGFnO1xuICAgIG90aFRhZyA9IG90aFRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb3RoVGFnO1xuXG4gICAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyxcbiAgICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnLFxuICAgICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG4gICAgc3RhY2sgfHwgKHN0YWNrID0gW10pO1xuICAgIHZhciBvYmpTdGFjayA9IGZpbmQoc3RhY2ssIGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgICByZXR1cm4gZW50cnlbMF0gPT0gb2JqZWN0O1xuICAgIH0pO1xuICAgIHZhciBvdGhTdGFjayA9IGZpbmQoc3RhY2ssIGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgICByZXR1cm4gZW50cnlbMF0gPT0gb3RoZXI7XG4gICAgfSk7XG4gICAgaWYgKG9ialN0YWNrICYmIG90aFN0YWNrKSB7XG4gICAgICByZXR1cm4gb2JqU3RhY2tbMV0gPT0gb3RoZXI7XG4gICAgfVxuICAgIHN0YWNrLnB1c2goW29iamVjdCwgb3RoZXJdKTtcbiAgICBzdGFjay5wdXNoKFtvdGhlciwgb2JqZWN0XSk7XG4gICAgaWYgKGlzU2FtZVRhZyAmJiAhb2JqSXNPYmopIHtcbiAgICAgIHZhciByZXN1bHQgPSAob2JqSXNBcnIpXG4gICAgICAgID8gZXF1YWxBcnJheXMob2JqZWN0LCBvdGhlciwgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaylcbiAgICAgICAgOiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZywgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjayk7XG4gICAgICBzdGFjay5wb3AoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmICghKGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRykpIHtcbiAgICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG4gICAgICAgIHZhciBvYmpVbndyYXBwZWQgPSBvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCxcbiAgICAgICAgICAgIG90aFVud3JhcHBlZCA9IG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlcjtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gZXF1YWxGdW5jKG9ialVud3JhcHBlZCwgb3RoVW53cmFwcGVkLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjayk7XG4gICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzU2FtZVRhZykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIGVxdWFsRnVuYywgc3RhY2spO1xuICAgIHN0YWNrLnBvcCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNSZWdFeHBgIHdpdGhvdXQgTm9kZS5qcyBvcHRpbWl6YXRpb25zLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSByZWdleHAsIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VJc1JlZ0V4cCh2YWx1ZSkge1xuICAgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGJhc2VHZXRUYWcodmFsdWUpID09IHJlZ2V4cFRhZztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pdGVyYXRlZWAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gW3ZhbHVlPV8uaWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGFuIGl0ZXJhdGVlLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGl0ZXJhdGVlLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZUl0ZXJhdGVlKGZ1bmMpIHtcbiAgICBpZiAodHlwZW9mIGZ1bmMgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgfVxuICAgIGlmIChmdW5jID09IG51bGwpIHtcbiAgICAgIHJldHVybiBpZGVudGl0eTtcbiAgICB9XG4gICAgcmV0dXJuICh0eXBlb2YgZnVuYyA9PSAnb2JqZWN0JyA/IGJhc2VNYXRjaGVzIDogYmFzZVByb3BlcnR5KShmdW5jKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5sdGAgd2hpY2ggZG9lc24ndCBjb2VyY2UgYXJndW1lbnRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBsZXNzIHRoYW4gYG90aGVyYCxcbiAgICogIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VMdCh2YWx1ZSwgb3RoZXIpIHtcbiAgICByZXR1cm4gdmFsdWUgPCBvdGhlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXBgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlTWFwKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIHJlc3VsdCA9IGlzQXJyYXlMaWtlKGNvbGxlY3Rpb24pID8gQXJyYXkoY29sbGVjdGlvbi5sZW5ndGgpIDogW107XG5cbiAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgICByZXN1bHRbKytpbmRleF0gPSBpdGVyYXRlZSh2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNvdXJjZWAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlTWF0Y2hlcyhzb3VyY2UpIHtcbiAgICB2YXIgcHJvcHMgPSBuYXRpdmVLZXlzKHNvdXJjZSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgdmFyIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gIWxlbmd0aDtcbiAgICAgIH1cbiAgICAgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tsZW5ndGhdO1xuICAgICAgICBpZiAoIShrZXkgaW4gb2JqZWN0ICYmXG4gICAgICAgICAgICAgIGJhc2VJc0VxdWFsKHNvdXJjZVtrZXldLCBvYmplY3Rba2V5XSwgQ09NUEFSRV9QQVJUSUFMX0ZMQUcgfCBDT01QQVJFX1VOT1JERVJFRF9GTEFHKVxuICAgICAgICAgICAgKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5waWNrYCB3aXRob3V0IHN1cHBvcnQgZm9yIGluZGl2aWR1YWxcbiAgICogcHJvcGVydHkgaWRlbnRpZmllcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAqIEBwYXJhbSB7c3RyaW5nW119IHBhdGhzIFRoZSBwcm9wZXJ0eSBwYXRocyB0byBwaWNrLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVBpY2sob2JqZWN0LCBwcm9wcykge1xuICAgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICAgIHJldHVybiByZWR1Y2UocHJvcHMsIGZ1bmN0aW9uKHJlc3VsdCwga2V5KSB7XG4gICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICByZXN1bHRba2V5XSA9IG9iamVjdFtrZXldO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCB7fSk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucmVzdGAgd2hpY2ggZG9lc24ndCB2YWxpZGF0ZSBvciBjb2VyY2UgYXJndW1lbnRzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gYmFzZVJlc3QoZnVuYywgc3RhcnQpIHtcbiAgICByZXR1cm4gc2V0VG9TdHJpbmcob3ZlclJlc3QoZnVuYywgc3RhcnQsIGlkZW50aXR5KSwgZnVuYyArICcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zbGljZWAgd2l0aG91dCBhbiBpdGVyYXRlZSBjYWxsIGd1YXJkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2xpY2UuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IHBvc2l0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICBzdGFydCA9IC1zdGFydCA+IGxlbmd0aCA/IDAgOiAobGVuZ3RoICsgc3RhcnQpO1xuICAgIH1cbiAgICBlbmQgPSBlbmQgPiBsZW5ndGggPyBsZW5ndGggOiBlbmQ7XG4gICAgaWYgKGVuZCA8IDApIHtcbiAgICAgIGVuZCArPSBsZW5ndGg7XG4gICAgfVxuICAgIGxlbmd0aCA9IHN0YXJ0ID4gZW5kID8gMCA6ICgoZW5kIC0gc3RhcnQpID4+PiAwKTtcbiAgICBzdGFydCA+Pj49IDA7XG5cbiAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IGFycmF5W2luZGV4ICsgc3RhcnRdO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvcGllcyB0aGUgdmFsdWVzIG9mIGBzb3VyY2VgIHRvIGBhcnJheWAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgZnJvbS5cbiAgICogQHBhcmFtIHtBcnJheX0gW2FycmF5PVtdXSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgdG8uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICAgKi9cbiAgZnVuY3Rpb24gY29weUFycmF5KHNvdXJjZSkge1xuICAgIHJldHVybiBiYXNlU2xpY2Uoc291cmNlLCAwLCBzb3VyY2UubGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zb21lYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAgICogIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGJhc2VTb21lKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSkge1xuICAgIHZhciByZXN1bHQ7XG5cbiAgICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIHJlc3VsdCA9IHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgcmV0dXJuICFyZXN1bHQ7XG4gICAgfSk7XG4gICAgcmV0dXJuICEhcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGB3cmFwcGVyVmFsdWVgIHdoaWNoIHJldHVybnMgdGhlIHJlc3VsdCBvZlxuICAgKiBwZXJmb3JtaW5nIGEgc2VxdWVuY2Ugb2YgYWN0aW9ucyBvbiB0aGUgdW53cmFwcGVkIGB2YWx1ZWAsIHdoZXJlIGVhY2hcbiAgICogc3VjY2Vzc2l2ZSBhY3Rpb24gaXMgc3VwcGxpZWQgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJldmlvdXMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHVud3JhcHBlZCB2YWx1ZS5cbiAgICogQHBhcmFtIHtBcnJheX0gYWN0aW9ucyBBY3Rpb25zIHRvIHBlcmZvcm0gdG8gcmVzb2x2ZSB0aGUgdW53cmFwcGVkIHZhbHVlLlxuICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gICAqL1xuICBmdW5jdGlvbiBiYXNlV3JhcHBlclZhbHVlKHZhbHVlLCBhY3Rpb25zKSB7XG4gICAgdmFyIHJlc3VsdCA9IHZhbHVlO1xuICAgIHJldHVybiByZWR1Y2UoYWN0aW9ucywgZnVuY3Rpb24ocmVzdWx0LCBhY3Rpb24pIHtcbiAgICAgIHJldHVybiBhY3Rpb24uZnVuYy5hcHBseShhY3Rpb24udGhpc0FyZywgYXJyYXlQdXNoKFtyZXN1bHRdLCBhY3Rpb24uYXJncykpO1xuICAgIH0sIHJlc3VsdCk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGFyZXMgdmFsdWVzIHRvIHNvcnQgdGhlbSBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHNvcnQgb3JkZXIgaW5kaWNhdG9yIGZvciBgdmFsdWVgLlxuICAgKi9cbiAgZnVuY3Rpb24gY29tcGFyZUFzY2VuZGluZyh2YWx1ZSwgb3RoZXIpIHtcbiAgICBpZiAodmFsdWUgIT09IG90aGVyKSB7XG4gICAgICB2YXIgdmFsSXNEZWZpbmVkID0gdmFsdWUgIT09IHVuZGVmaW5lZCxcbiAgICAgICAgICB2YWxJc051bGwgPSB2YWx1ZSA9PT0gbnVsbCxcbiAgICAgICAgICB2YWxJc1JlZmxleGl2ZSA9IHZhbHVlID09PSB2YWx1ZSxcbiAgICAgICAgICB2YWxJc1N5bWJvbCA9IGZhbHNlO1xuXG4gICAgICB2YXIgb3RoSXNEZWZpbmVkID0gb3RoZXIgIT09IHVuZGVmaW5lZCxcbiAgICAgICAgICBvdGhJc051bGwgPSBvdGhlciA9PT0gbnVsbCxcbiAgICAgICAgICBvdGhJc1JlZmxleGl2ZSA9IG90aGVyID09PSBvdGhlcixcbiAgICAgICAgICBvdGhJc1N5bWJvbCA9IGZhbHNlO1xuXG4gICAgICBpZiAoKCFvdGhJc051bGwgJiYgIW90aElzU3ltYm9sICYmICF2YWxJc1N5bWJvbCAmJiB2YWx1ZSA+IG90aGVyKSB8fFxuICAgICAgICAgICh2YWxJc1N5bWJvbCAmJiBvdGhJc0RlZmluZWQgJiYgb3RoSXNSZWZsZXhpdmUgJiYgIW90aElzTnVsbCAmJiAhb3RoSXNTeW1ib2wpIHx8XG4gICAgICAgICAgKHZhbElzTnVsbCAmJiBvdGhJc0RlZmluZWQgJiYgb3RoSXNSZWZsZXhpdmUpIHx8XG4gICAgICAgICAgKCF2YWxJc0RlZmluZWQgJiYgb3RoSXNSZWZsZXhpdmUpIHx8XG4gICAgICAgICAgIXZhbElzUmVmbGV4aXZlKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgaWYgKCghdmFsSXNOdWxsICYmICF2YWxJc1N5bWJvbCAmJiAhb3RoSXNTeW1ib2wgJiYgdmFsdWUgPCBvdGhlcikgfHxcbiAgICAgICAgICAob3RoSXNTeW1ib2wgJiYgdmFsSXNEZWZpbmVkICYmIHZhbElzUmVmbGV4aXZlICYmICF2YWxJc051bGwgJiYgIXZhbElzU3ltYm9sKSB8fFxuICAgICAgICAgIChvdGhJc051bGwgJiYgdmFsSXNEZWZpbmVkICYmIHZhbElzUmVmbGV4aXZlKSB8fFxuICAgICAgICAgICghb3RoSXNEZWZpbmVkICYmIHZhbElzUmVmbGV4aXZlKSB8fFxuICAgICAgICAgICFvdGhJc1JlZmxleGl2ZSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENvcGllcyBwcm9wZXJ0aWVzIG9mIGBzb3VyY2VgIHRvIGBvYmplY3RgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20uXG4gICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBpZGVudGlmaWVycyB0byBjb3B5LlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdD17fV0gVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgdG8uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvcGllZCB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gICAqL1xuICBmdW5jdGlvbiBjb3B5T2JqZWN0KHNvdXJjZSwgcHJvcHMsIG9iamVjdCwgY3VzdG9taXplcikge1xuICAgIHZhciBpc05ldyA9ICFvYmplY3Q7XG4gICAgb2JqZWN0IHx8IChvYmplY3QgPSB7fSk7XG5cbiAgICB2YXIgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG5cbiAgICAgIHZhciBuZXdWYWx1ZSA9IGN1c3RvbWl6ZXJcbiAgICAgICAgPyBjdXN0b21pemVyKG9iamVjdFtrZXldLCBzb3VyY2Vba2V5XSwga2V5LCBvYmplY3QsIHNvdXJjZSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ld1ZhbHVlID0gc291cmNlW2tleV07XG4gICAgICB9XG4gICAgICBpZiAoaXNOZXcpIHtcbiAgICAgICAgYmFzZUFzc2lnblZhbHVlKG9iamVjdCwga2V5LCBuZXdWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhc3NpZ25WYWx1ZShvYmplY3QsIGtleSwgbmV3VmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiBsaWtlIGBfLmFzc2lnbmAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGFzc2lnbmVyIFRoZSBmdW5jdGlvbiB0byBhc3NpZ24gdmFsdWVzLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhc3NpZ25lciBmdW5jdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZUFzc2lnbmVyKGFzc2lnbmVyKSB7XG4gICAgcmV0dXJuIGJhc2VSZXN0KGZ1bmN0aW9uKG9iamVjdCwgc291cmNlcykge1xuICAgICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgICAgbGVuZ3RoID0gc291cmNlcy5sZW5ndGgsXG4gICAgICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA+IDEgPyBzb3VyY2VzW2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xuXG4gICAgICBjdXN0b21pemVyID0gKGFzc2lnbmVyLmxlbmd0aCA+IDMgJiYgdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgPyAobGVuZ3RoLS0sIGN1c3RvbWl6ZXIpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgIGFzc2lnbmVyKG9iamVjdCwgc291cmNlLCBpbmRleCwgY3VzdG9taXplcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGBiYXNlRWFjaGAgb3IgYGJhc2VFYWNoUmlnaHRgIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGEgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVCYXNlRWFjaChlYWNoRnVuYywgZnJvbVJpZ2h0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgICBpZiAoY29sbGVjdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgICAgfVxuICAgICAgaWYgKCFpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkge1xuICAgICAgICByZXR1cm4gZWFjaEZ1bmMoY29sbGVjdGlvbiwgaXRlcmF0ZWUpO1xuICAgICAgfVxuICAgICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTEsXG4gICAgICAgICAgaXRlcmFibGUgPSBPYmplY3QoY29sbGVjdGlvbik7XG5cbiAgICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtpbmRleF0sIGluZGV4LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGJhc2UgZnVuY3Rpb24gZm9yIG1ldGhvZHMgbGlrZSBgXy5mb3JJbmAgYW5kIGBfLmZvck93bmAuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwga2V5c0Z1bmMpIHtcbiAgICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICAgIGl0ZXJhYmxlID0gT2JqZWN0KG9iamVjdCksXG4gICAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLFxuICAgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIHZhciBrZXkgPSBwcm9wc1tmcm9tUmlnaHQgPyBsZW5ndGggOiArK2luZGV4XTtcbiAgICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2tleV0sIGtleSwgaXRlcmFibGUpID09PSBmYWxzZSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcHJvZHVjZXMgYW4gaW5zdGFuY2Ugb2YgYEN0b3JgIHJlZ2FyZGxlc3Mgb2ZcbiAgICogd2hldGhlciBpdCB3YXMgaW52b2tlZCBhcyBwYXJ0IG9mIGEgYG5ld2AgZXhwcmVzc2lvbiBvciBieSBgY2FsbGAgb3IgYGFwcGx5YC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gQ3RvciBUaGUgY29uc3RydWN0b3IgdG8gd3JhcC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZUN0b3IoQ3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFVzZSBhIGBzd2l0Y2hgIHN0YXRlbWVudCB0byB3b3JrIHdpdGggY2xhc3MgY29uc3RydWN0b3JzLiBTZWVcbiAgICAgIC8vIGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtZnVuY3Rpb24tb2JqZWN0cy1jYWxsLXRoaXNhcmd1bWVudC1hcmd1bWVudHNsaXN0XG4gICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB2YXIgdGhpc0JpbmRpbmcgPSBiYXNlQ3JlYXRlKEN0b3IucHJvdG90eXBlKSxcbiAgICAgICAgICByZXN1bHQgPSBDdG9yLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzKTtcblxuICAgICAgLy8gTWltaWMgdGhlIGNvbnN0cnVjdG9yJ3MgYHJldHVybmAgYmVoYXZpb3IuXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTMuMi4yIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICByZXR1cm4gaXNPYmplY3QocmVzdWx0KSA/IHJlc3VsdCA6IHRoaXNCaW5kaW5nO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGBfLmZpbmRgIG9yIGBfLmZpbmRMYXN0YCBmdW5jdGlvbi5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmluZEluZGV4RnVuYyBUaGUgZnVuY3Rpb24gdG8gZmluZCB0aGUgY29sbGVjdGlvbiBpbmRleC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZmluZCBmdW5jdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZUZpbmQoZmluZEluZGV4RnVuYykge1xuICAgIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIGZyb21JbmRleCkge1xuICAgICAgdmFyIGl0ZXJhYmxlID0gT2JqZWN0KGNvbGxlY3Rpb24pO1xuICAgICAgaWYgKCFpc0FycmF5TGlrZShjb2xsZWN0aW9uKSkge1xuICAgICAgICB2YXIgaXRlcmF0ZWUgPSBiYXNlSXRlcmF0ZWUocHJlZGljYXRlLCAzKTtcbiAgICAgICAgY29sbGVjdGlvbiA9IGtleXMoY29sbGVjdGlvbik7XG4gICAgICAgIHByZWRpY2F0ZSA9IGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gaXRlcmF0ZWUoaXRlcmFibGVba2V5XSwga2V5LCBpdGVyYWJsZSk7IH07XG4gICAgICB9XG4gICAgICB2YXIgaW5kZXggPSBmaW5kSW5kZXhGdW5jKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgZnJvbUluZGV4KTtcbiAgICAgIHJldHVybiBpbmRleCA+IC0xID8gaXRlcmFibGVbaXRlcmF0ZWUgPyBjb2xsZWN0aW9uW2luZGV4XSA6IGluZGV4XSA6IHVuZGVmaW5lZDtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdyYXBzIGBmdW5jYCB0byBpbnZva2UgaXQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmdcbiAgICogb2YgYHRoaXNBcmdgIGFuZCBgcGFydGlhbHNgIHByZXBlbmRlZCB0byB0aGUgYXJndW1lbnRzIGl0IHJlY2VpdmVzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBmbGFncy4gU2VlIGBjcmVhdGVXcmFwYCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICogQHBhcmFtIHtBcnJheX0gcGFydGlhbHMgVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkIHRvXG4gICAqICB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlUGFydGlhbChmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscykge1xuICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgfVxuICAgIHZhciBpc0JpbmQgPSBiaXRtYXNrICYgV1JBUF9CSU5EX0ZMQUcsXG4gICAgICAgIEN0b3IgPSBjcmVhdGVDdG9yKGZ1bmMpO1xuXG4gICAgZnVuY3Rpb24gd3JhcHBlcigpIHtcbiAgICAgIHZhciBhcmdzSW5kZXggPSAtMSxcbiAgICAgICAgICBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcbiAgICAgICAgICBsZWZ0SW5kZXggPSAtMSxcbiAgICAgICAgICBsZWZ0TGVuZ3RoID0gcGFydGlhbHMubGVuZ3RoLFxuICAgICAgICAgIGFyZ3MgPSBBcnJheShsZWZ0TGVuZ3RoICsgYXJnc0xlbmd0aCksXG4gICAgICAgICAgZm4gPSAodGhpcyAmJiB0aGlzICE9PSByb290ICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSA/IEN0b3IgOiBmdW5jO1xuXG4gICAgICB3aGlsZSAoKytsZWZ0SW5kZXggPCBsZWZ0TGVuZ3RoKSB7XG4gICAgICAgIGFyZ3NbbGVmdEluZGV4XSA9IHBhcnRpYWxzW2xlZnRJbmRleF07XG4gICAgICB9XG4gICAgICB3aGlsZSAoYXJnc0xlbmd0aC0tKSB7XG4gICAgICAgIGFyZ3NbbGVmdEluZGV4KytdID0gYXJndW1lbnRzWysrYXJnc0luZGV4XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmbi5hcHBseShpc0JpbmQgPyB0aGlzQXJnIDogdGhpcywgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3JcbiAgICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYGFycmF5YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICAgKi9cbiAgZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSB7XG4gICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRyxcbiAgICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cbiAgICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzUGFydGlhbCAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICByZXN1bHQgPSB0cnVlLFxuICAgICAgICBzZWVuID0gKGJpdG1hc2sgJiBDT01QQVJFX1VOT1JERVJFRF9GTEFHKSA/IFtdIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICAgIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG4gICAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF07XG5cbiAgICAgIHZhciBjb21wYXJlZDtcbiAgICAgIGlmIChjb21wYXJlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChjb21wYXJlZCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICBpZiAoc2Vlbikge1xuICAgICAgICBpZiAoIWJhc2VTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSwgb3RoSW5kZXgpIHtcbiAgICAgICAgICAgICAgaWYgKCFpbmRleE9mKHNlZW4sIG90aEluZGV4KSAmJlxuICAgICAgICAgICAgICAgICAgKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaykpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlZW4ucHVzaChvdGhJbmRleCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIShcbiAgICAgICAgICAgIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fFxuICAgICAgICAgICAgICBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBiaXRtYXNrLCBjdXN0b21pemVyLCBzdGFjaylcbiAgICAgICAgICApKSB7XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG4gICAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG4gICAqXG4gICAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2ZcbiAgICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgYml0bWFzaywgY3VzdG9taXplciwgZXF1YWxGdW5jLCBzdGFjaykge1xuICAgIHN3aXRjaCAodGFnKSB7XG5cbiAgICAgIGNhc2UgYm9vbFRhZzpcbiAgICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgIGNhc2UgbnVtYmVyVGFnOlxuICAgICAgICAvLyBDb2VyY2UgYm9vbGVhbnMgdG8gYDFgIG9yIGAwYCBhbmQgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzLlxuICAgICAgICAvLyBJbnZhbGlkIGRhdGVzIGFyZSBjb2VyY2VkIHRvIGBOYU5gLlxuICAgICAgICByZXR1cm4gZXEoK29iamVjdCwgK290aGVyKTtcblxuICAgICAgY2FzZSBlcnJvclRhZzpcbiAgICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblxuICAgICAgY2FzZSByZWdleHBUYWc6XG4gICAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncywgcHJpbWl0aXZlcyBhbmQgb2JqZWN0cyxcbiAgICAgICAgLy8gYXMgZXF1YWwuIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcmVnZXhwLnByb3RvdHlwZS50b3N0cmluZ1xuICAgICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcblxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3JcbiAgICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgIGZvciBtb3JlIGRldGFpbHMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBiaXRtYXNrLCBjdXN0b21pemVyLCBlcXVhbEZ1bmMsIHN0YWNrKSB7XG4gICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBDT01QQVJFX1BBUlRJQUxfRkxBRyxcbiAgICAgICAgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcbiAgICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcbiAgICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gICAgaWYgKG9iakxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIWlzUGFydGlhbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG4gICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgICBpZiAoIShpc1BhcnRpYWwgPyBrZXkgaW4gb3RoZXIgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCBrZXkpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSB0cnVlO1xuXG4gICAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuICAgIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cbiAgICAgIHZhciBjb21wYXJlZDtcbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyAob2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGJpdG1hc2ssIGN1c3RvbWl6ZXIsIHN0YWNrKSlcbiAgICAgICAgICAgIDogY29tcGFyZWRcbiAgICAgICAgICApKSB7XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcbiAgICB9XG4gICAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcbiAgICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3RvcjtcblxuICAgICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG4gICAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG4gICAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VSZXN0YCB3aGljaCBmbGF0dGVucyB0aGUgcmVzdCBhcnJheS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBmbGF0UmVzdChmdW5jKSB7XG4gICAgcmV0dXJuIHNldFRvU3RyaW5nKG92ZXJSZXN0KGZ1bmMsIHVuZGVmaW5lZCwgZmxhdHRlbiksIGZ1bmMgKyAnJyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBmbGF0dGVuYWJsZSBgYXJndW1lbnRzYCBvYmplY3Qgb3IgYXJyYXkuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBmbGF0dGVuYWJsZSwgZWxzZSBgZmFsc2VgLlxuICAgKi9cbiAgZnVuY3Rpb24gaXNGbGF0dGVuYWJsZSh2YWx1ZSkge1xuICAgIHJldHVybiBpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gICAqL1xuICBmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG5cbiAgICByZXR1cm4gISFsZW5ndGggJiZcbiAgICAgICh0eXBlID09ICdudW1iZXInIHx8XG4gICAgICAgICh0eXBlICE9ICdzeW1ib2wnICYmIHJlSXNVaW50LnRlc3QodmFsdWUpKSkgJiZcbiAgICAgICAgICAodmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbC5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIHZhbHVlIGFyZ3VtZW50LlxuICAgKiBAcGFyYW0geyp9IGluZGV4IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgaW5kZXggb3Iga2V5IGFyZ3VtZW50LlxuICAgKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIG9iamVjdCBhcmd1bWVudC5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbCxcbiAgICogIGVsc2UgYGZhbHNlYC5cbiAgICovXG4gIGZ1bmN0aW9uIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gICAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB0eXBlID0gdHlwZW9mIGluZGV4O1xuICAgIGlmICh0eXBlID09ICdudW1iZXInXG4gICAgICAgICAgPyAoaXNBcnJheUxpa2Uob2JqZWN0KSAmJiBpc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSlcbiAgICAgICAgICA6ICh0eXBlID09ICdzdHJpbmcnICYmIGluZGV4IGluIG9iamVjdClcbiAgICAgICAgKSB7XG4gICAgICByZXR1cm4gZXEob2JqZWN0W2luZGV4XSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBpcyBsaWtlXG4gICAqIFtgT2JqZWN0LmtleXNgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3Qua2V5cylcbiAgICogZXhjZXB0IHRoYXQgaXQgaW5jbHVkZXMgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgKi9cbiAgZnVuY3Rpb24gbmF0aXZlS2V5c0luKG9iamVjdCkge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICBpZiAob2JqZWN0ICE9IG51bGwpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBPYmplY3Qob2JqZWN0KSkge1xuICAgICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgdXNpbmcgYE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgc3RyaW5nLlxuICAgKi9cbiAgZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gbmF0aXZlT2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlUmVzdGAgd2hpY2ggdHJhbnNmb3JtcyB0aGUgcmVzdCBhcnJheS5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0cmFuc2Zvcm0gVGhlIHJlc3QgYXJyYXkgdHJhbnNmb3JtLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIG92ZXJSZXN0KGZ1bmMsIHN0YXJ0LCB0cmFuc2Zvcm0pIHtcbiAgICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiBzdGFydCwgMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgICAgYXJyYXkgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBhcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuICAgICAgfVxuICAgICAgaW5kZXggPSAtMTtcbiAgICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuICAgICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuICAgICAgICBvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07XG4gICAgICB9XG4gICAgICBvdGhlckFyZ3Nbc3RhcnRdID0gdHJhbnNmb3JtKGFycmF5KTtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIG90aGVyQXJncyk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBgdG9TdHJpbmdgIG1ldGhvZCBvZiBgZnVuY2AgdG8gcmV0dXJuIGBzdHJpbmdgLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBtb2RpZnkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHN0cmluZyBUaGUgYHRvU3RyaW5nYCByZXN1bHQuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyBgZnVuY2AuXG4gICAqL1xuICB2YXIgc2V0VG9TdHJpbmcgPSBpZGVudGl0eTtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gYXJyYXkgd2l0aCBhbGwgZmFsc2V5IHZhbHVlcyByZW1vdmVkLiBUaGUgdmFsdWVzIGBmYWxzZWAsIGBudWxsYCxcbiAgICogYDBgLCBgXCJcImAsIGB1bmRlZmluZWRgLCBhbmQgYE5hTmAgYXJlIGZhbHNleS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IEFycmF5XG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYWN0LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBmaWx0ZXJlZCB2YWx1ZXMuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uY29tcGFjdChbMCwgMSwgZmFsc2UsIDIsICcnLCAzXSk7XG4gICAqIC8vID0+IFsxLCAyLCAzXVxuICAgKi9cbiAgZnVuY3Rpb24gY29tcGFjdChhcnJheSkge1xuICAgIHJldHVybiBiYXNlRmlsdGVyKGFycmF5LCBCb29sZWFuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGFycmF5IGNvbmNhdGVuYXRpbmcgYGFycmF5YCB3aXRoIGFueSBhZGRpdGlvbmFsIGFycmF5c1xuICAgKiBhbmQvb3IgdmFsdWVzLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSA0LjAuMFxuICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbmNhdGVuYXRlLlxuICAgKiBAcGFyYW0gey4uLip9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY29uY2F0ZW5hdGUuXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGNvbmNhdGVuYXRlZCBhcnJheS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIGFycmF5ID0gWzFdO1xuICAgKiB2YXIgb3RoZXIgPSBfLmNvbmNhdChhcnJheSwgMiwgWzNdLCBbWzRdXSk7XG4gICAqXG4gICAqIGNvbnNvbGUubG9nKG90aGVyKTtcbiAgICogLy8gPT4gWzEsIDIsIDMsIFs0XV1cbiAgICpcbiAgICogY29uc29sZS5sb2coYXJyYXkpO1xuICAgKiAvLyA9PiBbMV1cbiAgICovXG4gIGZ1bmN0aW9uIGNvbmNhdCgpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoIWxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB2YXIgYXJncyA9IEFycmF5KGxlbmd0aCAtIDEpLFxuICAgICAgICBhcnJheSA9IGFyZ3VtZW50c1swXSxcbiAgICAgICAgaW5kZXggPSBsZW5ndGg7XG5cbiAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgYXJnc1tpbmRleCAtIDFdID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5UHVzaChpc0FycmF5KGFycmF5KSA/IGNvcHlBcnJheShhcnJheSkgOiBbYXJyYXldLCBiYXNlRmxhdHRlbihhcmdzLCAxKSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3RcbiAgICogZWxlbWVudCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDEuMS4wXG4gICAqIEBjYXRlZ29yeSBBcnJheVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHZhciB1c2VycyA9IFtcbiAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAgICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogdHJ1ZSB9XG4gICAqIF07XG4gICAqXG4gICAqIF8uZmluZEluZGV4KHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLnVzZXIgPT0gJ2Jhcm5leSc7IH0pO1xuICAgKiAvLyA9PiAwXG4gICAqXG4gICAqIC8vIFRoZSBgXy5tYXRjaGVzYCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAqIF8uZmluZEluZGV4KHVzZXJzLCB7ICd1c2VyJzogJ2ZyZWQnLCAnYWN0aXZlJzogZmFsc2UgfSk7XG4gICAqIC8vID0+IDFcbiAgICpcbiAgICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgKiBfLmZpbmRJbmRleCh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICAgKiAvLyA9PiAwXG4gICAqXG4gICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgKiBfLmZpbmRJbmRleCh1c2VycywgJ2FjdGl2ZScpO1xuICAgKiAvLyA9PiAyXG4gICAqL1xuICBmdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IGZyb21JbmRleCA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihmcm9tSW5kZXgpO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIGluZGV4ID0gbmF0aXZlTWF4KGxlbmd0aCArIGluZGV4LCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIGJhc2VGaW5kSW5kZXgoYXJyYXksIGJhc2VJdGVyYXRlZShwcmVkaWNhdGUsIDMpLCBpbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogRmxhdHRlbnMgYGFycmF5YCBhIHNpbmdsZSBsZXZlbCBkZWVwLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGZsYXR0ZW4uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGZsYXR0ZW5lZCBhcnJheS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5mbGF0dGVuKFsxLCBbMiwgWzMsIFs0XV0sIDVdXSk7XG4gICAqIC8vID0+IFsxLCAyLCBbMywgWzRdXSwgNV1cbiAgICovXG4gIGZ1bmN0aW9uIGZsYXR0ZW4oYXJyYXkpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgcmV0dXJuIGxlbmd0aCA/IGJhc2VGbGF0dGVuKGFycmF5LCAxKSA6IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGZsYXR0ZW5zIGBhcnJheWAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDMuMC4wXG4gICAqIEBjYXRlZ29yeSBBcnJheVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gZmxhdHRlbi5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZmxhdHRlbmVkIGFycmF5LlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmZsYXR0ZW5EZWVwKFsxLCBbMiwgWzMsIFs0XV0sIDVdXSk7XG4gICAqIC8vID0+IFsxLCAyLCAzLCA0LCA1XVxuICAgKi9cbiAgZnVuY3Rpb24gZmxhdHRlbkRlZXAoYXJyYXkpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgcmV0dXJuIGxlbmd0aCA/IGJhc2VGbGF0dGVuKGFycmF5LCBJTkZJTklUWSkgOiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBmaXJzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBhbGlhcyBmaXJzdFxuICAgKiBAY2F0ZWdvcnkgQXJyYXlcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmhlYWQoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gMVxuICAgKlxuICAgKiBfLmhlYWQoW10pO1xuICAgKiAvLyA9PiB1bmRlZmluZWRcbiAgICovXG4gIGZ1bmN0aW9uIGhlYWQoYXJyYXkpIHtcbiAgICByZXR1cm4gKGFycmF5ICYmIGFycmF5Lmxlbmd0aCkgPyBhcnJheVswXSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBgdmFsdWVgIGlzIGZvdW5kIGluIGBhcnJheWBcbiAgICogdXNpbmcgW2BTYW1lVmFsdWVaZXJvYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtc2FtZXZhbHVlemVybylcbiAgICogZm9yIGVxdWFsaXR5IGNvbXBhcmlzb25zLiBJZiBgZnJvbUluZGV4YCBpcyBuZWdhdGl2ZSwgaXQncyB1c2VkIGFzIHRoZVxuICAgKiBvZmZzZXQgZnJvbSB0aGUgZW5kIG9mIGBhcnJheWAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBBcnJheVxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtmcm9tSW5kZXg9MF0gVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmluZGV4T2YoWzEsIDIsIDEsIDJdLCAyKTtcbiAgICogLy8gPT4gMVxuICAgKlxuICAgKiAvLyBTZWFyY2ggZnJvbSB0aGUgYGZyb21JbmRleGAuXG4gICAqIF8uaW5kZXhPZihbMSwgMiwgMSwgMl0sIDIsIDIpO1xuICAgKiAvLyA9PiAzXG4gICAqL1xuICBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB2YWx1ZSwgZnJvbUluZGV4KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ID09IG51bGwgPyAwIDogYXJyYXkubGVuZ3RoO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ID09ICdudW1iZXInKSB7XG4gICAgICBmcm9tSW5kZXggPSBmcm9tSW5kZXggPCAwID8gbmF0aXZlTWF4KGxlbmd0aCArIGZyb21JbmRleCwgMCkgOiBmcm9tSW5kZXg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyb21JbmRleCA9IDA7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IChmcm9tSW5kZXggfHwgMCkgLSAxLFxuICAgICAgICBpc1JlZmxleGl2ZSA9IHZhbHVlID09PSB2YWx1ZTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgb3RoZXIgPSBhcnJheVtpbmRleF07XG4gICAgICBpZiAoKGlzUmVmbGV4aXZlID8gb3RoZXIgPT09IHZhbHVlIDogb3RoZXIgIT09IG90aGVyKSkge1xuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBsYXN0IGVsZW1lbnQgb2YgYGFycmF5YC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IEFycmF5XG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmxhc3QoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gM1xuICAgKi9cbiAgZnVuY3Rpb24gbGFzdChhcnJheSkge1xuICAgIHZhciBsZW5ndGggPSBhcnJheSA9PSBudWxsID8gMCA6IGFycmF5Lmxlbmd0aDtcbiAgICByZXR1cm4gbGVuZ3RoID8gYXJyYXlbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNsaWNlIG9mIGBhcnJheWAgZnJvbSBgc3RhcnRgIHVwIHRvLCBidXQgbm90IGluY2x1ZGluZywgYGVuZGAuXG4gICAqXG4gICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyB1c2VkIGluc3RlYWQgb2ZcbiAgICogW2BBcnJheSNzbGljZWBdKGh0dHBzOi8vbWRuLmlvL0FycmF5L3NsaWNlKSB0byBlbnN1cmUgZGVuc2UgYXJyYXlzIGFyZVxuICAgKiByZXR1cm5lZC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMy4wLjBcbiAgICogQGNhdGVnb3J5IEFycmF5XG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzbGljZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuICAgKi9cbiAgZnVuY3Rpb24gc2xpY2UoYXJyYXksIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkgPT0gbnVsbCA/IDAgOiBhcnJheS5sZW5ndGg7XG4gICAgc3RhcnQgPSBzdGFydCA9PSBudWxsID8gMCA6ICtzdGFydDtcbiAgICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbmd0aCA6ICtlbmQ7XG4gICAgcmV0dXJuIGxlbmd0aCA/IGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCkgOiBbXTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2UgdGhhdCB3cmFwcyBgdmFsdWVgIHdpdGggZXhwbGljaXQgbWV0aG9kXG4gICAqIGNoYWluIHNlcXVlbmNlcyBlbmFibGVkLiBUaGUgcmVzdWx0IG9mIHN1Y2ggc2VxdWVuY2VzIG11c3QgYmUgdW53cmFwcGVkXG4gICAqIHdpdGggYF8jdmFsdWVgLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAxLjMuMFxuICAgKiBAY2F0ZWdvcnkgU2VxXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHdyYXAuXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB2YXIgdXNlcnMgPSBbXG4gICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FnZSc6IDM2IH0sXG4gICAqICAgeyAndXNlcic6ICdmcmVkJywgICAgJ2FnZSc6IDQwIH0sXG4gICAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FnZSc6IDEgfVxuICAgKiBdO1xuICAgKlxuICAgKiB2YXIgeW91bmdlc3QgPSBfXG4gICAqICAgLmNoYWluKHVzZXJzKVxuICAgKiAgIC5zb3J0QnkoJ2FnZScpXG4gICAqICAgLm1hcChmdW5jdGlvbihvKSB7XG4gICAqICAgICByZXR1cm4gby51c2VyICsgJyBpcyAnICsgby5hZ2U7XG4gICAqICAgfSlcbiAgICogICAuaGVhZCgpXG4gICAqICAgLnZhbHVlKCk7XG4gICAqIC8vID0+ICdwZWJibGVzIGlzIDEnXG4gICAqL1xuICBmdW5jdGlvbiBjaGFpbih2YWx1ZSkge1xuICAgIHZhciByZXN1bHQgPSBsb2Rhc2godmFsdWUpO1xuICAgIHJlc3VsdC5fX2NoYWluX18gPSB0cnVlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaW52b2tlcyBgaW50ZXJjZXB0b3JgIGFuZCByZXR1cm5zIGB2YWx1ZWAuIFRoZSBpbnRlcmNlcHRvclxuICAgKiBpcyBpbnZva2VkIHdpdGggb25lIGFyZ3VtZW50OyAodmFsdWUpLiBUaGUgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0b1xuICAgKiBcInRhcCBpbnRvXCIgYSBtZXRob2QgY2hhaW4gc2VxdWVuY2UgaW4gb3JkZXIgdG8gbW9kaWZ5IGludGVybWVkaWF0ZSByZXN1bHRzLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgU2VxXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb3ZpZGUgdG8gYGludGVyY2VwdG9yYC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaW50ZXJjZXB0b3IgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXyhbMSwgMiwgM10pXG4gICAqICAudGFwKGZ1bmN0aW9uKGFycmF5KSB7XG4gICAqICAgIC8vIE11dGF0ZSBpbnB1dCBhcnJheS5cbiAgICogICAgYXJyYXkucG9wKCk7XG4gICAqICB9KVxuICAgKiAgLnJldmVyc2UoKVxuICAgKiAgLnZhbHVlKCk7XG4gICAqIC8vID0+IFsyLCAxXVxuICAgKi9cbiAgZnVuY3Rpb24gdGFwKHZhbHVlLCBpbnRlcmNlcHRvcikge1xuICAgIGludGVyY2VwdG9yKHZhbHVlKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy50YXBgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIHJlc3VsdCBvZiBgaW50ZXJjZXB0b3JgLlxuICAgKiBUaGUgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInBhc3MgdGhydVwiIHZhbHVlcyByZXBsYWNpbmcgaW50ZXJtZWRpYXRlXG4gICAqIHJlc3VsdHMgaW4gYSBtZXRob2QgY2hhaW4gc2VxdWVuY2UuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDMuMC4wXG4gICAqIEBjYXRlZ29yeSBTZXFcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvdmlkZSB0byBgaW50ZXJjZXB0b3JgLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbnRlcmNlcHRvciBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBpbnRlcmNlcHRvcmAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8oJyAgYWJjICAnKVxuICAgKiAgLmNoYWluKClcbiAgICogIC50cmltKClcbiAgICogIC50aHJ1KGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAqICAgIHJldHVybiBbdmFsdWVdO1xuICAgKiAgfSlcbiAgICogIC52YWx1ZSgpO1xuICAgKiAvLyA9PiBbJ2FiYyddXG4gICAqL1xuICBmdW5jdGlvbiB0aHJ1KHZhbHVlLCBpbnRlcmNlcHRvcikge1xuICAgIHJldHVybiBpbnRlcmNlcHRvcih2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGBsb2Rhc2hgIHdyYXBwZXIgaW5zdGFuY2Ugd2l0aCBleHBsaWNpdCBtZXRob2QgY2hhaW4gc2VxdWVuY2VzIGVuYWJsZWQuXG4gICAqXG4gICAqIEBuYW1lIGNoYWluXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgU2VxXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBgbG9kYXNoYCB3cmFwcGVyIGluc3RhbmNlLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB2YXIgdXNlcnMgPSBbXG4gICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0MCB9XG4gICAqIF07XG4gICAqXG4gICAqIC8vIEEgc2VxdWVuY2Ugd2l0aG91dCBleHBsaWNpdCBjaGFpbmluZy5cbiAgICogXyh1c2VycykuaGVhZCgpO1xuICAgKiAvLyA9PiB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNiB9XG4gICAqXG4gICAqIC8vIEEgc2VxdWVuY2Ugd2l0aCBleHBsaWNpdCBjaGFpbmluZy5cbiAgICogXyh1c2VycylcbiAgICogICAuY2hhaW4oKVxuICAgKiAgIC5oZWFkKClcbiAgICogICAucGljaygndXNlcicpXG4gICAqICAgLnZhbHVlKCk7XG4gICAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JyB9XG4gICAqL1xuICBmdW5jdGlvbiB3cmFwcGVyQ2hhaW4oKSB7XG4gICAgcmV0dXJuIGNoYWluKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4ZWN1dGVzIHRoZSBjaGFpbiBzZXF1ZW5jZSB0byByZXNvbHZlIHRoZSB1bndyYXBwZWQgdmFsdWUuXG4gICAqXG4gICAqIEBuYW1lIHZhbHVlXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAYWxpYXMgdG9KU09OLCB2YWx1ZU9mXG4gICAqIEBjYXRlZ29yeSBTZXFcbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHVud3JhcHBlZCB2YWx1ZS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXyhbMSwgMiwgM10pLnZhbHVlKCk7XG4gICAqIC8vID0+IFsxLCAyLCAzXVxuICAgKi9cbiAgZnVuY3Rpb24gd3JhcHBlclZhbHVlKCkge1xuICAgIHJldHVybiBiYXNlV3JhcHBlclZhbHVlKHRoaXMuX193cmFwcGVkX18sIHRoaXMuX19hY3Rpb25zX18pO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yICoqYWxsKiogZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gLlxuICAgKiBJdGVyYXRpb24gaXMgc3RvcHBlZCBvbmNlIGBwcmVkaWNhdGVgIHJldHVybnMgZmFsc2V5LiBUaGUgcHJlZGljYXRlIGlzXG4gICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICpcbiAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIHJldHVybnMgYHRydWVgIGZvclxuICAgKiBbZW1wdHkgY29sbGVjdGlvbnNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VtcHR5X3NldCkgYmVjYXVzZVxuICAgKiBbZXZlcnl0aGluZyBpcyB0cnVlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9WYWN1b3VzX3RydXRoKSBvZlxuICAgKiBlbGVtZW50cyBvZiBlbXB0eSBjb2xsZWN0aW9ucy5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLm1hcGAuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgcGFzcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmV2ZXJ5KFt0cnVlLCAxLCBudWxsLCAneWVzJ10sIEJvb2xlYW4pO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiB2YXIgdXNlcnMgPSBbXG4gICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgKiBdO1xuICAgKlxuICAgKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgKiBfLmV2ZXJ5KHVzZXJzLCB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiBmYWxzZSB9KTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICpcbiAgICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgKiBfLmV2ZXJ5KHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAqIF8uZXZlcnkodXNlcnMsICdhY3RpdmUnKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIGZ1bmN0aW9uIGV2ZXJ5KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgZ3VhcmQpIHtcbiAgICBwcmVkaWNhdGUgPSBndWFyZCA/IHVuZGVmaW5lZCA6IHByZWRpY2F0ZTtcbiAgICByZXR1cm4gYmFzZUV2ZXJ5KGNvbGxlY3Rpb24sIGJhc2VJdGVyYXRlZShwcmVkaWNhdGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYCwgcmV0dXJuaW5nIGFuIGFycmF5IG9mIGFsbCBlbGVtZW50c1xuICAgKiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IuIFRoZSBwcmVkaWNhdGUgaXMgaW52b2tlZCB3aXRoIHRocmVlXG4gICAqIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgKlxuICAgKiAqKk5vdGU6KiogVW5saWtlIGBfLnJlbW92ZWAsIHRoaXMgbWV0aG9kIHJldHVybnMgYSBuZXcgYXJyYXkuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBmaWx0ZXJlZCBhcnJheS5cbiAgICogQHNlZSBfLnJlamVjdFxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB2YXIgdXNlcnMgPSBbXG4gICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0sXG4gICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9XG4gICAqIF07XG4gICAqXG4gICAqIF8uZmlsdGVyKHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiAhby5hY3RpdmU7IH0pO1xuICAgKiAvLyA9PiBvYmplY3RzIGZvciBbJ2ZyZWQnXVxuICAgKlxuICAgKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgKiBfLmZpbHRlcih1c2VycywgeyAnYWdlJzogMzYsICdhY3RpdmUnOiB0cnVlIH0pO1xuICAgKiAvLyA9PiBvYmplY3RzIGZvciBbJ2Jhcm5leSddXG4gICAqXG4gICAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICogXy5maWx0ZXIodXNlcnMsIFsnYWN0aXZlJywgZmFsc2VdKTtcbiAgICogLy8gPT4gb2JqZWN0cyBmb3IgWydmcmVkJ11cbiAgICpcbiAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAqIF8uZmlsdGVyKHVzZXJzLCAnYWN0aXZlJyk7XG4gICAqIC8vID0+IG9iamVjdHMgZm9yIFsnYmFybmV5J11cbiAgICovXG4gIGZ1bmN0aW9uIGZpbHRlcihjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gYmFzZUZpbHRlcihjb2xsZWN0aW9uLCBiYXNlSXRlcmF0ZWUocHJlZGljYXRlKSk7XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmAsIHJldHVybmluZyB0aGUgZmlyc3QgZWxlbWVudFxuICAgKiBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IuIFRoZSBwcmVkaWNhdGUgaXMgaW52b2tlZCB3aXRoIHRocmVlXG4gICAqIGFyZ3VtZW50czogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpbnNwZWN0LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1hdGNoZWQgZWxlbWVudCwgZWxzZSBgdW5kZWZpbmVkYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIHVzZXJzID0gW1xuICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhZ2UnOiAzNiwgJ2FjdGl2ZSc6IHRydWUgfSxcbiAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWdlJzogNDAsICdhY3RpdmUnOiBmYWxzZSB9LFxuICAgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhZ2UnOiAxLCAgJ2FjdGl2ZSc6IHRydWUgfVxuICAgKiBdO1xuICAgKlxuICAgKiBfLmZpbmQodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8uYWdlIDwgNDA7IH0pO1xuICAgKiAvLyA9PiBvYmplY3QgZm9yICdiYXJuZXknXG4gICAqXG4gICAqIC8vIFRoZSBgXy5tYXRjaGVzYCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAqIF8uZmluZCh1c2VycywgeyAnYWdlJzogMSwgJ2FjdGl2ZSc6IHRydWUgfSk7XG4gICAqIC8vID0+IG9iamVjdCBmb3IgJ3BlYmJsZXMnXG4gICAqXG4gICAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICogXy5maW5kKHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG4gICAqIC8vID0+IG9iamVjdCBmb3IgJ2ZyZWQnXG4gICAqXG4gICAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgKiBfLmZpbmQodXNlcnMsICdhY3RpdmUnKTtcbiAgICogLy8gPT4gb2JqZWN0IGZvciAnYmFybmV5J1xuICAgKi9cbiAgdmFyIGZpbmQgPSBjcmVhdGVGaW5kKGZpbmRJbmRleCk7XG5cbiAgLyoqXG4gICAqIEl0ZXJhdGVzIG92ZXIgZWxlbWVudHMgb2YgYGNvbGxlY3Rpb25gIGFuZCBpbnZva2VzIGBpdGVyYXRlZWAgZm9yIGVhY2ggZWxlbWVudC5cbiAgICogVGhlIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICogSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICAgKlxuICAgKiAqKk5vdGU6KiogQXMgd2l0aCBvdGhlciBcIkNvbGxlY3Rpb25zXCIgbWV0aG9kcywgb2JqZWN0cyB3aXRoIGEgXCJsZW5ndGhcIlxuICAgKiBwcm9wZXJ0eSBhcmUgaXRlcmF0ZWQgbGlrZSBhcnJheXMuIFRvIGF2b2lkIHRoaXMgYmVoYXZpb3IgdXNlIGBfLmZvckluYFxuICAgKiBvciBgXy5mb3JPd25gIGZvciBvYmplY3QgaXRlcmF0aW9uLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAYWxpYXMgZWFjaFxuICAgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICAgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICAgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAgICogQHNlZSBfLmZvckVhY2hSaWdodFxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmZvckVhY2goWzEsIDJdLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgKiAgIGNvbnNvbGUubG9nKHZhbHVlKTtcbiAgICogfSk7XG4gICAqIC8vID0+IExvZ3MgYDFgIHRoZW4gYDJgLlxuICAgKlxuICAgKiBfLmZvckVhY2goeyAnYSc6IDEsICdiJzogMiB9LCBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAqICAgY29uc29sZS5sb2coa2V5KTtcbiAgICogfSk7XG4gICAqIC8vID0+IExvZ3MgJ2EnIHRoZW4gJ2InIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpLlxuICAgKi9cbiAgZnVuY3Rpb24gZm9yRWFjaChjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgIHJldHVybiBiYXNlRWFjaChjb2xsZWN0aW9uLCBiYXNlSXRlcmF0ZWUoaXRlcmF0ZWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHZhbHVlcyBieSBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAgdGhydVxuICAgKiBgaXRlcmF0ZWVgLiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAgICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgKlxuICAgKiBNYW55IGxvZGFzaCBtZXRob2RzIGFyZSBndWFyZGVkIHRvIHdvcmsgYXMgaXRlcmF0ZWVzIGZvciBtZXRob2RzIGxpa2VcbiAgICogYF8uZXZlcnlgLCBgXy5maWx0ZXJgLCBgXy5tYXBgLCBgXy5tYXBWYWx1ZXNgLCBgXy5yZWplY3RgLCBhbmQgYF8uc29tZWAuXG4gICAqXG4gICAqIFRoZSBndWFyZGVkIG1ldGhvZHMgYXJlOlxuICAgKiBgYXJ5YCwgYGNodW5rYCwgYGN1cnJ5YCwgYGN1cnJ5UmlnaHRgLCBgZHJvcGAsIGBkcm9wUmlnaHRgLCBgZXZlcnlgLFxuICAgKiBgZmlsbGAsIGBpbnZlcnRgLCBgcGFyc2VJbnRgLCBgcmFuZG9tYCwgYHJhbmdlYCwgYHJhbmdlUmlnaHRgLCBgcmVwZWF0YCxcbiAgICogYHNhbXBsZVNpemVgLCBgc2xpY2VgLCBgc29tZWAsIGBzb3J0QnlgLCBgc3BsaXRgLCBgdGFrZWAsIGB0YWtlUmlnaHRgLFxuICAgKiBgdGVtcGxhdGVgLCBgdHJpbWAsIGB0cmltRW5kYCwgYHRyaW1TdGFydGAsIGFuZCBgd29yZHNgXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBhcnJheS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogZnVuY3Rpb24gc3F1YXJlKG4pIHtcbiAgICogICByZXR1cm4gbiAqIG47XG4gICAqIH1cbiAgICpcbiAgICogXy5tYXAoWzQsIDhdLCBzcXVhcmUpO1xuICAgKiAvLyA9PiBbMTYsIDY0XVxuICAgKlxuICAgKiBfLm1hcCh7ICdhJzogNCwgJ2InOiA4IH0sIHNxdWFyZSk7XG4gICAqIC8vID0+IFsxNiwgNjRdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAqXG4gICAqIHZhciB1c2VycyA9IFtcbiAgICogICB7ICd1c2VyJzogJ2Jhcm5leScgfSxcbiAgICogICB7ICd1c2VyJzogJ2ZyZWQnIH1cbiAgICogXTtcbiAgICpcbiAgICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAqIF8ubWFwKHVzZXJzLCAndXNlcicpO1xuICAgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cbiAgICovXG4gIGZ1bmN0aW9uIG1hcChjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgIHJldHVybiBiYXNlTWFwKGNvbGxlY3Rpb24sIGJhc2VJdGVyYXRlZShpdGVyYXRlZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZHVjZXMgYGNvbGxlY3Rpb25gIHRvIGEgdmFsdWUgd2hpY2ggaXMgdGhlIGFjY3VtdWxhdGVkIHJlc3VsdCBvZiBydW5uaW5nXG4gICAqIGVhY2ggZWxlbWVudCBpbiBgY29sbGVjdGlvbmAgdGhydSBgaXRlcmF0ZWVgLCB3aGVyZSBlYWNoIHN1Y2Nlc3NpdmVcbiAgICogaW52b2NhdGlvbiBpcyBzdXBwbGllZCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBwcmV2aW91cy4gSWYgYGFjY3VtdWxhdG9yYFxuICAgKiBpcyBub3QgZ2l2ZW4sIHRoZSBmaXJzdCBlbGVtZW50IG9mIGBjb2xsZWN0aW9uYCBpcyB1c2VkIGFzIHRoZSBpbml0aWFsXG4gICAqIHZhbHVlLiBUaGUgaXRlcmF0ZWUgaXMgaW52b2tlZCB3aXRoIGZvdXIgYXJndW1lbnRzOlxuICAgKiAoYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLlxuICAgKlxuICAgKiBNYW55IGxvZGFzaCBtZXRob2RzIGFyZSBndWFyZGVkIHRvIHdvcmsgYXMgaXRlcmF0ZWVzIGZvciBtZXRob2RzIGxpa2VcbiAgICogYF8ucmVkdWNlYCwgYF8ucmVkdWNlUmlnaHRgLCBhbmQgYF8udHJhbnNmb3JtYC5cbiAgICpcbiAgICogVGhlIGd1YXJkZWQgbWV0aG9kcyBhcmU6XG4gICAqIGBhc3NpZ25gLCBgZGVmYXVsdHNgLCBgZGVmYXVsdHNEZWVwYCwgYGluY2x1ZGVzYCwgYG1lcmdlYCwgYG9yZGVyQnlgLFxuICAgKiBhbmQgYHNvcnRCeWBcbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICogQHBhcmFtIHsqfSBbYWNjdW11bGF0b3JdIFRoZSBpbml0aWFsIHZhbHVlLlxuICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAqIEBzZWUgXy5yZWR1Y2VSaWdodFxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLnJlZHVjZShbMSwgMl0sIGZ1bmN0aW9uKHN1bSwgbikge1xuICAgKiAgIHJldHVybiBzdW0gKyBuO1xuICAgKiB9LCAwKTtcbiAgICogLy8gPT4gM1xuICAgKlxuICAgKiBfLnJlZHVjZSh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDEgfSwgZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAqICAgKHJlc3VsdFt2YWx1ZV0gfHwgKHJlc3VsdFt2YWx1ZV0gPSBbXSkpLnB1c2goa2V5KTtcbiAgICogICByZXR1cm4gcmVzdWx0O1xuICAgKiB9LCB7fSk7XG4gICAqIC8vID0+IHsgJzEnOiBbJ2EnLCAnYyddLCAnMic6IFsnYiddIH0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICovXG4gIGZ1bmN0aW9uIHJlZHVjZShjb2xsZWN0aW9uLCBpdGVyYXRlZSwgYWNjdW11bGF0b3IpIHtcbiAgICByZXR1cm4gYmFzZVJlZHVjZShjb2xsZWN0aW9uLCBiYXNlSXRlcmF0ZWUoaXRlcmF0ZWUpLCBhY2N1bXVsYXRvciwgYXJndW1lbnRzLmxlbmd0aCA8IDMsIGJhc2VFYWNoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBzaXplIG9mIGBjb2xsZWN0aW9uYCBieSByZXR1cm5pbmcgaXRzIGxlbmd0aCBmb3IgYXJyYXktbGlrZVxuICAgKiB2YWx1ZXMgb3IgdGhlIG51bWJlciBvZiBvd24gZW51bWVyYWJsZSBzdHJpbmcga2V5ZWQgcHJvcGVydGllcyBmb3Igb2JqZWN0cy5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGluc3BlY3QuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbGxlY3Rpb24gc2l6ZS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5zaXplKFsxLCAyLCAzXSk7XG4gICAqIC8vID0+IDNcbiAgICpcbiAgICogXy5zaXplKHsgJ2EnOiAxLCAnYic6IDIgfSk7XG4gICAqIC8vID0+IDJcbiAgICpcbiAgICogXy5zaXplKCdwZWJibGVzJyk7XG4gICAqIC8vID0+IDdcbiAgICovXG4gIGZ1bmN0aW9uIHNpemUoY29sbGVjdGlvbikge1xuICAgIGlmIChjb2xsZWN0aW9uID09IG51bGwpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBjb2xsZWN0aW9uID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbikgPyBjb2xsZWN0aW9uIDogbmF0aXZlS2V5cyhjb2xsZWN0aW9uKTtcbiAgICByZXR1cm4gY29sbGVjdGlvbi5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciAqKmFueSoqIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gLlxuICAgKiBJdGVyYXRpb24gaXMgc3RvcHBlZCBvbmNlIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5LiBUaGUgcHJlZGljYXRlIGlzXG4gICAqIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gICAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhbiBpdGVyYXRlZSBmb3IgbWV0aG9kcyBsaWtlIGBfLm1hcGAuXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAgICogIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5zb21lKFtudWxsLCAwLCAneWVzJywgZmFsc2VdLCBCb29sZWFuKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiB2YXIgdXNlcnMgPSBbXG4gICAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FjdGl2ZSc6IGZhbHNlIH1cbiAgICogXTtcbiAgICpcbiAgICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICogXy5zb21lKHVzZXJzLCB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiBmYWxzZSB9KTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICpcbiAgICogLy8gVGhlIGBfLm1hdGNoZXNQcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgKiBfLnNvbWUodXNlcnMsIFsnYWN0aXZlJywgZmFsc2VdKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICogXy5zb21lKHVzZXJzLCAnYWN0aXZlJyk7XG4gICAqIC8vID0+IHRydWVcbiAgICovXG4gIGZ1bmN0aW9uIHNvbWUoY29sbGVjdGlvbiwgcHJlZGljYXRlLCBndWFyZCkge1xuICAgIHByZWRpY2F0ZSA9IGd1YXJkID8gdW5kZWZpbmVkIDogcHJlZGljYXRlO1xuICAgIHJldHVybiBiYXNlU29tZShjb2xsZWN0aW9uLCBiYXNlSXRlcmF0ZWUocHJlZGljYXRlKSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiBlbGVtZW50cywgc29ydGVkIGluIGFzY2VuZGluZyBvcmRlciBieSB0aGUgcmVzdWx0cyBvZlxuICAgKiBydW5uaW5nIGVhY2ggZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24gdGhydSBlYWNoIGl0ZXJhdGVlLiBUaGlzIG1ldGhvZFxuICAgKiBwZXJmb3JtcyBhIHN0YWJsZSBzb3J0LCB0aGF0IGlzLCBpdCBwcmVzZXJ2ZXMgdGhlIG9yaWdpbmFsIHNvcnQgb3JkZXIgb2ZcbiAgICogZXF1YWwgZWxlbWVudHMuIFRoZSBpdGVyYXRlZXMgYXJlIGludm9rZWQgd2l0aCBvbmUgYXJndW1lbnQ6ICh2YWx1ZSkuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICogQHBhcmFtIHsuLi4oRnVuY3Rpb258RnVuY3Rpb25bXSl9IFtpdGVyYXRlZXM9W18uaWRlbnRpdHldXVxuICAgKiAgVGhlIGl0ZXJhdGVlcyB0byBzb3J0IGJ5LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBzb3J0ZWQgYXJyYXkuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHZhciB1c2VycyA9IFtcbiAgICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICdhZ2UnOiA0OCB9LFxuICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG4gICAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfSxcbiAgICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhZ2UnOiAzNCB9XG4gICAqIF07XG4gICAqXG4gICAqIF8uc29ydEJ5KHVzZXJzLCBbZnVuY3Rpb24obykgeyByZXR1cm4gby51c2VyOyB9XSk7XG4gICAqIC8vID0+IG9iamVjdHMgZm9yIFtbJ2Jhcm5leScsIDM2XSwgWydiYXJuZXknLCAzNF0sIFsnZnJlZCcsIDQ4XSwgWydmcmVkJywgNDBdXVxuICAgKlxuICAgKiBfLnNvcnRCeSh1c2VycywgWyd1c2VyJywgJ2FnZSddKTtcbiAgICogLy8gPT4gb2JqZWN0cyBmb3IgW1snYmFybmV5JywgMzRdLCBbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgNDBdLCBbJ2ZyZWQnLCA0OF1dXG4gICAqL1xuICBmdW5jdGlvbiBzb3J0QnkoY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIGl0ZXJhdGVlID0gYmFzZUl0ZXJhdGVlKGl0ZXJhdGVlKTtcblxuICAgIHJldHVybiBiYXNlTWFwKGJhc2VNYXAoY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIHsgJ3ZhbHVlJzogdmFsdWUsICdpbmRleCc6IGluZGV4KyssICdjcml0ZXJpYSc6IGl0ZXJhdGVlKHZhbHVlLCBrZXksIGNvbGxlY3Rpb24pIH07XG4gICAgfSkuc29ydChmdW5jdGlvbihvYmplY3QsIG90aGVyKSB7XG4gICAgICByZXR1cm4gY29tcGFyZUFzY2VuZGluZyhvYmplY3QuY3JpdGVyaWEsIG90aGVyLmNyaXRlcmlhKSB8fCAob2JqZWN0LmluZGV4IC0gb3RoZXIuaW5kZXgpO1xuICAgIH0pLCBiYXNlUHJvcGVydHkoJ3ZhbHVlJykpO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCwgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgYW5kIGFyZ3VtZW50c1xuICAgKiBvZiB0aGUgY3JlYXRlZCBmdW5jdGlvbiwgd2hpbGUgaXQncyBjYWxsZWQgbGVzcyB0aGFuIGBuYCB0aW1lcy4gU3Vic2VxdWVudFxuICAgKiBjYWxscyB0byB0aGUgY3JlYXRlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMy4wLjBcbiAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgY2FsbHMgYXQgd2hpY2ggYGZ1bmNgIGlzIG5vIGxvbmdlciBpbnZva2VkLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcmVzdHJpY3RlZCBmdW5jdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uYmVmb3JlKDUsIGFkZENvbnRhY3RUb0xpc3QpKTtcbiAgICogLy8gPT4gQWxsb3dzIGFkZGluZyB1cCB0byA0IGNvbnRhY3RzIHRvIHRoZSBsaXN0LlxuICAgKi9cbiAgZnVuY3Rpb24gYmVmb3JlKG4sIGZ1bmMpIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gICAgfVxuICAgIG4gPSB0b0ludGVnZXIobik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tbiA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgaWYgKG4gPD0gMSkge1xuICAgICAgICBmdW5jID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYFxuICAgKiBhbmQgYHBhcnRpYWxzYCBwcmVwZW5kZWQgdG8gdGhlIGFyZ3VtZW50cyBpdCByZWNlaXZlcy5cbiAgICpcbiAgICogVGhlIGBfLmJpbmQucGxhY2Vob2xkZXJgIHZhbHVlLCB3aGljaCBkZWZhdWx0cyB0byBgX2AgaW4gbW9ub2xpdGhpYyBidWlsZHMsXG4gICAqIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAgICpcbiAgICogKipOb3RlOioqIFVubGlrZSBuYXRpdmUgYEZ1bmN0aW9uI2JpbmRgLCB0aGlzIG1ldGhvZCBkb2Vzbid0IHNldCB0aGUgXCJsZW5ndGhcIlxuICAgKiBwcm9wZXJ0eSBvZiBib3VuZCBmdW5jdGlvbnMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiaW5kLlxuICAgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAgICogQHBhcmFtIHsuLi4qfSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBmdW5jdGlvbiBncmVldChncmVldGluZywgcHVuY3R1YXRpb24pIHtcbiAgICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyB0aGlzLnVzZXIgKyBwdW5jdHVhdGlvbjtcbiAgICogfVxuICAgKlxuICAgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICAgKlxuICAgKiB2YXIgYm91bmQgPSBfLmJpbmQoZ3JlZXQsIG9iamVjdCwgJ2hpJyk7XG4gICAqIGJvdW5kKCchJyk7XG4gICAqIC8vID0+ICdoaSBmcmVkISdcbiAgICpcbiAgICogLy8gQm91bmQgd2l0aCBwbGFjZWhvbGRlcnMuXG4gICAqIHZhciBib3VuZCA9IF8uYmluZChncmVldCwgb2JqZWN0LCBfLCAnIScpO1xuICAgKiBib3VuZCgnaGknKTtcbiAgICogLy8gPT4gJ2hpIGZyZWQhJ1xuICAgKi9cbiAgdmFyIGJpbmQgPSBiYXNlUmVzdChmdW5jdGlvbihmdW5jLCB0aGlzQXJnLCBwYXJ0aWFscykge1xuICAgIHJldHVybiBjcmVhdGVQYXJ0aWFsKGZ1bmMsIFdSQVBfQklORF9GTEFHIHwgV1JBUF9QQVJUSUFMX0ZMQUcsIHRoaXNBcmcsIHBhcnRpYWxzKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIERlZmVycyBpbnZva2luZyB0aGUgYGZ1bmNgIHVudGlsIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzIGNsZWFyZWQuIEFueVxuICAgKiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQncyBpbnZva2VkLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVmZXIuXG4gICAqIEBwYXJhbSB7Li4uKn0gW2FyZ3NdIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5kZWZlcihmdW5jdGlvbih0ZXh0KSB7XG4gICAqICAgY29uc29sZS5sb2codGV4dCk7XG4gICAqIH0sICdkZWZlcnJlZCcpO1xuICAgKiAvLyA9PiBMb2dzICdkZWZlcnJlZCcgYWZ0ZXIgb25lIG1pbGxpc2Vjb25kLlxuICAgKi9cbiAgdmFyIGRlZmVyID0gYmFzZVJlc3QoZnVuY3Rpb24oZnVuYywgYXJncykge1xuICAgIHJldHVybiBiYXNlRGVsYXkoZnVuYywgMSwgYXJncyk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBJbnZva2VzIGBmdW5jYCBhZnRlciBgd2FpdGAgbWlsbGlzZWNvbmRzLiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlXG4gICAqIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0J3MgaW52b2tlZC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBpbnZvY2F0aW9uLlxuICAgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uZGVsYXkoZnVuY3Rpb24odGV4dCkge1xuICAgKiAgIGNvbnNvbGUubG9nKHRleHQpO1xuICAgKiB9LCAxMDAwLCAnbGF0ZXInKTtcbiAgICogLy8gPT4gTG9ncyAnbGF0ZXInIGFmdGVyIG9uZSBzZWNvbmQuXG4gICAqL1xuICB2YXIgZGVsYXkgPSBiYXNlUmVzdChmdW5jdGlvbihmdW5jLCB3YWl0LCBhcmdzKSB7XG4gICAgcmV0dXJuIGJhc2VEZWxheShmdW5jLCB0b051bWJlcih3YWl0KSB8fCAwLCBhcmdzKTtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG5lZ2F0ZXMgdGhlIHJlc3VsdCBvZiB0aGUgcHJlZGljYXRlIGBmdW5jYC4gVGhlXG4gICAqIGBmdW5jYCBwcmVkaWNhdGUgaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBhbmQgYXJndW1lbnRzIG9mIHRoZVxuICAgKiBjcmVhdGVkIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAzLjAuMFxuICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBwcmVkaWNhdGUgdG8gbmVnYXRlLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBuZWdhdGVkIGZ1bmN0aW9uLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBmdW5jdGlvbiBpc0V2ZW4obikge1xuICAgKiAgIHJldHVybiBuICUgMiA9PSAwO1xuICAgKiB9XG4gICAqXG4gICAqIF8uZmlsdGVyKFsxLCAyLCAzLCA0LCA1LCA2XSwgXy5uZWdhdGUoaXNFdmVuKSk7XG4gICAqIC8vID0+IFsxLCAzLCA1XVxuICAgKi9cbiAgZnVuY3Rpb24gbmVnYXRlKHByZWRpY2F0ZSkge1xuICAgIGlmICh0eXBlb2YgcHJlZGljYXRlICE9ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIHJlc3RyaWN0ZWQgdG8gaW52b2tpbmcgYGZ1bmNgIG9uY2UuIFJlcGVhdCBjYWxsc1xuICAgKiB0byB0aGUgZnVuY3Rpb24gcmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgaW52b2NhdGlvbi4gVGhlIGBmdW5jYCBpc1xuICAgKiBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIGFuZCBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWQgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byByZXN0cmljdC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcmVzdHJpY3RlZCBmdW5jdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIGluaXRpYWxpemUgPSBfLm9uY2UoY3JlYXRlQXBwbGljYXRpb24pO1xuICAgKiBpbml0aWFsaXplKCk7XG4gICAqIGluaXRpYWxpemUoKTtcbiAgICogLy8gPT4gYGNyZWF0ZUFwcGxpY2F0aW9uYCBpcyBpbnZva2VkIG9uY2VcbiAgICovXG4gIGZ1bmN0aW9uIG9uY2UoZnVuYykge1xuICAgIHJldHVybiBiZWZvcmUoMiwgZnVuYyk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBzaGFsbG93IGNsb25lIG9mIGB2YWx1ZWAuXG4gICAqXG4gICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uIHRoZVxuICAgKiBbc3RydWN0dXJlZCBjbG9uZSBhbGdvcml0aG1dKGh0dHBzOi8vbWRuLmlvL1N0cnVjdHVyZWRfY2xvbmVfYWxnb3JpdGhtKVxuICAgKiBhbmQgc3VwcG9ydHMgY2xvbmluZyBhcnJheXMsIGFycmF5IGJ1ZmZlcnMsIGJvb2xlYW5zLCBkYXRlIG9iamVjdHMsIG1hcHMsXG4gICAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIHNldHMsIHN0cmluZ3MsIHN5bWJvbHMsIGFuZCB0eXBlZFxuICAgKiBhcnJheXMuIFRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIGBhcmd1bWVudHNgIG9iamVjdHMgYXJlIGNsb25lZFxuICAgKiBhcyBwbGFpbiBvYmplY3RzLiBBbiBlbXB0eSBvYmplY3QgaXMgcmV0dXJuZWQgZm9yIHVuY2xvbmVhYmxlIHZhbHVlcyBzdWNoXG4gICAqIGFzIGVycm9yIG9iamVjdHMsIGZ1bmN0aW9ucywgRE9NIG5vZGVzLCBhbmQgV2Vha01hcHMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgY2xvbmVkIHZhbHVlLlxuICAgKiBAc2VlIF8uY2xvbmVEZWVwXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIHZhciBvYmplY3RzID0gW3sgJ2EnOiAxIH0sIHsgJ2InOiAyIH1dO1xuICAgKlxuICAgKiB2YXIgc2hhbGxvdyA9IF8uY2xvbmUob2JqZWN0cyk7XG4gICAqIGNvbnNvbGUubG9nKHNoYWxsb3dbMF0gPT09IG9iamVjdHNbMF0pO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqL1xuICBmdW5jdGlvbiBjbG9uZSh2YWx1ZSkge1xuICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IGNvcHlBcnJheSh2YWx1ZSkgOiBjb3B5T2JqZWN0KHZhbHVlLCBuYXRpdmVLZXlzKHZhbHVlKSk7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYVxuICAgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICAgKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgNC4wLjBcbiAgICogQGNhdGVnb3J5IExhbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gICAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07XG4gICAqXG4gICAqIF8uZXEob2JqZWN0LCBvYmplY3QpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uZXEob2JqZWN0LCBvdGhlcik7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqXG4gICAqIF8uZXEoJ2EnLCAnYScpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uZXEoJ2EnLCBPYmplY3QoJ2EnKSk7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqXG4gICAqIF8uZXEoTmFOLCBOYU4pO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqL1xuICBmdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IG90aGVyIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuICAgKiAgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIHZhciBpc0FyZ3VtZW50cyA9IGJhc2VJc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKSA/IGJhc2VJc0FyZ3VtZW50cyA6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG4gICAgICAhcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBfLmlzQXJyYXkoJ2FiYycpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBfLmlzQXJyYXkoXy5ub29wKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuICAgKiBub3QgYSBmdW5jdGlvbiBhbmQgaGFzIGEgYHZhbHVlLmxlbmd0aGAgdGhhdCdzIGFuIGludGVnZXIgZ3JlYXRlciB0aGFuIG9yXG4gICAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDQuMC4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGJvb2xlYW4gcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IExhbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgYm9vbGVhbiwgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmlzQm9vbGVhbihmYWxzZSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc0Jvb2xlYW4obnVsbCk7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqL1xuICBmdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHRydWUgfHwgdmFsdWUgPT09IGZhbHNlIHx8XG4gICAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBiYXNlR2V0VGFnKHZhbHVlKSA9PSBib29sVGFnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYERhdGVgIG9iamVjdC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IExhbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZGF0ZSBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5pc0RhdGUobmV3IERhdGUpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNEYXRlKCdNb24gQXByaWwgMjMgMjAxMicpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgdmFyIGlzRGF0ZSA9IGJhc2VJc0RhdGU7XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFuIGVtcHR5IG9iamVjdCwgY29sbGVjdGlvbiwgbWFwLCBvciBzZXQuXG4gICAqXG4gICAqIE9iamVjdHMgYXJlIGNvbnNpZGVyZWQgZW1wdHkgaWYgdGhleSBoYXZlIG5vIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZFxuICAgKiBwcm9wZXJ0aWVzLlxuICAgKlxuICAgKiBBcnJheS1saWtlIHZhbHVlcyBzdWNoIGFzIGBhcmd1bWVudHNgIG9iamVjdHMsIGFycmF5cywgYnVmZmVycywgc3RyaW5ncywgb3JcbiAgICogalF1ZXJ5LWxpa2UgY29sbGVjdGlvbnMgYXJlIGNvbnNpZGVyZWQgZW1wdHkgaWYgdGhleSBoYXZlIGEgYGxlbmd0aGAgb2YgYDBgLlxuICAgKiBTaW1pbGFybHksIG1hcHMgYW5kIHNldHMgYXJlIGNvbnNpZGVyZWQgZW1wdHkgaWYgdGhleSBoYXZlIGEgYHNpemVgIG9mIGAwYC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IExhbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGVtcHR5LCBlbHNlIGBmYWxzZWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uaXNFbXB0eShudWxsKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzRW1wdHkodHJ1ZSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc0VtcHR5KDEpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNFbXB0eShbMSwgMiwgM10pO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBfLmlzRW1wdHkoeyAnYSc6IDEgfSk7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqL1xuICBmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSAmJlxuICAgICAgICAoaXNBcnJheSh2YWx1ZSkgfHwgaXNTdHJpbmcodmFsdWUpIHx8XG4gICAgICAgICAgaXNGdW5jdGlvbih2YWx1ZS5zcGxpY2UpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICAgIHJldHVybiAhdmFsdWUubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm4gIW5hdGl2ZUtleXModmFsdWUpLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXG4gICAqIGVxdWl2YWxlbnQuXG4gICAqXG4gICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBhcnJheSBidWZmZXJzLCBib29sZWFucyxcbiAgICogZGF0ZSBvYmplY3RzLCBlcnJvciBvYmplY3RzLCBtYXBzLCBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLFxuICAgKiBzZXRzLCBzdHJpbmdzLCBzeW1ib2xzLCBhbmQgdHlwZWQgYXJyYXlzLiBgT2JqZWN0YCBvYmplY3RzIGFyZSBjb21wYXJlZFxuICAgKiBieSB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRnVuY3Rpb25zIGFuZCBET01cbiAgICogbm9kZXMgYXJlIGNvbXBhcmVkIGJ5IHN0cmljdCBlcXVhbGl0eSwgaS5lLiBgPT09YC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQGNhdGVnb3J5IExhbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAgICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gICAqIHZhciBvdGhlciA9IHsgJ2EnOiAxIH07XG4gICAqXG4gICAqIF8uaXNFcXVhbChvYmplY3QsIG90aGVyKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBvYmplY3QgPT09IG90aGVyO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNFcXVhbCh2YWx1ZSwgb3RoZXIpIHtcbiAgICByZXR1cm4gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGZpbml0ZSBwcmltaXRpdmUgbnVtYmVyLlxuICAgKlxuICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb25cbiAgICogW2BOdW1iZXIuaXNGaW5pdGVgXShodHRwczovL21kbi5pby9OdW1iZXIvaXNGaW5pdGUpLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBmaW5pdGUgbnVtYmVyLCBlbHNlIGBmYWxzZWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uaXNGaW5pdGUoMyk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzRmluaXRlKEluZmluaXR5KTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICpcbiAgICogXy5pc0Zpbml0ZSgnMycpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNGaW5pdGUodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIG5hdGl2ZUlzRmluaXRlKHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uaXNGdW5jdGlvbihfKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICghaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIFRoZSB1c2Ugb2YgYE9iamVjdCN0b1N0cmluZ2AgYXZvaWRzIGlzc3VlcyB3aXRoIHRoZSBgdHlwZW9mYCBvcGVyYXRvclxuICAgIC8vIGluIFNhZmFyaSA5IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5cyBhbmQgb3RoZXIgY29uc3RydWN0b3JzLlxuICAgIHZhciB0YWcgPSBiYXNlR2V0VGFnKHZhbHVlKTtcbiAgICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZyB8fCB0YWcgPT0gYXN5bmNUYWcgfHwgdGFnID09IHByb3h5VGFnO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gICAqXG4gICAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG4gICAqIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy10b2xlbmd0aCkuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDQuMC4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmlzTGVuZ3RoKDMpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqXG4gICAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBfLmlzTGVuZ3RoKCczJyk7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqL1xuICBmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcbiAgICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAgICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICAgKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5pc09iamVjdCh7fSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzT2JqZWN0KG51bGwpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICAgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDQuMC4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKlxuICAgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgTmFOYC5cbiAgICpcbiAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uXG4gICAqIFtgTnVtYmVyLmlzTmFOYF0oaHR0cHM6Ly9tZG4uaW8vTnVtYmVyL2lzTmFOKSBhbmQgaXMgbm90IHRoZSBzYW1lIGFzXG4gICAqIGdsb2JhbCBbYGlzTmFOYF0oaHR0cHM6Ly9tZG4uaW8vaXNOYU4pIHdoaWNoIHJldHVybnMgYHRydWVgIGZvclxuICAgKiBgdW5kZWZpbmVkYCBhbmQgb3RoZXIgbm9uLW51bWJlciB2YWx1ZXMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBgTmFOYCwgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmlzTmFOKE5hTik7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc05hTihuZXcgTnVtYmVyKE5hTikpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIGlzTmFOKHVuZGVmaW5lZCk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc05hTih1bmRlZmluZWQpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNOYU4odmFsdWUpIHtcbiAgICAvLyBBbiBgTmFOYCBwcmltaXRpdmUgaXMgdGhlIG9ubHkgdmFsdWUgdGhhdCBpcyBub3QgZXF1YWwgdG8gaXRzZWxmLlxuICAgIC8vIFBlcmZvcm0gdGhlIGB0b1N0cmluZ1RhZ2AgY2hlY2sgZmlyc3QgdG8gYXZvaWQgZXJyb3JzIHdpdGggc29tZVxuICAgIC8vIEFjdGl2ZVggb2JqZWN0cyBpbiBJRS5cbiAgICByZXR1cm4gaXNOdW1iZXIodmFsdWUpICYmIHZhbHVlICE9ICt2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgbnVsbGAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBgbnVsbGAsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5pc051bGwobnVsbCk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc051bGwodm9pZCAwKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIGZ1bmN0aW9uIGlzTnVsbCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYE51bWJlcmAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAgICpcbiAgICogKipOb3RlOioqIFRvIGV4Y2x1ZGUgYEluZmluaXR5YCwgYC1JbmZpbml0eWAsIGFuZCBgTmFOYCwgd2hpY2ggYXJlXG4gICAqIGNsYXNzaWZpZWQgYXMgbnVtYmVycywgdXNlIHRoZSBgXy5pc0Zpbml0ZWAgbWV0aG9kLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBudW1iZXIsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5pc051bWJlcigzKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNOdW1iZXIoSW5maW5pdHkpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaXNOdW1iZXIoJzMnKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fFxuICAgICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gbnVtYmVyVGFnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFJlZ0V4cGAgb2JqZWN0LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSByZWdleHAsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5pc1JlZ0V4cCgvYWJjLyk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5pc1JlZ0V4cCgnL2FiYy8nKTtcbiAgICogLy8gPT4gZmFsc2VcbiAgICovXG4gIHZhciBpc1JlZ0V4cCA9IGJhc2VJc1JlZ0V4cDtcblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTdHJpbmdgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN0cmluZywgZWxzZSBgZmFsc2VgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmlzU3RyaW5nKCdhYmMnKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzU3RyaW5nKDEpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8XG4gICAgICAoIWlzQXJyYXkodmFsdWUpICYmIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgYmFzZUdldFRhZyh2YWx1ZSkgPT0gc3RyaW5nVGFnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBgdW5kZWZpbmVkYC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IExhbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gICAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGB1bmRlZmluZWRgLCBlbHNlIGBmYWxzZWAuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uaXNVbmRlZmluZWQodm9pZCAwKTtcbiAgICogLy8gPT4gdHJ1ZVxuICAgKlxuICAgKiBfLmlzVW5kZWZpbmVkKG51bGwpO1xuICAgKiAvLyA9PiBmYWxzZVxuICAgKi9cbiAgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGFycmF5LlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBhcnJheS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy50b0FycmF5KHsgJ2EnOiAxLCAnYic6IDIgfSk7XG4gICAqIC8vID0+IFsxLCAyXVxuICAgKlxuICAgKiBfLnRvQXJyYXkoJ2FiYycpO1xuICAgKiAvLyA9PiBbJ2EnLCAnYicsICdjJ11cbiAgICpcbiAgICogXy50b0FycmF5KDEpO1xuICAgKiAvLyA9PiBbXVxuICAgKlxuICAgKiBfLnRvQXJyYXkobnVsbCk7XG4gICAqIC8vID0+IFtdXG4gICAqL1xuICBmdW5jdGlvbiB0b0FycmF5KHZhbHVlKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZXModmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUubGVuZ3RoID8gY29weUFycmF5KHZhbHVlKSA6IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gaW50ZWdlci5cbiAgICpcbiAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAgICogW2BUb0ludGVnZXJgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtdG9pbnRlZ2VyKS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgNC4wLjBcbiAgICogQGNhdGVnb3J5IExhbmdcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAgICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8udG9JbnRlZ2VyKDMuMik7XG4gICAqIC8vID0+IDNcbiAgICpcbiAgICogXy50b0ludGVnZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gICAqIC8vID0+IDBcbiAgICpcbiAgICogXy50b0ludGVnZXIoSW5maW5pdHkpO1xuICAgKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICAgKlxuICAgKiBfLnRvSW50ZWdlcignMy4yJyk7XG4gICAqIC8vID0+IDNcbiAgICovXG4gIHZhciB0b0ludGVnZXIgPSBOdW1iZXI7XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDQuMC4wXG4gICAqIEBjYXRlZ29yeSBMYW5nXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy50b051bWJlcigzLjIpO1xuICAgKiAvLyA9PiAzLjJcbiAgICpcbiAgICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAgICogLy8gPT4gNWUtMzI0XG4gICAqXG4gICAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICAgKiAvLyA9PiBJbmZpbml0eVxuICAgKlxuICAgKiBfLnRvTnVtYmVyKCczLjInKTtcbiAgICogLy8gPT4gMy4yXG4gICAqL1xuICB2YXIgdG9OdW1iZXIgPSBOdW1iZXI7XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG4gICAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSA0LjAuMFxuICAgKiBAY2F0ZWdvcnkgTGFuZ1xuICAgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgc3RyaW5nLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLnRvU3RyaW5nKG51bGwpO1xuICAgKiAvLyA9PiAnJ1xuICAgKlxuICAgKiBfLnRvU3RyaW5nKC0wKTtcbiAgICogLy8gPT4gJy0wJ1xuICAgKlxuICAgKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG4gICAqIC8vID0+ICcxLDIsMydcbiAgICovXG4gIGZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBBc3NpZ25zIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3RzIHRvIHRoZVxuICAgKiBkZXN0aW5hdGlvbiBvYmplY3QuIFNvdXJjZSBvYmplY3RzIGFyZSBhcHBsaWVkIGZyb20gbGVmdCB0byByaWdodC5cbiAgICogU3Vic2VxdWVudCBzb3VyY2VzIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyBzb3VyY2VzLlxuICAgKlxuICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YCBhbmQgaXMgbG9vc2VseSBiYXNlZCBvblxuICAgKiBbYE9iamVjdC5hc3NpZ25gXShodHRwczovL21kbi5pby9PYmplY3QvYXNzaWduKS5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMC4xMC4wXG4gICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAgICogQHNlZSBfLmFzc2lnbkluXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICogICB0aGlzLmEgPSAxO1xuICAgKiB9XG4gICAqXG4gICAqIGZ1bmN0aW9uIEJhcigpIHtcbiAgICogICB0aGlzLmMgPSAzO1xuICAgKiB9XG4gICAqXG4gICAqIEZvby5wcm90b3R5cGUuYiA9IDI7XG4gICAqIEJhci5wcm90b3R5cGUuZCA9IDQ7XG4gICAqXG4gICAqIF8uYXNzaWduKHsgJ2EnOiAwIH0sIG5ldyBGb28sIG5ldyBCYXIpO1xuICAgKiAvLyA9PiB7ICdhJzogMSwgJ2MnOiAzIH1cbiAgICovXG4gIHZhciBhc3NpZ24gPSBjcmVhdGVBc3NpZ25lcihmdW5jdGlvbihvYmplY3QsIHNvdXJjZSkge1xuICAgIGNvcHlPYmplY3Qoc291cmNlLCBuYXRpdmVLZXlzKHNvdXJjZSksIG9iamVjdCk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmFzc2lnbmAgZXhjZXB0IHRoYXQgaXQgaXRlcmF0ZXMgb3ZlciBvd24gYW5kXG4gICAqIGluaGVyaXRlZCBzb3VyY2UgcHJvcGVydGllcy5cbiAgICpcbiAgICogKipOb3RlOioqIFRoaXMgbWV0aG9kIG11dGF0ZXMgYG9iamVjdGAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDQuMC4wXG4gICAqIEBhbGlhcyBleHRlbmRcbiAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgKiBAc2VlIF8uYXNzaWduXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGZ1bmN0aW9uIEZvbygpIHtcbiAgICogICB0aGlzLmEgPSAxO1xuICAgKiB9XG4gICAqXG4gICAqIGZ1bmN0aW9uIEJhcigpIHtcbiAgICogICB0aGlzLmMgPSAzO1xuICAgKiB9XG4gICAqXG4gICAqIEZvby5wcm90b3R5cGUuYiA9IDI7XG4gICAqIEJhci5wcm90b3R5cGUuZCA9IDQ7XG4gICAqXG4gICAqIF8uYXNzaWduSW4oeyAnYSc6IDAgfSwgbmV3IEZvbywgbmV3IEJhcik7XG4gICAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMywgJ2QnOiA0IH1cbiAgICovXG4gIHZhciBhc3NpZ25JbiA9IGNyZWF0ZUFzc2lnbmVyKGZ1bmN0aW9uKG9iamVjdCwgc291cmNlKSB7XG4gICAgY29weU9iamVjdChzb3VyY2UsIG5hdGl2ZUtleXNJbihzb3VyY2UpLCBvYmplY3QpO1xuICB9KTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBgcHJvdG90eXBlYCBvYmplY3QuIElmIGFcbiAgICogYHByb3BlcnRpZXNgIG9iamVjdCBpcyBnaXZlbiwgaXRzIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzXG4gICAqIGFyZSBhc3NpZ25lZCB0byB0aGUgY3JlYXRlZCBvYmplY3QuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlck9mIF9cbiAgICogQHNpbmNlIDIuMy4wXG4gICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3RvdHlwZSBUaGUgb2JqZWN0IHRvIGluaGVyaXQgZnJvbS5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtwcm9wZXJ0aWVzXSBUaGUgcHJvcGVydGllcyB0byBhc3NpZ24gdG8gdGhlIG9iamVjdC5cbiAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogZnVuY3Rpb24gU2hhcGUoKSB7XG4gICAqICAgdGhpcy54ID0gMDtcbiAgICogICB0aGlzLnkgPSAwO1xuICAgKiB9XG4gICAqXG4gICAqIGZ1bmN0aW9uIENpcmNsZSgpIHtcbiAgICogICBTaGFwZS5jYWxsKHRoaXMpO1xuICAgKiB9XG4gICAqXG4gICAqIENpcmNsZS5wcm90b3R5cGUgPSBfLmNyZWF0ZShTaGFwZS5wcm90b3R5cGUsIHtcbiAgICogICAnY29uc3RydWN0b3InOiBDaXJjbGVcbiAgICogfSk7XG4gICAqXG4gICAqIHZhciBjaXJjbGUgPSBuZXcgQ2lyY2xlO1xuICAgKiBjaXJjbGUgaW5zdGFuY2VvZiBDaXJjbGU7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogY2lyY2xlIGluc3RhbmNlb2YgU2hhcGU7XG4gICAqIC8vID0+IHRydWVcbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZShwcm90b3R5cGUsIHByb3BlcnRpZXMpIHtcbiAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIHJldHVybiBwcm9wZXJ0aWVzID09IG51bGwgPyByZXN1bHQgOiBhc3NpZ24ocmVzdWx0LCBwcm9wZXJ0aWVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3NpZ25zIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgc3RyaW5nIGtleWVkIHByb3BlcnRpZXMgb2Ygc291cmNlXG4gICAqIG9iamVjdHMgdG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdCBmb3IgYWxsIGRlc3RpbmF0aW9uIHByb3BlcnRpZXMgdGhhdFxuICAgKiByZXNvbHZlIHRvIGB1bmRlZmluZWRgLiBTb3VyY2Ugb2JqZWN0cyBhcmUgYXBwbGllZCBmcm9tIGxlZnQgdG8gcmlnaHQuXG4gICAqIE9uY2UgYSBwcm9wZXJ0eSBpcyBzZXQsIGFkZGl0aW9uYWwgdmFsdWVzIG9mIHRoZSBzYW1lIHByb3BlcnR5IGFyZSBpZ25vcmVkLlxuICAgKlxuICAgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgKiBAc2VlIF8uZGVmYXVsdHNEZWVwXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8uZGVmYXVsdHMoeyAnYSc6IDEgfSwgeyAnYic6IDIgfSwgeyAnYSc6IDMgfSk7XG4gICAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIgfVxuICAgKi9cbiAgdmFyIGRlZmF1bHRzID0gYmFzZVJlc3QoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2VzKSB7XG4gICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG5cbiAgICB2YXIgaW5kZXggPSAtMTtcbiAgICB2YXIgbGVuZ3RoID0gc291cmNlcy5sZW5ndGg7XG4gICAgdmFyIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoZ3VhcmQgJiYgaXNJdGVyYXRlZUNhbGwoc291cmNlc1swXSwgc291cmNlc1sxXSwgZ3VhcmQpKSB7XG4gICAgICBsZW5ndGggPSAxO1xuICAgIH1cblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgc291cmNlID0gc291cmNlc1tpbmRleF07XG4gICAgICB2YXIgcHJvcHMgPSBrZXlzSW4oc291cmNlKTtcbiAgICAgIHZhciBwcm9wc0luZGV4ID0gLTE7XG4gICAgICB2YXIgcHJvcHNMZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlICgrK3Byb3BzSW5kZXggPCBwcm9wc0xlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcHJvcHNbcHJvcHNJbmRleF07XG4gICAgICAgIHZhciB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAoZXEodmFsdWUsIG9iamVjdFByb3RvW2tleV0pICYmICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkpIHtcbiAgICAgICAgICBvYmplY3Rba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfSk7XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBgcGF0aGAgaXMgYSBkaXJlY3QgcHJvcGVydHkgb2YgYG9iamVjdGAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cbiAgICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiB7ICdiJzogMiB9IH07XG4gICAqIHZhciBvdGhlciA9IF8uY3JlYXRlKHsgJ2EnOiBfLmNyZWF0ZSh7ICdiJzogMiB9KSB9KTtcbiAgICpcbiAgICogXy5oYXMob2JqZWN0LCAnYScpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaGFzKG9iamVjdCwgJ2EuYicpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqXG4gICAqIF8uaGFzKG9iamVjdCwgWydhJywgJ2InXSk7XG4gICAqIC8vID0+IHRydWVcbiAgICpcbiAgICogXy5oYXMob3RoZXIsICdhJyk7XG4gICAqIC8vID0+IGZhbHNlXG4gICAqL1xuICBmdW5jdGlvbiBoYXMob2JqZWN0LCBwYXRoKSB7XG4gICAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwYXRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAgICpcbiAgICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcbiAgICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5rZXlzKVxuICAgKiBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgKiAgIHRoaXMuYSA9IDE7XG4gICAqICAgdGhpcy5iID0gMjtcbiAgICogfVxuICAgKlxuICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgKlxuICAgKiBfLmtleXMobmV3IEZvbyk7XG4gICAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAgICpcbiAgICogXy5rZXlzKCdoaScpO1xuICAgKiAvLyA9PiBbJzAnLCAnMSddXG4gICAqL1xuICB2YXIga2V5cyA9IG5hdGl2ZUtleXM7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gICAqXG4gICAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAzLjAuMFxuICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgKiAgIHRoaXMuYSA9IDE7XG4gICAqICAgdGhpcy5iID0gMjtcbiAgICogfVxuICAgKlxuICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgKlxuICAgKiBfLmtleXNJbihuZXcgRm9vKTtcbiAgICogLy8gPT4gWydhJywgJ2InLCAnYyddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAqL1xuICB2YXIga2V5c0luID0gbmF0aXZlS2V5c0luO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9iamVjdCBjb21wb3NlZCBvZiB0aGUgcGlja2VkIGBvYmplY3RgIHByb3BlcnRpZXMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cbiAgICogQHBhcmFtIHsuLi4oc3RyaW5nfHN0cmluZ1tdKX0gW3BhdGhzXSBUaGUgcHJvcGVydHkgcGF0aHMgdG8gcGljay5cbiAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6ICcyJywgJ2MnOiAzIH07XG4gICAqXG4gICAqIF8ucGljayhvYmplY3QsIFsnYScsICdjJ10pO1xuICAgKiAvLyA9PiB7ICdhJzogMSwgJ2MnOiAzIH1cbiAgICovXG4gIHZhciBwaWNrID0gZmxhdFJlc3QoZnVuY3Rpb24ob2JqZWN0LCBwYXRocykge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHt9IDogYmFzZVBpY2sob2JqZWN0LCBwYXRocyk7XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmdldGAgZXhjZXB0IHRoYXQgaWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzIGFcbiAgICogZnVuY3Rpb24gaXQncyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGl0cyBwYXJlbnQgb2JqZWN0IGFuZFxuICAgKiBpdHMgcmVzdWx0IGlzIHJldHVybmVkLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHJlc29sdmUuXG4gICAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGZvciBgdW5kZWZpbmVkYCByZXNvbHZlZCB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MxJzogMywgJ2MyJzogXy5jb25zdGFudCg0KSB9IH1dIH07XG4gICAqXG4gICAqIF8ucmVzdWx0KG9iamVjdCwgJ2FbMF0uYi5jMScpO1xuICAgKiAvLyA9PiAzXG4gICAqXG4gICAqIF8ucmVzdWx0KG9iamVjdCwgJ2FbMF0uYi5jMicpO1xuICAgKiAvLyA9PiA0XG4gICAqXG4gICAqIF8ucmVzdWx0KG9iamVjdCwgJ2FbMF0uYi5jMycsICdkZWZhdWx0Jyk7XG4gICAqIC8vID0+ICdkZWZhdWx0J1xuICAgKlxuICAgKiBfLnJlc3VsdChvYmplY3QsICdhWzBdLmIuYzMnLCBfLmNvbnN0YW50KCdkZWZhdWx0JykpO1xuICAgKiAvLyA9PiAnZGVmYXVsdCdcbiAgICovXG4gIGZ1bmN0aW9uIHJlc3VsdChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICAgIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W3BhdGhdO1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUuY2FsbChvYmplY3QpIDogdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgc3RyaW5nIGtleWVkIHByb3BlcnR5IHZhbHVlcyBvZiBgb2JqZWN0YC5cbiAgICpcbiAgICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogZnVuY3Rpb24gRm9vKCkge1xuICAgKiAgIHRoaXMuYSA9IDE7XG4gICAqICAgdGhpcy5iID0gMjtcbiAgICogfVxuICAgKlxuICAgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICAgKlxuICAgKiBfLnZhbHVlcyhuZXcgRm9vKTtcbiAgICogLy8gPT4gWzEsIDJdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gICAqXG4gICAqIF8udmFsdWVzKCdoaScpO1xuICAgKiAvLyA9PiBbJ2gnLCAnaSddXG4gICAqL1xuICBmdW5jdGlvbiB2YWx1ZXMob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gW10gOiBiYXNlVmFsdWVzKG9iamVjdCwga2V5cyhvYmplY3QpKTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ29udmVydHMgdGhlIGNoYXJhY3RlcnMgXCImXCIsIFwiPFwiLCBcIj5cIiwgJ1wiJywgYW5kIFwiJ1wiIGluIGBzdHJpbmdgIHRvIHRoZWlyXG4gICAqIGNvcnJlc3BvbmRpbmcgSFRNTCBlbnRpdGllcy5cbiAgICpcbiAgICogKipOb3RlOioqIE5vIG90aGVyIGNoYXJhY3RlcnMgYXJlIGVzY2FwZWQuIFRvIGVzY2FwZSBhZGRpdGlvbmFsXG4gICAqIGNoYXJhY3RlcnMgdXNlIGEgdGhpcmQtcGFydHkgbGlicmFyeSBsaWtlIFtfaGVfXShodHRwczovL210aHMuYmUvaGUpLlxuICAgKlxuICAgKiBUaG91Z2ggdGhlIFwiPlwiIGNoYXJhY3RlciBpcyBlc2NhcGVkIGZvciBzeW1tZXRyeSwgY2hhcmFjdGVycyBsaWtlXG4gICAqIFwiPlwiIGFuZCBcIi9cIiBkb24ndCBuZWVkIGVzY2FwaW5nIGluIEhUTUwgYW5kIGhhdmUgbm8gc3BlY2lhbCBtZWFuaW5nXG4gICAqIHVubGVzcyB0aGV5J3JlIHBhcnQgb2YgYSB0YWcgb3IgdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLiBTZWVcbiAgICogW01hdGhpYXMgQnluZW5zJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2FtYmlndW91cy1hbXBlcnNhbmRzKVxuICAgKiAodW5kZXIgXCJzZW1pLXJlbGF0ZWQgZnVuIGZhY3RcIikgZm9yIG1vcmUgZGV0YWlscy5cbiAgICpcbiAgICogV2hlbiB3b3JraW5nIHdpdGggSFRNTCB5b3Ugc2hvdWxkIGFsd2F5c1xuICAgKiBbcXVvdGUgYXR0cmlidXRlIHZhbHVlc10oaHR0cDovL3dvbmtvLmNvbS9wb3N0L2h0bWwtZXNjYXBpbmcpIHRvIHJlZHVjZVxuICAgKiBYU1MgdmVjdG9ycy5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLmVzY2FwZSgnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnKTtcbiAgICogLy8gPT4gJ2ZyZWQsIGJhcm5leSwgJmFtcDsgcGViYmxlcydcbiAgICovXG4gIGZ1bmN0aW9uIGVzY2FwZShzdHJpbmcpIHtcbiAgICBzdHJpbmcgPSB0b1N0cmluZyhzdHJpbmcpO1xuICAgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzVW5lc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgICA/IHN0cmluZy5yZXBsYWNlKHJlVW5lc2NhcGVkSHRtbCwgZXNjYXBlSHRtbENoYXIpXG4gICAgICA6IHN0cmluZztcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgaXQgcmVjZWl2ZXMuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBVdGlsXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcbiAgICpcbiAgICogY29uc29sZS5sb2coXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3QpO1xuICAgKiAvLyA9PiB0cnVlXG4gICAqL1xuICBmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBhcmd1bWVudHMgb2YgdGhlIGNyZWF0ZWRcbiAgICogZnVuY3Rpb24uIElmIGBmdW5jYCBpcyBhIHByb3BlcnR5IG5hbWUsIHRoZSBjcmVhdGVkIGZ1bmN0aW9uIHJldHVybnMgdGhlXG4gICAqIHByb3BlcnR5IHZhbHVlIGZvciBhIGdpdmVuIGVsZW1lbnQuIElmIGBmdW5jYCBpcyBhbiBhcnJheSBvciBvYmplY3QsIHRoZVxuICAgKiBjcmVhdGVkIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGNvbnRhaW4gdGhlIGVxdWl2YWxlbnRcbiAgICogc291cmNlIHByb3BlcnRpZXMsIG90aGVyd2lzZSBpdCByZXR1cm5zIGBmYWxzZWAuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHNpbmNlIDQuMC4wXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBVdGlsXG4gICAqIEBwYXJhbSB7Kn0gW2Z1bmM9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYSBjYWxsYmFjay5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjYWxsYmFjay5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIHVzZXJzID0gW1xuICAgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9LFxuICAgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgJ2FnZSc6IDQwLCAnYWN0aXZlJzogZmFsc2UgfVxuICAgKiBdO1xuICAgKlxuICAgKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICAgKiBfLmZpbHRlcih1c2VycywgXy5pdGVyYXRlZSh7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiB0cnVlIH0pKTtcbiAgICogLy8gPT4gW3sgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2LCAnYWN0aXZlJzogdHJ1ZSB9XVxuICAgKlxuICAgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gICAqIF8uZmlsdGVyKHVzZXJzLCBfLml0ZXJhdGVlKFsndXNlcicsICdmcmVkJ10pKTtcbiAgICogLy8gPT4gW3sgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9XVxuICAgKlxuICAgKiAvLyBUaGUgYF8ucHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAgICogXy5tYXAodXNlcnMsIF8uaXRlcmF0ZWUoJ3VzZXInKSk7XG4gICAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICAgKlxuICAgKiAvLyBDcmVhdGUgY3VzdG9tIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gICAqIF8uaXRlcmF0ZWUgPSBfLndyYXAoXy5pdGVyYXRlZSwgZnVuY3Rpb24oaXRlcmF0ZWUsIGZ1bmMpIHtcbiAgICogICByZXR1cm4gIV8uaXNSZWdFeHAoZnVuYykgPyBpdGVyYXRlZShmdW5jKSA6IGZ1bmN0aW9uKHN0cmluZykge1xuICAgKiAgICAgcmV0dXJuIGZ1bmMudGVzdChzdHJpbmcpO1xuICAgKiAgIH07XG4gICAqIH0pO1xuICAgKlxuICAgKiBfLmZpbHRlcihbJ2FiYycsICdkZWYnXSwgL2VmLyk7XG4gICAqIC8vID0+IFsnZGVmJ11cbiAgICovXG4gIHZhciBpdGVyYXRlZSA9IGJhc2VJdGVyYXRlZTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcGVyZm9ybXMgYSBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIGEgZ2l2ZW5cbiAgICogb2JqZWN0IGFuZCBgc291cmNlYCwgcmV0dXJuaW5nIGB0cnVlYCBpZiB0aGUgZ2l2ZW4gb2JqZWN0IGhhcyBlcXVpdmFsZW50XG4gICAqIHByb3BlcnR5IHZhbHVlcywgZWxzZSBgZmFsc2VgLlxuICAgKlxuICAgKiAqKk5vdGU6KiogVGhlIGNyZWF0ZWQgZnVuY3Rpb24gaXMgZXF1aXZhbGVudCB0byBgXy5pc01hdGNoYCB3aXRoIGBzb3VyY2VgXG4gICAqIHBhcnRpYWxseSBhcHBsaWVkLlxuICAgKlxuICAgKiBQYXJ0aWFsIGNvbXBhcmlzb25zIHdpbGwgbWF0Y2ggZW1wdHkgYXJyYXkgYW5kIGVtcHR5IG9iamVjdCBgc291cmNlYFxuICAgKiB2YWx1ZXMgYWdhaW5zdCBhbnkgYXJyYXkgb3Igb2JqZWN0IHZhbHVlLCByZXNwZWN0aXZlbHkuIFNlZSBgXy5pc0VxdWFsYFxuICAgKiBmb3IgYSBsaXN0IG9mIHN1cHBvcnRlZCB2YWx1ZSBjb21wYXJpc29ucy5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAc2luY2UgMy4wLjBcbiAgICogQGNhdGVnb3J5IFV0aWxcbiAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIG9iamVjdHMgPSBbXG4gICAqICAgeyAnYSc6IDEsICdiJzogMiwgJ2MnOiAzIH0sXG4gICAqICAgeyAnYSc6IDQsICdiJzogNSwgJ2MnOiA2IH1cbiAgICogXTtcbiAgICpcbiAgICogXy5maWx0ZXIob2JqZWN0cywgXy5tYXRjaGVzKHsgJ2EnOiA0LCAnYyc6IDYgfSkpO1xuICAgKiAvLyA9PiBbeyAnYSc6IDQsICdiJzogNSwgJ2MnOiA2IH1dXG4gICAqL1xuICBmdW5jdGlvbiBtYXRjaGVzKHNvdXJjZSkge1xuICAgIHJldHVybiBiYXNlTWF0Y2hlcyhhc3NpZ24oe30sIHNvdXJjZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYWxsIG93biBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBmdW5jdGlvbiBwcm9wZXJ0aWVzIG9mIGEgc291cmNlXG4gICAqIG9iamVjdCB0byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LiBJZiBgb2JqZWN0YCBpcyBhIGZ1bmN0aW9uLCB0aGVuIG1ldGhvZHNcbiAgICogYXJlIGFkZGVkIHRvIGl0cyBwcm90b3R5cGUgYXMgd2VsbC5cbiAgICpcbiAgICogKipOb3RlOioqIFVzZSBgXy5ydW5JbkNvbnRleHRgIHRvIGNyZWF0ZSBhIHByaXN0aW5lIGBsb2Rhc2hgIGZ1bmN0aW9uIHRvXG4gICAqIGF2b2lkIGNvbmZsaWN0cyBjYXVzZWQgYnkgbW9kaWZ5aW5nIHRoZSBvcmlnaW5hbC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IFV0aWxcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IFtvYmplY3Q9bG9kYXNoXSBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgZnVuY3Rpb25zIHRvIGFkZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY2hhaW49dHJ1ZV0gU3BlY2lmeSB3aGV0aGVyIG1peGlucyBhcmUgY2hhaW5hYmxlLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb258T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBmdW5jdGlvbiB2b3dlbHMoc3RyaW5nKSB7XG4gICAqICAgcmV0dXJuIF8uZmlsdGVyKHN0cmluZywgZnVuY3Rpb24odikge1xuICAgKiAgICAgcmV0dXJuIC9bYWVpb3VdL2kudGVzdCh2KTtcbiAgICogICB9KTtcbiAgICogfVxuICAgKlxuICAgKiBfLm1peGluKHsgJ3Zvd2Vscyc6IHZvd2VscyB9KTtcbiAgICogXy52b3dlbHMoJ2ZyZWQnKTtcbiAgICogLy8gPT4gWydlJ11cbiAgICpcbiAgICogXygnZnJlZCcpLnZvd2VscygpLnZhbHVlKCk7XG4gICAqIC8vID0+IFsnZSddXG4gICAqXG4gICAqIF8ubWl4aW4oeyAndm93ZWxzJzogdm93ZWxzIH0sIHsgJ2NoYWluJzogZmFsc2UgfSk7XG4gICAqIF8oJ2ZyZWQnKS52b3dlbHMoKTtcbiAgICogLy8gPT4gWydlJ11cbiAgICovXG4gIGZ1bmN0aW9uIG1peGluKG9iamVjdCwgc291cmNlLCBvcHRpb25zKSB7XG4gICAgdmFyIHByb3BzID0ga2V5cyhzb3VyY2UpLFxuICAgICAgICBtZXRob2ROYW1lcyA9IGJhc2VGdW5jdGlvbnMoc291cmNlLCBwcm9wcyk7XG5cbiAgICBpZiAob3B0aW9ucyA9PSBudWxsICYmXG4gICAgICAgICEoaXNPYmplY3Qoc291cmNlKSAmJiAobWV0aG9kTmFtZXMubGVuZ3RoIHx8ICFwcm9wcy5sZW5ndGgpKSkge1xuICAgICAgb3B0aW9ucyA9IHNvdXJjZTtcbiAgICAgIHNvdXJjZSA9IG9iamVjdDtcbiAgICAgIG9iamVjdCA9IHRoaXM7XG4gICAgICBtZXRob2ROYW1lcyA9IGJhc2VGdW5jdGlvbnMoc291cmNlLCBrZXlzKHNvdXJjZSkpO1xuICAgIH1cbiAgICB2YXIgY2hhaW4gPSAhKGlzT2JqZWN0KG9wdGlvbnMpICYmICdjaGFpbicgaW4gb3B0aW9ucykgfHwgISFvcHRpb25zLmNoYWluLFxuICAgICAgICBpc0Z1bmMgPSBpc0Z1bmN0aW9uKG9iamVjdCk7XG5cbiAgICBiYXNlRWFjaChtZXRob2ROYW1lcywgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBzb3VyY2VbbWV0aG9kTmFtZV07XG4gICAgICBvYmplY3RbbWV0aG9kTmFtZV0gPSBmdW5jO1xuICAgICAgaWYgKGlzRnVuYykge1xuICAgICAgICBvYmplY3QucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIGNoYWluQWxsID0gdGhpcy5fX2NoYWluX187XG4gICAgICAgICAgaWYgKGNoYWluIHx8IGNoYWluQWxsKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gb2JqZWN0KHRoaXMuX193cmFwcGVkX18pLFxuICAgICAgICAgICAgICAgIGFjdGlvbnMgPSByZXN1bHQuX19hY3Rpb25zX18gPSBjb3B5QXJyYXkodGhpcy5fX2FjdGlvbnNfXyk7XG5cbiAgICAgICAgICAgIGFjdGlvbnMucHVzaCh7ICdmdW5jJzogZnVuYywgJ2FyZ3MnOiBhcmd1bWVudHMsICd0aGlzQXJnJzogb2JqZWN0IH0pO1xuICAgICAgICAgICAgcmVzdWx0Ll9fY2hhaW5fXyA9IGNoYWluQWxsO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkob2JqZWN0LCBhcnJheVB1c2goW3RoaXMudmFsdWUoKV0sIGFyZ3VtZW50cykpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXZlcnRzIHRoZSBgX2AgdmFyaWFibGUgdG8gaXRzIHByZXZpb3VzIHZhbHVlIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvXG4gICAqIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IFV0aWxcbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogdmFyIGxvZGFzaCA9IF8ubm9Db25mbGljdCgpO1xuICAgKi9cbiAgZnVuY3Rpb24gbm9Db25mbGljdCgpIHtcbiAgICBpZiAocm9vdC5fID09PSB0aGlzKSB7XG4gICAgICByb290Ll8gPSBvbGREYXNoO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGB1bmRlZmluZWRgLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBzaW5jZSAyLjMuMFxuICAgKiBAY2F0ZWdvcnkgVXRpbFxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBfLnRpbWVzKDIsIF8ubm9vcCk7XG4gICAqIC8vID0+IFt1bmRlZmluZWQsIHVuZGVmaW5lZF1cbiAgICovXG4gIGZ1bmN0aW9uIG5vb3AoKSB7XG4gICAgLy8gTm8gb3BlcmF0aW9uIHBlcmZvcm1lZC5cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSB1bmlxdWUgSUQuIElmIGBwcmVmaXhgIGlzIGdpdmVuLCB0aGUgSUQgaXMgYXBwZW5kZWQgdG8gaXQuXG4gICAqXG4gICAqIEBzdGF0aWNcbiAgICogQHNpbmNlIDAuMS4wXG4gICAqIEBtZW1iZXJPZiBfXG4gICAqIEBjYXRlZ29yeSBVdGlsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJlZml4PScnXSBUaGUgdmFsdWUgdG8gcHJlZml4IHRoZSBJRCB3aXRoLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB1bmlxdWUgSUQuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8udW5pcXVlSWQoJ2NvbnRhY3RfJyk7XG4gICAqIC8vID0+ICdjb250YWN0XzEwNCdcbiAgICpcbiAgICogXy51bmlxdWVJZCgpO1xuICAgKiAvLyA9PiAnMTA1J1xuICAgKi9cbiAgZnVuY3Rpb24gdW5pcXVlSWQocHJlZml4KSB7XG4gICAgdmFyIGlkID0gKytpZENvdW50ZXI7XG4gICAgcmV0dXJuIHRvU3RyaW5nKHByZWZpeCkgKyBpZDtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIG1heGltdW0gdmFsdWUgb2YgYGFycmF5YC4gSWYgYGFycmF5YCBpcyBlbXB0eSBvciBmYWxzZXksXG4gICAqIGB1bmRlZmluZWRgIGlzIHJldHVybmVkLlxuICAgKlxuICAgKiBAc3RhdGljXG4gICAqIEBzaW5jZSAwLjEuMFxuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICAgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWF4aW11bSB2YWx1ZS5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogXy5tYXgoWzQsIDIsIDgsIDZdKTtcbiAgICogLy8gPT4gOFxuICAgKlxuICAgKiBfLm1heChbXSk7XG4gICAqIC8vID0+IHVuZGVmaW5lZFxuICAgKi9cbiAgZnVuY3Rpb24gbWF4KGFycmF5KSB7XG4gICAgcmV0dXJuIChhcnJheSAmJiBhcnJheS5sZW5ndGgpXG4gICAgICA/IGJhc2VFeHRyZW11bShhcnJheSwgaWRlbnRpdHksIGJhc2VHdClcbiAgICAgIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBtaW5pbXVtIHZhbHVlIG9mIGBhcnJheWAuIElmIGBhcnJheWAgaXMgZW1wdHkgb3IgZmFsc2V5LFxuICAgKiBgdW5kZWZpbmVkYCBpcyByZXR1cm5lZC5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAc2luY2UgMC4xLjBcbiAgICogQG1lbWJlck9mIF9cbiAgICogQGNhdGVnb3J5IE1hdGhcbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIG1pbmltdW0gdmFsdWUuXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIF8ubWluKFs0LCAyLCA4LCA2XSk7XG4gICAqIC8vID0+IDJcbiAgICpcbiAgICogXy5taW4oW10pO1xuICAgKiAvLyA9PiB1bmRlZmluZWRcbiAgICovXG4gIGZ1bmN0aW9uIG1pbihhcnJheSkge1xuICAgIHJldHVybiAoYXJyYXkgJiYgYXJyYXkubGVuZ3RoKVxuICAgICAgPyBiYXNlRXh0cmVtdW0oYXJyYXksIGlkZW50aXR5LCBiYXNlTHQpXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvLyBBZGQgbWV0aG9kcyB0aGF0IHJldHVybiB3cmFwcGVkIHZhbHVlcyBpbiBjaGFpbiBzZXF1ZW5jZXMuXG4gIGxvZGFzaC5hc3NpZ25JbiA9IGFzc2lnbkluO1xuICBsb2Rhc2guYmVmb3JlID0gYmVmb3JlO1xuICBsb2Rhc2guYmluZCA9IGJpbmQ7XG4gIGxvZGFzaC5jaGFpbiA9IGNoYWluO1xuICBsb2Rhc2guY29tcGFjdCA9IGNvbXBhY3Q7XG4gIGxvZGFzaC5jb25jYXQgPSBjb25jYXQ7XG4gIGxvZGFzaC5jcmVhdGUgPSBjcmVhdGU7XG4gIGxvZGFzaC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICBsb2Rhc2guZGVmZXIgPSBkZWZlcjtcbiAgbG9kYXNoLmRlbGF5ID0gZGVsYXk7XG4gIGxvZGFzaC5maWx0ZXIgPSBmaWx0ZXI7XG4gIGxvZGFzaC5mbGF0dGVuID0gZmxhdHRlbjtcbiAgbG9kYXNoLmZsYXR0ZW5EZWVwID0gZmxhdHRlbkRlZXA7XG4gIGxvZGFzaC5pdGVyYXRlZSA9IGl0ZXJhdGVlO1xuICBsb2Rhc2gua2V5cyA9IGtleXM7XG4gIGxvZGFzaC5tYXAgPSBtYXA7XG4gIGxvZGFzaC5tYXRjaGVzID0gbWF0Y2hlcztcbiAgbG9kYXNoLm1peGluID0gbWl4aW47XG4gIGxvZGFzaC5uZWdhdGUgPSBuZWdhdGU7XG4gIGxvZGFzaC5vbmNlID0gb25jZTtcbiAgbG9kYXNoLnBpY2sgPSBwaWNrO1xuICBsb2Rhc2guc2xpY2UgPSBzbGljZTtcbiAgbG9kYXNoLnNvcnRCeSA9IHNvcnRCeTtcbiAgbG9kYXNoLnRhcCA9IHRhcDtcbiAgbG9kYXNoLnRocnUgPSB0aHJ1O1xuICBsb2Rhc2gudG9BcnJheSA9IHRvQXJyYXk7XG4gIGxvZGFzaC52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgLy8gQWRkIGFsaWFzZXMuXG4gIGxvZGFzaC5leHRlbmQgPSBhc3NpZ25JbjtcblxuICAvLyBBZGQgbWV0aG9kcyB0byBgbG9kYXNoLnByb3RvdHlwZWAuXG4gIG1peGluKGxvZGFzaCwgbG9kYXNoKTtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLy8gQWRkIG1ldGhvZHMgdGhhdCByZXR1cm4gdW53cmFwcGVkIHZhbHVlcyBpbiBjaGFpbiBzZXF1ZW5jZXMuXG4gIGxvZGFzaC5jbG9uZSA9IGNsb25lO1xuICBsb2Rhc2guZXNjYXBlID0gZXNjYXBlO1xuICBsb2Rhc2guZXZlcnkgPSBldmVyeTtcbiAgbG9kYXNoLmZpbmQgPSBmaW5kO1xuICBsb2Rhc2guZm9yRWFjaCA9IGZvckVhY2g7XG4gIGxvZGFzaC5oYXMgPSBoYXM7XG4gIGxvZGFzaC5oZWFkID0gaGVhZDtcbiAgbG9kYXNoLmlkZW50aXR5ID0gaWRlbnRpdHk7XG4gIGxvZGFzaC5pbmRleE9mID0gaW5kZXhPZjtcbiAgbG9kYXNoLmlzQXJndW1lbnRzID0gaXNBcmd1bWVudHM7XG4gIGxvZGFzaC5pc0FycmF5ID0gaXNBcnJheTtcbiAgbG9kYXNoLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcbiAgbG9kYXNoLmlzRGF0ZSA9IGlzRGF0ZTtcbiAgbG9kYXNoLmlzRW1wdHkgPSBpc0VtcHR5O1xuICBsb2Rhc2guaXNFcXVhbCA9IGlzRXF1YWw7XG4gIGxvZGFzaC5pc0Zpbml0ZSA9IGlzRmluaXRlO1xuICBsb2Rhc2guaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG4gIGxvZGFzaC5pc05hTiA9IGlzTmFOO1xuICBsb2Rhc2guaXNOdWxsID0gaXNOdWxsO1xuICBsb2Rhc2guaXNOdW1iZXIgPSBpc051bWJlcjtcbiAgbG9kYXNoLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG4gIGxvZGFzaC5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuICBsb2Rhc2guaXNTdHJpbmcgPSBpc1N0cmluZztcbiAgbG9kYXNoLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG4gIGxvZGFzaC5sYXN0ID0gbGFzdDtcbiAgbG9kYXNoLm1heCA9IG1heDtcbiAgbG9kYXNoLm1pbiA9IG1pbjtcbiAgbG9kYXNoLm5vQ29uZmxpY3QgPSBub0NvbmZsaWN0O1xuICBsb2Rhc2gubm9vcCA9IG5vb3A7XG4gIGxvZGFzaC5yZWR1Y2UgPSByZWR1Y2U7XG4gIGxvZGFzaC5yZXN1bHQgPSByZXN1bHQ7XG4gIGxvZGFzaC5zaXplID0gc2l6ZTtcbiAgbG9kYXNoLnNvbWUgPSBzb21lO1xuICBsb2Rhc2gudW5pcXVlSWQgPSB1bmlxdWVJZDtcblxuICAvLyBBZGQgYWxpYXNlcy5cbiAgbG9kYXNoLmVhY2ggPSBmb3JFYWNoO1xuICBsb2Rhc2guZmlyc3QgPSBoZWFkO1xuXG4gIG1peGluKGxvZGFzaCwgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBzb3VyY2UgPSB7fTtcbiAgICBiYXNlRm9yT3duKGxvZGFzaCwgZnVuY3Rpb24oZnVuYywgbWV0aG9kTmFtZSkge1xuICAgICAgaWYgKCFoYXNPd25Qcm9wZXJ0eS5jYWxsKGxvZGFzaC5wcm90b3R5cGUsIG1ldGhvZE5hbWUpKSB7XG4gICAgICAgIHNvdXJjZVttZXRob2ROYW1lXSA9IGZ1bmM7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHNvdXJjZTtcbiAgfSgpKSwgeyAnY2hhaW4nOiBmYWxzZSB9KTtcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFRoZSBzZW1hbnRpYyB2ZXJzaW9uIG51bWJlci5cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyT2YgX1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgbG9kYXNoLlZFUlNJT04gPSBWRVJTSU9OO1xuXG4gIC8vIEFkZCBgQXJyYXlgIG1ldGhvZHMgdG8gYGxvZGFzaC5wcm90b3R5cGVgLlxuICBiYXNlRWFjaChbJ3BvcCcsICdqb2luJywgJ3JlcGxhY2UnLCAncmV2ZXJzZScsICdzcGxpdCcsICdwdXNoJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obWV0aG9kTmFtZSkge1xuICAgIHZhciBmdW5jID0gKC9eKD86cmVwbGFjZXxzcGxpdCkkLy50ZXN0KG1ldGhvZE5hbWUpID8gU3RyaW5nLnByb3RvdHlwZSA6IGFycmF5UHJvdG8pW21ldGhvZE5hbWVdLFxuICAgICAgICBjaGFpbk5hbWUgPSAvXig/OnB1c2h8c29ydHx1bnNoaWZ0KSQvLnRlc3QobWV0aG9kTmFtZSkgPyAndGFwJyA6ICd0aHJ1JyxcbiAgICAgICAgcmV0VW53cmFwcGVkID0gL14oPzpwb3B8am9pbnxyZXBsYWNlfHNoaWZ0KSQvLnRlc3QobWV0aG9kTmFtZSk7XG5cbiAgICBsb2Rhc2gucHJvdG90eXBlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmIChyZXRVbndyYXBwZWQgJiYgIXRoaXMuX19jaGFpbl9fKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWUoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzW2NoYWluTmFtZV0oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdLCBhcmdzKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEFkZCBjaGFpbiBzZXF1ZW5jZSBtZXRob2RzIHRvIHRoZSBgbG9kYXNoYCB3cmFwcGVyLlxuICBsb2Rhc2gucHJvdG90eXBlLnRvSlNPTiA9IGxvZGFzaC5wcm90b3R5cGUudmFsdWVPZiA9IGxvZGFzaC5wcm90b3R5cGUudmFsdWUgPSB3cmFwcGVyVmFsdWU7XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLy8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3IgY29uZGl0aW9uIHBhdHRlcm5zIGxpa2U6XG4gIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEV4cG9zZSBMb2Rhc2ggb24gdGhlIGdsb2JhbCBvYmplY3QgdG8gcHJldmVudCBlcnJvcnMgd2hlbiBMb2Rhc2ggaXNcbiAgICAvLyBsb2FkZWQgYnkgYSBzY3JpcHQgdGFnIGluIHRoZSBwcmVzZW5jZSBvZiBhbiBBTUQgbG9hZGVyLlxuICAgIC8vIFNlZSBodHRwOi8vcmVxdWlyZWpzLm9yZy9kb2NzL2Vycm9ycy5odG1sI21pc21hdGNoIGZvciBtb3JlIGRldGFpbHMuXG4gICAgLy8gVXNlIGBfLm5vQ29uZmxpY3RgIHRvIHJlbW92ZSBMb2Rhc2ggZnJvbSB0aGUgZ2xvYmFsIG9iamVjdC5cbiAgICByb290Ll8gPSBsb2Rhc2g7XG5cbiAgICAvLyBEZWZpbmUgYXMgYW4gYW5vbnltb3VzIG1vZHVsZSBzbywgdGhyb3VnaCBwYXRoIG1hcHBpbmcsIGl0IGNhbiBiZVxuICAgIC8vIHJlZmVyZW5jZWQgYXMgdGhlIFwidW5kZXJzY29yZVwiIG1vZHVsZS5cbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbG9kYXNoO1xuICAgIH0pO1xuICB9XG4gIC8vIENoZWNrIGZvciBgZXhwb3J0c2AgYWZ0ZXIgYGRlZmluZWAgaW4gY2FzZSBhIGJ1aWxkIG9wdGltaXplciBhZGRzIGl0LlxuICBlbHNlIGlmIChmcmVlTW9kdWxlKSB7XG4gICAgLy8gRXhwb3J0IGZvciBOb2RlLmpzLlxuICAgIChmcmVlTW9kdWxlLmV4cG9ydHMgPSBsb2Rhc2gpLl8gPSBsb2Rhc2g7XG4gICAgLy8gRXhwb3J0IGZvciBDb21tb25KUyBzdXBwb3J0LlxuICAgIGZyZWVFeHBvcnRzLl8gPSBsb2Rhc2g7XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gRXhwb3J0IHRvIHRoZSBnbG9iYWwgb2JqZWN0LlxuICAgIHJvb3QuXyA9IGxvZGFzaDtcbiAgfVxufS5jYWxsKHRoaXMpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gTXVsdGlTdHJlYW1cblxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxudmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbScpXG5cbmluaGVyaXRzKE11bHRpU3RyZWFtLCBzdHJlYW0uUmVhZGFibGUpXG5cbmZ1bmN0aW9uIE11bHRpU3RyZWFtIChzdHJlYW1zLCBvcHRzKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBpZiAoIShzZWxmIGluc3RhbmNlb2YgTXVsdGlTdHJlYW0pKSByZXR1cm4gbmV3IE11bHRpU3RyZWFtKHN0cmVhbXMsIG9wdHMpXG4gIHN0cmVhbS5SZWFkYWJsZS5jYWxsKHNlbGYsIG9wdHMpXG5cbiAgc2VsZi5kZXN0cm95ZWQgPSBmYWxzZVxuXG4gIHNlbGYuX2RyYWluZWQgPSBmYWxzZVxuICBzZWxmLl9mb3J3YXJkaW5nID0gZmFsc2VcbiAgc2VsZi5fY3VycmVudCA9IG51bGxcbiAgc2VsZi5fdG9TdHJlYW1zMiA9IChvcHRzICYmIG9wdHMub2JqZWN0TW9kZSkgPyB0b1N0cmVhbXMyT2JqIDogdG9TdHJlYW1zMkJ1ZlxuXG4gIGlmICh0eXBlb2Ygc3RyZWFtcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHNlbGYuX3F1ZXVlID0gc3RyZWFtc1xuICB9IGVsc2Uge1xuICAgIHNlbGYuX3F1ZXVlID0gc3RyZWFtcy5tYXAoc2VsZi5fdG9TdHJlYW1zMilcbiAgICBzZWxmLl9xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChzdHJlYW0pIHtcbiAgICAgIGlmICh0eXBlb2Ygc3RyZWFtICE9PSAnZnVuY3Rpb24nKSBzZWxmLl9hdHRhY2hFcnJvckxpc3RlbmVyKHN0cmVhbSlcbiAgICB9KVxuICB9XG5cbiAgc2VsZi5fbmV4dCgpXG59XG5cbk11bHRpU3RyZWFtLm9iaiA9IGZ1bmN0aW9uIChzdHJlYW1zKSB7XG4gIHJldHVybiBuZXcgTXVsdGlTdHJlYW0oc3RyZWFtcywgeyBvYmplY3RNb2RlOiB0cnVlLCBoaWdoV2F0ZXJNYXJrOiAxNiB9KVxufVxuXG5NdWx0aVN0cmVhbS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuX2RyYWluZWQgPSB0cnVlXG4gIHRoaXMuX2ZvcndhcmQoKVxufVxuXG5NdWx0aVN0cmVhbS5wcm90b3R5cGUuX2ZvcndhcmQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLl9mb3J3YXJkaW5nIHx8ICF0aGlzLl9kcmFpbmVkIHx8ICF0aGlzLl9jdXJyZW50KSByZXR1cm5cbiAgdGhpcy5fZm9yd2FyZGluZyA9IHRydWVcblxuICB2YXIgY2h1bmtcbiAgd2hpbGUgKChjaHVuayA9IHRoaXMuX2N1cnJlbnQucmVhZCgpKSAhPT0gbnVsbCkge1xuICAgIHRoaXMuX2RyYWluZWQgPSB0aGlzLnB1c2goY2h1bmspXG4gIH1cblxuICB0aGlzLl9mb3J3YXJkaW5nID0gZmFsc2Vcbn1cblxuTXVsdGlTdHJlYW0ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyKSB7XG4gIGlmICh0aGlzLmRlc3Ryb3llZCkgcmV0dXJuXG4gIHRoaXMuZGVzdHJveWVkID0gdHJ1ZVxuXG4gIGlmICh0aGlzLl9jdXJyZW50ICYmIHRoaXMuX2N1cnJlbnQuZGVzdHJveSkgdGhpcy5fY3VycmVudC5kZXN0cm95KClcbiAgaWYgKHR5cGVvZiB0aGlzLl9xdWV1ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMuX3F1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHN0cmVhbSkge1xuICAgICAgaWYgKHN0cmVhbS5kZXN0cm95KSBzdHJlYW0uZGVzdHJveSgpXG4gICAgfSlcbiAgfVxuXG4gIGlmIChlcnIpIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpXG4gIHRoaXMuZW1pdCgnY2xvc2UnKVxufVxuXG5NdWx0aVN0cmVhbS5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuICBzZWxmLl9jdXJyZW50ID0gbnVsbFxuXG4gIGlmICh0eXBlb2Ygc2VsZi5fcXVldWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICBzZWxmLl9xdWV1ZShmdW5jdGlvbiAoZXJyLCBzdHJlYW0pIHtcbiAgICAgIGlmIChlcnIpIHJldHVybiBzZWxmLmRlc3Ryb3koZXJyKVxuICAgICAgc3RyZWFtID0gc2VsZi5fdG9TdHJlYW1zMihzdHJlYW0pXG4gICAgICBzZWxmLl9hdHRhY2hFcnJvckxpc3RlbmVyKHN0cmVhbSlcbiAgICAgIHNlbGYuX2dvdE5leHRTdHJlYW0oc3RyZWFtKVxuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgdmFyIHN0cmVhbSA9IHNlbGYuX3F1ZXVlLnNoaWZ0KClcbiAgICBpZiAodHlwZW9mIHN0cmVhbSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgc3RyZWFtID0gc2VsZi5fdG9TdHJlYW1zMihzdHJlYW0oKSlcbiAgICAgIHNlbGYuX2F0dGFjaEVycm9yTGlzdGVuZXIoc3RyZWFtKVxuICAgIH1cbiAgICBzZWxmLl9nb3ROZXh0U3RyZWFtKHN0cmVhbSlcbiAgfVxufVxuXG5NdWx0aVN0cmVhbS5wcm90b3R5cGUuX2dvdE5leHRTdHJlYW0gPSBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gIHZhciBzZWxmID0gdGhpc1xuXG4gIGlmICghc3RyZWFtKSB7XG4gICAgc2VsZi5wdXNoKG51bGwpXG4gICAgc2VsZi5kZXN0cm95KClcbiAgICByZXR1cm5cbiAgfVxuXG4gIHNlbGYuX2N1cnJlbnQgPSBzdHJlYW1cbiAgc2VsZi5fZm9yd2FyZCgpXG5cbiAgc3RyZWFtLm9uKCdyZWFkYWJsZScsIG9uUmVhZGFibGUpXG4gIHN0cmVhbS5vbmNlKCdlbmQnLCBvbkVuZClcbiAgc3RyZWFtLm9uY2UoJ2Nsb3NlJywgb25DbG9zZSlcblxuICBmdW5jdGlvbiBvblJlYWRhYmxlICgpIHtcbiAgICBzZWxmLl9mb3J3YXJkKClcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQ2xvc2UgKCkge1xuICAgIGlmICghc3RyZWFtLl9yZWFkYWJsZVN0YXRlLmVuZGVkKSB7XG4gICAgICBzZWxmLmRlc3Ryb3koKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRW5kICgpIHtcbiAgICBzZWxmLl9jdXJyZW50ID0gbnVsbFxuICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcigncmVhZGFibGUnLCBvblJlYWRhYmxlKVxuICAgIHN0cmVhbS5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25FbmQpXG4gICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uQ2xvc2UpXG4gICAgc2VsZi5fbmV4dCgpXG4gIH1cbn1cblxuTXVsdGlTdHJlYW0ucHJvdG90eXBlLl9hdHRhY2hFcnJvckxpc3RlbmVyID0gZnVuY3Rpb24gKHN0cmVhbSkge1xuICB2YXIgc2VsZiA9IHRoaXNcbiAgaWYgKCFzdHJlYW0pIHJldHVyblxuXG4gIHN0cmVhbS5vbmNlKCdlcnJvcicsIG9uRXJyb3IpXG5cbiAgZnVuY3Rpb24gb25FcnJvciAoZXJyKSB7XG4gICAgc3RyZWFtLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uRXJyb3IpXG4gICAgc2VsZi5kZXN0cm95KGVycilcbiAgfVxufVxuXG5mdW5jdGlvbiB0b1N0cmVhbXMyT2JqIChzKSB7XG4gIHJldHVybiB0b1N0cmVhbXMyKHMsIHtvYmplY3RNb2RlOiB0cnVlLCBoaWdoV2F0ZXJNYXJrOiAxNn0pXG59XG5cbmZ1bmN0aW9uIHRvU3RyZWFtczJCdWYgKHMpIHtcbiAgcmV0dXJuIHRvU3RyZWFtczIocylcbn1cblxuZnVuY3Rpb24gdG9TdHJlYW1zMiAocywgb3B0cykge1xuICBpZiAoIXMgfHwgdHlwZW9mIHMgPT09ICdmdW5jdGlvbicgfHwgcy5fcmVhZGFibGVTdGF0ZSkgcmV0dXJuIHNcblxuICB2YXIgd3JhcCA9IG5ldyBzdHJlYW0uUmVhZGFibGUob3B0cykud3JhcChzKVxuICBpZiAocy5kZXN0cm95KSB7XG4gICAgd3JhcC5kZXN0cm95ID0gcy5kZXN0cm95LmJpbmQocylcbiAgfVxuICByZXR1cm4gd3JhcFxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pZiAoIXByb2Nlc3MudmVyc2lvbiB8fFxuICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MC4nKSA9PT0gMCB8fFxuICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MS4nKSA9PT0gMCAmJiBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuOC4nKSAhPT0gMCkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHsgbmV4dFRpY2s6IG5leHRUaWNrIH07XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHByb2Nlc3Ncbn1cblxuZnVuY3Rpb24gbmV4dFRpY2soZm4sIGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiY2FsbGJhY2tcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgdmFyIGFyZ3MsIGk7XG4gIHN3aXRjaCAobGVuKSB7XG4gIGNhc2UgMDpcbiAgY2FzZSAxOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZuKTtcbiAgY2FzZSAyOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGlja09uZSgpIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSk7XG4gICAgfSk7XG4gIGNhc2UgMzpcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tUd28oKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIpO1xuICAgIH0pO1xuICBjYXNlIDQ6XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrVGhyZWUoKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICAgIH0pO1xuICBkZWZhdWx0OlxuICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBhcmdzLmxlbmd0aCkge1xuICAgICAgYXJnc1tpKytdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7XG4gICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9KTtcbiAgfVxufVxuXG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXNhcCA9IHJlcXVpcmUoJ2FzYXAvcmF3Jyk7XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vLyBTdGF0ZXM6XG4vL1xuLy8gMCAtIHBlbmRpbmdcbi8vIDEgLSBmdWxmaWxsZWQgd2l0aCBfdmFsdWVcbi8vIDIgLSByZWplY3RlZCB3aXRoIF92YWx1ZVxuLy8gMyAtIGFkb3B0ZWQgdGhlIHN0YXRlIG9mIGFub3RoZXIgcHJvbWlzZSwgX3ZhbHVlXG4vL1xuLy8gb25jZSB0aGUgc3RhdGUgaXMgbm8gbG9uZ2VyIHBlbmRpbmcgKDApIGl0IGlzIGltbXV0YWJsZVxuXG4vLyBBbGwgYF9gIHByZWZpeGVkIHByb3BlcnRpZXMgd2lsbCBiZSByZWR1Y2VkIHRvIGBfe3JhbmRvbSBudW1iZXJ9YFxuLy8gYXQgYnVpbGQgdGltZSB0byBvYmZ1c2NhdGUgdGhlbSBhbmQgZGlzY291cmFnZSB0aGVpciB1c2UuXG4vLyBXZSBkb24ndCB1c2Ugc3ltYm9scyBvciBPYmplY3QuZGVmaW5lUHJvcGVydHkgdG8gZnVsbHkgaGlkZSB0aGVtXG4vLyBiZWNhdXNlIHRoZSBwZXJmb3JtYW5jZSBpc24ndCBnb29kIGVub3VnaC5cblxuXG4vLyB0byBhdm9pZCB1c2luZyB0cnkvY2F0Y2ggaW5zaWRlIGNyaXRpY2FsIGZ1bmN0aW9ucywgd2Vcbi8vIGV4dHJhY3QgdGhlbSB0byBoZXJlLlxudmFyIExBU1RfRVJST1IgPSBudWxsO1xudmFyIElTX0VSUk9SID0ge307XG5mdW5jdGlvbiBnZXRUaGVuKG9iaikge1xuICB0cnkge1xuICAgIHJldHVybiBvYmoudGhlbjtcbiAgfSBjYXRjaCAoZXgpIHtcbiAgICBMQVNUX0VSUk9SID0gZXg7XG4gICAgcmV0dXJuIElTX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyeUNhbGxPbmUoZm4sIGEpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZm4oYSk7XG4gIH0gY2F0Y2ggKGV4KSB7XG4gICAgTEFTVF9FUlJPUiA9IGV4O1xuICAgIHJldHVybiBJU19FUlJPUjtcbiAgfVxufVxuZnVuY3Rpb24gdHJ5Q2FsbFR3byhmbiwgYSwgYikge1xuICB0cnkge1xuICAgIGZuKGEsIGIpO1xuICB9IGNhdGNoIChleCkge1xuICAgIExBU1RfRVJST1IgPSBleDtcbiAgICByZXR1cm4gSVNfRVJST1I7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG5mdW5jdGlvbiBQcm9taXNlKGZuKSB7XG4gIGlmICh0eXBlb2YgdGhpcyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdQcm9taXNlcyBtdXN0IGJlIGNvbnN0cnVjdGVkIHZpYSBuZXcnKTtcbiAgfVxuICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvbWlzZSBjb25zdHJ1Y3RvclxcJ3MgYXJndW1lbnQgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgfVxuICB0aGlzLl80MCA9IDA7XG4gIHRoaXMuXzY1ID0gMDtcbiAgdGhpcy5fNTUgPSBudWxsO1xuICB0aGlzLl83MiA9IG51bGw7XG4gIGlmIChmbiA9PT0gbm9vcCkgcmV0dXJuO1xuICBkb1Jlc29sdmUoZm4sIHRoaXMpO1xufVxuUHJvbWlzZS5fMzcgPSBudWxsO1xuUHJvbWlzZS5fODcgPSBudWxsO1xuUHJvbWlzZS5fNjEgPSBub29wO1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24ob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgaWYgKHRoaXMuY29uc3RydWN0b3IgIT09IFByb21pc2UpIHtcbiAgICByZXR1cm4gc2FmZVRoZW4odGhpcywgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuICB9XG4gIHZhciByZXMgPSBuZXcgUHJvbWlzZShub29wKTtcbiAgaGFuZGxlKHRoaXMsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXMpKTtcbiAgcmV0dXJuIHJlcztcbn07XG5cbmZ1bmN0aW9uIHNhZmVUaGVuKHNlbGYsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHJldHVybiBuZXcgc2VsZi5jb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcyA9IG5ldyBQcm9taXNlKG5vb3ApO1xuICAgIHJlcy50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgaGFuZGxlKHNlbGYsIG5ldyBIYW5kbGVyKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCByZXMpKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBoYW5kbGUoc2VsZiwgZGVmZXJyZWQpIHtcbiAgd2hpbGUgKHNlbGYuXzY1ID09PSAzKSB7XG4gICAgc2VsZiA9IHNlbGYuXzU1O1xuICB9XG4gIGlmIChQcm9taXNlLl8zNykge1xuICAgIFByb21pc2UuXzM3KHNlbGYpO1xuICB9XG4gIGlmIChzZWxmLl82NSA9PT0gMCkge1xuICAgIGlmIChzZWxmLl80MCA9PT0gMCkge1xuICAgICAgc2VsZi5fNDAgPSAxO1xuICAgICAgc2VsZi5fNzIgPSBkZWZlcnJlZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNlbGYuXzQwID09PSAxKSB7XG4gICAgICBzZWxmLl80MCA9IDI7XG4gICAgICBzZWxmLl83MiA9IFtzZWxmLl83MiwgZGVmZXJyZWRdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZWxmLl83Mi5wdXNoKGRlZmVycmVkKTtcbiAgICByZXR1cm47XG4gIH1cbiAgaGFuZGxlUmVzb2x2ZWQoc2VsZiwgZGVmZXJyZWQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVSZXNvbHZlZChzZWxmLCBkZWZlcnJlZCkge1xuICBhc2FwKGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYiA9IHNlbGYuXzY1ID09PSAxID8gZGVmZXJyZWQub25GdWxmaWxsZWQgOiBkZWZlcnJlZC5vblJlamVjdGVkO1xuICAgIGlmIChjYiA9PT0gbnVsbCkge1xuICAgICAgaWYgKHNlbGYuXzY1ID09PSAxKSB7XG4gICAgICAgIHJlc29sdmUoZGVmZXJyZWQucHJvbWlzZSwgc2VsZi5fNTUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KGRlZmVycmVkLnByb21pc2UsIHNlbGYuXzU1KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldCA9IHRyeUNhbGxPbmUoY2IsIHNlbGYuXzU1KTtcbiAgICBpZiAocmV0ID09PSBJU19FUlJPUikge1xuICAgICAgcmVqZWN0KGRlZmVycmVkLnByb21pc2UsIExBU1RfRVJST1IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlKGRlZmVycmVkLnByb21pc2UsIHJldCk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIHJlc29sdmUoc2VsZiwgbmV3VmFsdWUpIHtcbiAgLy8gUHJvbWlzZSBSZXNvbHV0aW9uIFByb2NlZHVyZTogaHR0cHM6Ly9naXRodWIuY29tL3Byb21pc2VzLWFwbHVzL3Byb21pc2VzLXNwZWMjdGhlLXByb21pc2UtcmVzb2x1dGlvbi1wcm9jZWR1cmVcbiAgaWYgKG5ld1ZhbHVlID09PSBzZWxmKSB7XG4gICAgcmV0dXJuIHJlamVjdChcbiAgICAgIHNlbGYsXG4gICAgICBuZXcgVHlwZUVycm9yKCdBIHByb21pc2UgY2Fubm90IGJlIHJlc29sdmVkIHdpdGggaXRzZWxmLicpXG4gICAgKTtcbiAgfVxuICBpZiAoXG4gICAgbmV3VmFsdWUgJiZcbiAgICAodHlwZW9mIG5ld1ZhbHVlID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgbmV3VmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICkge1xuICAgIHZhciB0aGVuID0gZ2V0VGhlbihuZXdWYWx1ZSk7XG4gICAgaWYgKHRoZW4gPT09IElTX0VSUk9SKSB7XG4gICAgICByZXR1cm4gcmVqZWN0KHNlbGYsIExBU1RfRVJST1IpO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGVuID09PSBzZWxmLnRoZW4gJiZcbiAgICAgIG5ld1ZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZVxuICAgICkge1xuICAgICAgc2VsZi5fNjUgPSAzO1xuICAgICAgc2VsZi5fNTUgPSBuZXdWYWx1ZTtcbiAgICAgIGZpbmFsZShzZWxmKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBkb1Jlc29sdmUodGhlbi5iaW5kKG5ld1ZhbHVlKSwgc2VsZik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHNlbGYuXzY1ID0gMTtcbiAgc2VsZi5fNTUgPSBuZXdWYWx1ZTtcbiAgZmluYWxlKHNlbGYpO1xufVxuXG5mdW5jdGlvbiByZWplY3Qoc2VsZiwgbmV3VmFsdWUpIHtcbiAgc2VsZi5fNjUgPSAyO1xuICBzZWxmLl81NSA9IG5ld1ZhbHVlO1xuICBpZiAoUHJvbWlzZS5fODcpIHtcbiAgICBQcm9taXNlLl84NyhzZWxmLCBuZXdWYWx1ZSk7XG4gIH1cbiAgZmluYWxlKHNlbGYpO1xufVxuZnVuY3Rpb24gZmluYWxlKHNlbGYpIHtcbiAgaWYgKHNlbGYuXzQwID09PSAxKSB7XG4gICAgaGFuZGxlKHNlbGYsIHNlbGYuXzcyKTtcbiAgICBzZWxmLl83MiA9IG51bGw7XG4gIH1cbiAgaWYgKHNlbGYuXzQwID09PSAyKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl83Mi5sZW5ndGg7IGkrKykge1xuICAgICAgaGFuZGxlKHNlbGYsIHNlbGYuXzcyW2ldKTtcbiAgICB9XG4gICAgc2VsZi5fNzIgPSBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIEhhbmRsZXIob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIHByb21pc2Upe1xuICB0aGlzLm9uRnVsZmlsbGVkID0gdHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nID8gb25GdWxmaWxsZWQgOiBudWxsO1xuICB0aGlzLm9uUmVqZWN0ZWQgPSB0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVqZWN0ZWQgOiBudWxsO1xuICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xufVxuXG4vKipcbiAqIFRha2UgYSBwb3RlbnRpYWxseSBtaXNiZWhhdmluZyByZXNvbHZlciBmdW5jdGlvbiBhbmQgbWFrZSBzdXJlXG4gKiBvbkZ1bGZpbGxlZCBhbmQgb25SZWplY3RlZCBhcmUgb25seSBjYWxsZWQgb25jZS5cbiAqXG4gKiBNYWtlcyBubyBndWFyYW50ZWVzIGFib3V0IGFzeW5jaHJvbnkuXG4gKi9cbmZ1bmN0aW9uIGRvUmVzb2x2ZShmbiwgcHJvbWlzZSkge1xuICB2YXIgZG9uZSA9IGZhbHNlO1xuICB2YXIgcmVzID0gdHJ5Q2FsbFR3byhmbiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKGRvbmUpIHJldHVybjtcbiAgICBkb25lID0gdHJ1ZTtcbiAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIGlmIChkb25lKSByZXR1cm47XG4gICAgZG9uZSA9IHRydWU7XG4gICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gIH0pO1xuICBpZiAoIWRvbmUgJiYgcmVzID09PSBJU19FUlJPUikge1xuICAgIGRvbmUgPSB0cnVlO1xuICAgIHJlamVjdChwcm9taXNlLCBMQVNUX0VSUk9SKTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vL1RoaXMgZmlsZSBjb250YWlucyB0aGUgRVM2IGV4dGVuc2lvbnMgdG8gdGhlIGNvcmUgUHJvbWlzZXMvQSsgQVBJXG5cbnZhciBQcm9taXNlID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuLyogU3RhdGljIEZ1bmN0aW9ucyAqL1xuXG52YXIgVFJVRSA9IHZhbHVlUHJvbWlzZSh0cnVlKTtcbnZhciBGQUxTRSA9IHZhbHVlUHJvbWlzZShmYWxzZSk7XG52YXIgTlVMTCA9IHZhbHVlUHJvbWlzZShudWxsKTtcbnZhciBVTkRFRklORUQgPSB2YWx1ZVByb21pc2UodW5kZWZpbmVkKTtcbnZhciBaRVJPID0gdmFsdWVQcm9taXNlKDApO1xudmFyIEVNUFRZU1RSSU5HID0gdmFsdWVQcm9taXNlKCcnKTtcblxuZnVuY3Rpb24gdmFsdWVQcm9taXNlKHZhbHVlKSB7XG4gIHZhciBwID0gbmV3IFByb21pc2UoUHJvbWlzZS5fNjEpO1xuICBwLl82NSA9IDE7XG4gIHAuXzU1ID0gdmFsdWU7XG4gIHJldHVybiBwO1xufVxuUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiB2YWx1ZTtcblxuICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiBOVUxMO1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIFVOREVGSU5FRDtcbiAgaWYgKHZhbHVlID09PSB0cnVlKSByZXR1cm4gVFJVRTtcbiAgaWYgKHZhbHVlID09PSBmYWxzZSkgcmV0dXJuIEZBTFNFO1xuICBpZiAodmFsdWUgPT09IDApIHJldHVybiBaRVJPO1xuICBpZiAodmFsdWUgPT09ICcnKSByZXR1cm4gRU1QVFlTVFJJTkc7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UodGhlbi5iaW5kKHZhbHVlKSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHJlamVjdChleCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlUHJvbWlzZSh2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLmFsbCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcnIpO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gcmVzb2x2ZShbXSk7XG4gICAgdmFyIHJlbWFpbmluZyA9IGFyZ3MubGVuZ3RoO1xuICAgIGZ1bmN0aW9uIHJlcyhpLCB2YWwpIHtcbiAgICAgIGlmICh2YWwgJiYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnIHx8IHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpKSB7XG4gICAgICAgIGlmICh2YWwgaW5zdGFuY2VvZiBQcm9taXNlICYmIHZhbC50aGVuID09PSBQcm9taXNlLnByb3RvdHlwZS50aGVuKSB7XG4gICAgICAgICAgd2hpbGUgKHZhbC5fNjUgPT09IDMpIHtcbiAgICAgICAgICAgIHZhbCA9IHZhbC5fNTU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh2YWwuXzY1ID09PSAxKSByZXR1cm4gcmVzKGksIHZhbC5fNTUpO1xuICAgICAgICAgIGlmICh2YWwuXzY1ID09PSAyKSByZWplY3QodmFsLl81NSk7XG4gICAgICAgICAgdmFsLnRoZW4oZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgcmVzKGksIHZhbCk7XG4gICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHRoZW4gPSB2YWwudGhlbjtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFByb21pc2UodGhlbi5iaW5kKHZhbCkpO1xuICAgICAgICAgICAgcC50aGVuKGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgICAgcmVzKGksIHZhbCk7XG4gICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXJnc1tpXSA9IHZhbDtcbiAgICAgIGlmICgtLXJlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICByZXNvbHZlKGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlcyhpLCBhcmdzW2ldKTtcbiAgICB9XG4gIH0pO1xufTtcblxuUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICByZWplY3QodmFsdWUpO1xuICB9KTtcbn07XG5cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSl7XG4gICAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKiBQcm90b3R5cGUgTWV0aG9kcyAqL1xuXG5Qcm9taXNlLnByb3RvdHlwZVsnY2F0Y2gnXSA9IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG59O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gSWYgb2JqLmhhc093blByb3BlcnR5IGhhcyBiZWVuIG92ZXJyaWRkZW4sIHRoZW4gY2FsbGluZ1xuLy8gb2JqLmhhc093blByb3BlcnR5KHByb3ApIHdpbGwgYnJlYWsuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9pc3N1ZXMvMTcwN1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihxcywgc2VwLCBlcSwgb3B0aW9ucykge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgdmFyIG9iaiA9IHt9O1xuXG4gIGlmICh0eXBlb2YgcXMgIT09ICdzdHJpbmcnIHx8IHFzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgcmVnZXhwID0gL1xcKy9nO1xuICBxcyA9IHFzLnNwbGl0KHNlcCk7XG5cbiAgdmFyIG1heEtleXMgPSAxMDAwO1xuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhLZXlzID09PSAnbnVtYmVyJykge1xuICAgIG1heEtleXMgPSBvcHRpb25zLm1heEtleXM7XG4gIH1cblxuICB2YXIgbGVuID0gcXMubGVuZ3RoO1xuICAvLyBtYXhLZXlzIDw9IDAgbWVhbnMgdGhhdCB3ZSBzaG91bGQgbm90IGxpbWl0IGtleXMgY291bnRcbiAgaWYgKG1heEtleXMgPiAwICYmIGxlbiA+IG1heEtleXMpIHtcbiAgICBsZW4gPSBtYXhLZXlzO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIHZhciB4ID0gcXNbaV0ucmVwbGFjZShyZWdleHAsICclMjAnKSxcbiAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSxcbiAgICAgICAga3N0ciwgdnN0ciwgaywgdjtcblxuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAga3N0ciA9IHguc3Vic3RyKDAsIGlkeCk7XG4gICAgICB2c3RyID0geC5zdWJzdHIoaWR4ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtzdHIgPSB4O1xuICAgICAgdnN0ciA9ICcnO1xuICAgIH1cblxuICAgIGsgPSBkZWNvZGVVUklDb21wb25lbnQoa3N0cik7XG4gICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2c3RyKTtcblxuICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkge1xuICAgICAgb2JqW2tdID0gdjtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgb2JqW2tdLnB1c2godik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtrXSA9IFtvYmpba10sIHZdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHhzKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeHMpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBzdHJpbmdpZnlQcmltaXRpdmUgPSBmdW5jdGlvbih2KSB7XG4gIHN3aXRjaCAodHlwZW9mIHYpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgcmV0dXJuIHY7XG5cbiAgICBjYXNlICdib29sZWFuJzpcbiAgICAgIHJldHVybiB2ID8gJ3RydWUnIDogJ2ZhbHNlJztcblxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgICByZXR1cm4gaXNGaW5pdGUodikgPyB2IDogJyc7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICcnO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iaiwgc2VwLCBlcSwgbmFtZSkge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgIG9iaiA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBtYXAob2JqZWN0S2V5cyhvYmopLCBmdW5jdGlvbihrKSB7XG4gICAgICB2YXIga3MgPSBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKGspKSArIGVxO1xuICAgICAgaWYgKGlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgICByZXR1cm4gbWFwKG9ialtrXSwgZnVuY3Rpb24odikge1xuICAgICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUodikpO1xuICAgICAgICB9KS5qb2luKHNlcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9ialtrXSkpO1xuICAgICAgfVxuICAgIH0pLmpvaW4oc2VwKTtcblxuICB9XG5cbiAgaWYgKCFuYW1lKSByZXR1cm4gJyc7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG5hbWUpKSArIGVxICtcbiAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqKSk7XG59O1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHhzKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeHMpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuZnVuY3Rpb24gbWFwICh4cywgZikge1xuICBpZiAoeHMubWFwKSByZXR1cm4geHMubWFwKGYpO1xuICB2YXIgcmVzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgeHMubGVuZ3RoOyBpKyspIHtcbiAgICByZXMucHVzaChmKHhzW2ldLCBpKSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSByZXMucHVzaChrZXkpO1xuICB9XG4gIHJldHVybiByZXM7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmRlY29kZSA9IGV4cG9ydHMucGFyc2UgPSByZXF1aXJlKCcuL2RlY29kZScpO1xuZXhwb3J0cy5lbmNvZGUgPSBleHBvcnRzLnN0cmluZ2lmeSA9IHJlcXVpcmUoJy4vZW5jb2RlJyk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fZHVwbGV4LmpzJyk7XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBkdXBsZXggc3RyZWFtIGlzIGp1c3QgYSBzdHJlYW0gdGhhdCBpcyBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZS5cbi8vIFNpbmNlIEpTIGRvZXNuJ3QgaGF2ZSBtdWx0aXBsZSBwcm90b3R5cGFsIGluaGVyaXRhbmNlLCB0aGlzIGNsYXNzXG4vLyBwcm90b3R5cGFsbHkgaW5oZXJpdHMgZnJvbSBSZWFkYWJsZSwgYW5kIHRoZW4gcGFyYXNpdGljYWxseSBmcm9tXG4vLyBXcml0YWJsZS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBrZXlzLnB1c2goa2V5KTtcbiAgfXJldHVybiBrZXlzO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgUmVhZGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fcmVhZGFibGUnKTtcbnZhciBXcml0YWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV93cml0YWJsZScpO1xuXG51dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpO1xuXG57XG4gIC8vIGF2b2lkIHNjb3BlIGNyZWVwLCB0aGUga2V5cyBhcnJheSBjYW4gdGhlbiBiZSBjb2xsZWN0ZWRcbiAgdmFyIGtleXMgPSBvYmplY3RLZXlzKFdyaXRhYmxlLnByb3RvdHlwZSk7XG4gIGZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykge1xuICAgIHZhciBtZXRob2QgPSBrZXlzW3ZdO1xuICAgIGlmICghRHVwbGV4LnByb3RvdHlwZVttZXRob2RdKSBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBEdXBsZXgob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7XG5cbiAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSkgdGhpcy5yZWFkYWJsZSA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMud3JpdGFibGUgPT09IGZhbHNlKSB0aGlzLndyaXRhYmxlID0gZmFsc2U7XG5cbiAgdGhpcy5hbGxvd0hhbGZPcGVuID0gdHJ1ZTtcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5hbGxvd0hhbGZPcGVuID09PSBmYWxzZSkgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG5cbiAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTtcblxuLy8gdGhlIG5vLWhhbGYtb3BlbiBlbmZvcmNlclxuZnVuY3Rpb24gb25lbmQoKSB7XG4gIC8vIGlmIHdlIGFsbG93IGhhbGYtb3BlbiBzdGF0ZSwgb3IgaWYgdGhlIHdyaXRhYmxlIHNpZGUgZW5kZWQsXG4gIC8vIHRoZW4gd2UncmUgb2suXG4gIGlmICh0aGlzLmFsbG93SGFsZk9wZW4gfHwgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCkgcmV0dXJuO1xuXG4gIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi5cbiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suXG4gIHBuYS5uZXh0VGljayhvbkVuZE5ULCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gb25FbmROVChzZWxmKSB7XG4gIHNlbGYuZW5kKCk7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShEdXBsZXgucHJvdG90eXBlLCAnZGVzdHJveWVkJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgJiYgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQ7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtXG4gICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldFxuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlID09PSB1bmRlZmluZWQgfHwgdGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTtcbiAgfVxufSk7XG5cbkR1cGxleC5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB0aGlzLnB1c2gobnVsbCk7XG4gIHRoaXMuZW5kKCk7XG5cbiAgcG5hLm5leHRUaWNrKGNiLCBlcnIpO1xufTsiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSBwYXNzdGhyb3VnaCBzdHJlYW0uXG4vLyBiYXNpY2FsbHkganVzdCB0aGUgbW9zdCBtaW5pbWFsIHNvcnQgb2YgVHJhbnNmb3JtIHN0cmVhbS5cbi8vIEV2ZXJ5IHdyaXR0ZW4gY2h1bmsgZ2V0cyBvdXRwdXQgYXMtaXMuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBQYXNzVGhyb3VnaDtcblxudmFyIFRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vX3N0cmVhbV90cmFuc2Zvcm0nKTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG51dGlsLmluaGVyaXRzKFBhc3NUaHJvdWdoLCBUcmFuc2Zvcm0pO1xuXG5mdW5jdGlvbiBQYXNzVGhyb3VnaChvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQYXNzVGhyb3VnaCkpIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7XG5cbiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cblBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobnVsbCwgY2h1bmspO1xufTsiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBEdXBsZXg7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG5cbnZhciBFRWxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbiAoZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIFN0cmVhbSA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0nKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgT3VyVWludDhBcnJheSA9IGdsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9O1xuZnVuY3Rpb24gX3VpbnQ4QXJyYXlUb0J1ZmZlcihjaHVuaykge1xuICByZXR1cm4gQnVmZmVyLmZyb20oY2h1bmspO1xufVxuZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmopIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7XG59XG5cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgZGVidWdVdGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIGRlYnVnID0gdm9pZCAwO1xuaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHtcbiAgZGVidWcgPSBkZWJ1Z1V0aWwuZGVidWdsb2coJ3N0cmVhbScpO1xufSBlbHNlIHtcbiAgZGVidWcgPSBmdW5jdGlvbiAoKSB7fTtcbn1cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyTGlzdCA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9CdWZmZXJMaXN0Jyk7XG52YXIgZGVzdHJveUltcGwgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvZGVzdHJveScpO1xudmFyIFN0cmluZ0RlY29kZXI7XG5cbnV0aWwuaW5oZXJpdHMoUmVhZGFibGUsIFN0cmVhbSk7XG5cbnZhciBrUHJveHlFdmVudHMgPSBbJ2Vycm9yJywgJ2Nsb3NlJywgJ2Rlc3Ryb3knLCAncGF1c2UnLCAncmVzdW1lJ107XG5cbmZ1bmN0aW9uIHByZXBlbmRMaXN0ZW5lcihlbWl0dGVyLCBldmVudCwgZm4pIHtcbiAgLy8gU2FkbHkgdGhpcyBpcyBub3QgY2FjaGVhYmxlIGFzIHNvbWUgbGlicmFyaWVzIGJ1bmRsZSB0aGVpciBvd25cbiAgLy8gZXZlbnQgZW1pdHRlciBpbXBsZW1lbnRhdGlvbiB3aXRoIHRoZW0uXG4gIGlmICh0eXBlb2YgZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHJldHVybiBlbWl0dGVyLnByZXBlbmRMaXN0ZW5lcihldmVudCwgZm4pO1xuXG4gIC8vIFRoaXMgaXMgYSBoYWNrIHRvIG1ha2Ugc3VyZSB0aGF0IG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSBhbnlcbiAgLy8gdXNlcmxhbmQgb25lcy4gIE5FVkVSIERPIFRISVMuIFRoaXMgaXMgaGVyZSBvbmx5IGJlY2F1c2UgdGhpcyBjb2RlIG5lZWRzXG4gIC8vIHRvIGNvbnRpbnVlIHRvIHdvcmsgd2l0aCBvbGRlciB2ZXJzaW9ucyBvZiBOb2RlLmpzIHRoYXQgZG8gbm90IGluY2x1ZGVcbiAgLy8gdGhlIHByZXBlbmRMaXN0ZW5lcigpIG1ldGhvZC4gVGhlIGdvYWwgaXMgdG8gZXZlbnR1YWxseSByZW1vdmUgdGhpcyBoYWNrLlxuICBpZiAoIWVtaXR0ZXIuX2V2ZW50cyB8fCAhZW1pdHRlci5fZXZlbnRzW2V2ZW50XSkgZW1pdHRlci5vbihldmVudCwgZm4pO2Vsc2UgaWYgKGlzQXJyYXkoZW1pdHRlci5fZXZlbnRzW2V2ZW50XSkpIGVtaXR0ZXIuX2V2ZW50c1tldmVudF0udW5zaGlmdChmbik7ZWxzZSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdID0gW2ZuLCBlbWl0dGVyLl9ldmVudHNbZXZlbnRdXTtcbn1cblxuZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAvLyBEdXBsZXggc3RyZWFtcyBhcmUgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUsIGJ1dCBzaGFyZVxuICAvLyB0aGUgc2FtZSBvcHRpb25zIG9iamVjdC5cbiAgLy8gSG93ZXZlciwgc29tZSBjYXNlcyByZXF1aXJlIHNldHRpbmcgb3B0aW9ucyB0byBkaWZmZXJlbnRcbiAgLy8gdmFsdWVzIGZvciB0aGUgcmVhZGFibGUgYW5kIHRoZSB3cml0YWJsZSBzaWRlcyBvZiB0aGUgZHVwbGV4IHN0cmVhbS5cbiAgLy8gVGhlc2Ugb3B0aW9ucyBjYW4gYmUgcHJvdmlkZWQgc2VwYXJhdGVseSBhcyByZWFkYWJsZVhYWCBhbmQgd3JpdGFibGVYWFguXG4gIHZhciBpc0R1cGxleCA9IHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleDtcblxuICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0b1xuICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheVxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblxuICBpZiAoaXNEdXBsZXgpIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIHJlYWRhYmxlSHdtID0gb3B0aW9ucy5yZWFkYWJsZUhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG5cbiAgaWYgKGh3bSB8fCBod20gPT09IDApIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bTtlbHNlIGlmIChpc0R1cGxleCAmJiAocmVhZGFibGVId20gfHwgcmVhZGFibGVId20gPT09IDApKSB0aGlzLmhpZ2hXYXRlck1hcmsgPSByZWFkYWJsZUh3bTtlbHNlIHRoaXMuaGlnaFdhdGVyTWFyayA9IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBNYXRoLmZsb29yKHRoaXMuaGlnaFdhdGVyTWFyayk7XG5cbiAgLy8gQSBsaW5rZWQgbGlzdCBpcyB1c2VkIHRvIHN0b3JlIGRhdGEgY2h1bmtzIGluc3RlYWQgb2YgYW4gYXJyYXkgYmVjYXVzZSB0aGVcbiAgLy8gbGlua2VkIGxpc3QgY2FuIHJlbW92ZSBlbGVtZW50cyBmcm9tIHRoZSBiZWdpbm5pbmcgZmFzdGVyIHRoYW5cbiAgLy8gYXJyYXkuc2hpZnQoKVxuICB0aGlzLmJ1ZmZlciA9IG5ldyBCdWZmZXJMaXN0KCk7XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIGV2ZW50ICdyZWFkYWJsZScvJ2RhdGEnIGlzIGVtaXR0ZWRcbiAgLy8gaW1tZWRpYXRlbHksIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2VcbiAgLy8gYW55IGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHJlYWQgY2FsbC5cbiAgdGhpcy5zeW5jID0gdHJ1ZTtcblxuICAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheVxuICAvLyB0aGF0IHdlJ3JlIGF3YWl0aW5nIGEgJ3JlYWRhYmxlJyBldmVudCBlbWlzc2lvbi5cbiAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlO1xuICB0aGlzLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuXG4gIC8vIGhhcyBpdCBiZWVuIGRlc3Ryb3llZFxuICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG4gIHRoaXMuYXdhaXREcmFpbiA9IDA7XG5cbiAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7XG5cbiAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG4gIGlmIChvcHRpb25zLmVuY29kaW5nKSB7XG4gICAgaWYgKCFTdHJpbmdEZWNvZGVyKSBTdHJpbmdEZWNvZGVyID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXIvJykuU3RyaW5nRGVjb2RlcjtcbiAgICB0aGlzLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihvcHRpb25zLmVuY29kaW5nKTtcbiAgICB0aGlzLmVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZztcbiAgfVxufVxuXG5mdW5jdGlvbiBSZWFkYWJsZShvcHRpb25zKSB7XG4gIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFJlYWRhYmxlKSkgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTtcblxuICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5XG4gIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICdmdW5jdGlvbicpIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTtcbiAgfVxuXG4gIFN0cmVhbS5jYWxsKHRoaXMpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZDtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyB3ZSBpZ25vcmUgdGhlIHZhbHVlIGlmIHRoZSBzdHJlYW1cbiAgICAvLyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0XG4gICAgaWYgKCF0aGlzLl9yZWFkYWJsZVN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xuXG5SZWFkYWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLmRlc3Ryb3k7XG5SZWFkYWJsZS5wcm90b3R5cGUuX3VuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLnVuZGVzdHJveTtcblJlYWRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7XG4gIHRoaXMucHVzaChudWxsKTtcbiAgY2IoZXJyKTtcbn07XG5cbi8vIE1hbnVhbGx5IHNob3ZlIHNvbWV0aGluZyBpbnRvIHRoZSByZWFkKCkgYnVmZmVyLlxuLy8gVGhpcyByZXR1cm5zIHRydWUgaWYgdGhlIGhpZ2hXYXRlck1hcmsgaGFzIG5vdCBiZWVuIGhpdCB5ZXQsXG4vLyBzaW1pbGFyIHRvIGhvdyBXcml0YWJsZS53cml0ZSgpIHJldHVybnMgdHJ1ZSBpZiB5b3Ugc2hvdWxkXG4vLyB3cml0ZSgpIHNvbWUgbW9yZS5cblJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgc2tpcENodW5rQ2hlY2s7XG5cbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuICAgICAgaWYgKGVuY29kaW5nICE9PSBzdGF0ZS5lbmNvZGluZykge1xuICAgICAgICBjaHVuayA9IEJ1ZmZlci5mcm9tKGNodW5rLCBlbmNvZGluZyk7XG4gICAgICAgIGVuY29kaW5nID0gJyc7XG4gICAgICB9XG4gICAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHNraXBDaHVua0NoZWNrID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiByZWFkYWJsZUFkZENodW5rKHRoaXMsIGNodW5rLCBlbmNvZGluZywgZmFsc2UsIHNraXBDaHVua0NoZWNrKTtcbn07XG5cbi8vIFVuc2hpZnQgc2hvdWxkICphbHdheXMqIGJlIHNvbWV0aGluZyBkaXJlY3RseSBvdXQgb2YgcmVhZCgpXG5SZWFkYWJsZS5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uIChjaHVuaykge1xuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBjaHVuaywgbnVsbCwgdHJ1ZSwgZmFsc2UpO1xufTtcblxuZnVuY3Rpb24gcmVhZGFibGVBZGRDaHVuayhzdHJlYW0sIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCwgc2tpcENodW5rQ2hlY2spIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBpZiAoY2h1bmsgPT09IG51bGwpIHtcbiAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZXI7XG4gICAgaWYgKCFza2lwQ2h1bmtDaGVjaykgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTtcbiAgICBpZiAoZXIpIHtcbiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsgJiYgY2h1bmsubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgIXN0YXRlLm9iamVjdE1vZGUgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGNodW5rKSAhPT0gQnVmZmVyLnByb3RvdHlwZSkge1xuICAgICAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspO1xuICAgICAgfVxuXG4gICAgICBpZiAoYWRkVG9Gcm9udCkge1xuICAgICAgICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCcpKTtlbHNlIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kZWQpIHtcbiAgICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIWVuY29kaW5nKSB7XG4gICAgICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcbiAgICAgICAgICBpZiAoc3RhdGUub2JqZWN0TW9kZSB8fCBjaHVuay5sZW5ndGggIT09IDApIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBmYWxzZSk7ZWxzZSBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFhZGRUb0Zyb250KSB7XG4gICAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5lZWRNb3JlRGF0YShzdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBhZGRUb0Zyb250KSB7XG4gIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuc3luYykge1xuICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9IGVsc2Uge1xuICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG4gICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIGlmIChhZGRUb0Zyb250KSBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7ZWxzZSBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG5cbiAgICBpZiAoc3RhdGUubmVlZFJlYWRhYmxlKSBlbWl0UmVhZGFibGUoc3RyZWFtKTtcbiAgfVxuICBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7XG4gIHZhciBlcjtcbiAgaWYgKCFfaXNVaW50OEFycmF5KGNodW5rKSAmJiB0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmIGNodW5rICE9PSB1bmRlZmluZWQgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICByZXR1cm4gZXI7XG59XG5cbi8vIGlmIGl0J3MgcGFzdCB0aGUgaGlnaCB3YXRlciBtYXJrLCB3ZSBjYW4gcHVzaCBpbiBzb21lIG1vcmUuXG4vLyBBbHNvLCBpZiB3ZSBoYXZlIG5vIGRhdGEgeWV0LCB3ZSBjYW4gc3RhbmQgc29tZVxuLy8gbW9yZSBieXRlcy4gIFRoaXMgaXMgdG8gd29yayBhcm91bmQgY2FzZXMgd2hlcmUgaHdtPTAsXG4vLyBzdWNoIGFzIHRoZSByZXBsLiAgQWxzbywgaWYgdGhlIHB1c2goKSB0cmlnZ2VyZWQgYVxuLy8gcmVhZGFibGUgZXZlbnQsIGFuZCB0aGUgdXNlciBjYWxsZWQgcmVhZChsYXJnZU51bWJlcikgc3VjaCB0aGF0XG4vLyBuZWVkUmVhZGFibGUgd2FzIHNldCwgdGhlbiB3ZSBvdWdodCB0byBwdXNoIG1vcmUsIHNvIHRoYXQgYW5vdGhlclxuLy8gJ3JlYWRhYmxlJyBldmVudCB3aWxsIGJlIHRyaWdnZXJlZC5cbmZ1bmN0aW9uIG5lZWRNb3JlRGF0YShzdGF0ZSkge1xuICByZXR1cm4gIXN0YXRlLmVuZGVkICYmIChzdGF0ZS5uZWVkUmVhZGFibGUgfHwgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5sZW5ndGggPT09IDApO1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPT09IGZhbHNlO1xufTtcblxuLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5SZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbiAoZW5jKSB7XG4gIGlmICghU3RyaW5nRGVjb2RlcikgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDhNQlxudmFyIE1BWF9IV00gPSAweDgwMDAwMDtcbmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHtcbiAgaWYgKG4gPj0gTUFYX0hXTSkge1xuICAgIG4gPSBNQVhfSFdNO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDIgdG8gcHJldmVudCBpbmNyZWFzaW5nIGh3bSBleGNlc3NpdmVseSBpblxuICAgIC8vIHRpbnkgYW1vdW50c1xuICAgIG4tLTtcbiAgICBuIHw9IG4gPj4+IDE7XG4gICAgbiB8PSBuID4+PiAyO1xuICAgIG4gfD0gbiA+Pj4gNDtcbiAgICBuIHw9IG4gPj4+IDg7XG4gICAgbiB8PSBuID4+PiAxNjtcbiAgICBuKys7XG4gIH1cbiAgcmV0dXJuIG47XG59XG5cbi8vIFRoaXMgZnVuY3Rpb24gaXMgZGVzaWduZWQgdG8gYmUgaW5saW5hYmxlLCBzbyBwbGVhc2UgdGFrZSBjYXJlIHdoZW4gbWFraW5nXG4vLyBjaGFuZ2VzIHRvIHRoZSBmdW5jdGlvbiBib2R5LlxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAobiA8PSAwIHx8IHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZCkgcmV0dXJuIDA7XG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXR1cm4gMTtcbiAgaWYgKG4gIT09IG4pIHtcbiAgICAvLyBPbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWVcbiAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGgpIHJldHVybiBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhLmxlbmd0aDtlbHNlIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gIH1cbiAgLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIGN1cnJlbnQgaHdtLCB0aGVuIHJhaXNlIHRoZSBod20uXG4gIGlmIChuID4gc3RhdGUuaGlnaFdhdGVyTWFyaykgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pO1xuICBpZiAobiA8PSBzdGF0ZS5sZW5ndGgpIHJldHVybiBuO1xuICAvLyBEb24ndCBoYXZlIGVub3VnaFxuICBpZiAoIXN0YXRlLmVuZGVkKSB7XG4gICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICByZXR1cm4gMDtcbiAgfVxuICByZXR1cm4gc3RhdGUubGVuZ3RoO1xufVxuXG4vLyB5b3UgY2FuIG92ZXJyaWRlIGVpdGhlciB0aGlzIG1ldGhvZCwgb3IgdGhlIGFzeW5jIF9yZWFkKG4pIGJlbG93LlxuUmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAobikge1xuICBkZWJ1ZygncmVhZCcsIG4pO1xuICBuID0gcGFyc2VJbnQobiwgMTApO1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgbk9yaWcgPSBuO1xuXG4gIGlmIChuICE9PSAwKSBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblxuICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhIGJ1bmNoIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlciwgdGhlbiBqdXN0IHRyaWdnZXJcbiAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uXG4gIGlmIChuID09PSAwICYmIHN0YXRlLm5lZWRSZWFkYWJsZSAmJiAoc3RhdGUubGVuZ3RoID49IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUuZW5kZWQpKSB7XG4gICAgZGVidWcoJ3JlYWQ6IGVtaXRSZWFkYWJsZScsIHN0YXRlLmxlbmd0aCwgc3RhdGUuZW5kZWQpO1xuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpIGVuZFJlYWRhYmxlKHRoaXMpO2Vsc2UgZW1pdFJlYWRhYmxlKHRoaXMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpO1xuXG4gIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC5cbiAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEFsbCB0aGUgYWN0dWFsIGNodW5rIGdlbmVyYXRpb24gbG9naWMgbmVlZHMgdG8gYmVcbiAgLy8gKmJlbG93KiB0aGUgY2FsbCB0byBfcmVhZC4gIFRoZSByZWFzb24gaXMgdGhhdCBpbiBjZXJ0YWluXG4gIC8vIHN5bnRoZXRpYyBzdHJlYW0gY2FzZXMsIHN1Y2ggYXMgcGFzc3Rocm91Z2ggc3RyZWFtcywgX3JlYWRcbiAgLy8gbWF5IGJlIGEgY29tcGxldGVseSBzeW5jaHJvbm91cyBvcGVyYXRpb24gd2hpY2ggbWF5IGNoYW5nZVxuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHJlYWQgYnVmZmVyLCBwcm92aWRpbmcgZW5vdWdoIGRhdGEgd2hlblxuICAvLyBiZWZvcmUgdGhlcmUgd2FzICpub3QqIGVub3VnaC5cbiAgLy9cbiAgLy8gU28sIHRoZSBzdGVwcyBhcmU6XG4gIC8vIDEuIEZpZ3VyZSBvdXQgd2hhdCB0aGUgc3RhdGUgb2YgdGhpbmdzIHdpbGwgYmUgYWZ0ZXIgd2UgZG9cbiAgLy8gYSByZWFkIGZyb20gdGhlIGJ1ZmZlci5cbiAgLy9cbiAgLy8gMi4gSWYgdGhhdCByZXN1bHRpbmcgc3RhdGUgd2lsbCB0cmlnZ2VyIGEgX3JlYWQsIHRoZW4gY2FsbCBfcmVhZC5cbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWF5IGJlIGFzeW5jaHJvbm91cywgb3Igc3luY2hyb25vdXMuICBZZXMsIGl0IGlzXG4gIC8vIGRlZXBseSB1Z2x5IHRvIHdyaXRlIEFQSXMgdGhpcyB3YXksIGJ1dCB0aGF0IHN0aWxsIGRvZXNuJ3QgbWVhblxuICAvLyB0aGF0IHRoZSBSZWFkYWJsZSBjbGFzcyBzaG91bGQgYmVoYXZlIGltcHJvcGVybHksIGFzIHN0cmVhbXMgYXJlXG4gIC8vIGRlc2lnbmVkIHRvIGJlIHN5bmMvYXN5bmMgYWdub3N0aWMuXG4gIC8vIFRha2Ugbm90ZSBpZiB0aGUgX3JlYWQgY2FsbCBpcyBzeW5jIG9yIGFzeW5jIChpZSwgaWYgdGhlIHJlYWQgY2FsbFxuICAvLyBoYXMgcmV0dXJuZWQgeWV0KSwgc28gdGhhdCB3ZSBrbm93IHdoZXRoZXIgb3Igbm90IGl0J3Mgc2FmZSB0byBlbWl0XG4gIC8vICdyZWFkYWJsZScgZXRjLlxuICAvL1xuICAvLyAzLiBBY3R1YWxseSBwdWxsIHRoZSByZXF1ZXN0ZWQgY2h1bmtzIG91dCBvZiB0aGUgYnVmZmVyIGFuZCByZXR1cm4uXG5cbiAgLy8gaWYgd2UgbmVlZCBhIHJlYWRhYmxlIGV2ZW50LCB0aGVuIHdlIG5lZWQgdG8gZG8gc29tZSByZWFkaW5nLlxuICB2YXIgZG9SZWFkID0gc3RhdGUubmVlZFJlYWRhYmxlO1xuICBkZWJ1ZygnbmVlZCByZWFkYWJsZScsIGRvUmVhZCk7XG5cbiAgLy8gaWYgd2UgY3VycmVudGx5IGhhdmUgbGVzcyB0aGFuIHRoZSBoaWdoV2F0ZXJNYXJrLCB0aGVuIGFsc28gcmVhZCBzb21lXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgfHwgc3RhdGUubGVuZ3RoIC0gbiA8IHN0YXRlLmhpZ2hXYXRlck1hcmspIHtcbiAgICBkb1JlYWQgPSB0cnVlO1xuICAgIGRlYnVnKCdsZW5ndGggbGVzcyB0aGFuIHdhdGVybWFyaycsIGRvUmVhZCk7XG4gIH1cblxuICAvLyBob3dldmVyLCBpZiB3ZSd2ZSBlbmRlZCwgdGhlbiB0aGVyZSdzIG5vIHBvaW50LCBhbmQgaWYgd2UncmUgYWxyZWFkeVxuICAvLyByZWFkaW5nLCB0aGVuIGl0J3MgdW5uZWNlc3NhcnkuXG4gIGlmIChzdGF0ZS5lbmRlZCB8fCBzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZG9SZWFkID0gZmFsc2U7XG4gICAgZGVidWcoJ3JlYWRpbmcgb3IgZW5kZWQnLCBkb1JlYWQpO1xuICB9IGVsc2UgaWYgKGRvUmVhZCkge1xuICAgIGRlYnVnKCdkbyByZWFkJyk7XG4gICAgc3RhdGUucmVhZGluZyA9IHRydWU7XG4gICAgc3RhdGUuc3luYyA9IHRydWU7XG4gICAgLy8gaWYgdGhlIGxlbmd0aCBpcyBjdXJyZW50bHkgemVybywgdGhlbiB3ZSAqbmVlZCogYSByZWFkYWJsZSBldmVudC5cbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2RcbiAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuICAgIHN0YXRlLnN5bmMgPSBmYWxzZTtcbiAgICAvLyBJZiBfcmVhZCBwdXNoZWQgZGF0YSBzeW5jaHJvbm91c2x5LCB0aGVuIGByZWFkaW5nYCB3aWxsIGJlIGZhbHNlLFxuICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cbiAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7XG4gIH1cblxuICB2YXIgcmV0O1xuICBpZiAobiA+IDApIHJldCA9IGZyb21MaXN0KG4sIHN0YXRlKTtlbHNlIHJldCA9IG51bGw7XG5cbiAgaWYgKHJldCA9PT0gbnVsbCkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgbiA9IDA7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUubGVuZ3RoIC09IG47XG4gIH1cblxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93XG4gICAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgIGlmICghc3RhdGUuZW5kZWQpIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgICAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suXG4gICAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtcbiAgfVxuXG4gIGlmIChyZXQgIT09IG51bGwpIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUuZW5kZWQpIHJldHVybjtcbiAgaWYgKHN0YXRlLmRlY29kZXIpIHtcbiAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpO1xuICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIHtcbiAgICAgIHN0YXRlLmJ1ZmZlci5wdXNoKGNodW5rKTtcbiAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICB9XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuXG4gIC8vIGVtaXQgJ3JlYWRhYmxlJyBub3cgdG8gbWFrZSBzdXJlIGl0IGdldHMgcGlja2VkIHVwLlxuICBlbWl0UmVhZGFibGUoc3RyZWFtKTtcbn1cblxuLy8gRG9uJ3QgZW1pdCByZWFkYWJsZSByaWdodCBhd2F5IGluIHN5bmMgbW9kZSwgYmVjYXVzZSB0aGlzIGNhbiB0cmlnZ2VyXG4vLyBhbm90aGVyIHJlYWQoKSBjYWxsID0+IHN0YWNrIG92ZXJmbG93LiAgVGhpcyB3YXksIGl0IG1pZ2h0IHRyaWdnZXJcbi8vIGEgbmV4dFRpY2sgcmVjdXJzaW9uIHdhcm5pbmcsIGJ1dCB0aGF0J3Mgbm90IHNvIGJhZC5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZShzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuICBzdGF0ZS5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgaWYgKCFzdGF0ZS5lbWl0dGVkUmVhZGFibGUpIHtcbiAgICBkZWJ1ZygnZW1pdFJlYWRhYmxlJywgc3RhdGUuZmxvd2luZyk7XG4gICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICBpZiAoc3RhdGUuc3luYykgcG5hLm5leHRUaWNrKGVtaXRSZWFkYWJsZV8sIHN0cmVhbSk7ZWxzZSBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHtcbiAgZGVidWcoJ2VtaXQgcmVhZGFibGUnKTtcbiAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7XG4gIGZsb3coc3RyZWFtKTtcbn1cblxuLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCxcbi8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWRcbi8vIGluIHR1cm4gYW5vdGhlciBfcmVhZChuKSBjYWxsLCBpbiB3aGljaCBjYXNlIHJlYWRpbmcgPSB0cnVlIGlmXG4vLyBpdCdzIGluIHByb2dyZXNzLlxuLy8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSxcbi8vIHRoZW4gZ28gYWhlYWQgYW5kIHRyeSB0byByZWFkIHNvbWUgbW9yZSBwcmVlbXB0aXZlbHkuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkge1xuICAgIHN0YXRlLnJlYWRpbmdNb3JlID0gdHJ1ZTtcbiAgICBwbmEubmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7XG4gICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKVxuICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO2Vsc2UgbGVuID0gc3RhdGUubGVuZ3RoO1xuICB9XG4gIHN0YXRlLnJlYWRpbmdNb3JlID0gZmFsc2U7XG59XG5cbi8vIGFic3RyYWN0IG1ldGhvZC4gIHRvIGJlIG92ZXJyaWRkZW4gaW4gc3BlY2lmaWMgaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vIGNhbGwgY2IoZXIsIGRhdGEpIHdoZXJlIGRhdGEgaXMgPD0gbiBpbiBsZW5ndGguXG4vLyBmb3IgdmlydHVhbCAobm9uLXN0cmluZywgbm9uLWJ1ZmZlcikgc3RyZWFtcywgXCJsZW5ndGhcIiBpcyBzb21ld2hhdFxuLy8gYXJiaXRyYXJ5LCBhbmQgcGVyaGFwcyBub3QgdmVyeSBtZWFuaW5nZnVsLlxuUmVhZGFibGUucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignX3JlYWQoKSBpcyBub3QgaW1wbGVtZW50ZWQnKSk7XG59O1xuXG5SZWFkYWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uIChkZXN0LCBwaXBlT3B0cykge1xuICB2YXIgc3JjID0gdGhpcztcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHtcbiAgICBjYXNlIDA6XG4gICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHN0YXRlLnBpcGVzQ291bnQgKz0gMTtcbiAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTtcblxuICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyO1xuXG4gIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiB1bnBpcGU7XG4gIGlmIChzdGF0ZS5lbmRFbWl0dGVkKSBwbmEubmV4dFRpY2soZW5kRm4pO2Vsc2Ugc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTtcblxuICBkZXN0Lm9uKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gIGZ1bmN0aW9uIG9udW5waXBlKHJlYWRhYmxlLCB1bnBpcGVJbmZvKSB7XG4gICAgZGVidWcoJ29udW5waXBlJyk7XG4gICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHtcbiAgICAgIGlmICh1bnBpcGVJbmZvICYmIHVucGlwZUluZm8uaGFzVW5waXBlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdW5waXBlSW5mby5oYXNVbnBpcGVkID0gdHJ1ZTtcbiAgICAgICAgY2xlYW51cCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uZW5kKCkge1xuICAgIGRlYnVnKCdvbmVuZCcpO1xuICAgIGRlc3QuZW5kKCk7XG4gIH1cblxuICAvLyB3aGVuIHRoZSBkZXN0IGRyYWlucywgaXQgcmVkdWNlcyB0aGUgYXdhaXREcmFpbiBjb3VudGVyXG4gIC8vIG9uIHRoZSBzb3VyY2UuICBUaGlzIHdvdWxkIGJlIG1vcmUgZWxlZ2FudCB3aXRoIGEgLm9uY2UoKVxuICAvLyBoYW5kbGVyIGluIGZsb3coKSwgYnV0IGFkZGluZyBhbmQgcmVtb3ZpbmcgcmVwZWF0ZWRseSBpc1xuICAvLyB0b28gc2xvdy5cbiAgdmFyIG9uZHJhaW4gPSBwaXBlT25EcmFpbihzcmMpO1xuICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gIHZhciBjbGVhbmVkVXAgPSBmYWxzZTtcbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBkZWJ1ZygnY2xlYW51cCcpO1xuICAgIC8vIGNsZWFudXAgZXZlbnQgaGFuZGxlcnMgb25jZSB0aGUgcGlwZSBpcyBicm9rZW5cbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcigndW5waXBlJywgb251bnBpcGUpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZW5kJywgdW5waXBlKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuXG4gICAgY2xlYW5lZFVwID0gdHJ1ZTtcblxuICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXNcbiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnRcbiAgICAvLyBmbG93aW5nIGFnYWluLlxuICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy5cbiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuXG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiYgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSkgb25kcmFpbigpO1xuICB9XG5cbiAgLy8gSWYgdGhlIHVzZXIgcHVzaGVzIG1vcmUgZGF0YSB3aGlsZSB3ZSdyZSB3cml0aW5nIHRvIGRlc3QgdGhlbiB3ZSdsbCBlbmQgdXBcbiAgLy8gaW4gb25kYXRhIGFnYWluLiBIb3dldmVyLCB3ZSBvbmx5IHdhbnQgdG8gaW5jcmVhc2UgYXdhaXREcmFpbiBvbmNlIGJlY2F1c2VcbiAgLy8gZGVzdCB3aWxsIG9ubHkgZW1pdCBvbmUgJ2RyYWluJyBldmVudCBmb3IgdGhlIG11bHRpcGxlIHdyaXRlcy5cbiAgLy8gPT4gSW50cm9kdWNlIGEgZ3VhcmQgb24gaW5jcmVhc2luZyBhd2FpdERyYWluLlxuICB2YXIgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlO1xuICBzcmMub24oJ2RhdGEnLCBvbmRhdGEpO1xuICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHtcbiAgICBkZWJ1Zygnb25kYXRhJyk7XG4gICAgaW5jcmVhc2VkQXdhaXREcmFpbiA9IGZhbHNlO1xuICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcbiAgICBpZiAoZmFsc2UgPT09IHJldCAmJiAhaW5jcmVhc2VkQXdhaXREcmFpbikge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlXG4gICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZVxuICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS5cbiAgICAgIC8vID0+IENoZWNrIHdoZXRoZXIgYGRlc3RgIGlzIHN0aWxsIGEgcGlwaW5nIGRlc3RpbmF0aW9uLlxuICAgICAgaWYgKChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmIHN0YXRlLnBpcGVzID09PSBkZXN0IHx8IHN0YXRlLnBpcGVzQ291bnQgPiAxICYmIGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpICE9PSAtMSkgJiYgIWNsZWFuZWRVcCkge1xuICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pO1xuICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrO1xuICAgICAgICBpbmNyZWFzZWRBd2FpdERyYWluID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHNyYy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTtcbiAgICB1bnBpcGUoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGlmIChFRWxpc3RlbmVyQ291bnQoZGVzdCwgJ2Vycm9yJykgPT09IDApIGRlc3QuZW1pdCgnZXJyb3InLCBlcik7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgb3VyIGVycm9yIGhhbmRsZXIgaXMgYXR0YWNoZWQgYmVmb3JlIHVzZXJsYW5kIG9uZXMuXG4gIHByZXBlbmRMaXN0ZW5lcihkZXN0LCAnZXJyb3InLCBvbmVycm9yKTtcblxuICAvLyBCb3RoIGNsb3NlIGFuZCBmaW5pc2ggc2hvdWxkIHRyaWdnZXIgdW5waXBlLCBidXQgb25seSBvbmNlLlxuICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcbiAgICB1bnBpcGUoKTtcbiAgfVxuICBkZXN0Lm9uY2UoJ2Nsb3NlJywgb25jbG9zZSk7XG4gIGZ1bmN0aW9uIG9uZmluaXNoKCkge1xuICAgIGRlYnVnKCdvbmZpbmlzaCcpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgdW5waXBlKCk7XG4gIH1cbiAgZGVzdC5vbmNlKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG5cbiAgZnVuY3Rpb24gdW5waXBlKCkge1xuICAgIGRlYnVnKCd1bnBpcGUnKTtcbiAgICBzcmMudW5waXBlKGRlc3QpO1xuICB9XG5cbiAgLy8gdGVsbCB0aGUgZGVzdCB0aGF0IGl0J3MgYmVpbmcgcGlwZWQgdG9cbiAgZGVzdC5lbWl0KCdwaXBlJywgc3JjKTtcblxuICAvLyBzdGFydCB0aGUgZmxvdyBpZiBpdCBoYXNuJ3QgYmVlbiBzdGFydGVkIGFscmVhZHkuXG4gIGlmICghc3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwaXBlIHJlc3VtZScpO1xuICAgIHNyYy5yZXN1bWUoKTtcbiAgfVxuXG4gIHJldHVybiBkZXN0O1xufTtcblxuZnVuY3Rpb24gcGlwZU9uRHJhaW4oc3JjKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlO1xuICAgIGRlYnVnKCdwaXBlT25EcmFpbicsIHN0YXRlLmF3YWl0RHJhaW4pO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluKSBzdGF0ZS5hd2FpdERyYWluLS07XG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gPT09IDAgJiYgRUVsaXN0ZW5lckNvdW50KHNyYywgJ2RhdGEnKSkge1xuICAgICAgc3RhdGUuZmxvd2luZyA9IHRydWU7XG4gICAgICBmbG93KHNyYyk7XG4gICAgfVxuICB9O1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUudW5waXBlID0gZnVuY3Rpb24gKGRlc3QpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHVucGlwZUluZm8gPSB7IGhhc1VucGlwZWQ6IGZhbHNlIH07XG5cbiAgLy8gaWYgd2UncmUgbm90IHBpcGluZyBhbnl3aGVyZSwgdGhlbiBkbyBub3RoaW5nLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMCkgcmV0dXJuIHRoaXM7XG5cbiAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkge1xuICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLlxuICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKSByZXR1cm4gdGhpcztcblxuICAgIGlmICghZGVzdCkgZGVzdCA9IHN0YXRlLnBpcGVzO1xuXG4gICAgLy8gZ290IGEgbWF0Y2guXG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICBpZiAoZGVzdCkgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzLCB1bnBpcGVJbmZvKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuXG5cbiAgaWYgKCFkZXN0KSB7XG4gICAgLy8gcmVtb3ZlIGFsbC5cbiAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlcztcbiAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDtcbiAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG4gICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG4gICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgZGVzdHNbaV0uZW1pdCgndW5waXBlJywgdGhpcywgdW5waXBlSW5mbyk7XG4gICAgfXJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gdHJ5IHRvIGZpbmQgdGhlIHJpZ2h0IG9uZS5cbiAgdmFyIGluZGV4ID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG4gIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiB0aGlzO1xuXG4gIHN0YXRlLnBpcGVzLnNwbGljZShpbmRleCwgMSk7XG4gIHN0YXRlLnBpcGVzQ291bnQgLT0gMTtcbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHN0YXRlLnBpcGVzID0gc3RhdGUucGlwZXNbMF07XG5cbiAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzLCB1bnBpcGVJbmZvKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIHNldCB1cCBkYXRhIGV2ZW50cyBpZiB0aGV5IGFyZSBhc2tlZCBmb3Jcbi8vIEVuc3VyZSByZWFkYWJsZSBsaXN0ZW5lcnMgZXZlbnR1YWxseSBnZXQgc29tZXRoaW5nXG5SZWFkYWJsZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGZuKSB7XG4gIHZhciByZXMgPSBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTtcblxuICBpZiAoZXYgPT09ICdkYXRhJykge1xuICAgIC8vIFN0YXJ0IGZsb3dpbmcgb24gbmV4dCB0aWNrIGlmIHN0cmVhbSBpc24ndCBleHBsaWNpdGx5IHBhdXNlZFxuICAgIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgIT09IGZhbHNlKSB0aGlzLnJlc3VtZSgpO1xuICB9IGVsc2UgaWYgKGV2ID09PSAncmVhZGFibGUnKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nKSB7XG4gICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgICAgIGlmICghc3RhdGUucmVhZGluZykge1xuICAgICAgICBwbmEubmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxlbmd0aCkge1xuICAgICAgICBlbWl0UmVhZGFibGUodGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlcztcbn07XG5SZWFkYWJsZS5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBSZWFkYWJsZS5wcm90b3R5cGUub247XG5cbmZ1bmN0aW9uIG5SZWFkaW5nTmV4dFRpY2soc2VsZikge1xuICBkZWJ1ZygncmVhZGFibGUgbmV4dHRpY2sgcmVhZCAwJyk7XG4gIHNlbGYucmVhZCgwKTtcbn1cblxuLy8gcGF1c2UoKSBhbmQgcmVzdW1lKCkgYXJlIHJlbW5hbnRzIG9mIHRoZSBsZWdhY3kgcmVhZGFibGUgc3RyZWFtIEFQSVxuLy8gSWYgdGhlIHVzZXIgdXNlcyB0aGVtLCB0aGVuIHN3aXRjaCBpbnRvIG9sZCBtb2RlLlxuUmVhZGFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZScpO1xuICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkge1xuICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7XG4gICAgcG5hLm5leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9XG5cbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0YXRlLmF3YWl0RHJhaW4gPSAwO1xuICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7XG4gIGZsb3coc3RyZWFtKTtcbiAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLnJlYWRpbmcpIHN0cmVhbS5yZWFkKDApO1xufVxuXG5SZWFkYWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpO1xuICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwYXVzZScpO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTtcbiAgd2hpbGUgKHN0YXRlLmZsb3dpbmcgJiYgc3RyZWFtLnJlYWQoKSAhPT0gbnVsbCkge31cbn1cblxuLy8gd3JhcCBhbiBvbGQtc3R5bGUgc3RyZWFtIGFzIHRoZSBhc3luYyBkYXRhIHNvdXJjZS5cbi8vIFRoaXMgaXMgKm5vdCogcGFydCBvZiB0aGUgcmVhZGFibGUgc3RyZWFtIGludGVyZmFjZS5cbi8vIEl0IGlzIGFuIHVnbHkgdW5mb3J0dW5hdGUgbWVzcyBvZiBoaXN0b3J5LlxuUmVhZGFibGUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoc3RyZWFtKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHBhdXNlZCA9IGZhbHNlO1xuXG4gIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuICAgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpIF90aGlzLnB1c2goY2h1bmspO1xuICAgIH1cblxuICAgIF90aGlzLnB1c2gobnVsbCk7XG4gIH0pO1xuXG4gIHN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uIChjaHVuaykge1xuICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTtcbiAgICBpZiAoc3RhdGUuZGVjb2RlcikgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcblxuICAgIC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZVxuICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSkgcmV0dXJuO2Vsc2UgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmICghY2h1bmsgfHwgIWNodW5rLmxlbmd0aCkpIHJldHVybjtcblxuICAgIHZhciByZXQgPSBfdGhpcy5wdXNoKGNodW5rKTtcbiAgICBpZiAoIXJldCkge1xuICAgICAgcGF1c2VkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5wYXVzZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gcHJveHkgYWxsIHRoZSBvdGhlciBtZXRob2RzLlxuICAvLyBpbXBvcnRhbnQgd2hlbiB3cmFwcGluZyBmaWx0ZXJzIGFuZCBkdXBsZXhlcy5cbiAgZm9yICh2YXIgaSBpbiBzdHJlYW0pIHtcbiAgICBpZiAodGhpc1tpXSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdHJlYW1baV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXNbaV0gPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICAgIH0oaSk7XG4gICAgfVxuICB9XG5cbiAgLy8gcHJveHkgY2VydGFpbiBpbXBvcnRhbnQgZXZlbnRzLlxuICBmb3IgKHZhciBuID0gMDsgbiA8IGtQcm94eUV2ZW50cy5sZW5ndGg7IG4rKykge1xuICAgIHN0cmVhbS5vbihrUHJveHlFdmVudHNbbl0sIHRoaXMuZW1pdC5iaW5kKHRoaXMsIGtQcm94eUV2ZW50c1tuXSkpO1xuICB9XG5cbiAgLy8gd2hlbiB3ZSB0cnkgdG8gY29uc3VtZSBzb21lIG1vcmUgYnl0ZXMsIHNpbXBseSB1bnBhdXNlIHRoZVxuICAvLyB1bmRlcmx5aW5nIHN0cmVhbS5cbiAgdGhpcy5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTtcbiAgICBpZiAocGF1c2VkKSB7XG4gICAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICAgIHN0cmVhbS5yZXN1bWUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhZGFibGUucHJvdG90eXBlLCAncmVhZGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTtcblxuLy8gZXhwb3NlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBvbmx5LlxuUmVhZGFibGUuX2Zyb21MaXN0ID0gZnJvbUxpc3Q7XG5cbi8vIFBsdWNrIG9mZiBuIGJ5dGVzIGZyb20gYW4gYXJyYXkgb2YgYnVmZmVycy5cbi8vIExlbmd0aCBpcyB0aGUgY29tYmluZWQgbGVuZ3RocyBvZiBhbGwgdGhlIGJ1ZmZlcnMgaW4gdGhlIGxpc3QuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7XG4gIC8vIG5vdGhpbmcgYnVmZmVyZWRcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG5cbiAgdmFyIHJldDtcbiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpIHJldCA9IHN0YXRlLmJ1ZmZlci5zaGlmdCgpO2Vsc2UgaWYgKCFuIHx8IG4gPj0gc3RhdGUubGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBsaXN0XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpIHJldCA9IHN0YXRlLmJ1ZmZlci5qb2luKCcnKTtlbHNlIGlmIChzdGF0ZS5idWZmZXIubGVuZ3RoID09PSAxKSByZXQgPSBzdGF0ZS5idWZmZXIuaGVhZC5kYXRhO2Vsc2UgcmV0ID0gc3RhdGUuYnVmZmVyLmNvbmNhdChzdGF0ZS5sZW5ndGgpO1xuICAgIHN0YXRlLmJ1ZmZlci5jbGVhcigpO1xuICB9IGVsc2Uge1xuICAgIC8vIHJlYWQgcGFydCBvZiBsaXN0XG4gICAgcmV0ID0gZnJvbUxpc3RQYXJ0aWFsKG4sIHN0YXRlLmJ1ZmZlciwgc3RhdGUuZGVjb2Rlcik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBFeHRyYWN0cyBvbmx5IGVub3VnaCBidWZmZXJlZCBkYXRhIHRvIHNhdGlzZnkgdGhlIGFtb3VudCByZXF1ZXN0ZWQuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGZyb21MaXN0UGFydGlhbChuLCBsaXN0LCBoYXNTdHJpbmdzKSB7XG4gIHZhciByZXQ7XG4gIGlmIChuIDwgbGlzdC5oZWFkLmRhdGEubGVuZ3RoKSB7XG4gICAgLy8gc2xpY2UgaXMgdGhlIHNhbWUgZm9yIGJ1ZmZlcnMgYW5kIHN0cmluZ3NcbiAgICByZXQgPSBsaXN0LmhlYWQuZGF0YS5zbGljZSgwLCBuKTtcbiAgICBsaXN0LmhlYWQuZGF0YSA9IGxpc3QuaGVhZC5kYXRhLnNsaWNlKG4pO1xuICB9IGVsc2UgaWYgKG4gPT09IGxpc3QuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgIC8vIGZpcnN0IGNodW5rIGlzIGEgcGVyZmVjdCBtYXRjaFxuICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyByZXN1bHQgc3BhbnMgbW9yZSB0aGFuIG9uZSBidWZmZXJcbiAgICByZXQgPSBoYXNTdHJpbmdzID8gY29weUZyb21CdWZmZXJTdHJpbmcobiwgbGlzdCkgOiBjb3B5RnJvbUJ1ZmZlcihuLCBsaXN0KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGNoYXJhY3RlcnMgZnJvbSB0aGUgbGlzdCBvZiBidWZmZXJlZCBkYXRhXG4vLyBjaHVua3MuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyU3RyaW5nKG4sIGxpc3QpIHtcbiAgdmFyIHAgPSBsaXN0LmhlYWQ7XG4gIHZhciBjID0gMTtcbiAgdmFyIHJldCA9IHAuZGF0YTtcbiAgbiAtPSByZXQubGVuZ3RoO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHZhciBzdHIgPSBwLmRhdGE7XG4gICAgdmFyIG5iID0gbiA+IHN0ci5sZW5ndGggPyBzdHIubGVuZ3RoIDogbjtcbiAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHJldCArPSBzdHI7ZWxzZSByZXQgKz0gc3RyLnNsaWNlKDAsIG4pO1xuICAgIG4gLT0gbmI7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgIGlmIChuYiA9PT0gc3RyLmxlbmd0aCkge1xuICAgICAgICArK2M7XG4gICAgICAgIGlmIChwLm5leHQpIGxpc3QuaGVhZCA9IHAubmV4dDtlbHNlIGxpc3QuaGVhZCA9IGxpc3QudGFpbCA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0LmhlYWQgPSBwO1xuICAgICAgICBwLmRhdGEgPSBzdHIuc2xpY2UobmIpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgICsrYztcbiAgfVxuICBsaXN0Lmxlbmd0aCAtPSBjO1xuICByZXR1cm4gcmV0O1xufVxuXG4vLyBDb3BpZXMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIGJ5dGVzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YSBjaHVua3MuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGNvcHlGcm9tQnVmZmVyKG4sIGxpc3QpIHtcbiAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuKTtcbiAgdmFyIHAgPSBsaXN0LmhlYWQ7XG4gIHZhciBjID0gMTtcbiAgcC5kYXRhLmNvcHkocmV0KTtcbiAgbiAtPSBwLmRhdGEubGVuZ3RoO1xuICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgIHZhciBidWYgPSBwLmRhdGE7XG4gICAgdmFyIG5iID0gbiA+IGJ1Zi5sZW5ndGggPyBidWYubGVuZ3RoIDogbjtcbiAgICBidWYuY29weShyZXQsIHJldC5sZW5ndGggLSBuLCAwLCBuYik7XG4gICAgbiAtPSBuYjtcbiAgICBpZiAobiA9PT0gMCkge1xuICAgICAgaWYgKG5iID09PSBidWYubGVuZ3RoKSB7XG4gICAgICAgICsrYztcbiAgICAgICAgaWYgKHAubmV4dCkgbGlzdC5oZWFkID0gcC5uZXh0O2Vsc2UgbGlzdC5oZWFkID0gbGlzdC50YWlsID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3QuaGVhZCA9IHA7XG4gICAgICAgIHAuZGF0YSA9IGJ1Zi5zbGljZShuYik7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgKytjO1xuICB9XG4gIGxpc3QubGVuZ3RoIC09IGM7XG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYVxuICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uXG4gIGlmIChzdGF0ZS5sZW5ndGggPiAwKSB0aHJvdyBuZXcgRXJyb3IoJ1wiZW5kUmVhZGFibGUoKVwiIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7XG5cbiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICAgIHBuYS5uZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZU5UKHN0YXRlLCBzdHJlYW0pIHtcbiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5kZXhPZih4cywgeCkge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvXG4vLyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4gIFNvbWV0aW1lcyBpdCdzIGNhbGxlZCBhIFwiZmlsdGVyXCIsXG4vLyBidXQgdGhhdCdzIG5vdCBhIGdyZWF0IG5hbWUgZm9yIGl0LCBzaW5jZSB0aGF0IGltcGxpZXMgYSB0aGluZyB3aGVyZVxuLy8gc29tZSBiaXRzIHBhc3MgdGhyb3VnaCwgYW5kIG90aGVycyBhcmUgc2ltcGx5IGlnbm9yZWQuICAoVGhhdCB3b3VsZFxuLy8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKVxuLy9cbi8vIFdoaWxlIHRoZSBvdXRwdXQgaXMgY2F1c2FsbHkgcmVsYXRlZCB0byB0aGUgaW5wdXQsIGl0J3Mgbm90IGFcbi8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLFxuLy8gYSB6bGliIHN0cmVhbSBtaWdodCB0YWtlIG11bHRpcGxlIHBsYWluLXRleHQgd3JpdGVzKCksIGFuZCB0aGVuXG4vLyBlbWl0IGEgc2luZ2xlIGNvbXByZXNzZWQgY2h1bmsgc29tZSB0aW1lIGluIHRoZSBmdXR1cmUuXG4vL1xuLy8gSGVyZSdzIGhvdyB0aGlzIHdvcmtzOlxuLy9cbi8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZVxuLy8gc3RyZWFtIGNsYXNzZXMuICBXaGVuIHlvdSB3cml0ZShjaHVuayksIHRoYXQgY2FsbHMgX3dyaXRlKGNodW5rLGNiKVxuLy8gaW50ZXJuYWxseSwgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlcmUncyBhIGxvdCBvZiBwZW5kaW5nIHdyaXRlc1xuLy8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbFxuLy8gdGhlcmUncyBlbm91Z2ggcGVuZGluZyByZWFkYWJsZSBkYXRhIGJ1ZmZlcmVkIHVwLlxuLy9cbi8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuXG4vLyBfcmVhZChuKSBpcyBjYWxsZWQsIGl0IHRyYW5zZm9ybXMgdGhlIHF1ZXVlZCB1cCBkYXRhLCBjYWxsaW5nIHRoZVxuLy8gYnVmZmVyZWQgX3dyaXRlIGNiJ3MgYXMgaXQgY29uc3VtZXMgY2h1bmtzLiAgSWYgY29uc3VtaW5nIGEgc2luZ2xlXG4vLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdFxuLy8gb3V0cHV0dGVkIGJpdCBjYWxscyB0aGUgcmVhZGNiLCBhbmQgc3Vic2VxdWVudCBjaHVua3MganVzdCBnbyBpbnRvXG4vLyB0aGUgcmVhZCBidWZmZXIsIGFuZCB3aWxsIGNhdXNlIGl0IHRvIGVtaXQgJ3JlYWRhYmxlJyBpZiBuZWNlc3NhcnkuXG4vL1xuLy8gVGhpcyB3YXksIGJhY2stcHJlc3N1cmUgaXMgYWN0dWFsbHkgZGV0ZXJtaW5lZCBieSB0aGUgcmVhZGluZyBzaWRlLFxuLy8gc2luY2UgX3JlYWQgaGFzIHRvIGJlIGNhbGxlZCB0byBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IGNodW5rLiAgSG93ZXZlcixcbi8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmdcbi8vIGhlcmUuICBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIHN0cmVhbSB3aGVyZSBldmVyeSBieXRlIG9mIGlucHV0IGlzXG4vLyBpbnRlcnByZXRlZCBhcyBhbiBpbnRlZ2VyIGZyb20gMC0yNTUsIGFuZCB0aGVuIHJlc3VsdHMgaW4gdGhhdCBtYW55XG4vLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluXG4vLyAxa2Igb2YgZGF0YSBiZWluZyBvdXRwdXQuICBJbiB0aGlzIGNhc2UsIHlvdSBjb3VsZCB3cml0ZSBhIHZlcnkgc21hbGxcbi8vIGFtb3VudCBvZiBpbnB1dCwgYW5kIGVuZCB1cCB3aXRoIGEgdmVyeSBsYXJnZSBhbW91bnQgb2Ygb3V0cHV0LiAgSW5cbi8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbFxuLy8gdGhlIHN5c3RlbSB0byBzdG9wIGRvaW5nIHRoZSB0cmFuc2Zvcm0uICBBIHNpbmdsZSA0TUIgd3JpdGUgY291bGRcbi8vIGNhdXNlIHRoZSBzeXN0ZW0gdG8gcnVuIG91dCBvZiBtZW1vcnkuXG4vL1xuLy8gSG93ZXZlciwgZXZlbiBpbiBzdWNoIGEgcGF0aG9sb2dpY2FsIGNhc2UsIG9ubHkgYSBzaW5nbGUgd3JpdHRlbiBjaHVua1xuLy8gd291bGQgYmUgY29uc3VtZWQsIGFuZCB0aGVuIHRoZSByZXN0IHdvdWxkIHdhaXQgKHVuLXRyYW5zZm9ybWVkKSB1bnRpbFxuLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cbnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7XG5cbmZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKGVyLCBkYXRhKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuICB0cy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblxuICB2YXIgY2IgPSB0cy53cml0ZWNiO1xuXG4gIGlmICghY2IpIHtcbiAgICByZXR1cm4gdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignd3JpdGUgY2FsbGJhY2sgY2FsbGVkIG11bHRpcGxlIHRpbWVzJykpO1xuICB9XG5cbiAgdHMud3JpdGVjaHVuayA9IG51bGw7XG4gIHRzLndyaXRlY2IgPSBudWxsO1xuXG4gIGlmIChkYXRhICE9IG51bGwpIC8vIHNpbmdsZSBlcXVhbHMgY2hlY2sgZm9yIGJvdGggYG51bGxgIGFuZCBgdW5kZWZpbmVkYFxuICAgIHRoaXMucHVzaChkYXRhKTtcblxuICBjYihlcik7XG5cbiAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgcnMucmVhZGluZyA9IGZhbHNlO1xuICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHtcbiAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59XG5cbmZ1bmN0aW9uIFRyYW5zZm9ybShvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBUcmFuc2Zvcm0pKSByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtcblxuICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IHtcbiAgICBhZnRlclRyYW5zZm9ybTogYWZ0ZXJUcmFuc2Zvcm0uYmluZCh0aGlzKSxcbiAgICBuZWVkVHJhbnNmb3JtOiBmYWxzZSxcbiAgICB0cmFuc2Zvcm1pbmc6IGZhbHNlLFxuICAgIHdyaXRlY2I6IG51bGwsXG4gICAgd3JpdGVjaHVuazogbnVsbCxcbiAgICB3cml0ZWVuY29kaW5nOiBudWxsXG4gIH07XG5cbiAgLy8gc3RhcnQgb3V0IGFza2luZyBmb3IgYSByZWFkYWJsZSBldmVudCBvbmNlIGRhdGEgaXMgdHJhbnNmb3JtZWQuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblxuICAvLyB3ZSBoYXZlIGltcGxlbWVudGVkIHRoZSBfcmVhZCBtZXRob2QsIGFuZCBkb25lIHRoZSBvdGhlciB0aGluZ3NcbiAgLy8gdGhhdCBSZWFkYWJsZSB3YW50cyBiZWZvcmUgdGhlIGZpcnN0IF9yZWFkIGNhbGwsIHNvIHVuc2V0IHRoZVxuICAvLyBzeW5jIGd1YXJkIGZsYWcuXG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuc3luYyA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmx1c2ggPT09ICdmdW5jdGlvbicpIHRoaXMuX2ZsdXNoID0gb3B0aW9ucy5mbHVzaDtcbiAgfVxuXG4gIC8vIFdoZW4gdGhlIHdyaXRhYmxlIHNpZGUgZmluaXNoZXMsIHRoZW4gZmx1c2ggb3V0IGFueXRoaW5nIHJlbWFpbmluZy5cbiAgdGhpcy5vbigncHJlZmluaXNoJywgcHJlZmluaXNoKTtcbn1cblxuZnVuY3Rpb24gcHJlZmluaXNoKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIGlmICh0eXBlb2YgdGhpcy5fZmx1c2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLl9mbHVzaChmdW5jdGlvbiAoZXIsIGRhdGEpIHtcbiAgICAgIGRvbmUoX3RoaXMsIGVyLCBkYXRhKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBkb25lKHRoaXMsIG51bGwsIG51bGwpO1xuICB9XG59XG5cblRyYW5zZm9ybS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHtcbiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuICByZXR1cm4gRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTtcbn07XG5cbi8vIFRoaXMgaXMgdGhlIHBhcnQgd2hlcmUgeW91IGRvIHN0dWZmIVxuLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuLy8gJ2NodW5rJyBpcyBhbiBpbnB1dCBjaHVuay5cbi8vXG4vLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXRcbi8vIHRvIHRoZSByZWFkYWJsZSBzaWRlLiAgWW91IG1heSBjYWxsICdwdXNoJyB6ZXJvIG9yIG1vcmUgdGltZXMuXG4vL1xuLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3Ncbi8vIGFuIGVycm9yLCB0aGVuIHRoYXQnbGwgcHV0IHRoZSBodXJ0IG9uIHRoZSB3aG9sZSBvcGVyYXRpb24uICBJZiB5b3Vcbi8vIG5ldmVyIGNhbGwgY2IoKSwgdGhlbiB5b3UnbGwgbmV2ZXIgZ2V0IGFub3RoZXIgY2h1bmsuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aHJvdyBuZXcgRXJyb3IoJ190cmFuc2Zvcm0oKSBpcyBub3QgaW1wbGVtZW50ZWQnKTtcbn07XG5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG4gIHRzLndyaXRlY2IgPSBjYjtcbiAgdHMud3JpdGVjaHVuayA9IGNodW5rO1xuICB0cy53cml0ZWVuY29kaW5nID0gZW5jb2Rpbmc7XG4gIGlmICghdHMudHJhbnNmb3JtaW5nKSB7XG4gICAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAodHMubmVlZFRyYW5zZm9ybSB8fCBycy5uZWVkUmVhZGFibGUgfHwgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaykgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcbiAgfVxufTtcblxuLy8gRG9lc24ndCBtYXR0ZXIgd2hhdCB0aGUgYXJncyBhcmUgaGVyZS5cbi8vIF90cmFuc2Zvcm0gZG9lcyBhbGwgdGhlIHdvcmsuXG4vLyBUaGF0IHdlIGdvdCBoZXJlIG1lYW5zIHRoYXQgdGhlIHJlYWRhYmxlIHNpZGUgd2FudHMgbW9yZSBkYXRhLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuXG4gIGlmICh0cy53cml0ZWNodW5rICE9PSBudWxsICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7XG4gICAgdGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssIHRzLndyaXRlZW5jb2RpbmcsIHRzLmFmdGVyVHJhbnNmb3JtKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBtYXJrIHRoYXQgd2UgbmVlZCBhIHRyYW5zZm9ybSwgc28gdGhhdCBhbnkgZGF0YSB0aGF0IGNvbWVzIGluXG4gICAgLy8gd2lsbCBnZXQgcHJvY2Vzc2VkLCBub3cgdGhhdCB3ZSd2ZSBhc2tlZCBmb3IgaXQuXG4gICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7XG4gIH1cbn07XG5cblRyYW5zZm9ybS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB2YXIgX3RoaXMyID0gdGhpcztcblxuICBEdXBsZXgucHJvdG90eXBlLl9kZXN0cm95LmNhbGwodGhpcywgZXJyLCBmdW5jdGlvbiAoZXJyMikge1xuICAgIGNiKGVycjIpO1xuICAgIF90aGlzMi5lbWl0KCdjbG9zZScpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlciwgZGF0YSkge1xuICBpZiAoZXIpIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG5cbiAgaWYgKGRhdGEgIT0gbnVsbCkgLy8gc2luZ2xlIGVxdWFscyBjaGVjayBmb3IgYm90aCBgbnVsbGAgYW5kIGB1bmRlZmluZWRgXG4gICAgc3RyZWFtLnB1c2goZGF0YSk7XG5cbiAgLy8gaWYgdGhlcmUncyBub3RoaW5nIGluIHRoZSB3cml0ZSBidWZmZXIsIHRoZW4gdGhhdCBtZWFuc1xuICAvLyB0aGF0IG5vdGhpbmcgbW9yZSB3aWxsIGV2ZXIgYmUgcHJvdmlkZWRcbiAgaWYgKHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignQ2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7XG5cbiAgaWYgKHN0cmVhbS5fdHJhbnNmb3JtU3RhdGUudHJhbnNmb3JtaW5nKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTtcblxuICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG59IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIEEgYml0IHNpbXBsZXIgdGhhbiByZWFkYWJsZSBzdHJlYW1zLlxuLy8gSW1wbGVtZW50IGFuIGFzeW5jIC5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBjYiksIGFuZCBpdCdsbCBoYW5kbGUgYWxsXG4vLyB0aGUgZHJhaW4gZXZlbnQgZW1pc3Npb24gYW5kIGJ1ZmZlcmluZy5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdyaXRhYmxlO1xuXG4vKiA8cmVwbGFjZW1lbnQ+ICovXG5mdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuICB0aGlzLmNhbGxiYWNrID0gY2I7XG4gIHRoaXMubmV4dCA9IG51bGw7XG59XG5cbi8vIEl0IHNlZW1zIGEgbGlua2VkIGxpc3QgYnV0IGl0IGlzIG5vdFxuLy8gdGhlcmUgd2lsbCBiZSBvbmx5IDIgb2YgdGhlc2UgZm9yIGVhY2ggc3RyZWFtXG5mdW5jdGlvbiBDb3JrZWRSZXF1ZXN0KHN0YXRlKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgdGhpcy5lbnRyeSA9IG51bGw7XG4gIHRoaXMuZmluaXNoID0gZnVuY3Rpb24gKCkge1xuICAgIG9uQ29ya2VkRmluaXNoKF90aGlzLCBzdGF0ZSk7XG4gIH07XG59XG4vKiA8L3JlcGxhY2VtZW50PiAqL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGFzeW5jV3JpdGUgPSAhcHJvY2Vzcy5icm93c2VyICYmIFsndjAuMTAnLCAndjAuOS4nXS5pbmRleE9mKHByb2Nlc3MudmVyc2lvbi5zbGljZSgwLCA1KSkgPiAtMSA/IHNldEltbWVkaWF0ZSA6IHBuYS5uZXh0VGljaztcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIER1cGxleDtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5Xcml0YWJsZS5Xcml0YWJsZVN0YXRlID0gV3JpdGFibGVTdGF0ZTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGludGVybmFsVXRpbCA9IHtcbiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpXG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgU3RyZWFtID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL3N0cmVhbScpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdzYWZlLWJ1ZmZlcicpLkJ1ZmZlcjtcbnZhciBPdXJVaW50OEFycmF5ID0gZ2xvYmFsLlVpbnQ4QXJyYXkgfHwgZnVuY3Rpb24gKCkge307XG5mdW5jdGlvbiBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShjaHVuayk7XG59XG5mdW5jdGlvbiBfaXNVaW50OEFycmF5KG9iaikge1xuICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKG9iaikgfHwgb2JqIGluc3RhbmNlb2YgT3VyVWludDhBcnJheTtcbn1cblxuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBkZXN0cm95SW1wbCA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9kZXN0cm95Jyk7XG5cbnV0aWwuaW5oZXJpdHMoV3JpdGFibGUsIFN0cmVhbSk7XG5cbmZ1bmN0aW9uIG5vcCgpIHt9XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmVcbiAgLy8gdGhlIHNhbWUgb3B0aW9ucyBvYmplY3QuXG4gIC8vIEhvd2V2ZXIsIHNvbWUgY2FzZXMgcmVxdWlyZSBzZXR0aW5nIG9wdGlvbnMgdG8gZGlmZmVyZW50XG4gIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0uXG4gIC8vIFRoZXNlIG9wdGlvbnMgY2FuIGJlIHByb3ZpZGVkIHNlcGFyYXRlbHkgYXMgcmVhZGFibGVYWFggYW5kIHdyaXRhYmxlWFhYLlxuICB2YXIgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXg7XG5cbiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtXG4gIC8vIGNvbnRhaW5zIGJ1ZmZlcnMgb3Igb2JqZWN0cy5cbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cbiAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmXG4gIC8vIHRoZSBlbnRpcmUgYnVmZmVyIGlzIG5vdCBmbHVzaGVkIGltbWVkaWF0ZWx5IG9uIHdyaXRlKClcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIHdyaXRhYmxlSHdtID0gb3B0aW9ucy53cml0YWJsZUhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG5cbiAgaWYgKGh3bSB8fCBod20gPT09IDApIHRoaXMuaGlnaFdhdGVyTWFyayA9IGh3bTtlbHNlIGlmIChpc0R1cGxleCAmJiAod3JpdGFibGVId20gfHwgd3JpdGFibGVId20gPT09IDApKSB0aGlzLmhpZ2hXYXRlck1hcmsgPSB3cml0YWJsZUh3bTtlbHNlIHRoaXMuaGlnaFdhdGVyTWFyayA9IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBNYXRoLmZsb29yKHRoaXMuaGlnaFdhdGVyTWFyayk7XG5cbiAgLy8gaWYgX2ZpbmFsIGhhcyBiZWVuIGNhbGxlZFxuICB0aGlzLmZpbmFsQ2FsbGVkID0gZmFsc2U7XG5cbiAgLy8gZHJhaW4gZXZlbnQgZmxhZy5cbiAgdGhpcy5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgLy8gYXQgdGhlIHN0YXJ0IG9mIGNhbGxpbmcgZW5kKClcbiAgdGhpcy5lbmRpbmcgPSBmYWxzZTtcbiAgLy8gd2hlbiBlbmQoKSBoYXMgYmVlbiBjYWxsZWQsIGFuZCByZXR1cm5lZFxuICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gIC8vIHdoZW4gJ2ZpbmlzaCcgaXMgZW1pdHRlZFxuICB0aGlzLmZpbmlzaGVkID0gZmFsc2U7XG5cbiAgLy8gaGFzIGl0IGJlZW4gZGVzdHJveWVkXG4gIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XG5cbiAgLy8gc2hvdWxkIHdlIGRlY29kZSBzdHJpbmdzIGludG8gYnVmZmVycyBiZWZvcmUgcGFzc2luZyB0byBfd3JpdGU/XG4gIC8vIHRoaXMgaXMgaGVyZSBzbyB0aGF0IHNvbWUgbm9kZS1jb3JlIHN0cmVhbXMgY2FuIG9wdGltaXplIHN0cmluZ1xuICAvLyBoYW5kbGluZyBhdCBhIGxvd2VyIGxldmVsLlxuICB2YXIgbm9EZWNvZGUgPSBvcHRpb25zLmRlY29kZVN0cmluZ3MgPT09IGZhbHNlO1xuICB0aGlzLmRlY29kZVN0cmluZ3MgPSAhbm9EZWNvZGU7XG5cbiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG4gIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cbiAgLy8gbm90IGFuIGFjdHVhbCBidWZmZXIgd2Uga2VlcCB0cmFjayBvZiwgYnV0IGEgbWVhc3VyZW1lbnRcbiAgLy8gb2YgaG93IG11Y2ggd2UncmUgd2FpdGluZyB0byBnZXQgcHVzaGVkIHRvIHNvbWUgdW5kZXJseWluZ1xuICAvLyBzb2NrZXQgb3IgZmlsZS5cbiAgdGhpcy5sZW5ndGggPSAwO1xuXG4gIC8vIGEgZmxhZyB0byBzZWUgd2hlbiB3ZSdyZSBpbiB0aGUgbWlkZGxlIG9mIGEgd3JpdGUuXG4gIHRoaXMud3JpdGluZyA9IGZhbHNlO1xuXG4gIC8vIHdoZW4gdHJ1ZSBhbGwgd3JpdGVzIHdpbGwgYmUgYnVmZmVyZWQgdW50aWwgLnVuY29yaygpIGNhbGxcbiAgdGhpcy5jb3JrZWQgPSAwO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuICB0aGlzLnN5bmMgPSB0cnVlO1xuXG4gIC8vIGEgZmxhZyB0byBrbm93IGlmIHdlJ3JlIHByb2Nlc3NpbmcgcHJldmlvdXNseSBidWZmZXJlZCBpdGVtcywgd2hpY2hcbiAgLy8gbWF5IGNhbGwgdGhlIF93cml0ZSgpIGNhbGxiYWNrIGluIHRoZSBzYW1lIHRpY2ssIHNvIHRoYXQgd2UgZG9uJ3RcbiAgLy8gZW5kIHVwIGluIGFuIG92ZXJsYXBwZWQgb253cml0ZSBzaXR1YXRpb24uXG4gIHRoaXMuYnVmZmVyUHJvY2Vzc2luZyA9IGZhbHNlO1xuXG4gIC8vIHRoZSBjYWxsYmFjayB0aGF0J3MgcGFzc2VkIHRvIF93cml0ZShjaHVuayxjYilcbiAgdGhpcy5vbndyaXRlID0gZnVuY3Rpb24gKGVyKSB7XG4gICAgb253cml0ZShzdHJlYW0sIGVyKTtcbiAgfTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYilcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcblxuICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuXG4gIHRoaXMud3JpdGVsZW4gPSAwO1xuXG4gIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgdGhpcy5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcblxuICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrc1xuICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWRcbiAgdGhpcy5wZW5kaW5nY2IgPSAwO1xuXG4gIC8vIGVtaXQgcHJlZmluaXNoIGlmIHRoZSBvbmx5IHRoaW5nIHdlJ3JlIHdhaXRpbmcgZm9yIGlzIF93cml0ZSBjYnNcbiAgLy8gVGhpcyBpcyByZWxldmFudCBmb3Igc3luY2hyb25vdXMgVHJhbnNmb3JtIHN0cmVhbXNcbiAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIFRydWUgaWYgdGhlIGVycm9yIHdhcyBhbHJlYWR5IGVtaXR0ZWQgYW5kIHNob3VsZCBub3QgYmUgdGhyb3duIGFnYWluXG4gIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG5cbiAgLy8gY291bnQgYnVmZmVyZWQgcmVxdWVzdHNcbiAgdGhpcy5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7XG5cbiAgLy8gYWxsb2NhdGUgdGhlIGZpcnN0IENvcmtlZFJlcXVlc3QsIHRoZXJlIGlzIGFsd2F5c1xuICAvLyBvbmUgYWxsb2NhdGVkIGFuZCBmcmVlIHRvIHVzZSwgYW5kIHdlIG1haW50YWluIGF0IG1vc3QgdHdvXG4gIHRoaXMuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3QodGhpcyk7XG59XG5cbldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIGdldEJ1ZmZlcigpIHtcbiAgdmFyIGN1cnJlbnQgPSB0aGlzLmJ1ZmZlcmVkUmVxdWVzdDtcbiAgdmFyIG91dCA9IFtdO1xuICB3aGlsZSAoY3VycmVudCkge1xuICAgIG91dC5wdXNoKGN1cnJlbnQpO1xuICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07XG5cbihmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFdyaXRhYmxlU3RhdGUucHJvdG90eXBlLCAnYnVmZmVyJywge1xuICAgICAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QnVmZmVyKCk7XG4gICAgICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArICdpbnN0ZWFkLicsICdERVAwMDAzJylcbiAgICB9KTtcbiAgfSBjYXRjaCAoXykge31cbn0pKCk7XG5cbi8vIFRlc3QgX3dyaXRhYmxlU3RhdGUgZm9yIGluaGVyaXRhbmNlIHRvIGFjY291bnQgZm9yIER1cGxleCBzdHJlYW1zLFxuLy8gd2hvc2UgcHJvdG90eXBlIGNoYWluIG9ubHkgcG9pbnRzIHRvIFJlYWRhYmxlLlxudmFyIHJlYWxIYXNJbnN0YW5jZTtcbmlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5oYXNJbnN0YW5jZSAmJiB0eXBlb2YgRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgcmVhbEhhc0luc3RhbmNlID0gRnVuY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5oYXNJbnN0YW5jZV07XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZSwgU3ltYm9sLmhhc0luc3RhbmNlLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgIGlmIChyZWFsSGFzSW5zdGFuY2UuY2FsbCh0aGlzLCBvYmplY3QpKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGlmICh0aGlzICE9PSBXcml0YWJsZSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC5fd3JpdGFibGVTdGF0ZSBpbnN0YW5jZW9mIFdyaXRhYmxlU3RhdGU7XG4gICAgfVxuICB9KTtcbn0gZWxzZSB7XG4gIHJlYWxIYXNJbnN0YW5jZSA9IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgdGhpcztcbiAgfTtcbn1cblxuZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdG9vLlxuICAvLyBgcmVhbEhhc0luc3RhbmNlYCBpcyBuZWNlc3NhcnkgYmVjYXVzZSB1c2luZyBwbGFpbiBgaW5zdGFuY2VvZmBcbiAgLy8gd291bGQgcmV0dXJuIGZhbHNlLCBhcyBubyBgX3dyaXRhYmxlU3RhdGVgIHByb3BlcnR5IGlzIGF0dGFjaGVkLlxuXG4gIC8vIFRyeWluZyB0byB1c2UgdGhlIGN1c3RvbSBgaW5zdGFuY2VvZmAgZm9yIFdyaXRhYmxlIGhlcmUgd2lsbCBhbHNvIGJyZWFrIHRoZVxuICAvLyBOb2RlLmpzIExhenlUcmFuc2Zvcm0gaW1wbGVtZW50YXRpb24sIHdoaWNoIGhhcyBhIG5vbi10cml2aWFsIGdldHRlciBmb3JcbiAgLy8gYF93cml0YWJsZVN0YXRlYCB0aGF0IHdvdWxkIGxlYWQgdG8gaW5maW5pdGUgcmVjdXJzaW9uLlxuICBpZiAoIXJlYWxIYXNJbnN0YW5jZS5jYWxsKFdyaXRhYmxlLCB0aGlzKSAmJiAhKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKSB7XG4gICAgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTtcbiAgfVxuXG4gIHRoaXMuX3dyaXRhYmxlU3RhdGUgPSBuZXcgV3JpdGFibGVTdGF0ZShvcHRpb25zLCB0aGlzKTtcblxuICAvLyBsZWdhY3kuXG4gIHRoaXMud3JpdGFibGUgPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRlID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKSB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSB0aGlzLl9kZXN0cm95ID0gb3B0aW9ucy5kZXN0cm95O1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmZpbmFsID09PSAnZnVuY3Rpb24nKSB0aGlzLl9maW5hbCA9IG9wdGlvbnMuZmluYWw7XG4gIH1cblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLlxuV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ0Nhbm5vdCBwaXBlLCBub3QgcmVhZGFibGUnKSk7XG59O1xuXG5mdW5jdGlvbiB3cml0ZUFmdGVyRW5kKHN0cmVhbSwgY2IpIHtcbiAgdmFyIGVyID0gbmV3IEVycm9yKCd3cml0ZSBhZnRlciBlbmQnKTtcbiAgLy8gVE9ETzogZGVmZXIgZXJyb3IgZXZlbnRzIGNvbnNpc3RlbnRseSBldmVyeXdoZXJlLCBub3QganVzdCB0aGUgY2JcbiAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICBwbmEubmV4dFRpY2soY2IsIGVyKTtcbn1cblxuLy8gQ2hlY2tzIHRoYXQgYSB1c2VyLXN1cHBsaWVkIGNodW5rIGlzIHZhbGlkLCBlc3BlY2lhbGx5IGZvciB0aGUgcGFydGljdWxhclxuLy8gbW9kZSB0aGUgc3RyZWFtIGlzIGluLiBDdXJyZW50bHkgdGhpcyBtZWFucyB0aGF0IGBudWxsYCBpcyBuZXZlciBhY2NlcHRlZFxuLy8gYW5kIHVuZGVmaW5lZC9ub24tc3RyaW5nIHZhbHVlcyBhcmUgb25seSBhbGxvd2VkIGluIG9iamVjdCBtb2RlLlxuZnVuY3Rpb24gdmFsaWRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgY2IpIHtcbiAgdmFyIHZhbGlkID0gdHJ1ZTtcbiAgdmFyIGVyID0gZmFsc2U7XG5cbiAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgZXIgPSBuZXcgVHlwZUVycm9yKCdNYXkgbm90IHdyaXRlIG51bGwgdmFsdWVzIHRvIHN0cmVhbScpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiYgY2h1bmsgIT09IHVuZGVmaW5lZCAmJiAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuICB9XG4gIGlmIChlcikge1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICBwbmEubmV4dFRpY2soY2IsIGVyKTtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHJldCA9IGZhbHNlO1xuICB2YXIgaXNCdWYgPSAhc3RhdGUub2JqZWN0TW9kZSAmJiBfaXNVaW50OEFycmF5KGNodW5rKTtcblxuICBpZiAoaXNCdWYgJiYgIUJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpIHtcbiAgICBjaHVuayA9IF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKGlzQnVmKSBlbmNvZGluZyA9ICdidWZmZXInO2Vsc2UgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSBzdGF0ZS5kZWZhdWx0RW5jb2Rpbmc7XG5cbiAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykgY2IgPSBub3A7XG5cbiAgaWYgKHN0YXRlLmVuZGVkKSB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtlbHNlIGlmIChpc0J1ZiB8fCB2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7XG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIHN0YXRlLmNvcmtlZCsrO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLnVuY29yayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkLS07XG5cbiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiYgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KSBjbGVhckJ1ZmZlcih0aGlzLCBzdGF0ZSk7XG4gIH1cbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5zZXREZWZhdWx0RW5jb2RpbmcgPSBmdW5jdGlvbiBzZXREZWZhdWx0RW5jb2RpbmcoZW5jb2RpbmcpIHtcbiAgLy8gbm9kZTo6UGFyc2VFbmNvZGluZygpIHJlcXVpcmVzIGxvd2VyIGNhc2UuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnKSBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7XG4gIGlmICghKFsnaGV4JywgJ3V0ZjgnLCAndXRmLTgnLCAnYXNjaWknLCAnYmluYXJ5JywgJ2Jhc2U2NCcsICd1Y3MyJywgJ3Vjcy0yJywgJ3V0ZjE2bGUnLCAndXRmLTE2bGUnLCAncmF3J10uaW5kZXhPZigoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKSkgPiAtMSkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZyk7XG4gIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVmYXVsdEVuY29kaW5nID0gZW5jb2Rpbmc7XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykge1xuICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgc3RhdGUuZGVjb2RlU3RyaW5ncyAhPT0gZmFsc2UgJiYgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykge1xuICAgIGNodW5rID0gQnVmZmVyLmZyb20oY2h1bmssIGVuY29kaW5nKTtcbiAgfVxuICByZXR1cm4gY2h1bms7XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICd3cml0YWJsZUhpZ2hXYXRlck1hcmsnLCB7XG4gIC8vIG1ha2luZyBpdCBleHBsaWNpdCB0aGlzIHByb3BlcnR5IGlzIG5vdCBlbnVtZXJhYmxlXG4gIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHNvbWUgcHJvdG90eXBlIG1hbmlwdWxhdGlvbiBpblxuICAvLyB1c2VybGFuZCB3aWxsIGZhaWxcbiAgZW51bWVyYWJsZTogZmFsc2UsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmhpZ2hXYXRlck1hcms7XG4gIH1cbn0pO1xuXG4vLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXNcbi8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlXG4vLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLlxuZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBpc0J1ZiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBpZiAoIWlzQnVmKSB7XG4gICAgdmFyIG5ld0NodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG4gICAgaWYgKGNodW5rICE9PSBuZXdDaHVuaykge1xuICAgICAgaXNCdWYgPSB0cnVlO1xuICAgICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcbiAgICAgIGNodW5rID0gbmV3Q2h1bms7XG4gICAgfVxuICB9XG4gIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblxuICBzdGF0ZS5sZW5ndGggKz0gbGVuO1xuXG4gIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS5cbiAgaWYgKCFyZXQpIHN0YXRlLm5lZWREcmFpbiA9IHRydWU7XG5cbiAgaWYgKHN0YXRlLndyaXRpbmcgfHwgc3RhdGUuY29ya2VkKSB7XG4gICAgdmFyIGxhc3QgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O1xuICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSB7XG4gICAgICBjaHVuazogY2h1bmssXG4gICAgICBlbmNvZGluZzogZW5jb2RpbmcsXG4gICAgICBpc0J1ZjogaXNCdWYsXG4gICAgICBjYWxsYmFjazogY2IsXG4gICAgICBuZXh0OiBudWxsXG4gICAgfTtcbiAgICBpZiAobGFzdCkge1xuICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9XG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgKz0gMTtcbiAgfSBlbHNlIHtcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBzdGF0ZS53cml0ZWxlbiA9IGxlbjtcbiAgc3RhdGUud3JpdGVjYiA9IGNiO1xuICBzdGF0ZS53cml0aW5nID0gdHJ1ZTtcbiAgc3RhdGUuc3luYyA9IHRydWU7XG4gIGlmICh3cml0ZXYpIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtlbHNlIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcbiAgc3RhdGUuc3luYyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG4gIC0tc3RhdGUucGVuZGluZ2NiO1xuXG4gIGlmIChzeW5jKSB7XG4gICAgLy8gZGVmZXIgdGhlIGNhbGxiYWNrIGlmIHdlIGFyZSBiZWluZyBjYWxsZWQgc3luY2hyb25vdXNseVxuICAgIC8vIHRvIGF2b2lkIHBpbGluZyB1cCB0aGluZ3Mgb24gdGhlIHN0YWNrXG4gICAgcG5hLm5leHRUaWNrKGNiLCBlcik7XG4gICAgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGFuZCBpdCB3aWxsIGFsd2F5cyBoYXBwZW5cbiAgICAvLyBhZnRlciBlcnJvclxuICAgIHBuYS5uZXh0VGljayhmaW5pc2hNYXliZSwgc3RyZWFtLCBzdGF0ZSk7XG4gICAgc3RyZWFtLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9IGVsc2Uge1xuICAgIC8vIHRoZSBjYWxsZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlZm9yZSBpZlxuICAgIC8vIGl0IGlzIGFzeW5jXG4gICAgY2IoZXIpO1xuICAgIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICAvLyB0aGlzIGNhbiBlbWl0IGZpbmlzaCwgYnV0IGZpbmlzaCBtdXN0XG4gICAgLy8gYWx3YXlzIGZvbGxvdyBlcnJvclxuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cbiAgaWYgKGVyKSBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtlbHNlIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpO1xuXG4gICAgaWYgKCFmaW5pc2hlZCAmJiAhc3RhdGUuY29ya2VkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIC8qPHJlcGxhY2VtZW50PiovXG4gICAgICBhc3luY1dyaXRlKGFmdGVyV3JpdGUsIHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgICAvKjwvcmVwbGFjZW1lbnQ+Ki9cbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikge1xuICBpZiAoIWZpbmlzaGVkKSBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSk7XG4gIHN0YXRlLnBlbmRpbmdjYi0tO1xuICBjYigpO1xuICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbn1cblxuLy8gTXVzdCBmb3JjZSBjYWxsYmFjayB0byBiZSBjYWxsZWQgb24gbmV4dFRpY2ssIHNvIHRoYXQgd2UgZG9uJ3Rcbi8vIGVtaXQgJ2RyYWluJyBiZWZvcmUgdGhlIHdyaXRlKCkgY29uc3VtZXIgZ2V0cyB0aGUgJ2ZhbHNlJyByZXR1cm5cbi8vIHZhbHVlLCBhbmQgaGFzIGEgY2hhbmNlIHRvIGF0dGFjaCBhICdkcmFpbicgbGlzdGVuZXIuXG5mdW5jdGlvbiBvbndyaXRlRHJhaW4oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLm5lZWREcmFpbikge1xuICAgIHN0YXRlLm5lZWREcmFpbiA9IGZhbHNlO1xuICAgIHN0cmVhbS5lbWl0KCdkcmFpbicpO1xuICB9XG59XG5cbi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0XG5mdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlO1xuICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3Q7XG5cbiAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIGVudHJ5ICYmIGVudHJ5Lm5leHQpIHtcbiAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpXG4gICAgdmFyIGwgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudDtcbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5KGwpO1xuICAgIHZhciBob2xkZXIgPSBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWU7XG4gICAgaG9sZGVyLmVudHJ5ID0gZW50cnk7XG5cbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBhbGxCdWZmZXJzID0gdHJ1ZTtcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGJ1ZmZlcltjb3VudF0gPSBlbnRyeTtcbiAgICAgIGlmICghZW50cnkuaXNCdWYpIGFsbEJ1ZmZlcnMgPSBmYWxzZTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDtcbiAgICAgIGNvdW50ICs9IDE7XG4gICAgfVxuICAgIGJ1ZmZlci5hbGxCdWZmZXJzID0gYWxsQnVmZmVycztcblxuICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgdHJ1ZSwgc3RhdGUubGVuZ3RoLCBidWZmZXIsICcnLCBob2xkZXIuZmluaXNoKTtcblxuICAgIC8vIGRvV3JpdGUgaXMgYWxtb3N0IGFsd2F5cyBhc3luYywgZGVmZXIgdGhlc2UgdG8gc2F2ZSBhIGJpdCBvZiB0aW1lXG4gICAgLy8gYXMgdGhlIGhvdCBwYXRoIGVuZHMgd2l0aCBkb1dyaXRlXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gICAgaWYgKGhvbGRlci5uZXh0KSB7XG4gICAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBob2xkZXIubmV4dDtcbiAgICAgIGhvbGRlci5uZXh0ID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gbmV3IENvcmtlZFJlcXVlc3Qoc3RhdGUpO1xuICAgIH1cbiAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3RDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZVxuICAgIHdoaWxlIChlbnRyeSkge1xuICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7XG4gICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZztcbiAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrO1xuICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXG4gICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICAgICAgZW50cnkgPSBlbnRyeS5uZXh0O1xuICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQtLTtcbiAgICAgIC8vIGlmIHdlIGRpZG4ndCBjYWxsIHRoZSBvbndyaXRlIGltbWVkaWF0ZWx5LCB0aGVuXG4gICAgICAvLyBpdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gd2FpdCB1bnRpbCBpdCBkb2VzLlxuICAgICAgLy8gYWxzbywgdGhhdCBtZWFucyB0aGF0IHRoZSBjaHVuayBhbmQgY2IgYXJlIGN1cnJlbnRseVxuICAgICAgLy8gYmVpbmcgcHJvY2Vzc2VkLCBzbyBtb3ZlIHRoZSBidWZmZXIgY291bnRlciBwYXN0IHRoZW0uXG4gICAgICBpZiAoc3RhdGUud3JpdGluZykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW50cnkgPT09IG51bGwpIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICB9XG5cbiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG5ldyBFcnJvcignX3dyaXRlKCkgaXMgbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsO1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAodHlwZW9mIGNodW5rID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBjaHVuaztcbiAgICBjaHVuayA9IG51bGw7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKGNodW5rICE9PSBudWxsICYmIGNodW5rICE9PSB1bmRlZmluZWQpIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTtcblxuICAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkID0gMTtcbiAgICB0aGlzLnVuY29yaygpO1xuICB9XG5cbiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlLCBjYik7XG59O1xuXG5mdW5jdGlvbiBuZWVkRmluaXNoKHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZS5lbmRpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJiAhc3RhdGUuZmluaXNoZWQgJiYgIXN0YXRlLndyaXRpbmc7XG59XG5mdW5jdGlvbiBjYWxsRmluYWwoc3RyZWFtLCBzdGF0ZSkge1xuICBzdHJlYW0uX2ZpbmFsKGZ1bmN0aW9uIChlcnIpIHtcbiAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgIH1cbiAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICAgIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucHJlZmluaXNoZWQgJiYgIXN0YXRlLmZpbmFsQ2FsbGVkKSB7XG4gICAgaWYgKHR5cGVvZiBzdHJlYW0uX2ZpbmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICAgIHN0YXRlLmZpbmFsQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHBuYS5uZXh0VGljayhjYWxsRmluYWwsIHN0cmVhbSwgc3RhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIG5lZWQgPSBuZWVkRmluaXNoKHN0YXRlKTtcbiAgaWYgKG5lZWQpIHtcbiAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gICAgaWYgKHN0YXRlLnBlbmRpbmdjYiA9PT0gMCkge1xuICAgICAgc3RhdGUuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLmVtaXQoJ2ZpbmlzaCcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmVlZDtcbn1cblxuZnVuY3Rpb24gZW5kV3JpdGFibGUoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcbiAgc3RhdGUuZW5kaW5nID0gdHJ1ZTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIGlmIChjYikge1xuICAgIGlmIChzdGF0ZS5maW5pc2hlZCkgcG5hLm5leHRUaWNrKGNiKTtlbHNlIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICBzdHJlYW0ud3JpdGFibGUgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb25Db3JrZWRGaW5pc2goY29ya1JlcSwgc3RhdGUsIGVycikge1xuICB2YXIgZW50cnkgPSBjb3JrUmVxLmVudHJ5O1xuICBjb3JrUmVxLmVudHJ5ID0gbnVsbDtcbiAgd2hpbGUgKGVudHJ5KSB7XG4gICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgY2IoZXJyKTtcbiAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gIH1cbiAgaWYgKHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSkge1xuICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZS5uZXh0ID0gY29ya1JlcTtcbiAgfSBlbHNlIHtcbiAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUgPSBjb3JrUmVxO1xuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZS5wcm90b3R5cGUsICdkZXN0cm95ZWQnLCB7XG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl93cml0YWJsZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbVxuICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXRcbiAgICBpZiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LCB0aGUgdXNlciBpcyBleHBsaWNpdGx5XG4gICAgLy8gbWFuYWdpbmcgZGVzdHJveWVkXG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB2YWx1ZTtcbiAgfVxufSk7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5kZXN0cm95ID0gZGVzdHJveUltcGwuZGVzdHJveTtcbldyaXRhYmxlLnByb3RvdHlwZS5fdW5kZXN0cm95ID0gZGVzdHJveUltcGwudW5kZXN0cm95O1xuV3JpdGFibGUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2IpIHtcbiAgdGhpcy5lbmQoKTtcbiAgY2IoZXJyKTtcbn07IiwiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuZnVuY3Rpb24gY29weUJ1ZmZlcihzcmMsIHRhcmdldCwgb2Zmc2V0KSB7XG4gIHNyYy5jb3B5KHRhcmdldCwgb2Zmc2V0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJ1ZmZlckxpc3QoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJ1ZmZlckxpc3QpO1xuXG4gICAgdGhpcy5oZWFkID0gbnVsbDtcbiAgICB0aGlzLnRhaWwgPSBudWxsO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoKHYpIHtcbiAgICB2YXIgZW50cnkgPSB7IGRhdGE6IHYsIG5leHQ6IG51bGwgfTtcbiAgICBpZiAodGhpcy5sZW5ndGggPiAwKSB0aGlzLnRhaWwubmV4dCA9IGVudHJ5O2Vsc2UgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgKyt0aGlzLmxlbmd0aDtcbiAgfTtcblxuICBCdWZmZXJMaXN0LnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24gdW5zaGlmdCh2KSB7XG4gICAgdmFyIGVudHJ5ID0geyBkYXRhOiB2LCBuZXh0OiB0aGlzLmhlYWQgfTtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgICsrdGhpcy5sZW5ndGg7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuc2hpZnQgPSBmdW5jdGlvbiBzaGlmdCgpIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICB2YXIgcmV0ID0gdGhpcy5oZWFkLmRhdGE7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO2Vsc2UgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5leHQ7XG4gICAgLS10aGlzLmxlbmd0aDtcbiAgICByZXR1cm4gcmV0O1xuICB9O1xuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uIGpvaW4ocykge1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICAgIHZhciBwID0gdGhpcy5oZWFkO1xuICAgIHZhciByZXQgPSAnJyArIHAuZGF0YTtcbiAgICB3aGlsZSAocCA9IHAubmV4dCkge1xuICAgICAgcmV0ICs9IHMgKyBwLmRhdGE7XG4gICAgfXJldHVybiByZXQ7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0KG4pIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiBCdWZmZXIuYWxsb2MoMCk7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy5oZWFkLmRhdGE7XG4gICAgdmFyIHJldCA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuID4+PiAwKTtcbiAgICB2YXIgcCA9IHRoaXMuaGVhZDtcbiAgICB2YXIgaSA9IDA7XG4gICAgd2hpbGUgKHApIHtcbiAgICAgIGNvcHlCdWZmZXIocC5kYXRhLCByZXQsIGkpO1xuICAgICAgaSArPSBwLmRhdGEubGVuZ3RoO1xuICAgICAgcCA9IHAubmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcblxuICByZXR1cm4gQnVmZmVyTGlzdDtcbn0oKTtcblxuaWYgKHV0aWwgJiYgdXRpbC5pbnNwZWN0ICYmIHV0aWwuaW5zcGVjdC5jdXN0b20pIHtcbiAgbW9kdWxlLmV4cG9ydHMucHJvdG90eXBlW3V0aWwuaW5zcGVjdC5jdXN0b21dID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYmogPSB1dGlsLmluc3BlY3QoeyBsZW5ndGg6IHRoaXMubGVuZ3RoIH0pO1xuICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm5hbWUgKyAnICcgKyBvYmo7XG4gIH07XG59IiwiJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgcG5hID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vLyB1bmRvY3VtZW50ZWQgY2IoKSBBUEksIG5lZWRlZCBmb3IgY29yZSwgbm90IGZvciBwdWJsaWMgQVBJXG5mdW5jdGlvbiBkZXN0cm95KGVyciwgY2IpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB2YXIgcmVhZGFibGVEZXN0cm95ZWQgPSB0aGlzLl9yZWFkYWJsZVN0YXRlICYmIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB2YXIgd3JpdGFibGVEZXN0cm95ZWQgPSB0aGlzLl93cml0YWJsZVN0YXRlICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuXG4gIGlmIChyZWFkYWJsZURlc3Ryb3llZCB8fCB3cml0YWJsZURlc3Ryb3llZCkge1xuICAgIGlmIChjYikge1xuICAgICAgY2IoZXJyKTtcbiAgICB9IGVsc2UgaWYgKGVyciAmJiAoIXRoaXMuX3dyaXRhYmxlU3RhdGUgfHwgIXRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkKSkge1xuICAgICAgcG5hLm5leHRUaWNrKGVtaXRFcnJvck5ULCB0aGlzLCBlcnIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHdlIHNldCBkZXN0cm95ZWQgdG8gdHJ1ZSBiZWZvcmUgZmlyaW5nIGVycm9yIGNhbGxiYWNrcyBpbiBvcmRlclxuICAvLyB0byBtYWtlIGl0IHJlLWVudHJhbmNlIHNhZmUgaW4gY2FzZSBkZXN0cm95KCkgaXMgY2FsbGVkIHdpdGhpbiBjYWxsYmFja3NcblxuICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIGlmIHRoaXMgaXMgYSBkdXBsZXggc3RyZWFtIG1hcmsgdGhlIHdyaXRhYmxlIHBhcnQgYXMgZGVzdHJveWVkIGFzIHdlbGxcbiAgaWYgKHRoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH1cblxuICB0aGlzLl9kZXN0cm95KGVyciB8fCBudWxsLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgaWYgKCFjYiAmJiBlcnIpIHtcbiAgICAgIHBuYS5uZXh0VGljayhlbWl0RXJyb3JOVCwgX3RoaXMsIGVycik7XG4gICAgICBpZiAoX3RoaXMuX3dyaXRhYmxlU3RhdGUpIHtcbiAgICAgICAgX3RoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNiKSB7XG4gICAgICBjYihlcnIpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIHVuZGVzdHJveSgpIHtcbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5kZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZEVtaXR0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlmICh0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl93cml0YWJsZVN0YXRlLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbWl0RXJyb3JOVChzZWxmLCBlcnIpIHtcbiAgc2VsZi5lbWl0KCdlcnJvcicsIGVycik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBkZXN0cm95OiBkZXN0cm95LFxuICB1bmRlc3Ryb3k6IHVuZGVzdHJveVxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9yZWFkYWJsZScpLlBhc3NUaHJvdWdoXG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzJyk7XG5leHBvcnRzLlN0cmVhbSA9IGV4cG9ydHM7XG5leHBvcnRzLlJlYWRhYmxlID0gZXhwb3J0cztcbmV4cG9ydHMuV3JpdGFibGUgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzJyk7XG5leHBvcnRzLkR1cGxleCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fZHVwbGV4LmpzJyk7XG5leHBvcnRzLlRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzJyk7XG5leHBvcnRzLlBhc3NUaHJvdWdoID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qcycpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3JlYWRhYmxlJykuVHJhbnNmb3JtXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fd3JpdGFibGUuanMnKTtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vZGUvbm8tZGVwcmVjYXRlZC1hcGkgKi9cbnZhciBidWZmZXIgPSByZXF1aXJlKCdidWZmZXInKVxudmFyIEJ1ZmZlciA9IGJ1ZmZlci5CdWZmZXJcblxuLy8gYWx0ZXJuYXRpdmUgdG8gdXNpbmcgT2JqZWN0LmtleXMgZm9yIG9sZCBicm93c2Vyc1xuZnVuY3Rpb24gY29weVByb3BzIChzcmMsIGRzdCkge1xuICBmb3IgKHZhciBrZXkgaW4gc3JjKSB7XG4gICAgZHN0W2tleV0gPSBzcmNba2V5XVxuICB9XG59XG5pZiAoQnVmZmVyLmZyb20gJiYgQnVmZmVyLmFsbG9jICYmIEJ1ZmZlci5hbGxvY1Vuc2FmZSAmJiBCdWZmZXIuYWxsb2NVbnNhZmVTbG93KSB7XG4gIG1vZHVsZS5leHBvcnRzID0gYnVmZmVyXG59IGVsc2Uge1xuICAvLyBDb3B5IHByb3BlcnRpZXMgZnJvbSByZXF1aXJlKCdidWZmZXInKVxuICBjb3B5UHJvcHMoYnVmZmVyLCBleHBvcnRzKVxuICBleHBvcnRzLkJ1ZmZlciA9IFNhZmVCdWZmZXJcbn1cblxuZnVuY3Rpb24gU2FmZUJ1ZmZlciAoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuLy8gQ29weSBzdGF0aWMgbWV0aG9kcyBmcm9tIEJ1ZmZlclxuY29weVByb3BzKEJ1ZmZlciwgU2FmZUJ1ZmZlcilcblxuU2FmZUJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5TYWZlQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICB2YXIgYnVmID0gQnVmZmVyKHNpemUpXG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykge1xuICAgICAgYnVmLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1Zi5maWxsKGZpbGwpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGJ1Zi5maWxsKDApXG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5TYWZlQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBCdWZmZXIoc2l6ZSlcbn1cblxuU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZVNsb3cgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlci5TbG93QnVmZmVyKHNpemUpXG59XG4iLCI7KGZ1bmN0aW9uIChzYXgpIHsgLy8gd3JhcHBlciBmb3Igbm9uLW5vZGUgZW52c1xuICBzYXgucGFyc2VyID0gZnVuY3Rpb24gKHN0cmljdCwgb3B0KSB7IHJldHVybiBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KSB9XG4gIHNheC5TQVhQYXJzZXIgPSBTQVhQYXJzZXJcbiAgc2F4LlNBWFN0cmVhbSA9IFNBWFN0cmVhbVxuICBzYXguY3JlYXRlU3RyZWFtID0gY3JlYXRlU3RyZWFtXG5cbiAgLy8gV2hlbiB3ZSBwYXNzIHRoZSBNQVhfQlVGRkVSX0xFTkdUSCBwb3NpdGlvbiwgc3RhcnQgY2hlY2tpbmcgZm9yIGJ1ZmZlciBvdmVycnVucy5cbiAgLy8gV2hlbiB3ZSBjaGVjaywgc2NoZWR1bGUgdGhlIG5leHQgY2hlY2sgZm9yIE1BWF9CVUZGRVJfTEVOR1RIIC0gKG1heChidWZmZXIgbGVuZ3RocykpLFxuICAvLyBzaW5jZSB0aGF0J3MgdGhlIGVhcmxpZXN0IHRoYXQgYSBidWZmZXIgb3ZlcnJ1biBjb3VsZCBvY2N1ci4gIFRoaXMgd2F5LCBjaGVja3MgYXJlXG4gIC8vIGFzIHJhcmUgYXMgcmVxdWlyZWQsIGJ1dCBhcyBvZnRlbiBhcyBuZWNlc3NhcnkgdG8gZW5zdXJlIG5ldmVyIGNyb3NzaW5nIHRoaXMgYm91bmQuXG4gIC8vIEZ1cnRoZXJtb3JlLCBidWZmZXJzIGFyZSBvbmx5IHRlc3RlZCBhdCBtb3N0IG9uY2UgcGVyIHdyaXRlKCksIHNvIHBhc3NpbmcgYSB2ZXJ5XG4gIC8vIGxhcmdlIHN0cmluZyBpbnRvIHdyaXRlKCkgbWlnaHQgaGF2ZSB1bmRlc2lyYWJsZSBlZmZlY3RzLCBidXQgdGhpcyBpcyBtYW5hZ2VhYmxlIGJ5XG4gIC8vIHRoZSBjYWxsZXIsIHNvIGl0IGlzIGFzc3VtZWQgdG8gYmUgc2FmZS4gIFRodXMsIGEgY2FsbCB0byB3cml0ZSgpIG1heSwgaW4gdGhlIGV4dHJlbWVcbiAgLy8gZWRnZSBjYXNlLCByZXN1bHQgaW4gY3JlYXRpbmcgYXQgbW9zdCBvbmUgY29tcGxldGUgY29weSBvZiB0aGUgc3RyaW5nIHBhc3NlZCBpbi5cbiAgLy8gU2V0IHRvIEluZmluaXR5IHRvIGhhdmUgdW5saW1pdGVkIGJ1ZmZlcnMuXG4gIHNheC5NQVhfQlVGRkVSX0xFTkdUSCA9IDY0ICogMTAyNFxuXG4gIHZhciBidWZmZXJzID0gW1xuICAgICdjb21tZW50JywgJ3NnbWxEZWNsJywgJ3RleHROb2RlJywgJ3RhZ05hbWUnLCAnZG9jdHlwZScsXG4gICAgJ3Byb2NJbnN0TmFtZScsICdwcm9jSW5zdEJvZHknLCAnZW50aXR5JywgJ2F0dHJpYk5hbWUnLFxuICAgICdhdHRyaWJWYWx1ZScsICdjZGF0YScsICdzY3JpcHQnXG4gIF1cblxuICBzYXguRVZFTlRTID0gW1xuICAgICd0ZXh0JyxcbiAgICAncHJvY2Vzc2luZ2luc3RydWN0aW9uJyxcbiAgICAnc2dtbGRlY2xhcmF0aW9uJyxcbiAgICAnZG9jdHlwZScsXG4gICAgJ2NvbW1lbnQnLFxuICAgICdvcGVudGFnc3RhcnQnLFxuICAgICdhdHRyaWJ1dGUnLFxuICAgICdvcGVudGFnJyxcbiAgICAnY2xvc2V0YWcnLFxuICAgICdvcGVuY2RhdGEnLFxuICAgICdjZGF0YScsXG4gICAgJ2Nsb3NlY2RhdGEnLFxuICAgICdlcnJvcicsXG4gICAgJ2VuZCcsXG4gICAgJ3JlYWR5JyxcbiAgICAnc2NyaXB0JyxcbiAgICAnb3Blbm5hbWVzcGFjZScsXG4gICAgJ2Nsb3NlbmFtZXNwYWNlJ1xuICBdXG5cbiAgZnVuY3Rpb24gU0FYUGFyc2VyIChzdHJpY3QsIG9wdCkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTQVhQYXJzZXIpKSB7XG4gICAgICByZXR1cm4gbmV3IFNBWFBhcnNlcihzdHJpY3QsIG9wdClcbiAgICB9XG5cbiAgICB2YXIgcGFyc2VyID0gdGhpc1xuICAgIGNsZWFyQnVmZmVycyhwYXJzZXIpXG4gICAgcGFyc2VyLnEgPSBwYXJzZXIuYyA9ICcnXG4gICAgcGFyc2VyLmJ1ZmZlckNoZWNrUG9zaXRpb24gPSBzYXguTUFYX0JVRkZFUl9MRU5HVEhcbiAgICBwYXJzZXIub3B0ID0gb3B0IHx8IHt9XG4gICAgcGFyc2VyLm9wdC5sb3dlcmNhc2UgPSBwYXJzZXIub3B0Lmxvd2VyY2FzZSB8fCBwYXJzZXIub3B0Lmxvd2VyY2FzZXRhZ3NcbiAgICBwYXJzZXIubG9vc2VDYXNlID0gcGFyc2VyLm9wdC5sb3dlcmNhc2UgPyAndG9Mb3dlckNhc2UnIDogJ3RvVXBwZXJDYXNlJ1xuICAgIHBhcnNlci50YWdzID0gW11cbiAgICBwYXJzZXIuY2xvc2VkID0gcGFyc2VyLmNsb3NlZFJvb3QgPSBwYXJzZXIuc2F3Um9vdCA9IGZhbHNlXG4gICAgcGFyc2VyLnRhZyA9IHBhcnNlci5lcnJvciA9IG51bGxcbiAgICBwYXJzZXIuc3RyaWN0ID0gISFzdHJpY3RcbiAgICBwYXJzZXIubm9zY3JpcHQgPSAhIShzdHJpY3QgfHwgcGFyc2VyLm9wdC5ub3NjcmlwdClcbiAgICBwYXJzZXIuc3RhdGUgPSBTLkJFR0lOXG4gICAgcGFyc2VyLnN0cmljdEVudGl0aWVzID0gcGFyc2VyLm9wdC5zdHJpY3RFbnRpdGllc1xuICAgIHBhcnNlci5FTlRJVElFUyA9IHBhcnNlci5zdHJpY3RFbnRpdGllcyA/IE9iamVjdC5jcmVhdGUoc2F4LlhNTF9FTlRJVElFUykgOiBPYmplY3QuY3JlYXRlKHNheC5FTlRJVElFUylcbiAgICBwYXJzZXIuYXR0cmliTGlzdCA9IFtdXG5cbiAgICAvLyBuYW1lc3BhY2VzIGZvcm0gYSBwcm90b3R5cGUgY2hhaW4uXG4gICAgLy8gaXQgYWx3YXlzIHBvaW50cyBhdCB0aGUgY3VycmVudCB0YWcsXG4gICAgLy8gd2hpY2ggcHJvdG9zIHRvIGl0cyBwYXJlbnQgdGFnLlxuICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICBwYXJzZXIubnMgPSBPYmplY3QuY3JlYXRlKHJvb3ROUylcbiAgICB9XG5cbiAgICAvLyBtb3N0bHkganVzdCBmb3IgZXJyb3IgcmVwb3J0aW5nXG4gICAgcGFyc2VyLnRyYWNrUG9zaXRpb24gPSBwYXJzZXIub3B0LnBvc2l0aW9uICE9PSBmYWxzZVxuICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgcGFyc2VyLnBvc2l0aW9uID0gcGFyc2VyLmxpbmUgPSBwYXJzZXIuY29sdW1uID0gMFxuICAgIH1cbiAgICBlbWl0KHBhcnNlciwgJ29ucmVhZHknKVxuICB9XG5cbiAgaWYgKCFPYmplY3QuY3JlYXRlKSB7XG4gICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBmdW5jdGlvbiBGICgpIHt9XG4gICAgICBGLnByb3RvdHlwZSA9IG9cbiAgICAgIHZhciBuZXdmID0gbmV3IEYoKVxuICAgICAgcmV0dXJuIG5ld2ZcbiAgICB9XG4gIH1cblxuICBpZiAoIU9iamVjdC5rZXlzKSB7XG4gICAgT2JqZWN0LmtleXMgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGEgPSBbXVxuICAgICAgZm9yICh2YXIgaSBpbiBvKSBpZiAoby5oYXNPd25Qcm9wZXJ0eShpKSkgYS5wdXNoKGkpXG4gICAgICByZXR1cm4gYVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrQnVmZmVyTGVuZ3RoIChwYXJzZXIpIHtcbiAgICB2YXIgbWF4QWxsb3dlZCA9IE1hdGgubWF4KHNheC5NQVhfQlVGRkVSX0xFTkdUSCwgMTApXG4gICAgdmFyIG1heEFjdHVhbCA9IDBcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGJ1ZmZlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgbGVuID0gcGFyc2VyW2J1ZmZlcnNbaV1dLmxlbmd0aFxuICAgICAgaWYgKGxlbiA+IG1heEFsbG93ZWQpIHtcbiAgICAgICAgLy8gVGV4dC9jZGF0YSBub2RlcyBjYW4gZ2V0IGJpZywgYW5kIHNpbmNlIHRoZXkncmUgYnVmZmVyZWQsXG4gICAgICAgIC8vIHdlIGNhbiBnZXQgaGVyZSB1bmRlciBub3JtYWwgY29uZGl0aW9ucy5cbiAgICAgICAgLy8gQXZvaWQgaXNzdWVzIGJ5IGVtaXR0aW5nIHRoZSB0ZXh0IG5vZGUgbm93LFxuICAgICAgICAvLyBzbyBhdCBsZWFzdCBpdCB3b24ndCBnZXQgYW55IGJpZ2dlci5cbiAgICAgICAgc3dpdGNoIChidWZmZXJzW2ldKSB7XG4gICAgICAgICAgY2FzZSAndGV4dE5vZGUnOlxuICAgICAgICAgICAgY2xvc2VUZXh0KHBhcnNlcilcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdjZGF0YSc6XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNkYXRhJywgcGFyc2VyLmNkYXRhKVxuICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gJydcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdzY3JpcHQnOlxuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25zY3JpcHQnLCBwYXJzZXIuc2NyaXB0KVxuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCA9ICcnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGVycm9yKHBhcnNlciwgJ01heCBidWZmZXIgbGVuZ3RoIGV4Y2VlZGVkOiAnICsgYnVmZmVyc1tpXSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbWF4QWN0dWFsID0gTWF0aC5tYXgobWF4QWN0dWFsLCBsZW4pXG4gICAgfVxuICAgIC8vIHNjaGVkdWxlIHRoZSBuZXh0IGNoZWNrIGZvciB0aGUgZWFybGllc3QgcG9zc2libGUgYnVmZmVyIG92ZXJydW4uXG4gICAgdmFyIG0gPSBzYXguTUFYX0JVRkZFUl9MRU5HVEggLSBtYXhBY3R1YWxcbiAgICBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IG0gKyBwYXJzZXIucG9zaXRpb25cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyQnVmZmVycyAocGFyc2VyKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBidWZmZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgcGFyc2VyW2J1ZmZlcnNbaV1dID0gJydcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaEJ1ZmZlcnMgKHBhcnNlcikge1xuICAgIGNsb3NlVGV4dChwYXJzZXIpXG4gICAgaWYgKHBhcnNlci5jZGF0YSAhPT0gJycpIHtcbiAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY2RhdGEnLCBwYXJzZXIuY2RhdGEpXG4gICAgICBwYXJzZXIuY2RhdGEgPSAnJ1xuICAgIH1cbiAgICBpZiAocGFyc2VyLnNjcmlwdCAhPT0gJycpIHtcbiAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uc2NyaXB0JywgcGFyc2VyLnNjcmlwdClcbiAgICAgIHBhcnNlci5zY3JpcHQgPSAnJ1xuICAgIH1cbiAgfVxuXG4gIFNBWFBhcnNlci5wcm90b3R5cGUgPSB7XG4gICAgZW5kOiBmdW5jdGlvbiAoKSB7IGVuZCh0aGlzKSB9LFxuICAgIHdyaXRlOiB3cml0ZSxcbiAgICByZXN1bWU6IGZ1bmN0aW9uICgpIHsgdGhpcy5lcnJvciA9IG51bGw7IHJldHVybiB0aGlzIH0sXG4gICAgY2xvc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMud3JpdGUobnVsbCkgfSxcbiAgICBmbHVzaDogZnVuY3Rpb24gKCkgeyBmbHVzaEJ1ZmZlcnModGhpcykgfVxuICB9XG5cbiAgdmFyIFN0cmVhbVxuICB0cnkge1xuICAgIFN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpLlN0cmVhbVxuICB9IGNhdGNoIChleCkge1xuICAgIFN0cmVhbSA9IGZ1bmN0aW9uICgpIHt9XG4gIH1cblxuICB2YXIgc3RyZWFtV3JhcHMgPSBzYXguRVZFTlRTLmZpbHRlcihmdW5jdGlvbiAoZXYpIHtcbiAgICByZXR1cm4gZXYgIT09ICdlcnJvcicgJiYgZXYgIT09ICdlbmQnXG4gIH0pXG5cbiAgZnVuY3Rpb24gY3JlYXRlU3RyZWFtIChzdHJpY3QsIG9wdCkge1xuICAgIHJldHVybiBuZXcgU0FYU3RyZWFtKHN0cmljdCwgb3B0KVxuICB9XG5cbiAgZnVuY3Rpb24gU0FYU3RyZWFtIChzdHJpY3QsIG9wdCkge1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTQVhTdHJlYW0pKSB7XG4gICAgICByZXR1cm4gbmV3IFNBWFN0cmVhbShzdHJpY3QsIG9wdClcbiAgICB9XG5cbiAgICBTdHJlYW0uYXBwbHkodGhpcylcblxuICAgIHRoaXMuX3BhcnNlciA9IG5ldyBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpXG4gICAgdGhpcy53cml0YWJsZSA9IHRydWVcbiAgICB0aGlzLnJlYWRhYmxlID0gdHJ1ZVxuXG4gICAgdmFyIG1lID0gdGhpc1xuXG4gICAgdGhpcy5fcGFyc2VyLm9uZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgbWUuZW1pdCgnZW5kJylcbiAgICB9XG5cbiAgICB0aGlzLl9wYXJzZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcikge1xuICAgICAgbWUuZW1pdCgnZXJyb3InLCBlcilcblxuICAgICAgLy8gaWYgZGlkbid0IHRocm93LCB0aGVuIG1lYW5zIGVycm9yIHdhcyBoYW5kbGVkLlxuICAgICAgLy8gZ28gYWhlYWQgYW5kIGNsZWFyIGVycm9yLCBzbyB3ZSBjYW4gd3JpdGUgYWdhaW4uXG4gICAgICBtZS5fcGFyc2VyLmVycm9yID0gbnVsbFxuICAgIH1cblxuICAgIHRoaXMuX2RlY29kZXIgPSBudWxsXG5cbiAgICBzdHJlYW1XcmFwcy5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1lLCAnb24nICsgZXYsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIG1lLl9wYXJzZXJbJ29uJyArIGV2XVxuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChoKSB7XG4gICAgICAgICAgaWYgKCFoKSB7XG4gICAgICAgICAgICBtZS5yZW1vdmVBbGxMaXN0ZW5lcnMoZXYpXG4gICAgICAgICAgICBtZS5fcGFyc2VyWydvbicgKyBldl0gPSBoXG4gICAgICAgICAgICByZXR1cm4gaFxuICAgICAgICAgIH1cbiAgICAgICAgICBtZS5vbihldiwgaClcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgU0FYU3RyZWFtLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RyZWFtLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogU0FYU3RyZWFtXG4gICAgfVxuICB9KVxuXG4gIFNBWFN0cmVhbS5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIGlmICh0eXBlb2YgQnVmZmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgICB0eXBlb2YgQnVmZmVyLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmXG4gICAgICBCdWZmZXIuaXNCdWZmZXIoZGF0YSkpIHtcbiAgICAgIGlmICghdGhpcy5fZGVjb2Rlcikge1xuICAgICAgICB2YXIgU0QgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2RlcicpLlN0cmluZ0RlY29kZXJcbiAgICAgICAgdGhpcy5fZGVjb2RlciA9IG5ldyBTRCgndXRmOCcpXG4gICAgICB9XG4gICAgICBkYXRhID0gdGhpcy5fZGVjb2Rlci53cml0ZShkYXRhKVxuICAgIH1cblxuICAgIHRoaXMuX3BhcnNlci53cml0ZShkYXRhLnRvU3RyaW5nKCkpXG4gICAgdGhpcy5lbWl0KCdkYXRhJywgZGF0YSlcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgU0FYU3RyZWFtLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmspIHtcbiAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB7XG4gICAgICB0aGlzLndyaXRlKGNodW5rKVxuICAgIH1cbiAgICB0aGlzLl9wYXJzZXIuZW5kKClcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgU0FYU3RyZWFtLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldiwgaGFuZGxlcikge1xuICAgIHZhciBtZSA9IHRoaXNcbiAgICBpZiAoIW1lLl9wYXJzZXJbJ29uJyArIGV2XSAmJiBzdHJlYW1XcmFwcy5pbmRleE9mKGV2KSAhPT0gLTEpIHtcbiAgICAgIG1lLl9wYXJzZXJbJ29uJyArIGV2XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gW2FyZ3VtZW50c1swXV0gOiBBcnJheS5hcHBseShudWxsLCBhcmd1bWVudHMpXG4gICAgICAgIGFyZ3Muc3BsaWNlKDAsIDAsIGV2KVxuICAgICAgICBtZS5lbWl0LmFwcGx5KG1lLCBhcmdzKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwobWUsIGV2LCBoYW5kbGVyKVxuICB9XG5cbiAgLy8gdGhpcyByZWFsbHkgbmVlZHMgdG8gYmUgcmVwbGFjZWQgd2l0aCBjaGFyYWN0ZXIgY2xhc3Nlcy5cbiAgLy8gWE1MIGFsbG93cyBhbGwgbWFubmVyIG9mIHJpZGljdWxvdXMgbnVtYmVycyBhbmQgZGlnaXRzLlxuICB2YXIgQ0RBVEEgPSAnW0NEQVRBWydcbiAgdmFyIERPQ1RZUEUgPSAnRE9DVFlQRSdcbiAgdmFyIFhNTF9OQU1FU1BBQ0UgPSAnaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlJ1xuICB2YXIgWE1MTlNfTkFNRVNQQUNFID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvJ1xuICB2YXIgcm9vdE5TID0geyB4bWw6IFhNTF9OQU1FU1BBQ0UsIHhtbG5zOiBYTUxOU19OQU1FU1BBQ0UgfVxuXG4gIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy14bWwvI05ULU5hbWVTdGFydENoYXJcbiAgLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiB3b3JrcyBvbiBzdHJpbmdzLCBhIHNpbmdsZSBjaGFyYWN0ZXIgYXQgYSB0aW1lXG4gIC8vIGFzIHN1Y2gsIGl0IGNhbm5vdCBldmVyIHN1cHBvcnQgYXN0cmFsLXBsYW5lIGNoYXJhY3RlcnMgKDEwMDAwLUVGRkZGKVxuICAvLyB3aXRob3V0IGEgc2lnbmlmaWNhbnQgYnJlYWtpbmcgY2hhbmdlIHRvIGVpdGhlciB0aGlzICBwYXJzZXIsIG9yIHRoZVxuICAvLyBKYXZhU2NyaXB0IGxhbmd1YWdlLiAgSW1wbGVtZW50YXRpb24gb2YgYW4gZW1vamktY2FwYWJsZSB4bWwgcGFyc2VyXG4gIC8vIGlzIGxlZnQgYXMgYW4gZXhlcmNpc2UgZm9yIHRoZSByZWFkZXIuXG4gIHZhciBuYW1lU3RhcnQgPSAvWzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXS9cblxuICB2YXIgbmFtZUJvZHkgPSAvWzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MC5cXGQtXS9cblxuICB2YXIgZW50aXR5U3RhcnQgPSAvWyM6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRF0vXG4gIHZhciBlbnRpdHlCb2R5ID0gL1sjOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRcXHUwMEI3XFx1MDMwMC1cXHUwMzZGXFx1MjAzRi1cXHUyMDQwLlxcZC1dL1xuXG4gIGZ1bmN0aW9uIGlzV2hpdGVzcGFjZSAoYykge1xuICAgIHJldHVybiBjID09PSAnICcgfHwgYyA9PT0gJ1xcbicgfHwgYyA9PT0gJ1xccicgfHwgYyA9PT0gJ1xcdCdcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzUXVvdGUgKGMpIHtcbiAgICByZXR1cm4gYyA9PT0gJ1wiJyB8fCBjID09PSAnXFwnJ1xuICB9XG5cbiAgZnVuY3Rpb24gaXNBdHRyaWJFbmQgKGMpIHtcbiAgICByZXR1cm4gYyA9PT0gJz4nIHx8IGlzV2hpdGVzcGFjZShjKVxuICB9XG5cbiAgZnVuY3Rpb24gaXNNYXRjaCAocmVnZXgsIGMpIHtcbiAgICByZXR1cm4gcmVnZXgudGVzdChjKVxuICB9XG5cbiAgZnVuY3Rpb24gbm90TWF0Y2ggKHJlZ2V4LCBjKSB7XG4gICAgcmV0dXJuICFpc01hdGNoKHJlZ2V4LCBjKVxuICB9XG5cbiAgdmFyIFMgPSAwXG4gIHNheC5TVEFURSA9IHtcbiAgICBCRUdJTjogUysrLCAvLyBsZWFkaW5nIGJ5dGUgb3JkZXIgbWFyayBvciB3aGl0ZXNwYWNlXG4gICAgQkVHSU5fV0hJVEVTUEFDRTogUysrLCAvLyBsZWFkaW5nIHdoaXRlc3BhY2VcbiAgICBURVhUOiBTKyssIC8vIGdlbmVyYWwgc3R1ZmZcbiAgICBURVhUX0VOVElUWTogUysrLCAvLyAmYW1wIGFuZCBzdWNoLlxuICAgIE9QRU5fV0FLQTogUysrLCAvLyA8XG4gICAgU0dNTF9ERUNMOiBTKyssIC8vIDwhQkxBUkdcbiAgICBTR01MX0RFQ0xfUVVPVEVEOiBTKyssIC8vIDwhQkxBUkcgZm9vIFwiYmFyXG4gICAgRE9DVFlQRTogUysrLCAvLyA8IURPQ1RZUEVcbiAgICBET0NUWVBFX1FVT1RFRDogUysrLCAvLyA8IURPQ1RZUEUgXCIvL2JsYWhcbiAgICBET0NUWVBFX0RURDogUysrLCAvLyA8IURPQ1RZUEUgXCIvL2JsYWhcIiBbIC4uLlxuICAgIERPQ1RZUEVfRFREX1FVT1RFRDogUysrLCAvLyA8IURPQ1RZUEUgXCIvL2JsYWhcIiBbIFwiZm9vXG4gICAgQ09NTUVOVF9TVEFSVElORzogUysrLCAvLyA8IS1cbiAgICBDT01NRU5UOiBTKyssIC8vIDwhLS1cbiAgICBDT01NRU5UX0VORElORzogUysrLCAvLyA8IS0tIGJsYWggLVxuICAgIENPTU1FTlRfRU5ERUQ6IFMrKywgLy8gPCEtLSBibGFoIC0tXG4gICAgQ0RBVEE6IFMrKywgLy8gPCFbQ0RBVEFbIHNvbWV0aGluZ1xuICAgIENEQVRBX0VORElORzogUysrLCAvLyBdXG4gICAgQ0RBVEFfRU5ESU5HXzI6IFMrKywgLy8gXV1cbiAgICBQUk9DX0lOU1Q6IFMrKywgLy8gPD9oaVxuICAgIFBST0NfSU5TVF9CT0RZOiBTKyssIC8vIDw/aGkgdGhlcmVcbiAgICBQUk9DX0lOU1RfRU5ESU5HOiBTKyssIC8vIDw/aGkgXCJ0aGVyZVwiID9cbiAgICBPUEVOX1RBRzogUysrLCAvLyA8c3Ryb25nXG4gICAgT1BFTl9UQUdfU0xBU0g6IFMrKywgLy8gPHN0cm9uZyAvXG4gICAgQVRUUklCOiBTKyssIC8vIDxhXG4gICAgQVRUUklCX05BTUU6IFMrKywgLy8gPGEgZm9vXG4gICAgQVRUUklCX05BTUVfU0FXX1dISVRFOiBTKyssIC8vIDxhIGZvbyBfXG4gICAgQVRUUklCX1ZBTFVFOiBTKyssIC8vIDxhIGZvbz1cbiAgICBBVFRSSUJfVkFMVUVfUVVPVEVEOiBTKyssIC8vIDxhIGZvbz1cImJhclxuICAgIEFUVFJJQl9WQUxVRV9DTE9TRUQ6IFMrKywgLy8gPGEgZm9vPVwiYmFyXCJcbiAgICBBVFRSSUJfVkFMVUVfVU5RVU9URUQ6IFMrKywgLy8gPGEgZm9vPWJhclxuICAgIEFUVFJJQl9WQUxVRV9FTlRJVFlfUTogUysrLCAvLyA8Zm9vIGJhcj1cIiZxdW90O1wiXG4gICAgQVRUUklCX1ZBTFVFX0VOVElUWV9VOiBTKyssIC8vIDxmb28gYmFyPSZxdW90XG4gICAgQ0xPU0VfVEFHOiBTKyssIC8vIDwvYVxuICAgIENMT1NFX1RBR19TQVdfV0hJVEU6IFMrKywgLy8gPC9hICAgPlxuICAgIFNDUklQVDogUysrLCAvLyA8c2NyaXB0PiAuLi5cbiAgICBTQ1JJUFRfRU5ESU5HOiBTKysgLy8gPHNjcmlwdD4gLi4uIDxcbiAgfVxuXG4gIHNheC5YTUxfRU5USVRJRVMgPSB7XG4gICAgJ2FtcCc6ICcmJyxcbiAgICAnZ3QnOiAnPicsXG4gICAgJ2x0JzogJzwnLFxuICAgICdxdW90JzogJ1wiJyxcbiAgICAnYXBvcyc6IFwiJ1wiXG4gIH1cblxuICBzYXguRU5USVRJRVMgPSB7XG4gICAgJ2FtcCc6ICcmJyxcbiAgICAnZ3QnOiAnPicsXG4gICAgJ2x0JzogJzwnLFxuICAgICdxdW90JzogJ1wiJyxcbiAgICAnYXBvcyc6IFwiJ1wiLFxuICAgICdBRWxpZyc6IDE5OCxcbiAgICAnQWFjdXRlJzogMTkzLFxuICAgICdBY2lyYyc6IDE5NCxcbiAgICAnQWdyYXZlJzogMTkyLFxuICAgICdBcmluZyc6IDE5NyxcbiAgICAnQXRpbGRlJzogMTk1LFxuICAgICdBdW1sJzogMTk2LFxuICAgICdDY2VkaWwnOiAxOTksXG4gICAgJ0VUSCc6IDIwOCxcbiAgICAnRWFjdXRlJzogMjAxLFxuICAgICdFY2lyYyc6IDIwMixcbiAgICAnRWdyYXZlJzogMjAwLFxuICAgICdFdW1sJzogMjAzLFxuICAgICdJYWN1dGUnOiAyMDUsXG4gICAgJ0ljaXJjJzogMjA2LFxuICAgICdJZ3JhdmUnOiAyMDQsXG4gICAgJ0l1bWwnOiAyMDcsXG4gICAgJ050aWxkZSc6IDIwOSxcbiAgICAnT2FjdXRlJzogMjExLFxuICAgICdPY2lyYyc6IDIxMixcbiAgICAnT2dyYXZlJzogMjEwLFxuICAgICdPc2xhc2gnOiAyMTYsXG4gICAgJ090aWxkZSc6IDIxMyxcbiAgICAnT3VtbCc6IDIxNCxcbiAgICAnVEhPUk4nOiAyMjIsXG4gICAgJ1VhY3V0ZSc6IDIxOCxcbiAgICAnVWNpcmMnOiAyMTksXG4gICAgJ1VncmF2ZSc6IDIxNyxcbiAgICAnVXVtbCc6IDIyMCxcbiAgICAnWWFjdXRlJzogMjIxLFxuICAgICdhYWN1dGUnOiAyMjUsXG4gICAgJ2FjaXJjJzogMjI2LFxuICAgICdhZWxpZyc6IDIzMCxcbiAgICAnYWdyYXZlJzogMjI0LFxuICAgICdhcmluZyc6IDIyOSxcbiAgICAnYXRpbGRlJzogMjI3LFxuICAgICdhdW1sJzogMjI4LFxuICAgICdjY2VkaWwnOiAyMzEsXG4gICAgJ2VhY3V0ZSc6IDIzMyxcbiAgICAnZWNpcmMnOiAyMzQsXG4gICAgJ2VncmF2ZSc6IDIzMixcbiAgICAnZXRoJzogMjQwLFxuICAgICdldW1sJzogMjM1LFxuICAgICdpYWN1dGUnOiAyMzcsXG4gICAgJ2ljaXJjJzogMjM4LFxuICAgICdpZ3JhdmUnOiAyMzYsXG4gICAgJ2l1bWwnOiAyMzksXG4gICAgJ250aWxkZSc6IDI0MSxcbiAgICAnb2FjdXRlJzogMjQzLFxuICAgICdvY2lyYyc6IDI0NCxcbiAgICAnb2dyYXZlJzogMjQyLFxuICAgICdvc2xhc2gnOiAyNDgsXG4gICAgJ290aWxkZSc6IDI0NSxcbiAgICAnb3VtbCc6IDI0NixcbiAgICAnc3psaWcnOiAyMjMsXG4gICAgJ3Rob3JuJzogMjU0LFxuICAgICd1YWN1dGUnOiAyNTAsXG4gICAgJ3VjaXJjJzogMjUxLFxuICAgICd1Z3JhdmUnOiAyNDksXG4gICAgJ3V1bWwnOiAyNTIsXG4gICAgJ3lhY3V0ZSc6IDI1MyxcbiAgICAneXVtbCc6IDI1NSxcbiAgICAnY29weSc6IDE2OSxcbiAgICAncmVnJzogMTc0LFxuICAgICduYnNwJzogMTYwLFxuICAgICdpZXhjbCc6IDE2MSxcbiAgICAnY2VudCc6IDE2MixcbiAgICAncG91bmQnOiAxNjMsXG4gICAgJ2N1cnJlbic6IDE2NCxcbiAgICAneWVuJzogMTY1LFxuICAgICdicnZiYXInOiAxNjYsXG4gICAgJ3NlY3QnOiAxNjcsXG4gICAgJ3VtbCc6IDE2OCxcbiAgICAnb3JkZic6IDE3MCxcbiAgICAnbGFxdW8nOiAxNzEsXG4gICAgJ25vdCc6IDE3MixcbiAgICAnc2h5JzogMTczLFxuICAgICdtYWNyJzogMTc1LFxuICAgICdkZWcnOiAxNzYsXG4gICAgJ3BsdXNtbic6IDE3NyxcbiAgICAnc3VwMSc6IDE4NSxcbiAgICAnc3VwMic6IDE3OCxcbiAgICAnc3VwMyc6IDE3OSxcbiAgICAnYWN1dGUnOiAxODAsXG4gICAgJ21pY3JvJzogMTgxLFxuICAgICdwYXJhJzogMTgyLFxuICAgICdtaWRkb3QnOiAxODMsXG4gICAgJ2NlZGlsJzogMTg0LFxuICAgICdvcmRtJzogMTg2LFxuICAgICdyYXF1byc6IDE4NyxcbiAgICAnZnJhYzE0JzogMTg4LFxuICAgICdmcmFjMTInOiAxODksXG4gICAgJ2ZyYWMzNCc6IDE5MCxcbiAgICAnaXF1ZXN0JzogMTkxLFxuICAgICd0aW1lcyc6IDIxNSxcbiAgICAnZGl2aWRlJzogMjQ3LFxuICAgICdPRWxpZyc6IDMzOCxcbiAgICAnb2VsaWcnOiAzMzksXG4gICAgJ1NjYXJvbic6IDM1MixcbiAgICAnc2Nhcm9uJzogMzUzLFxuICAgICdZdW1sJzogMzc2LFxuICAgICdmbm9mJzogNDAyLFxuICAgICdjaXJjJzogNzEwLFxuICAgICd0aWxkZSc6IDczMixcbiAgICAnQWxwaGEnOiA5MTMsXG4gICAgJ0JldGEnOiA5MTQsXG4gICAgJ0dhbW1hJzogOTE1LFxuICAgICdEZWx0YSc6IDkxNixcbiAgICAnRXBzaWxvbic6IDkxNyxcbiAgICAnWmV0YSc6IDkxOCxcbiAgICAnRXRhJzogOTE5LFxuICAgICdUaGV0YSc6IDkyMCxcbiAgICAnSW90YSc6IDkyMSxcbiAgICAnS2FwcGEnOiA5MjIsXG4gICAgJ0xhbWJkYSc6IDkyMyxcbiAgICAnTXUnOiA5MjQsXG4gICAgJ051JzogOTI1LFxuICAgICdYaSc6IDkyNixcbiAgICAnT21pY3Jvbic6IDkyNyxcbiAgICAnUGknOiA5MjgsXG4gICAgJ1Jobyc6IDkyOSxcbiAgICAnU2lnbWEnOiA5MzEsXG4gICAgJ1RhdSc6IDkzMixcbiAgICAnVXBzaWxvbic6IDkzMyxcbiAgICAnUGhpJzogOTM0LFxuICAgICdDaGknOiA5MzUsXG4gICAgJ1BzaSc6IDkzNixcbiAgICAnT21lZ2EnOiA5MzcsXG4gICAgJ2FscGhhJzogOTQ1LFxuICAgICdiZXRhJzogOTQ2LFxuICAgICdnYW1tYSc6IDk0NyxcbiAgICAnZGVsdGEnOiA5NDgsXG4gICAgJ2Vwc2lsb24nOiA5NDksXG4gICAgJ3pldGEnOiA5NTAsXG4gICAgJ2V0YSc6IDk1MSxcbiAgICAndGhldGEnOiA5NTIsXG4gICAgJ2lvdGEnOiA5NTMsXG4gICAgJ2thcHBhJzogOTU0LFxuICAgICdsYW1iZGEnOiA5NTUsXG4gICAgJ211JzogOTU2LFxuICAgICdudSc6IDk1NyxcbiAgICAneGknOiA5NTgsXG4gICAgJ29taWNyb24nOiA5NTksXG4gICAgJ3BpJzogOTYwLFxuICAgICdyaG8nOiA5NjEsXG4gICAgJ3NpZ21hZic6IDk2MixcbiAgICAnc2lnbWEnOiA5NjMsXG4gICAgJ3RhdSc6IDk2NCxcbiAgICAndXBzaWxvbic6IDk2NSxcbiAgICAncGhpJzogOTY2LFxuICAgICdjaGknOiA5NjcsXG4gICAgJ3BzaSc6IDk2OCxcbiAgICAnb21lZ2EnOiA5NjksXG4gICAgJ3RoZXRhc3ltJzogOTc3LFxuICAgICd1cHNpaCc6IDk3OCxcbiAgICAncGl2JzogOTgyLFxuICAgICdlbnNwJzogODE5NCxcbiAgICAnZW1zcCc6IDgxOTUsXG4gICAgJ3RoaW5zcCc6IDgyMDEsXG4gICAgJ3p3bmonOiA4MjA0LFxuICAgICd6d2onOiA4MjA1LFxuICAgICdscm0nOiA4MjA2LFxuICAgICdybG0nOiA4MjA3LFxuICAgICduZGFzaCc6IDgyMTEsXG4gICAgJ21kYXNoJzogODIxMixcbiAgICAnbHNxdW8nOiA4MjE2LFxuICAgICdyc3F1byc6IDgyMTcsXG4gICAgJ3NicXVvJzogODIxOCxcbiAgICAnbGRxdW8nOiA4MjIwLFxuICAgICdyZHF1byc6IDgyMjEsXG4gICAgJ2JkcXVvJzogODIyMixcbiAgICAnZGFnZ2VyJzogODIyNCxcbiAgICAnRGFnZ2VyJzogODIyNSxcbiAgICAnYnVsbCc6IDgyMjYsXG4gICAgJ2hlbGxpcCc6IDgyMzAsXG4gICAgJ3Blcm1pbCc6IDgyNDAsXG4gICAgJ3ByaW1lJzogODI0MixcbiAgICAnUHJpbWUnOiA4MjQzLFxuICAgICdsc2FxdW8nOiA4MjQ5LFxuICAgICdyc2FxdW8nOiA4MjUwLFxuICAgICdvbGluZSc6IDgyNTQsXG4gICAgJ2ZyYXNsJzogODI2MCxcbiAgICAnZXVybyc6IDgzNjQsXG4gICAgJ2ltYWdlJzogODQ2NSxcbiAgICAnd2VpZXJwJzogODQ3MixcbiAgICAncmVhbCc6IDg0NzYsXG4gICAgJ3RyYWRlJzogODQ4MixcbiAgICAnYWxlZnN5bSc6IDg1MDEsXG4gICAgJ2xhcnInOiA4NTkyLFxuICAgICd1YXJyJzogODU5MyxcbiAgICAncmFycic6IDg1OTQsXG4gICAgJ2RhcnInOiA4NTk1LFxuICAgICdoYXJyJzogODU5NixcbiAgICAnY3JhcnInOiA4NjI5LFxuICAgICdsQXJyJzogODY1NixcbiAgICAndUFycic6IDg2NTcsXG4gICAgJ3JBcnInOiA4NjU4LFxuICAgICdkQXJyJzogODY1OSxcbiAgICAnaEFycic6IDg2NjAsXG4gICAgJ2ZvcmFsbCc6IDg3MDQsXG4gICAgJ3BhcnQnOiA4NzA2LFxuICAgICdleGlzdCc6IDg3MDcsXG4gICAgJ2VtcHR5JzogODcwOSxcbiAgICAnbmFibGEnOiA4NzExLFxuICAgICdpc2luJzogODcxMixcbiAgICAnbm90aW4nOiA4NzEzLFxuICAgICduaSc6IDg3MTUsXG4gICAgJ3Byb2QnOiA4NzE5LFxuICAgICdzdW0nOiA4NzIxLFxuICAgICdtaW51cyc6IDg3MjIsXG4gICAgJ2xvd2FzdCc6IDg3MjcsXG4gICAgJ3JhZGljJzogODczMCxcbiAgICAncHJvcCc6IDg3MzMsXG4gICAgJ2luZmluJzogODczNCxcbiAgICAnYW5nJzogODczNixcbiAgICAnYW5kJzogODc0MyxcbiAgICAnb3InOiA4NzQ0LFxuICAgICdjYXAnOiA4NzQ1LFxuICAgICdjdXAnOiA4NzQ2LFxuICAgICdpbnQnOiA4NzQ3LFxuICAgICd0aGVyZTQnOiA4NzU2LFxuICAgICdzaW0nOiA4NzY0LFxuICAgICdjb25nJzogODc3MyxcbiAgICAnYXN5bXAnOiA4Nzc2LFxuICAgICduZSc6IDg4MDAsXG4gICAgJ2VxdWl2JzogODgwMSxcbiAgICAnbGUnOiA4ODA0LFxuICAgICdnZSc6IDg4MDUsXG4gICAgJ3N1Yic6IDg4MzQsXG4gICAgJ3N1cCc6IDg4MzUsXG4gICAgJ25zdWInOiA4ODM2LFxuICAgICdzdWJlJzogODgzOCxcbiAgICAnc3VwZSc6IDg4MzksXG4gICAgJ29wbHVzJzogODg1MyxcbiAgICAnb3RpbWVzJzogODg1NSxcbiAgICAncGVycCc6IDg4NjksXG4gICAgJ3Nkb3QnOiA4OTAxLFxuICAgICdsY2VpbCc6IDg5NjgsXG4gICAgJ3JjZWlsJzogODk2OSxcbiAgICAnbGZsb29yJzogODk3MCxcbiAgICAncmZsb29yJzogODk3MSxcbiAgICAnbGFuZyc6IDkwMDEsXG4gICAgJ3JhbmcnOiA5MDAyLFxuICAgICdsb3onOiA5Njc0LFxuICAgICdzcGFkZXMnOiA5ODI0LFxuICAgICdjbHVicyc6IDk4MjcsXG4gICAgJ2hlYXJ0cyc6IDk4MjksXG4gICAgJ2RpYW1zJzogOTgzMFxuICB9XG5cbiAgT2JqZWN0LmtleXMoc2F4LkVOVElUSUVTKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgZSA9IHNheC5FTlRJVElFU1trZXldXG4gICAgdmFyIHMgPSB0eXBlb2YgZSA9PT0gJ251bWJlcicgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpIDogZVxuICAgIHNheC5FTlRJVElFU1trZXldID0gc1xuICB9KVxuXG4gIGZvciAodmFyIHMgaW4gc2F4LlNUQVRFKSB7XG4gICAgc2F4LlNUQVRFW3NheC5TVEFURVtzXV0gPSBzXG4gIH1cblxuICAvLyBzaG9ydGhhbmRcbiAgUyA9IHNheC5TVEFURVxuXG4gIGZ1bmN0aW9uIGVtaXQgKHBhcnNlciwgZXZlbnQsIGRhdGEpIHtcbiAgICBwYXJzZXJbZXZlbnRdICYmIHBhcnNlcltldmVudF0oZGF0YSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGVtaXROb2RlIChwYXJzZXIsIG5vZGVUeXBlLCBkYXRhKSB7XG4gICAgaWYgKHBhcnNlci50ZXh0Tm9kZSkgY2xvc2VUZXh0KHBhcnNlcilcbiAgICBlbWl0KHBhcnNlciwgbm9kZVR5cGUsIGRhdGEpXG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZVRleHQgKHBhcnNlcikge1xuICAgIHBhcnNlci50ZXh0Tm9kZSA9IHRleHRvcHRzKHBhcnNlci5vcHQsIHBhcnNlci50ZXh0Tm9kZSlcbiAgICBpZiAocGFyc2VyLnRleHROb2RlKSBlbWl0KHBhcnNlciwgJ29udGV4dCcsIHBhcnNlci50ZXh0Tm9kZSlcbiAgICBwYXJzZXIudGV4dE5vZGUgPSAnJ1xuICB9XG5cbiAgZnVuY3Rpb24gdGV4dG9wdHMgKG9wdCwgdGV4dCkge1xuICAgIGlmIChvcHQudHJpbSkgdGV4dCA9IHRleHQudHJpbSgpXG4gICAgaWYgKG9wdC5ub3JtYWxpemUpIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgIHJldHVybiB0ZXh0XG4gIH1cblxuICBmdW5jdGlvbiBlcnJvciAocGFyc2VyLCBlcikge1xuICAgIGNsb3NlVGV4dChwYXJzZXIpXG4gICAgaWYgKHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICBlciArPSAnXFxuTGluZTogJyArIHBhcnNlci5saW5lICtcbiAgICAgICAgJ1xcbkNvbHVtbjogJyArIHBhcnNlci5jb2x1bW4gK1xuICAgICAgICAnXFxuQ2hhcjogJyArIHBhcnNlci5jXG4gICAgfVxuICAgIGVyID0gbmV3IEVycm9yKGVyKVxuICAgIHBhcnNlci5lcnJvciA9IGVyXG4gICAgZW1pdChwYXJzZXIsICdvbmVycm9yJywgZXIpXG4gICAgcmV0dXJuIHBhcnNlclxuICB9XG5cbiAgZnVuY3Rpb24gZW5kIChwYXJzZXIpIHtcbiAgICBpZiAocGFyc2VyLnNhd1Jvb3QgJiYgIXBhcnNlci5jbG9zZWRSb290KSBzdHJpY3RGYWlsKHBhcnNlciwgJ1VuY2xvc2VkIHJvb3QgdGFnJylcbiAgICBpZiAoKHBhcnNlci5zdGF0ZSAhPT0gUy5CRUdJTikgJiZcbiAgICAgIChwYXJzZXIuc3RhdGUgIT09IFMuQkVHSU5fV0hJVEVTUEFDRSkgJiZcbiAgICAgIChwYXJzZXIuc3RhdGUgIT09IFMuVEVYVCkpIHtcbiAgICAgIGVycm9yKHBhcnNlciwgJ1VuZXhwZWN0ZWQgZW5kJylcbiAgICB9XG4gICAgY2xvc2VUZXh0KHBhcnNlcilcbiAgICBwYXJzZXIuYyA9ICcnXG4gICAgcGFyc2VyLmNsb3NlZCA9IHRydWVcbiAgICBlbWl0KHBhcnNlciwgJ29uZW5kJylcbiAgICBTQVhQYXJzZXIuY2FsbChwYXJzZXIsIHBhcnNlci5zdHJpY3QsIHBhcnNlci5vcHQpXG4gICAgcmV0dXJuIHBhcnNlclxuICB9XG5cbiAgZnVuY3Rpb24gc3RyaWN0RmFpbCAocGFyc2VyLCBtZXNzYWdlKSB7XG4gICAgaWYgKHR5cGVvZiBwYXJzZXIgIT09ICdvYmplY3QnIHx8ICEocGFyc2VyIGluc3RhbmNlb2YgU0FYUGFyc2VyKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQgY2FsbCB0byBzdHJpY3RGYWlsJylcbiAgICB9XG4gICAgaWYgKHBhcnNlci5zdHJpY3QpIHtcbiAgICAgIGVycm9yKHBhcnNlciwgbWVzc2FnZSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBuZXdUYWcgKHBhcnNlcikge1xuICAgIGlmICghcGFyc2VyLnN0cmljdCkgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIudGFnTmFtZVtwYXJzZXIubG9vc2VDYXNlXSgpXG4gICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlclxuICAgIHZhciB0YWcgPSBwYXJzZXIudGFnID0geyBuYW1lOiBwYXJzZXIudGFnTmFtZSwgYXR0cmlidXRlczoge30gfVxuXG4gICAgLy8gd2lsbCBiZSBvdmVycmlkZGVuIGlmIHRhZyBjb250YWlscyBhbiB4bWxucz1cImZvb1wiIG9yIHhtbG5zOmZvbz1cImJhclwiXG4gICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgIHRhZy5ucyA9IHBhcmVudC5uc1xuICAgIH1cbiAgICBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGggPSAwXG4gICAgZW1pdE5vZGUocGFyc2VyLCAnb25vcGVudGFnc3RhcnQnLCB0YWcpXG4gIH1cblxuICBmdW5jdGlvbiBxbmFtZSAobmFtZSwgYXR0cmlidXRlKSB7XG4gICAgdmFyIGkgPSBuYW1lLmluZGV4T2YoJzonKVxuICAgIHZhciBxdWFsTmFtZSA9IGkgPCAwID8gWyAnJywgbmFtZSBdIDogbmFtZS5zcGxpdCgnOicpXG4gICAgdmFyIHByZWZpeCA9IHF1YWxOYW1lWzBdXG4gICAgdmFyIGxvY2FsID0gcXVhbE5hbWVbMV1cblxuICAgIC8vIDx4IFwieG1sbnNcIj1cImh0dHA6Ly9mb29cIj5cbiAgICBpZiAoYXR0cmlidXRlICYmIG5hbWUgPT09ICd4bWxucycpIHtcbiAgICAgIHByZWZpeCA9ICd4bWxucydcbiAgICAgIGxvY2FsID0gJydcbiAgICB9XG5cbiAgICByZXR1cm4geyBwcmVmaXg6IHByZWZpeCwgbG9jYWw6IGxvY2FsIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGF0dHJpYiAocGFyc2VyKSB7XG4gICAgaWYgKCFwYXJzZXIuc3RyaWN0KSB7XG4gICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJOYW1lW3BhcnNlci5sb29zZUNhc2VdKClcbiAgICB9XG5cbiAgICBpZiAocGFyc2VyLmF0dHJpYkxpc3QuaW5kZXhPZihwYXJzZXIuYXR0cmliTmFtZSkgIT09IC0xIHx8XG4gICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkocGFyc2VyLmF0dHJpYk5hbWUpKSB7XG4gICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9ICcnXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAocGFyc2VyLm9wdC54bWxucykge1xuICAgICAgdmFyIHFuID0gcW5hbWUocGFyc2VyLmF0dHJpYk5hbWUsIHRydWUpXG4gICAgICB2YXIgcHJlZml4ID0gcW4ucHJlZml4XG4gICAgICB2YXIgbG9jYWwgPSBxbi5sb2NhbFxuXG4gICAgICBpZiAocHJlZml4ID09PSAneG1sbnMnKSB7XG4gICAgICAgIC8vIG5hbWVzcGFjZSBiaW5kaW5nIGF0dHJpYnV0ZS4gcHVzaCB0aGUgYmluZGluZyBpbnRvIHNjb3BlXG4gICAgICAgIGlmIChsb2NhbCA9PT0gJ3htbCcgJiYgcGFyc2VyLmF0dHJpYlZhbHVlICE9PSBYTUxfTkFNRVNQQUNFKSB7XG4gICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsXG4gICAgICAgICAgICAneG1sOiBwcmVmaXggbXVzdCBiZSBib3VuZCB0byAnICsgWE1MX05BTUVTUEFDRSArICdcXG4nICtcbiAgICAgICAgICAgICdBY3R1YWw6ICcgKyBwYXJzZXIuYXR0cmliVmFsdWUpXG4gICAgICAgIH0gZWxzZSBpZiAobG9jYWwgPT09ICd4bWxucycgJiYgcGFyc2VyLmF0dHJpYlZhbHVlICE9PSBYTUxOU19OQU1FU1BBQ0UpIHtcbiAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlcixcbiAgICAgICAgICAgICd4bWxuczogcHJlZml4IG11c3QgYmUgYm91bmQgdG8gJyArIFhNTE5TX05BTUVTUEFDRSArICdcXG4nICtcbiAgICAgICAgICAgICdBY3R1YWw6ICcgKyBwYXJzZXIuYXR0cmliVmFsdWUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHRhZyA9IHBhcnNlci50YWdcbiAgICAgICAgICB2YXIgcGFyZW50ID0gcGFyc2VyLnRhZ3NbcGFyc2VyLnRhZ3MubGVuZ3RoIC0gMV0gfHwgcGFyc2VyXG4gICAgICAgICAgaWYgKHRhZy5ucyA9PT0gcGFyZW50Lm5zKSB7XG4gICAgICAgICAgICB0YWcubnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5ucylcbiAgICAgICAgICB9XG4gICAgICAgICAgdGFnLm5zW2xvY2FsXSA9IHBhcnNlci5hdHRyaWJWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGRlZmVyIG9uYXR0cmlidXRlIGV2ZW50cyB1bnRpbCBhbGwgYXR0cmlidXRlcyBoYXZlIGJlZW4gc2VlblxuICAgICAgLy8gc28gYW55IG5ldyBiaW5kaW5ncyBjYW4gdGFrZSBlZmZlY3QuIHByZXNlcnZlIGF0dHJpYnV0ZSBvcmRlclxuICAgICAgLy8gc28gZGVmZXJyZWQgZXZlbnRzIGNhbiBiZSBlbWl0dGVkIGluIGRvY3VtZW50IG9yZGVyXG4gICAgICBwYXJzZXIuYXR0cmliTGlzdC5wdXNoKFtwYXJzZXIuYXR0cmliTmFtZSwgcGFyc2VyLmF0dHJpYlZhbHVlXSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaW4gbm9uLXhtbG5zIG1vZGUsIHdlIGNhbiBlbWl0IHRoZSBldmVudCByaWdodCBhd2F5XG4gICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXNbcGFyc2VyLmF0dHJpYk5hbWVdID0gcGFyc2VyLmF0dHJpYlZhbHVlXG4gICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmF0dHJpYnV0ZScsIHtcbiAgICAgICAgbmFtZTogcGFyc2VyLmF0dHJpYk5hbWUsXG4gICAgICAgIHZhbHVlOiBwYXJzZXIuYXR0cmliVmFsdWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICB9XG5cbiAgZnVuY3Rpb24gb3BlblRhZyAocGFyc2VyLCBzZWxmQ2xvc2luZykge1xuICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICAvLyBlbWl0IG5hbWVzcGFjZSBiaW5kaW5nIGV2ZW50c1xuICAgICAgdmFyIHRhZyA9IHBhcnNlci50YWdcblxuICAgICAgLy8gYWRkIG5hbWVzcGFjZSBpbmZvIHRvIHRhZ1xuICAgICAgdmFyIHFuID0gcW5hbWUocGFyc2VyLnRhZ05hbWUpXG4gICAgICB0YWcucHJlZml4ID0gcW4ucHJlZml4XG4gICAgICB0YWcubG9jYWwgPSBxbi5sb2NhbFxuICAgICAgdGFnLnVyaSA9IHRhZy5uc1txbi5wcmVmaXhdIHx8ICcnXG5cbiAgICAgIGlmICh0YWcucHJlZml4ICYmICF0YWcudXJpKSB7XG4gICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVW5ib3VuZCBuYW1lc3BhY2UgcHJlZml4OiAnICtcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShwYXJzZXIudGFnTmFtZSkpXG4gICAgICAgIHRhZy51cmkgPSBxbi5wcmVmaXhcbiAgICAgIH1cblxuICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlclxuICAgICAgaWYgKHRhZy5ucyAmJiBwYXJlbnQubnMgIT09IHRhZy5ucykge1xuICAgICAgICBPYmplY3Qua2V5cyh0YWcubnMpLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbm9wZW5uYW1lc3BhY2UnLCB7XG4gICAgICAgICAgICBwcmVmaXg6IHAsXG4gICAgICAgICAgICB1cmk6IHRhZy5uc1twXVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIC8vIGhhbmRsZSBkZWZlcnJlZCBvbmF0dHJpYnV0ZSBldmVudHNcbiAgICAgIC8vIE5vdGU6IGRvIG5vdCBhcHBseSBkZWZhdWx0IG5zIHRvIGF0dHJpYnV0ZXM6XG4gICAgICAvLyAgIGh0dHA6Ly93d3cudzMub3JnL1RSL1JFQy14bWwtbmFtZXMvI2RlZmF1bHRpbmdcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBudiA9IHBhcnNlci5hdHRyaWJMaXN0W2ldXG4gICAgICAgIHZhciBuYW1lID0gbnZbMF1cbiAgICAgICAgdmFyIHZhbHVlID0gbnZbMV1cbiAgICAgICAgdmFyIHF1YWxOYW1lID0gcW5hbWUobmFtZSwgdHJ1ZSlcbiAgICAgICAgdmFyIHByZWZpeCA9IHF1YWxOYW1lLnByZWZpeFxuICAgICAgICB2YXIgbG9jYWwgPSBxdWFsTmFtZS5sb2NhbFxuICAgICAgICB2YXIgdXJpID0gcHJlZml4ID09PSAnJyA/ICcnIDogKHRhZy5uc1twcmVmaXhdIHx8ICcnKVxuICAgICAgICB2YXIgYSA9IHtcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICBwcmVmaXg6IHByZWZpeCxcbiAgICAgICAgICBsb2NhbDogbG9jYWwsXG4gICAgICAgICAgdXJpOiB1cmlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHRoZXJlJ3MgYW55IGF0dHJpYnV0ZXMgd2l0aCBhbiB1bmRlZmluZWQgbmFtZXNwYWNlLFxuICAgICAgICAvLyB0aGVuIGZhaWwgb24gdGhlbSBub3cuXG4gICAgICAgIGlmIChwcmVmaXggJiYgcHJlZml4ICE9PSAneG1sbnMnICYmICF1cmkpIHtcbiAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1VuYm91bmQgbmFtZXNwYWNlIHByZWZpeDogJyArXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcmVmaXgpKVxuICAgICAgICAgIGEudXJpID0gcHJlZml4XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzW25hbWVdID0gYVxuICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmF0dHJpYnV0ZScsIGEpXG4gICAgICB9XG4gICAgICBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGggPSAwXG4gICAgfVxuXG4gICAgcGFyc2VyLnRhZy5pc1NlbGZDbG9zaW5nID0gISFzZWxmQ2xvc2luZ1xuXG4gICAgLy8gcHJvY2VzcyB0aGUgdGFnXG4gICAgcGFyc2VyLnNhd1Jvb3QgPSB0cnVlXG4gICAgcGFyc2VyLnRhZ3MucHVzaChwYXJzZXIudGFnKVxuICAgIGVtaXROb2RlKHBhcnNlciwgJ29ub3BlbnRhZycsIHBhcnNlci50YWcpXG4gICAgaWYgKCFzZWxmQ2xvc2luZykge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIGZvciA8c2NyaXB0PiBpbiBub24tc3RyaWN0IG1vZGUuXG4gICAgICBpZiAoIXBhcnNlci5ub3NjcmlwdCAmJiBwYXJzZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc2NyaXB0Jykge1xuICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICB9XG4gICAgICBwYXJzZXIudGFnID0gbnVsbFxuICAgICAgcGFyc2VyLnRhZ05hbWUgPSAnJ1xuICAgIH1cbiAgICBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9ICcnXG4gICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMFxuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VUYWcgKHBhcnNlcikge1xuICAgIGlmICghcGFyc2VyLnRhZ05hbWUpIHtcbiAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnV2VpcmQgZW1wdHkgY2xvc2UgdGFnLicpXG4gICAgICBwYXJzZXIudGV4dE5vZGUgKz0gJzwvPidcbiAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHBhcnNlci5zY3JpcHQpIHtcbiAgICAgIGlmIChwYXJzZXIudGFnTmFtZSAhPT0gJ3NjcmlwdCcpIHtcbiAgICAgICAgcGFyc2VyLnNjcmlwdCArPSAnPC8nICsgcGFyc2VyLnRhZ05hbWUgKyAnPidcbiAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSAnJ1xuICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVFxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uc2NyaXB0JywgcGFyc2VyLnNjcmlwdClcbiAgICAgIHBhcnNlci5zY3JpcHQgPSAnJ1xuICAgIH1cblxuICAgIC8vIGZpcnN0IG1ha2Ugc3VyZSB0aGF0IHRoZSBjbG9zaW5nIHRhZyBhY3R1YWxseSBleGlzdHMuXG4gICAgLy8gPGE+PGI+PC9jPjwvYj48L2E+IHdpbGwgY2xvc2UgZXZlcnl0aGluZywgb3RoZXJ3aXNlLlxuICAgIHZhciB0ID0gcGFyc2VyLnRhZ3MubGVuZ3RoXG4gICAgdmFyIHRhZ05hbWUgPSBwYXJzZXIudGFnTmFtZVxuICAgIGlmICghcGFyc2VyLnN0cmljdCkge1xuICAgICAgdGFnTmFtZSA9IHRhZ05hbWVbcGFyc2VyLmxvb3NlQ2FzZV0oKVxuICAgIH1cbiAgICB2YXIgY2xvc2VUbyA9IHRhZ05hbWVcbiAgICB3aGlsZSAodC0tKSB7XG4gICAgICB2YXIgY2xvc2UgPSBwYXJzZXIudGFnc1t0XVxuICAgICAgaWYgKGNsb3NlLm5hbWUgIT09IGNsb3NlVG8pIHtcbiAgICAgICAgLy8gZmFpbCB0aGUgZmlyc3QgdGltZSBpbiBzdHJpY3QgbW9kZVxuICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1VuZXhwZWN0ZWQgY2xvc2UgdGFnJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZGlkbid0IGZpbmQgaXQuICB3ZSBhbHJlYWR5IGZhaWxlZCBmb3Igc3RyaWN0LCBzbyBqdXN0IGFib3J0LlxuICAgIGlmICh0IDwgMCkge1xuICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdVbm1hdGNoZWQgY2xvc2luZyB0YWc6ICcgKyBwYXJzZXIudGFnTmFtZSlcbiAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSAnPC8nICsgcGFyc2VyLnRhZ05hbWUgKyAnPidcbiAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHBhcnNlci50YWdOYW1lID0gdGFnTmFtZVxuICAgIHZhciBzID0gcGFyc2VyLnRhZ3MubGVuZ3RoXG4gICAgd2hpbGUgKHMtLSA+IHQpIHtcbiAgICAgIHZhciB0YWcgPSBwYXJzZXIudGFnID0gcGFyc2VyLnRhZ3MucG9wKClcbiAgICAgIHBhcnNlci50YWdOYW1lID0gcGFyc2VyLnRhZy5uYW1lXG4gICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNsb3NldGFnJywgcGFyc2VyLnRhZ05hbWUpXG5cbiAgICAgIHZhciB4ID0ge31cbiAgICAgIGZvciAodmFyIGkgaW4gdGFnLm5zKSB7XG4gICAgICAgIHhbaV0gPSB0YWcubnNbaV1cbiAgICAgIH1cblxuICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlclxuICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMgJiYgdGFnLm5zICE9PSBwYXJlbnQubnMpIHtcbiAgICAgICAgLy8gcmVtb3ZlIG5hbWVzcGFjZSBiaW5kaW5ncyBpbnRyb2R1Y2VkIGJ5IHRhZ1xuICAgICAgICBPYmplY3Qua2V5cyh0YWcubnMpLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICB2YXIgbiA9IHRhZy5uc1twXVxuICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY2xvc2VuYW1lc3BhY2UnLCB7IHByZWZpeDogcCwgdXJpOiBuIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0ID09PSAwKSBwYXJzZXIuY2xvc2VkUm9vdCA9IHRydWVcbiAgICBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9IHBhcnNlci5hdHRyaWJOYW1lID0gJydcbiAgICBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGggPSAwXG4gICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUVudGl0eSAocGFyc2VyKSB7XG4gICAgdmFyIGVudGl0eSA9IHBhcnNlci5lbnRpdHlcbiAgICB2YXIgZW50aXR5TEMgPSBlbnRpdHkudG9Mb3dlckNhc2UoKVxuICAgIHZhciBudW1cbiAgICB2YXIgbnVtU3RyID0gJydcblxuICAgIGlmIChwYXJzZXIuRU5USVRJRVNbZW50aXR5XSkge1xuICAgICAgcmV0dXJuIHBhcnNlci5FTlRJVElFU1tlbnRpdHldXG4gICAgfVxuICAgIGlmIChwYXJzZXIuRU5USVRJRVNbZW50aXR5TENdKSB7XG4gICAgICByZXR1cm4gcGFyc2VyLkVOVElUSUVTW2VudGl0eUxDXVxuICAgIH1cbiAgICBlbnRpdHkgPSBlbnRpdHlMQ1xuICAgIGlmIChlbnRpdHkuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgIGlmIChlbnRpdHkuY2hhckF0KDEpID09PSAneCcpIHtcbiAgICAgICAgZW50aXR5ID0gZW50aXR5LnNsaWNlKDIpXG4gICAgICAgIG51bSA9IHBhcnNlSW50KGVudGl0eSwgMTYpXG4gICAgICAgIG51bVN0ciA9IG51bS50b1N0cmluZygxNilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudGl0eSA9IGVudGl0eS5zbGljZSgxKVxuICAgICAgICBudW0gPSBwYXJzZUludChlbnRpdHksIDEwKVxuICAgICAgICBudW1TdHIgPSBudW0udG9TdHJpbmcoMTApXG4gICAgICB9XG4gICAgfVxuICAgIGVudGl0eSA9IGVudGl0eS5yZXBsYWNlKC9eMCsvLCAnJylcbiAgICBpZiAoaXNOYU4obnVtKSB8fCBudW1TdHIudG9Mb3dlckNhc2UoKSAhPT0gZW50aXR5KSB7XG4gICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgY2hhcmFjdGVyIGVudGl0eScpXG4gICAgICByZXR1cm4gJyYnICsgcGFyc2VyLmVudGl0eSArICc7J1xuICAgIH1cblxuICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChudW0pXG4gIH1cblxuICBmdW5jdGlvbiBiZWdpbldoaXRlU3BhY2UgKHBhcnNlciwgYykge1xuICAgIGlmIChjID09PSAnPCcpIHtcbiAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9XQUtBXG4gICAgICBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiA9IHBhcnNlci5wb3NpdGlvblxuICAgIH0gZWxzZSBpZiAoIWlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgLy8gaGF2ZSB0byBwcm9jZXNzIHRoaXMgYXMgYSB0ZXh0IG5vZGUuXG4gICAgICAvLyB3ZWlyZCwgYnV0IGhhcHBlbnMuXG4gICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ05vbi13aGl0ZXNwYWNlIGJlZm9yZSBmaXJzdCB0YWcuJylcbiAgICAgIHBhcnNlci50ZXh0Tm9kZSA9IGNcbiAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoYXJBdCAoY2h1bmssIGkpIHtcbiAgICB2YXIgcmVzdWx0ID0gJydcbiAgICBpZiAoaSA8IGNodW5rLmxlbmd0aCkge1xuICAgICAgcmVzdWx0ID0gY2h1bmsuY2hhckF0KGkpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyaXRlIChjaHVuaykge1xuICAgIHZhciBwYXJzZXIgPSB0aGlzXG4gICAgaWYgKHRoaXMuZXJyb3IpIHtcbiAgICAgIHRocm93IHRoaXMuZXJyb3JcbiAgICB9XG4gICAgaWYgKHBhcnNlci5jbG9zZWQpIHtcbiAgICAgIHJldHVybiBlcnJvcihwYXJzZXIsXG4gICAgICAgICdDYW5ub3Qgd3JpdGUgYWZ0ZXIgY2xvc2UuIEFzc2lnbiBhbiBvbnJlYWR5IGhhbmRsZXIuJylcbiAgICB9XG4gICAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gZW5kKHBhcnNlcilcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGNodW5rID0gY2h1bmsudG9TdHJpbmcoKVxuICAgIH1cbiAgICB2YXIgaSA9IDBcbiAgICB2YXIgYyA9ICcnXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGMgPSBjaGFyQXQoY2h1bmssIGkrKylcbiAgICAgIHBhcnNlci5jID0gY1xuXG4gICAgICBpZiAoIWMpIHtcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICAgIHBhcnNlci5wb3NpdGlvbisrXG4gICAgICAgIGlmIChjID09PSAnXFxuJykge1xuICAgICAgICAgIHBhcnNlci5saW5lKytcbiAgICAgICAgICBwYXJzZXIuY29sdW1uID0gMFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcnNlci5jb2x1bW4rK1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAocGFyc2VyLnN0YXRlKSB7XG4gICAgICAgIGNhc2UgUy5CRUdJTjpcbiAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkJFR0lOX1dISVRFU1BBQ0VcbiAgICAgICAgICBpZiAoYyA9PT0gJ1xcdUZFRkYnKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBiZWdpbldoaXRlU3BhY2UocGFyc2VyLCBjKVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkJFR0lOX1dISVRFU1BBQ0U6XG4gICAgICAgICAgYmVnaW5XaGl0ZVNwYWNlKHBhcnNlciwgYylcbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5URVhUOlxuICAgICAgICAgIGlmIChwYXJzZXIuc2F3Um9vdCAmJiAhcGFyc2VyLmNsb3NlZFJvb3QpIHtcbiAgICAgICAgICAgIHZhciBzdGFydGkgPSBpIC0gMVxuICAgICAgICAgICAgd2hpbGUgKGMgJiYgYyAhPT0gJzwnICYmIGMgIT09ICcmJykge1xuICAgICAgICAgICAgICBjID0gY2hhckF0KGNodW5rLCBpKyspXG4gICAgICAgICAgICAgIGlmIChjICYmIHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VyLnBvc2l0aW9uKytcbiAgICAgICAgICAgICAgICBpZiAoYyA9PT0gJ1xcbicpIHtcbiAgICAgICAgICAgICAgICAgIHBhcnNlci5saW5lKytcbiAgICAgICAgICAgICAgICAgIHBhcnNlci5jb2x1bW4gPSAwXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHBhcnNlci5jb2x1bW4rK1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IGNodW5rLnN1YnN0cmluZyhzdGFydGksIGkgLSAxKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYyA9PT0gJzwnICYmICEocGFyc2VyLnNhd1Jvb3QgJiYgcGFyc2VyLmNsb3NlZFJvb3QgJiYgIXBhcnNlci5zdHJpY3QpKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fV0FLQVxuICAgICAgICAgICAgcGFyc2VyLnN0YXJ0VGFnUG9zaXRpb24gPSBwYXJzZXIucG9zaXRpb25cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykgJiYgKCFwYXJzZXIuc2F3Um9vdCB8fCBwYXJzZXIuY2xvc2VkUm9vdCkpIHtcbiAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdUZXh0IGRhdGEgb3V0c2lkZSBvZiByb290IG5vZGUuJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjID09PSAnJicpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUX0VOVElUWVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuU0NSSVBUOlxuICAgICAgICAgIC8vIG9ubHkgbm9uLXN0cmljdFxuICAgICAgICAgIGlmIChjID09PSAnPCcpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUX0VORElOR1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuU0NSSVBUX0VORElORzpcbiAgICAgICAgICBpZiAoYyA9PT0gJy8nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBR1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9ICc8JyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLk9QRU5fV0FLQTpcbiAgICAgICAgICAvLyBlaXRoZXIgYSAvLCA/LCAhLCBvciB0ZXh0IGlzIGNvbWluZyBuZXh0LlxuICAgICAgICAgIGlmIChjID09PSAnIScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0dNTF9ERUNMXG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSAnJ1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAvLyB3YWl0IGZvciBpdC4uLlxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHXG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IGNcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICcvJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUdcbiAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gJydcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICc/Jykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RcbiAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdE5hbWUgPSBwYXJzZXIucHJvY0luc3RCb2R5ID0gJydcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdVbmVuY29kZWQgPCcpXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSB3YXMgc29tZSB3aGl0ZXNwYWNlLCB0aGVuIGFkZCB0aGF0IGluLlxuICAgICAgICAgICAgaWYgKHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uICsgMSA8IHBhcnNlci5wb3NpdGlvbikge1xuICAgICAgICAgICAgICB2YXIgcGFkID0gcGFyc2VyLnBvc2l0aW9uIC0gcGFyc2VyLnN0YXJ0VGFnUG9zaXRpb25cbiAgICAgICAgICAgICAgYyA9IG5ldyBBcnJheShwYWQpLmpvaW4oJyAnKSArIGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSAnPCcgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuU0dNTF9ERUNMOlxuICAgICAgICAgIGlmICgocGFyc2VyLnNnbWxEZWNsICsgYykudG9VcHBlckNhc2UoKSA9PT0gQ0RBVEEpIHtcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29ub3BlbmNkYXRhJylcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSAnJ1xuICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VyLnNnbWxEZWNsICsgYyA9PT0gJy0tJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UXG4gICAgICAgICAgICBwYXJzZXIuY29tbWVudCA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSAnJ1xuICAgICAgICAgIH0gZWxzZSBpZiAoKHBhcnNlci5zZ21sRGVjbCArIGMpLnRvVXBwZXJDYXNlKCkgPT09IERPQ1RZUEUpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRVxuICAgICAgICAgICAgaWYgKHBhcnNlci5kb2N0eXBlIHx8IHBhcnNlci5zYXdSb290KSB7XG4gICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLFxuICAgICAgICAgICAgICAgICdJbmFwcHJvcHJpYXRlbHkgbG9jYXRlZCBkb2N0eXBlIGRlY2xhcmF0aW9uJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9ICcnXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uc2dtbGRlY2xhcmF0aW9uJywgcGFyc2VyLnNnbWxEZWNsKVxuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0xfUVVPVEVEXG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgKz0gY1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5TR01MX0RFQ0xfUVVPVEVEOlxuICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0xcbiAgICAgICAgICAgIHBhcnNlci5xID0gJydcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGNcbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5ET0NUWVBFOlxuICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25kb2N0eXBlJywgcGFyc2VyLmRvY3R5cGUpXG4gICAgICAgICAgICBwYXJzZXIuZG9jdHlwZSA9IHRydWUgLy8ganVzdCByZW1lbWJlciB0aGF0IHdlIHNhdyBpdC5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgICAgaWYgKGMgPT09ICdbJykge1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfRFREXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX1FVT1RFRFxuICAgICAgICAgICAgICBwYXJzZXIucSA9IGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuRE9DVFlQRV9RVU9URUQ6XG4gICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gY1xuICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgcGFyc2VyLnEgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkRPQ1RZUEVfRFREOlxuICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGNcbiAgICAgICAgICBpZiAoYyA9PT0gJ10nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVERfUVVPVEVEXG4gICAgICAgICAgICBwYXJzZXIucSA9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuRE9DVFlQRV9EVERfUVVPVEVEOlxuICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGNcbiAgICAgICAgICBpZiAoYyA9PT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVERcbiAgICAgICAgICAgIHBhcnNlci5xID0gJydcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ09NTUVOVDpcbiAgICAgICAgICBpZiAoYyA9PT0gJy0nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRfRU5ESU5HXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ICs9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ09NTUVOVF9FTkRJTkc6XG4gICAgICAgICAgaWYgKGMgPT09ICctJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UX0VOREVEXG4gICAgICAgICAgICBwYXJzZXIuY29tbWVudCA9IHRleHRvcHRzKHBhcnNlci5vcHQsIHBhcnNlci5jb21tZW50KVxuICAgICAgICAgICAgaWYgKHBhcnNlci5jb21tZW50KSB7XG4gICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY29tbWVudCcsIHBhcnNlci5jb21tZW50KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgPSAnJ1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuY29tbWVudCArPSAnLScgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ09NTUVOVF9FTkRFRDpcbiAgICAgICAgICBpZiAoYyAhPT0gJz4nKSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ01hbGZvcm1lZCBjb21tZW50JylcbiAgICAgICAgICAgIC8vIGFsbG93IDwhLS0gYmxhaCAtLSBibG9vIC0tPiBpbiBub24tc3RyaWN0IG1vZGUsXG4gICAgICAgICAgICAvLyB3aGljaCBpcyBhIGNvbW1lbnQgb2YgXCIgYmxhaCAtLSBibG9vIFwiXG4gICAgICAgICAgICBwYXJzZXIuY29tbWVudCArPSAnLS0nICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DREFUQTpcbiAgICAgICAgICBpZiAoYyA9PT0gJ10nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBX0VORElOR1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkc6XG4gICAgICAgICAgaWYgKGMgPT09ICddJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQV9FTkRJTkdfMlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gJ10nICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkdfMjpcbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBpZiAocGFyc2VyLmNkYXRhKSB7XG4gICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uY2RhdGEnLCBwYXJzZXIuY2RhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNsb3NlY2RhdGEnKVxuICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJ10nKSB7XG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gJ10nXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSAnXV0nICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5QUk9DX0lOU1Q6XG4gICAgICAgICAgaWYgKGMgPT09ICc/Jykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5QUk9DX0lOU1RfRU5ESU5HXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0JPRFlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSArPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlBST0NfSU5TVF9CT0RZOlxuICAgICAgICAgIGlmICghcGFyc2VyLnByb2NJbnN0Qm9keSAmJiBpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0VORElOR1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIucHJvY0luc3RCb2R5ICs9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuUFJPQ19JTlNUX0VORElORzpcbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbnByb2Nlc3NpbmdpbnN0cnVjdGlvbicsIHtcbiAgICAgICAgICAgICAgbmFtZTogcGFyc2VyLnByb2NJbnN0TmFtZSxcbiAgICAgICAgICAgICAgYm9keTogcGFyc2VyLnByb2NJbnN0Qm9keVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdE5hbWUgPSBwYXJzZXIucHJvY0luc3RCb2R5ID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIucHJvY0luc3RCb2R5ICs9ICc/JyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0JPRFlcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuT1BFTl9UQUc6XG4gICAgICAgICAgaWYgKGlzTWF0Y2gobmFtZUJvZHksIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSArPSBjXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1RhZyhwYXJzZXIpXG4gICAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnLycpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR19TTEFTSFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgY2hhcmFjdGVyIGluIHRhZyBuYW1lJylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5PUEVOX1RBR19TTEFTSDpcbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBvcGVuVGFnKHBhcnNlciwgdHJ1ZSlcbiAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdGb3J3YXJkLXNsYXNoIGluIG9wZW5pbmcgdGFnIG5vdCBmb2xsb3dlZCBieSA+JylcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQjpcbiAgICAgICAgICAvLyBoYXZlbid0IHJlYWQgdGhlIGF0dHJpYnV0ZSBuYW1lIHlldC5cbiAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICcvJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR19TTEFTSFxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGNcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZScpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQl9OQU1FOlxuICAgICAgICAgIGlmIChjID09PSAnPScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnQXR0cmlidXRlIHdpdGhvdXQgdmFsdWUnKVxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gcGFyc2VyLmF0dHJpYk5hbWVcbiAgICAgICAgICAgIGF0dHJpYihwYXJzZXIpXG4gICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRV9TQVdfV0hJVEVcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gobmFtZUJvZHksIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSArPSBjXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZScpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQl9OQU1FX1NBV19XSElURTpcbiAgICAgICAgICBpZiAoYyA9PT0gJz0nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0F0dHJpYnV0ZSB3aXRob3V0IHZhbHVlJylcbiAgICAgICAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlc1twYXJzZXIuYXR0cmliTmFtZV0gPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gJydcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uYXR0cmlidXRlJywge1xuICAgICAgICAgICAgICBuYW1lOiBwYXJzZXIuYXR0cmliTmFtZSxcbiAgICAgICAgICAgICAgdmFsdWU6ICcnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSAnJ1xuICAgICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gY1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgYXR0cmlidXRlIG5hbWUnKVxuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUU6XG4gICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5xID0gY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfUVVPVEVEXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlJylcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1VOUVVPVEVEXG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9RVU9URUQ6XG4gICAgICAgICAgaWYgKGMgIT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgICBpZiAoYyA9PT0gJyYnKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX0VOVElUWV9RXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgKz0gY1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgICAgYXR0cmliKHBhcnNlcilcbiAgICAgICAgICBwYXJzZXIucSA9ICcnXG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfQ0xPU0VEXG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0NMT1NFRDpcbiAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQlxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICcvJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR19TTEFTSFxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ05vIHdoaXRlc3BhY2UgYmV0d2VlbiBhdHRyaWJ1dGVzJylcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gY1xuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX05BTUVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lJylcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX1VOUVVPVEVEOlxuICAgICAgICAgIGlmICghaXNBdHRyaWJFbmQoYykpIHtcbiAgICAgICAgICAgIGlmIChjID09PSAnJicpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfRU5USVRZX1VcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSArPSBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBhdHRyaWIocGFyc2VyKVxuICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQlxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DTE9TRV9UQUc6XG4gICAgICAgICAgaWYgKCFwYXJzZXIudGFnTmFtZSkge1xuICAgICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChub3RNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICAgIGlmIChwYXJzZXIuc2NyaXB0KSB7XG4gICAgICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSAnPC8nICsgY1xuICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIHRhZ25hbWUgaW4gY2xvc2luZyB0YWcuJylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gobmFtZUJvZHksIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSArPSBjXG4gICAgICAgICAgfSBlbHNlIGlmIChwYXJzZXIuc2NyaXB0KSB7XG4gICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9ICc8LycgKyBwYXJzZXIudGFnTmFtZVxuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIHRhZ25hbWUgaW4gY2xvc2luZyB0YWcnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUdfU0FXX1dISVRFXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNMT1NFX1RBR19TQVdfV0hJVEU6XG4gICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgY2xvc2VUYWcocGFyc2VyKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgY2hhcmFjdGVycyBpbiBjbG9zaW5nIHRhZycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlRFWFRfRU5USVRZOlxuICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9ROlxuICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VOlxuICAgICAgICAgIHZhciByZXR1cm5TdGF0ZVxuICAgICAgICAgIHZhciBidWZmZXJcbiAgICAgICAgICBzd2l0Y2ggKHBhcnNlci5zdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBTLlRFWFRfRU5USVRZOlxuICAgICAgICAgICAgICByZXR1cm5TdGF0ZSA9IFMuVEVYVFxuICAgICAgICAgICAgICBidWZmZXIgPSAndGV4dE5vZGUnXG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1E6XG4gICAgICAgICAgICAgIHJldHVyblN0YXRlID0gUy5BVFRSSUJfVkFMVUVfUVVPVEVEXG4gICAgICAgICAgICAgIGJ1ZmZlciA9ICdhdHRyaWJWYWx1ZSdcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVTpcbiAgICAgICAgICAgICAgcmV0dXJuU3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9VTlFVT1RFRFxuICAgICAgICAgICAgICBidWZmZXIgPSAnYXR0cmliVmFsdWUnXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGMgPT09ICc7Jykge1xuICAgICAgICAgICAgcGFyc2VyW2J1ZmZlcl0gKz0gcGFyc2VFbnRpdHkocGFyc2VyKVxuICAgICAgICAgICAgcGFyc2VyLmVudGl0eSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNNYXRjaChwYXJzZXIuZW50aXR5Lmxlbmd0aCA/IGVudGl0eUJvZHkgOiBlbnRpdHlTdGFydCwgYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgKz0gY1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgY2hhcmFjdGVyIGluIGVudGl0eSBuYW1lJylcbiAgICAgICAgICAgIHBhcnNlcltidWZmZXJdICs9ICcmJyArIHBhcnNlci5lbnRpdHkgKyBjXG4gICAgICAgICAgICBwYXJzZXIuZW50aXR5ID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IHJldHVyblN0YXRlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihwYXJzZXIsICdVbmtub3duIHN0YXRlOiAnICsgcGFyc2VyLnN0YXRlKVxuICAgICAgfVxuICAgIH0gLy8gd2hpbGVcblxuICAgIGlmIChwYXJzZXIucG9zaXRpb24gPj0gcGFyc2VyLmJ1ZmZlckNoZWNrUG9zaXRpb24pIHtcbiAgICAgIGNoZWNrQnVmZmVyTGVuZ3RoKHBhcnNlcilcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlclxuICB9XG5cbiAgLyohIGh0dHA6Ly9tdGhzLmJlL2Zyb21jb2RlcG9pbnQgdjAuMS4wIGJ5IEBtYXRoaWFzICovXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmICghU3RyaW5nLmZyb21Db2RlUG9pbnQpIHtcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGVcbiAgICAgIHZhciBmbG9vciA9IE1hdGguZmxvb3JcbiAgICAgIHZhciBmcm9tQ29kZVBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgTUFYX1NJWkUgPSAweDQwMDBcbiAgICAgICAgdmFyIGNvZGVVbml0cyA9IFtdXG4gICAgICAgIHZhciBoaWdoU3Vycm9nYXRlXG4gICAgICAgIHZhciBsb3dTdXJyb2dhdGVcbiAgICAgICAgdmFyIGluZGV4ID0gLTFcbiAgICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGhcbiAgICAgICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gJydcbiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICB2YXIgY29kZVBvaW50ID0gTnVtYmVyKGFyZ3VtZW50c1tpbmRleF0pXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWlzRmluaXRlKGNvZGVQb2ludCkgfHwgLy8gYE5hTmAsIGArSW5maW5pdHlgLCBvciBgLUluZmluaXR5YFxuICAgICAgICAgICAgY29kZVBvaW50IDwgMCB8fCAvLyBub3QgYSB2YWxpZCBVbmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgICAgIGNvZGVQb2ludCA+IDB4MTBGRkZGIHx8IC8vIG5vdCBhIHZhbGlkIFVuaWNvZGUgY29kZSBwb2ludFxuICAgICAgICAgICAgZmxvb3IoY29kZVBvaW50KSAhPT0gY29kZVBvaW50IC8vIG5vdCBhbiBpbnRlZ2VyXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aHJvdyBSYW5nZUVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQ6ICcgKyBjb2RlUG9pbnQpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb2RlUG9pbnQgPD0gMHhGRkZGKSB7IC8vIEJNUCBjb2RlIHBvaW50XG4gICAgICAgICAgICBjb2RlVW5pdHMucHVzaChjb2RlUG9pbnQpXG4gICAgICAgICAgfSBlbHNlIHsgLy8gQXN0cmFsIGNvZGUgcG9pbnQ7IHNwbGl0IGluIHN1cnJvZ2F0ZSBoYWx2ZXNcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmcjc3Vycm9nYXRlLWZvcm11bGFlXG4gICAgICAgICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgICAgICAgaGlnaFN1cnJvZ2F0ZSA9IChjb2RlUG9pbnQgPj4gMTApICsgMHhEODAwXG4gICAgICAgICAgICBsb3dTdXJyb2dhdGUgPSAoY29kZVBvaW50ICUgMHg0MDApICsgMHhEQzAwXG4gICAgICAgICAgICBjb2RlVW5pdHMucHVzaChoaWdoU3Vycm9nYXRlLCBsb3dTdXJyb2dhdGUpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpbmRleCArIDEgPT09IGxlbmd0aCB8fCBjb2RlVW5pdHMubGVuZ3RoID4gTUFYX1NJWkUpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBzdHJpbmdGcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgY29kZVVuaXRzKVxuICAgICAgICAgICAgY29kZVVuaXRzLmxlbmd0aCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZywgJ2Zyb21Db2RlUG9pbnQnLCB7XG4gICAgICAgICAgdmFsdWU6IGZyb21Db2RlUG9pbnQsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBTdHJpbmcuZnJvbUNvZGVQb2ludCA9IGZyb21Db2RlUG9pbnRcbiAgICAgIH1cbiAgICB9KCkpXG4gIH1cbn0pKHR5cGVvZiBleHBvcnRzID09PSAndW5kZWZpbmVkJyA/IHRoaXMuc2F4ID0ge30gOiBleHBvcnRzKVxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbm1vZHVsZS5leHBvcnRzID0gU3RyZWFtO1xuXG52YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG5pbmhlcml0cyhTdHJlYW0sIEVFKTtcblN0cmVhbS5SZWFkYWJsZSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qcycpO1xuU3RyZWFtLldyaXRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3dyaXRhYmxlLmpzJyk7XG5TdHJlYW0uRHVwbGV4ID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL2R1cGxleC5qcycpO1xuU3RyZWFtLlRyYW5zZm9ybSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS90cmFuc2Zvcm0uanMnKTtcblN0cmVhbS5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcycpO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjQueFxuU3RyZWFtLlN0cmVhbSA9IFN0cmVhbTtcblxuXG5cbi8vIG9sZC1zdHlsZSBzdHJlYW1zLiAgTm90ZSB0aGF0IHRoZSBwaXBlIG1ldGhvZCAodGhlIG9ubHkgcmVsZXZhbnRcbi8vIHBhcnQgb2YgdGhpcyBjbGFzcykgaXMgb3ZlcnJpZGRlbiBpbiB0aGUgUmVhZGFibGUgY2xhc3MuXG5cbmZ1bmN0aW9uIFN0cmVhbSgpIHtcbiAgRUUuY2FsbCh0aGlzKTtcbn1cblxuU3RyZWFtLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oZGVzdCwgb3B0aW9ucykge1xuICB2YXIgc291cmNlID0gdGhpcztcblxuICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHtcbiAgICBpZiAoZGVzdC53cml0YWJsZSkge1xuICAgICAgaWYgKGZhbHNlID09PSBkZXN0LndyaXRlKGNodW5rKSAmJiBzb3VyY2UucGF1c2UpIHtcbiAgICAgICAgc291cmNlLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc291cmNlLm9uKCdkYXRhJywgb25kYXRhKTtcblxuICBmdW5jdGlvbiBvbmRyYWluKCkge1xuICAgIGlmIChzb3VyY2UucmVhZGFibGUgJiYgc291cmNlLnJlc3VtZSkge1xuICAgICAgc291cmNlLnJlc3VtZSgpO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG5cbiAgLy8gSWYgdGhlICdlbmQnIG9wdGlvbiBpcyBub3Qgc3VwcGxpZWQsIGRlc3QuZW5kKCkgd2lsbCBiZSBjYWxsZWQgd2hlblxuICAvLyBzb3VyY2UgZ2V0cyB0aGUgJ2VuZCcgb3IgJ2Nsb3NlJyBldmVudHMuICBPbmx5IGRlc3QuZW5kKCkgb25jZS5cbiAgaWYgKCFkZXN0Ll9pc1N0ZGlvICYmICghb3B0aW9ucyB8fCBvcHRpb25zLmVuZCAhPT0gZmFsc2UpKSB7XG4gICAgc291cmNlLm9uKCdlbmQnLCBvbmVuZCk7XG4gICAgc291cmNlLm9uKCdjbG9zZScsIG9uY2xvc2UpO1xuICB9XG5cbiAgdmFyIGRpZE9uRW5kID0gZmFsc2U7XG4gIGZ1bmN0aW9uIG9uZW5kKCkge1xuICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuO1xuICAgIGRpZE9uRW5kID0gdHJ1ZTtcblxuICAgIGRlc3QuZW5kKCk7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgaWYgKGRpZE9uRW5kKSByZXR1cm47XG4gICAgZGlkT25FbmQgPSB0cnVlO1xuXG4gICAgaWYgKHR5cGVvZiBkZXN0LmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIGRlc3QuZGVzdHJveSgpO1xuICB9XG5cbiAgLy8gZG9uJ3QgbGVhdmUgZGFuZ2xpbmcgcGlwZXMgd2hlbiB0aGVyZSBhcmUgZXJyb3JzLlxuICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7XG4gICAgY2xlYW51cCgpO1xuICAgIGlmIChFRS5saXN0ZW5lckNvdW50KHRoaXMsICdlcnJvcicpID09PSAwKSB7XG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkIHN0cmVhbSBlcnJvciBpbiBwaXBlLlxuICAgIH1cbiAgfVxuXG4gIHNvdXJjZS5vbignZXJyb3InLCBvbmVycm9yKTtcbiAgZGVzdC5vbignZXJyb3InLCBvbmVycm9yKTtcblxuICAvLyByZW1vdmUgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGFkZGVkLlxuICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTtcblxuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcblxuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7XG5cbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApO1xuICB9XG5cbiAgc291cmNlLm9uKCdlbmQnLCBjbGVhbnVwKTtcbiAgc291cmNlLm9uKCdjbG9zZScsIGNsZWFudXApO1xuXG4gIGRlc3Qub24oJ2Nsb3NlJywgY2xlYW51cCk7XG5cbiAgZGVzdC5lbWl0KCdwaXBlJywgc291cmNlKTtcblxuICAvLyBBbGxvdyBmb3IgdW5peC1saWtlIHVzYWdlOiBBLnBpcGUoQikucGlwZShDKVxuICByZXR1cm4gZGVzdDtcbn07XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIGlzRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZyB8fCBmdW5jdGlvbiAoZW5jb2RpbmcpIHtcbiAgZW5jb2RpbmcgPSAnJyArIGVuY29kaW5nO1xuICBzd2l0Y2ggKGVuY29kaW5nICYmIGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOmNhc2UgJ3V0ZjgnOmNhc2UgJ3V0Zi04JzpjYXNlICdhc2NpaSc6Y2FzZSAnYmluYXJ5JzpjYXNlICdiYXNlNjQnOmNhc2UgJ3VjczInOmNhc2UgJ3Vjcy0yJzpjYXNlICd1dGYxNmxlJzpjYXNlICd1dGYtMTZsZSc6Y2FzZSAncmF3JzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9ub3JtYWxpemVFbmNvZGluZyhlbmMpIHtcbiAgaWYgKCFlbmMpIHJldHVybiAndXRmOCc7XG4gIHZhciByZXRyaWVkO1xuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jKSB7XG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuICd1dGY4JztcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiAndXRmMTZsZSc7XG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuICdsYXRpbjEnO1xuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBlbmM7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAocmV0cmllZCkgcmV0dXJuOyAvLyB1bmRlZmluZWRcbiAgICAgICAgZW5jID0gKCcnICsgZW5jKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXRyaWVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIERvIG5vdCBjYWNoZSBgQnVmZmVyLmlzRW5jb2RpbmdgIHdoZW4gY2hlY2tpbmcgZW5jb2RpbmcgbmFtZXMgYXMgc29tZVxuLy8gbW9kdWxlcyBtb25rZXktcGF0Y2ggaXQgdG8gc3VwcG9ydCBhZGRpdGlvbmFsIGVuY29kaW5nc1xuZnVuY3Rpb24gbm9ybWFsaXplRW5jb2RpbmcoZW5jKSB7XG4gIHZhciBuZW5jID0gX25vcm1hbGl6ZUVuY29kaW5nKGVuYyk7XG4gIGlmICh0eXBlb2YgbmVuYyAhPT0gJ3N0cmluZycgJiYgKEJ1ZmZlci5pc0VuY29kaW5nID09PSBpc0VuY29kaW5nIHx8ICFpc0VuY29kaW5nKGVuYykpKSB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmMpO1xuICByZXR1cm4gbmVuYyB8fCBlbmM7XG59XG5cbi8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2Zcbi8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZVxuLy8gY2hhcmFjdGVycy5cbmV4cG9ydHMuU3RyaW5nRGVjb2RlciA9IFN0cmluZ0RlY29kZXI7XG5mdW5jdGlvbiBTdHJpbmdEZWNvZGVyKGVuY29kaW5nKSB7XG4gIHRoaXMuZW5jb2RpbmcgPSBub3JtYWxpemVFbmNvZGluZyhlbmNvZGluZyk7XG4gIHZhciBuYjtcbiAgc3dpdGNoICh0aGlzLmVuY29kaW5nKSB7XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICB0aGlzLnRleHQgPSB1dGYxNlRleHQ7XG4gICAgICB0aGlzLmVuZCA9IHV0ZjE2RW5kO1xuICAgICAgbmIgPSA0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndXRmOCc6XG4gICAgICB0aGlzLmZpbGxMYXN0ID0gdXRmOEZpbGxMYXN0O1xuICAgICAgbmIgPSA0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIHRoaXMudGV4dCA9IGJhc2U2NFRleHQ7XG4gICAgICB0aGlzLmVuZCA9IGJhc2U2NEVuZDtcbiAgICAgIG5iID0gMztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aGlzLndyaXRlID0gc2ltcGxlV3JpdGU7XG4gICAgICB0aGlzLmVuZCA9IHNpbXBsZUVuZDtcbiAgICAgIHJldHVybjtcbiAgfVxuICB0aGlzLmxhc3ROZWVkID0gMDtcbiAgdGhpcy5sYXN0VG90YWwgPSAwO1xuICB0aGlzLmxhc3RDaGFyID0gQnVmZmVyLmFsbG9jVW5zYWZlKG5iKTtcbn1cblxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoYnVmKSB7XG4gIGlmIChidWYubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG4gIHZhciByO1xuICB2YXIgaTtcbiAgaWYgKHRoaXMubGFzdE5lZWQpIHtcbiAgICByID0gdGhpcy5maWxsTGFzdChidWYpO1xuICAgIGlmIChyID09PSB1bmRlZmluZWQpIHJldHVybiAnJztcbiAgICBpID0gdGhpcy5sYXN0TmVlZDtcbiAgICB0aGlzLmxhc3ROZWVkID0gMDtcbiAgfSBlbHNlIHtcbiAgICBpID0gMDtcbiAgfVxuICBpZiAoaSA8IGJ1Zi5sZW5ndGgpIHJldHVybiByID8gciArIHRoaXMudGV4dChidWYsIGkpIDogdGhpcy50ZXh0KGJ1ZiwgaSk7XG4gIHJldHVybiByIHx8ICcnO1xufTtcblxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZW5kID0gdXRmOEVuZDtcblxuLy8gUmV0dXJucyBvbmx5IGNvbXBsZXRlIGNoYXJhY3RlcnMgaW4gYSBCdWZmZXJcblN0cmluZ0RlY29kZXIucHJvdG90eXBlLnRleHQgPSB1dGY4VGV4dDtcblxuLy8gQXR0ZW1wdHMgdG8gY29tcGxldGUgYSBwYXJ0aWFsIG5vbi1VVEYtOCBjaGFyYWN0ZXIgdXNpbmcgYnl0ZXMgZnJvbSBhIEJ1ZmZlclxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZmlsbExhc3QgPSBmdW5jdGlvbiAoYnVmKSB7XG4gIGlmICh0aGlzLmxhc3ROZWVkIDw9IGJ1Zi5sZW5ndGgpIHtcbiAgICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQsIDAsIHRoaXMubGFzdE5lZWQpO1xuICAgIHJldHVybiB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIHRoaXMubGFzdFRvdGFsKTtcbiAgfVxuICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQsIDAsIGJ1Zi5sZW5ndGgpO1xuICB0aGlzLmxhc3ROZWVkIC09IGJ1Zi5sZW5ndGg7XG59O1xuXG4vLyBDaGVja3MgdGhlIHR5cGUgb2YgYSBVVEYtOCBieXRlLCB3aGV0aGVyIGl0J3MgQVNDSUksIGEgbGVhZGluZyBieXRlLCBvciBhXG4vLyBjb250aW51YXRpb24gYnl0ZS4gSWYgYW4gaW52YWxpZCBieXRlIGlzIGRldGVjdGVkLCAtMiBpcyByZXR1cm5lZC5cbmZ1bmN0aW9uIHV0ZjhDaGVja0J5dGUoYnl0ZSkge1xuICBpZiAoYnl0ZSA8PSAweDdGKSByZXR1cm4gMDtlbHNlIGlmIChieXRlID4+IDUgPT09IDB4MDYpIHJldHVybiAyO2Vsc2UgaWYgKGJ5dGUgPj4gNCA9PT0gMHgwRSkgcmV0dXJuIDM7ZWxzZSBpZiAoYnl0ZSA+PiAzID09PSAweDFFKSByZXR1cm4gNDtcbiAgcmV0dXJuIGJ5dGUgPj4gNiA9PT0gMHgwMiA/IC0xIDogLTI7XG59XG5cbi8vIENoZWNrcyBhdCBtb3N0IDMgYnl0ZXMgYXQgdGhlIGVuZCBvZiBhIEJ1ZmZlciBpbiBvcmRlciB0byBkZXRlY3QgYW5cbi8vIGluY29tcGxldGUgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIuIFRoZSB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgKDIsIDMsIG9yIDQpXG4vLyBuZWVkZWQgdG8gY29tcGxldGUgdGhlIFVURi04IGNoYXJhY3RlciAoaWYgYXBwbGljYWJsZSkgYXJlIHJldHVybmVkLlxuZnVuY3Rpb24gdXRmOENoZWNrSW5jb21wbGV0ZShzZWxmLCBidWYsIGkpIHtcbiAgdmFyIGogPSBidWYubGVuZ3RoIC0gMTtcbiAgaWYgKGogPCBpKSByZXR1cm4gMDtcbiAgdmFyIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pO1xuICBpZiAobmIgPj0gMCkge1xuICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDE7XG4gICAgcmV0dXJuIG5iO1xuICB9XG4gIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7XG4gIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pO1xuICBpZiAobmIgPj0gMCkge1xuICAgIGlmIChuYiA+IDApIHNlbGYubGFzdE5lZWQgPSBuYiAtIDI7XG4gICAgcmV0dXJuIG5iO1xuICB9XG4gIGlmICgtLWogPCBpIHx8IG5iID09PSAtMikgcmV0dXJuIDA7XG4gIG5iID0gdXRmOENoZWNrQnl0ZShidWZbal0pO1xuICBpZiAobmIgPj0gMCkge1xuICAgIGlmIChuYiA+IDApIHtcbiAgICAgIGlmIChuYiA9PT0gMikgbmIgPSAwO2Vsc2Ugc2VsZi5sYXN0TmVlZCA9IG5iIC0gMztcbiAgICB9XG4gICAgcmV0dXJuIG5iO1xuICB9XG4gIHJldHVybiAwO1xufVxuXG4vLyBWYWxpZGF0ZXMgYXMgbWFueSBjb250aW51YXRpb24gYnl0ZXMgZm9yIGEgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIgYXNcbi8vIG5lZWRlZCBvciBhcmUgYXZhaWxhYmxlLiBJZiB3ZSBzZWUgYSBub24tY29udGludWF0aW9uIGJ5dGUgd2hlcmUgd2UgZXhwZWN0XG4vLyBvbmUsIHdlIFwicmVwbGFjZVwiIHRoZSB2YWxpZGF0ZWQgY29udGludWF0aW9uIGJ5dGVzIHdlJ3ZlIHNlZW4gc28gZmFyIHdpdGhcbi8vIGEgc2luZ2xlIFVURi04IHJlcGxhY2VtZW50IGNoYXJhY3RlciAoJ1xcdWZmZmQnKSwgdG8gbWF0Y2ggdjgncyBVVEYtOCBkZWNvZGluZ1xuLy8gYmVoYXZpb3IuIFRoZSBjb250aW51YXRpb24gYnl0ZSBjaGVjayBpcyBpbmNsdWRlZCB0aHJlZSB0aW1lcyBpbiB0aGUgY2FzZVxuLy8gd2hlcmUgYWxsIG9mIHRoZSBjb250aW51YXRpb24gYnl0ZXMgZm9yIGEgY2hhcmFjdGVyIGV4aXN0IGluIHRoZSBzYW1lIGJ1ZmZlci5cbi8vIEl0IGlzIGFsc28gZG9uZSB0aGlzIHdheSBhcyBhIHNsaWdodCBwZXJmb3JtYW5jZSBpbmNyZWFzZSBpbnN0ZWFkIG9mIHVzaW5nIGFcbi8vIGxvb3AuXG5mdW5jdGlvbiB1dGY4Q2hlY2tFeHRyYUJ5dGVzKHNlbGYsIGJ1ZiwgcCkge1xuICBpZiAoKGJ1ZlswXSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgc2VsZi5sYXN0TmVlZCA9IDA7XG4gICAgcmV0dXJuICdcXHVmZmZkJztcbiAgfVxuICBpZiAoc2VsZi5sYXN0TmVlZCA+IDEgJiYgYnVmLmxlbmd0aCA+IDEpIHtcbiAgICBpZiAoKGJ1ZlsxXSAmIDB4QzApICE9PSAweDgwKSB7XG4gICAgICBzZWxmLmxhc3ROZWVkID0gMTtcbiAgICAgIHJldHVybiAnXFx1ZmZmZCc7XG4gICAgfVxuICAgIGlmIChzZWxmLmxhc3ROZWVkID4gMiAmJiBidWYubGVuZ3RoID4gMikge1xuICAgICAgaWYgKChidWZbMl0gJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICBzZWxmLmxhc3ROZWVkID0gMjtcbiAgICAgICAgcmV0dXJuICdcXHVmZmZkJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gQXR0ZW1wdHMgdG8gY29tcGxldGUgYSBtdWx0aS1ieXRlIFVURi04IGNoYXJhY3RlciB1c2luZyBieXRlcyBmcm9tIGEgQnVmZmVyLlxuZnVuY3Rpb24gdXRmOEZpbGxMYXN0KGJ1Zikge1xuICB2YXIgcCA9IHRoaXMubGFzdFRvdGFsIC0gdGhpcy5sYXN0TmVlZDtcbiAgdmFyIHIgPSB1dGY4Q2hlY2tFeHRyYUJ5dGVzKHRoaXMsIGJ1ZiwgcCk7XG4gIGlmIChyICE9PSB1bmRlZmluZWQpIHJldHVybiByO1xuICBpZiAodGhpcy5sYXN0TmVlZCA8PSBidWYubGVuZ3RoKSB7XG4gICAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgcCwgMCwgdGhpcy5sYXN0TmVlZCk7XG4gICAgcmV0dXJuIHRoaXMubGFzdENoYXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgdGhpcy5sYXN0VG90YWwpO1xuICB9XG4gIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHAsIDAsIGJ1Zi5sZW5ndGgpO1xuICB0aGlzLmxhc3ROZWVkIC09IGJ1Zi5sZW5ndGg7XG59XG5cbi8vIFJldHVybnMgYWxsIGNvbXBsZXRlIFVURi04IGNoYXJhY3RlcnMgaW4gYSBCdWZmZXIuIElmIHRoZSBCdWZmZXIgZW5kZWQgb24gYVxuLy8gcGFydGlhbCBjaGFyYWN0ZXIsIHRoZSBjaGFyYWN0ZXIncyBieXRlcyBhcmUgYnVmZmVyZWQgdW50aWwgdGhlIHJlcXVpcmVkXG4vLyBudW1iZXIgb2YgYnl0ZXMgYXJlIGF2YWlsYWJsZS5cbmZ1bmN0aW9uIHV0ZjhUZXh0KGJ1ZiwgaSkge1xuICB2YXIgdG90YWwgPSB1dGY4Q2hlY2tJbmNvbXBsZXRlKHRoaXMsIGJ1ZiwgaSk7XG4gIGlmICghdGhpcy5sYXN0TmVlZCkgcmV0dXJuIGJ1Zi50b1N0cmluZygndXRmOCcsIGkpO1xuICB0aGlzLmxhc3RUb3RhbCA9IHRvdGFsO1xuICB2YXIgZW5kID0gYnVmLmxlbmd0aCAtICh0b3RhbCAtIHRoaXMubGFzdE5lZWQpO1xuICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCAwLCBlbmQpO1xuICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGY4JywgaSwgZW5kKTtcbn1cblxuLy8gRm9yIFVURi04LCBhIHJlcGxhY2VtZW50IGNoYXJhY3RlciBpcyBhZGRlZCB3aGVuIGVuZGluZyBvbiBhIHBhcnRpYWxcbi8vIGNoYXJhY3Rlci5cbmZ1bmN0aW9uIHV0ZjhFbmQoYnVmKSB7XG4gIHZhciByID0gYnVmICYmIGJ1Zi5sZW5ndGggPyB0aGlzLndyaXRlKGJ1ZikgOiAnJztcbiAgaWYgKHRoaXMubGFzdE5lZWQpIHJldHVybiByICsgJ1xcdWZmZmQnO1xuICByZXR1cm4gcjtcbn1cblxuLy8gVVRGLTE2TEUgdHlwaWNhbGx5IG5lZWRzIHR3byBieXRlcyBwZXIgY2hhcmFjdGVyLCBidXQgZXZlbiBpZiB3ZSBoYXZlIGFuIGV2ZW5cbi8vIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUsIHdlIG5lZWQgdG8gY2hlY2sgaWYgd2UgZW5kIG9uIGEgbGVhZGluZy9oaWdoXG4vLyBzdXJyb2dhdGUuIEluIHRoYXQgY2FzZSwgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgbmV4dCB0d28gYnl0ZXMgaW4gb3JkZXIgdG9cbi8vIGRlY29kZSB0aGUgbGFzdCBjaGFyYWN0ZXIgcHJvcGVybHkuXG5mdW5jdGlvbiB1dGYxNlRleHQoYnVmLCBpKSB7XG4gIGlmICgoYnVmLmxlbmd0aCAtIGkpICUgMiA9PT0gMCkge1xuICAgIHZhciByID0gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSk7XG4gICAgaWYgKHIpIHtcbiAgICAgIHZhciBjID0gci5jaGFyQ29kZUF0KHIubGVuZ3RoIC0gMSk7XG4gICAgICBpZiAoYyA+PSAweEQ4MDAgJiYgYyA8PSAweERCRkYpIHtcbiAgICAgICAgdGhpcy5sYXN0TmVlZCA9IDI7XG4gICAgICAgIHRoaXMubGFzdFRvdGFsID0gNDtcbiAgICAgICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07XG4gICAgICAgIHRoaXMubGFzdENoYXJbMV0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4gci5zbGljZSgwLCAtMSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9XG4gIHRoaXMubGFzdE5lZWQgPSAxO1xuICB0aGlzLmxhc3RUb3RhbCA9IDI7XG4gIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDFdO1xuICByZXR1cm4gYnVmLnRvU3RyaW5nKCd1dGYxNmxlJywgaSwgYnVmLmxlbmd0aCAtIDEpO1xufVxuXG4vLyBGb3IgVVRGLTE2TEUgd2UgZG8gbm90IGV4cGxpY2l0bHkgYXBwZW5kIHNwZWNpYWwgcmVwbGFjZW1lbnQgY2hhcmFjdGVycyBpZiB3ZVxuLy8gZW5kIG9uIGEgcGFydGlhbCBjaGFyYWN0ZXIsIHdlIHNpbXBseSBsZXQgdjggaGFuZGxlIHRoYXQuXG5mdW5jdGlvbiB1dGYxNkVuZChidWYpIHtcbiAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xuICBpZiAodGhpcy5sYXN0TmVlZCkge1xuICAgIHZhciBlbmQgPSB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQ7XG4gICAgcmV0dXJuIHIgKyB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKCd1dGYxNmxlJywgMCwgZW5kKTtcbiAgfVxuICByZXR1cm4gcjtcbn1cblxuZnVuY3Rpb24gYmFzZTY0VGV4dChidWYsIGkpIHtcbiAgdmFyIG4gPSAoYnVmLmxlbmd0aCAtIGkpICUgMztcbiAgaWYgKG4gPT09IDApIHJldHVybiBidWYudG9TdHJpbmcoJ2Jhc2U2NCcsIGkpO1xuICB0aGlzLmxhc3ROZWVkID0gMyAtIG47XG4gIHRoaXMubGFzdFRvdGFsID0gMztcbiAgaWYgKG4gPT09IDEpIHtcbiAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAxXTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAyXTtcbiAgICB0aGlzLmxhc3RDaGFyWzFdID0gYnVmW2J1Zi5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gYnVmLnRvU3RyaW5nKCdiYXNlNjQnLCBpLCBidWYubGVuZ3RoIC0gbik7XG59XG5cbmZ1bmN0aW9uIGJhc2U2NEVuZChidWYpIHtcbiAgdmFyIHIgPSBidWYgJiYgYnVmLmxlbmd0aCA/IHRoaXMud3JpdGUoYnVmKSA6ICcnO1xuICBpZiAodGhpcy5sYXN0TmVlZCkgcmV0dXJuIHIgKyB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKCdiYXNlNjQnLCAwLCAzIC0gdGhpcy5sYXN0TmVlZCk7XG4gIHJldHVybiByO1xufVxuXG4vLyBQYXNzIGJ5dGVzIG9uIHRocm91Z2ggZm9yIHNpbmdsZS1ieXRlIGVuY29kaW5ncyAoZS5nLiBhc2NpaSwgbGF0aW4xLCBoZXgpXG5mdW5jdGlvbiBzaW1wbGVXcml0ZShidWYpIHtcbiAgcmV0dXJuIGJ1Zi50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlRW5kKGJ1Zikge1xuICByZXR1cm4gYnVmICYmIGJ1Zi5sZW5ndGggPyB0aGlzLndyaXRlKGJ1ZikgOiAnJztcbn0iLCJ2YXIgbmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzL2Jyb3dzZXIuanMnKS5uZXh0VGljaztcbnZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbnZhciBpbW1lZGlhdGVJZHMgPSB7fTtcbnZhciBuZXh0SW1tZWRpYXRlSWQgPSAwO1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkgeyB0aW1lb3V0LmNsb3NlKCk7IH07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gVGhhdCdzIG5vdCBob3cgbm9kZS5qcyBpbXBsZW1lbnRzIGl0IGJ1dCB0aGUgZXhwb3NlZCBhcGkgaXMgdGhlIHNhbWUuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHNldEltbWVkaWF0ZSA6IGZ1bmN0aW9uKGZuKSB7XG4gIHZhciBpZCA9IG5leHRJbW1lZGlhdGVJZCsrO1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPCAyID8gZmFsc2UgOiBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cbiAgaW1tZWRpYXRlSWRzW2lkXSA9IHRydWU7XG5cbiAgbmV4dFRpY2soZnVuY3Rpb24gb25OZXh0VGljaygpIHtcbiAgICBpZiAoaW1tZWRpYXRlSWRzW2lkXSkge1xuICAgICAgLy8gZm4uY2FsbCgpIGlzIGZhc3RlciBzbyB3ZSBvcHRpbWl6ZSBmb3IgdGhlIGNvbW1vbiB1c2UtY2FzZVxuICAgICAgLy8gQHNlZSBodHRwOi8vanNwZXJmLmNvbS9jYWxsLWFwcGx5LXNlZ3VcbiAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm4uY2FsbChudWxsKTtcbiAgICAgIH1cbiAgICAgIC8vIFByZXZlbnQgaWRzIGZyb20gbGVha2luZ1xuICAgICAgZXhwb3J0cy5jbGVhckltbWVkaWF0ZShpZCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gaWQ7XG59O1xuXG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gdHlwZW9mIGNsZWFySW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgPyBjbGVhckltbWVkaWF0ZSA6IGZ1bmN0aW9uKGlkKSB7XG4gIGRlbGV0ZSBpbW1lZGlhdGVJZHNbaWRdO1xufTsiLCJcbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBkZXByZWNhdGU7XG5cbi8qKlxuICogTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbiAqIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS5ub0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS50aHJvd0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zXG4gKiB3aWxsIHRocm93IGFuIEVycm9yIHdoZW4gaW52b2tlZC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRyYWNlRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgaW52b2tlIGBjb25zb2xlLnRyYWNlKClgIGluc3RlYWQgb2YgYGNvbnNvbGUuZXJyb3IoKWAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSB0aGUgZnVuY3Rpb24gdG8gZGVwcmVjYXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gbXNnIC0gdGhlIHN0cmluZyB0byBwcmludCB0byB0aGUgY29uc29sZSB3aGVuIGBmbmAgaXMgaW52b2tlZFxuICogQHJldHVybnMge0Z1bmN0aW9ufSBhIG5ldyBcImRlcHJlY2F0ZWRcIiB2ZXJzaW9uIG9mIGBmbmBcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVwcmVjYXRlIChmbiwgbXNnKSB7XG4gIGlmIChjb25maWcoJ25vRGVwcmVjYXRpb24nKSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKGNvbmZpZygndGhyb3dEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChjb25maWcoJ3RyYWNlRGVwcmVjYXRpb24nKSkge1xuICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4obXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGBsb2NhbFN0b3JhZ2VgIGZvciBib29sZWFuIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjb25maWcgKG5hbWUpIHtcbiAgLy8gYWNjZXNzaW5nIGdsb2JhbC5sb2NhbFN0b3JhZ2UgY2FuIHRyaWdnZXIgYSBET01FeGNlcHRpb24gaW4gc2FuZGJveGVkIGlmcmFtZXNcbiAgdHJ5IHtcbiAgICBpZiAoIWdsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoXykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdmFsID0gZ2xvYmFsLmxvY2FsU3RvcmFnZVtuYW1lXTtcbiAgaWYgKG51bGwgPT0gdmFsKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQnVmZmVyKGFyZykge1xuICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnXG4gICAgJiYgdHlwZW9mIGFyZy5jb3B5ID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5maWxsID09PSAnZnVuY3Rpb24nXG4gICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7XG59IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZGolXS9nO1xuZXhwb3J0cy5mb3JtYXQgPSBmdW5jdGlvbihmKSB7XG4gIGlmICghaXNTdHJpbmcoZikpIHtcbiAgICB2YXIgb2JqZWN0cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBvYmplY3RzLnB1c2goaW5zcGVjdChhcmd1bWVudHNbaV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdHMuam9pbignICcpO1xuICB9XG5cbiAgdmFyIGkgPSAxO1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICB2YXIgc3RyID0gU3RyaW5nKGYpLnJlcGxhY2UoZm9ybWF0UmVnRXhwLCBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09ICclJScpIHJldHVybiAnJSc7XG4gICAgaWYgKGkgPj0gbGVuKSByZXR1cm4geDtcbiAgICBzd2l0Y2ggKHgpIHtcbiAgICAgIGNhc2UgJyVzJzogcmV0dXJuIFN0cmluZyhhcmdzW2krK10pO1xuICAgICAgY2FzZSAnJWQnOiByZXR1cm4gTnVtYmVyKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclaic6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3NbaSsrXSk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICByZXR1cm4gJ1tDaXJjdWxhcl0nO1xuICAgICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4geDtcbiAgICB9XG4gIH0pO1xuICBmb3IgKHZhciB4ID0gYXJnc1tpXTsgaSA8IGxlbjsgeCA9IGFyZ3NbKytpXSkge1xuICAgIGlmIChpc051bGwoeCkgfHwgIWlzT2JqZWN0KHgpKSB7XG4gICAgICBzdHIgKz0gJyAnICsgeDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyICs9ICcgJyArIGluc3BlY3QoeCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHI7XG59O1xuXG5cbi8vIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuXG4vLyBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LlxuLy8gSWYgLS1uby1kZXByZWNhdGlvbiBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cbmV4cG9ydHMuZGVwcmVjYXRlID0gZnVuY3Rpb24oZm4sIG1zZykge1xuICAvLyBBbGxvdyBmb3IgZGVwcmVjYXRpbmcgdGhpbmdzIGluIHRoZSBwcm9jZXNzIG9mIHN0YXJ0aW5nIHVwLlxuICBpZiAoaXNVbmRlZmluZWQoZ2xvYmFsLnByb2Nlc3MpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV4cG9ydHMuZGVwcmVjYXRlKGZuLCBtc2cpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLm5vRGVwcmVjYXRpb24gPT09IHRydWUpIHtcbiAgICByZXR1cm4gZm47XG4gIH1cblxuICB2YXIgd2FybmVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7XG4gICAgaWYgKCF3YXJuZWQpIHtcbiAgICAgIGlmIChwcm9jZXNzLnRocm93RGVwcmVjYXRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MudHJhY2VEZXByZWNhdGlvbikge1xuICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9XG4gICAgICB3YXJuZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIHJldHVybiBkZXByZWNhdGVkO1xufTtcblxuXG52YXIgZGVidWdzID0ge307XG52YXIgZGVidWdFbnZpcm9uO1xuZXhwb3J0cy5kZWJ1Z2xvZyA9IGZ1bmN0aW9uKHNldCkge1xuICBpZiAoaXNVbmRlZmluZWQoZGVidWdFbnZpcm9uKSlcbiAgICBkZWJ1Z0Vudmlyb24gPSBwcm9jZXNzLmVudi5OT0RFX0RFQlVHIHx8ICcnO1xuICBzZXQgPSBzZXQudG9VcHBlckNhc2UoKTtcbiAgaWYgKCFkZWJ1Z3Nbc2V0XSkge1xuICAgIGlmIChuZXcgUmVnRXhwKCdcXFxcYicgKyBzZXQgKyAnXFxcXGInLCAnaScpLnRlc3QoZGVidWdFbnZpcm9uKSkge1xuICAgICAgdmFyIHBpZCA9IHByb2Nlc3MucGlkO1xuICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1zZyA9IGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJyVzICVkOiAlcycsIHNldCwgcGlkLCBtc2cpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVidWdzW3NldF0gPSBmdW5jdGlvbigpIHt9O1xuICAgIH1cbiAgfVxuICByZXR1cm4gZGVidWdzW3NldF07XG59O1xuXG5cbi8qKlxuICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dFxuICogaW4gdGhlIGJlc3Qgd2F5IHBvc3NpYmxlIGdpdmVuIHRoZSBkaWZmZXJlbnQgdHlwZXMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIE9wdGlvbmFsIG9wdGlvbnMgb2JqZWN0IHRoYXQgYWx0ZXJzIHRoZSBvdXRwdXQuXG4gKi9cbi8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi9cbmZ1bmN0aW9uIGluc3BlY3Qob2JqLCBvcHRzKSB7XG4gIC8vIGRlZmF1bHQgb3B0aW9uc1xuICB2YXIgY3R4ID0ge1xuICAgIHNlZW46IFtdLFxuICAgIHN0eWxpemU6IHN0eWxpemVOb0NvbG9yXG4gIH07XG4gIC8vIGxlZ2FjeS4uLlxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSBjdHguZGVwdGggPSBhcmd1bWVudHNbMl07XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107XG4gIGlmIChpc0Jvb2xlYW4ob3B0cykpIHtcbiAgICAvLyBsZWdhY3kuLi5cbiAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7XG4gIH0gZWxzZSBpZiAob3B0cykge1xuICAgIC8vIGdvdCBhbiBcIm9wdGlvbnNcIiBvYmplY3RcbiAgICBleHBvcnRzLl9leHRlbmQoY3R4LCBvcHRzKTtcbiAgfVxuICAvLyBzZXQgZGVmYXVsdCBvcHRpb25zXG4gIGlmIChpc1VuZGVmaW5lZChjdHguc2hvd0hpZGRlbikpIGN0eC5zaG93SGlkZGVuID0gZmFsc2U7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguZGVwdGgpKSBjdHguZGVwdGggPSAyO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmNvbG9ycykpIGN0eC5jb2xvcnMgPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jdXN0b21JbnNwZWN0KSkgY3R4LmN1c3RvbUluc3BlY3QgPSB0cnVlO1xuICBpZiAoY3R4LmNvbG9ycykgY3R4LnN0eWxpemUgPSBzdHlsaXplV2l0aENvbG9yO1xuICByZXR1cm4gZm9ybWF0VmFsdWUoY3R4LCBvYmosIGN0eC5kZXB0aCk7XG59XG5leHBvcnRzLmluc3BlY3QgPSBpbnNwZWN0O1xuXG5cbi8vIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQU5TSV9lc2NhcGVfY29kZSNncmFwaGljc1xuaW5zcGVjdC5jb2xvcnMgPSB7XG4gICdib2xkJyA6IFsxLCAyMl0sXG4gICdpdGFsaWMnIDogWzMsIDIzXSxcbiAgJ3VuZGVybGluZScgOiBbNCwgMjRdLFxuICAnaW52ZXJzZScgOiBbNywgMjddLFxuICAnd2hpdGUnIDogWzM3LCAzOV0sXG4gICdncmV5JyA6IFs5MCwgMzldLFxuICAnYmxhY2snIDogWzMwLCAzOV0sXG4gICdibHVlJyA6IFszNCwgMzldLFxuICAnY3lhbicgOiBbMzYsIDM5XSxcbiAgJ2dyZWVuJyA6IFszMiwgMzldLFxuICAnbWFnZW50YScgOiBbMzUsIDM5XSxcbiAgJ3JlZCcgOiBbMzEsIDM5XSxcbiAgJ3llbGxvdycgOiBbMzMsIDM5XVxufTtcblxuLy8gRG9uJ3QgdXNlICdibHVlJyBub3QgdmlzaWJsZSBvbiBjbWQuZXhlXG5pbnNwZWN0LnN0eWxlcyA9IHtcbiAgJ3NwZWNpYWwnOiAnY3lhbicsXG4gICdudW1iZXInOiAneWVsbG93JyxcbiAgJ2Jvb2xlYW4nOiAneWVsbG93JyxcbiAgJ3VuZGVmaW5lZCc6ICdncmV5JyxcbiAgJ251bGwnOiAnYm9sZCcsXG4gICdzdHJpbmcnOiAnZ3JlZW4nLFxuICAnZGF0ZSc6ICdtYWdlbnRhJyxcbiAgLy8gXCJuYW1lXCI6IGludGVudGlvbmFsbHkgbm90IHN0eWxpbmdcbiAgJ3JlZ2V4cCc6ICdyZWQnXG59O1xuXG5cbmZ1bmN0aW9uIHN0eWxpemVXaXRoQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgdmFyIHN0eWxlID0gaW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTtcblxuICBpZiAoc3R5bGUpIHtcbiAgICByZXR1cm4gJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVswXSArICdtJyArIHN0ciArXG4gICAgICAgICAgICdcXHUwMDFiWycgKyBpbnNwZWN0LmNvbG9yc1tzdHlsZV1bMV0gKyAnbSc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHN0eWxpemVOb0NvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG4gIHJldHVybiBzdHI7XG59XG5cblxuZnVuY3Rpb24gYXJyYXlUb0hhc2goYXJyYXkpIHtcbiAgdmFyIGhhc2ggPSB7fTtcblxuICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uKHZhbCwgaWR4KSB7XG4gICAgaGFzaFt2YWxdID0gdHJ1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGhhc2g7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG4gIC8vIFByb3ZpZGUgYSBob29rIGZvciB1c2VyLXNwZWNpZmllZCBpbnNwZWN0IGZ1bmN0aW9ucy5cbiAgLy8gQ2hlY2sgdGhhdCB2YWx1ZSBpcyBhbiBvYmplY3Qgd2l0aCBhbiBpbnNwZWN0IGZ1bmN0aW9uIG9uIGl0XG4gIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuICAgICAgdmFsdWUgJiZcbiAgICAgIGlzRnVuY3Rpb24odmFsdWUuaW5zcGVjdCkgJiZcbiAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuICAgICAgdmFsdWUuaW5zcGVjdCAhPT0gZXhwb3J0cy5pbnNwZWN0ICYmXG4gICAgICAvLyBBbHNvIGZpbHRlciBvdXQgYW55IHByb3RvdHlwZSBvYmplY3RzIHVzaW5nIHRoZSBjaXJjdWxhciBjaGVjay5cbiAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHtcbiAgICB2YXIgcmV0ID0gdmFsdWUuaW5zcGVjdChyZWN1cnNlVGltZXMsIGN0eCk7XG4gICAgaWYgKCFpc1N0cmluZyhyZXQpKSB7XG4gICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8vIFByaW1pdGl2ZSB0eXBlcyBjYW5ub3QgaGF2ZSBwcm9wZXJ0aWVzXG4gIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG4gIGlmIChwcmltaXRpdmUpIHtcbiAgICByZXR1cm4gcHJpbWl0aXZlO1xuICB9XG5cbiAgLy8gTG9vayB1cCB0aGUga2V5cyBvZiB0aGUgb2JqZWN0LlxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgdmFyIHZpc2libGVLZXlzID0gYXJyYXlUb0hhc2goa2V5cyk7XG5cbiAgaWYgKGN0eC5zaG93SGlkZGVuKSB7XG4gICAga2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgfVxuXG4gIC8vIElFIGRvZXNuJ3QgbWFrZSBlcnJvciBmaWVsZHMgbm9uLWVudW1lcmFibGVcbiAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2R3dzUyc2J0KHY9dnMuOTQpLmFzcHhcbiAgaWYgKGlzRXJyb3IodmFsdWUpXG4gICAgICAmJiAoa2V5cy5pbmRleE9mKCdtZXNzYWdlJykgPj0gMCB8fCBrZXlzLmluZGV4T2YoJ2Rlc2NyaXB0aW9uJykgPj0gMCkpIHtcbiAgICByZXR1cm4gZm9ybWF0RXJyb3IodmFsdWUpO1xuICB9XG5cbiAgLy8gU29tZSB0eXBlIG9mIG9iamVjdCB3aXRob3V0IHByb3BlcnRpZXMgY2FuIGJlIHNob3J0Y3V0dGVkLlxuICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgIHZhciBuYW1lID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH1cbiAgICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpO1xuICAgIH1cbiAgICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGJhc2UgPSAnJywgYXJyYXkgPSBmYWxzZSwgYnJhY2VzID0gWyd7JywgJ30nXTtcblxuICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGFycmF5ID0gdHJ1ZTtcbiAgICBicmFjZXMgPSBbJ1snLCAnXSddO1xuICB9XG5cbiAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zXG4gIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgIHZhciBuID0gdmFsdWUubmFtZSA/ICc6ICcgKyB2YWx1ZS5uYW1lIDogJyc7XG4gICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7XG4gIH1cblxuICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvLyBNYWtlIGRhdGVzIHdpdGggcHJvcGVydGllcyBmaXJzdCBzYXkgdGhlIGRhdGVcbiAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh2YWx1ZSk7XG4gIH1cblxuICAvLyBNYWtlIGVycm9yIHdpdGggbWVzc2FnZSBmaXJzdCBzYXkgdGhlIGVycm9yXG4gIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArIGJyYWNlc1sxXTtcbiAgfVxuXG4gIGlmIChyZWN1cnNlVGltZXMgPCAwKSB7XG4gICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdbT2JqZWN0XScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG5cbiAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cbiAgdmFyIG91dHB1dDtcbiAgaWYgKGFycmF5KSB7XG4gICAgb3V0cHV0ID0gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cyk7XG4gIH0gZWxzZSB7XG4gICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICByZXR1cm4gZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5LCBhcnJheSk7XG4gICAgfSk7XG4gIH1cblxuICBjdHguc2Vlbi5wb3AoKTtcblxuICByZXR1cm4gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKSB7XG4gIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpXG4gICAgcmV0dXJuIGN0eC5zdHlsaXplKCd1bmRlZmluZWQnLCAndW5kZWZpbmVkJyk7XG4gIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICB2YXIgc2ltcGxlID0gJ1xcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXlwifFwiJC9nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykgKyAnXFwnJztcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7XG4gIH1cbiAgaWYgKGlzTnVtYmVyKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpO1xuICBpZiAoaXNCb29sZWFuKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ2Jvb2xlYW4nKTtcbiAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuICBpZiAoaXNOdWxsKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ251bGwnLCAnbnVsbCcpO1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7XG4gIHJldHVybiAnWycgKyBFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkgKyAnXSc7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0QXJyYXkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cywga2V5cykge1xuICB2YXIgb3V0cHV0ID0gW107XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5KHZhbHVlLCBTdHJpbmcoaSkpKSB7XG4gICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuICAgICAgICAgIFN0cmluZyhpKSwgdHJ1ZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXQucHVzaCgnJyk7XG4gICAgfVxuICB9XG4gIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoIWtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAga2V5LCB0cnVlKSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KSB7XG4gIHZhciBuYW1lLCBzdHIsIGRlc2M7XG4gIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTtcbiAgaWYgKGRlc2MuZ2V0KSB7XG4gICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tHZXR0ZXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGRlc2Muc2V0KSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7XG4gICAgbmFtZSA9ICdbJyArIGtleSArICddJztcbiAgfVxuICBpZiAoIXN0cikge1xuICAgIGlmIChjdHguc2Vlbi5pbmRleE9mKGRlc2MudmFsdWUpIDwgMCkge1xuICAgICAgaWYgKGlzTnVsbChyZWN1cnNlVGltZXMpKSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHIgPSBmb3JtYXRWYWx1ZShjdHgsIGRlc2MudmFsdWUsIHJlY3Vyc2VUaW1lcyAtIDEpO1xuICAgICAgfVxuICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXG4nKSA+IC0xKSB7XG4gICAgICAgIGlmIChhcnJheSkge1xuICAgICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAnICsgbGluZTtcbiAgICAgICAgICB9KS5qb2luKCdcXG4nKS5zdWJzdHIoMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gJ1xcbicgKyBzdHIuc3BsaXQoJ1xcbicpLm1hcChmdW5jdGlvbihsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm4gJyAgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbQ2lyY3VsYXJdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzVW5kZWZpbmVkKG5hbWUpKSB7XG4gICAgaWYgKGFycmF5ICYmIGtleS5tYXRjaCgvXlxcZCskLykpIHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICAgIG5hbWUgPSBKU09OLnN0cmluZ2lmeSgnJyArIGtleSk7XG4gICAgaWYgKG5hbWUubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pKSB7XG4gICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMSwgbmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnbmFtZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC8nL2csIFwiXFxcXCdcIilcbiAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF5cInxcIiQpL2csIFwiJ1wiKTtcbiAgICAgIG5hbWUgPSBjdHguc3R5bGl6ZShuYW1lLCAnc3RyaW5nJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5hbWUgKyAnOiAnICsgc3RyO1xufVxuXG5cbmZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7XG4gIHZhciBudW1MaW5lc0VzdCA9IDA7XG4gIHZhciBsZW5ndGggPSBvdXRwdXQucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cikge1xuICAgIG51bUxpbmVzRXN0Kys7XG4gICAgaWYgKGN1ci5pbmRleE9mKCdcXG4nKSA+PSAwKSBudW1MaW5lc0VzdCsrO1xuICAgIHJldHVybiBwcmV2ICsgY3VyLnJlcGxhY2UoL1xcdTAwMWJcXFtcXGRcXGQ/bS9nLCAnJykubGVuZ3RoICsgMTtcbiAgfSwgMCk7XG5cbiAgaWYgKGxlbmd0aCA+IDYwKSB7XG4gICAgcmV0dXJuIGJyYWNlc1swXSArXG4gICAgICAgICAgIChiYXNlID09PSAnJyA/ICcnIDogYmFzZSArICdcXG4gJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuICAgICAgICAgICAnICcgK1xuICAgICAgICAgICBicmFjZXNbMV07XG4gIH1cblxuICByZXR1cm4gYnJhY2VzWzBdICsgYmFzZSArICcgJyArIG91dHB1dC5qb2luKCcsICcpICsgJyAnICsgYnJhY2VzWzFdO1xufVxuXG5cbi8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuLy8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuXG5mdW5jdGlvbiBpc0FycmF5KGFyKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KGFyKTtcbn1cbmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cbmZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJztcbn1cbmV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuO1xuXG5mdW5jdGlvbiBpc051bGwoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblxuZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDtcblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjtcblxuZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJztcbn1cbmV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblxuZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcbn1cbmV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDtcblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbmV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcblxuZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHJlKSAmJiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGQpICYmIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblxuZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiBpc09iamVjdChlKSAmJlxuICAgICAgKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gcmVxdWlyZSgnLi9zdXBwb3J0L2lzQnVmZmVyJyk7XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cblxuXG5mdW5jdGlvbiBwYWQobikge1xuICByZXR1cm4gbiA8IDEwID8gJzAnICsgbi50b1N0cmluZygxMCkgOiBuLnRvU3RyaW5nKDEwKTtcbn1cblxuXG52YXIgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsXG4gICAgICAgICAgICAgICdPY3QnLCAnTm92JywgJ0RlYyddO1xuXG4vLyAyNiBGZWIgMTY6MTk6MzRcbmZ1bmN0aW9uIHRpbWVzdGFtcCgpIHtcbiAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICB2YXIgdGltZSA9IFtwYWQoZC5nZXRIb3VycygpKSxcbiAgICAgICAgICAgICAgcGFkKGQuZ2V0TWludXRlcygpKSxcbiAgICAgICAgICAgICAgcGFkKGQuZ2V0U2Vjb25kcygpKV0uam9pbignOicpO1xuICByZXR1cm4gW2QuZ2V0RGF0ZSgpLCBtb250aHNbZC5nZXRNb250aCgpXSwgdGltZV0uam9pbignICcpO1xufVxuXG5cbi8vIGxvZyBpcyBqdXN0IGEgdGhpbiB3cmFwcGVyIHRvIGNvbnNvbGUubG9nIHRoYXQgcHJlcGVuZHMgYSB0aW1lc3RhbXBcbmV4cG9ydHMubG9nID0gZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUubG9nKCclcyAtICVzJywgdGltZXN0YW1wKCksIGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cykpO1xufTtcblxuXG4vKipcbiAqIEluaGVyaXQgdGhlIHByb3RvdHlwZSBtZXRob2RzIGZyb20gb25lIGNvbnN0cnVjdG9yIGludG8gYW5vdGhlci5cbiAqXG4gKiBUaGUgRnVuY3Rpb24ucHJvdG90eXBlLmluaGVyaXRzIGZyb20gbGFuZy5qcyByZXdyaXR0ZW4gYXMgYSBzdGFuZGFsb25lXG4gKiBmdW5jdGlvbiAobm90IG9uIEZ1bmN0aW9uLnByb3RvdHlwZSkuIE5PVEU6IElmIHRoaXMgZmlsZSBpcyB0byBiZSBsb2FkZWRcbiAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlXG4gKiBmdW5jdGlvbnMgYXMgcHJvdG90eXBlIHNldHVwIHVzaW5nIG5vcm1hbCBKYXZhU2NyaXB0IGRvZXMgbm90IHdvcmsgYXNcbiAqIGV4cGVjdGVkIGR1cmluZyBib290c3RyYXBwaW5nIChzZWUgbWlycm9yLmpzIGluIHIxMTQ5MDMpLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gd2hpY2ggbmVlZHMgdG8gaW5oZXJpdCB0aGVcbiAqICAgICBwcm90b3R5cGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS5cbiAqL1xuZXhwb3J0cy5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG5cbmV4cG9ydHMuX2V4dGVuZCA9IGZ1bmN0aW9uKG9yaWdpbiwgYWRkKSB7XG4gIC8vIERvbid0IGRvIGFueXRoaW5nIGlmIGFkZCBpc24ndCBhbiBvYmplY3RcbiAgaWYgKCFhZGQgfHwgIWlzT2JqZWN0KGFkZCkpIHJldHVybiBvcmlnaW47XG5cbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhZGQpO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgb3JpZ2luW2tleXNbaV1dID0gYWRkW2tleXNbaV1dO1xuICB9XG4gIHJldHVybiBvcmlnaW47XG59O1xuXG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIGV4cG9ydHMuc3RyaXBCT00gPSBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAoc3RyWzBdID09PSAnXFx1RkVGRicpIHtcbiAgICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgfTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuICB2YXIgYnVpbGRlciwgZGVmYXVsdHMsIGVzY2FwZUNEQVRBLCByZXF1aXJlc0NEQVRBLCB3cmFwQ0RBVEEsXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGJ1aWxkZXIgPSByZXF1aXJlKCd4bWxidWlsZGVyJyk7XG5cbiAgZGVmYXVsdHMgPSByZXF1aXJlKCcuL2RlZmF1bHRzJykuZGVmYXVsdHM7XG5cbiAgcmVxdWlyZXNDREFUQSA9IGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIiAmJiAoZW50cnkuaW5kZXhPZignJicpID49IDAgfHwgZW50cnkuaW5kZXhPZignPicpID49IDAgfHwgZW50cnkuaW5kZXhPZignPCcpID49IDApO1xuICB9O1xuXG4gIHdyYXBDREFUQSA9IGZ1bmN0aW9uKGVudHJ5KSB7XG4gICAgcmV0dXJuIFwiPCFbQ0RBVEFbXCIgKyAoZXNjYXBlQ0RBVEEoZW50cnkpKSArIFwiXV0+XCI7XG4gIH07XG5cbiAgZXNjYXBlQ0RBVEEgPSBmdW5jdGlvbihlbnRyeSkge1xuICAgIHJldHVybiBlbnRyeS5yZXBsYWNlKCddXT4nLCAnXV1dXT48IVtDREFUQVs+Jyk7XG4gIH07XG5cbiAgZXhwb3J0cy5CdWlsZGVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIEJ1aWxkZXIob3B0cykge1xuICAgICAgdmFyIGtleSwgcmVmLCB2YWx1ZTtcbiAgICAgIHRoaXMub3B0aW9ucyA9IHt9O1xuICAgICAgcmVmID0gZGVmYXVsdHNbXCIwLjJcIl07XG4gICAgICBmb3IgKGtleSBpbiByZWYpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSByZWZba2V5XTtcbiAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGZvciAoa2V5IGluIG9wdHMpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwob3B0cywga2V5KSkgY29udGludWU7XG4gICAgICAgIHZhbHVlID0gb3B0c1trZXldO1xuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkT2JqZWN0ID0gZnVuY3Rpb24ocm9vdE9iaikge1xuICAgICAgdmFyIGF0dHJrZXksIGNoYXJrZXksIHJlbmRlciwgcm9vdEVsZW1lbnQsIHJvb3ROYW1lO1xuICAgICAgYXR0cmtleSA9IHRoaXMub3B0aW9ucy5hdHRya2V5O1xuICAgICAgY2hhcmtleSA9IHRoaXMub3B0aW9ucy5jaGFya2V5O1xuICAgICAgaWYgKChPYmplY3Qua2V5cyhyb290T2JqKS5sZW5ndGggPT09IDEpICYmICh0aGlzLm9wdGlvbnMucm9vdE5hbWUgPT09IGRlZmF1bHRzWycwLjInXS5yb290TmFtZSkpIHtcbiAgICAgICAgcm9vdE5hbWUgPSBPYmplY3Qua2V5cyhyb290T2JqKVswXTtcbiAgICAgICAgcm9vdE9iaiA9IHJvb3RPYmpbcm9vdE5hbWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdE5hbWUgPSB0aGlzLm9wdGlvbnMucm9vdE5hbWU7XG4gICAgICB9XG4gICAgICByZW5kZXIgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVsZW1lbnQsIG9iaikge1xuICAgICAgICAgIHZhciBhdHRyLCBjaGlsZCwgZW50cnksIGluZGV4LCBrZXksIHZhbHVlO1xuICAgICAgICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuY2RhdGEgJiYgcmVxdWlyZXNDREFUQShvYmopKSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQucmF3KHdyYXBDREFUQShvYmopKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQudHh0KG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIGZvciAoaW5kZXggaW4gb2JqKSB7XG4gICAgICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9iaiwgaW5kZXgpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgY2hpbGQgPSBvYmpbaW5kZXhdO1xuICAgICAgICAgICAgICBmb3IgKGtleSBpbiBjaGlsZCkge1xuICAgICAgICAgICAgICAgIGVudHJ5ID0gY2hpbGRba2V5XTtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gcmVuZGVyKGVsZW1lbnQuZWxlKGtleSksIGVudHJ5KS51cCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG9iaikge1xuICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvYmosIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICBjaGlsZCA9IG9ialtrZXldO1xuICAgICAgICAgICAgICBpZiAoa2V5ID09PSBhdHRya2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgZm9yIChhdHRyIGluIGNoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY2hpbGRbYXR0cl07XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LmF0dChhdHRyLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gY2hhcmtleSkge1xuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmNkYXRhICYmIHJlcXVpcmVzQ0RBVEEoY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5yYXcod3JhcENEQVRBKGNoaWxkKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnR4dChjaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChpbmRleCBpbiBjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwoY2hpbGQsIGluZGV4KSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICBlbnRyeSA9IGNoaWxkW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmNkYXRhICYmIHJlcXVpcmVzQ0RBVEEoZW50cnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuZWxlKGtleSkucmF3KHdyYXBDREFUQShlbnRyeSkpLnVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuZWxlKGtleSwgZW50cnkpLnVwKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSByZW5kZXIoZWxlbWVudC5lbGUoa2V5KSwgZW50cnkpLnVwKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjaGlsZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSByZW5kZXIoZWxlbWVudC5lbGUoa2V5KSwgY2hpbGQpLnVwKCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ3N0cmluZycgJiYgX3RoaXMub3B0aW9ucy5jZGF0YSAmJiByZXF1aXJlc0NEQVRBKGNoaWxkKSkge1xuICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQuZWxlKGtleSkucmF3KHdyYXBDREFUQShjaGlsZCkpLnVwKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGlmIChjaGlsZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkID0gJyc7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5lbGUoa2V5LCBjaGlsZC50b1N0cmluZygpKS51cCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgcm9vdEVsZW1lbnQgPSBidWlsZGVyLmNyZWF0ZShyb290TmFtZSwgdGhpcy5vcHRpb25zLnhtbGRlYywgdGhpcy5vcHRpb25zLmRvY3R5cGUsIHtcbiAgICAgICAgaGVhZGxlc3M6IHRoaXMub3B0aW9ucy5oZWFkbGVzcyxcbiAgICAgICAgYWxsb3dTdXJyb2dhdGVDaGFyczogdGhpcy5vcHRpb25zLmFsbG93U3Vycm9nYXRlQ2hhcnNcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlbmRlcihyb290RWxlbWVudCwgcm9vdE9iaikuZW5kKHRoaXMub3B0aW9ucy5yZW5kZXJPcHRzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEJ1aWxkZXI7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIGV4cG9ydHMuZGVmYXVsdHMgPSB7XG4gICAgXCIwLjFcIjoge1xuICAgICAgZXhwbGljaXRDaGFya2V5OiBmYWxzZSxcbiAgICAgIHRyaW06IHRydWUsXG4gICAgICBub3JtYWxpemU6IHRydWUsXG4gICAgICBub3JtYWxpemVUYWdzOiBmYWxzZSxcbiAgICAgIGF0dHJrZXk6IFwiQFwiLFxuICAgICAgY2hhcmtleTogXCIjXCIsXG4gICAgICBleHBsaWNpdEFycmF5OiBmYWxzZSxcbiAgICAgIGlnbm9yZUF0dHJzOiBmYWxzZSxcbiAgICAgIG1lcmdlQXR0cnM6IGZhbHNlLFxuICAgICAgZXhwbGljaXRSb290OiBmYWxzZSxcbiAgICAgIHZhbGlkYXRvcjogbnVsbCxcbiAgICAgIHhtbG5zOiBmYWxzZSxcbiAgICAgIGV4cGxpY2l0Q2hpbGRyZW46IGZhbHNlLFxuICAgICAgY2hpbGRrZXk6ICdAQCcsXG4gICAgICBjaGFyc0FzQ2hpbGRyZW46IGZhbHNlLFxuICAgICAgaW5jbHVkZVdoaXRlQ2hhcnM6IGZhbHNlLFxuICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgYXR0ck5hbWVQcm9jZXNzb3JzOiBudWxsLFxuICAgICAgYXR0clZhbHVlUHJvY2Vzc29yczogbnVsbCxcbiAgICAgIHRhZ05hbWVQcm9jZXNzb3JzOiBudWxsLFxuICAgICAgdmFsdWVQcm9jZXNzb3JzOiBudWxsLFxuICAgICAgZW1wdHlUYWc6ICcnXG4gICAgfSxcbiAgICBcIjAuMlwiOiB7XG4gICAgICBleHBsaWNpdENoYXJrZXk6IGZhbHNlLFxuICAgICAgdHJpbTogZmFsc2UsXG4gICAgICBub3JtYWxpemU6IGZhbHNlLFxuICAgICAgbm9ybWFsaXplVGFnczogZmFsc2UsXG4gICAgICBhdHRya2V5OiBcIiRcIixcbiAgICAgIGNoYXJrZXk6IFwiX1wiLFxuICAgICAgZXhwbGljaXRBcnJheTogdHJ1ZSxcbiAgICAgIGlnbm9yZUF0dHJzOiBmYWxzZSxcbiAgICAgIG1lcmdlQXR0cnM6IGZhbHNlLFxuICAgICAgZXhwbGljaXRSb290OiB0cnVlLFxuICAgICAgdmFsaWRhdG9yOiBudWxsLFxuICAgICAgeG1sbnM6IGZhbHNlLFxuICAgICAgZXhwbGljaXRDaGlsZHJlbjogZmFsc2UsXG4gICAgICBwcmVzZXJ2ZUNoaWxkcmVuT3JkZXI6IGZhbHNlLFxuICAgICAgY2hpbGRrZXk6ICckJCcsXG4gICAgICBjaGFyc0FzQ2hpbGRyZW46IGZhbHNlLFxuICAgICAgaW5jbHVkZVdoaXRlQ2hhcnM6IGZhbHNlLFxuICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgYXR0ck5hbWVQcm9jZXNzb3JzOiBudWxsLFxuICAgICAgYXR0clZhbHVlUHJvY2Vzc29yczogbnVsbCxcbiAgICAgIHRhZ05hbWVQcm9jZXNzb3JzOiBudWxsLFxuICAgICAgdmFsdWVQcm9jZXNzb3JzOiBudWxsLFxuICAgICAgcm9vdE5hbWU6ICdyb290JyxcbiAgICAgIHhtbGRlYzoge1xuICAgICAgICAndmVyc2lvbic6ICcxLjAnLFxuICAgICAgICAnZW5jb2RpbmcnOiAnVVRGLTgnLFxuICAgICAgICAnc3RhbmRhbG9uZSc6IHRydWVcbiAgICAgIH0sXG4gICAgICBkb2N0eXBlOiBudWxsLFxuICAgICAgcmVuZGVyT3B0czoge1xuICAgICAgICAncHJldHR5JzogdHJ1ZSxcbiAgICAgICAgJ2luZGVudCc6ICcgICcsXG4gICAgICAgICduZXdsaW5lJzogJ1xcbidcbiAgICAgIH0sXG4gICAgICBoZWFkbGVzczogZmFsc2UsXG4gICAgICBjaHVua1NpemU6IDEwMDAwLFxuICAgICAgZW1wdHlUYWc6ICcnLFxuICAgICAgY2RhdGE6IGZhbHNlXG4gICAgfVxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIHZhciBib20sIGRlZmF1bHRzLCBldmVudHMsIGlzRW1wdHksIHByb2Nlc3NJdGVtLCBwcm9jZXNzb3JzLCBzYXgsIHNldEltbWVkaWF0ZSxcbiAgICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIHNheCA9IHJlcXVpcmUoJ3NheCcpO1xuXG4gIGV2ZW50cyA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuXG4gIGJvbSA9IHJlcXVpcmUoJy4vYm9tJyk7XG5cbiAgcHJvY2Vzc29ycyA9IHJlcXVpcmUoJy4vcHJvY2Vzc29ycycpO1xuXG4gIHNldEltbWVkaWF0ZSA9IHJlcXVpcmUoJ3RpbWVycycpLnNldEltbWVkaWF0ZTtcblxuICBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKS5kZWZhdWx0cztcblxuICBpc0VtcHR5ID0gZnVuY3Rpb24odGhpbmcpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaW5nID09PSBcIm9iamVjdFwiICYmICh0aGluZyAhPSBudWxsKSAmJiBPYmplY3Qua2V5cyh0aGluZykubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIHByb2Nlc3NJdGVtID0gZnVuY3Rpb24ocHJvY2Vzc29ycywgaXRlbSwga2V5KSB7XG4gICAgdmFyIGksIGxlbiwgcHJvY2VzcztcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBwcm9jZXNzb3JzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBwcm9jZXNzID0gcHJvY2Vzc29yc1tpXTtcbiAgICAgIGl0ZW0gPSBwcm9jZXNzKGl0ZW0sIGtleSk7XG4gICAgfVxuICAgIHJldHVybiBpdGVtO1xuICB9O1xuXG4gIGV4cG9ydHMuUGFyc2VyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoUGFyc2VyLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFBhcnNlcihvcHRzKSB7XG4gICAgICB0aGlzLnBhcnNlU3RyaW5nID0gYmluZCh0aGlzLnBhcnNlU3RyaW5nLCB0aGlzKTtcbiAgICAgIHRoaXMucmVzZXQgPSBiaW5kKHRoaXMucmVzZXQsIHRoaXMpO1xuICAgICAgdGhpcy5hc3NpZ25PclB1c2ggPSBiaW5kKHRoaXMuYXNzaWduT3JQdXNoLCB0aGlzKTtcbiAgICAgIHRoaXMucHJvY2Vzc0FzeW5jID0gYmluZCh0aGlzLnByb2Nlc3NBc3luYywgdGhpcyk7XG4gICAgICB2YXIga2V5LCByZWYsIHZhbHVlO1xuICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIGV4cG9ydHMuUGFyc2VyKSkge1xuICAgICAgICByZXR1cm4gbmV3IGV4cG9ydHMuUGFyc2VyKG9wdHMpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcHRpb25zID0ge307XG4gICAgICByZWYgPSBkZWZhdWx0c1tcIjAuMlwiXTtcbiAgICAgIGZvciAoa2V5IGluIHJlZikge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IHJlZltrZXldO1xuICAgICAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgZm9yIChrZXkgaW4gb3B0cykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvcHRzLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSBvcHRzW2tleV07XG4gICAgICAgIHRoaXMub3B0aW9uc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnhtbG5zKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucy54bWxuc2tleSA9IHRoaXMub3B0aW9ucy5hdHRya2V5ICsgXCJuc1wiO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5ub3JtYWxpemVUYWdzKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnRhZ05hbWVQcm9jZXNzb3JzKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLnRhZ05hbWVQcm9jZXNzb3JzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zLnRhZ05hbWVQcm9jZXNzb3JzLnVuc2hpZnQocHJvY2Vzc29ycy5ub3JtYWxpemUpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXNldCgpO1xuICAgIH1cblxuICAgIFBhcnNlci5wcm90b3R5cGUucHJvY2Vzc0FzeW5jID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2h1bmssIGVycjtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZy5sZW5ndGggPD0gdGhpcy5vcHRpb25zLmNodW5rU2l6ZSkge1xuICAgICAgICAgIGNodW5rID0gdGhpcy5yZW1haW5pbmc7XG4gICAgICAgICAgdGhpcy5yZW1haW5pbmcgPSAnJztcbiAgICAgICAgICB0aGlzLnNheFBhcnNlciA9IHRoaXMuc2F4UGFyc2VyLndyaXRlKGNodW5rKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zYXhQYXJzZXIuY2xvc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaHVuayA9IHRoaXMucmVtYWluaW5nLnN1YnN0cigwLCB0aGlzLm9wdGlvbnMuY2h1bmtTaXplKTtcbiAgICAgICAgICB0aGlzLnJlbWFpbmluZyA9IHRoaXMucmVtYWluaW5nLnN1YnN0cih0aGlzLm9wdGlvbnMuY2h1bmtTaXplLCB0aGlzLnJlbWFpbmluZy5sZW5ndGgpO1xuICAgICAgICAgIHRoaXMuc2F4UGFyc2VyID0gdGhpcy5zYXhQYXJzZXIud3JpdGUoY2h1bmspO1xuICAgICAgICAgIHJldHVybiBzZXRJbW1lZGlhdGUodGhpcy5wcm9jZXNzQXN5bmMpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcjEpIHtcbiAgICAgICAgZXJyID0gZXJyb3IxO1xuICAgICAgICBpZiAoIXRoaXMuc2F4UGFyc2VyLmVyclRocm93bikge1xuICAgICAgICAgIHRoaXMuc2F4UGFyc2VyLmVyclRocm93biA9IHRydWU7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZW1pdChlcnIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIFBhcnNlci5wcm90b3R5cGUuYXNzaWduT3JQdXNoID0gZnVuY3Rpb24ob2JqLCBrZXksIG5ld1ZhbHVlKSB7XG4gICAgICBpZiAoIShrZXkgaW4gb2JqKSkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5leHBsaWNpdEFycmF5KSB7XG4gICAgICAgICAgcmV0dXJuIG9ialtrZXldID0gbmV3VmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG9ialtrZXldID0gW25ld1ZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEob2JqW2tleV0gaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICBvYmpba2V5XSA9IFtvYmpba2V5XV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9ialtrZXldLnB1c2gobmV3VmFsdWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBQYXJzZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXR0cmtleSwgY2hhcmtleSwgb250ZXh0LCBzdGFjaztcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgICB0aGlzLnNheFBhcnNlciA9IHNheC5wYXJzZXIodGhpcy5vcHRpb25zLnN0cmljdCwge1xuICAgICAgICB0cmltOiBmYWxzZSxcbiAgICAgICAgbm9ybWFsaXplOiBmYWxzZSxcbiAgICAgICAgeG1sbnM6IHRoaXMub3B0aW9ucy54bWxuc1xuICAgICAgfSk7XG4gICAgICB0aGlzLnNheFBhcnNlci5lcnJUaHJvd24gPSBmYWxzZTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLm9uZXJyb3IgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgX3RoaXMuc2F4UGFyc2VyLnJlc3VtZSgpO1xuICAgICAgICAgIGlmICghX3RoaXMuc2F4UGFyc2VyLmVyclRocm93bikge1xuICAgICAgICAgICAgX3RoaXMuc2F4UGFyc2VyLmVyclRocm93biA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZW1pdChcImVycm9yXCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLm9uZW5kID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoIV90aGlzLnNheFBhcnNlci5lbmRlZCkge1xuICAgICAgICAgICAgX3RoaXMuc2F4UGFyc2VyLmVuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5lbWl0KFwiZW5kXCIsIF90aGlzLnJlc3VsdE9iamVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLnNheFBhcnNlci5lbmRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5FWFBMSUNJVF9DSEFSS0VZID0gdGhpcy5vcHRpb25zLmV4cGxpY2l0Q2hhcmtleTtcbiAgICAgIHRoaXMucmVzdWx0T2JqZWN0ID0gbnVsbDtcbiAgICAgIHN0YWNrID0gW107XG4gICAgICBhdHRya2V5ID0gdGhpcy5vcHRpb25zLmF0dHJrZXk7XG4gICAgICBjaGFya2V5ID0gdGhpcy5vcHRpb25zLmNoYXJrZXk7XG4gICAgICB0aGlzLnNheFBhcnNlci5vbm9wZW50YWcgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICB2YXIga2V5LCBuZXdWYWx1ZSwgb2JqLCBwcm9jZXNzZWRLZXksIHJlZjtcbiAgICAgICAgICBvYmogPSB7fTtcbiAgICAgICAgICBvYmpbY2hhcmtleV0gPSBcIlwiO1xuICAgICAgICAgIGlmICghX3RoaXMub3B0aW9ucy5pZ25vcmVBdHRycykge1xuICAgICAgICAgICAgcmVmID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwga2V5KSkgY29udGludWU7XG4gICAgICAgICAgICAgIGlmICghKGF0dHJrZXkgaW4gb2JqKSAmJiAhX3RoaXMub3B0aW9ucy5tZXJnZUF0dHJzKSB7XG4gICAgICAgICAgICAgICAgb2JqW2F0dHJrZXldID0ge307XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbmV3VmFsdWUgPSBfdGhpcy5vcHRpb25zLmF0dHJWYWx1ZVByb2Nlc3NvcnMgPyBwcm9jZXNzSXRlbShfdGhpcy5vcHRpb25zLmF0dHJWYWx1ZVByb2Nlc3NvcnMsIG5vZGUuYXR0cmlidXRlc1trZXldLCBrZXkpIDogbm9kZS5hdHRyaWJ1dGVzW2tleV07XG4gICAgICAgICAgICAgIHByb2Nlc3NlZEtleSA9IF90aGlzLm9wdGlvbnMuYXR0ck5hbWVQcm9jZXNzb3JzID8gcHJvY2Vzc0l0ZW0oX3RoaXMub3B0aW9ucy5hdHRyTmFtZVByb2Nlc3NvcnMsIGtleSkgOiBrZXk7XG4gICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLm1lcmdlQXR0cnMpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hc3NpZ25PclB1c2gob2JqLCBwcm9jZXNzZWRLZXksIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYmpbYXR0cmtleV1bcHJvY2Vzc2VkS2V5XSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIG9ialtcIiNuYW1lXCJdID0gX3RoaXMub3B0aW9ucy50YWdOYW1lUHJvY2Vzc29ycyA/IHByb2Nlc3NJdGVtKF90aGlzLm9wdGlvbnMudGFnTmFtZVByb2Nlc3NvcnMsIG5vZGUubmFtZSkgOiBub2RlLm5hbWU7XG4gICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMueG1sbnMpIHtcbiAgICAgICAgICAgIG9ialtfdGhpcy5vcHRpb25zLnhtbG5za2V5XSA9IHtcbiAgICAgICAgICAgICAgdXJpOiBub2RlLnVyaSxcbiAgICAgICAgICAgICAgbG9jYWw6IG5vZGUubG9jYWxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBzdGFjay5wdXNoKG9iaik7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIHRoaXMuc2F4UGFyc2VyLm9uY2xvc2V0YWcgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBjZGF0YSwgZW1wdHlTdHIsIGtleSwgbm9kZSwgbm9kZU5hbWUsIG9iaiwgb2JqQ2xvbmUsIG9sZCwgcywgeHBhdGg7XG4gICAgICAgICAgb2JqID0gc3RhY2sucG9wKCk7XG4gICAgICAgICAgbm9kZU5hbWUgPSBvYmpbXCIjbmFtZVwiXTtcbiAgICAgICAgICBpZiAoIV90aGlzLm9wdGlvbnMuZXhwbGljaXRDaGlsZHJlbiB8fCAhX3RoaXMub3B0aW9ucy5wcmVzZXJ2ZUNoaWxkcmVuT3JkZXIpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBvYmpbXCIjbmFtZVwiXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9iai5jZGF0YSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2RhdGEgPSBvYmouY2RhdGE7XG4gICAgICAgICAgICBkZWxldGUgb2JqLmNkYXRhO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgaWYgKG9ialtjaGFya2V5XS5tYXRjaCgvXlxccyokLykgJiYgIWNkYXRhKSB7XG4gICAgICAgICAgICBlbXB0eVN0ciA9IG9ialtjaGFya2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSBvYmpbY2hhcmtleV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnRyaW0pIHtcbiAgICAgICAgICAgICAgb2JqW2NoYXJrZXldID0gb2JqW2NoYXJrZXldLnRyaW0oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLm5vcm1hbGl6ZSkge1xuICAgICAgICAgICAgICBvYmpbY2hhcmtleV0gPSBvYmpbY2hhcmtleV0ucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIikudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqW2NoYXJrZXldID0gX3RoaXMub3B0aW9ucy52YWx1ZVByb2Nlc3NvcnMgPyBwcm9jZXNzSXRlbShfdGhpcy5vcHRpb25zLnZhbHVlUHJvY2Vzc29ycywgb2JqW2NoYXJrZXldLCBub2RlTmFtZSkgOiBvYmpbY2hhcmtleV07XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMob2JqKS5sZW5ndGggPT09IDEgJiYgY2hhcmtleSBpbiBvYmogJiYgIV90aGlzLkVYUExJQ0lUX0NIQVJLRVkpIHtcbiAgICAgICAgICAgICAgb2JqID0gb2JqW2NoYXJrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXNFbXB0eShvYmopKSB7XG4gICAgICAgICAgICBvYmogPSBfdGhpcy5vcHRpb25zLmVtcHR5VGFnICE9PSAnJyA/IF90aGlzLm9wdGlvbnMuZW1wdHlUYWcgOiBlbXB0eVN0cjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMudmFsaWRhdG9yICE9IG51bGwpIHtcbiAgICAgICAgICAgIHhwYXRoID0gXCIvXCIgKyAoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgaSwgbGVuLCByZXN1bHRzO1xuICAgICAgICAgICAgICByZXN1bHRzID0gW107XG4gICAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHN0YWNrLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbm9kZSA9IHN0YWNrW2ldO1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChub2RlW1wiI25hbWVcIl0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfSkoKSkuY29uY2F0KG5vZGVOYW1lKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdmFyIGVycjtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqID0gX3RoaXMub3B0aW9ucy52YWxpZGF0b3IoeHBhdGgsIHMgJiYgc1tub2RlTmFtZV0sIG9iaik7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yMSkge1xuICAgICAgICAgICAgICAgIGVyciA9IGVycm9yMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZW1pdChcImVycm9yXCIsIGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmV4cGxpY2l0Q2hpbGRyZW4gJiYgIV90aGlzLm9wdGlvbnMubWVyZ2VBdHRycyAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWYgKCFfdGhpcy5vcHRpb25zLnByZXNlcnZlQ2hpbGRyZW5PcmRlcikge1xuICAgICAgICAgICAgICBub2RlID0ge307XG4gICAgICAgICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmF0dHJrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgbm9kZVtfdGhpcy5vcHRpb25zLmF0dHJrZXldID0gb2JqW190aGlzLm9wdGlvbnMuYXR0cmtleV07XG4gICAgICAgICAgICAgICAgZGVsZXRlIG9ialtfdGhpcy5vcHRpb25zLmF0dHJrZXldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICghX3RoaXMub3B0aW9ucy5jaGFyc0FzQ2hpbGRyZW4gJiYgX3RoaXMub3B0aW9ucy5jaGFya2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIG5vZGVbX3RoaXMub3B0aW9ucy5jaGFya2V5XSA9IG9ialtfdGhpcy5vcHRpb25zLmNoYXJrZXldO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBvYmpbX3RoaXMub3B0aW9ucy5jaGFya2V5XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbm9kZVtfdGhpcy5vcHRpb25zLmNoaWxka2V5XSA9IG9iajtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBvYmogPSBub2RlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzKSB7XG4gICAgICAgICAgICAgIHNbX3RoaXMub3B0aW9ucy5jaGlsZGtleV0gPSBzW190aGlzLm9wdGlvbnMuY2hpbGRrZXldIHx8IFtdO1xuICAgICAgICAgICAgICBvYmpDbG9uZSA9IHt9O1xuICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvYmosIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG9iakNsb25lW2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzW190aGlzLm9wdGlvbnMuY2hpbGRrZXldLnB1c2gob2JqQ2xvbmUpO1xuICAgICAgICAgICAgICBkZWxldGUgb2JqW1wiI25hbWVcIl07XG4gICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMSAmJiBjaGFya2V5IGluIG9iaiAmJiAhX3RoaXMuRVhQTElDSVRfQ0hBUktFWSkge1xuICAgICAgICAgICAgICAgIG9iaiA9IG9ialtjaGFya2V5XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmFzc2lnbk9yUHVzaChzLCBub2RlTmFtZSwgb2JqKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuZXhwbGljaXRSb290KSB7XG4gICAgICAgICAgICAgIG9sZCA9IG9iajtcbiAgICAgICAgICAgICAgb2JqID0ge307XG4gICAgICAgICAgICAgIG9ialtub2RlTmFtZV0gPSBvbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5yZXN1bHRPYmplY3QgPSBvYmo7XG4gICAgICAgICAgICBfdGhpcy5zYXhQYXJzZXIuZW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmVtaXQoXCJlbmRcIiwgX3RoaXMucmVzdWx0T2JqZWN0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICAgIG9udGV4dCA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICAgIHZhciBjaGFyQ2hpbGQsIHM7XG4gICAgICAgICAgcyA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICBzW2NoYXJrZXldICs9IHRleHQ7XG4gICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5leHBsaWNpdENoaWxkcmVuICYmIF90aGlzLm9wdGlvbnMucHJlc2VydmVDaGlsZHJlbk9yZGVyICYmIF90aGlzLm9wdGlvbnMuY2hhcnNBc0NoaWxkcmVuICYmIChfdGhpcy5vcHRpb25zLmluY2x1ZGVXaGl0ZUNoYXJzIHx8IHRleHQucmVwbGFjZSgvXFxcXG4vZywgJycpLnRyaW0oKSAhPT0gJycpKSB7XG4gICAgICAgICAgICAgIHNbX3RoaXMub3B0aW9ucy5jaGlsZGtleV0gPSBzW190aGlzLm9wdGlvbnMuY2hpbGRrZXldIHx8IFtdO1xuICAgICAgICAgICAgICBjaGFyQ2hpbGQgPSB7XG4gICAgICAgICAgICAgICAgJyNuYW1lJzogJ19fdGV4dF9fJ1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBjaGFyQ2hpbGRbY2hhcmtleV0gPSB0ZXh0O1xuICAgICAgICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5ub3JtYWxpemUpIHtcbiAgICAgICAgICAgICAgICBjaGFyQ2hpbGRbY2hhcmtleV0gPSBjaGFyQ2hpbGRbY2hhcmtleV0ucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIikudHJpbSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNbX3RoaXMub3B0aW9ucy5jaGlsZGtleV0ucHVzaChjaGFyQ2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB0aGlzLnNheFBhcnNlci5vbnRleHQgPSBvbnRleHQ7XG4gICAgICByZXR1cm4gdGhpcy5zYXhQYXJzZXIub25jZGF0YSA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICAgIHZhciBzO1xuICAgICAgICAgIHMgPSBvbnRleHQodGV4dCk7XG4gICAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzLmNkYXRhID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKTtcbiAgICB9O1xuXG4gICAgUGFyc2VyLnByb3RvdHlwZS5wYXJzZVN0cmluZyA9IGZ1bmN0aW9uKHN0ciwgY2IpIHtcbiAgICAgIHZhciBlcnI7XG4gICAgICBpZiAoKGNiICE9IG51bGwpICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMub24oXCJlbmRcIiwgZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgIHJldHVybiBjYihudWxsLCByZXN1bHQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vbihcImVycm9yXCIsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICByZXR1cm4gY2IoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBzdHIgPSBzdHIudG9TdHJpbmcoKTtcbiAgICAgICAgaWYgKHN0ci50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5lbWl0KFwiZW5kXCIsIG51bGwpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHN0ciA9IGJvbS5zdHJpcEJPTShzdHIpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmFzeW5jKSB7XG4gICAgICAgICAgdGhpcy5yZW1haW5pbmcgPSBzdHI7XG4gICAgICAgICAgc2V0SW1tZWRpYXRlKHRoaXMucHJvY2Vzc0FzeW5jKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zYXhQYXJzZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc2F4UGFyc2VyLndyaXRlKHN0cikuY2xvc2UoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yMSkge1xuICAgICAgICBlcnIgPSBlcnJvcjE7XG4gICAgICAgIGlmICghKHRoaXMuc2F4UGFyc2VyLmVyclRocm93biB8fCB0aGlzLnNheFBhcnNlci5lbmRlZCkpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zYXhQYXJzZXIuZXJyVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNheFBhcnNlci5lbmRlZCkge1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUGFyc2VyO1xuXG4gIH0pKGV2ZW50cy5FdmVudEVtaXR0ZXIpO1xuXG4gIGV4cG9ydHMucGFyc2VTdHJpbmcgPSBmdW5jdGlvbihzdHIsIGEsIGIpIHtcbiAgICB2YXIgY2IsIG9wdGlvbnMsIHBhcnNlcjtcbiAgICBpZiAoYiAhPSBudWxsKSB7XG4gICAgICBpZiAodHlwZW9mIGIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2IgPSBiO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhID09PSAnb2JqZWN0Jykge1xuICAgICAgICBvcHRpb25zID0gYTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNiID0gYTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgcGFyc2VyID0gbmV3IGV4cG9ydHMuUGFyc2VyKG9wdGlvbnMpO1xuICAgIHJldHVybiBwYXJzZXIucGFyc2VTdHJpbmcoc3RyLCBjYik7XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIHByZWZpeE1hdGNoO1xuXG4gIHByZWZpeE1hdGNoID0gbmV3IFJlZ0V4cCgvKD8heG1sbnMpXi4qOi8pO1xuXG4gIGV4cG9ydHMubm9ybWFsaXplID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpO1xuICB9O1xuXG4gIGV4cG9ydHMuZmlyc3RDaGFyTG93ZXJDYXNlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbiAgfTtcblxuICBleHBvcnRzLnN0cmlwUHJlZml4ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKHByZWZpeE1hdGNoLCAnJyk7XG4gIH07XG5cbiAgZXhwb3J0cy5wYXJzZU51bWJlcnMgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAoIWlzTmFOKHN0cikpIHtcbiAgICAgIHN0ciA9IHN0ciAlIDEgPT09IDAgPyBwYXJzZUludChzdHIsIDEwKSA6IHBhcnNlRmxvYXQoc3RyKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfTtcblxuICBleHBvcnRzLnBhcnNlQm9vbGVhbnMgPSBmdW5jdGlvbihzdHIpIHtcbiAgICBpZiAoL14oPzp0cnVlfGZhbHNlKSQvaS50ZXN0KHN0cikpIHtcbiAgICAgIHN0ciA9IHN0ci50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgdmFyIGJ1aWxkZXIsIGRlZmF1bHRzLCBwYXJzZXIsIHByb2Nlc3NvcnMsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcblxuICBidWlsZGVyID0gcmVxdWlyZSgnLi9idWlsZGVyJyk7XG5cbiAgcGFyc2VyID0gcmVxdWlyZSgnLi9wYXJzZXInKTtcblxuICBwcm9jZXNzb3JzID0gcmVxdWlyZSgnLi9wcm9jZXNzb3JzJyk7XG5cbiAgZXhwb3J0cy5kZWZhdWx0cyA9IGRlZmF1bHRzLmRlZmF1bHRzO1xuXG4gIGV4cG9ydHMucHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG5cbiAgZXhwb3J0cy5WYWxpZGF0aW9uRXJyb3IgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChWYWxpZGF0aW9uRXJyb3IsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkVycm9yKG1lc3NhZ2UpIHtcbiAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIFZhbGlkYXRpb25FcnJvcjtcblxuICB9KShFcnJvcik7XG5cbiAgZXhwb3J0cy5CdWlsZGVyID0gYnVpbGRlci5CdWlsZGVyO1xuXG4gIGV4cG9ydHMuUGFyc2VyID0gcGFyc2VyLlBhcnNlcjtcblxuICBleHBvcnRzLnBhcnNlU3RyaW5nID0gcGFyc2VyLnBhcnNlU3RyaW5nO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIGFzc2lnbiwgaXNBcnJheSwgaXNFbXB0eSwgaXNGdW5jdGlvbiwgaXNPYmplY3QsIGlzUGxhaW5PYmplY3QsXG4gICAgc2xpY2UgPSBbXS5zbGljZSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgYXNzaWduID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGksIGtleSwgbGVuLCBzb3VyY2UsIHNvdXJjZXMsIHRhcmdldDtcbiAgICB0YXJnZXQgPSBhcmd1bWVudHNbMF0sIHNvdXJjZXMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICBpZiAoaXNGdW5jdGlvbihPYmplY3QuYXNzaWduKSkge1xuICAgICAgT2JqZWN0LmFzc2lnbi5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSBzb3VyY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHNvdXJjZSA9IHNvdXJjZXNbaV07XG4gICAgICAgIGlmIChzb3VyY2UgIT0gbnVsbCkge1xuICAgICAgICAgIGZvciAoa2V5IGluIHNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHJldHVybiAhIXZhbCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgfTtcblxuICBpc09iamVjdCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHZhciByZWY7XG4gICAgcmV0dXJuICEhdmFsICYmICgocmVmID0gdHlwZW9mIHZhbCkgPT09ICdmdW5jdGlvbicgfHwgcmVmID09PSAnb2JqZWN0Jyk7XG4gIH07XG5cbiAgaXNBcnJheSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKEFycmF5LmlzQXJyYXkpKSB7XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgfVxuICB9O1xuXG4gIGlzRW1wdHkgPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIga2V5O1xuICAgIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICAgIHJldHVybiAhdmFsLmxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChrZXkgaW4gdmFsKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHZhbCwga2V5KSkgY29udGludWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBpc1BsYWluT2JqZWN0ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdmFyIGN0b3IsIHByb3RvO1xuICAgIHJldHVybiBpc09iamVjdCh2YWwpICYmIChwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWwpKSAmJiAoY3RvciA9IHByb3RvLmNvbnN0cnVjdG9yKSAmJiAodHlwZW9mIGN0b3IgPT09ICdmdW5jdGlvbicpICYmIChjdG9yIGluc3RhbmNlb2YgY3RvcikgJiYgKEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGN0b3IpID09PSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChPYmplY3QpKTtcbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cy5hc3NpZ24gPSBhc3NpZ247XG5cbiAgbW9kdWxlLmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbiAgbW9kdWxlLmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuICBtb2R1bGUuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuICBtb2R1bGUuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTtcblxuICBtb2R1bGUuZXhwb3J0cy5pc1BsYWluT2JqZWN0ID0gaXNQbGFpbk9iamVjdDtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxBdHRyaWJ1dGU7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxBdHRyaWJ1dGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MQXR0cmlidXRlKHBhcmVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IHBhcmVudC5vcHRpb25zO1xuICAgICAgdGhpcy5zdHJpbmdpZnkgPSBwYXJlbnQuc3RyaW5naWZ5O1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGF0dHJpYnV0ZSBuYW1lIG9mIGVsZW1lbnQgXCIgKyBwYXJlbnQubmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGF0dHJpYnV0ZSB2YWx1ZSBmb3IgYXR0cmlidXRlIFwiICsgbmFtZSArIFwiIG9mIGVsZW1lbnQgXCIgKyBwYXJlbnQubmFtZSk7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnN0cmluZ2lmeS5hdHROYW1lKG5hbWUpO1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LmF0dFZhbHVlKHZhbHVlKTtcbiAgICB9XG5cbiAgICBYTUxBdHRyaWJ1dGUucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MQXR0cmlidXRlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnNldChvcHRpb25zKS5hdHRyaWJ1dGUodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxBdHRyaWJ1dGU7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxDRGF0YSwgWE1MTm9kZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTENEYXRhID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MQ0RhdGEsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MQ0RhdGEocGFyZW50LCB0ZXh0KSB7XG4gICAgICBYTUxDRGF0YS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKHRleHQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIENEQVRBIHRleHRcIik7XG4gICAgICB9XG4gICAgICB0aGlzLnRleHQgPSB0aGlzLnN0cmluZ2lmeS5jZGF0YSh0ZXh0KTtcbiAgICB9XG5cbiAgICBYTUxDRGF0YS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxDRGF0YS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5zZXQob3B0aW9ucykuY2RhdGEodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxDRGF0YTtcblxuICB9KShYTUxOb2RlKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxDb21tZW50LCBYTUxOb2RlLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MQ29tbWVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTENvbW1lbnQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MQ29tbWVudChwYXJlbnQsIHRleHQpIHtcbiAgICAgIFhNTENvbW1lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIGlmICh0ZXh0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBjb21tZW50IHRleHRcIik7XG4gICAgICB9XG4gICAgICB0aGlzLnRleHQgPSB0aGlzLnN0cmluZ2lmeS5jb21tZW50KHRleHQpO1xuICAgIH1cblxuICAgIFhNTENvbW1lbnQucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MQ29tbWVudC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5zZXQob3B0aW9ucykuY29tbWVudCh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTENvbW1lbnQ7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MRFREQXR0TGlzdCwgWE1MTm9kZSxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERUREF0dExpc3QgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxEVERBdHRMaXN0LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERUREF0dExpc3QocGFyZW50LCBlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICBYTUxEVERBdHRMaXN0Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAoZWxlbWVudE5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIERURCBlbGVtZW50IG5hbWVcIik7XG4gICAgICB9XG4gICAgICBpZiAoYXR0cmlidXRlTmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIGF0dHJpYnV0ZSBuYW1lXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFhdHRyaWJ1dGVUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIGF0dHJpYnV0ZSB0eXBlXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFkZWZhdWx0VmFsdWVUeXBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgRFREIGF0dHJpYnV0ZSBkZWZhdWx0XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGRlZmF1bHRWYWx1ZVR5cGUuaW5kZXhPZignIycpICE9PSAwKSB7XG4gICAgICAgIGRlZmF1bHRWYWx1ZVR5cGUgPSAnIycgKyBkZWZhdWx0VmFsdWVUeXBlO1xuICAgICAgfVxuICAgICAgaWYgKCFkZWZhdWx0VmFsdWVUeXBlLm1hdGNoKC9eKCNSRVFVSVJFRHwjSU1QTElFRHwjRklYRUR8I0RFRkFVTFQpJC8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZGVmYXVsdCB2YWx1ZSB0eXBlOyBleHBlY3RlZDogI1JFUVVJUkVELCAjSU1QTElFRCwgI0ZJWEVEIG9yICNERUZBVUxUXCIpO1xuICAgICAgfVxuICAgICAgaWYgKGRlZmF1bHRWYWx1ZSAmJiAhZGVmYXVsdFZhbHVlVHlwZS5tYXRjaCgvXigjRklYRUR8I0RFRkFVTFQpJC8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlZmF1bHQgdmFsdWUgb25seSBhcHBsaWVzIHRvICNGSVhFRCBvciAjREVGQVVMVFwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWxlbWVudE5hbWUgPSB0aGlzLnN0cmluZ2lmeS5lbGVOYW1lKGVsZW1lbnROYW1lKTtcbiAgICAgIHRoaXMuYXR0cmlidXRlTmFtZSA9IHRoaXMuc3RyaW5naWZ5LmF0dE5hbWUoYXR0cmlidXRlTmFtZSk7XG4gICAgICB0aGlzLmF0dHJpYnV0ZVR5cGUgPSB0aGlzLnN0cmluZ2lmeS5kdGRBdHRUeXBlKGF0dHJpYnV0ZVR5cGUpO1xuICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSB0aGlzLnN0cmluZ2lmeS5kdGRBdHREZWZhdWx0KGRlZmF1bHRWYWx1ZSk7XG4gICAgICB0aGlzLmRlZmF1bHRWYWx1ZVR5cGUgPSBkZWZhdWx0VmFsdWVUeXBlO1xuICAgIH1cblxuICAgIFhNTERUREF0dExpc3QucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuc2V0KG9wdGlvbnMpLmR0ZEF0dExpc3QodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEVERBdHRMaXN0O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTERUREVsZW1lbnQsIFhNTE5vZGUsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxEVERFbGVtZW50ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MRFRERWxlbWVudCwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBYTUxEVERFbGVtZW50KHBhcmVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICAgIFhNTERUREVsZW1lbnQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBEVEQgZWxlbWVudCBuYW1lXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICB2YWx1ZSA9ICcoI1BDREFUQSknO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gJygnICsgdmFsdWUuam9pbignLCcpICsgJyknO1xuICAgICAgfVxuICAgICAgdGhpcy5uYW1lID0gdGhpcy5zdHJpbmdpZnkuZWxlTmFtZShuYW1lKTtcbiAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnN0cmluZ2lmeS5kdGRFbGVtZW50VmFsdWUodmFsdWUpO1xuICAgIH1cblxuICAgIFhNTERUREVsZW1lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuc2V0KG9wdGlvbnMpLmR0ZEVsZW1lbnQodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEVERFbGVtZW50O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTERUREVudGl0eSwgWE1MTm9kZSwgaXNPYmplY3QsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBpc09iamVjdCA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLmlzT2JqZWN0O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERUREVudGl0eSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTERUREVudGl0eSwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBYTUxEVERFbnRpdHkocGFyZW50LCBwZSwgbmFtZSwgdmFsdWUpIHtcbiAgICAgIFhNTERUREVudGl0eS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGVudGl0eSBuYW1lXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBlbnRpdHkgdmFsdWVcIik7XG4gICAgICB9XG4gICAgICB0aGlzLnBlID0gISFwZTtcbiAgICAgIHRoaXMubmFtZSA9IHRoaXMuc3RyaW5naWZ5LmVsZU5hbWUobmFtZSk7XG4gICAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5zdHJpbmdpZnkuZHRkRW50aXR5VmFsdWUodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF2YWx1ZS5wdWJJRCAmJiAhdmFsdWUuc3lzSUQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQdWJsaWMgYW5kL29yIHN5c3RlbSBpZGVudGlmaWVycyBhcmUgcmVxdWlyZWQgZm9yIGFuIGV4dGVybmFsIGVudGl0eVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUucHViSUQgJiYgIXZhbHVlLnN5c0lEKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU3lzdGVtIGlkZW50aWZpZXIgaXMgcmVxdWlyZWQgZm9yIGEgcHVibGljIGV4dGVybmFsIGVudGl0eVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUucHViSUQgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMucHViSUQgPSB0aGlzLnN0cmluZ2lmeS5kdGRQdWJJRCh2YWx1ZS5wdWJJRCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlLnN5c0lEICE9IG51bGwpIHtcbiAgICAgICAgICB0aGlzLnN5c0lEID0gdGhpcy5zdHJpbmdpZnkuZHRkU3lzSUQodmFsdWUuc3lzSUQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZS5uRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5uRGF0YSA9IHRoaXMuc3RyaW5naWZ5LmR0ZE5EYXRhKHZhbHVlLm5EYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wZSAmJiB0aGlzLm5EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90YXRpb24gZGVjbGFyYXRpb24gaXMgbm90IGFsbG93ZWQgaW4gYSBwYXJhbWV0ZXIgZW50aXR5XCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgWE1MRFRERW50aXR5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnNldChvcHRpb25zKS5kdGRFbnRpdHkodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEVERFbnRpdHk7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MRFRETm90YXRpb24sIFhNTE5vZGUsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxEVEROb3RhdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTERURE5vdGF0aW9uLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERURE5vdGF0aW9uKHBhcmVudCwgbmFtZSwgdmFsdWUpIHtcbiAgICAgIFhNTERURE5vdGF0aW9uLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgbm90YXRpb24gbmFtZVwiKTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsdWUucHViSUQgJiYgIXZhbHVlLnN5c0lEKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlB1YmxpYyBvciBzeXN0ZW0gaWRlbnRpZmllcnMgYXJlIHJlcXVpcmVkIGZvciBhbiBleHRlcm5hbCBlbnRpdHlcIik7XG4gICAgICB9XG4gICAgICB0aGlzLm5hbWUgPSB0aGlzLnN0cmluZ2lmeS5lbGVOYW1lKG5hbWUpO1xuICAgICAgaWYgKHZhbHVlLnB1YklEICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wdWJJRCA9IHRoaXMuc3RyaW5naWZ5LmR0ZFB1YklEKHZhbHVlLnB1YklEKTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZS5zeXNJRCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3lzSUQgPSB0aGlzLnN0cmluZ2lmeS5kdGRTeXNJRCh2YWx1ZS5zeXNJRCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgWE1MRFRETm90YXRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuc2V0KG9wdGlvbnMpLmR0ZE5vdGF0aW9uKHRoaXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRFRETm90YXRpb247XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MRGVjbGFyYXRpb24sIFhNTE5vZGUsIGlzT2JqZWN0LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgaXNPYmplY3QgPSByZXF1aXJlKCcuL1V0aWxpdHknKS5pc09iamVjdDtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxEZWNsYXJhdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTERlY2xhcmF0aW9uLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERlY2xhcmF0aW9uKHBhcmVudCwgdmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICBYTUxEZWNsYXJhdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKGlzT2JqZWN0KHZlcnNpb24pKSB7XG4gICAgICAgIHJlZiA9IHZlcnNpb24sIHZlcnNpb24gPSByZWYudmVyc2lvbiwgZW5jb2RpbmcgPSByZWYuZW5jb2RpbmcsIHN0YW5kYWxvbmUgPSByZWYuc3RhbmRhbG9uZTtcbiAgICAgIH1cbiAgICAgIGlmICghdmVyc2lvbikge1xuICAgICAgICB2ZXJzaW9uID0gJzEuMCc7XG4gICAgICB9XG4gICAgICB0aGlzLnZlcnNpb24gPSB0aGlzLnN0cmluZ2lmeS54bWxWZXJzaW9uKHZlcnNpb24pO1xuICAgICAgaWYgKGVuY29kaW5nICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5lbmNvZGluZyA9IHRoaXMuc3RyaW5naWZ5LnhtbEVuY29kaW5nKGVuY29kaW5nKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGFuZGFsb25lICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGFuZGFsb25lID0gdGhpcy5zdHJpbmdpZnkueG1sU3RhbmRhbG9uZShzdGFuZGFsb25lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBYTUxEZWNsYXJhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndyaXRlci5zZXQob3B0aW9ucykuZGVjbGFyYXRpb24odGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEZWNsYXJhdGlvbjtcblxuICB9KShYTUxOb2RlKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxEVERBdHRMaXN0LCBYTUxEVERFbGVtZW50LCBYTUxEVERFbnRpdHksIFhNTERURE5vdGF0aW9uLCBYTUxEb2NUeXBlLCBYTUxOb2RlLCBpc09iamVjdCxcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9VdGlsaXR5JykuaXNPYmplY3Q7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIFhNTERUREF0dExpc3QgPSByZXF1aXJlKCcuL1hNTERUREF0dExpc3QnKTtcblxuICBYTUxEVERFbnRpdHkgPSByZXF1aXJlKCcuL1hNTERUREVudGl0eScpO1xuXG4gIFhNTERUREVsZW1lbnQgPSByZXF1aXJlKCcuL1hNTERUREVsZW1lbnQnKTtcblxuICBYTUxEVEROb3RhdGlvbiA9IHJlcXVpcmUoJy4vWE1MRFRETm90YXRpb24nKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERvY1R5cGUgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxEb2NUeXBlLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERvY1R5cGUocGFyZW50LCBwdWJJRCwgc3lzSUQpIHtcbiAgICAgIHZhciByZWYsIHJlZjE7XG4gICAgICBYTUxEb2NUeXBlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICB0aGlzLmRvY3VtZW50T2JqZWN0ID0gcGFyZW50O1xuICAgICAgaWYgKGlzT2JqZWN0KHB1YklEKSkge1xuICAgICAgICByZWYgPSBwdWJJRCwgcHViSUQgPSByZWYucHViSUQsIHN5c0lEID0gcmVmLnN5c0lEO1xuICAgICAgfVxuICAgICAgaWYgKHN5c0lEID09IG51bGwpIHtcbiAgICAgICAgcmVmMSA9IFtwdWJJRCwgc3lzSURdLCBzeXNJRCA9IHJlZjFbMF0sIHB1YklEID0gcmVmMVsxXTtcbiAgICAgIH1cbiAgICAgIGlmIChwdWJJRCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucHViSUQgPSB0aGlzLnN0cmluZ2lmeS5kdGRQdWJJRChwdWJJRCk7XG4gICAgICB9XG4gICAgICBpZiAoc3lzSUQgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnN5c0lEID0gdGhpcy5zdHJpbmdpZnkuZHRkU3lzSUQoc3lzSUQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmVsZW1lbnQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MRFRERWxlbWVudCh0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmF0dExpc3QgPSBmdW5jdGlvbihlbGVtZW50TmFtZSwgYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVHlwZSwgZGVmYXVsdFZhbHVlVHlwZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxEVERBdHRMaXN0KHRoaXMsIGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBkZWZhdWx0VmFsdWVUeXBlLCBkZWZhdWx0VmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5lbnRpdHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MRFRERW50aXR5KHRoaXMsIGZhbHNlLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLnBFbnRpdHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MRFRERW50aXR5KHRoaXMsIHRydWUsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jVHlwZS5wcm90b3R5cGUubm90YXRpb24gPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MRFRETm90YXRpb24odGhpcywgbmFtZSwgdmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnNldChvcHRpb25zKS5kb2NUeXBlKHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5lbGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudChuYW1lLCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmF0dCA9IGZ1bmN0aW9uKGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBkZWZhdWx0VmFsdWVUeXBlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmF0dExpc3QoZWxlbWVudE5hbWUsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVR5cGUsIGRlZmF1bHRWYWx1ZVR5cGUsIGRlZmF1bHRWYWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY1R5cGUucHJvdG90eXBlLmVudCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5wZW50ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnBFbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS5ub3QgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMubm90YXRpb24obmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2NUeXBlLnByb3RvdHlwZS51cCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMucm9vdCgpIHx8IHRoaXMuZG9jdW1lbnRPYmplY3Q7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxEb2NUeXBlO1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTERvY3VtZW50LCBYTUxOb2RlLCBYTUxTdHJpbmdXcml0ZXIsIFhNTFN0cmluZ2lmaWVyLCBpc1BsYWluT2JqZWN0LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgaXNQbGFpbk9iamVjdCA9IHJlcXVpcmUoJy4vVXRpbGl0eScpLmlzUGxhaW5PYmplY3Q7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIFhNTFN0cmluZ2lmaWVyID0gcmVxdWlyZSgnLi9YTUxTdHJpbmdpZmllcicpO1xuXG4gIFhNTFN0cmluZ1dyaXRlciA9IHJlcXVpcmUoJy4vWE1MU3RyaW5nV3JpdGVyJyk7XG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxEb2N1bWVudCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTERvY3VtZW50LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTERvY3VtZW50KG9wdGlvbnMpIHtcbiAgICAgIFhNTERvY3VtZW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIG51bGwpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIGlmICghb3B0aW9ucy53cml0ZXIpIHtcbiAgICAgICAgb3B0aW9ucy53cml0ZXIgPSBuZXcgWE1MU3RyaW5nV3JpdGVyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgdGhpcy5zdHJpbmdpZnkgPSBuZXcgWE1MU3RyaW5naWZpZXIob3B0aW9ucyk7XG4gICAgICB0aGlzLmlzRG9jdW1lbnQgPSB0cnVlO1xuICAgIH1cblxuICAgIFhNTERvY3VtZW50LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbih3cml0ZXIpIHtcbiAgICAgIHZhciB3cml0ZXJPcHRpb25zO1xuICAgICAgaWYgKCF3cml0ZXIpIHtcbiAgICAgICAgd3JpdGVyID0gdGhpcy5vcHRpb25zLndyaXRlcjtcbiAgICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh3cml0ZXIpKSB7XG4gICAgICAgIHdyaXRlck9wdGlvbnMgPSB3cml0ZXI7XG4gICAgICAgIHdyaXRlciA9IHRoaXMub3B0aW9ucy53cml0ZXIuc2V0KHdyaXRlck9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyaXRlci5kb2N1bWVudCh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuc2V0KG9wdGlvbnMpLmRvY3VtZW50KHRoaXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRG9jdW1lbnQ7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MQXR0cmlidXRlLCBYTUxDRGF0YSwgWE1MQ29tbWVudCwgWE1MRFREQXR0TGlzdCwgWE1MRFRERWxlbWVudCwgWE1MRFRERW50aXR5LCBYTUxEVEROb3RhdGlvbiwgWE1MRGVjbGFyYXRpb24sIFhNTERvY1R5cGUsIFhNTERvY3VtZW50Q0IsIFhNTEVsZW1lbnQsIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbiwgWE1MUmF3LCBYTUxTdHJpbmdXcml0ZXIsIFhNTFN0cmluZ2lmaWVyLCBYTUxUZXh0LCBpc0Z1bmN0aW9uLCBpc09iamVjdCwgaXNQbGFpbk9iamVjdCwgcmVmLFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICByZWYgPSByZXF1aXJlKCcuL1V0aWxpdHknKSwgaXNPYmplY3QgPSByZWYuaXNPYmplY3QsIGlzRnVuY3Rpb24gPSByZWYuaXNGdW5jdGlvbiwgaXNQbGFpbk9iamVjdCA9IHJlZi5pc1BsYWluT2JqZWN0O1xuXG4gIFhNTEVsZW1lbnQgPSByZXF1aXJlKCcuL1hNTEVsZW1lbnQnKTtcblxuICBYTUxDRGF0YSA9IHJlcXVpcmUoJy4vWE1MQ0RhdGEnKTtcblxuICBYTUxDb21tZW50ID0gcmVxdWlyZSgnLi9YTUxDb21tZW50Jyk7XG5cbiAgWE1MUmF3ID0gcmVxdWlyZSgnLi9YTUxSYXcnKTtcblxuICBYTUxUZXh0ID0gcmVxdWlyZSgnLi9YTUxUZXh0Jyk7XG5cbiAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gcmVxdWlyZSgnLi9YTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24nKTtcblxuICBYTUxEZWNsYXJhdGlvbiA9IHJlcXVpcmUoJy4vWE1MRGVjbGFyYXRpb24nKTtcblxuICBYTUxEb2NUeXBlID0gcmVxdWlyZSgnLi9YTUxEb2NUeXBlJyk7XG5cbiAgWE1MRFREQXR0TGlzdCA9IHJlcXVpcmUoJy4vWE1MRFREQXR0TGlzdCcpO1xuXG4gIFhNTERUREVudGl0eSA9IHJlcXVpcmUoJy4vWE1MRFRERW50aXR5Jyk7XG5cbiAgWE1MRFRERWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRFRERWxlbWVudCcpO1xuXG4gIFhNTERURE5vdGF0aW9uID0gcmVxdWlyZSgnLi9YTUxEVEROb3RhdGlvbicpO1xuXG4gIFhNTEF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4vWE1MQXR0cmlidXRlJyk7XG5cbiAgWE1MU3RyaW5naWZpZXIgPSByZXF1aXJlKCcuL1hNTFN0cmluZ2lmaWVyJyk7XG5cbiAgWE1MU3RyaW5nV3JpdGVyID0gcmVxdWlyZSgnLi9YTUxTdHJpbmdXcml0ZXInKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTERvY3VtZW50Q0IgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gWE1MRG9jdW1lbnRDQihvcHRpb25zLCBvbkRhdGEsIG9uRW5kKSB7XG4gICAgICB2YXIgd3JpdGVyT3B0aW9ucztcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICBpZiAoIW9wdGlvbnMud3JpdGVyKSB7XG4gICAgICAgIG9wdGlvbnMud3JpdGVyID0gbmV3IFhNTFN0cmluZ1dyaXRlcihvcHRpb25zKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChvcHRpb25zLndyaXRlcikpIHtcbiAgICAgICAgd3JpdGVyT3B0aW9ucyA9IG9wdGlvbnMud3JpdGVyO1xuICAgICAgICBvcHRpb25zLndyaXRlciA9IG5ldyBYTUxTdHJpbmdXcml0ZXIod3JpdGVyT3B0aW9ucyk7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgdGhpcy53cml0ZXIgPSBvcHRpb25zLndyaXRlcjtcbiAgICAgIHRoaXMuc3RyaW5naWZ5ID0gbmV3IFhNTFN0cmluZ2lmaWVyKG9wdGlvbnMpO1xuICAgICAgdGhpcy5vbkRhdGFDYWxsYmFjayA9IG9uRGF0YSB8fCBmdW5jdGlvbigpIHt9O1xuICAgICAgdGhpcy5vbkVuZENhbGxiYWNrID0gb25FbmQgfHwgZnVuY3Rpb24oKSB7fTtcbiAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBudWxsO1xuICAgICAgdGhpcy5jdXJyZW50TGV2ZWwgPSAtMTtcbiAgICAgIHRoaXMub3BlblRhZ3MgPSB7fTtcbiAgICAgIHRoaXMuZG9jdW1lbnRTdGFydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmRvY3VtZW50Q29tcGxldGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnJvb3QgPSBudWxsO1xuICAgIH1cblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLm5vZGUgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICB2YXIgcmVmMTtcbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBub2RlIG5hbWVcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yb290ICYmIHRoaXMuY3VycmVudExldmVsID09PSAtMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEb2N1bWVudCBjYW4gb25seSBoYXZlIG9uZSByb290IG5vZGVcIik7XG4gICAgICB9XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBuYW1lID0gbmFtZS52YWx1ZU9mKCk7XG4gICAgICBpZiAoYXR0cmlidXRlcyA9PSBudWxsKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzLnZhbHVlT2YoKTtcbiAgICAgIGlmICghaXNPYmplY3QoYXR0cmlidXRlcykpIHtcbiAgICAgICAgcmVmMSA9IFthdHRyaWJ1dGVzLCB0ZXh0XSwgdGV4dCA9IHJlZjFbMF0sIGF0dHJpYnV0ZXMgPSByZWYxWzFdO1xuICAgICAgfVxuICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG5ldyBYTUxFbGVtZW50KHRoaXMsIG5hbWUsIGF0dHJpYnV0ZXMpO1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50TGV2ZWwrKztcbiAgICAgIHRoaXMub3BlblRhZ3NbdGhpcy5jdXJyZW50TGV2ZWxdID0gdGhpcy5jdXJyZW50Tm9kZTtcbiAgICAgIGlmICh0ZXh0ICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy50ZXh0KHRleHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmVsZW1lbnQgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZSAmJiB0aGlzLmN1cnJlbnROb2RlIGluc3RhbmNlb2YgWE1MRG9jVHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kdGRFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5hdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGF0dE5hbWUsIGF0dFZhbHVlO1xuICAgICAgaWYgKCF0aGlzLmN1cnJlbnROb2RlIHx8IHRoaXMuY3VycmVudE5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXR0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbW1lZGlhdGVseSBhZnRlciBhbiBlbGUoKSBjYWxsIGluIGNhbGxiYWNrIG1vZGVcIik7XG4gICAgICB9XG4gICAgICBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnZhbHVlT2YoKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdChuYW1lKSkge1xuICAgICAgICBmb3IgKGF0dE5hbWUgaW4gbmFtZSkge1xuICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG5hbWUsIGF0dE5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgICBhdHRWYWx1ZSA9IG5hbWVbYXR0TmFtZV07XG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGUoYXR0TmFtZSwgYXR0VmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmFwcGx5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuc2tpcE51bGxBdHRyaWJ1dGVzIHx8ICh2YWx1ZSAhPSBudWxsKSkge1xuICAgICAgICAgIHRoaXMuY3VycmVudE5vZGUuYXR0cmlidXRlc1tuYW1lXSA9IG5ldyBYTUxBdHRyaWJ1dGUodGhpcywgbmFtZSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MVGV4dCh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci50ZXh0KG5vZGUsIHRoaXMuY3VycmVudExldmVsICsgMSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmNkYXRhID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxDRGF0YSh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5jZGF0YShub2RlLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5jb21tZW50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxDb21tZW50KHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmNvbW1lbnQobm9kZSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxSYXcodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIucmF3KG5vZGUsIHRoaXMuY3VycmVudExldmVsICsgMSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmluc3RydWN0aW9uID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgdmFyIGksIGluc1RhcmdldCwgaW5zVmFsdWUsIGxlbiwgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIGlmICh0YXJnZXQgIT0gbnVsbCkge1xuICAgICAgICB0YXJnZXQgPSB0YXJnZXQudmFsdWVPZigpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS52YWx1ZU9mKCk7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHRhcmdldC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGluc1RhcmdldCA9IHRhcmdldFtpXTtcbiAgICAgICAgICB0aGlzLmluc3RydWN0aW9uKGluc1RhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICBmb3IgKGluc1RhcmdldCBpbiB0YXJnZXQpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbCh0YXJnZXQsIGluc1RhcmdldCkpIGNvbnRpbnVlO1xuICAgICAgICAgIGluc1ZhbHVlID0gdGFyZ2V0W2luc1RhcmdldF07XG4gICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbihpbnNUYXJnZXQsIGluc1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5hcHBseSgpO1xuICAgICAgICB9XG4gICAgICAgIG5vZGUgPSBuZXcgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uKHRoaXMsIHRhcmdldCwgdmFsdWUpO1xuICAgICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24obm9kZSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuZGVjbGFyYXRpb24gPSBmdW5jdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBpZiAodGhpcy5kb2N1bWVudFN0YXJ0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZGVjbGFyYXRpb24oKSBtdXN0IGJlIHRoZSBmaXJzdCBub2RlXCIpO1xuICAgICAgfVxuICAgICAgbm9kZSA9IG5ldyBYTUxEZWNsYXJhdGlvbih0aGlzLCB2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kZWNsYXJhdGlvbihub2RlLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kb2N0eXBlID0gZnVuY3Rpb24ocm9vdCwgcHViSUQsIHN5c0lEKSB7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBpZiAocm9vdCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgcm9vdCBub2RlIG5hbWVcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yb290KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImR0ZCgpIG11c3QgY29tZSBiZWZvcmUgdGhlIHJvb3Qgbm9kZVwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBuZXcgWE1MRG9jVHlwZSh0aGlzLCBwdWJJRCwgc3lzSUQpO1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZS5yb290Tm9kZU5hbWUgPSByb290O1xuICAgICAgdGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50TGV2ZWwrKztcbiAgICAgIHRoaXMub3BlblRhZ3NbdGhpcy5jdXJyZW50TGV2ZWxdID0gdGhpcy5jdXJyZW50Tm9kZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kdGRFbGVtZW50ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxEVERFbGVtZW50KHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmR0ZEVsZW1lbnQobm9kZSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuYXR0TGlzdCA9IGZ1bmN0aW9uKGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBkZWZhdWx0VmFsdWVUeXBlLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbm9kZSA9IG5ldyBYTUxEVERBdHRMaXN0KHRoaXMsIGVsZW1lbnROYW1lLCBhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVUeXBlLCBkZWZhdWx0VmFsdWVUeXBlLCBkZWZhdWx0VmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuZHRkQXR0TGlzdChub2RlLCB0aGlzLmN1cnJlbnRMZXZlbCArIDEpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5lbnRpdHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTERUREVudGl0eSh0aGlzLCBmYWxzZSwgbmFtZSwgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuZHRkRW50aXR5KG5vZGUsIHRoaXMuY3VycmVudExldmVsICsgMSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLnBFbnRpdHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTERUREVudGl0eSh0aGlzLCB0cnVlLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGRFbnRpdHkobm9kZSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUubm90YXRpb24gPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTERURE5vdGF0aW9uKHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmR0ZE5vdGF0aW9uKG5vZGUsIHRoaXMuY3VycmVudExldmVsICsgMSkpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLnVwID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50TGV2ZWwgPCAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBkb2N1bWVudCBub2RlIGhhcyBubyBwYXJlbnRcIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZSkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgIHRoaXMuY2xvc2VOb2RlKHRoaXMuY3VycmVudE5vZGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub3Blbk5vZGUodGhpcy5jdXJyZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNsb3NlTm9kZSh0aGlzLm9wZW5UYWdzW3RoaXMuY3VycmVudExldmVsXSk7XG4gICAgICB9XG4gICAgICBkZWxldGUgdGhpcy5vcGVuVGFnc1t0aGlzLmN1cnJlbnRMZXZlbF07XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbC0tO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgd2hpbGUgKHRoaXMuY3VycmVudExldmVsID49IDApIHtcbiAgICAgICAgdGhpcy51cCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMub25FbmQoKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub3BlbkN1cnJlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUuY2hpbGRyZW4gPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5vcGVuTm9kZSh0aGlzLmN1cnJlbnROb2RlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub3Blbk5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICBpZiAoIW5vZGUuaXNPcGVuKSB7XG4gICAgICAgIGlmICghdGhpcy5yb290ICYmIHRoaXMuY3VycmVudExldmVsID09PSAwICYmIG5vZGUgaW5zdGFuY2VvZiBYTUxFbGVtZW50KSB7XG4gICAgICAgICAgdGhpcy5yb290ID0gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5vcGVuTm9kZShub2RlLCB0aGlzLmN1cnJlbnRMZXZlbCkpO1xuICAgICAgICByZXR1cm4gbm9kZS5pc09wZW4gPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5jbG9zZU5vZGUgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICBpZiAoIW5vZGUuaXNDbG9zZWQpIHtcbiAgICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuY2xvc2VOb2RlKG5vZGUsIHRoaXMuY3VycmVudExldmVsKSk7XG4gICAgICAgIHJldHVybiBub2RlLmlzQ2xvc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24oY2h1bmspIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRTdGFydGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLm9uRGF0YUNhbGxiYWNrKGNodW5rKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMub25FbmRDYWxsYmFjaygpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5lbGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUubm9kID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUudHh0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kYXQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2RhdGEodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5jb20gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tbWVudCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmlucyA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kZWMgPSBmdW5jdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVjbGFyYXRpb24odmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kdGQgPSBmdW5jdGlvbihyb290LCBwdWJJRCwgc3lzSUQpIHtcbiAgICAgIHJldHVybiB0aGlzLmRvY3R5cGUocm9vdCwgcHViSUQsIHN5c0lEKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuZSA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLm4gPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5kID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNkYXRhKHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuYyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21tZW50KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUuciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5yYXcodmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5pID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmF0dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUgJiYgdGhpcy5jdXJyZW50Tm9kZSBpbnN0YW5jZW9mIFhNTERvY1R5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0TGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFhNTERvY3VtZW50Q0IucHJvdG90eXBlLmEgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlICYmIHRoaXMuY3VycmVudE5vZGUgaW5zdGFuY2VvZiBYTUxEb2NUeXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dExpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxEb2N1bWVudENCLnByb3RvdHlwZS5lbnQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZW50aXR5KG5hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUucGVudCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5wRW50aXR5KG5hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRG9jdW1lbnRDQi5wcm90b3R5cGUubm90ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vdGF0aW9uKG5hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFhNTERvY3VtZW50Q0I7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxBdHRyaWJ1dGUsIFhNTEVsZW1lbnQsIFhNTE5vZGUsIGlzRnVuY3Rpb24sIGlzT2JqZWN0LCByZWYsXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICByZWYgPSByZXF1aXJlKCcuL1V0aWxpdHknKSwgaXNPYmplY3QgPSByZWYuaXNPYmplY3QsIGlzRnVuY3Rpb24gPSByZWYuaXNGdW5jdGlvbjtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgWE1MQXR0cmlidXRlID0gcmVxdWlyZSgnLi9YTUxBdHRyaWJ1dGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTEVsZW1lbnQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChYTUxFbGVtZW50LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTEVsZW1lbnQocGFyZW50LCBuYW1lLCBhdHRyaWJ1dGVzKSB7XG4gICAgICBYTUxFbGVtZW50Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIHBhcmVudCk7XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgZWxlbWVudCBuYW1lXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5uYW1lID0gdGhpcy5zdHJpbmdpZnkuZWxlTmFtZShuYW1lKTtcbiAgICAgIHRoaXMuYXR0cmlidXRlcyA9IHt9O1xuICAgICAgaWYgKGF0dHJpYnV0ZXMgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZShhdHRyaWJ1dGVzKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXJlbnQuaXNEb2N1bWVudCkge1xuICAgICAgICB0aGlzLmlzUm9vdCA9IHRydWU7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRPYmplY3QgPSBwYXJlbnQ7XG4gICAgICAgIHBhcmVudC5yb290T2JqZWN0ID0gdGhpcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGF0dCwgYXR0TmFtZSwgY2xvbmVkU2VsZiwgcmVmMTtcbiAgICAgIGNsb25lZFNlbGYgPSBPYmplY3QuY3JlYXRlKHRoaXMpO1xuICAgICAgaWYgKGNsb25lZFNlbGYuaXNSb290KSB7XG4gICAgICAgIGNsb25lZFNlbGYuZG9jdW1lbnRPYmplY3QgPSBudWxsO1xuICAgICAgfVxuICAgICAgY2xvbmVkU2VsZi5hdHRyaWJ1dGVzID0ge307XG4gICAgICByZWYxID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgZm9yIChhdHROYW1lIGluIHJlZjEpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmMSwgYXR0TmFtZSkpIGNvbnRpbnVlO1xuICAgICAgICBhdHQgPSByZWYxW2F0dE5hbWVdO1xuICAgICAgICBjbG9uZWRTZWxmLmF0dHJpYnV0ZXNbYXR0TmFtZV0gPSBhdHQuY2xvbmUoKTtcbiAgICAgIH1cbiAgICAgIGNsb25lZFNlbGYuY2hpbGRyZW4gPSBbXTtcbiAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkge1xuICAgICAgICB2YXIgY2xvbmVkQ2hpbGQ7XG4gICAgICAgIGNsb25lZENoaWxkID0gY2hpbGQuY2xvbmUoKTtcbiAgICAgICAgY2xvbmVkQ2hpbGQucGFyZW50ID0gY2xvbmVkU2VsZjtcbiAgICAgICAgcmV0dXJuIGNsb25lZFNlbGYuY2hpbGRyZW4ucHVzaChjbG9uZWRDaGlsZCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjbG9uZWRTZWxmO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5hdHRyaWJ1dGUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIGF0dE5hbWUsIGF0dFZhbHVlO1xuICAgICAgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gbmFtZS52YWx1ZU9mKCk7XG4gICAgICB9XG4gICAgICBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgICAgZm9yIChhdHROYW1lIGluIG5hbWUpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChuYW1lLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgICAgYXR0VmFsdWUgPSBuYW1lW2F0dE5hbWVdO1xuICAgICAgICAgIHRoaXMuYXR0cmlidXRlKGF0dE5hbWUsIGF0dFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5hcHBseSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnNraXBOdWxsQXR0cmlidXRlcyB8fCAodmFsdWUgIT0gbnVsbCkpIHtcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXNbbmFtZV0gPSBuZXcgWE1MQXR0cmlidXRlKHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBhdHROYW1lLCBpLCBsZW47XG4gICAgICBpZiAobmFtZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICB9XG4gICAgICBuYW1lID0gbmFtZS52YWx1ZU9mKCk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lKSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBuYW1lLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgYXR0TmFtZSA9IG5hbWVbaV07XG4gICAgICAgICAgZGVsZXRlIHRoaXMuYXR0cmlidXRlc1thdHROYW1lXTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnNldChvcHRpb25zKS5lbGVtZW50KHRoaXMpO1xuICAgIH07XG5cbiAgICBYTUxFbGVtZW50LnByb3RvdHlwZS5hdHQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MRWxlbWVudC5wcm90b3R5cGUuYSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MRWxlbWVudDtcblxuICB9KShYTUxOb2RlKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxDRGF0YSwgWE1MQ29tbWVudCwgWE1MRGVjbGFyYXRpb24sIFhNTERvY1R5cGUsIFhNTEVsZW1lbnQsIFhNTE5vZGUsIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbiwgWE1MUmF3LCBYTUxUZXh0LCBpc0VtcHR5LCBpc0Z1bmN0aW9uLCBpc09iamVjdCwgcmVmLFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICByZWYgPSByZXF1aXJlKCcuL1V0aWxpdHknKSwgaXNPYmplY3QgPSByZWYuaXNPYmplY3QsIGlzRnVuY3Rpb24gPSByZWYuaXNGdW5jdGlvbiwgaXNFbXB0eSA9IHJlZi5pc0VtcHR5O1xuXG4gIFhNTEVsZW1lbnQgPSBudWxsO1xuXG4gIFhNTENEYXRhID0gbnVsbDtcblxuICBYTUxDb21tZW50ID0gbnVsbDtcblxuICBYTUxEZWNsYXJhdGlvbiA9IG51bGw7XG5cbiAgWE1MRG9jVHlwZSA9IG51bGw7XG5cbiAgWE1MUmF3ID0gbnVsbDtcblxuICBYTUxUZXh0ID0gbnVsbDtcblxuICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSBudWxsO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MTm9kZSA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBYTUxOb2RlKHBhcmVudCkge1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gdGhpcy5wYXJlbnQub3B0aW9ucztcbiAgICAgICAgdGhpcy5zdHJpbmdpZnkgPSB0aGlzLnBhcmVudC5zdHJpbmdpZnk7XG4gICAgICB9XG4gICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICBpZiAoIVhNTEVsZW1lbnQpIHtcbiAgICAgICAgWE1MRWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRWxlbWVudCcpO1xuICAgICAgICBYTUxDRGF0YSA9IHJlcXVpcmUoJy4vWE1MQ0RhdGEnKTtcbiAgICAgICAgWE1MQ29tbWVudCA9IHJlcXVpcmUoJy4vWE1MQ29tbWVudCcpO1xuICAgICAgICBYTUxEZWNsYXJhdGlvbiA9IHJlcXVpcmUoJy4vWE1MRGVjbGFyYXRpb24nKTtcbiAgICAgICAgWE1MRG9jVHlwZSA9IHJlcXVpcmUoJy4vWE1MRG9jVHlwZScpO1xuICAgICAgICBYTUxSYXcgPSByZXF1aXJlKCcuL1hNTFJhdycpO1xuICAgICAgICBYTUxUZXh0ID0gcmVxdWlyZSgnLi9YTUxUZXh0Jyk7XG4gICAgICAgIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbiA9IHJlcXVpcmUoJy4vWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZWxlbWVudCA9IGZ1bmN0aW9uKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHZhciBjaGlsZE5vZGUsIGl0ZW0sIGosIGssIGtleSwgbGFzdENoaWxkLCBsZW4sIGxlbjEsIHJlZjEsIHZhbDtcbiAgICAgIGxhc3RDaGlsZCA9IG51bGw7XG4gICAgICBpZiAoYXR0cmlidXRlcyA9PSBudWxsKSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzLnZhbHVlT2YoKTtcbiAgICAgIGlmICghaXNPYmplY3QoYXR0cmlidXRlcykpIHtcbiAgICAgICAgcmVmMSA9IFthdHRyaWJ1dGVzLCB0ZXh0XSwgdGV4dCA9IHJlZjFbMF0sIGF0dHJpYnV0ZXMgPSByZWYxWzFdO1xuICAgICAgfVxuICAgICAgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gbmFtZS52YWx1ZU9mKCk7XG4gICAgICB9XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lKSkge1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSBuYW1lLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgaXRlbSA9IG5hbWVbal07XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KGl0ZW0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KG5hbWUuYXBwbHkoKSk7XG4gICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KG5hbWUpKSB7XG4gICAgICAgIGZvciAoa2V5IGluIG5hbWUpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChuYW1lLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICB2YWwgPSBuYW1lW2tleV07XG4gICAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsKSkge1xuICAgICAgICAgICAgdmFsID0gdmFsLmFwcGx5KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgoaXNPYmplY3QodmFsKSkgJiYgKGlzRW1wdHkodmFsKSkpIHtcbiAgICAgICAgICAgIHZhbCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydEF0dEtleSAmJiBrZXkuaW5kZXhPZih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0QXR0S2V5KSA9PT0gMCkge1xuICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5hdHRyaWJ1dGUoa2V5LnN1YnN0cih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0QXR0S2V5Lmxlbmd0aCksIHZhbCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLnNlcGFyYXRlQXJyYXlJdGVtcyAmJiBBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgICAgIGZvciAoayA9IDAsIGxlbjEgPSB2YWwubGVuZ3RoOyBrIDwgbGVuMTsgaysrKSB7XG4gICAgICAgICAgICAgIGl0ZW0gPSB2YWxba107XG4gICAgICAgICAgICAgIGNoaWxkTm9kZSA9IHt9O1xuICAgICAgICAgICAgICBjaGlsZE5vZGVba2V5XSA9IGl0ZW07XG4gICAgICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZWxlbWVudChjaGlsZE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkge1xuICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KGtleSk7XG4gICAgICAgICAgICBsYXN0Q2hpbGQuZWxlbWVudCh2YWwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmVsZW1lbnQoa2V5LCB2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0VGV4dEtleSAmJiBuYW1lLmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydFRleHRLZXkpID09PSAwKSB7XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy50ZXh0KHRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0Q0RhdGFLZXkgJiYgbmFtZS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRDRGF0YUtleSkgPT09IDApIHtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmNkYXRhKHRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0Q29tbWVudEtleSAmJiBuYW1lLmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydENvbW1lbnRLZXkpID09PSAwKSB7XG4gICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5jb21tZW50KHRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UmF3S2V5ICYmIG5hbWUuaW5kZXhPZih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UmF3S2V5KSA9PT0gMCkge1xuICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMucmF3KHRleHQpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UElLZXkgJiYgbmFtZS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRQSUtleSkgPT09IDApIHtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmluc3RydWN0aW9uKG5hbWUuc3Vic3RyKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRQSUtleS5sZW5ndGgpLCB0ZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLm5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsYXN0Q2hpbGQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgY3JlYXRlIGFueSBlbGVtZW50cyB3aXRoOiBcIiArIG5hbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxhc3RDaGlsZDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBpbnNlcnQgZWxlbWVudHMgYXQgcm9vdCBsZXZlbFwiKTtcbiAgICAgIH1cbiAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgcmVtb3ZlZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpKTtcbiAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCByZW1vdmVkKTtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaW5zZXJ0QWZ0ZXIgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICB2YXIgY2hpbGQsIGksIHJlbW92ZWQ7XG4gICAgICBpZiAodGhpcy5pc1Jvb3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGluc2VydCBlbGVtZW50cyBhdCByb290IGxldmVsXCIpO1xuICAgICAgfVxuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkgKyAxKTtcbiAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCByZW1vdmVkKTtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwgcmVmMTtcbiAgICAgIGlmICh0aGlzLmlzUm9vdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcmVtb3ZlIHRoZSByb290IGVsZW1lbnRcIik7XG4gICAgICB9XG4gICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgIFtdLnNwbGljZS5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgW2ksIGkgLSBpICsgMV0uY29uY2F0KHJlZjEgPSBbXSkpLCByZWYxO1xuICAgICAgcmV0dXJuIHRoaXMucGFyZW50O1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5ub2RlID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgdmFyIGNoaWxkLCByZWYxO1xuICAgICAgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gbmFtZS52YWx1ZU9mKCk7XG4gICAgICB9XG4gICAgICBhdHRyaWJ1dGVzIHx8IChhdHRyaWJ1dGVzID0ge30pO1xuICAgICAgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXMudmFsdWVPZigpO1xuICAgICAgaWYgKCFpc09iamVjdChhdHRyaWJ1dGVzKSkge1xuICAgICAgICByZWYxID0gW2F0dHJpYnV0ZXMsIHRleHRdLCB0ZXh0ID0gcmVmMVswXSwgYXR0cmlidXRlcyA9IHJlZjFbMV07XG4gICAgICB9XG4gICAgICBjaGlsZCA9IG5ldyBYTUxFbGVtZW50KHRoaXMsIG5hbWUsIGF0dHJpYnV0ZXMpO1xuICAgICAgaWYgKHRleHQgIT0gbnVsbCkge1xuICAgICAgICBjaGlsZC50ZXh0KHRleHQpO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxUZXh0KHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuY2RhdGEgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkO1xuICAgICAgY2hpbGQgPSBuZXcgWE1MQ0RhdGEodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5jb21tZW50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZDtcbiAgICAgIGNoaWxkID0gbmV3IFhNTENvbW1lbnQodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5jb21tZW50QmVmb3JlID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgcmVtb3ZlZDtcbiAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgcmVtb3ZlZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpKTtcbiAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuY29tbWVudCh2YWx1ZSk7XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuY29tbWVudEFmdGVyID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgcmVtb3ZlZDtcbiAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgcmVtb3ZlZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpICsgMSk7XG4gICAgICBjaGlsZCA9IHRoaXMucGFyZW50LmNvbW1lbnQodmFsdWUpO1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnJhdyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgY2hpbGQ7XG4gICAgICBjaGlsZCA9IG5ldyBYTUxSYXcodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHZhciBpbnNUYXJnZXQsIGluc1ZhbHVlLCBpbnN0cnVjdGlvbiwgaiwgbGVuO1xuICAgICAgaWYgKHRhcmdldCAhPSBudWxsKSB7XG4gICAgICAgIHRhcmdldCA9IHRhcmdldC52YWx1ZU9mKCk7XG4gICAgICB9XG4gICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnZhbHVlT2YoKTtcbiAgICAgIH1cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gdGFyZ2V0Lmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgaW5zVGFyZ2V0ID0gdGFyZ2V0W2pdO1xuICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24oaW5zVGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgIGZvciAoaW5zVGFyZ2V0IGluIHRhcmdldCkge1xuICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHRhcmdldCwgaW5zVGFyZ2V0KSkgY29udGludWU7XG4gICAgICAgICAgaW5zVmFsdWUgPSB0YXJnZXRbaW5zVGFyZ2V0XTtcbiAgICAgICAgICB0aGlzLmluc3RydWN0aW9uKGluc1RhcmdldCwgaW5zVmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmFwcGx5KCk7XG4gICAgICAgIH1cbiAgICAgICAgaW5zdHJ1Y3Rpb24gPSBuZXcgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uKHRoaXMsIHRhcmdldCwgdmFsdWUpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goaW5zdHJ1Y3Rpb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmluc3RydWN0aW9uQmVmb3JlID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkpO1xuICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5pbnN0cnVjdGlvbih0YXJnZXQsIHZhbHVlKTtcbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCByZW1vdmVkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbnN0cnVjdGlvbkFmdGVyID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkgKyAxKTtcbiAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSk7XG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZGVjbGFyYXRpb24gPSBmdW5jdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgdmFyIGRvYywgeG1sZGVjO1xuICAgICAgZG9jID0gdGhpcy5kb2N1bWVudCgpO1xuICAgICAgeG1sZGVjID0gbmV3IFhNTERlY2xhcmF0aW9uKGRvYywgdmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpO1xuICAgICAgaWYgKGRvYy5jaGlsZHJlblswXSBpbnN0YW5jZW9mIFhNTERlY2xhcmF0aW9uKSB7XG4gICAgICAgIGRvYy5jaGlsZHJlblswXSA9IHhtbGRlYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvYy5jaGlsZHJlbi51bnNoaWZ0KHhtbGRlYyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9jLnJvb3QoKSB8fCBkb2M7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmRvY3R5cGUgPSBmdW5jdGlvbihwdWJJRCwgc3lzSUQpIHtcbiAgICAgIHZhciBjaGlsZCwgZG9jLCBkb2N0eXBlLCBpLCBqLCBrLCBsZW4sIGxlbjEsIHJlZjEsIHJlZjI7XG4gICAgICBkb2MgPSB0aGlzLmRvY3VtZW50KCk7XG4gICAgICBkb2N0eXBlID0gbmV3IFhNTERvY1R5cGUoZG9jLCBwdWJJRCwgc3lzSUQpO1xuICAgICAgcmVmMSA9IGRvYy5jaGlsZHJlbjtcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaiA8IGxlbjsgaSA9ICsraikge1xuICAgICAgICBjaGlsZCA9IHJlZjFbaV07XG4gICAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFhNTERvY1R5cGUpIHtcbiAgICAgICAgICBkb2MuY2hpbGRyZW5baV0gPSBkb2N0eXBlO1xuICAgICAgICAgIHJldHVybiBkb2N0eXBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWYyID0gZG9jLmNoaWxkcmVuO1xuICAgICAgZm9yIChpID0gayA9IDAsIGxlbjEgPSByZWYyLmxlbmd0aDsgayA8IGxlbjE7IGkgPSArK2spIHtcbiAgICAgICAgY2hpbGQgPSByZWYyW2ldO1xuICAgICAgICBpZiAoY2hpbGQuaXNSb290KSB7XG4gICAgICAgICAgZG9jLmNoaWxkcmVuLnNwbGljZShpLCAwLCBkb2N0eXBlKTtcbiAgICAgICAgICByZXR1cm4gZG9jdHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZG9jLmNoaWxkcmVuLnB1c2goZG9jdHlwZSk7XG4gICAgICByZXR1cm4gZG9jdHlwZTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUudXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmlzUm9vdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcm9vdCBub2RlIGhhcyBubyBwYXJlbnQuIFVzZSBkb2MoKSBpZiB5b3UgbmVlZCB0byBnZXQgdGhlIGRvY3VtZW50IG9iamVjdC5cIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnJvb3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub2RlO1xuICAgICAgbm9kZSA9IHRoaXM7XG4gICAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBpZiAobm9kZS5pc0RvY3VtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIG5vZGUucm9vdE9iamVjdDtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLmlzUm9vdCkge1xuICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5kb2N1bWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICBub2RlID0gdGhpcztcbiAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgIGlmIChub2RlLmlzRG9jdW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlID0gbm9kZS5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQoKS5lbmQob3B0aW9ucyk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnByZXYgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICBpZiAoaSA8IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSBhdCB0aGUgZmlyc3Qgbm9kZVwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5jaGlsZHJlbltpIC0gMV07XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpO1xuICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICBpZiAoaSA9PT0gLTEgfHwgaSA9PT0gdGhpcy5wYXJlbnQuY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IGF0IHRoZSBsYXN0IG5vZGVcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQuY2hpbGRyZW5baSArIDFdO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbXBvcnREb2N1bWVudCA9IGZ1bmN0aW9uKGRvYykge1xuICAgICAgdmFyIGNsb25lZFJvb3Q7XG4gICAgICBjbG9uZWRSb290ID0gZG9jLnJvb3QoKS5jbG9uZSgpO1xuICAgICAgY2xvbmVkUm9vdC5wYXJlbnQgPSB0aGlzO1xuICAgICAgY2xvbmVkUm9vdC5pc1Jvb3QgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjbG9uZWRSb290KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5lbGUgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50KG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5ub2QgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS50eHQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmRhdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jZGF0YSh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmNvbSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21tZW50KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaW5zID0gZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmRvYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQoKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZGVjID0gZnVuY3Rpb24odmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpIHtcbiAgICAgIHJldHVybiB0aGlzLmRlY2xhcmF0aW9uKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZHRkID0gZnVuY3Rpb24ocHViSUQsIHN5c0lEKSB7XG4gICAgICByZXR1cm4gdGhpcy5kb2N0eXBlKHB1YklELCBzeXNJRCk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmUgPSBmdW5jdGlvbihuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50KG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5uID0gZnVuY3Rpb24obmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jZGF0YSh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLmMgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29tbWVudCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIFhNTE5vZGUucHJvdG90eXBlLnIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMucmF3KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgWE1MTm9kZS5wcm90b3R5cGUuaSA9IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS51ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy51cCgpO1xuICAgIH07XG5cbiAgICBYTUxOb2RlLnByb3RvdHlwZS5pbXBvcnRYTUxCdWlsZGVyID0gZnVuY3Rpb24oZG9jKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbXBvcnREb2N1bWVudChkb2MpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MTm9kZTtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTE5vZGUsIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbixcbiAgICBleHRlbmQgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KSB7IGZvciAodmFyIGtleSBpbiBwYXJlbnQpIHsgaWYgKGhhc1Byb3AuY2FsbChwYXJlbnQsIGtleSkpIGNoaWxkW2tleV0gPSBwYXJlbnRba2V5XTsgfSBmdW5jdGlvbiBjdG9yKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH0gY3Rvci5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlOyBjaGlsZC5wcm90b3R5cGUgPSBuZXcgY3RvcigpOyBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlOyByZXR1cm4gY2hpbGQ7IH0sXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIFhNTE5vZGUgPSByZXF1aXJlKCcuL1hNTE5vZGUnKTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbiA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbiwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24ocGFyZW50LCB0YXJnZXQsIHZhbHVlKSB7XG4gICAgICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGluc3RydWN0aW9uIHRhcmdldFwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5zdHJpbmdpZnkuaW5zVGFyZ2V0KHRhcmdldCk7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5Lmluc1ZhbHVlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnNldChvcHRpb25zKS5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24odGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb247XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MTm9kZSwgWE1MUmF3LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MUmF3ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MUmF3LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTFJhdyhwYXJlbnQsIHRleHQpIHtcbiAgICAgIFhNTFJhdy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBwYXJlbnQpO1xuICAgICAgaWYgKHRleHQgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJhdyB0ZXh0XCIpO1xuICAgICAgfVxuICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc3RyaW5naWZ5LnJhdyh0ZXh0KTtcbiAgICB9XG5cbiAgICBYTUxSYXcucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgWE1MUmF3LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLnNldChvcHRpb25zKS5yYXcodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxSYXc7XG5cbiAgfSkoWE1MTm9kZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MQ0RhdGEsIFhNTENvbW1lbnQsIFhNTERUREF0dExpc3QsIFhNTERUREVsZW1lbnQsIFhNTERUREVudGl0eSwgWE1MRFRETm90YXRpb24sIFhNTERlY2xhcmF0aW9uLCBYTUxEb2NUeXBlLCBYTUxFbGVtZW50LCBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sIFhNTFJhdywgWE1MU3RyZWFtV3JpdGVyLCBYTUxUZXh0LCBYTUxXcml0ZXJCYXNlLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgWE1MRGVjbGFyYXRpb24gPSByZXF1aXJlKCcuL1hNTERlY2xhcmF0aW9uJyk7XG5cbiAgWE1MRG9jVHlwZSA9IHJlcXVpcmUoJy4vWE1MRG9jVHlwZScpO1xuXG4gIFhNTENEYXRhID0gcmVxdWlyZSgnLi9YTUxDRGF0YScpO1xuXG4gIFhNTENvbW1lbnQgPSByZXF1aXJlKCcuL1hNTENvbW1lbnQnKTtcblxuICBYTUxFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxFbGVtZW50Jyk7XG5cbiAgWE1MUmF3ID0gcmVxdWlyZSgnLi9YTUxSYXcnKTtcblxuICBYTUxUZXh0ID0gcmVxdWlyZSgnLi9YTUxUZXh0Jyk7XG5cbiAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gcmVxdWlyZSgnLi9YTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24nKTtcblxuICBYTUxEVERBdHRMaXN0ID0gcmVxdWlyZSgnLi9YTUxEVERBdHRMaXN0Jyk7XG5cbiAgWE1MRFRERWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRFRERWxlbWVudCcpO1xuXG4gIFhNTERUREVudGl0eSA9IHJlcXVpcmUoJy4vWE1MRFRERW50aXR5Jyk7XG5cbiAgWE1MRFRETm90YXRpb24gPSByZXF1aXJlKCcuL1hNTERURE5vdGF0aW9uJyk7XG5cbiAgWE1MV3JpdGVyQmFzZSA9IHJlcXVpcmUoJy4vWE1MV3JpdGVyQmFzZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MU3RyZWFtV3JpdGVyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MU3RyZWFtV3JpdGVyLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTFN0cmVhbVdyaXRlcihzdHJlYW0sIG9wdGlvbnMpIHtcbiAgICAgIFhNTFN0cmVhbVdyaXRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICAgIHRoaXMuc3RyZWFtID0gc3RyZWFtO1xuICAgIH1cblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuZG9jdW1lbnQgPSBmdW5jdGlvbihkb2MpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgaiwgbGVuLCBsZW4xLCByZWYsIHJlZjEsIHJlc3VsdHM7XG4gICAgICByZWYgPSBkb2MuY2hpbGRyZW47XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY2hpbGQgPSByZWZbaV07XG4gICAgICAgIGNoaWxkLmlzTGFzdFJvb3ROb2RlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBkb2MuY2hpbGRyZW5bZG9jLmNoaWxkcmVuLmxlbmd0aCAtIDFdLmlzTGFzdFJvb3ROb2RlID0gdHJ1ZTtcbiAgICAgIHJlZjEgPSBkb2MuY2hpbGRyZW47XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgY2hpbGQgPSByZWYxW2pdO1xuICAgICAgICBzd2l0Y2ggKGZhbHNlKSB7XG4gICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MRGVjbGFyYXRpb24pOlxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuZGVjbGFyYXRpb24oY2hpbGQpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTERvY1R5cGUpOlxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuZG9jVHlwZShjaGlsZCkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MQ29tbWVudCk6XG4gICAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5jb21tZW50KGNoaWxkKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICEoY2hpbGQgaW5zdGFuY2VvZiBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24pOlxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMucHJvY2Vzc2luZ0luc3RydWN0aW9uKGNoaWxkKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuZWxlbWVudChjaGlsZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5hdHRyaWJ1dGUgPSBmdW5jdGlvbihhdHQpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZSgnICcgKyBhdHQubmFtZSArICc9XCInICsgYXR0LnZhbHVlICsgJ1wiJyk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuY2RhdGEgPSBmdW5jdGlvbihub2RlLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2UobGV2ZWwpICsgJzwhW0NEQVRBWycgKyBub2RlLnRleHQgKyAnXV0+JyArIHRoaXMuZW5kbGluZShub2RlKSk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuY29tbWVudCA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5zcGFjZShsZXZlbCkgKyAnPCEtLSAnICsgbm9kZS50ZXh0ICsgJyAtLT4nICsgdGhpcy5lbmRsaW5lKG5vZGUpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5kZWNsYXJhdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLnNwYWNlKGxldmVsKSk7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSgnPD94bWwgdmVyc2lvbj1cIicgKyBub2RlLnZlcnNpb24gKyAnXCInKTtcbiAgICAgIGlmIChub2RlLmVuY29kaW5nICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJyBlbmNvZGluZz1cIicgKyBub2RlLmVuY29kaW5nICsgJ1wiJyk7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5zdGFuZGFsb25lICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJyBzdGFuZGFsb25lPVwiJyArIG5vZGUuc3RhbmRhbG9uZSArICdcIicpO1xuICAgICAgfVxuICAgICAgdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5zcGFjZWJlZm9yZXNsYXNoICsgJz8+Jyk7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5lbmRsaW5lKG5vZGUpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5kb2NUeXBlID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCByZWY7XG4gICAgICBsZXZlbCB8fCAobGV2ZWwgPSAwKTtcbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2UobGV2ZWwpKTtcbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCc8IURPQ1RZUEUgJyArIG5vZGUucm9vdCgpLm5hbWUpO1xuICAgICAgaWYgKG5vZGUucHViSUQgJiYgbm9kZS5zeXNJRCkge1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnIFBVQkxJQyBcIicgKyBub2RlLnB1YklEICsgJ1wiIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInKTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5zeXNJRCkge1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnIFNZU1RFTSBcIicgKyBub2RlLnN5c0lEICsgJ1wiJyk7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCcgWycpO1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLmVuZGxpbmUobm9kZSkpO1xuICAgICAgICByZWYgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZltpXTtcbiAgICAgICAgICBzd2l0Y2ggKGZhbHNlKSB7XG4gICAgICAgICAgICBjYXNlICEoY2hpbGQgaW5zdGFuY2VvZiBYTUxEVERBdHRMaXN0KTpcbiAgICAgICAgICAgICAgdGhpcy5kdGRBdHRMaXN0KGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTERUREVsZW1lbnQpOlxuICAgICAgICAgICAgICB0aGlzLmR0ZEVsZW1lbnQoY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MRFRERW50aXR5KTpcbiAgICAgICAgICAgICAgdGhpcy5kdGRFbnRpdHkoY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MRFRETm90YXRpb24pOlxuICAgICAgICAgICAgICB0aGlzLmR0ZE5vdGF0aW9uKGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTENEYXRhKTpcbiAgICAgICAgICAgICAgdGhpcy5jZGF0YShjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICEoY2hpbGQgaW5zdGFuY2VvZiBYTUxDb21tZW50KTpcbiAgICAgICAgICAgICAgdGhpcy5jb21tZW50KGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbik6XG4gICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ0luc3RydWN0aW9uKGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gRFREIG5vZGUgdHlwZTogXCIgKyBjaGlsZC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJ10nKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2ViZWZvcmVzbGFzaCArICc+Jyk7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5lbmRsaW5lKG5vZGUpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5lbGVtZW50ID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHZhciBhdHQsIGNoaWxkLCBpLCBsZW4sIG5hbWUsIHJlZiwgcmVmMSwgc3BhY2U7XG4gICAgICBsZXZlbCB8fCAobGV2ZWwgPSAwKTtcbiAgICAgIHNwYWNlID0gdGhpcy5zcGFjZShsZXZlbCk7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZShzcGFjZSArICc8JyArIG5vZGUubmFtZSk7XG4gICAgICByZWYgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKG5hbWUgaW4gcmVmKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwgbmFtZSkpIGNvbnRpbnVlO1xuICAgICAgICBhdHQgPSByZWZbbmFtZV07XG4gICAgICAgIHRoaXMuYXR0cmlidXRlKGF0dCk7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDAgfHwgbm9kZS5jaGlsZHJlbi5ldmVyeShmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBlLnZhbHVlID09PSAnJztcbiAgICAgIH0pKSB7XG4gICAgICAgIGlmICh0aGlzLmFsbG93RW1wdHkpIHtcbiAgICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnPjwvJyArIG5vZGUubmFtZSArICc+Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5zcGFjZWJlZm9yZXNsYXNoICsgJy8+Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV0dHkgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgKG5vZGUuY2hpbGRyZW5bMF0udmFsdWUgIT0gbnVsbCkpIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJz4nKTtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUobm9kZS5jaGlsZHJlblswXS52YWx1ZSk7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCc8LycgKyBub2RlLm5hbWUgKyAnPicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJz4nICsgdGhpcy5uZXdsaW5lKTtcbiAgICAgICAgcmVmMSA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZjFbaV07XG4gICAgICAgICAgc3dpdGNoIChmYWxzZSkge1xuICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MQ0RhdGEpOlxuICAgICAgICAgICAgICB0aGlzLmNkYXRhKGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTENvbW1lbnQpOlxuICAgICAgICAgICAgICB0aGlzLmNvbW1lbnQoY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MRWxlbWVudCk6XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudChjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICEoY2hpbGQgaW5zdGFuY2VvZiBYTUxSYXcpOlxuICAgICAgICAgICAgICB0aGlzLnJhdyhjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICEoY2hpbGQgaW5zdGFuY2VvZiBYTUxUZXh0KTpcbiAgICAgICAgICAgICAgdGhpcy50ZXh0KGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbik6XG4gICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ0luc3RydWN0aW9uKGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gWE1MIG5vZGUgdHlwZTogXCIgKyBjaGlsZC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoc3BhY2UgKyAnPC8nICsgbm9kZS5uYW1lICsgJz4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLmVuZGxpbmUobm9kZSkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLnByb2Nlc3NpbmdJbnN0cnVjdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLnNwYWNlKGxldmVsKSArICc8PycgKyBub2RlLnRhcmdldCk7XG4gICAgICBpZiAobm9kZS52YWx1ZSkge1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnICcgKyBub2RlLnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLnNwYWNlYmVmb3Jlc2xhc2ggKyAnPz4nICsgdGhpcy5lbmRsaW5lKG5vZGUpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5yYXcgPSBmdW5jdGlvbihub2RlLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2UobGV2ZWwpICsgbm9kZS52YWx1ZSArIHRoaXMuZW5kbGluZShub2RlKSk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5zcGFjZShsZXZlbCkgKyBub2RlLnZhbHVlICsgdGhpcy5lbmRsaW5lKG5vZGUpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5kdGRBdHRMaXN0ID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2UobGV2ZWwpICsgJzwhQVRUTElTVCAnICsgbm9kZS5lbGVtZW50TmFtZSArICcgJyArIG5vZGUuYXR0cmlidXRlTmFtZSArICcgJyArIG5vZGUuYXR0cmlidXRlVHlwZSk7XG4gICAgICBpZiAobm9kZS5kZWZhdWx0VmFsdWVUeXBlICE9PSAnI0RFRkFVTFQnKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCcgJyArIG5vZGUuZGVmYXVsdFZhbHVlVHlwZSk7XG4gICAgICB9XG4gICAgICBpZiAobm9kZS5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJyBcIicgKyBub2RlLmRlZmF1bHRWYWx1ZSArICdcIicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2ViZWZvcmVzbGFzaCArICc+JyArIHRoaXMuZW5kbGluZShub2RlKSk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuZHRkRWxlbWVudCA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLnNwYWNlKGxldmVsKSArICc8IUVMRU1FTlQgJyArIG5vZGUubmFtZSArICcgJyArIG5vZGUudmFsdWUpO1xuICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2ViZWZvcmVzbGFzaCArICc+JyArIHRoaXMuZW5kbGluZShub2RlKSk7XG4gICAgfTtcblxuICAgIFhNTFN0cmVhbVdyaXRlci5wcm90b3R5cGUuZHRkRW50aXR5ID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2UobGV2ZWwpICsgJzwhRU5USVRZJyk7XG4gICAgICBpZiAobm9kZS5wZSkge1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnICUnKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCcgJyArIG5vZGUubmFtZSk7XG4gICAgICBpZiAobm9kZS52YWx1ZSkge1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnIFwiJyArIG5vZGUudmFsdWUgKyAnXCInKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChub2RlLnB1YklEICYmIG5vZGUuc3lzSUQpIHtcbiAgICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnIFBVQkxJQyBcIicgKyBub2RlLnB1YklEICsgJ1wiIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInKTtcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLnN5c0lEKSB7XG4gICAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJyBTWVNURU0gXCInICsgbm9kZS5zeXNJRCArICdcIicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm5EYXRhKSB7XG4gICAgICAgICAgdGhpcy5zdHJlYW0ud3JpdGUoJyBOREFUQSAnICsgbm9kZS5uRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnN0cmVhbS53cml0ZSh0aGlzLnNwYWNlYmVmb3Jlc2xhc2ggKyAnPicgKyB0aGlzLmVuZGxpbmUobm9kZSkpO1xuICAgIH07XG5cbiAgICBYTUxTdHJlYW1Xcml0ZXIucHJvdG90eXBlLmR0ZE5vdGF0aW9uID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHRoaXMuc3RyZWFtLndyaXRlKHRoaXMuc3BhY2UobGV2ZWwpICsgJzwhTk9UQVRJT04gJyArIG5vZGUubmFtZSk7XG4gICAgICBpZiAobm9kZS5wdWJJRCAmJiBub2RlLnN5c0lEKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCIgXCInICsgbm9kZS5zeXNJRCArICdcIicpO1xuICAgICAgfSBlbHNlIGlmIChub2RlLnB1YklEKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtLndyaXRlKCcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCInKTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5zeXNJRCkge1xuICAgICAgICB0aGlzLnN0cmVhbS53cml0ZSgnIFNZU1RFTSBcIicgKyBub2RlLnN5c0lEICsgJ1wiJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5zdHJlYW0ud3JpdGUodGhpcy5zcGFjZWJlZm9yZXNsYXNoICsgJz4nICsgdGhpcy5lbmRsaW5lKG5vZGUpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyZWFtV3JpdGVyLnByb3RvdHlwZS5lbmRsaW5lID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgaWYgKCFub2RlLmlzTGFzdFJvb3ROb2RlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld2xpbmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxTdHJlYW1Xcml0ZXI7XG5cbiAgfSkoWE1MV3JpdGVyQmFzZSk7XG5cbn0pLmNhbGwodGhpcyk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuMTIuN1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgWE1MQ0RhdGEsIFhNTENvbW1lbnQsIFhNTERUREF0dExpc3QsIFhNTERUREVsZW1lbnQsIFhNTERUREVudGl0eSwgWE1MRFRETm90YXRpb24sIFhNTERlY2xhcmF0aW9uLCBYTUxEb2NUeXBlLCBYTUxFbGVtZW50LCBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sIFhNTFJhdywgWE1MU3RyaW5nV3JpdGVyLCBYTUxUZXh0LCBYTUxXcml0ZXJCYXNlLFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgWE1MRGVjbGFyYXRpb24gPSByZXF1aXJlKCcuL1hNTERlY2xhcmF0aW9uJyk7XG5cbiAgWE1MRG9jVHlwZSA9IHJlcXVpcmUoJy4vWE1MRG9jVHlwZScpO1xuXG4gIFhNTENEYXRhID0gcmVxdWlyZSgnLi9YTUxDRGF0YScpO1xuXG4gIFhNTENvbW1lbnQgPSByZXF1aXJlKCcuL1hNTENvbW1lbnQnKTtcblxuICBYTUxFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxFbGVtZW50Jyk7XG5cbiAgWE1MUmF3ID0gcmVxdWlyZSgnLi9YTUxSYXcnKTtcblxuICBYTUxUZXh0ID0gcmVxdWlyZSgnLi9YTUxUZXh0Jyk7XG5cbiAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gcmVxdWlyZSgnLi9YTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24nKTtcblxuICBYTUxEVERBdHRMaXN0ID0gcmVxdWlyZSgnLi9YTUxEVERBdHRMaXN0Jyk7XG5cbiAgWE1MRFRERWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRFRERWxlbWVudCcpO1xuXG4gIFhNTERUREVudGl0eSA9IHJlcXVpcmUoJy4vWE1MRFRERW50aXR5Jyk7XG5cbiAgWE1MRFRETm90YXRpb24gPSByZXF1aXJlKCcuL1hNTERURE5vdGF0aW9uJyk7XG5cbiAgWE1MV3JpdGVyQmFzZSA9IHJlcXVpcmUoJy4vWE1MV3JpdGVyQmFzZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MU3RyaW5nV3JpdGVyID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoWE1MU3RyaW5nV3JpdGVyLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIFhNTFN0cmluZ1dyaXRlcihvcHRpb25zKSB7XG4gICAgICBYTUxTdHJpbmdXcml0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgWE1MU3RyaW5nV3JpdGVyLnByb3RvdHlwZS5kb2N1bWVudCA9IGZ1bmN0aW9uKGRvYykge1xuICAgICAgdmFyIGNoaWxkLCBpLCBsZW4sIHIsIHJlZjtcbiAgICAgIHRoaXMudGV4dGlzcHJlc2VudCA9IGZhbHNlO1xuICAgICAgciA9ICcnO1xuICAgICAgcmVmID0gZG9jLmNoaWxkcmVuO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGNoaWxkID0gcmVmW2ldO1xuICAgICAgICByICs9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICBzd2l0Y2ggKGZhbHNlKSB7XG4gICAgICAgICAgICBjYXNlICEoY2hpbGQgaW5zdGFuY2VvZiBYTUxEZWNsYXJhdGlvbik6XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY2xhcmF0aW9uKGNoaWxkKTtcbiAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTERvY1R5cGUpOlxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kb2NUeXBlKGNoaWxkKTtcbiAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTENvbW1lbnQpOlxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb21tZW50KGNoaWxkKTtcbiAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbik6XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NpbmdJbnN0cnVjdGlvbihjaGlsZCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50KGNoaWxkLCAwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wcmV0dHkgJiYgci5zbGljZSgtdGhpcy5uZXdsaW5lLmxlbmd0aCkgPT09IHRoaXMubmV3bGluZSkge1xuICAgICAgICByID0gci5zbGljZSgwLCAtdGhpcy5uZXdsaW5lLmxlbmd0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5nV3JpdGVyLnByb3RvdHlwZS5hdHRyaWJ1dGUgPSBmdW5jdGlvbihhdHQpIHtcbiAgICAgIHJldHVybiAnICcgKyBhdHQubmFtZSArICc9XCInICsgYXR0LnZhbHVlICsgJ1wiJztcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5nV3JpdGVyLnByb3RvdHlwZS5jZGF0YSA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zcGFjZShsZXZlbCkgKyAnPCFbQ0RBVEFbJyArIG5vZGUudGV4dCArICddXT4nICsgdGhpcy5uZXdsaW5lO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdXcml0ZXIucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbihub2RlLCBsZXZlbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3BhY2UobGV2ZWwpICsgJzwhLS0gJyArIG5vZGUudGV4dCArICcgLS0+JyArIHRoaXMubmV3bGluZTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5nV3JpdGVyLnByb3RvdHlwZS5kZWNsYXJhdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHIgPSB0aGlzLnNwYWNlKGxldmVsKTtcbiAgICAgIHIgKz0gJzw/eG1sIHZlcnNpb249XCInICsgbm9kZS52ZXJzaW9uICsgJ1wiJztcbiAgICAgIGlmIChub2RlLmVuY29kaW5nICE9IG51bGwpIHtcbiAgICAgICAgciArPSAnIGVuY29kaW5nPVwiJyArIG5vZGUuZW5jb2RpbmcgKyAnXCInO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuc3RhbmRhbG9uZSAhPSBudWxsKSB7XG4gICAgICAgIHIgKz0gJyBzdGFuZGFsb25lPVwiJyArIG5vZGUuc3RhbmRhbG9uZSArICdcIic7XG4gICAgICB9XG4gICAgICByICs9IHRoaXMuc3BhY2ViZWZvcmVzbGFzaCArICc/Pic7XG4gICAgICByICs9IHRoaXMubmV3bGluZTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdXcml0ZXIucHJvdG90eXBlLmRvY1R5cGUgPSBmdW5jdGlvbihub2RlLCBsZXZlbCkge1xuICAgICAgdmFyIGNoaWxkLCBpLCBsZW4sIHIsIHJlZjtcbiAgICAgIGxldmVsIHx8IChsZXZlbCA9IDApO1xuICAgICAgciA9IHRoaXMuc3BhY2UobGV2ZWwpO1xuICAgICAgciArPSAnPCFET0NUWVBFICcgKyBub2RlLnJvb3QoKS5uYW1lO1xuICAgICAgaWYgKG5vZGUucHViSUQgJiYgbm9kZS5zeXNJRCkge1xuICAgICAgICByICs9ICcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCIgXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICB9IGVsc2UgaWYgKG5vZGUuc3lzSUQpIHtcbiAgICAgICAgciArPSAnIFNZU1RFTSBcIicgKyBub2RlLnN5c0lEICsgJ1wiJztcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgciArPSAnIFsnO1xuICAgICAgICByICs9IHRoaXMubmV3bGluZTtcbiAgICAgICAgcmVmID0gbm9kZS5jaGlsZHJlbjtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgY2hpbGQgPSByZWZbaV07XG4gICAgICAgICAgciArPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGZhbHNlKSB7XG4gICAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTERUREF0dExpc3QpOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmR0ZEF0dExpc3QoY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTERUREVsZW1lbnQpOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmR0ZEVsZW1lbnQoY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTERUREVudGl0eSk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHRkRW50aXR5KGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBjYXNlICEoY2hpbGQgaW5zdGFuY2VvZiBYTUxEVEROb3RhdGlvbik6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZHRkTm90YXRpb24oY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTENEYXRhKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jZGF0YShjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MQ29tbWVudCk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tbWVudChjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzaW5nSW5zdHJ1Y3Rpb24oY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBEVEQgbm9kZSB0eXBlOiBcIiArIGNoaWxkLmNvbnN0cnVjdG9yLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgciArPSAnXSc7XG4gICAgICB9XG4gICAgICByICs9IHRoaXMuc3BhY2ViZWZvcmVzbGFzaCArICc+JztcbiAgICAgIHIgKz0gdGhpcy5uZXdsaW5lO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ1dyaXRlci5wcm90b3R5cGUuZWxlbWVudCA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICB2YXIgYXR0LCBjaGlsZCwgaSwgaiwgbGVuLCBsZW4xLCBuYW1lLCByLCByZWYsIHJlZjEsIHJlZjIsIHNwYWNlLCB0ZXh0aXNwcmVzZW50d2Fzc2V0O1xuICAgICAgbGV2ZWwgfHwgKGxldmVsID0gMCk7XG4gICAgICB0ZXh0aXNwcmVzZW50d2Fzc2V0ID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy50ZXh0aXNwcmVzZW50KSB7XG4gICAgICAgIHRoaXMubmV3bGluZSA9ICcnO1xuICAgICAgICB0aGlzLnByZXR0eSA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5uZXdsaW5lID0gdGhpcy5uZXdsaW5lZGVmYXVsdDtcbiAgICAgICAgdGhpcy5wcmV0dHkgPSB0aGlzLnByZXR0eWRlZmF1bHQ7XG4gICAgICB9XG4gICAgICBzcGFjZSA9IHRoaXMuc3BhY2UobGV2ZWwpO1xuICAgICAgciA9ICcnO1xuICAgICAgciArPSBzcGFjZSArICc8JyArIG5vZGUubmFtZTtcbiAgICAgIHJlZiA9IG5vZGUuYXR0cmlidXRlcztcbiAgICAgIGZvciAobmFtZSBpbiByZWYpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBuYW1lKSkgY29udGludWU7XG4gICAgICAgIGF0dCA9IHJlZltuYW1lXTtcbiAgICAgICAgciArPSB0aGlzLmF0dHJpYnV0ZShhdHQpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwIHx8IG5vZGUuY2hpbGRyZW4uZXZlcnkoZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gZS52YWx1ZSA9PT0gJyc7XG4gICAgICB9KSkge1xuICAgICAgICBpZiAodGhpcy5hbGxvd0VtcHR5KSB7XG4gICAgICAgICAgciArPSAnPjwvJyArIG5vZGUubmFtZSArICc+JyArIHRoaXMubmV3bGluZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByICs9IHRoaXMuc3BhY2ViZWZvcmVzbGFzaCArICcvPicgKyB0aGlzLm5ld2xpbmU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5wcmV0dHkgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgKG5vZGUuY2hpbGRyZW5bMF0udmFsdWUgIT0gbnVsbCkpIHtcbiAgICAgICAgciArPSAnPic7XG4gICAgICAgIHIgKz0gbm9kZS5jaGlsZHJlblswXS52YWx1ZTtcbiAgICAgICAgciArPSAnPC8nICsgbm9kZS5uYW1lICsgJz4nICsgdGhpcy5uZXdsaW5lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuZG9udHByZXR0eXRleHRub2Rlcykge1xuICAgICAgICAgIHJlZjEgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNoaWxkID0gcmVmMVtpXTtcbiAgICAgICAgICAgIGlmIChjaGlsZC52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHRoaXMudGV4dGlzcHJlc2VudCsrO1xuICAgICAgICAgICAgICB0ZXh0aXNwcmVzZW50d2Fzc2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRleHRpc3ByZXNlbnQpIHtcbiAgICAgICAgICB0aGlzLm5ld2xpbmUgPSAnJztcbiAgICAgICAgICB0aGlzLnByZXR0eSA9IGZhbHNlO1xuICAgICAgICAgIHNwYWNlID0gdGhpcy5zcGFjZShsZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgciArPSAnPicgKyB0aGlzLm5ld2xpbmU7XG4gICAgICAgIHJlZjIgPSBub2RlLmNoaWxkcmVuO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMi5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZjJbal07XG4gICAgICAgICAgciArPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGZhbHNlKSB7XG4gICAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTENEYXRhKTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jZGF0YShjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MQ29tbWVudCk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tbWVudChjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MRWxlbWVudCk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudChjaGlsZCwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgICAgY2FzZSAhKGNoaWxkIGluc3RhbmNlb2YgWE1MUmF3KTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yYXcoY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTFRleHQpOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRleHQoY2hpbGQsIGxldmVsICsgMSk7XG4gICAgICAgICAgICAgIGNhc2UgIShjaGlsZCBpbnN0YW5jZW9mIFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbik6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc2luZ0luc3RydWN0aW9uKGNoaWxkLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVua25vd24gWE1MIG5vZGUgdHlwZTogXCIgKyBjaGlsZC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXh0aXNwcmVzZW50d2Fzc2V0KSB7XG4gICAgICAgICAgdGhpcy50ZXh0aXNwcmVzZW50LS07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnRleHRpc3ByZXNlbnQpIHtcbiAgICAgICAgICB0aGlzLm5ld2xpbmUgPSB0aGlzLm5ld2xpbmVkZWZhdWx0O1xuICAgICAgICAgIHRoaXMucHJldHR5ID0gdGhpcy5wcmV0dHlkZWZhdWx0O1xuICAgICAgICB9XG4gICAgICAgIHIgKz0gc3BhY2UgKyAnPC8nICsgbm9kZS5uYW1lICsgJz4nICsgdGhpcy5uZXdsaW5lO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ1dyaXRlci5wcm90b3R5cGUucHJvY2Vzc2luZ0luc3RydWN0aW9uID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgciA9IHRoaXMuc3BhY2UobGV2ZWwpICsgJzw/JyArIG5vZGUudGFyZ2V0O1xuICAgICAgaWYgKG5vZGUudmFsdWUpIHtcbiAgICAgICAgciArPSAnICcgKyBub2RlLnZhbHVlO1xuICAgICAgfVxuICAgICAgciArPSB0aGlzLnNwYWNlYmVmb3Jlc2xhc2ggKyAnPz4nICsgdGhpcy5uZXdsaW5lO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ1dyaXRlci5wcm90b3R5cGUucmF3ID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnNwYWNlKGxldmVsKSArIG5vZGUudmFsdWUgKyB0aGlzLm5ld2xpbmU7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ1dyaXRlci5wcm90b3R5cGUudGV4dCA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zcGFjZShsZXZlbCkgKyBub2RlLnZhbHVlICsgdGhpcy5uZXdsaW5lO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdXcml0ZXIucHJvdG90eXBlLmR0ZEF0dExpc3QgPSBmdW5jdGlvbihub2RlLCBsZXZlbCkge1xuICAgICAgdmFyIHI7XG4gICAgICByID0gdGhpcy5zcGFjZShsZXZlbCkgKyAnPCFBVFRMSVNUICcgKyBub2RlLmVsZW1lbnROYW1lICsgJyAnICsgbm9kZS5hdHRyaWJ1dGVOYW1lICsgJyAnICsgbm9kZS5hdHRyaWJ1dGVUeXBlO1xuICAgICAgaWYgKG5vZGUuZGVmYXVsdFZhbHVlVHlwZSAhPT0gJyNERUZBVUxUJykge1xuICAgICAgICByICs9ICcgJyArIG5vZGUuZGVmYXVsdFZhbHVlVHlwZTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLmRlZmF1bHRWYWx1ZSkge1xuICAgICAgICByICs9ICcgXCInICsgbm9kZS5kZWZhdWx0VmFsdWUgKyAnXCInO1xuICAgICAgfVxuICAgICAgciArPSB0aGlzLnNwYWNlYmVmb3Jlc2xhc2ggKyAnPicgKyB0aGlzLm5ld2xpbmU7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5nV3JpdGVyLnByb3RvdHlwZS5kdGRFbGVtZW50ID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnNwYWNlKGxldmVsKSArICc8IUVMRU1FTlQgJyArIG5vZGUubmFtZSArICcgJyArIG5vZGUudmFsdWUgKyB0aGlzLnNwYWNlYmVmb3Jlc2xhc2ggKyAnPicgKyB0aGlzLm5ld2xpbmU7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ1dyaXRlci5wcm90b3R5cGUuZHRkRW50aXR5ID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHZhciByO1xuICAgICAgciA9IHRoaXMuc3BhY2UobGV2ZWwpICsgJzwhRU5USVRZJztcbiAgICAgIGlmIChub2RlLnBlKSB7XG4gICAgICAgIHIgKz0gJyAlJztcbiAgICAgIH1cbiAgICAgIHIgKz0gJyAnICsgbm9kZS5uYW1lO1xuICAgICAgaWYgKG5vZGUudmFsdWUpIHtcbiAgICAgICAgciArPSAnIFwiJyArIG5vZGUudmFsdWUgKyAnXCInO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5vZGUucHViSUQgJiYgbm9kZS5zeXNJRCkge1xuICAgICAgICAgIHIgKz0gJyBQVUJMSUMgXCInICsgbm9kZS5wdWJJRCArICdcIiBcIicgKyBub2RlLnN5c0lEICsgJ1wiJztcbiAgICAgICAgfSBlbHNlIGlmIChub2RlLnN5c0lEKSB7XG4gICAgICAgICAgciArPSAnIFNZU1RFTSBcIicgKyBub2RlLnN5c0lEICsgJ1wiJztcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5uRGF0YSkge1xuICAgICAgICAgIHIgKz0gJyBOREFUQSAnICsgbm9kZS5uRGF0YTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgciArPSB0aGlzLnNwYWNlYmVmb3Jlc2xhc2ggKyAnPicgKyB0aGlzLm5ld2xpbmU7XG4gICAgICByZXR1cm4gcjtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5nV3JpdGVyLnByb3RvdHlwZS5kdGROb3RhdGlvbiA9IGZ1bmN0aW9uKG5vZGUsIGxldmVsKSB7XG4gICAgICB2YXIgcjtcbiAgICAgIHIgPSB0aGlzLnNwYWNlKGxldmVsKSArICc8IU5PVEFUSU9OICcgKyBub2RlLm5hbWU7XG4gICAgICBpZiAobm9kZS5wdWJJRCAmJiBub2RlLnN5c0lEKSB7XG4gICAgICAgIHIgKz0gJyBQVUJMSUMgXCInICsgbm9kZS5wdWJJRCArICdcIiBcIicgKyBub2RlLnN5c0lEICsgJ1wiJztcbiAgICAgIH0gZWxzZSBpZiAobm9kZS5wdWJJRCkge1xuICAgICAgICByICs9ICcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCInO1xuICAgICAgfSBlbHNlIGlmIChub2RlLnN5c0lEKSB7XG4gICAgICAgIHIgKz0gJyBTWVNURU0gXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICB9XG4gICAgICByICs9IHRoaXMuc3BhY2ViZWZvcmVzbGFzaCArICc+JyArIHRoaXMubmV3bGluZTtcbiAgICAgIHJldHVybiByO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdXcml0ZXIucHJvdG90eXBlLm9wZW5Ob2RlID0gZnVuY3Rpb24obm9kZSwgbGV2ZWwpIHtcbiAgICAgIHZhciBhdHQsIG5hbWUsIHIsIHJlZjtcbiAgICAgIGxldmVsIHx8IChsZXZlbCA9IDApO1xuICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBYTUxFbGVtZW50KSB7XG4gICAgICAgIHIgPSB0aGlzLnNwYWNlKGxldmVsKSArICc8JyArIG5vZGUubmFtZTtcbiAgICAgICAgcmVmID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgICAgICBmb3IgKG5hbWUgaW4gcmVmKSB7XG4gICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBuYW1lKSkgY29udGludWU7XG4gICAgICAgICAgYXR0ID0gcmVmW25hbWVdO1xuICAgICAgICAgIHIgKz0gdGhpcy5hdHRyaWJ1dGUoYXR0KTtcbiAgICAgICAgfVxuICAgICAgICByICs9IChub2RlLmNoaWxkcmVuID8gJz4nIDogJy8+JykgKyB0aGlzLm5ld2xpbmU7XG4gICAgICAgIHJldHVybiByO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgciA9IHRoaXMuc3BhY2UobGV2ZWwpICsgJzwhRE9DVFlQRSAnICsgbm9kZS5yb290Tm9kZU5hbWU7XG4gICAgICAgIGlmIChub2RlLnB1YklEICYmIG5vZGUuc3lzSUQpIHtcbiAgICAgICAgICByICs9ICcgUFVCTElDIFwiJyArIG5vZGUucHViSUQgKyAnXCIgXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZS5zeXNJRCkge1xuICAgICAgICAgIHIgKz0gJyBTWVNURU0gXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICAgIH1cbiAgICAgICAgciArPSAobm9kZS5jaGlsZHJlbiA/ICcgWycgOiAnPicpICsgdGhpcy5uZXdsaW5lO1xuICAgICAgICByZXR1cm4gcjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MU3RyaW5nV3JpdGVyLnByb3RvdHlwZS5jbG9zZU5vZGUgPSBmdW5jdGlvbihub2RlLCBsZXZlbCkge1xuICAgICAgbGV2ZWwgfHwgKGxldmVsID0gMCk7XG4gICAgICBzd2l0Y2ggKGZhbHNlKSB7XG4gICAgICAgIGNhc2UgIShub2RlIGluc3RhbmNlb2YgWE1MRWxlbWVudCk6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3BhY2UobGV2ZWwpICsgJzwvJyArIG5vZGUubmFtZSArICc+JyArIHRoaXMubmV3bGluZTtcbiAgICAgICAgY2FzZSAhKG5vZGUgaW5zdGFuY2VvZiBYTUxEb2NUeXBlKTpcbiAgICAgICAgICByZXR1cm4gdGhpcy5zcGFjZShsZXZlbCkgKyAnXT4nICsgdGhpcy5uZXdsaW5lO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gWE1MU3RyaW5nV3JpdGVyO1xuXG4gIH0pKFhNTFdyaXRlckJhc2UpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTFN0cmluZ2lmaWVyLFxuICAgIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IFhNTFN0cmluZ2lmaWVyID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIFhNTFN0cmluZ2lmaWVyKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuYXNzZXJ0TGVnYWxDaGFyID0gYmluZCh0aGlzLmFzc2VydExlZ2FsQ2hhciwgdGhpcyk7XG4gICAgICB2YXIga2V5LCByZWYsIHZhbHVlO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIHRoaXMubm9Eb3VibGVFbmNvZGluZyA9IG9wdGlvbnMubm9Eb3VibGVFbmNvZGluZztcbiAgICAgIHJlZiA9IG9wdGlvbnMuc3RyaW5naWZ5IHx8IHt9O1xuICAgICAgZm9yIChrZXkgaW4gcmVmKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZiwga2V5KSkgY29udGludWU7XG4gICAgICAgIHZhbHVlID0gcmVmW2tleV07XG4gICAgICAgIHRoaXNba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5lbGVOYW1lID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICB2YWwgPSAnJyArIHZhbCB8fCAnJztcbiAgICAgIHJldHVybiB0aGlzLmFzc2VydExlZ2FsQ2hhcih2YWwpO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuZWxlVGV4dCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgdmFsID0gJycgKyB2YWwgfHwgJyc7XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIodGhpcy5lbEVzY2FwZSh2YWwpKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNkYXRhID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICB2YWwgPSAnJyArIHZhbCB8fCAnJztcbiAgICAgIHZhbCA9IHZhbC5yZXBsYWNlKCddXT4nLCAnXV1dXT48IVtDREFUQVs+Jyk7XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIodmFsKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIHZhbCA9ICcnICsgdmFsIHx8ICcnO1xuICAgICAgaWYgKHZhbC5tYXRjaCgvLS0vKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb21tZW50IHRleHQgY2Fubm90IGNvbnRhaW4gZG91YmxlLWh5cGVuOiBcIiArIHZhbCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5hc3NlcnRMZWdhbENoYXIodmFsKTtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLnJhdyA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgcmV0dXJuICcnICsgdmFsIHx8ICcnO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuYXR0TmFtZSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgcmV0dXJuIHZhbCA9ICcnICsgdmFsIHx8ICcnO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuYXR0VmFsdWUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIHZhbCA9ICcnICsgdmFsIHx8ICcnO1xuICAgICAgcmV0dXJuIHRoaXMuYXR0RXNjYXBlKHZhbCk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5pbnNUYXJnZXQgPSBmdW5jdGlvbih2YWwpIHtcbiAgICAgIHJldHVybiAnJyArIHZhbCB8fCAnJztcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmluc1ZhbHVlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICB2YWwgPSAnJyArIHZhbCB8fCAnJztcbiAgICAgIGlmICh2YWwubWF0Y2goL1xcPz4vKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gdmFsdWU6IFwiICsgdmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS54bWxWZXJzaW9uID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICB2YWwgPSAnJyArIHZhbCB8fCAnJztcbiAgICAgIGlmICghdmFsLm1hdGNoKC8xXFwuWzAtOV0rLykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2ZXJzaW9uIG51bWJlcjogXCIgKyB2YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLnhtbEVuY29kaW5nID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICB2YWwgPSAnJyArIHZhbCB8fCAnJztcbiAgICAgIGlmICghdmFsLm1hdGNoKC9eW0EtWmEtel0oPzpbQS1aYS16MC05Ll8tXSkqJC8pKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZW5jb2Rpbmc6IFwiICsgdmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS54bWxTdGFuZGFsb25lID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiBcInllc1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwibm9cIjtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmR0ZFB1YklEID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICByZXR1cm4gJycgKyB2YWwgfHwgJyc7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRTeXNJRCA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgcmV0dXJuICcnICsgdmFsIHx8ICcnO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuZHRkRWxlbWVudFZhbHVlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICByZXR1cm4gJycgKyB2YWwgfHwgJyc7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRBdHRUeXBlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICByZXR1cm4gJycgKyB2YWwgfHwgJyc7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRBdHREZWZhdWx0ID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICcnICsgdmFsIHx8ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmR0ZEVudGl0eVZhbHVlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgICByZXR1cm4gJycgKyB2YWwgfHwgJyc7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5kdGRORGF0YSA9IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgcmV0dXJuICcnICsgdmFsIHx8ICcnO1xuICAgIH07XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuY29udmVydEF0dEtleSA9ICdAJztcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5jb252ZXJ0UElLZXkgPSAnPyc7XG5cbiAgICBYTUxTdHJpbmdpZmllci5wcm90b3R5cGUuY29udmVydFRleHRLZXkgPSAnI3RleHQnO1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNvbnZlcnRDRGF0YUtleSA9ICcjY2RhdGEnO1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmNvbnZlcnRDb21tZW50S2V5ID0gJyNjb21tZW50JztcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5jb252ZXJ0UmF3S2V5ID0gJyNyYXcnO1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmFzc2VydExlZ2FsQ2hhciA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgdmFyIHJlcztcbiAgICAgIHJlcyA9IHN0ci5tYXRjaCgvW1xcMFxcdUZGRkVcXHVGRkZGXXxbXFx1RDgwMC1cXHVEQkZGXSg/IVtcXHVEQzAwLVxcdURGRkZdKXwoPzpbXlxcdUQ4MDAtXFx1REJGRl18XilbXFx1REMwMC1cXHVERkZGXS8pO1xuICAgICAgaWYgKHJlcykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNoYXJhY3RlciBpbiBzdHJpbmc6IFwiICsgc3RyICsgXCIgYXQgaW5kZXggXCIgKyByZXMuaW5kZXgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9O1xuXG4gICAgWE1MU3RyaW5naWZpZXIucHJvdG90eXBlLmVsRXNjYXBlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICB2YXIgYW1wcmVnZXg7XG4gICAgICBhbXByZWdleCA9IHRoaXMubm9Eb3VibGVFbmNvZGluZyA/IC8oPyEmXFxTKzspJi9nIDogLyYvZztcbiAgICAgIHJldHVybiBzdHIucmVwbGFjZShhbXByZWdleCwgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC9cXHIvZywgJyYjeEQ7Jyk7XG4gICAgfTtcblxuICAgIFhNTFN0cmluZ2lmaWVyLnByb3RvdHlwZS5hdHRFc2NhcGUgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgIHZhciBhbXByZWdleDtcbiAgICAgIGFtcHJlZ2V4ID0gdGhpcy5ub0RvdWJsZUVuY29kaW5nID8gLyg/ISZcXFMrOykmL2cgOiAvJi9nO1xuICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKGFtcHJlZ2V4LCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvXCIvZywgJyZxdW90OycpLnJlcGxhY2UoL1xcdC9nLCAnJiN4OTsnKS5yZXBsYWNlKC9cXG4vZywgJyYjeEE7JykucmVwbGFjZSgvXFxyL2csICcmI3hEOycpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWE1MU3RyaW5naWZpZXI7XG5cbiAgfSkoKTtcblxufSkuY2FsbCh0aGlzKTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi43XG4oZnVuY3Rpb24oKSB7XG4gIHZhciBYTUxOb2RlLCBYTUxUZXh0LFxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbiAgWE1MTm9kZSA9IHJlcXVpcmUoJy4vWE1MTm9kZScpO1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MVGV4dCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKFhNTFRleHQsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gWE1MVGV4dChwYXJlbnQsIHRleHQpIHtcbiAgICAgIFhNTFRleHQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgcGFyZW50KTtcbiAgICAgIGlmICh0ZXh0ID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyBlbGVtZW50IHRleHRcIik7XG4gICAgICB9XG4gICAgICB0aGlzLnZhbHVlID0gdGhpcy5zdHJpbmdpZnkuZWxlVGV4dCh0ZXh0KTtcbiAgICB9XG5cbiAgICBYTUxUZXh0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUodGhpcyk7XG4gICAgfTtcblxuICAgIFhNTFRleHQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53cml0ZXIuc2V0KG9wdGlvbnMpLnRleHQodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBYTUxUZXh0O1xuXG4gIH0pKFhNTE5vZGUpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTFdyaXRlckJhc2UsXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gIG1vZHVsZS5leHBvcnRzID0gWE1MV3JpdGVyQmFzZSA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBYTUxXcml0ZXJCYXNlKG9wdGlvbnMpIHtcbiAgICAgIHZhciBrZXksIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgcmVmNCwgcmVmNSwgcmVmNiwgdmFsdWU7XG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgICAgdGhpcy5wcmV0dHkgPSBvcHRpb25zLnByZXR0eSB8fCBmYWxzZTtcbiAgICAgIHRoaXMuYWxsb3dFbXB0eSA9IChyZWYgPSBvcHRpb25zLmFsbG93RW1wdHkpICE9IG51bGwgPyByZWYgOiBmYWxzZTtcbiAgICAgIGlmICh0aGlzLnByZXR0eSkge1xuICAgICAgICB0aGlzLmluZGVudCA9IChyZWYxID0gb3B0aW9ucy5pbmRlbnQpICE9IG51bGwgPyByZWYxIDogJyAgJztcbiAgICAgICAgdGhpcy5uZXdsaW5lID0gKHJlZjIgPSBvcHRpb25zLm5ld2xpbmUpICE9IG51bGwgPyByZWYyIDogJ1xcbic7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gKHJlZjMgPSBvcHRpb25zLm9mZnNldCkgIT0gbnVsbCA/IHJlZjMgOiAwO1xuICAgICAgICB0aGlzLmRvbnRwcmV0dHl0ZXh0bm9kZXMgPSAocmVmNCA9IG9wdGlvbnMuZG9udHByZXR0eXRleHRub2RlcykgIT0gbnVsbCA/IHJlZjQgOiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbmRlbnQgPSAnJztcbiAgICAgICAgdGhpcy5uZXdsaW5lID0gJyc7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5kb250cHJldHR5dGV4dG5vZGVzID0gMDtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3BhY2ViZWZvcmVzbGFzaCA9IChyZWY1ID0gb3B0aW9ucy5zcGFjZWJlZm9yZXNsYXNoKSAhPSBudWxsID8gcmVmNSA6ICcnO1xuICAgICAgaWYgKHRoaXMuc3BhY2ViZWZvcmVzbGFzaCA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnNwYWNlYmVmb3Jlc2xhc2ggPSAnICc7XG4gICAgICB9XG4gICAgICB0aGlzLm5ld2xpbmVkZWZhdWx0ID0gdGhpcy5uZXdsaW5lO1xuICAgICAgdGhpcy5wcmV0dHlkZWZhdWx0ID0gdGhpcy5wcmV0dHk7XG4gICAgICByZWY2ID0gb3B0aW9ucy53cml0ZXIgfHwge307XG4gICAgICBmb3IgKGtleSBpbiByZWY2KSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKHJlZjYsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IHJlZjZba2V5XTtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGtleSwgcmVmLCB2YWx1ZTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICBpZiAoXCJwcmV0dHlcIiBpbiBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMucHJldHR5ID0gb3B0aW9ucy5wcmV0dHk7XG4gICAgICB9XG4gICAgICBpZiAoXCJhbGxvd0VtcHR5XCIgaW4gb3B0aW9ucykge1xuICAgICAgICB0aGlzLmFsbG93RW1wdHkgPSBvcHRpb25zLmFsbG93RW1wdHk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wcmV0dHkpIHtcbiAgICAgICAgdGhpcy5pbmRlbnQgPSBcImluZGVudFwiIGluIG9wdGlvbnMgPyBvcHRpb25zLmluZGVudCA6ICcgICc7XG4gICAgICAgIHRoaXMubmV3bGluZSA9IFwibmV3bGluZVwiIGluIG9wdGlvbnMgPyBvcHRpb25zLm5ld2xpbmUgOiAnXFxuJztcbiAgICAgICAgdGhpcy5vZmZzZXQgPSBcIm9mZnNldFwiIGluIG9wdGlvbnMgPyBvcHRpb25zLm9mZnNldCA6IDA7XG4gICAgICAgIHRoaXMuZG9udHByZXR0eXRleHRub2RlcyA9IFwiZG9udHByZXR0eXRleHRub2Rlc1wiIGluIG9wdGlvbnMgPyBvcHRpb25zLmRvbnRwcmV0dHl0ZXh0bm9kZXMgOiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbmRlbnQgPSAnJztcbiAgICAgICAgdGhpcy5uZXdsaW5lID0gJyc7XG4gICAgICAgIHRoaXMub2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5kb250cHJldHR5dGV4dG5vZGVzID0gMDtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3BhY2ViZWZvcmVzbGFzaCA9IFwic3BhY2ViZWZvcmVzbGFzaFwiIGluIG9wdGlvbnMgPyBvcHRpb25zLnNwYWNlYmVmb3Jlc2xhc2ggOiAnJztcbiAgICAgIGlmICh0aGlzLnNwYWNlYmVmb3Jlc2xhc2ggPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5zcGFjZWJlZm9yZXNsYXNoID0gJyAnO1xuICAgICAgfVxuICAgICAgdGhpcy5uZXdsaW5lZGVmYXVsdCA9IHRoaXMubmV3bGluZTtcbiAgICAgIHRoaXMucHJldHR5ZGVmYXVsdCA9IHRoaXMucHJldHR5O1xuICAgICAgcmVmID0gb3B0aW9ucy53cml0ZXIgfHwge307XG4gICAgICBmb3IgKGtleSBpbiByZWYpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgdmFsdWUgPSByZWZba2V5XTtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgWE1MV3JpdGVyQmFzZS5wcm90b3R5cGUuc3BhY2UgPSBmdW5jdGlvbihsZXZlbCkge1xuICAgICAgdmFyIGluZGVudDtcbiAgICAgIGlmICh0aGlzLnByZXR0eSkge1xuICAgICAgICBpbmRlbnQgPSAobGV2ZWwgfHwgMCkgKyB0aGlzLm9mZnNldCArIDE7XG4gICAgICAgIGlmIChpbmRlbnQgPiAwKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBBcnJheShpbmRlbnQpLmpvaW4odGhpcy5pbmRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gWE1MV3JpdGVyQmFzZTtcblxuICB9KSgpO1xuXG59KS5jYWxsKHRoaXMpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjEyLjdcbihmdW5jdGlvbigpIHtcbiAgdmFyIFhNTERvY3VtZW50LCBYTUxEb2N1bWVudENCLCBYTUxTdHJlYW1Xcml0ZXIsIFhNTFN0cmluZ1dyaXRlciwgYXNzaWduLCBpc0Z1bmN0aW9uLCByZWY7XG5cbiAgcmVmID0gcmVxdWlyZSgnLi9VdGlsaXR5JyksIGFzc2lnbiA9IHJlZi5hc3NpZ24sIGlzRnVuY3Rpb24gPSByZWYuaXNGdW5jdGlvbjtcblxuICBYTUxEb2N1bWVudCA9IHJlcXVpcmUoJy4vWE1MRG9jdW1lbnQnKTtcblxuICBYTUxEb2N1bWVudENCID0gcmVxdWlyZSgnLi9YTUxEb2N1bWVudENCJyk7XG5cbiAgWE1MU3RyaW5nV3JpdGVyID0gcmVxdWlyZSgnLi9YTUxTdHJpbmdXcml0ZXInKTtcblxuICBYTUxTdHJlYW1Xcml0ZXIgPSByZXF1aXJlKCcuL1hNTFN0cmVhbVdyaXRlcicpO1xuXG4gIG1vZHVsZS5leHBvcnRzLmNyZWF0ZSA9IGZ1bmN0aW9uKG5hbWUsIHhtbGRlYywgZG9jdHlwZSwgb3B0aW9ucykge1xuICAgIHZhciBkb2MsIHJvb3Q7XG4gICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUm9vdCBlbGVtZW50IG5lZWRzIGEgbmFtZVwiKTtcbiAgICB9XG4gICAgb3B0aW9ucyA9IGFzc2lnbih7fSwgeG1sZGVjLCBkb2N0eXBlLCBvcHRpb25zKTtcbiAgICBkb2MgPSBuZXcgWE1MRG9jdW1lbnQob3B0aW9ucyk7XG4gICAgcm9vdCA9IGRvYy5lbGVtZW50KG5hbWUpO1xuICAgIGlmICghb3B0aW9ucy5oZWFkbGVzcykge1xuICAgICAgZG9jLmRlY2xhcmF0aW9uKG9wdGlvbnMpO1xuICAgICAgaWYgKChvcHRpb25zLnB1YklEICE9IG51bGwpIHx8IChvcHRpb25zLnN5c0lEICE9IG51bGwpKSB7XG4gICAgICAgIGRvYy5kb2N0eXBlKG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcm9vdDtcbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0cy5iZWdpbiA9IGZ1bmN0aW9uKG9wdGlvbnMsIG9uRGF0YSwgb25FbmQpIHtcbiAgICB2YXIgcmVmMTtcbiAgICBpZiAoaXNGdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgcmVmMSA9IFtvcHRpb25zLCBvbkRhdGFdLCBvbkRhdGEgPSByZWYxWzBdLCBvbkVuZCA9IHJlZjFbMV07XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmIChvbkRhdGEpIHtcbiAgICAgIHJldHVybiBuZXcgWE1MRG9jdW1lbnRDQihvcHRpb25zLCBvbkRhdGEsIG9uRW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBYTUxEb2N1bWVudChvcHRpb25zKTtcbiAgICB9XG4gIH07XG5cbiAgbW9kdWxlLmV4cG9ydHMuc3RyaW5nV3JpdGVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgWE1MU3RyaW5nV3JpdGVyKG9wdGlvbnMpO1xuICB9O1xuXG4gIG1vZHVsZS5leHBvcnRzLnN0cmVhbVdyaXRlciA9IGZ1bmN0aW9uKHN0cmVhbSwgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgWE1MU3RyZWFtV3JpdGVyKHN0cmVhbSwgb3B0aW9ucyk7XG4gIH07XG5cbn0pLmNhbGwodGhpcyk7XG4iXX0=\r\n","import { writable } from 'svelte-persistent-store/dist/session';\r\nimport jsforce from \"../jsforce/jsforce\";\r\n\r\n//Insert store variables here\r\nexport const count = writable('count', 0);\r\n\r\nexport const oauth2 = new jsforce.OAuth2({\r\n    loginUrl : __myapp.env.LOGIN_URL,\r\n    clientId : __myapp.env.CLIENT_ID,\r\n    clientSecret : __myapp.env.CLIENT_SECRET,\r\n    redirectUri : __myapp.env.REDIRECT_URI,\r\n    version: __myapp.env.API_VERSION,\r\n    proxyUrl: __myapp.env.PROXY_URL\r\n});\r\n\r\nexport const sfConn = new jsforce.Connection({oauth2: oauth2});\r\n\r\nexport const loggedUserId = writable('loggedUserId', '');\r\nexport const accessToken = writable('accessToken', '');\r\nexport const instanceUrl = writable('instanceUrl', '');\r\nexport const refreshToken = writable('refreshToken', '');","<script>\r\n    import { oauth2 } from \"../store/store.js\";\r\n    import jsforce from \"../jsforce/jsforce\";\r\n    \r\n    let urlLogin = oauth2.getAuthorizationUrl();\r\n    \r\n    function login() {\r\n        window.location = urlLogin;\r\n    }\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n<h2>You should login with salesforce to use the app.</h2>\r\n<p>Please use the below button to authorize access to your org.</p>\r\n<button class=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\" on:click={login}>Login with Salesforce</button>","<script context=\"module\">\nimport {readable, derived} from 'svelte/store'\nimport {tick} from 'svelte'\n\n/**\n * Wraps a route to add route pre-conditions.\n * \n * @param {SvelteComponent} route - Svelte component for the route\n * @param {Object} [userData] - Optional object that will be passed to each `conditionsFailed` event\n * @param {...Function} conditions - Route pre-conditions to add, which will be executed in order\n * @returns {Object} Wrapped route\n */\nexport function wrap(route, userData, ...conditions) {\n    // Check if we don't have userData\n    if (userData && typeof userData == 'function') {\n        conditions = (conditions && conditions.length) ? conditions : []\n        conditions.unshift(userData)\n        userData = undefined\n    }\n\n    // Parameter route and each item of conditions must be functions\n    if (!route || typeof route != 'function') {\n        throw Error('Invalid parameter route')\n    }\n    if (conditions && conditions.length) {\n        for (let i = 0; i < conditions.length; i++) {\n            if (!conditions[i] || typeof conditions[i] != 'function') {\n                throw Error('Invalid parameter conditions[' + i + ']')\n            }\n        }\n    }\n\n    // Returns an object that contains all the functions to execute too\n    const obj = {route, userData}\n    if (conditions && conditions.length) {\n        obj.conditions = conditions\n    }\n\n    // The _sveltesparouter flag is to confirm the object was created by this router\n    Object.defineProperty(obj, '_sveltesparouter', {\n        value: true\n    })\n\n    return obj\n}\n\n/**\n * @typedef {Object} Location\n * @property {string} location - Location (page/view), for example `/book`\n * @property {string} [querystring] - Querystring from the hash, as a string not parsed\n */\n/**\n * Returns the current location from the hash.\n *\n * @returns {Location} Location object\n * @private\n */\nfunction getLocation() {\n    const hashPosition = window.location.href.indexOf('#/')\n    let location = (hashPosition > -1) ? window.location.href.substr(hashPosition + 1) : '/'\n\n    // Check if there's a querystring\n    const qsPosition = location.indexOf('?')\n    let querystring = ''\n    if (qsPosition > -1) {\n        querystring = location.substr(qsPosition + 1)\n        location = location.substr(0, qsPosition)\n    }\n\n    return {location, querystring}\n}\n\n/**\n * Readable store that returns the current full location (incl. querystring)\n */\nexport const loc = readable(\n    null,\n    // eslint-disable-next-line prefer-arrow-callback\n    function start(set) {\n        set(getLocation())\n\n        const update = () => {\n            set(getLocation())\n        }\n        window.addEventListener('hashchange', update, false)\n\n        return function stop() {\n            window.removeEventListener('hashchange', update, false)\n        }\n    }\n)\n\n/**\n * Readable store that returns the current location\n */\nexport const location = derived(\n    loc,\n    ($loc) => $loc.location\n)\n\n/**\n * Readable store that returns the current querystring\n */\nexport const querystring = derived(\n    loc,\n    ($loc) => $loc.querystring\n)\n\n/**\n * Navigates to a new page programmatically.\n *\n * @param {string} location - Path to navigate to (must start with `/` or '#/')\n * @return {Promise} Promise that resolves after the page navigation has completed\n */\nexport function push(location) {\n    if (!location || location.length < 1 || (location.charAt(0) != '/' && location.indexOf('#/') !== 0)) {\n        throw Error('Invalid parameter location')\n    }\n\n    // Execute this code when the current call stack is complete\n    return tick().then(() => {\n        window.location.hash = (location.charAt(0) == '#' ? '' : '#') + location\n    })\n}\n\n/**\n * Navigates back in history (equivalent to pressing the browser's back button).\n * \n * @return {Promise} Promise that resolves after the page navigation has completed\n */\nexport function pop() {\n    // Execute this code when the current call stack is complete\n    return tick().then(() => {\n        window.history.back()\n    })\n}\n\n/**\n * Replaces the current page but without modifying the history stack.\n *\n * @param {string} location - Path to navigate to (must start with `/` or '#/')\n * @return {Promise} Promise that resolves after the page navigation has completed\n */\nexport function replace(location) {\n    if (!location || location.length < 1 || (location.charAt(0) != '/' && location.indexOf('#/') !== 0)) {\n        throw Error('Invalid parameter location')\n    }\n\n    // Execute this code when the current call stack is complete\n    return tick().then(() => {\n        const dest = (location.charAt(0) == '#' ? '' : '#') + location\n        try {\n            window.history.replaceState(undefined, undefined, dest)\n        }\n        catch (e) {\n            // eslint-disable-next-line no-console\n            console.warn('Caught exception while replacing the current page. If you\\'re running this in the Svelte REPL, please note that the `replace` method might not work in this environment.')\n        }\n\n        // The method above doesn't trigger the hashchange event, so let's do that manually\n        window.dispatchEvent(new Event('hashchange'))\n    })\n}\n\n/**\n * Svelte Action that enables a link element (`<a>`) to use our history management.\n *\n * For example:\n *\n * ````html\n * <a href=\"/books\" use:link>View books</a>\n * ````\n *\n * @param {HTMLElement} node - The target node (automatically set by Svelte). Must be an anchor tag (`<a>`) with a href attribute starting in `/`\n * @param {string} hrefVar - A string to use in place of the link's href attribute. Using this allows for updating link's targets reactively.\n */\nexport function link(node, hrefVar) {\n    // Only apply to <a> tags\n    if (!node || !node.tagName || node.tagName.toLowerCase() != 'a') {\n        throw Error('Action \"link\" can only be used with <a> tags')\n    }\n\n    updateLink(node, hrefVar || node.getAttribute('href'))\n\n    return {\n        update(updated) {\n            updateLink(node, updated)\n        }\n    }\n}\n\n// Internal function used by the link function\nfunction updateLink(node, href) {\n    // Destination must start with '/'\n    if (!href || href.length < 1 || href.charAt(0) != '/') {\n        throw Error('Invalid value for \"href\" attribute')\n    }\n\n    // Add # to the href attribute\n    node.setAttribute('href', '#' + href)\n}\n\n/**\n * Performs a callback in the next tick and returns a Promise that resolves once that's done\n *\n * @param {Function} cb - Callback to invoke\n * @returns {Promise} Promise that resolves after the callback has been invoked, with the return value of the callback (if any)\n * @deprecated Deprecated since version 2.2 and will be removed in version 3. Use `tick` from the Svelte runtime instead (`import {tick} from 'svelte'`).\n */\nexport function nextTickPromise(cb) {\n    // eslint-disable-next-line no-console\n    console.warn('nextTickPromise from \\'svelte-spa-router\\' is deprecated and will be removed in version 3; use the \\'tick\\' method from the Svelte runtime instead')\n    return tick().then(cb)\n}\n</script>\n\n{#if componentParams}\n  <svelte:component this=\"{component}\" params=\"{componentParams}\" on:routeEvent />\n{:else}\n  <svelte:component this=\"{component}\" on:routeEvent />\n{/if}\n\n<script>\nimport {createEventDispatcher} from 'svelte'\nimport regexparam from 'regexparam'\n\n/**\n * Dictionary of all routes, in the format `'/path': component`.\n *\n * For example:\n * ````js\n * import HomeRoute from './routes/HomeRoute.svelte'\n * import BooksRoute from './routes/BooksRoute.svelte'\n * import NotFoundRoute from './routes/NotFoundRoute.svelte'\n * routes = {\n *     '/': HomeRoute,\n *     '/books': BooksRoute,\n *     '*': NotFoundRoute\n * }\n * ````\n */\nexport let routes = {}\n\n/**\n * Optional prefix for the routes in this router. This is useful for example in the case of nested routers.\n */\nexport let prefix = ''\n\n/**\n * Container for a route: path, component\n */\nclass RouteItem {\n    /**\n     * Initializes the object and creates a regular expression from the path, using regexparam.\n     *\n     * @param {string} path - Path to the route (must start with '/' or '*')\n     * @param {SvelteComponent} component - Svelte component for the route\n     */\n    constructor(path, component) {\n        if (!component || (typeof component != 'function' && (typeof component != 'object' || component._sveltesparouter !== true))) {\n            throw Error('Invalid component object')\n        }\n\n        // Path must be a regular or expression, or a string starting with '/' or '*'\n        if (!path || \n            (typeof path == 'string' && (path.length < 1 || (path.charAt(0) != '/' && path.charAt(0) != '*'))) ||\n            (typeof path == 'object' && !(path instanceof RegExp))\n        ) {\n            throw Error('Invalid value for \"path\" argument')\n        }\n\n        const {pattern, keys} = regexparam(path)\n\n        this.path = path\n\n        // Check if the component is wrapped and we have conditions\n        if (typeof component == 'object' && component._sveltesparouter === true) {\n            this.component = component.route\n            this.conditions = component.conditions || []\n            this.userData = component.userData\n        }\n        else {\n            this.component = component\n            this.conditions = []\n            this.userData = undefined\n        }\n\n        this._pattern = pattern\n        this._keys = keys\n    }\n\n    /**\n     * Checks if `path` matches the current route.\n     * If there's a match, will return the list of parameters from the URL (if any).\n     * In case of no match, the method will return `null`.\n     *\n     * @param {string} path - Path to test\n     * @returns {null|Object.<string, string>} List of paramters from the URL if there's a match, or `null` otherwise.\n     */\n    match(path) {\n        // If there's a prefix, remove it before we run the matching\n        if (prefix && path.startsWith(prefix)) {\n            path = path.substr(prefix.length) || '/'\n        }\n\n        // Check if the pattern matches\n        const matches = this._pattern.exec(path)\n        if (matches === null) {\n            return null\n        }\n\n        // If the input was a regular expression, this._keys would be false, so return matches as is\n        if (this._keys === false) {\n            return matches\n        }\n\n        const out = {}\n        let i = 0\n        while (i < this._keys.length) {\n            out[this._keys[i]] = matches[++i] || null\n        }\n        return out\n    }\n\n    /**\n     * Dictionary with route details passed to the pre-conditions functions, as well as the `routeLoaded` and `conditionsFailed` events\n     * @typedef {Object} RouteDetail\n     * @property {SvelteComponent} component - Svelte component\n     * @property {string} name - Name of the Svelte component\n     * @property {string} location - Location path\n     * @property {string} querystring - Querystring from the hash\n     * @property {Object} [userData] - Custom data passed by the user\n     */\n\n    /**\n     * Executes all conditions (if any) to control whether the route can be shown. Conditions are executed in the order they are defined, and if a condition fails, the following ones aren't executed.\n     * \n     * @param {RouteDetail} detail - Route detail\n     * @returns {bool} Returns true if all the conditions succeeded\n     */\n    checkConditions(detail) {\n        for (let i = 0; i < this.conditions.length; i++) {\n            if (!this.conditions[i](detail)) {\n                return false\n            }\n        }\n\n        return true\n    }\n}\n\n// Set up all routes\nconst routesList = []\nif (routes instanceof Map) {\n    // If it's a map, iterate on it right away\n    routes.forEach((route, path) => {\n        routesList.push(new RouteItem(path, route))\n    })\n}\nelse {\n    // We have an object, so iterate on its own properties\n    Object.keys(routes).forEach((path) => {\n        routesList.push(new RouteItem(path, routes[path]))\n    })\n}\n\n// Props for the component to render\nlet component = null\nlet componentParams = null\n\n// Event dispatcher from Svelte\nconst dispatch = createEventDispatcher()\n\n// Just like dispatch, but executes on the next iteration of the event loop\nconst dispatchNextTick = (name, detail) => {\n    // Execute this code when the current call stack is complete\n    tick().then(() => {\n        dispatch(name, detail)\n    })\n}\n\n// Handle hash change events\n// Listen to changes in the $loc store and update the page\n$: {\n    // Find a route matching the location\n    component = null\n    let i = 0\n    while (!component && i < routesList.length) {\n        const match = routesList[i].match($loc.location)\n        if (match) {\n            const detail = {\n                component: routesList[i].component,\n                name: routesList[i].component.name,\n                location: $loc.location,\n                querystring: $loc.querystring,\n                userData: routesList[i].userData\n            }\n\n            // Check if the route can be loaded - if all conditions succeed\n            if (!routesList[i].checkConditions(detail)) {\n                // Trigger an event to notify the user\n                dispatchNextTick('conditionsFailed', detail)\n                break\n            }\n            component = routesList[i].component\n            // Set componentParams onloy if we have a match, to avoid a warning similar to `<Component> was created with unknown prop 'params'`\n            // Of course, this assumes that developers always add a \"params\" prop when they are expecting parameters\n            if (match && typeof match == 'object' && Object.keys(match).length) {\n                componentParams = match\n            }\n            else {\n                componentParams = null\n            }\n\n            dispatchNextTick('routeLoaded', detail)\n        }\n        i++\n    }\n}\n</script>\n","export default function (str, loose) {\n\tif (str instanceof RegExp) return { keys:false, pattern:str };\n\tvar c, o, tmp, ext, keys=[], pattern='', arr = str.split('/');\n\tarr[0] || arr.shift();\n\n\twhile (tmp = arr.shift()) {\n\t\tc = tmp[0];\n\t\tif (c === '*') {\n\t\t\tkeys.push('wild');\n\t\t\tpattern += '/(.*)';\n\t\t} else if (c === ':') {\n\t\t\to = tmp.indexOf('?', 1);\n\t\t\text = tmp.indexOf('.', 1);\n\t\t\tkeys.push( tmp.substring(1, !!~o ? o : !!~ext ? ext : tmp.length) );\n\t\t\tpattern += !!~o && !~ext ? '(?:/([^/]+?))?' : '/([^/]+?)';\n\t\t\tif (!!~ext) pattern += (!!~o ? '?' : '') + '\\\\' + tmp.substring(ext);\n\t\t} else {\n\t\t\tpattern += '/' + tmp;\n\t\t}\n\t}\n\n\treturn {\n\t\tkeys: keys,\n\t\tpattern: new RegExp('^' + pattern + (loose ? '(?=$|\\/)' : '\\/?$'), 'i')\n\t};\n}\n","<script>\r\n    import { oauth2, sfConn, loggedUserId, accessToken, instanceUrl, refreshToken } from \"../store/store.js\";\r\n    import jsforce from \"../jsforce/jsforce\";\r\n    import {push} from 'svelte-spa-router'\r\n\r\n    let message = '';\r\n\r\n    let urlParameters = new URLSearchParams(window.location.search);\r\n    let code = urlParameters.get('code');\r\n    console.log('code ', code);\r\n    \r\n    sfConn.authorize(code, function(err, userInfo) {\r\n        console.log('sfConn.authorize ');\r\n        if (err) { message = err; return ''; }\r\n        console.log('Access Token: ' + sfConn.accessToken);\r\n        console.log('Instance URL: ' + sfConn.instanceUrl);\r\n        console.log('refreshToken: ' + sfConn.refreshToken);\r\n        loggedUserId.set(userInfo.id);\r\n        accessToken.set(sfConn.accessToken);\r\n        instanceUrl.set(sfConn.instanceUrl);\r\n        refreshToken.set(sfConn.refreshToken);\r\n        console.log('User ID: ' + userInfo.id);\r\n        console.log('Org ID: ' + userInfo.organizationId);\r\n        \r\n        window.location = '#/home';\r\n    });\r\n</script>\r\n<h1>Token component</h1>\r\n<p>Code: {code}</p>\r\n<p>{message}</p>\r\n","<script>\r\n    import {location, querystring} from 'svelte-spa-router'\r\n    import { loggedUserId } from \"../store/store.js\";\r\n    let userId;\r\n    loggedUserId.subscribe(id => (userId = id));\r\n</script>\r\n<h1>Home component</h1>\r\n<h2>Shared Bills</h2>\r\n{#if userId != ''}\r\n     <h1>Logged as user {userId}</h1>\r\n{:else}\r\n     Please login first.\r\n{/if}","<script>\r\n    import { oauth2, sfConn, loggedUserId, accessToken, instanceUrl, refreshToken } from \"../store/store.js\";\r\n    import jsforce from \"../jsforce/jsforce\";\r\n\r\n    let accessTokenValue;\r\n    accessToken.subscribe(id => (accessTokenValue = id));\r\n    let instanceUrlValue;\r\n    instanceUrl.subscribe(id => (instanceUrlValue = id));\r\n\r\n    console.log('create shared bill ');\r\n    //SOQL query\r\n    let q = 'SELECT id, name FROM account LIMIT 10';\r\n    //instantiate connection\r\n    let conn = new jsforce.Connection({\r\n        oauth2 : {oauth2},\r\n        accessToken: accessTokenValue,\r\n        instanceUrl: instanceUrlValue,\r\n        proxyUrl: \"https://shared-bills-proxy.herokuapp.com/proxy\"\r\n    });\r\n    //set records array\r\n    let records = [];\r\n    conn.query(q, function(err, res) {\r\n    if (err) { console.log(err); }\r\n    records = res.records;\r\n    console.log('records ', records);\r\n    });\r\n\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n<h1>Create Shared Bill</h1>\r\n<ul>\r\n{#each records as record}\r\n     <li>{record.Name}</li>\r\n{:else}\r\n    <li>No contacts found</li>\r\n{/each}\r\n</ul>","<script>\r\n\timport Login from './components/Login.svelte';\r\n\timport Token from './components/Token.svelte';\r\n\timport Home from './components/Home.svelte';\r\n\timport CreateSharedBill from './components/CreateSharedBill.svelte';\r\n\timport Router, {link} from 'svelte-spa-router';\r\n\r\n\tlet baseUrl = __myapp.env.BASE_URL;\r\n\tconsole.log(__myapp.env.BASE_URL);\r\n\tif ('serviceWorker' in navigator) {\r\n\t\tnavigator.serviceWorker.register(__myapp.env.BASE_URL + '/service-worker.js');\r\n\t}\r\n\r\n\tconst routes = {\r\n\t\t'/': Home,\r\n\t\t'/home': Home,\r\n\t\t'/login': Login,\r\n\t\t'/token': Token,\r\n\t\t'/create-shared-bill': CreateSharedBill\r\n\t};\r\n</script>\r\n\r\n<main class=\"overflow-hidden\">\r\n\t<a class=\"text-primaryColor font-semibold hover:text-accentColor\" href=\"/home\" use:link>Home</a>\r\n\t<a class=\"text-primaryColor font-semibold hover:text-accentColor\" href=\"/login\" use:link>Login</a>\r\n\t<a class=\"text-primaryColor font-semibold hover:text-accentColor\" href=\"/token\" use:link>Token</a>\r\n\t<a class=\"text-primaryColor font-semibold hover:text-accentColor\" href=\"/create-shared-bill\" use:link>CreateSharedBill</a>\r\n\t<h1 class=\"text-secondaryColor font-bold \">{baseUrl}</h1>\r\n\t<Router {routes}/>\r\n</main>\r\n","import App from \"./App.svelte\";\r\n\r\nconst app = new App({\r\n  target: document.body\r\n});\r\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","get_store_value","value","_","action_destroyer","action_result","destroy","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","text","data","createTextNode","space","empty","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","wholeText","current_component","set_current_component","component","createEventDispatcher","Error","get_current_component","type","detail","$$","event","e","createEvent","initCustomEvent","custom_event","slice","call","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","add_render_callback","push","flushing","seen_callbacks","Set","i","length","update","pop","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","d","create_component","mount_component","on_mount","on_destroy","m","new_on_destroy","map","filter","destroy_component","detaching","init","options","instance","create_fragment","not_equal","props","parent_component","prop_values","bound","context","Map","skip_bound","ready","ret","rest","fill","make_dirty","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","[object Object]","this","$destroy","index","indexOf","splice","$$props","obj","$$set","keys","subscriber_queue","readable","start","writable","stop","subscribers","set","new_value","run_queue","s","invalidate","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","values","pending","cleanup","sync","result","unsubscribers","storage","key","getItem","JSON","parse","setItem","stringify","ogStore","ogWritable","ogSet","ogGet","input","store2","get","generator","window","sessionStorage","module","n","t","f","require","u","code","exports","1","jsforce","browser","../api","../core","./client","2","3","inherits","util","events","lodash/core","readable-stream","multistream","./VERSION","./cache","./connection","./core","./csv","./date","./http-api","./logger","./oauth2","./process","./promise","./query","./quick-action","./record-stream","./record","./soap","./sobject","./soql-builder","./transport","4","ReportInstance","report","id","_report","_conn","prototype","retrieve","conn","url","_baseUrl","join","request","thenCall","Report","describe","del","method","clone","reportMetadata","params","headers","Content-Type","body","explain","exec","execute","isFunction","details","metadata","executeAsync","instances","Dashboard","components","componentIds","isString","status","refresh","folderid","isObject","folderId","Analytics","reports","dashboard","dashboards","on","analytics","../promise","5","Apex","instanceUrl","_createRequestParams","path","_headers","test","undefined","post","put","patch","apex","6","process","stream","Duplex","joinStreams","RecordStream","HttpApi","Job","bulk","operation","jobId","_bulk","state","_batches","EventEmitter","info","_jobInfo","check","open","self","_logger","toLowerCase","extIdField","concurrencyMode","assignmentRuleId","_request","responseType","res","emit","jobInfo","err","createBatch","batch","Batch","batchId","logger","_waitAssign","debug","object","list","batchInfoList","batchInfo","close","_changeState","abort","job","super_","objectMode","_deferred","defer","_setupDataStreams","Writable","converterOptions","nullValue","_uploadStream","Serializable","_uploadDataStream","_downloadStream","Parsable","_downloadDataStream","end","once","pipe","_createRequestStream","dataStream","_dataStream","_write","enc","cb","write","read","_read","size","chunk","record","Id","attributes","_result","rdeferred","promise","reject","String","onResolved","onReject","onProgress","nextTick","poll","interval","timeout","startTime","Date","getTime","now","parseInt","numberRecordsProcessed","stateMessage","setTimeout","results","success","Success","errors","fail","resultId","resultStream","resultDataStream","BulkApi","apply","arguments","beforeSend","accessToken","isSessionExpired","response","statusCode","hasErrorInResponseBody","error","parseError","errorCode","exceptionCode","message","exceptionMessage","Bulk","pollInterval","pollTimeout","baseUrl","version","load","constructor","createJob","cleanupOnError","query","soql","replace","match","recordStream","streams","../http-api","../record-stream","_process","7","Chatter","_normalizeUrl","Request","resource","queryParams","Resource","requests","batchRequests","batchDeferreds","deferred","_promise","batchParams","chatter","_chatter","_params","richInput","onResolve","qstring","encodeURIComponent","_url","8","./analytics","./apex","./bulk","./chatter","./metadata","./streaming","./tooling","9","Buffer","SOAP","Metadata","convertToSaveResult","saveResult","convertToUpsertResult","upsertResult","created","convertToMetadataInfo","rec","metadataInfo","$","_invoke","xmlns","endpointUrl","invoke","createAsync","Number","convert","md","AsyncResultLocator","createSync","readSync","fullNames","records","updateAsync","updateMetadata","umd","updateSync","upsertSync","upsert","deleteAsync","fullName","deleteSync","rename","oldFullName","newFullName","checkStatus","ids","asyncProcessId","asOfVersion","metadataObjects","mo","childXmlNames","inFolder","metaFile","partialSaveAllowed","testRequired","queries","RetrieveResultLocator","checkRetrieveStatus","deploy","zipInput","bufs","concat","toString","zipContentB64","ZipFile","DeployOptions","DeployResultLocator","checkDeployStatus","includeDetails","isBoolean","done","checkOnly","ignoreWarnings","rollbackOnError","numberComponentErrors","numberComponentsDeployed","numberComponentsTotal","numberTestErrors","numberTestsCompleted","numberTestsTotal","meta","_meta","_results","_isArray","convertType","_ids","errMsg","resultArr","len","complete","Readable","reading","zipFile","../soap","buffer","10","SoapApi","schema","Schemas","convertLead","leadConverts","LeadConvertResult","leadId","accountId","contactId","opportunityId","merge","mergeRequests","MergeResult","mergedRecordIds","updatedRelatedIds","emptyRecycleBin","EmptyRecycleBinResult","describeTabs","DescribeTabSetResult","label","logoUrl","namespace","selected","tabs","colors","theme","color","iconUrl","icons","height","width","contentType","custom","miniIconUrl","sobjectName","getServerTimestamp","GetServerTimestampResult","timestamp","getUserInfo","GetUserInfoResult","accessibilityMode","currencySymbol","orgAttachmentFileSizeLimit","orgDefaultCurrencyIsoCode","orgDisallowHtmlAttachments","orgHasPersonAccounts","organizationId","organizationMultiCurrency","organizationName","profileId","roleId","sessionSecondsValid","userDefaultCurrencyIsoCode","userEmail","userFullName","userId","userLanguage","userLocale","userName","userTimeZone","userType","userUiSkin","setPassword","password","resetPassword","sObjects","SaveResult","args","@xmlns","@xmlns:ns1","ns1:sObjects","externalIdFieldName","UpsertResult","ns1:externalIDFieldName","DeleteResult","ns1:ids","soap","11","StreamingExtension","AuthFailure","failureCallback","incoming","channel","advice","reconnect","Replay","replayId","REPLAY_FROM_KEY","_extensionEnabled","_replay","_channel","setExtensionEnabled","extensionEnabled","setReplay","replay","setChannel","ext","outgoing","replayFromMap","12","Faye","Topic","streaming","_streaming","listener","Channel","_name","_id","sobject","findOne","Name","channelUrl","requestPost","pushEvents","rets","Streaming","_createClient","forChannelName","extensions","needsReplayFix","fayeClient","Client","setHeader","extension","addExtension","_dispatcher","getConnectionTypes","selectTransport","_transport","batching","_getFayeClient","channelName","clientType","_fayeClients","topic","_topics","channelId","createClient","./streaming-extension","faye","13","Cache","Tooling","cache","cacheOptions","describe$","makeCacheable","makeResponseCacheable","describeSObject$","describeSObject","describeGlobal$","describeGlobal","initialize","sobjects","removeAllListeners","bind","so","executeAnonymous","runTestsAsynchronous","classids","runTestsSynchronous","classnames","completions","tooling","../cache","14","parseHeaders","hs","split","line","pair","supported","Sfdc","canvas","createRequest","signedRequest","str","sent","send","settings","client","responseHeaders","payload","failure","ajax","encoding","15","qs","Connection","OAuth2","popupWin","w","h","left","screen","top","handleCallbackResponse","checkCallbackResponse","localStorage","removeItem","states","prefix","promptType","cli","_storeTokens","location","hash","_storeError","substring","access_token","search","clientIdx","_prefix","connection","config","tokens","_getTokens","login","extend","_prompt","oauth2","rand","Math","random","authzUrl","getAuthorizationUrl","response_type","scope","pw","href","_removeTokens","pid","setInterval","closed","clearInterval","_getError","error_description","isLoggedIn","logout","regexp","RegExp","cookie","issuedAt","userInfo","idUrl","instance_url","issued_at","../connection","../oauth2","querystring","16","_index","jsonpParam","toUpperCase","cbFuncName","script","src","documentElement","content-type","clearTimeout","17","getResponseHeaderNames","xhr","headerLines","getAllResponseHeaders","headerLine","XMLHttpRequest","header","setRequestHeader","onreadystatechange","readyState","headerNames","headerName","getResponseHeader","18","CacheEntry","fetching","_value","isUndefined","_entries","createCacheKey","entry","k","$fn","19","Logger","Query","SObject","QuickAction","Transport","Process","defaults","loginUrl","MAX_DML_COUNT","logLevel","clientId","clientSecret","redirectUri","proxyUrl","httpProxy","maxRequest","ProxyTransport","HttpProxyTransport","callOptions","refreshFn","oauthRefreshFn","_refreshDelegate","SessionRefreshDelegate","refreshToken","parseIdUrl","parseSignedRequest","sr","msg","json","formatDate","date","pad","number","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","idUrls","createUsernamePasswordRefreshFn","username","esc","serverUrl","sessionId","oauthToken","CanvasTransport","limitInfo","_sessionType","httpApi","apiUsage","used","limit","requestGet","requestPut","requestPatch","requestDelete","console","log","queryAll","scanAll","queryMore","locator","_ensureVersion","majorVersion","versions","_retrieveMany","_retrieveParallel","_retrieveSingle","fields","all","catch","allOrNone","field","_toRecordResult","content","_createMany","_createParallel","_createSingle","sobjectType","allowRecursive","rets1","rets2","_updateMany","_updateParallel","_updateSingle","noContentResponse","extId","_destroyMany","_destroyParallel","_destroySingle","sosl","identity","user_id","organization_id","authorize","requestToken","refresh_token","loginByOAuth2","loginBySoap","authenticate","soapLoginEndpoint","httpRequest","SOAPAction","faultstring","orgId","revoke","logoutByOAuth2","logoutBySoap","revokeToken","recent","isNumber","recentItems","updated","deleted","limits","quickActions","quickAction","actionName","20","VERSION","SfDate","./require","21","csvParse","csvParseSync","csvStringify","csvStringifySync","parseCSV","columns","toCSV","parseCSVStream","serializeCSVStream","csv-parse","csv-parse/lib/sync","csv-stringify","csv-stringify/lib/sync","22","literal","_literal","zeropad","toJSON","toDateLiteral","parseDate","yy","getFullYear","mm","getMonth","dd","getDate","dstr","toDateTimeLiteral","hh","mi","ss","dtstr","setUTCFullYear","setUTCDate","setUTCMonth","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","offset","setTime","setFullYear","setDate","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","SfDateLiterals","YESTERDAY","TODAY","TOMORROW","LAST_WEEK","THIS_WEEK","NEXT_WEEK","LAST_MONTH","THIS_MONTH","NEXT_MONTH","LAST_90_DAYS","NEXT_90_DAYS","LAST_N_DAYS","NEXT_N_DAYS","NEXT_N_WEEKS","LAST_N_WEEKS","NEXT_N_MONTHS","LAST_N_MONTHS","THIS_QUARTER","LAST_QUARTER","NEXT_QUARTER","NEXT_N_QUARTERS","LAST_N_QUARTERS","THIS_YEAR","LAST_YEAR","NEXT_YEAR","NEXT_N_YEARS","LAST_N_YEARS","THIS_FISCAL_QUARTER","LAST_FISCAL_QUARTER","NEXT_FISCAL_QUARTER","NEXT_N_FISCAL_QUARTERS","LAST_N_FISCAL_QUARTERS","THIS_FISCAL_YEAR","LAST_FISCAL_YEAR","NEXT_FISCAL_YEAR","NEXT_N_FISCAL_YEARS","LAST_N_FISCAL_YEARS","createLiteralBuilder","num","23","_responseType","transport","_noContentResponse","parseJSON","parseXML","parseString","explicitArray","parseText","refreshDelegate","getRefreshDelegate","lastInstanceUrl","onResume","_refreshing","requestTime","responseTime","isErrorResponse","getError","getResponseBody","Authorization","getResponseContentType","parseResponseBody","parseBody","_refreshFn","since","_lastRefreshedAt","xml2js","24","LogLevels","INFO","_logLevel","DEBUG","WARN","ERROR","FATAL","level","createLoggerFunction","25","authzServiceUrl","tokenServiceUrl","revokeServiceUrl","client_id","redirect_uri","grant_type","client_secret","_postParams","token","26","ProcessRule","rule","approval","ApprovalProcess","rules","trigger","contextIds","approvals","req","_createRequest","actionType","contextId","comments","ApprovalProcessRequest","submit","approve","workitemId","27","Deferred","promise/lib/es6-extensions","28","SOQLBuilder","_soql","_locator","_config","select","includes","include","sort","_options","maxFetch","autoFetch","responseTarget","ResponseTargets","QueryResult","_executed","_finished","_chaining","_fields","where","conditions","skip","orderby","dir","childRelName","childConfig","table","childQuery","SubQuery","_children","crname","setResponseTarget","promiseCallback","Records","onRecord","removeListener","_execute","toSOQL","totalFetched","totalSize","SingleRecord","Count","numRecords","nextRecordsUrl","addListener","_expandFields","_parent","findRelationTable","expandAsteriskField","expandedFields","flatten","rname","ptable","describeCache","upperRname","childRelation","find","childRelationships","cr","relationshipName","childSObject","fpath","shift","rfield","referenceTo","fpaths","createSOQL","DEFAULT_BULK_THRESHOLD","thresholdNum","allowBulk","bulkThreshold","handleRecord","deleteBulk","handleEnd","mapping","updateStream","recordMapStream","updateBulk","parent","29","_path","defaultValues","30","Transform","PassThrough","CSV","_transform","converter","DataStreamConverters","serialize","convertRecordForSerialization","reduce","urec","precord","prec","pkey","createPipelineStream","s1","s2","pipeline","source","unpipe","dest","_parserStream","highWaterMark","ev","mapStream","noeval","mapped","prop","evalMapping","$0","v","isNull","filterStream","CSVStreamConverter","csv","31","RecordReference","blob","fieldName","32","required","./_required","33","_endpointUrl","_xmlns","lookupValue","propRegExps","toXML","attrs","elems","_createEnvelope","faultcode","SessionHeader","CallOptions","34","Record","layouts$","layouts","compactLayouts$","compactLayouts","approvalLayouts$","approvalLayouts","count","count()","bulkload","insertBulk","createBulk","upsertBulk","destroyBulk","deleteHardBulk","destroyHardBulk","layoutName","listviews","listview","ListView","35","createFieldsClause","cond","createConditionClause","createOrderByClause","childQueries","cquery","operator","depth","conds","op","createFieldExpression","expr","paren","opMap","=","$eq","!=","$ne",">","$gt","<","$lt",">=","$gte","<=","$lte","$like","$nlike","$in","$nin","$includes","$excludes","$exists","sfop","valueExpr","createValueExpression","escapeSOQLString","flag","36","jsonp","followAllRedirects","env","HTTP_PROXY","proxy","HTTP_TIMEOUT","LOCATION_BASE_URL","apiHost","normalizeApiHost","host","streamify","factory","_then","_getHttpRequestModule","JsonpTransport","_jsonpParam","_signedRequest","_proxyUrl","proxyParams","salesforceproxy-endpoint","_httpProxy","./browser/canvas","./browser/jsonp","37","rawAsap","freeTasks","pendingErrors","requestErrorThrow","makeRequestCallFromTimer","throwFirstError","asap","task","rawTask","RawTask","onerror","./raw","38","global","queue","requestFlush","capacity","currentIndex","scan","newLength","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromMutationObserver","toggle","observer","observe","characterData","timeoutHandle","handleTimer","intervalHandle","39","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","Uint8Array","charCodeAt","getLens","b64","validLen","lens","placeHoldersLen","_byteLength","tmp","arr","curByte","tripletToBase64","encodeChunk","uint8","output","extraBytes","parts","maxChunkLength","len2","40","41","base64","ieee754","SlowBuffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","typedArraySupport","__proto__","foo","createBuffer","RangeError","buf","arg","encodingOrOffset","allocUnsafe","TypeError","isArrayBuffer","fromArrayBuffer","fromString","fromObject","assertSize","alloc","checked","string","isEncoding","actual","fromArrayLike","array","byteOffset","isBuffer","copy","ArrayBuffer","isView","numberIsNaN","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","val","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","j","hexWrite","remaining","strLen","parsed","substr","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","min","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","defineProperty","Symbol","species","configurable","enumerable","poolSize","allocUnsafeSlow","_isBuffer","compare","x","y","pos","swap16","swap32","swap64","toLocaleString","equals","inspect","max","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","out","toHex","bytes","checkOffset","checkInt","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","INVALID_BASE64_RE","base64clean","trim","units","Infinity","leadSurrogate","byteArray","hi","lo","dst","base64-js","42","objectToString","isNullOrUndefined","isSymbol","isRegExp","re","isDate","isError","isPrimitive","../../is-buffer/index.js","43","Parser","StringDecoder","isObjLiteral","called","chunks","parser","objname","base","base1","base10","base11","base12","base13","base14","base15","base16","base2","base3","base4","base5","base6","base7","base8","base9","rowDelimiter","delimiter","quote","escape","comment","ltrim","rtrim","auto_parse","auto_parse_date","isNaN","relax","relax_column_count","skip_empty_lines","max_limit_on_data_read","skip_lines_with_empty_values","lines","skipped_line_count","empty_line_count","is_int","is_float","parseFloat","decoder","quoting","commenting","nextChar","closingQuote","rawBuf","rowDelimiterLength","__write","_flush","__push","lineAsColumns","ref","row","call_column_udf","line_length","to","raw","chars","areNextCharsDelimiter","areNextCharsRowDelimiters","char","escapeIsQuote","isDelimiter","isEscape","isNextCharAComment","isQuote","isRowDelimiter","isRowDelimiterLength","nextCharPos","ref1","ref2","ref3","ref4","ref5","remainingBuffer","wasCommenting","_this","some","rd","charAt","trimRight","_obj","_test","getPrototypeOf","string_decoder","44","./index","45","Stringifier","stringifier","opts","quoted","quotedEmpty","quotedString","eof","formatters","bool","countWriten","labels","preserve","_line","column","containsEscape","containsLinebreak","containsQuote","containsdelimiter","newLine","shouldQuote","lodash.get","46","47","objectCreate","objectCreatePolyfill","objectKeys","objectKeysPolyfill","Function","functionBindPolyfill","_events","hasOwnProperty","_eventsCount","_maxListeners","hasDefineProperty","defaultMaxListeners","$getMaxListeners","that","emitNone","handler","isFn","listeners","arrayClone","emitOne","arg1","emitTwo","arg2","emitThree","arg3","emitMany","_addListener","prepend","existing","newListener","unshift","warned","emitter","warn","onceWrapper","fired","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","unwrapListeners","listenerCount","spliceOne","proto","F","setMaxListeners","getMaxListeners","er","doError","prependListener","prependOnceListener","position","originalListener","rawListeners","eventNames","Reflect","ownKeys","48","constants","Logging","Scheduler","wrapper","./mixins/logging","./protocol/client","./protocol/scheduler","./util/constants","49","errback","_resolve","_reject","reason","seconds","_timer","setDeferredStatus","../util/promise","50","LOG_LEVELS","fatal","writeLog","messageArgs","banner","klass","className","../util/to_json","51","Publisher","countListeners","eventType","unbind","tuple","../util/event_emitter","../util/extend","52","addTimeout","delay","_timeouts","removeTimeout","removeAllTimeouts","53","Class","Grammar","isUnused","HANDSHAKE","CONNECT","SUBSCRIBE","UNSUBSCRIBE","DISCONNECT","META","SERVICE","expand","segments","channels","unparse","isValid","CHANNEL_NAME","CHANNEL_PATTERN","isMeta","isService","isSubscribable","_channels","getKeys","remove","hasSubscription","names","subscription","distributeMessage","../mixins/publisher","../util/class","./grammar","54","URI","validateOptions","Deferrable","Dispatcher","Extensible","Publication","Subscription","UNCONNECTED","CONNECTING","CONNECTED","DISCONNECTED","RETRY","NONE","CONNECTION_TIMEOUT","DEFAULT_ENDPOINT","INTERVAL","endpoint","_messageId","_state","_responseCallbacks","_advice","_receiveMessage","Event","onbeforeunload","_disabled","disconnect","addWebsocketExtension","disable","feature","handshake","MANDATORY_CONNECTION_TYPES","_sendMessage","BAYEUX_VERSION","supportedConnectionTypes","successful","retry","connect","_connectRequest","connectionType","_cycleConnection","force","publish","publication","_generateMessageId","pipeThroughExtensions","sendMessage","_handleAdvice","_deliverMessage","../mixins/deferrable","../mixins/logging","../util/array","../util/browser","../util/constants","../util/uri","../util/validate_options","./channel","./dispatcher","./error","./extensible","./publication","./subscription","55","cookies","MAX_REQUEST_SIZE","DEFAULT_RETRY","UP","DOWN","_client","_alternates","endpoints","CookieJar","_envelopes","_scheduler","scheduler","transports","wsExtensions","_proxy","origin","exts","websocketExtensions","tls","ca","maxRequestSize","endpointFor","transportTypes","attempts","deadline","envelope","_sendEnvelope","timer","isDeliverable","handleError","getTimeout","handleResponse","reply","succeed","immediate","getInterval","../transport","../util/cookies","./scheduler","56","versionMismatch","conntypeMismatch","extMismatch","badRequest","clientUnknown","parameterMissing","channelForbidden","channelUnknown","channelInvalid","extUnknown","publishFailed","serverError","57","_extensions","added","removeExtension","removed","stage","58","59","60","made","61","_callback","_context","_cancelled","withChannel","_withChannel","cancel","62","register","./cors","./event_source","./jsonp","./web_socket","./xhr","63","CORS","encode","messages","xhrClass","XDomainRequest","cleanUp","_pending","onload","ontimeout","onprogress","replies","responseText","_receive","_handleError","isUsable","dispatcher","isSameOrigin","protocol","withCredentials","../util/set","64","copyObject","XHR","EventSource","_xhr","pathname","socket","onopen","_everConnected","onmessage","_socket","usable","sockets","eventsource","../util/copy_object","65","JSONP","_cbCount","head","getElementsByTagName","callbackName","getCallbackName","66","Cookie","Timeouts","DEFAULT_PORTS","http:","https:","ws:","wss:","MAX_DELAY","_outbox","_findProxy","_flushLargeBatch","_publish","_connectMessage","_makePromise","_requestPromise","_resolvePromise","last","_getCookies","getCookiesSync","cookieString","_storeCookies","setCookie","setCookieSync","upcase","REQUEST_METHOD","allowed","disabled","asyncEach","_transports","resume","connType","connEndpoint","../mixins/timeouts","../protocol/channel","67","ws","WebSocket","_unloaded","_createSocket","_ping","onclose","wasConnected","toArray","getSocketUrl","PROTOCOLS","websocket","../util/websocket","68","ActiveXObject","navigator","product","69","commonElement","lista","listb","needle","iterator","calls","looping","iterate","loop","70","_registry","eventName","addEventListener","attachEvent","_element","_type","_handler","removeEventListener","detachEvent","onunload","71","methods","bridge","./extend","72","ID_LENGTH","JSONP_CALLBACK","CONNECTION_TYPES","73","74","75","xs","g","76","overwrite","77","PENDING","FULFILLED","REJECTED","RETURN","THROW","_onFulfilled","_onRejected","onFulfilled","onRejected","next","registerOnFulfilled","registerOnRejected","_reason","outcome","fulfill","promises","race","78","item","isEmpty","member","./class","79","80","isURI","uri","hostname","port","pairs","consume","pattern","decodeURIComponent","queryString","81","validKeys","./array","82","WS","MozWebSocket","protocols","83","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","abs","floor","LN2","84","ctor","superCtor","TempCtor","85","isSlowBuffer","86","87","FUNC_ERROR_TEXT","HASH_UNDEFINED","INFINITY","funcTag","genTag","symbolTag","reIsDeepProp","reIsPlainProp","reLeadingDot","rePropName","reRegExpChar","reEscapeChar","reIsHostCtor","freeGlobal","freeSelf","root","getValue","isHostObject","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","reIsNative","getNative","nativeCreate","symbolProto","symbolToString","Hash","entries","hashClear","__data__","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","eq","baseGet","isKey","castPath","toKey","baseIsNative","isMasked","toSource","baseToString","stringToPath","isKeyable","func","memoize","resolver","memoized","other","tag","isObjectLike","defaultValue","88","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","WRAP_BIND_FLAG","WRAP_PARTIAL_FLAG","MAX_SAFE_INTEGER","argsTag","arrayTag","asyncTag","boolTag","dateTag","errorTag","numberTag","objectTag","proxyTag","regexpTag","stringTag","reUnescapedHtml","reHasUnescapedHtml","reIsUint","htmlEscapes","&","\"","'","freeExports","nodeType","freeModule","arrayPush","baseFindIndex","predicate","fromIndex","fromRight","baseProperty","basePropertyOf","baseReduce","collection","iteratee","accumulator","initAccum","eachFunc","baseValues","baseMap","escapeHtmlChar","overArg","transform","idCounter","nativeObjectToString","oldDash","propertyIsEnumerable","nativeIsFinite","nativeKeys","nativeMax","lodash","LodashWrapper","baseCreate","chainAll","__wrapped__","__actions__","__chain__","assignValue","objValue","baseAssignValue","baseDelay","wait","baseEach","createBaseEach","baseForOwn","baseEvery","baseExtremum","comparator","current","computed","baseFilter","baseFlatten","isStrict","isFlattenable","baseFor","createBaseFor","baseFunctions","baseGetTag","baseGt","baseIsArguments","baseIsDate","baseIsEqual","bitmask","customizer","stack","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objStack","othStack","equalArrays","equalByTag","objIsWrapped","othIsWrapped","equalObjects","baseIsRegExp","baseIteratee","baseMatches","baseLt","isArrayLike","basePick","baseRest","setToString","overRest","baseSlice","copyArray","baseSome","baseWrapperValue","actions","action","thisArg","compareAscending","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","isNew","newValue","createAssigner","assigner","sources","iterable","keysFunc","createCtor","Ctor","thisBinding","createFind","findIndexFunc","createPartial","partials","isBind","argsIndex","argsLength","leftIndex","leftLength","isPartial","othLength","seen","compared","arrValue","othValue","othIndex","objProps","objLength","skipCtor","objCtor","othCtor","flatRest","isArguments","isIndex","isIterateeCall","nativeKeysIn","otherArgs","compact","Boolean","findIndex","toInteger","flattenDeep","isReflexive","chain","tap","interceptor","thru","wrapperValue","every","guard","sortBy","criteria","before","toNumber","negate","isLength","isEqual","assign","assignIn","properties","keysIn","propsIndex","propsLength","pick","paths","matches","mixin","methodNames","isFunc","methodName","noConflict","uniqueId","each","first","chainName","retUnwrapped","valueOf","89","MultiStream","destroyed","_drained","_forwarding","_current","_toStreams2","toStreams2Obj","toStreams2Buf","_queue","_attachErrorListener","_next","toStreams2","_readableState","wrap","_forward","_gotNextStream","onReadable","onClose","ended","onEnd","onError","90","91","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","Item","title","argv","off","binding","cwd","chdir","umask","92","LAST_ERROR","IS_ERROR","getThen","ex","tryCallOne","tryCallTwo","_40","_65","_55","_72","doResolve","safeThen","handle","Handler","_37","handleResolved","finale","_87","_61","asap/raw","93","TRUE","valuePromise","FALSE","NULL","UNDEFINED","ZERO","EMPTYSTRING","./core.js","94","sep","maxKeys","kstr","vstr","idx","95","stringifyPrimitive","ks","96","decode","./decode","./encode","97","./lib/_stream_duplex.js","98","pna","allowHalfOpen","onend","_writableState","onEndNT","_destroy","./_stream_readable","./_stream_writable","core-util-is","process-nextick-args","99","./_stream_transform","100","ReadableState","EElistenerCount","Stream","OurUint8Array","_uint8ArrayToBuffer","_isUint8Array","debugUtil","debuglog","BufferList","destroyImpl","kProxyEvents","isDuplex","readableObjectMode","hwm","readableHwm","readableHighWaterMark","defaultHwm","pipes","pipesCount","flowing","endEmitted","needReadable","emittedReadable","readableListening","resumeScheduled","defaultEncoding","awaitDrain","readingMore","readableAddChunk","addToFront","skipChunkCheck","onEofChunk","chunkInvalid","addChunk","maybeReadMore","needMoreData","emitReadable","_undestroy","undestroy","isPaused","setEncoding","MAX_HWM","computeNewHighWaterMark","howMuchToRead","emitReadable_","flow","maybeReadMore_","pipeOnDrain","nReadingNextTick","resume_","fromList","fromListPartial","hasStrings","copyFromBufferString","copyFromBuffer","nb","tail","endReadable","endReadableNT","nOrig","doRead","pipeOpts","endFn","stdout","stderr","onunpipe","unpipeInfo","hasUnpiped","ondrain","cleanedUp","onfinish","ondata","needDrain","increasedAwaitDrain","pause","dests","paused","_fromList","./_stream_duplex","./internal/streams/BufferList","./internal/streams/destroy","./internal/streams/stream","isarray","safe-buffer","string_decoder/","101","afterTransform","ts","_transformState","transforming","writecb","writechunk","rs","needTransform","writeencoding","prefinish","_this2","err2","102","setImmediate","CorkedRequest","finish","onCorkedFinish","asyncWrite","WritableState","internalUtil","deprecate","realHasInstance","nop","writableObjectMode","writableHwm","writableHighWaterMark","finalCalled","ending","finished","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writelen","bufferedRequest","lastBufferedRequest","pendingcb","prefinished","errorEmitted","bufferedRequestCount","corkedRequestsFree","writev","_writev","final","_final","writeAfterEnd","validChunk","valid","decodeChunk","writeOrBuffer","isBuf","newChunk","doWrite","onwriteError","finishMaybe","onwriteStateUpdate","needFinish","clearBuffer","afterWrite","onwriteDrain","holder","allBuffers","callFinal","need","endWritable","corkReq","getBuffer","hasInstance","cork","uncork","setDefaultEncoding","timers","util-deprecate","103","_classCallCheck","Constructor","copyBuffer","104","readableDestroyed","writableDestroyed","emitErrorNT","105","106","./readable","107","./lib/_stream_passthrough.js","./lib/_stream_readable.js","./lib/_stream_transform.js","./lib/_stream_writable.js","108","109","110","copyProps","SafeBuffer","111","sax","strict","opt","SAXParser","SAXStream","createStream","MAX_BUFFER_LENGTH","buffers","clearBuffers","q","bufferCheckPosition","lowercase","lowercasetags","looseCase","tags","closedRoot","sawRoot","noscript","S","BEGIN","strictEntities","ENTITIES","XML_ENTITIES","attribList","ns","rootNS","trackPosition","checkBufferLength","maxAllowed","maxActual","closeText","emitNode","cdata","flushBuffers","EVENTS","streamWraps","_parser","me","_decoder","SD","CDATA","DOCTYPE","XML_NAMESPACE","XMLNS_NAMESPACE","xml","nameStart","nameBody","entityStart","entityBody","isWhitespace","isAttribEnd","isMatch","regex","notMatch","stringFromCharCode","fromCodePoint","STATE","BEGIN_WHITESPACE","TEXT","TEXT_ENTITY","OPEN_WAKA","SGML_DECL","SGML_DECL_QUOTED","DOCTYPE_QUOTED","DOCTYPE_DTD","DOCTYPE_DTD_QUOTED","COMMENT_STARTING","COMMENT","COMMENT_ENDING","COMMENT_ENDED","CDATA_ENDING","CDATA_ENDING_2","PROC_INST","PROC_INST_BODY","PROC_INST_ENDING","OPEN_TAG","OPEN_TAG_SLASH","ATTRIB","ATTRIB_NAME","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_CLOSED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG","CLOSE_TAG_SAW_WHITE","SCRIPT","SCRIPT_ENDING","amp","gt","lt","quot","apos","AElig","Aacute","Acirc","Agrave","Aring","Atilde","Auml","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","Iacute","Icirc","Igrave","Iuml","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","aelig","agrave","aring","atilde","auml","ccedil","eacute","ecirc","egrave","eth","euml","iacute","icirc","igrave","iuml","ntilde","oacute","ocirc","ograve","oslash","otilde","ouml","szlig","thorn","uacute","ucirc","ugrave","uuml","yacute","yuml","reg","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","ordf","laquo","not","shy","macr","deg","plusmn","sup1","sup2","sup3","acute","micro","para","middot","cedil","ordm","raquo","frac14","frac12","frac34","iquest","times","divide","OElig","oelig","Scaron","scaron","Yuml","fnof","circ","tilde","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","bull","hellip","permil","prime","Prime","lsaquo","rsaquo","oline","frasl","euro","image","weierp","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams","textNode","textopts","normalize","strictFail","newTag","tagName","qname","qualName","attrib","attribName","attribValue","qn","openTag","selfClosing","nv","isSelfClosing","closeTag","closeTo","parseEntity","entity","entityLC","numStr","beginWhiteSpace","startTagPosition","starti","sgmlDecl","procInstName","procInstBody","doctype","returnState","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","112","EE","_isStdio","didOnEnd","readable-stream/duplex.js","readable-stream/passthrough.js","readable-stream/readable.js","readable-stream/transform.js","readable-stream/writable.js","113","_normalizeEncoding","retried","normalizeEncoding","nenc","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckIncomplete","utf8CheckExtraBytes","utf8Text","total","utf8End","114","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_clearFn","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","process/browser.js","115","deprecated","trace","116","117","formatRegExp","format","objects","noDeprecation","throwDeprecation","traceDeprecation","debugEnviron","debugs","stylize","stylizeNoColor","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","style","styles","arrayToHash","recurseTimes","primitive","formatPrimitive","visibleKeys","getOwnPropertyNames","formatError","braces","toUTCString","formatArray","formatProperty","reduceToSingleString","simple","desc","getOwnPropertyDescriptor","prev","cur","ar","NODE_DEBUG","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","boolean","null","months","time","getHours","getMinutes","getSeconds","./support/isBuffer","118","stripBOM","119","builder","escapeCDATA","requiresCDATA","wrapCDATA","hasProp","Builder","buildObject","rootObj","attrkey","charkey","render","rootElement","rootName","child","txt","ele","up","att","xmldec","headless","allowSurrogateChars","renderOpts","./defaults","xmlbuilder","120","0.1","explicitCharkey","normalizeTags","ignoreAttrs","mergeAttrs","explicitRoot","validator","explicitChildren","childkey","charsAsChildren","includeWhiteChars","async","attrNameProcessors","attrValueProcessors","tagNameProcessors","valueProcessors","emptyTag","0.2","preserveChildrenOrder","standalone","pretty","indent","newline","chunkSize","121","bom","processItem","processors","__super__","superClass","reset","assignOrPush","processAsync","xmlnskey","saxParser","error1","errThrown","ontext","resultObject","EXPLICIT_CHARKEY","onopentag","processedKey","onclosetag","emptyStr","nodeName","objClone","old","xpath","charChild","#name","oncdata","./bom","./processors","122","prefixMatch","firstCharLowerCase","stripPrefix","parseNumbers","parseBooleans","123","ValidationError","./builder","./parser","124","isPlainObject","125","XMLAttribute","attName","attValue","writer","126","XMLNode","XMLCData","./XMLNode","127","XMLComment","128","XMLDTDAttList","elementName","attributeName","attributeType","defaultValueType","eleName","dtdAttType","dtdAttDefault","dtdAttList","129","XMLDTDElement","dtdElementValue","dtdElement","130","XMLDTDEntity","pe","pubID","sysID","dtdPubID","dtdSysID","nData","dtdNData","dtdEntityValue","dtdEntity","./Utility","131","XMLDTDNotation","dtdNotation","132","XMLDeclaration","xmlVersion","xmlEncoding","xmlStandalone","declaration","133","XMLDocType","documentObject","attList","pEntity","notation","docType","ent","pent","./XMLDTDAttList","./XMLDTDElement","./XMLDTDEntity","./XMLDTDNotation","134","XMLStringWriter","XMLStringifier","XMLDocument","isDocument","writerOptions","./XMLStringWriter","./XMLStringifier","135","XMLElement","XMLProcessingInstruction","XMLRaw","XMLText","XMLDocumentCB","onData","onDataCallback","onEndCallback","currentNode","currentLevel","openTags","documentStarted","documentCompleted","openCurrent","skipNullAttributes","instruction","insTarget","insValue","processingInstruction","rootNodeName","closeNode","openNode","isOpen","isClosed","nod","dat","com","ins","dec","dtd","./XMLAttribute","./XMLCData","./XMLComment","./XMLDeclaration","./XMLDocType","./XMLElement","./XMLProcessingInstruction","./XMLRaw","./XMLText","136","isRoot","rootObject","clonedSelf","clonedChild","137","childNode","lastChild","len1","ignoreDecorators","convertAttKey","separateArrayItems","convertTextKey","convertCDataKey","convertCommentKey","convertRawKey","convertPIKey","insertAfter","commentBefore","commentAfter","instructionBefore","instructionAfter","doc","importDocument","clonedRoot","importXMLBuilder","138","139","140","XMLWriterBase","XMLStreamWriter","isLastRootNode","endline","spacebeforeslash","allowEmpty","./XMLWriterBase","141","textispresent","textispresentwasset","newlinedefault","prettydefault","dontprettytextnodes","142","assertLegalChar","noDoubleEncoding","eleText","elEscape","attEscape","ampregex","143","144","ref6","145","begin","stringWriter","streamWriter","./XMLDocument","./XMLDocumentCB","./XMLStreamWriter","sfConn","loggedUserId","urlLogin","getLocation","hashPosition","qsPosition","loc","$loc","link","hrefVar","updateLink","routes","RouteItem","_sveltesparouter","loose","regexparam","route","userData","_pattern","_keys","startsWith","routesList","componentParams","dispatch","dispatchNextTick","checkConditions","URLSearchParams","iterations","accessTokenValue","instanceUrlValue","serviceWorker","/","Home","/home","/login","Login","/token","Token","/create-shared-bill","CreateSharedBill"],"mappings":"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"}